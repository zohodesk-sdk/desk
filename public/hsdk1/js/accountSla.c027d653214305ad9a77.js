(window.deskappJsonp=window.deskappJsonp||[]).push([[44],{"../components/lib/Button/Button.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=r(n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js")),s=r(n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js")),l=r(n("../components/lib/Button/Button.module.css")),c=n("../components/lib/utils/dummyFunction.js");function r(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.palette,o=e.disabled,s=e.size,c=e.onClick,r=e.rounded,i=e.status,u=e.children,d=e.isBold,m=e.dataId,p=e.needAppearance,b=e.className,f=e.getRef,h=p?l.default[n.toLowerCase()]+" "+(r?l.default.rounded:"")+"   "+(u?l.default["button_"+s.toLowerCase()]:l.default[s.toLowerCase()]):""+l.default.default;return a.default.createElement("button",{className:(b||"")+" "+h+" "+(d?l.default.bold:"")+"  ","data-id":o?m+"_disabled":m,disabled:o||"loading"===i.toLowerCase(),onClick:c,type:"button",ref:f},u||t,"none"!==i&&p&&a.default.createElement("div",{className:l.default.overlay},a.default.createElement("div",{className:"loading"===i.toLowerCase()?l.default.loading:l.default.success},a.default.createElement("div",{className:l.default.element}))))}}]),t}();t.default=i,i.defaultProps={children:null,dataId:"buttonComp",disabled:!1,isBold:!0,needAppearance:!0,onClick:c.dummyFunction,palette:"primary",rounded:!1,size:"medium",status:"none",text:"Button"},i.propTypes={children:s.default.node,className:s.default.string,dataId:s.default.string,disabled:s.default.bool,getRef:s.default.func,isBold:s.default.bool,needAppearance:s.default.bool,onClick:s.default.func,palette:s.default.oneOf(["plainPrimary","plainSecondary","primary","primaryFilled","danger","dangerFilled","secondary","secondaryFilled","successFilled","info"]),rounded:s.default.bool,size:s.default.oneOf(["small","medium","large","xlarge"]),status:s.default.oneOf(["loading","success","none"]),text:s.default.string},i.propTypesDescription={onClick:" ",text:" ",palette:" ",disabled:" ",size:" ",rounded:" ",status:" ",isBold:" ",children:" "}},"./src/actions/ContractActions.js":function(e,t,n){"use strict";n.d(t,"d",function(){return b}),n.d(t,"c",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return g});var o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/toConsumableArray.js"),a=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),l=n.n(s),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),r=n.n(c),i=n("./src/utils/RequestAPI.js"),u=n("./src/utils/Common.js"),d=n("./src/utils/departmentQuery.js"),m=n("./src/constants/index.js"),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js");function b(e){return{types:Object(u.m)("GET_CONTRACT"),callAPI:function(t){return Object(i.a)(m.B+"contracts/"+e,!1,{orgId:t.currentOrgId}).get().then(function(e){return r()(Object(p.b)(e,Object(p.c)(m.R.CONTRACT_L)))}).catch(function(e){return{status:e.status}})}}}var f=function(e){return{types:Object(u.m)("GET_ACCOUNT_CONTRACTS"),callAPI:function(t){var n=Object(d.a)(t,!0);return Object(i.a)(m.B+"contracts?accountId="+e+n+"&sortBy=createdTime",!1,{orgId:t.currentOrgId}).get().then(function(t){var n=204!=t.responseStatus?t.data:[],o={id:e,contracts:n};return Object(p.b)(o,Object(p.c)(m.R.ACCOUNT_L,{mapping:{contracts:Object(p.a)(Object(p.c)(m.R.CONTRACT_L))}}))}).catch(function(e){return{status:e.status}})}}};function h(e,t){return{types:Object(u.m)("DELETE_ACCOUNT_CONTRACT"),callAPI:function(n){var o=n.module.account[e].contracts.filter(function(e){return e!=t});return Object(i.a)(m.B+"contracts/moveToTrash",!1,{orgId:n.currentOrgId}).post("",{contractIds:[t]}).then(function(){return{entities:{account:l()({},e,{id:e,contracts:o})}}}).catch(function(e){return{status:e.status}})}}}var g=function(e,t){return{types:Object(u.m)("CREATE_CONTRACT"),callAPI:function(n){var o=n.module.account[e].contracts;return Object(i.a)(m.B+"contracts",!1,{orgId:n.currentOrgId}).post("",t).then(function(t){return{entities:{account:l()({},e,{id:e,contracts:[t.id].concat(a()(o))}),contract:l()({},t.id,t)}}})}}}},"./src/actions/SLAFormActions.js":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s});var o=function(e){return{type:"OPEN_ACCOUNT_SLA_FORM",data:e}},a=function(){return{type:"CLOSE_ACCOUNT_SLA_FORM"}},s=function(e){return{type:"SLA_FORM_FIELD_CHANGE",data:e}}},"./src/actions/SlaActions.js":function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return m});var o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),a=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/toConsumableArray.js"),l=n.n(s),c=n("./src/utils/RequestAPI.js"),r=n("./src/utils/Common.js"),i=n("./src/constants/index.js"),u=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js");function d(e,t,n,o){var a=""+(e&&"allDepartment"!=e?"&departmentId="+e:"")+(t?"&status="+t:"")+(n?"&from="+n:"")+(o?"&limit="+o:"");return a=a.substring(1,a.length),{types:Object(r.m)("GET_SLAMETAINFO"),callAPI:function(e){return Object(c.a)(i.B+"SLAsMetaInfo"+(a?"?"+a:""),!1,{orgId:e.currentOrgId}).get().then(function(e){return Object(u.b)(204!=e.responseStatus?e.data:[],Object(u.a)(Object(u.c)(i.R.SLA_L)))}).catch(function(e){return{status:e.status}})}}}var m=function(e,t,n){var o=n?"ADD_ACCOUNT_SLA":"REMOVE_ACCOUNT_SLA";return{types:Object(r.m)(o),callAPI:function(o){var s=o.module.account[e].associatedSLAIds||[],r=void 0;return r=n?[].concat(l()(s),[t]):s.filter(function(e){return e!=t}),Object(c.a)(i.B+"accounts/"+e,!1,{orgId:o.currentOrgId}).patch("",{associatedSLAIds:r}).then(function(){return{entities:{account:a()({},e,{associatedSLAIds:r})}}}).catch(function(e){return{status:e.status}})}}}},"./src/components/Subtab/Loading/Loading.js":function(e,t,n){"use strict";var o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),l=n.n(s),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),r=n.n(c),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(i),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),b=n.n(p),f=n("./src/components/Subtab/Loading/SubtabLoading.module.css"),h=n.n(f),g=n("../components/lib/Layout/index.js"),y=function(e){function t(){return l()(this,t),u()(this,(t.__proto__||a()(t)).apply(this,arguments))}return m()(t,e),r()(t,[{key:"render",value:function(){return b.a.createElement(g.Container,{alignBox:"row",align:"both",className:h.a.container},b.a.createElement(g.Box,{className:h.a.dot}),b.a.createElement(g.Box,{className:h.a.dot}),b.a.createElement(g.Box,{className:h.a.dot}),b.a.createElement(g.Box,{className:h.a.dot}),b.a.createElement(g.Box,{className:h.a.dot}),b.a.createElement(g.Box,{className:h.a.dot}))}}]),t}(b.a.Component);t.a=y},"./src/components/account/accountsla/AccountSlaProfile/AccountSlaProfile.module.css":function(e,t,n){e.exports={section:"zd-accountslaprofile-section",part:"zd-accountslaprofile-part",icon:"zd-accountslaprofile-icon",rgt:"zd-accountslaprofile-rgt",user:"zd-accountslaprofile-user zd6063afa107",contact:"zd-accountslaprofile-contact",phone:"zd-accountslaprofile-phone",fRight:"zd-accountslaprofile-fRight",iconSize:"zd-accountslaprofile-iconSize",iconEditDel:"zd-accountslaprofile-iconEditDel",iconEdit:"zd-accountslaprofile-iconEdit",iconDel:"zd-accountslaprofile-iconDel"}},"./src/components/customerProperties/followers/EmptyMessage/EmptyMessage.js":function(e,t,n){"use strict";var o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),l=n.n(s),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),r=n.n(c),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(i),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),b=n.n(p),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),h=n.n(f),g=n("./src/components/customerProperties/followers/EmptyMessage/EmptyMessage.module.css"),y=n.n(g),_=function(e){function t(e){return l()(this,t),u()(this,(t.__proto__||a()(t)).call(this,e))}return m()(t,e),r()(t,[{key:"render",value:function(){var e=this.props.text;return b.a.createElement("div",{className:y.a.message},e)}}]),t}(p.Component);t.a=_,_.propTypes={text:h.a.string.isRequired}},"./src/components/detailsubtab/leftpanel/LeftPanelHeader/LeftPanelHeader.js":function(e,t,n){"use strict";var o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),l=n.n(s),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),r=n.n(c),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(i),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),b=n.n(p),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),h=n.n(f),g=n("./src/components/detailsubtab/leftpanel/LeftPanelHeader/LeftPanelHeader.module.css"),y=n.n(g),_=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),j=n.n(_),A=function(e){function t(e){l()(this,t);var n=u()(this,(t.__proto__||a()(t)).call(this,e));return n.openUrl=n.openUrl.bind(n),n.editEntity=n.editEntity.bind(n),n.deleteEntity=n.deleteEntity.bind(n),n}return m()(t,e),r()(t,[{key:"openUrl",value:function(e){return function(){return window.open(e,"_blank")}}},{key:"deleteEntity",value:function(){var e=this.props,t=e.deleteEntity;t(e.entityId)}},{key:"editEntity",value:function(){var e=this.props,t=e.editEntity;t(e.entityId,e.entity)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.viewUrl,o=e.showActions,a=e.needBackBtn,s=e.showContactCrmInfo;return b.a.createElement("div",{className:y.a.followTitle},a?b.a.createElement("span",{className:y.a.backIcon,onClick:s},b.a.createElement(j.a,{name:"ZD-arrowLeft2",iconClass:y.a.iconSize})):null,b.a.createElement("span",{className:y.a.user},t),o||n?b.a.createElement("span",{className:y.a.fRight},o?b.a.createElement(b.a.Fragment,null,b.a.createElement("span",{className:y.a.icon,onClick:this.editEntity},b.a.createElement(j.a,{name:"ZD-pen2",iconClass:y.a.iconPen})),b.a.createElement("span",{className:y.a.icon,onClick:this.deleteEntity},b.a.createElement(j.a,{name:"ZD-delete2",iconClass:y.a.iconDel}))):"",n?b.a.createElement("span",{className:y.a.icon},b.a.createElement(j.a,{name:"ZD-newtab",onClick:this.openUrl(n),iconClass:y.a.iconSizeLarge})):""):"")}}]),t}(p.Component);t.a=A,A.propTypes={deleteEntity:h.a.func,editEntity:h.a.func,entity:h.a.string,entityId:h.a.string,needBackBtn:h.a.bool,showActions:h.a.bool,showContactCrmInfo:h.a.func,title:h.a.string,viewUrl:h.a.string},A.defaultProps={showActions:!1}},"./src/containers/detailsubtab/leftpanel/AccountSLA/AccountSLA.js":function(e,t,n){"use strict";n.r(t);var o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/toConsumableArray.js"),a=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/promise.js"),l=n.n(s),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=n.n(c),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),u=n.n(i),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),b=n.n(p),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),h=n.n(f),g=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),y=n.n(g),_=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-redux/es/index.js"),j=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),A=n.n(j),E=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),C=n.n(E),v=n("./src/containers/detailsubtab/leftpanel/AccountSLA/AccountSLA.module.css"),S=n.n(v),k=n("../components/lib/Layout/index.js"),z=n("./src/components/detailsubtab/leftpanel/LeftPanelHeader/LeftPanelHeader.js"),L=n("./src/components/account/accountsla/AccountSlaProfile/AccountSlaProfile.module.css"),I=n.n(L),N=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),O=n.n(N),w=n("./src/fz-i18n/index.js"),x=function(e){function t(e){u()(this,t);var n=b()(this,(t.__proto__||r()(t)).call(this,e));return n.editSla=n.editSla.bind(n),n.deleteSla=n.deleteSla.bind(n),n}return h()(t,e),m()(t,[{key:"deleteSla",value:function(){var e=this.props,t=e.deleteSla;t(e.slaId)}},{key:"editSla",value:function(){var e=this.props,t=e.editSla;t(e.slaId,"sla")}},{key:"render",value:function(){var e=this.props,t=e.entity,n=e.entityName,o=e.department,a=e.date,s=e.showActions;return y.a.createElement(k.Container,{className:I.a.part,alignBox:"row",isCover:!1},y.a.createElement(k.Box,{className:I.a.icon},t==w.h.getI18NValue("support.gettingstarted.label.sla")?y.a.createElement(O.a,{name:"ZD-contract",iconClass:I.a.iconSize}):y.a.createElement(O.a,{name:"ZD-newuser",iconClass:I.a.iconSize})),y.a.createElement(k.Box,{className:I.a.rgt,flexible:!0},y.a.createElement("div",null,y.a.createElement("span",{className:I.a.user},t),y.a.createElement("span",{className:I.a.fRight},s?y.a.createElement(y.a.Fragment,null,y.a.createElement("span",{className:I.a.icon,onClick:this.editSla},y.a.createElement(O.a,{name:"ZD-pen2",iconClass:I.a.iconEditDel+" "+I.a.iconEdit})),y.a.createElement("span",{className:I.a.icon,onClick:this.deleteSla},y.a.createElement(O.a,{name:"ZD-delete2",iconClass:I.a.iconEditDel+" "+I.a.iconDel}))):"")),n?y.a.createElement("span",{className:I.a.contact},n):"",o?y.a.createElement("span",{className:I.a.phone},o):"",a?y.a.createElement("span",{className:I.a.contact},a):""))}}]),t}(g.Component),D=x;x.propTypes={date:C.a.string,deleteSla:C.a.func,department:C.a.string,editSla:C.a.func,entity:C.a.string,entityName:C.a.string,showActions:C.a.bool,slaId:C.a.string};var T=n("../components/lib/Button/Button.js"),P=n.n(T),F=n("./src/components/Subtab/Loading/Loading.js"),B=n("./src/actions/SlaActions.js"),M=n("./src/actions/ContractActions.js"),R=n("./src/actions/index.js"),U=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),H=n.n(U),Z=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/reselect/es/index.js"),q=function(e){return e.module.sla},G=function(e){return e.module.department},V=Object(Z.createSelector)([function(e){return e.module.account[e.routing.paramMap.moduleId].associatedSLAIds||[]},q,function(e){return e.departmentMapper[e.routing.paramMap.deptName]},G],function(e,t,n,o){return e.reduce(function(e,s){var l=t[s];if(l&&(l.departmentId===n||"allDepartment"===n)){var c=H()({},l,{deptName:o[l.departmentId].name});return[].concat(a()(e),[c])}return e},[])}),J=Object(Z.createSelector)([function(e){return e.module.account[e.routing.paramMap.moduleId].contracts||[]},q,function(e){return e.module.contract},G],function(e,t,n,o){return e.filter(function(e){return function(e,t){var n=new Date(e),o=new Date;if(null===t)return n<=o;var a=new Date(t);return o>=n&&o<=a}(n[e].startDate,n[e].endDate)}).map(function(e){return H()({},n[e],{sla:t[n[e].associatedSLAId],deptName:o[n[e].departmentId].name})})}),Q=n("./src/reducers/selector.js"),K=n("./src/utils/DateFormat.js"),W=n("./src/components/customerProperties/followers/EmptyMessage/EmptyMessage.js"),X=n("./src/actions/SLAFormActions.js"),Y=w.h.getI18NValue,$=function(e){function t(e){u()(this,t);var n=b()(this,(t.__proto__||r()(t)).call(this,e));n.state={isFetchDone:!1,showActions:!1,buttonText:"",slaText:""};var o=e.contractsLabel,a=e.accountLabel,s=Y("support.permission.delete.comment").toLowerCase()+"\n      "+Y("support.account.slacontract",[o,a]);return n.alertMessage=""+Y("support.delete.wouldlike",s),n.alertTitle=Y("support.social.ticket.deletetitle",Y("support.gettingstarted.label.sla")),n.showActions=n.showActions.bind(n),n.hideActions=n.hideActions.bind(n),n.deleteSla=n.deleteSla.bind(n),n.deleteContract=n.deleteContract.bind(n),n.openForm=n.openForm.bind(n),n.openEditForm=n.openEditForm.bind(n),n}return h()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.getSlaMetaInfo,o=t.getAccountContract,a=t.accountId,s=n(t.currentDept,null,1,51),c=o(a);l.a.all([s,c]).then(function(){return e.setState({isFetchDone:!0})})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.currentDept,o=t.accountSLAs,a=t.accountContracts,s=t.contractsLabel;if(e.currentDept!=n||e.accountSLAs!=o||e.accountContracts!=a){var l=Y("support.gettingstarted.label.sla"),c="allDepartment"===n||!o.length&&!a.length?Y("support.workflow.new.task",l):Y("support.label.add.new.module",s);this.setState({buttonText:c,slaText:l})}}},{key:"showActions",value:function(){this.setState({showActions:!0})}},{key:"hideActions",value:function(){this.setState({showActions:!1})}},{key:"formatDate",value:function(e,t){var n=new K.a(e),o=new K.a(t);return n.format("dd mmmm yyyy")+" - "+o.format("dd mmmm yyyy")}},{key:"displayPrivilageError",value:function(){(0,this.props.showAlert)({submitText:Y("crm.button.ok"),isActive:!0,title:Y("support.history.operation.label.wfalert"),iconName:"exclamationThincircle",message:Y("support.access.user.error"),iconSize:"30"}).then(function(){},function(){})}},{key:"deleteSla",value:function(e){var t=this,n=this.props,o=n.showAlert,a=n.accountId,s=n.associateAccountSLA;n.accountEditPermission?o({submitText:Y("support.permission.delete.comment"),cancelText:Y("support.label.cancel"),isActive:!0,title:this.alertTitle,iconName:"delete2",message:this.alertMessage,type:"confirmation",iconSize:"15",isBoldIcon:!0}).then(function(){return s(a,e,!1).then(function(e){403===e.data.status&&t.displayPrivilageError()})},function(){}):this.displayPrivilageError()}},{key:"deleteContract",value:function(e){var t=this,n=this.props,o=n.deleteAccountContract,a=n.accountId,s=n.accountDeletePermission,l=n.contractDeletePermission,c=n.showAlert;s&&l?c({submitText:Y("support.permission.delete.comment"),cancelText:Y("support.label.cancel"),isActive:!0,title:this.alertTitle,iconName:"delete2",message:this.alertMessage,type:"confirmation",iconSize:"15",isBoldIcon:!0}).then(function(){return o(a,e).then(function(e){403===e.data.status&&t.displayPrivilageError()})},function(){}):this.displayPrivilageError()}},{key:"openForm",value:function(){if(this.props.accountSlaFormInfo.isOpen)return this.props.closeAccountSlaForm();var e=this.props,t=e.openAccountSlaForm,n=e.departments,o=e.currentDept,s=e.accountSLAs,l=e.accountContracts,c={id:"none",name:"-- "+Y("support.contracts.choose.sla")+" --"},r={id:"none",name:"-- "+Y("support.social.ticket.choosedep")+" --"},i=void 0;i="allDepartment"===o?{value:"none",options:[r].concat(a()(n))}:{value:o,options:[]};var u="allDepartment"===o||!s.length&&!l.length?"sla":"contract";t({department:i,sla:{value:"none",options:[c]},agentNotificationList:{value:[]},notifyDays:{value:""},formTitle:this.state.buttonText,formType:u,entityData:null})}},{key:"openEditForm",value:function(e,t){var n=this.props,o=n.departments,s=n.contractsLabel,l=n.accountContracts,c=n.accountSLAs,r=n.currentDept,i=n.openAccountSlaForm,u=void 0;u=Y("support.module.edit","sla"===t?Y("support.gettingstarted.label.sla"):s);var d=void 0;d="sla"===t?c.find(function(t){return t.id===e}):l.find(function(t){return t.id===e});var m={id:"none",name:"-- "+Y("support.contracts.choose.sla")+" --"},p={id:"none",name:"-- "+Y("support.social.ticket.choosedep")+" --"};i({department:"allDepartment"===r?{value:d.departmentId,options:[p].concat(a()(o))}:{value:d.departmentId,options:[]},sla:{value:"none",options:[m]},formTitle:u,formType:t,entityData:d,agentNotificationList:{value:[]},notifyDays:{value:""}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.contractsLabel,o=t.accountSLAs,a=t.accountContracts,s=t.currentDept,l=this.state,c=l.showActions,r=l.isFetchDone,i=l.slaText,u=l.buttonText,d=Y("support.gettingstarted.label.sla")+" & "+Y("support.request.information",n);return r?y.a.createElement(k.Container,{alignBox:"column",className:S.a.fProSection},y.a.createElement(k.Box,{className:S.a.proHgt,scroll:"vertical",flexible:!0,onMouseEnter:this.showActions,onMouseLeave:this.hideActions},o.length||a.length?y.a.createElement(y.a.Fragment,null,0!=a.length&&a.map(function(t,o){return y.a.createElement(y.a.Fragment,{key:o},y.a.createElement(z.a,{title:d,showActions:c,entity:"contract",entityId:t.id,deleteEntity:e.deleteContract,editEntity:e.openEditForm}),y.a.createElement(D,{entity:i,entityName:A()("sla.name",t),department:"allDepartment"===s?t.deptName:null}),y.a.createElement(D,{entity:n,entityName:t.contractName,date:e.formatDate(t.startDate,t.endDate)}))}),0!=o.length&&("allDepartment"===s||0===a.length)&&o.map(function(t,n){return y.a.createElement(y.a.Fragment,{key:n},0===a.length&&y.a.createElement(z.a,{entity:"sla",title:d,showActions:c,entityId:t.id,deleteEntity:e.deleteSla,editEntity:e.openEditForm}),y.a.createElement(D,{entity:i,entityName:t.name,department:"allDepartment"===s?t.deptName:null,showActions:0!==a.length&&c,slaId:t.id,deleteSla:e.deleteSla,editSla:e.openEditForm}))})):y.a.createElement(y.a.Fragment,null,y.a.createElement(z.a,{title:d,showActions:!1}),y.a.createElement(W.a,{text:Y("support.accounts.slaempty",n)}))),y.a.createElement(k.Box,{className:S.a.fpbtn},y.a.createElement(P.a,{text:u,palette:"primary",onClick:this.openForm}))):y.a.createElement(F.a,null)}}]),t}(y.a.Component);$.propTypes={accountContracts:C.a.array,accountId:C.a.string,accountLabel:C.a.string,accountSLAs:C.a.array,accountSlaFormInfo:C.a.object,associateAccountSLA:C.a.func,closeAccountSlaForm:C.a.func,contractsLabel:C.a.string,currentDept:C.a.string,deleteAccountContract:C.a.func,departments:C.a.array,getAccountContract:C.a.func,getSlaMetaInfo:C.a.func,openAccountSlaForm:C.a.func,showAlert:C.a.func};t.default=Object(_.connect)(function(e){return{accountId:e.routing.paramMap.moduleId,currentDept:e.departmentMapper[e.routing.paramMap.deptName],departments:Object(Q.g)(e),contractsLabel:e.moduleMeta.contracts.singularLabel,accountLabel:e.moduleMeta.accounts.singularLabel,accountSLAs:V(e),accountContracts:J(e),accountSlaFormInfo:e.accountSlaFormInfo,accountEditPermission:Object(Q.Ub)(e,{module:"accounts",mode:"edit"}),accountDeletePermission:Object(Q.Ub)(e,{module:"accounts",mode:"delete"}),contractCreatePermission:Object(Q.Ub)(e,{module:"contracts",mode:"create"}),contractDeletePermission:Object(Q.Ub)(e,{module:"contracts",mode:"delete"})}},{getSlaMetaInfo:B.b,getAccountContract:M.c,showAlert:R.b.showConfirmBox,associateAccountSLA:B.a,deleteAccountContract:M.b,openAccountSlaForm:X.b,closeAccountSlaForm:X.a})($)},"./src/containers/detailsubtab/leftpanel/AccountSLA/AccountSLA.module.css":function(e,t,n){e.exports={fpbtn:"zd-accountsla-fpbtn",proHgt:"zd-accountsla-proHgt",fProSection:"zd-accountsla-fProSection"}}}]);