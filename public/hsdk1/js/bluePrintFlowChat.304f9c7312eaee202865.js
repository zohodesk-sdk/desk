(window.deskappJsonp=window.deskappJsonp||[]).push([[65],{"../components/lib/Tag/Tag.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),s=u(o),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),r=u(n("../components/node_modules/@zohodesk/icons/lib/Icon/index.js")),l=u(n("../components/lib/Avatar/Avatar.js")),c=u(n("../components/lib/Tag/Tag.module.css"));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelect=n.handleSelect.bind(n),n.handleRemove=n.handleRemove.bind(n),n.getRef=n.getRef.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),a(t,[{key:"handleSelect",value:function(e){var t=this.props,n=t.id,a=t.onSelectTag,o=void 0===a?null:a;e&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation(),o&&o(n,e)}},{key:"handleRemove",value:function(e){var t=this.props,n=t.onRemove,a=t.id;e&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation(),n&&n(a)}},{key:"getRef",value:function(e){var t=this.props,n=t.getRef,a=t.id;n&&n(e,a)}},{key:"render",value:function(){var e=this.props,t=e.imageURL,n=e.hasAvatar,a=e.text,o=e.onRemove,i=e.initial,u=e.active,d=e.size,p=e.rounded,m=e.palette,b=e.disabled,f=e.closePalette,h=e.onSelectTag,g=e.closeTitle,v=e.dataId,w=e.className,P=e.iconName,N=e.iconSize;return s.default.createElement("div",{className:c.default.container+" "+(u?c.default.selected:"")+" "+(o?c.default.effect:"")+"  "+c.default[d]+" "+(p?c.default.lgRadius:c.default.smRadius)+" "+c.default[m]+" "+(b?c.default.disabled:"")+" "+(h?c.default.pointer:"")+" "+(w||""),"data-id":u?v+"_TagSelected":v+"_Tag",onClick:this.handleSelect,ref:this.getRef},n?s.default.createElement("div",{className:c.default.avatar},s.default.createElement(l.default,{name:i,size:"small",src:t})):null,P?s.default.createElement("div",{className:c.default.icon},s.default.createElement(r.default,{name:P,size:N})):null,s.default.createElement("div",{className:c.default.text,"data-title":a},a),o&&s.default.createElement("div",{className:c.default.close+" "+c.default["close"+f],"data-id":v+"_RemoveTag","data-title":g,onClick:this.handleRemove},s.default.createElement(r.default,{isBold:!0,name:"ZD-close2",size:"8"})))}}]),t}();t.default=d,d.defaultProps={active:!1,closePalette:"danger",hasAvatar:!1,palette:"default",rounded:!0,size:"medium",dataId:"tag"},d.propTypes={active:i.PropTypes.bool,className:i.PropTypes.string,closePalette:i.PropTypes.oneOf(["danger","primary"]),closeTitle:i.PropTypes.string,dataId:i.PropTypes.string,disabled:i.PropTypes.bool,getRef:i.PropTypes.func,hasAvatar:i.PropTypes.bool,iconName:i.PropTypes.string,iconSize:i.PropTypes.string,id:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.number]),imageURL:i.PropTypes.string,initial:i.PropTypes.string,onRemove:i.PropTypes.func,onSelectTag:i.PropTypes.func,palette:i.PropTypes.oneOf(["default","danger","secondary","pureDotted","primaryDotted"]),rounded:i.PropTypes.bool,size:i.PropTypes.oneOf(["small","medium"]),text:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.number])},d.propTypesDescription={hasAvatar:" ",onRemove:" ",active:" ",onSelectTag:" ",text:" ",imageURL:" ",id:" ",initial:" ",size:" ",rounded:" ",palette:" ",closePalette:" ",disabled:" ",getRef:" ",closeTitle:" "}},"./src/actions/BluePrintActions.js":function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"d",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"j",function(){return u}),n.d(t,"h",function(){return d}),n.d(t,"e",function(){return p}),n.d(t,"a",function(){return m}),n.d(t,"f",function(){return b}),n.d(t,"b",function(){return f}),n.d(t,"i",function(){return h});var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),o=n.n(a),s=n("./src/utils/RequestAPI.js"),i=n("./src/utils/Common.js");function r(e){return{types:Object(i.m)("GET_APPLIED_BLUEPRINT"),callAPI:function(t){return Object(s.a)("/api/v1/tickets/"+e+"/blueprint?include=transitionOwnerAgents,transitionOwnerTeams,transitionOwnerDept",!1,{orgId:t.currentOrgId}).get().then(function(t){return{entities:{ticket:o()({},e,{transitionData:204==t.responseStatus?"":t})},result:[]}})}}}function l(e,t){return{types:Object(i.m)("GET_TRANSITIONS"),callAPI:function(n){return Object(s.a)("/api/v1/tickets/"+e+"/transitions/"+t+"/form",!1,{orgId:n.currentOrgId}).get().then(function(e){return e})}}}function c(e,t,n){return{types:Object(i.m)("PERFORM_TRANSITION"),callAPI:function(a){return Object(s.a)("/api/v1/tickets/"+e+"/transitions/"+t+"/perform",!1,{orgId:a.currentOrgId}).post("",n).then(function(t){return{entities:{ticket:o()({},e,{status:t.updatedState})},result:[]}})}}}function u(e,t,n){return{types:Object(i.m)("VALIDATE_FIELD_UPDATES"),callAPI:function(a){return Object(s.a)("/api/v1/tickets/"+e+"/transitions/"+t+"/validateFieldUpdates",!1,{orgId:a.currentOrgId}).post("",n).then(function(e){return e})}}}function d(e){return{types:Object(i.m)("REVOKE_BLUEPRINT"),callAPI:function(t){return Object(s.a)("/api/v1/tickets/"+e+"/revokeBlueprint",!1,{orgId:t.currentOrgId}).post().then(function(t){return{entities:{ticket:o()({},e,{transitionData:""})},result:[]}})}}}function p(){return{type:"OPEN_FLOWCHAT"}}function m(){return{type:"CLOSE_FLOWCHAT"}}function b(e){return{type:"OPEN_TRANSITION_FORM",data:e}}function f(){return{type:"CLOSE_TRANSITION_FORM"}}function h(e){return{type:"TOGGLE_TRANSITION_FORM",data:e}}},"./src/components/ExternalLink/ExternalLink.js":function(e,t,n){"use strict";var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),i=n.n(s),r=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),l=n.n(r),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),p=n.n(d),m=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),b=n.n(m),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),h=n.n(f),g=n("./src/components/ExternalLink/ExternalLink.module.css"),v=n.n(g),w=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.title,a=e.target,o=e.className,s=e.children,i=e.rel,r=(e.download,e.dataTestid);return b.a.createElement("a",{href:t,target:a,className:v.a.link+" "+(o||""),"data-title":n,rel:i,dataId:r},s)}}]),t}(b.a.Component);t.a=w,w.defaultProps={text:"",target:"_blank",rel:"noopener noreferrer"},w.propTypes={className:h.a.string,href:h.a.string,isDownload:h.a.bool,rel:h.a.string,target:h.a.oneOf(["_blank","_self"]),text:h.a.string,title:h.a.string}},"./src/components/Subtab/Loading/Loading.js":function(e,t,n){"use strict";var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),i=n.n(s),r=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),l=n.n(r),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),p=n.n(d),m=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),b=n.n(m),f=n("./src/components/Subtab/Loading/SubtabLoading.module.css"),h=n.n(f),g=n("../components/lib/Layout/index.js"),v=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){return b.a.createElement(g.Container,{alignBox:"row",align:"both",className:h.a.container},b.a.createElement(g.Box,{className:h.a.dot}),b.a.createElement(g.Box,{className:h.a.dot}),b.a.createElement(g.Box,{className:h.a.dot}),b.a.createElement(g.Box,{className:h.a.dot}),b.a.createElement(g.Box,{className:h.a.dot}),b.a.createElement(g.Box,{className:h.a.dot}))}}]),t}(b.a.Component);t.a=v},"./src/components/Subtab/bluePrint/BluePrintFlowChat/BluePrintFlowChat.module.css":function(e,t,n){e.exports={container:"zd-blueprintflowchat-container",headerDiv:"zd-blueprintflowchat-headerDiv",headerText:"zd-blueprintflowchat-headerText zdbce71b4599 zdccf2edd024",closeArea:"zd-blueprintflowchat-closeArea",closeButtom:"zd-blueprintflowchat-closeButtom",closetext:"zd-blueprintflowchat-closetext",listCont:"zd-blueprintflowchat-listCont",blueprintpattern:"zd-blueprintflowchat-blueprintpattern",blueprintLayout:"zd-blueprintflowchat-blueprintLayout zd0637186a90",flow:"zd-blueprintflowchat-flow",leftLabel:"zd-blueprintflowchat-leftLabel",curntTx:"zd-blueprintflowchat-curntTx",transitionLeftline:"zd-blueprintflowchat-transitionLeftline",state:"zd-blueprintflowchat-state",closeIcon:"zd-blueprintflowchat-closeIcon",blueprintTitle:"zd-blueprintflowchat-blueprintTitle zdbce71b4599 zdccf2edd024",titleName:"zd-blueprintflowchat-titleName",blueprintName:"zd-blueprintflowchat-blueprintName",name:"zd-blueprintflowchat-name",rightPanel:"zd-blueprintflowchat-rightPanel"}},"./src/components/Subtab/bluePrint/BlueprintButton/BlueprintButton.module.css":function(e,t,n){e.exports={buttonStyle:"zd-blueprintbutton-buttonStyle zd6063afa107 zdbce71b4599 zdccf2edd024",active:"zd-blueprintbutton-active",notActive:"zd-blueprintbutton-notActive",buttonStatus:"zd-blueprintbutton-buttonStatus",onHold:"zd-blueprintbutton-onHold",closed:"zd-blueprintbutton-closed"}},"./src/components/Subtab/bluePrint/BlueprintStates/BlueprintStates.js":function(e,t,n){"use strict";var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),i=n.n(s),r=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),l=n.n(r),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),p=n.n(d),m=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),b=n.n(m),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),h=n.n(f),g=n("./src/components/Subtab/bluePrint/BlueprintStates/BlueprintStates.module.css"),v=n.n(g),w=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.mode,a=e.cursor,o=e.status,s=void 0===o?"none":o,i=e.onClick,r=e.isList;return b.a.createElement("span",{className:v.a.transitionButton+" "+v.a[n]+" "+v.a[a]+" "+("loading"==s?v.a.loadingBtn:"success"==s?v.a.successBtn:"")+" "+(r?v.a.popBtn:""),onClick:i,"data-title":t},t,"none"!=s?b.a.createElement("div",{className:v.a.overlay},b.a.createElement("div",{className:"loading"==s?v.a.loading:v.a.success},b.a.createElement("div",{className:v.a.element}))):null)}}]),t}(b.a.Component);t.a=w,w.defaultProps={cursor:"default",mode:"default",isList:!1},w.propTypes={cursor:h.a.string,isList:h.a.bool,mode:h.a.oneOf(["default","autoTransition","assign","conditionFailed","assignButton","disable"]),onClick:h.a.func,status:h.a.string,text:h.a.string}},"./src/components/Subtab/bluePrint/ConditionFailedDropdown/ConditionFailedDropdown.module.css":function(e,t,n){e.exports={drpDown:"zd-conditionfaileddropdown-drpDown",dropdownName:"zd-conditionfaileddropdown-dropdownName zdbce71b4599 zdccf2edd024 zd6063afa107",dropScroll:"zd-conditionfaileddropdown-dropScroll zde09903aedc zdcded585cf4",errorList:"zd-conditionfaileddropdown-errorList"}},"./src/components/Subtab/bluePrint/TransitionOwnersPopup/TransitionOwnersPopup.module.css":function(e,t,n){e.exports={drpDown:"zd-transitionownerspopup-drpDown",dropdownName:"zd-transitionownerspopup-dropdownName zdbce71b4599 zdccf2edd024 zd6063afa107",dropScroll:"zd-transitionownerspopup-dropScroll zde09903aedc zdcded585cf4",crewMember:"zd-transitionownerspopup-crewMember",crewName:"zd-transitionownerspopup-crewName zdbce71b4599 zdccf2edd024",agentSubtab:"zd-transitionownerspopup-agentSubtab zdbce71b4599 zdccf2edd024",agentList:"zd-transitionownerspopup-agentList",tagList:"zd-transitionownerspopup-tagList"}},"./src/components/Subtab/bluePrint/TranstionList/TranstionList.module.css":function(e,t,n){e.exports={transitionLine:"zd-transtionlist-transitionLine",stateDiv:"zd-transtionlist-stateDiv",line:"zd-transtionlist-line",default:"zd-transtionlist-default",autoTransition:"zd-transtionlist-autoTransition",disable:"zd-transtionlist-disable",conditionFailed:"zd-transtionlist-conditionFailed",transitionState:"zd-transtionlist-transitionState",transtionButton:"zd-transtionlist-transtionButton",rightArrow:"zd-transtionlist-rightArrow",infoPopup:"zd-transtionlist-infoPopup",defaultArrow:"zd-transtionlist-defaultArrow"}},"./src/containers/Subtab/BluePrintFlowChatContainer/BluePrintFlowChatContainer.js":function(e,t,n){"use strict";n.r(t);var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),i=n.n(s),r=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),l=n.n(r),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),p=n.n(d),m=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),b=n.n(m),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),h=n.n(f),g=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-redux/es/index.js"),v=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),w=n.n(v),P=n("./src/actions/BluePrintActions.js"),N=n("./src/tickets/actions/index.js"),_=n("./src/actions/index.js"),k=n("./src/utils/Common.js"),y=n("./src/reducers/selector.js"),T=n("./src/components/Subtab/bluePrint/BluePrintFlowChat/BluePrintFlowChat.module.css"),E=n.n(T),z=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),O=n.n(z),I=n("../components/lib/Layout/index.js"),j=n("./src/fz-i18n/index.js"),C=n("./src/components/Subtab/bluePrint/TranstionList/TranstionList.module.css"),x=n.n(C),D=n("./src/components/Subtab/bluePrint/BlueprintButton/BlueprintButton.module.css"),A=n.n(D),B=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.needBorder,a=e.disabled,o=e.isClosed,s=e.isOnHold;return b.a.createElement("div",{className:A.a.buttonStyle+" "+(n?A.a.active:"")+" "+(a?A.a.notActive:""),"data-title":t},t,b.a.createElement("span",{className:A.a.buttonStatus+" "+(o?A.a.closed:"")+" "+(s?A.a.onHold:"")}))}}]),t}(b.a.Component),S=B;B.propTypes={disabled:h.a.bool,isClosed:h.a.bool,isOnHold:h.a.bool,needBorder:h.a.bool,text:h.a.string};var L=n("./src/components/Subtab/bluePrint/BlueprintStates/BlueprintStates.js"),R=n("./src/components/Subtab/bluePrint/ConditionFailedDropdown/ConditionFailedDropdown.module.css"),M=n.n(R),F=n("../components/lib/DropBox/DropBox.js"),U=n.n(F),V=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.criteria,n=e.isPopupOpen,a=e.getPopupRef,o=t.pattern,s=t.fieldConditions;return b.a.createElement(U.a,{size:"mlarge",boxPosition:"bottomCenter",isActive:n,getRef:a},b.a.createElement("div",null,b.a.createElement("div",{className:M.a.dropdownName},j.h.getI18NValue("support.blueprint.label.condition.failed")," ","(",o,")"),b.a.createElement("div",{className:M.a.dropScroll},s.map(function(e,t){var n=e.i18nLabel,a=e.condition,o=e.displayValue,s=e.fieldName,i=e.fieldType,r="";if("is empty"!=a&&"is not empty"!=a&&null!=o)if("Time to Respond"==s){var l=parseInt(o[0]);60==l?r="1 "+j.h.getI18NValue("support.request.blueprint.label.hours"):l>60?(r=Math.floor(l/60)+" "+j.h.getI18NValue("support.request.blueprint.label.hours"),l%60!=0&&(r+=" "+j.h.getI18NValue("crm.label.lowercase.and")+" "+l%60+" "+j.h.getI18NValue("support.request.blueprint.label.minutes"))):r=l+" "+j.h.getI18NValue("support.request.blueprint.label.minutes")}else"dateTime"==i?(r=-1!=o[0].indexOf("CURRENTTIME")?o[0]:j.h.userDateFormat(o[0],{},null,null,!1,function(){return"DD MMM YYYY hh:mm A"}),o[1]&&(r+=" "+j.h.getI18NValue("crm.label.lowercase.and")+" "+j.h.userDateFormat(o[1],{},null,null,!1,function(){return"DD MMM YYYY hh:mm A"}))):r="date"==i?j.h.userDateFormat(o[0],{},null,null,!1,function(){return"DD MMM YYYY"}):o[0];return b.a.createElement("div",{className:M.a.errorList},t+1,". ",n," ",a," ",r)}))))}}]),t}(b.a.Component);var Y=n("./src/components/Subtab/bluePrint/TransitionOwnersPopup/TransitionOwnersPopup.module.css"),H=n.n(Y),q=n("../components/lib/Tag/Tag.js"),K=n.n(q),G=function(e){function t(){return i()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.transitionId,n=e.owners,a=e.getPopupRef,o=e.haveTicketDepAccess,s=e.isAdminUser,i=e.ticketDepId,r=e.isContinuousBlueprint,l=e.openOwnerPopup,c=e.isPopupOpen,u=e.popupPosition;return b.a.createElement(U.a,{size:"xlarge",boxPosition:u,isActive:c,getRef:a},b.a.createElement("div",{className:H.a.drpDiv},b.a.createElement("div",{className:H.a.dropdownName},j.h.getI18NValue("support.blueprint.label.transition.owners")),b.a.createElement("div",{className:H.a.dropScroll},n.map(function(e,a){var c=e.agents,u=void 0===c?[]:c,d=e.teams,p=void 0===d?[]:d,m=e.department;return b.a.createElement("div",{key:a},b.a.createElement("div",{className:H.a.crewMember},b.a.createElement("span",{className:H.a.crewName},m.name)),!s||!o||u.length||p.length||i==m.id||r?null:b.a.createElement("div",{className:H.a.agentList},b.a.createElement("span",{className:H.a.tagList,onClick:function(){l({departmentName:m.name,departmentId:m.id,owners:n,transitionId:t})}},b.a.createElement(L.a,{text:j.h.getI18NValue("support.blueprint.label.assign.transition.owner"),mode:"assignButton",cursor:"pointer"}))),u.length?b.a.createElement("div",{className:H.a.agentDiv},b.a.createElement("div",{className:H.a.agentSubtab},j.h.getI18NValue("support.survey.report")),b.a.createElement("div",{className:H.a.agentList},u.map(function(e,t){var n=e.firstName,a=e.lastName,o=e.photoURL;return b.a.createElement("span",{className:H.a.tagList,key:t},b.a.createElement(K.a,{initial:Object(k.v)(n,a),text:Object(k.t)(n,a),imageURL:o,hasAvatar:!0}))}))):null,p.length?b.a.createElement("div",{className:H.a.agentDiv},b.a.createElement("div",{className:H.a.agentSubtab},j.h.getI18NValue("support.setup.label.teams")),b.a.createElement("div",{className:H.a.agentList},p.map(function(e,t){var n=e.name;return b.a.createElement("span",{className:H.a.tagList,key:t},b.a.createElement(K.a,{text:"(T) "+n}))}))):null)}))))}}]),t}(b.a.Component),Z=G;G.propTypes={getPopupRef:h.a.func,haveTicketDepAccess:h.a.bool,isAdminUser:h.a.bool,isContinuousBlueprint:h.a.bool,isPopupOpen:h.a.bool,openOwnerPopup:h.a.func,owners:h.a.array,popupPosition:h.a.string,ticketDepId:h.a.string,transitionId:h.a.string};var J=n("../components/lib/Popup/viewPort.js"),W=n.n(J),Q=function(e){function t(e){i()(this,t);var n=u()(this,(t.__proto__||o()(t)).call(this,open));return n.state={},n.handleOver=n.handleOver.bind(n),n.hanldeLeave=n.hanldeLeave.bind(n),n}return p()(t,e),l()(t,[{key:"handleOver",value:function(e){var t=this;e.persist(),this.setState({isPopupOpen:!0},function(){var n=t.popupRef;if(n){var a=e.target.closest("[data-scroll]"),o=W.a.betterView(n,e.target,"bottomCenter",a);t.setState({popupPosition:o.view})}})}},{key:"hanldeLeave",value:function(){this.setState({isPopupOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,a=t.mode,o=t.toState,s=t.isClosed,i=t.isOnHold,r=t.criteria,l=t.owners,c=t.haveTicketDepAccess,u=t.isAdminUser,d=t.ticketDepId,p=t.isContinuousBlueprint,m=t.openOwnerPopup,f=t.transitionId,h=this.state,g=h.isPopupOpen,v=h.popupPosition;return b.a.createElement(I.Container,{className:x.a.transitionLine,alignBox:"row",align:"vertical",isCover:!1},b.a.createElement(I.Box,{flexible:!0,className:x.a.stateDiv},b.a.createElement("div",{className:x.a.line+" "+x.a[a]}),b.a.createElement("span",{className:x.a.rightArrow},b.a.createElement(O.a,{name:"ZD-arrowRight3"})),b.a.createElement("div",{className:x.a.transitionState,onMouseEnter:this.handleOver,onMouseLeave:this.hanldeLeave},b.a.createElement(L.a,{text:n,mode:a}),b.a.createElement("div",{className:x.a.infoPopup},"conditionFailed"==a?b.a.createElement(V,{isPopupOpen:g,criteria:r,getPopupRef:function(t){e.popupRef=t}}):"autoTransition"!=a?b.a.createElement(Z,{popupPosition:v,isPopupOpen:g,transitionId:f,owners:l,haveTicketDepAccess:c,isAdminUser:u,ticketDepId:d,isContinuousBlueprint:p,openOwnerPopup:m,getPopupRef:function(t){e.popupRef=t}}):null))),b.a.createElement(I.Box,{className:x.a.transtionButton},b.a.createElement(S,{text:o,isClosed:s,isOnHold:i,disabled:"autoTransition"==a||"conditionFailed"==a||"disable"==a})))}}]),t}(b.a.Component),X=Q;Q.defaultProps={mode:"default"},Q.propTypes={criteria:h.a.object,haveTicketDepAccess:h.a.bool,isAdminUser:h.a.bool,isClosed:h.a.bool,isContinuousBlueprint:h.a.bool,isOnHold:h.a.bool,mode:h.a.oneOf(["default","autoTransition","conditionFailed","disable"]),name:h.a.string,openOwnerPopup:h.a.func,owners:h.a.array,ticketDepId:h.a.string,toState:h.a.string,transitionId:h.a.string};var $=n("./src/components/Subtab/Loading/Loading.js"),ee=n("./src/components/Drawer/Drawer.js"),te=n("./src/components/ExternalLink/ExternalLink.js"),ne=function(e){function t(e){i()(this,t);var n=u()(this,(t.__proto__||o()(t)).call(this,e));return n.state={isOwnerPopupOpen:!1,assginOwnerDetails:{}},n.openOwnerPopup=n.openOwnerPopup.bind(n),n.closeOwnerPopup=n.closeOwnerPopup.bind(n),n}return p()(t,e),l()(t,[{key:"openOwnerPopup",value:function(e){this.setState({isOwnerPopupOpen:!0,assginOwnerDetails:e})}},{key:"closeOwnerPopup",value:function(){this.setState({isOwnerPopupOpen:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOwnerPopupOpen,a=t.assginOwnerDetails,o=this.props,s=o.closeFlowChat,i=o.flowChartData,r=void 0===i?{}:i,l=o.statusMapping,c=o.haveTicketDepAccess,u=o.isAdminUser,d=o.ticketDepId,p=o.assignTransitionOwner,m=o.ticketId,f=o.haveManageAutomationPermission,h=o.orgName,g=o.depName,v=o.AssginOwnerContainer,w=r.id,P=r.name,N=r.state,_=void 0===N?{}:N,y=r.transitions,T=void 0===y?[]:y;return b.a.createElement(I.Container,{className:E.a.container},b.a.createElement(I.Box,{className:E.a.headerDiv},b.a.createElement(I.Container,{alignBox:"row"},b.a.createElement(I.Box,{flexible:!0,className:E.a.headerText},j.h.getI18NValue("support.blueprint.label.transition.flowchart.for.currentstate")),b.a.createElement(I.Box,{flexible:!0,className:E.a.closeArea},b.a.createElement("div",{className:E.a.closeButtom,onClick:s},b.a.createElement("div",{className:E.a.closeIcon},b.a.createElement(O.a,{name:"ZD-close2"})),b.a.createElement("span",{className:E.a.closetext},j.h.getI18NValue("support.zohocrm.integration.lable.name.esc")))))),b.a.createElement(I.Box,{flexible:!0,className:E.a.rightPanel,scroll:"none"},b.a.createElement(I.Container,{className:E.a.blueprintpattern},b.a.createElement(I.Box,{className:E.a.blueprintLayout,flexible:!0},w?b.a.createElement(I.Container,{alignBox:"row",scroll:"vertical",className:E.a.flow,isScrollAttribute:!0},b.a.createElement(I.Box,{className:E.a.leftLabel},b.a.createElement(I.Container,{align:"vertical",alignBox:"row"},b.a.createElement(I.Box,{className:E.a.state},b.a.createElement(I.Box,{className:E.a.curntTx},j.h.getI18NValue("support.blueprint.label.current.state")),b.a.createElement(I.Box,null,b.a.createElement(S,{text:_.name,needBorder:!0}))),b.a.createElement(I.Box,{className:E.a.transitionLeftline,flexible:!0}))),b.a.createElement(I.Box,{flexible:!0},b.a.createElement(I.Container,{align:"horizontal"},b.a.createElement(I.Box,{className:E.a.listCont},T.map(function(t,n){var a=t.id,o=t.toState,s=t.canUserPerformTransition,i=t.isAutoTransition,r=t.isCriteriaSatisfied,p=t.criteria,m=void 0===p?{}:p,f=t.owners,h=void 0===f?[]:f,g=t.isContinuousBlueprint,v="default";i?v="autoTransition":r?s||(v="disable"):v="conditionFailed";var w=Object(k.E)(l,o),P=!1;return w||(P=Object(k.K)(l,o)),b.a.createElement(X,{key:n,transitionId:a,toState:o,name:t.name,mode:v,isClosed:w,isOnHold:P,criteria:m,owners:h,haveTicketDepAccess:c,isAdminUser:u,ticketDepId:d,isContinuousBlueprint:g,openOwnerPopup:e.openOwnerPopup})}))))):b.a.createElement($.a,null)),b.a.createElement("div",{className:E.a.blueprintTitle},b.a.createElement("div",{className:E.a.titleName},j.h.getI18NValue("support.setup.label.blueprint")),c&&f&&u?b.a.createElement(te.a,{className:E.a.blueprintName,href:"/agent/"+h+"/"+g+"/setup#setup/automation/"+d+"/blueprint/edit/"+w,dataId:P},P):b.a.createElement("span",{className:E.a.name,"data-title":P},P))),b.a.createElement(ee.d,{isActive:n,needFreeze:!1},b.a.createElement(v,{bluePrintId:w,departmentId:a.departmentId,departmentName:a.departmentName,assginOwnerDetails:a,closeOwnerPopup:this.closeOwnerPopup,assignTransitionOwner:p,ticketId:m}))))}}]),t}(b.a.Component),ae=ne;ne.propTypes={AssginOwnerContainer:h.a.node,assignTransitionOwner:h.a.func,depName:h.a.string,haveManageAutomationPermission:h.a.bool,haveTicketDepAccess:h.a.bool,isAdminUser:h.a.bool,orgName:h.a.string,ticketDepId:h.a.string,ticketId:h.a.string};var oe=n("./src/containers/asyncComponent.js"),se=function(e){function t(e){i()(this,t);var n=u()(this,(t.__proto__||o()(t)).call(this,e));return n.state={},n.onKeyUp=n.onKeyUp.bind(n),n.assignTransitionOwner=n.assignTransitionOwner.bind(n),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.onKeyUp)}},{key:"onKeyUp",value:function(e){27==e.keyCode&&this.props.closeFlowChat()}},{key:"assignTransitionOwner",value:function(e,t){var n=this.props,a=n.updateTicket,o=n.showMessage,s=n.getAppliedBlueprint;return a(e,t).then(function(){o({type:"success",message:j.h.getI18NValue("support.blueprint.label.transition.owner.updated.succesfully")}),s(e)},function(){o({type:"alert",message:j.h.getI18NValue("support.unable.to.process.your.request")})})}},{key:"render",value:function(){var e=this.props,t=e.closeFlowChat,n=e.statusMapping,a=e.haveTicketDepAccess,o=e.isAdminUser,s=e.ticketDepId,i=e.ticketId,r=e.haveManageAutomationPermission,l=e.transitionData,c=e.orgName,u=e.depName;return b.a.createElement(ae,{ticketId:i,closeFlowChat:t,flowChartData:l,statusMapping:n,haveTicketDepAccess:a,isAdminUser:o,ticketDepId:s,assignTransitionOwner:this.assignTransitionOwner,haveManageAutomationPermission:r,orgName:c,depName:u,AssginOwnerContainer:oe.j})}}]),t}(m.Component);se.propTypes={closeFlowChat:h.a.func,getAppliedBlueprint:h.a.func,haveManageAutomationPermission:h.a.bool,haveTicketDepAccess:h.a.bool,isAdminUser:h.a.bool,orgName:h.a.string,showMessage:h.a.func,statusMapping:h.a.object,ticketDepId:h.a.string,ticketId:h.a.string,transitionData:h.a.object,updateTicket:h.a.func};t.default=Object(g.connect)(function(e,t){var n=e.routing,a=e.module,o=e.myInfo,s=n.paramMap.moduleId||w()("location.query.peekId",n),i=a.ticket[s],r=i.layoutId,l=i.departmentId,c=Object(k.b)(o.profileId,a.profile);return{haveTicketDepAccess:o.associatedDepartmentIds.includes(l),ticketDepId:l,isAdminUser:c,ticketId:s,depName:a.department[l].sanitizedName,orgName:Object(y.U)(e),statusMapping:e.ticketStatusMapping[r].statusMapping,haveManageAutomationPermission:Object(y.Ub)(e,{module:"setup",mode:"automation"}),transitionData:a.ticket[s].transitionData}},{closeFlowChat:P.a,getAppliedBlueprint:P.c,updateTicket:N.k,showMessage:_.Q})(se)}}]);