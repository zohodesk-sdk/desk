(window.deskappJsonp=window.deskappJsonp||[]).push([[112],{"../components/lib/Button/Button.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=s(a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js")),l=s(a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js")),r=s(a("../components/lib/Button/Button.module.css")),i=a("../components/lib/utils/dummyFunction.js");function s(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),n(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.palette,n=e.disabled,l=e.size,i=e.onClick,s=e.rounded,d=e.status,c=e.children,u=e.isBold,m=e.dataId,p=e.needAppearance,f=e.className,g=e.getRef,b=p?r.default[a.toLowerCase()]+" "+(s?r.default.rounded:"")+"   "+(c?r.default["button_"+l.toLowerCase()]:r.default[l.toLowerCase()]):""+r.default.default;return o.default.createElement("button",{className:(f||"")+" "+b+" "+(u?r.default.bold:"")+"  ","data-id":n?m+"_disabled":m,disabled:n||"loading"===d.toLowerCase(),onClick:i,type:"button",ref:g},c||t,"none"!==d&&p&&o.default.createElement("div",{className:r.default.overlay},o.default.createElement("div",{className:"loading"===d.toLowerCase()?r.default.loading:r.default.success},o.default.createElement("div",{className:r.default.element}))))}}]),t}();t.default=d,d.defaultProps={children:null,dataId:"buttonComp",disabled:!1,isBold:!0,needAppearance:!0,onClick:i.dummyFunction,palette:"primary",rounded:!1,size:"medium",status:"none",text:"Button"},d.propTypes={children:l.default.node,className:l.default.string,dataId:l.default.string,disabled:l.default.bool,getRef:l.default.func,isBold:l.default.bool,needAppearance:l.default.bool,onClick:l.default.func,palette:l.default.oneOf(["plainPrimary","plainSecondary","primary","primaryFilled","danger","dangerFilled","secondary","secondaryFilled","successFilled","info"]),rounded:l.default.bool,size:l.default.oneOf(["small","medium","large","xlarge"]),status:l.default.oneOf(["loading","success","none"]),text:l.default.string},d.propTypesDescription={onClick:" ",text:" ",palette:" ",disabled:" ",size:" ",rounded:" ",status:" ",isBold:" ",children:" "}},"../components/lib/Label/Label.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=i(a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js")),l=i(a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js")),r=i(a("../components/lib/Label/Label.module.css"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),n(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.type,n=e.palette,l=e.size,i=e.clipped,s=e.name,d=e.title,c=e.onClick,u=e.dataId;return o.default.createElement("label",{className:r.default.label+" "+r.default[a]+" "+r.default[l]+" "+r.default[n]+"\n          "+(i?r.default.dotted:"")+" "+(c?r.default.pointer:r.default.cursor),name:s,"data-title":d,"data-id":u,onClick:c},t)}}]),t}();t.default=s,s.defaultProps={clipped:!1,dataId:"label",palette:"default",size:"medium",text:"Label",type:"title"},s.propTypes={clipped:l.default.bool,dataId:l.default.string,name:l.default.string,onClick:l.default.func,palette:l.default.oneOf(["default","primary","secondary","danger","mandatory"]),size:l.default.oneOf(["small","medium","large"]),text:l.default.string,title:l.default.string,type:l.default.oneOf(["title","subtitle"])},s.propTypesDescription={type:" ",size:" ",name:" ",palette:" ",text:" ",id:" ",clipped:" ",title:" "}},"../components/lib/Radio/Radio.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=s(a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js")),l=s(a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js")),r=s(a("../components/lib/Radio/Radio.module.css")),i=s(a("../components/lib/Label/Label.js"));function s(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChange=a.handleChange.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),n(t,[{key:"handleChange",value:function(e){var t=this.props,a=t.onChange,n=t.value;a&&a(n,e)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.name,n=e.value,l=e.checked,s=e.disabled,d=e.text,c=e.labelPalette,u=e.active,m=e.size,p=e.labelSize,f=e.dataId,g=s?r.default.disabled:r.default.pointer,b=u?r.default.active:"";return o.default.createElement("span",{className:r.default.container+" "+g+" "+(d?r.default.layout:r.default.basic),onClick:this.handleChange,"data-id":f},o.default.createElement("input",{type:"radio",id:t,className:r.default.input+"  "+(l?r.default.checked:""),name:a,value:n,checked:l,disabled:s}),o.default.createElement("label",{className:b+" "+r.default[m]+" "+(d?r.default.layoutshrink:"")}),d&&o.default.createElement("span",{className:r.default.text},o.default.createElement(i.default,{text:d,palette:c,size:p,type:"title",clipped:!0})))}}]),t}();t.default=d,d.defaultProps={active:!1,checked:!1,disabled:!1,labelPalette:"default",labelSize:"medium",size:"medium",dataId:"RadioComp"},d.propTypes={active:l.default.bool,checked:l.default.bool,dataId:l.default.string,disabled:l.default.bool,id:l.default.string,labelPalette:l.default.oneOf(["default","primary","secondary","danger","mandatory"]),labelSize:l.default.oneOf(["small","medium","large"]),name:l.default.string,onChange:l.default.func,size:l.default.oneOf(["small","medium"]),text:l.default.string,value:l.default.string},d.propTypesDescription={checked:" ",disabled:" ",active:" ",labelPalette:" ",id:" ",name:" ",value:" ",text:" ",size:" ",labelSize:" ",onChange:" "}},"./src/components/MergeTickets/MergeData/MergeData.module.css":function(e,t,a){e.exports={mlabelTxt:"zd-mergedata-mlabelTxt",mergeDataBg:"zd-mergedata-mergeDataBg",default:"zd-mergedata-default",primary:"zd-mergedata-primary",secondary:"zd-mergedata-secondary",mseleTxt:"zd-mergedata-mseleTxt",mhead:"zd-mergedata-mhead",mdataTxt:"zd-mergedata-mdataTxt zd6063afa107",mTrans:"zd-mergedata-mTrans zddf89226dae",mcontName:"zd-mergedata-mcontName zd6063afa107",mradio:"zd-mergedata-mradio",mtickIcon:"zd-mergedata-mtickIcon",danger:"zd-mergedata-danger"}},"./src/components/MergeTickets/MergeHead/MergeHead.module.css":function(e,t,a){e.exports={mergeDataBg:"zd-mergehead-mergeDataBg",mhead:"zd-mergehead-mhead",mdataTxt:"zd-mergehead-mdataTxt zd6063afa107",mseleTxt:"zd-mergehead-mseleTxt",default:"zd-mergehead-default",primary:"zd-mergehead-primary",secondary:"zd-mergehead-secondary",rborder:"zd-mergehead-rborder",radioBox:"zd-mergehead-radioBox",avaImg:"zd-mergehead-avaImg"}},"./src/components/MergeTickets/MergeLabel/MergeLabel.module.css":function(e,t,a){e.exports={mlabelTxt:"zd-mergelabel-mlabelTxt"}},"./src/containers/MergeContainer/MergeContainer.js":function(e,t,a){"use strict";a.r(t);var n=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),o=a.n(n),l=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/keys.js"),r=a.n(l),i=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=a.n(i),d=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),c=a.n(d),u=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),m=a.n(u),p=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=a.n(p),g=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),b=a.n(g),h=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),y=a.n(h),k=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),v=a.n(k),C=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-redux/es/index.js"),j=a("../components/lib/Layout/index.js"),_=a("./src/actions/index.js"),N=a("./src/actions/PeekActions.js"),I=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/promise.js"),x=a.n(I),F=a("./src/actions/FormAction.js"),R=a("./src/tickets/actions/detailView/index.js"),O=a("./src/actions/ContactActions.js");a("./src/constants/index.js");var z=a("./src/containers/MergeContainer/MergeContainer.module.css"),E=a.n(z),T=a("./src/reducers/selector.js"),A=a("./src/components/MergeTickets/MergeLabel/MergeLabel.module.css"),M=a.n(A),S=function(e){function t(){return c()(this,t),f()(this,(t.__proto__||s()(t)).apply(this,arguments))}return b()(t,e),m()(t,[{key:"render",value:function(){var e=this.props.mergelabel;return y.a.createElement("div",{className:M.a.mlabelTxt,"data-id":"autoId_1707"},e)}}]),t}(y.a.Component),w=S;S.propTypes={mergelabel:v.a.string};var L=a("./src/components/MergeTickets/MergeHead/MergeHead.module.css"),P=a.n(L),B=a("../components/lib/Radio/Radio.js"),D=a.n(B),V=a("../components/lib/Avatar/Avatar.js"),H=a.n(V),U=function(e){function t(e){c()(this,t);var a=f()(this,(t.__proto__||s()(t)).call(this,e));return a.onRadioClick=a.onRadioClick.bind(a),a.onSelectAllFields=a.onSelectAllFields.bind(a),a}return b()(t,e),m()(t,[{key:"onSelectAllFields",value:function(){this.props.onSelectAllFields(this.props.value)}},{key:"onRadioClick",value:function(e,t){var a=this.props.onRadioClick;a(e)}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.isflexible,n=e.palette,o=e.value,l=e.isSelectedRecord,r=e.isAvatarNeeded,i=e.photoURL,s=e.fullName,d=e.dataId;return y.a.createElement(j.Box,{flexible:!!a,className:P.a.mergeDataBg+" "+P.a[n],dataId:d},y.a.createElement("div",{className:P.a.radioBox},y.a.createElement("span",{className:P.a.rborder},y.a.createElement(D.a,{value:o,id:o+"_MergeHead",name:"MergeHead",checked:l,onChange:this.onRadioClick}))),t||r?y.a.createElement("div",{className:P.a.mhead},r?y.a.createElement("span",{className:P.a.avaImg},y.a.createElement(H.a,{name:s,src:i,size:"medium"})):null,t?y.a.createElement("span",{className:P.a.mdataTxt},t):null,y.a.createElement("span",{className:P.a.mseleTxt,onClick:this.onSelectAllFields},"Click to select all values")):"")}}]),t}(y.a.Component),J=U;U.defaultProps={palette:"default"},U.propTypes={contactname:v.a.string,dataId:v.a.string,fullName:v.a.string,isAvatarNeeded:v.a.bool,isSelectedRecord:v.a.bool,isflexible:v.a.bool,onRadioClick:v.a.func,onSelectAllFields:v.a.func,palette:v.a.string,photoURL:v.a.string,radio:v.a.string,src:v.a.string,title:v.a.string,value:v.a.string};var K=a("./src/utils/Common.js"),G=function(e){function t(e){return c()(this,t),f()(this,(t.__proto__||s()(t)).call(this,e))}return b()(t,e),m()(t,[{key:"render",value:function(){var e=this.props,t=e.mergeIds,a=e.records,n=e.primaryRecordId,o=e.onRadioClick,l=e.onSelectAllFields,r=e.moduleName;return y.a.createElement(j.Container,{alignBox:"row"},y.a.createElement(j.Box,null,y.a.createElement(w,null)),t&&t.map(function(e,t){return y.a.createElement(j.Box,{flexible:!0,key:t},y.a.createElement(J,{isSelectedRecord:n===e,value:e,title:"tickets"===r?a[e].ticketNumber+" "+a[e].subject:"contacts"===r?a[e].lastName:a[e].accountName,palette:n===e?"primary":"default",onRadioClick:o,onSelectAllFields:l,isAvatarNeeded:"contacts"==r,photoURL:a[e].photoURL,fullName:Object(K.e)(a[e].firstName,a[e].lastName),dataId:"mergeHead_"+t}))}))}}]),t}(h.Component),Z=G;G.propTypes={mergeIds:v.a.array,moduleName:v.a.string,onRadioClick:v.a.func,onSelectAllFields:v.a.func,primaryRecordId:v.a.string,records:v.a.object};var q=a("./src/components/MergeTickets/MergeData/MergeData.module.css"),Q=a.n(q),W=a("./node_modules/@zohodesk/icons/lib/Icon/index.js"),X=a.n(W),Y=function(e){function t(e){c()(this,t);var a=f()(this,(t.__proto__||s()(t)).call(this,e));return a.onRadioClick=a.onRadioClick.bind(a),a}return b()(t,e),m()(t,[{key:"onRadioClick",value:function(){var e=this.props,t=e.onRadioClick,a=e.radioName;t(e.recordId,a)}},{key:"render",value:function(){var e=this.props,t=(e.title,e.isChecked),a=e.value,n=e.radio,o=e.tickIcon,l=e.colortype,r=e.isflexible,i=e.palette,s=e.radioName,d=e.dataId;return y.a.createElement(j.Box,{flexible:!!r,className:Q.a.mergeDataBg+" "+Q.a[i],onClick:this.onRadioClick,dataId:d},n||a?y.a.createElement("div",{className:Q.a.mTrans},n?y.a.createElement("span",{className:Q.a.mradio},y.a.createElement(D.a,{value:"4",name:s,checked:t})):"",a?y.a.createElement("div",{className:Q.a.mcontName},a):"",o?y.a.createElement("span",{className:Q.a.mtickIcon+" "+Q.a[l]},y.a.createElement(X.a,{name:o,size:"15"})):""):"")}}]),t}(y.a.Component),$=Y;Y.defaultProps={palette:"default",dataId:"mergeData"},Y.propTypes={colortype:v.a.string,dataId:v.a.string,isChecked:v.a.bool,isflexible:v.a.bool,onRadioClick:v.a.func,palette:v.a.string,radio:v.a.string,radioName:v.a.string,recordId:v.a.string,selectvalue:v.a.string,tickIcon:v.a.string,title:v.a.string,value:v.a.string};var ee=function(e){function t(e){return c()(this,t),f()(this,(t.__proto__||s()(t)).call(this,e))}return b()(t,e),m()(t,[{key:"render",value:function(){var e=this.props,t=e.mergeIds,a=e.fieldSection,n=e.records,o=e.primaryRecordId,l=e.fieldsObj,r=e.ignoreFields,i=e.selectedFieldsList,s=e.onChildRadioClick,d=e.getAccountName,c=a.ids,u=a.details;return y.a.createElement("div",null,c&&c.map(function(e,a){return y.a.createElement("div",{key:a,"data-id":"mergeMainDiv h2"},u[e].fields&&u[e].fields.map(function(e,a){var c=l[e],u=c.displayLabel,m=c.name;if(-1!==r.indexOf(m))return null;var p=c.isCustomField,f="Boolean"===c.type;return y.a.createElement(j.Container,{alignBox:"row",key:a,dataId:"property("+u+")"},y.a.createElement(j.Box,null,y.a.createElement(w,{mergelabel:u})),t&&t.map(function(t,a){var l=n[t],r="",c=!1;p?(r=l.customFields&&l.customFields[m]||"",c=i.customFields&&i.customFields[m]===t):(r="accountId"===m?l[m]?d(l[m]):"":l[m],c=i[m]===t);var g=o===t;return y.a.createElement(j.Box,{flexible:!0,key:a},y.a.createElement($,{dataId:u+"_"+(a+1),value:f?"":r,radioName:e,recordId:t,radio:"radio",tickIcon:f?["true",!0].includes(r)?"ZD-check":"ZD-cross":"",isflexible:!0,palette:g?"primary":"default",isChecked:c,onRadioClick:s}))}))}))}))}}]),t}(h.Component),te=ee;ee.propTypes={fieldSection:v.a.object,fieldsObj:v.a.object,getAccountName:v.a.func,ignoreFields:v.a.array,mergeIds:v.a.array,onChildRadioClick:v.a.func,primaryRecordId:v.a.string,records:v.a.object,selectedFieldsList:v.a.object};var ae=function(e){function t(){return c()(this,t),f()(this,(t.__proto__||s()(t)).apply(this,arguments))}return b()(t,e),m()(t,[{key:"render",value:function(){var e=this.props,t=e.mergeIds,a=e.fieldSection,n=e.fieldsObj,o=e.records,l=e.primaryRecordId,r=e.ignoreFields,i=e.selectedFieldsList,s=e.onPrimaryRadioClick,d=e.onChildRadioClick,c=e.onSelectAllFields,u=e.moduleName,m=e.getAccountName;return y.a.createElement("div",null,y.a.createElement(Z,{mergeIds:t,records:o,primaryRecordId:l,onRadioClick:s,onSelectAllFields:c,moduleName:u}),y.a.createElement(te,{mergeIds:t,records:o,fieldSection:a,fieldsObj:n,primaryRecordId:l,ignoreFields:r,selectedFieldsList:i,onChildRadioClick:d,getAccountName:m}))}}]),t}(y.a.Component),ne=ae;ae.propTypes={fieldSection:v.a.object,fieldsObj:v.a.object,getAccountName:v.a.func,ignoreFields:v.a.array,mergeIds:v.a.array,mergelabel:v.a.string,moduleName:v.a.string,onChildRadioClick:v.a.func,onPrimaryRadioClick:v.a.func,onSelectAllFields:v.a.func,primaryRecordId:v.a.string,records:v.a.object,selectedFieldsList:v.a.object};var oe=a("./src/components/FormAction/FormAction.js"),le=a("../components/lib/Button/Button.js"),re=a.n(le),ie=a("./src/fz-i18n/index.js"),se=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),de=a.n(se),ce=function(e){function t(e){c()(this,t);var a=f()(this,(t.__proto__||s()(t)).call(this,e));return a.onBackToView=a.onBackToView.bind(a),a.onMerge=a.onMerge.bind(a),a.onPrimaryRecordClick=a.onPrimaryRecordClick.bind(a),a.onChildRadioClick=a.onChildRadioClick.bind(a),a.onSelectAllFields=a.onSelectAllFields.bind(a),a._splitSelectedField=a._splitSelectedField.bind(a),a._filterFieldForApi=a._filterFieldForApi.bind(a),a.handleClose=a.handleClose.bind(a),a.onMergeConfirmation=a.onMergeConfirmation.bind(a),a.getAccountName=a.getAccountName.bind(a),a.getContactName=a.getContactName.bind(a),a.getAgentName=a.getAgentName.bind(a),a.state={selectedFieldsList:{},primaryRecord:e.mergeIds[0],isChildChanged:!1,ignoreFields:"tickets"===e.module?["departmentId","accountId","subject"]:"contacts"===e.module?["ownerId"]:"accounts"==e.module?["accountName","ownerId"]:[]},a}return b()(t,e),m()(t,[{key:"_filterFieldForApi",value:function(e,t){var a={};r()(e).map(function(n,o){t!==e[n]&&(a[n]=e[n])}),delete a.customFields;var n={};return e.customFields&&r()(e.customFields).map(function(a,o){t!==e.customFields[a]&&(n[a]=e.customFields[a])}),r()(n).length>0&&(a.customFields=n),a}},{key:"onMergeConfirmation",value:function(){var e=this,t=this.props,a=t.showAlert,n=t.module,o=t.moduleMeta,l=o[n].singularLabel,r=o[n].pluralLabel,i=ie.h.getI18NValue("crm.label.module.merge",r),s="tickets"==n?ie.h.getI18NValue("crm.label.merge.new.contact.confirm",[r,l,de()("activities.pluralLabel",o)||de()("tasks.pluralLabel",o),o.timeEntry.pluralLabel]):ie.h.getI18NValue("crm.label.merge.module.confirm",[r,o.tickets.singularLabel]),d=ie.h.getI18NValue("support.label.alert.ticket.merge.confirm",r);a({submitText:ie.h.getI18NValue("crm.button.continue"),cancelText:ie.h.getI18NValue("support.label.cancel"),isActive:!0,title:i,iconName:"exclamationThincircle",message:s+" "+d,type:"confirmation"}).then(function(){e.onMerge()})}},{key:"getAccountName",value:function(e){return this.props.accountDetails[e].accountName}},{key:"getContactName",value:function(e){var t=this.props.contactDetails;return Object(K.e)(t[e].firstName,t[e].lastName)}},{key:"getAgentName",value:function(e){var t=this.props,a=t.agentDetails,n=t.namePattern;return Object(K.f)(n,a[e].firstName,a[e].lastName)}},{key:"onMerge",value:function(){var e=this,t=this.props,a=(t.moduleMapper,t.moduleName),n=t.mergeRecords,o=t.pageInfo,l=t.urlState,r=(t.mergeIds,t.module),i=this.state,s=i.primaryRecord,d=i.selectedFieldsList,c={};c.ids=this.props.mergeIds.filter(function(e){return e!==s}),c.source=this._filterFieldForApi(d,s),n(r,s,c,o).then(function(t){var n=t.data.newRecordId,o=e.props,r=o.orgName,i=o.deptName,s=(o.moduleMeta,o.push),d=o.closePeekView,c="/"+r+"/"+i+"/"+a+"/details/"+n;d(),s({pathname:c,state:l}),e.onBackToView()})}},{key:"onBackToView",value:function(){this.props.clearMergeInfo({depId:this.props.depId})}},{key:"onChildRadioClick",value:function(e,t){var a=this,n=this.props.fieldsObj;this.setState(function(l){var r=o()({},a.state.selectedFieldsList),i=n[t];return i.isCustomField?r.customFields[i.name]=e:r[i.name]=e,{isChildChanged:!0,selectedFieldsList:r}})}},{key:"onSelectAllFields",value:function(e){var t=this;this.setState(function(a){return{selectedFieldsList:t._splitSelectedField(t.props,a,e)}})}},{key:"onPrimaryRecordClick",value:function(e){this.setState(function(t){return{primaryRecord:e}}),this.state.isChildChanged||this.onSelectAllFields()}},{key:"_splitSelectedField",value:function(e,t,a){var n=e.fieldSection,o=e.fieldsObj,l=n.ids,r=void 0===l?[]:l,i=n.details,s=t.primaryRecord,d=t.ignoreFields,c={};return r.forEach(function(e,t){i[e].fields.forEach(function(e,t){var n=o[e].name,l=o[e].isCustomField;-1===d.indexOf(n)&&(l?(c.customFields=c.customFields||{},c.customFields[n]=a||s):c[n]=a||s)})}),c}},{key:"componentDidMount",value:function(){var e=this.props,t=e.mergeCalls,a=e.mergeIds,n=(e.fieldSection,e.depId),o=e.moduleName,l=e.moduleMapper[o];t("tickets"===l?n:null,a,l)}},{key:"componentDidUpdate",value:function(){var e=this.state.selectedFieldsList;if(0===r()(e).length){var t=this._splitSelectedField(this.props,this.state);r()(t).length>0&&this.setState(function(e){return{selectedFieldsList:t}})}}},{key:"handleClose",value:function(e){e&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}},{key:"render",value:function(){var e=this.props,t=e.fieldSection,a=e.fieldsObj,n=e.records,o=e.mergeIds,l=e.moduleName,r=e.module,i=e.namePattern,s=this.state,d=s.ignoreFields,c=s.selectedFieldsList,u=s.primaryRecord,m=ie.h.getI18NValue("crm.label.module.merge",l);return y.a.createElement(j.Container,{className:E.a.mergeContainer,dataId:"mergeContainer",onClick:this.handleClose},y.a.createElement(j.Box,null,y.a.createElement("h1",{className:E.a.mergeTitle},m)),y.a.createElement(j.Box,{className:E.a.content,flexible:!0,scroll:"vertical"},y.a.createElement(ne,{fieldSection:t,fieldsObj:a,ignoreFields:d,mergeIds:o,onChildRadioClick:this.onChildRadioClick,onPrimaryRadioClick:this.onPrimaryRecordClick,onSelectAllFields:this.onSelectAllFields,primaryRecordId:u,records:n,selectedFieldsList:c,moduleName:r,getAccountName:this.getAccountName,getContactName:this.getContactName,getAgentName:this.getAgentName,namePattern:i})),y.a.createElement(j.Box,null,y.a.createElement(oe.c,null,y.a.createElement(oe.a,null,y.a.createElement(re.a,{text:"Merge",palette:"primaryFilled",onClick:this.onMergeConfirmation,dataId:"merge-btn"}),y.a.createElement(re.a,{onClick:this.onBackToView,palette:"secondary",text:"Cancel"})))))}}]),t}(h.Component);ce.propTypes={accountDetails:v.a.object,agentDetails:v.a.object,clearMergeInfo:v.a.func,closePeekView:v.a.func,contactDetails:v.a.object,depId:v.a.string,deptName:v.a.string,fieldSection:v.a.object,fieldsObj:v.a.object,mergeCalls:v.a.func,mergeIds:v.a.array,mergeRecords:v.a.func,module:v.a.string,moduleMapper:v.a.object,moduleMeta:v.a.object,moduleName:v.a.string,namePattern:v.a.array,orgName:v.a.string,pageInfo:v.a.object,push:v.a.func,records:v.a.object,showAlert:v.a.func,urlState:v.a.object};t.default=Object(C.connect)(function(e){var t=Object(T.G)(e),a=Object(T.Q)(e),n=Object(T.t)(e),o=e.moduleMapper[t],l=(o.slice(0,o.length-1),e.mergeInfo),r=(e.departmentSpecificState,e.myForm,e.module[l.curModName]),i=Object(T.I)(e,o,n),s=i.sections,d=void 0===s?{}:s,c=i.fieldDetails,u=void 0===c?{}:c;return{depId:n,mergeIds:l.mergeIds,pageInfo:l.pageInfo,records:r,fieldSection:d,fieldsObj:u,moduleName:t,module:o,moduleMapper:e.moduleMapper,orgName:e.routing.paramMap.orgName,deptName:e.routing.paramMap.deptName,moduleMeta:Object(T.K)(e),urlState:e.routing.location.state,accountDetails:e.module.account,contactDetails:Object(T.J)(e,"contact"),agentDetails:Object(T.J)(e,"agent"),namePattern:a}},{mergeCalls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments[2];return function(n){var o=[];"tickets"===a?o=t.map(function(e){return n(Object(R.a)(e))}):"contacts"===a&&(o=t.map(function(e){return n(Object(O.g)(e))})),o.push(n(Object(F.m)(a,e))),x.a.all(o).then(function(){})}},push:_.L,mergeRecords:_.C,clearMergeInfo:_.d,closePeekView:N.a,showAlert:_.b.showConfirmBox})(ce)},"./src/containers/MergeContainer/MergeContainer.module.css":function(e,t,a){e.exports={mergeContainer:"zd-mergecontainer-mergeContainer",mergeTitle:"zd-mergecontainer-mergeTitle",content:"zd-mergecontainer-content"}},"./src/tickets/actions/detailView/index.js":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),o=a("./src/utils/RequestAPI.js"),l=a("./src/utils/Common.js"),r=a("./src/constants/index.js");function i(e){return{types:Object(l.m)(r.R.TICKET),shouldCallAPI:function(){return!!e},callAPI:function(t){return Object(o.a)("/api/v1/tickets/"+e+"?include=contacts,products,assignee,team,contract,source",!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(n.b)(e,Object(n.c)(r.R.TICKET_L,{mapping:{contact:Object(n.c)(r.R.CONTACT_L,{mapping:{account:Object(n.c)(r.R.ACCOUNT_L)}}),assignee:Object(n.c)(r.R.AGENT_L),team:Object(n.c)(r.R.TEAMS_L),product:Object(n.c)(r.R.PRODUCT_L)}}))})}}}}}]);