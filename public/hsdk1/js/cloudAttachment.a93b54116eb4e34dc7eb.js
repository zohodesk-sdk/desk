(window.deskappJsonp=window.deskappJsonp||[]).push([[68],{"./src/components/Subtab/Loading/Loading.js":function(e,t,n){"use strict";var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=n.n(a),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),s=n.n(o),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),c=n.n(i),l=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(l),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),f=n.n(p),h=n("./src/components/Subtab/Loading/SubtabLoading.module.css"),g=n.n(h),b=n("../components/lib/Layout/index.js"),v=function(e){function t(){return s()(this,t),u()(this,(t.__proto__||r()(t)).apply(this,arguments))}return m()(t,e),c()(t,[{key:"render",value:function(){return f.a.createElement(b.Container,{alignBox:"row",align:"both",className:g.a.container},f.a.createElement(b.Box,{className:g.a.dot}),f.a.createElement(b.Box,{className:g.a.dot}),f.a.createElement(b.Box,{className:g.a.dot}),f.a.createElement(b.Box,{className:g.a.dot}),f.a.createElement(b.Box,{className:g.a.dot}),f.a.createElement(b.Box,{className:g.a.dot}))}}]),t}(f.a.Component);t.a=v},"./src/containers/CloudAttachmentIframe/CloudAttachmentIframe.js":function(e,t,n){"use strict";n.r(t);var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),r=n.n(a),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),s=n.n(o),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),c=n.n(i),l=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(l),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),f=n.n(p),h=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),g=n.n(h),b=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-redux/es/index.js"),v=n("./src/containers/CloudAttachmentIframe/CloudAttachmentIframe.module.css"),x=n.n(v),y=n("./src/components/FreezeLayer/FreezeLayer.js"),N=n("./src/components/Subtab/Loading/Loading.js"),I=n("./src/constants/index.js"),j=n("./src/actions/AttachmentActions.js"),z=n("./src/fz-i18n/index.js"),C=n("./src/utils/Attachment.js"),k=n("./src/utils/bind.js"),w=n("./src/components/PortalLayer/PortalLayer.js"),_=function(e){function t(e){s()(this,t);var n=u()(this,(t.__proto__||r()(t)).call(this,e));n.state={};return k.a.apply(n,["onLoad","closeCloudAttach","receiveMessage","addAttchment"]),n}return m()(t,e),c()(t,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.receiveMessage),this.setState({isFrameLoaded:!1})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.receiveMessage)}},{key:"onLoad",value:function(){this.setState({isFrameLoaded:!0})}},{key:"closeCloudAttach",value:function(){var e=this.props,t=e.closeIframe,n=e.closeCloudAttach;n(),t&&t()}},{key:"receiveMessage",value:function(e){var t=e.data;"closePicker"==t?this.closeCloudAttach():t.doc&&(this.addAttchment(t),this.closeCloudAttach())}},{key:"addAttchment",value:function(e){var t=e.totalFiles,n=e.doc,a=this.props,r=a.totalLen,o=void 0===r?0:r,s=a.showMessage,i=a.isFromAttachTab,c=a.addCloudAttch;if(o+t>10&&!i)s({type:"alert",message:z.h.getI18NValue("support.attachments.count.exceeds",[10])});else for(var l=["zohodocs","dropbox","evernote","gdrive","box","skydrive"],u=0;u<l.length;u++){var d=l[u],m={},p=n[d];if(p&&0!==p.length)for(var f=0;f<p.length;f++){var h=p[f],g=h.docId,b=h.docName,v=h.docType,x=decodeURIComponent(b);if(x=this.settingExtensionFile(x,v),""!==Object(C.e)(x))if(Object(C.m)(x))s({type:"alert",message:z.h.getI18NValue("support.community.attachmentcontent.extensionnotpermitted")});else if(Object(C.k)(x))s({type:"alert",message:z.h.getI18NValue("support.comments.attachment.fileNameSizeLimitation")});else m.name=x,m.isPublic=!1,m.source=d,m.id=g,m.type="file",c(m,t,""+u+f);else s({type:"alert",message:z.h.getI18NValue("support.community.attachmentcontent.extensionnotpermitted")})}}}},{key:"settingExtensionFile",value:function(e,t){return""===Object(C.e)(e)?("document"===t||"writer"===t?e+=".odt":"presentation"===t||"zohoshow"===t?e+=".odp":"spreadsheet"===t||"zohosheet"===t?e+=".xls":"text"===t?e+=".txt":"file"===t?e+=".docx":"pdf"===t&&(e+=".pdf"),e):e}},{key:"render",value:function(){var e=this.props.orgName,t=this.state.isFrameLoaded,n=encodeURIComponent(""+I.H+I.G+"/"+e+"/CloudAttachment.do?isResponse=true&mode=zg,UTF-8"),a=I.M+"/CloudPicker?sources="+I.E+"&zservice="+I.gb+"&serURL="+n+"$attachLimit=5&frameorigin="+I.H+"&originUrl="+I.H;return a+="&customCss=https://css.zohostatic.com/support/app/css/CloudPickerApply.f21ac4de7abe92836f11.css",f.a.createElement(w.a,{initialState:!0},f.a.createElement(y.a,null,f.a.createElement("div",{className:x.a.container},f.a.createElement("iframe",{src:a,className:x.a.iframe,onLoad:this.onLoad}),t?null:f.a.createElement("div",{className:x.a.loadingCont},f.a.createElement(N.a,null)),f.a.createElement("div",{className:x.a.closeIcon,onClick:this.closeCloudAttach},"X"))))}}]),t}(p.Component);_.propTypes={addCloudAttch:g.a.func,closeCloudAttach:g.a.func,closeIframe:g.a.func,isFromAttachTab:g.a.bool,orgName:g.a.string,showMessage:g.a.func,totalLen:g.a.number},t.default=Object(b.connect)(function(e){return{orgName:e.routing.paramMap.orgName}},{closeCloudAttach:j.a})(_)},"./src/containers/CloudAttachmentIframe/CloudAttachmentIframe.module.css":function(e,t,n){e.exports={container:"zd-cloudattachmentiframe-container",iframe:"zd-cloudattachmentiframe-iframe",closeIcon:"zd-cloudattachmentiframe-closeIcon",loadingCont:"zd-cloudattachmentiframe-loadingCont"}},"./src/utils/Attachment.js":function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"f",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"l",function(){return u}),n.d(t,"i",function(){return d}),n.d(t,"p",function(){return m}),n.d(t,"q",function(){return p}),n.d(t,"m",function(){return f}),n.d(t,"k",function(){return h}),n.d(t,"h",function(){return b}),n.d(t,"j",function(){return v}),n.d(t,"b",function(){return x}),n.d(t,"a",function(){return y}),n.d(t,"n",function(){return N}),n.d(t,"c",function(){return I}),n.d(t,"o",function(){return j}),n.d(t,"g",function(){return z});var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/promise.js"),r=n.n(a),o=n("./src/utils/Browser.js"),s=n("./src/fz-i18n/index.js");function i(e){var t=l(e),n=Object(o.a)().toLowerCase()||"",a=navigator.platform.toLowerCase()||"";switch(t){case"jpeg":case"jpg":case"png":case"gif":case"bmp":case"tiff":case"tif":case"ico":return"ZD-filePicture";case"txt":case"rtf":return"ZD-fileText2";case"pdf":return"ZD-filePdf";case"html":case"htm":case"xhtml":return-1!==n.indexOf("chrome")||-1!==n.indexOf("safari")?"ZD-chrome":-1!==n.indexOf("ie")||-1!==n.indexOf("edge")?"ZD-ie":"ZD-firefox";case"ppt":case"pps":case"odp":case"sxi":case"pptx":return"ZD-ppt";case"rar":case"jar":case"zip":return"ZD-zip3";case"doc":case"docx":case"sxw":case"odt":return-1!==a.indexOf("mac")||-1!==a.indexOf("linux")?"ZD-fileOpenoffice":"ZD-fileWord";case"xml":return"ZD-xml";case"xls":case"xlsx":case"sxc":case"ods":case"csv":case"tsv":return"ZD-fileExcel";case"ics":return"ZD-ics";case"exe":return"ZD-exe";case"sh":case"bin":return"ZD-sh2";case"css":return"ZD-css5";case"mp3":case"wav":case"wma":case"aac":case"m4r":case"ogg":return"ZD-fileMusic";case"mp4":case"mkv":case"mov":case"mpeg":case"flv":case"avi":case"webm":return"ZD-fileVideo";default:return"ZD-unknown"}}function c(e){return(e=parseInt(e))<1e3?e+" Bytes":e<1e6?(e/1e3).toFixed(1)+" KB":e>=1e6?(e/1e6).toFixed(1)+" MB":void 0}function l(e){return e&&-1!=e.indexOf(".")?e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase():""}function u(e){var t=l(e);return/jpeg|jpg|png|gif|bmp|ico/i.test(t)}function d(e){var t=l(e);return/mp3|wav|ogg/i.test(t)}function m(e,t){var n={inValidArray:[],validArray:[]};if(t+e.length>10)return n.isCountExceeds=!0,n;for(var a=0;a<e.length;a++){var r=e[a],o=r.name,s=r.size;f(o)?n.inValidArray.push({isUnSupported:!0}):h(o)?n.inValidArray.push({isFileNameSizeInvalid:!0}):0===r.size?n.inValidArray.push({isEmpty:!0}):g(s)?n.inValidArray.push({isAttachSizeExceeded:!0}):n.validArray.push(r)}return n}function p(e,t,n,a){if(t+e.length>10)a(s.h.getI18NValue("support.attachments.count.exceeds",[10]));else for(var r=0;r<e.length;r++){var o=e[r],i=o.name,c=o.size;if(f(i))a(s.h.getI18NValue("support.community.attachmentcontent.extensionnotpermitted"));else if(h(i))a(s.h.getI18NValue("support.comments.attachment.fileNameSizeLimitation"));else if(0!==o.size)if(g(c))a(s.h.getI18NValue("support.feedback.uploaded.file.exceeds.20mb"));else{var l=new FormData;l.append("file",o),n&&n(l)}else a(s.h.getI18NValue("support.request.empty.attachment.message"))}}function f(e){var t=e.split(".").pop().toLowerCase();return-1!==["ade","adp","bat","chm","cmd","com","cpl","exe","hta","ins","isp","jar","lib","lnk","mde","msc","msp","mst","pif","scr","sct","shb","sys","vb","vbe","vxd","wsc","wsf","wsh","jse","vbs"].indexOf(t)}function h(e){return e.length>100}function g(e){return e>20971520}function b(e){var t=0;return e.forEach(function(e){t+=parseInt(e.size)}),t}function v(e,t){return!(!(null!==e.types||e.files&&e.files.length>0)||t.fromPaste||!(e.files&&e.files.length>0||(e.types.indexOf?-1!==e.types.indexOf("Files"):e.types.contains("application/x-moz-file"))||"Files"===e.types[0]))}function x(e,t,n){var a={};a.previewData=t.filter(function(e){return!e.isPreview&&(u(e.name)||d(e.name))}),a.previewData.filter(function(t,n){t.id===e&&(a.selectedIndex=n)}),n&&n(a)}function y(e,t,n){var a=e.indexOf("/api"),r=e;return a>-1&&(r=e.slice(a,e.length),r+="?orgId="+t+(n?"&inline=true":"")),r}function N(e,t){window.open(y(e,t,!0))}function I(e,t){window.location.href=y(e,t,!1)}function j(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=e.length,l=[],u=[],d=0;if(a&&c>a-n){var m=s.h.getI18NValue("support.attachments.count.exceeds",[a]);return r.a.resolve({isError:!0,errorI18N:m})}for(var p=0;p<c;p++){var g=e[p],b=g||{},v=b.size,x=void 0===v?0:v,y=b.name,N=void 0===y?"":y;if(d+=x,f(N)){var I=s.h.getI18NValue("support.community.attachmentcontent.extensionnotpermitted");l.push({errorI18N:I,fileName:N,errorType:"fileType"})}else if(h(N)){var j=s.h.getI18NValue("support.comments.attachment.fileNameSizeLimitation");l.push({errorI18N:j,fileName:N,errorType:"fileNameSize"})}else if(0===x){var z=s.h.getI18NValue("support.request.empty.attachment.message");l.push({errorI18N:z,fileName:N,errorType:"emptyFile"})}else u.push(g)}if(!u.length){if(1===l.length){var C=l[0].errorI18N;return r.a.resolve({isError:!0,errorI18N:C})}var k=s.h.getI18NValue("support.unable.to.process.your.request");return r.a.resolve({isError:!0,errorI18N:k})}if(0===d){var w=s.h.getI18NValue("support.request.empty.attachment.message");return r.a.resolve({isError:!0,errorI18N:w})}if(d+i>1024*o*1024){var _=s.h.getI18NValue("support.attachments.size.limit.exceeds",[o]);return r.a.resolve({isError:!0,errorI18N:_})}for(var A=[],E=[],L=[],V=[],D=function(e){var n=u[e];if(t){var a=new FormData;a.append("file",n);var r=e,o=t(a,n,r).then(function(e){var t=(e.data||{}).data,n=void 0===t?{}:t,a=n.id;a&&(A[r]=n,E[r]=a)},function(t){var a=n.name,r=s.h.getI18NValue("support.unable.to.process.your.request");return V.push(e),l.push({errorI18N:r,fileName:a,errorType:"apiError"}),t});L.push(o)}},F=0;F<u.length;F++)D(F);var O={uploadFiles:A,inValidFiles:l,isError:!1,uploadFileIds:E,inValidFilesIndex:V};return r.a.all(L).then(function(){return E.length?O:{isError:!0,errorI18N:s.h.getI18NValue("support.unable.to.process.your.request")}})}function z(e,t){var n=e.name;return{index:t,isPreview:!0,size:e.size,name:n,href:URL.createObjectURL(e)}}},"./src/utils/bind.js":function(e,t,n){"use strict";function a(){for(var e=this,t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];n.forEach(function(t){e[t]=e[t].bind(e)})}n.d(t,"a",function(){return a})}}]);