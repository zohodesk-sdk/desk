(window.deskappJsonp=window.deskappJsonp||[]).push([[120],{"./src/telephony/providers/phonebridge/ZPhoneBridge.js":function(e,a,r){"use strict";r.r(a),r.d(a,"Methods",function(){return n}),r.d(a,"PBImpl",function(){return i});var t=r("./src/createAppStore.js"),o=r("./src/utils/getCSRFCookie.js"),s=Object(t.a)(),l=s.getState().routing.paramMap.orgName+"/",n={answer:function(e,a,r){var t=G_callObj.callrefid,o=G_callObj.ctinumber,s=G_callObj.custnumber,l=G_callObj.calltype,n=G_callObj.ctiname;i.pbApiAnswer(t,o,s,l,n,a)},decline:function(e,a,r){var t=G_callObj.callrefid,o=G_callObj.ctinumber,s=G_callObj.custnumber,l=G_callObj.calltype,n=G_callObj.ctiname;i.pbApiHungup(t,o,s,l,n,"decline",a)},end:function(e,a,r){var t=G_callObj.callrefid,o=G_callObj.ctinumber,s=G_callObj.custnumber,l=G_callObj.calltype,n=G_callObj.ctiname;i.pbApiHungup(t,o,s,l,n,"hungup",a)},mute:function(e,a,r){var t=G_callObj.callrefid,o=G_callObj.ctinumber,s=G_callObj.custnumber,l=G_callObj.calltype,n=G_callObj.ctiname;i.pbApiMuteAction(t,o,s,l,n,"mute",a)},unmute:function(e,a,r){var t=G_callObj.callrefid,o=G_callObj.ctinumber,s=G_callObj.custnumber,l=G_callObj.calltype,n=G_callObj.ctiname;i.pbApiMuteAction(t,o,s,l,n,"unmute",a)},hold:function(e,a,r){var t=G_callObj.callrefid,o=G_callObj.ctinumber,s=G_callObj.custnumber,l=G_callObj.calltype,n=G_callObj.ctiname;i.pbApiHoldAction(t,o,s,l,n,"hold",a)},unhold:function(e,a,r){var t=G_callObj.callrefid,o=G_callObj.ctinumber,s=G_callObj.custnumber,l=G_callObj.calltype,n=G_callObj.ctiname;i.pbApiHoldAction(t,o,s,l,n,"unhold",a)},sendDTMF:function(e,a,r){var t=G_callObj.callrefid,o=G_callObj.ctinumber,s=G_callObj.custnumber,l=G_callObj.calltype,n=G_callObj.ctiname,c=r;i.pbApiKeypress(t,o,s,l,n,c,a)},makeCall:function(e,a,r){var t=r.zsPhoneNumber,o=$(e).attr("callBackParam"),s=$(e).attr("pbxName");i.pbApiClick2Call(t,o,s,a)},getPhoneNumbers:function(e,a,r){Telephony.global.tempPhoneNumber="No_callerid",TeleAssigner.Map.doSuccessCallBackOperations(a)},CtrlBts:{callReceived:function(e){var a=e.callcontrolinfo,r=s.getState().myInfo.zuid,t=void 0!==a?a[r]:void 0,o=new Telephony.defCtrlBts,l=o.callProceedObj;return"inbound"===e.calltype&&void 0!==t&&void 0!==t.ans_hungup_firstscreen&&!0===t.ans_hungup_firstscreen&&(l=o.callReceivedObj),l},callProceedAns:function(e){var a=e.callcontrolinfo,r=s.getState().myInfo.zuid,t=void 0!==a?a[r]:void 0,o=(new Telephony.defCtrlBts).callProceedAnsObj;return void 0!==t&&(t.hungup_afteranswer&&(o.endIcon.display=!0,o.transferBtn.disabled=!0,o.transferBtn.display=!0,o.showEndCallBtn=!1),t.extra_callcontrol&&(o.openDescriptionBoxByDefault=!1,o.holdBtn.display=!0,o.dialPad.display=!0,o.muteBtn.display=!0,o.holdBtn.disabled=!0,o.dialPad.disabled=!0,o.muteBtn.disabled=!0,t.hold&&(o.holdBtn.disabled=!1),t.keypress&&(o.dialPad.disabled=!1),t.mute&&(o.muteBtn.disabled=!1))),o},transferCall:function(){var e=(new Telephony.defCtrlBts).transferCallObj;return e.showAnswerBtn=!1,e.showEndBtn=!1,e}},Prop:{autoCloseOBPopup:!0}},i={pbApiClick2Call:function(e,a,r,t){var s="/support/"+l+"PBApiConfig.do",n="event=click2call&customernumber="+encodeURIComponent(e)+"&callbackparam="+a+"&pbxname="+r+"&"+Object(o.b)()+"="+encodeURIComponent(Object(o.a)());$.ajax({url:s,cache:!1,type:"POST",data:n,success:function(e){if("localhost_api"===e.actionType){var a=void 0;""!==e.url?$.ajax({url:e.url,cache:!1,type:"POST",headers:e.headers,data:e.parameters,success:function(r){var o={};null!==(o="string"==typeof r?JSON.parse(r):r)?o.error?(a=getI18NValue("support.telephony.pbapi.click2call.errormsg.knownerror_admin",o.error),showAnimateMessageDiv(a,!0)):TeleAssigner.Map.doSuccessCallBackOperations(t):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}}).fail(function(){a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0)}):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}else if("protocol"===e.actionType)window.location.href=e.protocol;else if("failure"===e.result&&"OAUTH_USER_TYPE"===e.authType){var r=JSON.parse(e.oauthUserParams),o=r.pbxName,s=r.codePermUrl,l=r.scope,n=r.client_id,c=r.redirect_url,p=r.response_type,u=r.state;i.getPBXToken(o,s,l,n,c,u,p)}else"success"===e.result?TeleAssigner.Map.doSuccessCallBackOperations(t):"failure"===e.result&&showAnimateMessageDiv(e.message,!0)}})},pbApiAnswer:function(e,a,r,t,s,n){var c="/support/"+l+"PBApiConfig.do",p="event=callcontrol&action=answer&callrefid="+e+"&ctinumber="+a+"&custnumber="+r+"&calltype="+t+"&pbxname="+s+"&"+Object(o.b)()+"="+encodeURIComponent(Object(o.a)());$.ajax({url:c,cache:!1,type:"POST",data:p,success:function(e){if("localhost_api"===e.actionType){var a=void 0;""!==e.url?$.ajax({url:e.url,cache:!1,type:"POST",headers:e.headers,data:e.parameters,success:function(r){var t={};null!==(t="string"==typeof r?JSON.parse(r):r)?t.error?(a=getI18NValue("support.telephony.pbapi.click2call.errormsg.knownerror_admin",t.error),showAnimateMessageDiv(a,!0)):TeleAssigner.Map.doSuccessCallBackOperations(n):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}}).fail(function(){a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0)}):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}else if("protocol"===e.actionType)window.location.href=e.protocol;else if("failure"===e.result&&"OAUTH_USER_TYPE"===e.authType){var r=JSON.parse(e.oauthUserParams),t=r.pbxName,o=r.codePermUrl,s=r.scope,l=r.client_id,c=r.redirect_url,p=r.response_type,u=r.state;i.getPBXToken(t,o,s,l,c,u,p)}else"failure"===e.result&&(showAnimateMessageDiv(e.message,!0),Telephony.CurrentCall.t_baseObj.connectingDiv.is(":visible")&&(Telephony.CurrentCall.t_baseObj.phoneRingingButtonDiv.removeClass("zd-tc-opcpoint1"),Telephony.CurrentCall.t_baseObj.connectingDiv.hide()))}})},pbApiHungup:function(e,a,r,t,s,n,c){var p="/support/"+l+"PBApiConfig.do",u="event=callcontrol&action=hungup&callrefid="+e+"&ctinumber="+a+"&custnumber="+r+"&calltype="+t+"&pbxname="+s+"&hungupState="+n+"&"+Object(o.b)()+"="+encodeURIComponent(Object(o.a)());$.ajax({url:p,cache:!1,type:"POST",data:u,success:function(e){if("localhost_api"===e.actionType){var a=void 0;""!==e.url?$.ajax({url:e.url,cache:!1,type:"POST",headers:e.headers,data:e.parameters,success:function(r){var t={};null!==(t="string"==typeof r?JSON.parse(r):r)?t.error?(a=getI18NValue("support.telephony.pbapi.click2call.errormsg.knownerror_admin",t.error),showAnimateMessageDiv(a,!0)):TeleAssigner.Map.doSuccessCallBackOperations(c):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}}).fail(function(){a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0)}):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}else if("protocol"===e.actionType)window.location.href=e.protocol;else if("failure"===e.result&&"OAUTH_USER_TYPE"===e.authType){var r=JSON.parse(e.oauthUserParams),t=r.pbxName,o=r.codePermUrl,s=r.scope,l=r.client_id,n=r.redirect_url,p=r.response_type,u=r.state;i.getPBXToken(t,o,s,l,n,u,p)}else"failure"===e.result&&showAnimateMessageDiv(e.message,!0)}})},pbApiHoldAction:function(e,a,r,t,s,n,c){var p="/support/"+l+"PBApiConfig.do",u="event=callcontrol&action="+n+"&callrefid="+e+"&ctinumber="+a+"&custnumber="+r+"&calltype="+t+"&pbxname="+s+"&"+Object(o.b)()+"="+encodeURIComponent(Object(o.a)());$.ajax({url:p,cache:!1,type:"POST",data:u,success:function(e){if("localhost_api"===e.actionType){var a=void 0;""!==e.url?$.ajax({url:e.url,cache:!1,type:"POST",headers:e.headers,data:e.parameters,success:function(r){var t={};null!==(t="string"==typeof r?JSON.parse(r):r)?t.error?(a=getI18NValue("support.telephony.pbapi.click2call.errormsg.knownerror_admin",t.error),showAnimateMessageDiv(a,!0)):TeleAssigner.Map.doSuccessCallBackOperations(c):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}}).fail(function(){a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0)}):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}else if("protocol"===e.actionType)window.location.href=e.protocol;else if("failure"===e.result&&"OAUTH_USER_TYPE"===e.authType){var r=JSON.parse(e.oauthUserParams),t=r.pbxName,o=r.codePermUrl,s=r.scope,l=r.client_id,n=r.redirect_url,p=r.response_type,u=r.state;i.getPBXToken(t,o,s,l,n,u,p)}else"success"===e.result?TeleAssigner.Map.doSuccessCallBackOperations(c):"failure"===e.result&&showAnimateMessageDiv(e.message,!0)}})},pbApiMuteAction:function(e,a,r,t,s,n,c){var p="/support/"+l+"PBApiConfig.do",u="event=callcontrol&action="+n+"&callrefid="+e+"&ctinumber="+a+"&custnumber="+r+"&calltype="+t+"&pbxname="+s+"&"+Object(o.b)()+"="+encodeURIComponent(Object(o.a)());$.ajax({url:p,cache:!1,type:"POST",data:u,success:function(e){if("localhost_api"===e.actionType){var a=void 0;""!==e.url?$.ajax({url:e.url,cache:!1,type:"POST",headers:e.headers,data:e.parameters,success:function(r){var t={};null!==(t="string"==typeof r?JSON.parse(r):r)?t.error?(a=getI18NValue("support.telephony.pbapi.click2call.errormsg.knownerror_admin",t.error),showAnimateMessageDiv(a,!0)):TeleAssigner.Map.doSuccessCallBackOperations(c):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}}).fail(function(){a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0)}):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}else if("protocol"===e.actionType)window.location.href=e.protocol;else if("failure"===e.result&&"OAUTH_USER_TYPE"===e.authType){var r=JSON.parse(e.oauthUserParams),t=r.pbxName,o=r.codePermUrl,s=r.scope,l=r.client_id,n=r.redirect_url,p=r.response_type,u=r.state;i.getPBXToken(t,o,s,l,n,u,p)}else"success"===e.result?TeleAssigner.Map.doSuccessCallBackOperations(c):"failure"===e.result&&showAnimateMessageDiv(e.message,!0)}})},pbApiKeypress:function(e,a,r,t,s,n,c){var p="/support/"+l+"PBApiConfig.do",u="event=callcontrol&action=keypress&callrefid="+e+"&digit="+n+"&ctinumber="+a+"&custnumber="+r+"&calltype="+t+"&pbxname="+s+"&"+Object(o.b)()+"="+encodeURIComponent(Object(o.a)());$.ajax({url:p,cache:!1,type:"POST",data:u,success:function(e){if("localhost_api"===e.actionType){var a=void 0;""!==e.url?$.ajax({url:e.url,cache:!1,type:"POST",headers:e.headers,data:e.parameters,success:function(r){var t={};null!==(t="string"==typeof r?JSON.parse(r):r)?t.error?(a=getI18NValue("support.telephony.pbapi.click2call.errormsg.knownerror_admin",t.error),showAnimateMessageDiv(a,!0)):TeleAssigner.Map.doSuccessCallBackOperations(c):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}}).fail(function(){a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0)}):(a=e.isAdminUser?getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_admin",e.message):getI18NValue("support.telephony.pbapi.click2call.errormsg.unknownerror_otheruser",e.message),showAnimateMessageDiv(a,!0))}else if("protocol"===e.actionType)window.location.href=e.protocol;else if("failure"===e.result&&"OAUTH_USER_TYPE"===e.authType){var r=JSON.parse(e.oauthUserParams),t=r.pbxName,o=r.codePermUrl,s=r.scope,l=r.client_id,n=r.redirect_url,p=r.response_type,u=r.state;i.getPBXToken(t,o,s,l,n,u,p)}else"success"===e.result?TeleAssigner.Map.doSuccessCallBackOperations(c):"failure"===e.result&&showAnimateMessageDiv(e.message,!0)}})},getPBXToken:function(e,a,r,t,o,s,l){this.url=a+"?response_type="+l+"&scope="+r+"&client_id="+t+"&state="+s+"&redirect_uri="+o;var n=this;freezeBackground(),this[e]=window.open(this.url,"twitterWindow","location=0,status=0,width=700,height=500,left=300,top=100");this.interval=window.setInterval(function(){n[e].closed&&(removeFreezeLayer(),window.clearInterval(n.interval))},10)},revokeProvider:function(){if(window.confirm(" Are you sure want to delete the provider ?")){var e=s.getState().routing.paramMap.orgName,a=PBVars.global.G_ctiName;loadAjaxTab("","lightblue");var r="/support/"+e+"/CtiApiConfig.do",t="mode=revokeProvider&providerName="+a+"&customerPortalName="+e;t+="&"+Object(o.b)()+"="+encodeURIComponent(Object(o.a)()),$.ajax({url:r,type:"POST",data:t,success:function(e){$("#setuptab_telephonyall").trigger("click")},error:function(e){$("#ajax_load_tab").hide()}})}},generateAuthToken:function(){loadAjaxTab("","lightblue");var e="/support/"+l+"CtiApiConfig.do",a="mode=generateAuthToken&ctiname="+PBVars.global.G_ctiName;a+="&"+Object(o.b)()+"="+encodeURIComponent(Object(o.a)()),$.ajax({url:e,type:"POST",data:a,success:function(e){PBVars.global.G_TpiTkn=e,$("#type2AuthtokenDiv,#thumblist_bottom,#type2AuthtokenDisplay").show(),$("#headerActions,#type2GenAuthtoken").hide(),$("#type2Authtoken").text(PBVars.global.G_TpiTkn),$("#ajax_load_tab").hide()},error:function(e){$("#ajax_load_tab").hide()}})},showLicenseError:function(e,a){var r=getI18NValue("support.flee.twi.addon");r+='<div class="zd-tc-mt20 zd-tc-f13"><span class="tips_a"><a class="SLALink zd-tc-f13" target="_blank" href="'+e+'">'+getI18NValue("support.license.upgrade.note")+"</a></span> "+getI18NValue("support.flee.activate.note","Twilio Integration")+" </div>","true"===a&&(r=getI18NValue("support.flee.zti.addon","Free Edition"),r+='<div class="zd-tc-mt20 zd-tc-f13"><span class="tips_a"><a class="SLALink zd-tc-f13" target="_blank" href="'+e+'">'+getI18NValue("support.license.upgrade.note")+"</a></span> "+getI18NValue("support.flee.activate.note","Zoho Phonebridge")+" </div>");var t='<hr><div class="zd-tc-clra6 zd-tc-f12 zd-tc-lh22">'+getI18NValue("support.flee.note3")+"</div>";showCustomPopup({type:"info",popupClass:"red-hd-popup",icon:"icon-exclamation-thincircle zd-tc-i-tag zd-tc-mr10",okButtonLabel:getI18NValue("crm.button.ok"),onOkClick:function(){"true"===a?ajaxNew("/support/"+l+"ZTIConfig.do","event=buyNow&isAjax=true&loadType=innerBody"):ajaxNew("/support/"+l+"CtiApiConfig.do","mode=showproviders&isAjax=true&loadType=innerBody")},headerTitle:getI18NValue("support.history.operation.label.wfalert"),message:r,suggestion:t})},updatePhoneStatus:function(e,a,r){var t="/support/"+l+"PBApiConfig.do",s="event=userPhoneStatusChange&statusValue="+e+"&statusKey="+a+"&pbxname="+r;s+="&"+Object(o.b)()+"="+encodeURIComponent(Object(o.a)()),$.ajax({url:t,cache:!1,type:"POST",data:s,success:function(e){"failure"===e.result?showAnimateMessageDiv(e.message,!0):i.updatePBApiStatusUI(UserPhoneStatus[a])}})},updatePBApiStatusUI:function(e){if(0!==e){var a=$("#pbapi_status_image");a.removeClass("zd-tc-offlineclr zd-tc-onlineclr zd-tc-busyclr"),$("#pbapi_onoff").removeClass("hide");var r=void 0,t=void 0,o=void 0;e===UserPhoneStatus.WEB_ONLINE?(r="zd-tc-onlineclr",t=o=$("#pbapiStatus_WEB_ONLINE").text()):e===UserPhoneStatus.WEB_BUSY?(r="zd-tc-busyclr",t=o=$("#pbapiStatus_WEB_BUSY").text()):(r="zd-tc-offlineclr",t=o=$("#pbapiStatus_WEB_OFFLINE").text()),a.addClass(r).text(t).attr("title",o)}else $("#pbapi_onoff").addClass("hide")}}},"./src/telephony/providers/phonebridge/ZPhoneBridgeSetup.js":function(e,a,r){"use strict";r.r(a),r.d(a,"global",function(){return t}),r.d(a,"PBImpl",function(){return s});var t={agentList:void 0,G_ctiName:"",G_dispName:"",G_isConfigure:!1,G_phNumConf:!1,G_apiType:!1,G_editPhNum:!1,G_TpiTkn:!1},o=0,s={isAlreadyConfigured:function(e){loadAjaxTab("","lightblue"),clearInterval(pbIntervalObj);var a=PBVars.global.G_ctiName,r=SupportUI.CurrentPortal.portalName,t="/support/"+r+"/CtiApiConfig.do",o="mode=checkRegisteredUser&isAjax=true&loadType=innerBody&ctiname="+a,l=$("#teleLicense").val(),n=$("#configuredProvider").val(),i=$("#isAlreadyConfigured").val(),c=!1,p="false",u=!1;if("F"!==l&&"NF"!==l&&(n==PBVars.global.G_ctiName||""==n?c=!0:(u=!0,c=!1)),"true"==i?("type3"===PBVars.global.G_apiType&&(t="/support/"+r+"/CtiApiConfig.do",o="mode=getConfigDetails&isAjax=true&loadType=innerBody"),"type4"===PBVars.global.G_apiType&&(t="/support/"+r+"/CtiApiConfig.do",o="mode=getConfigDetails&isAjax=true&loadType=innerBody&ctiname="+a),"type1"===PBVars.global.G_apiType&&(t="/support/"+r+"/CtiApiConfig.do","E"!==l&&"R"!==l||(n==PBVars.global.G_ctiName||""==n?c=!0:(u=!0,c=!1)),o="mode=getConfigDetails&isAjax=true&loadType=innerBody&showNext="+c+"&currentProvider="+encodeURIComponent(PBVars.global.G_ctiName),p="true")):("type3"===PBVars.global.G_apiType&&(t="/support/"+r+"/TwilioConfig.do",o="event=buyNow&isAjax=true&loadType=innerBody"),"type4"===PBVars.global.G_apiType&&(t="/support/"+r+"/CtiApiConfig.do",o="mode=showPBProvider&isAjax=true&loadType=innerBody&ctiname="+a),"type1"===PBVars.global.G_apiType&&(t="/support/"+r+"/ZTIConfig.do","E"!==l&&"R"!==l||(n==PBVars.global.G_ctiName||""==n?c=!0:(u=!0,c=!1)),o="event=buyNow&isAjax=true&loadType=innerBody&showNext="+c+"&currentProvider="+encodeURIComponent(PBVars.global.G_ctiName),p="true")),c){var d=a.toLowerCase().replace(/\s/g,"");SupportUI.History.changeHashSilently("setup/channels/phone/"+d),$.ajax({url:t,type:"GET",data:o,success:function(e){if($("#setuptab_telephonyall").removeClass("cat_sel"),$("#setuptab_onpremise").addClass("cat_sel"),"true"==i){var a=$("#configuredProvider").val();a=a.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),$("#setuptab_onpremise").text(a),$("#setuptab_onpremise").attr("provNameUrl",d)}$("#show").show(),$("#thumblist").hide(),$("#ajax_load_tab").hide(),PBVars.global.G_apiType,$("#show").html(e)},error:function(e){}})}else{if(u)return void s.showConfigError();s.showTeleLicenseUI($("#telePayUrl").val(),p)}},changeTelephonyHash:function(){var e=$("#setuptab_onpremise").attr("provNameUrl").toLowerCase().replace(/\s/g,"");SupportUI.History.changeHashSilently("setup/channels/phone/"+e)},showTeleLicenseUI:function(e,a){var r=getI18NValue("support.flee.twi.addon");r+='<div class="zd-tc-mt20 zd-tc-f13"><span class="tips_a"><a class="SLALink zd-tc-f13" target="_blank" href="'+e+'">'+getI18NValue("support.license.upgrade.note")+"</a></span>. </div>","true"===a&&(r=getI18NValue("support.flee.zti.addon","Free Edition"),r+='<div class="zd-tc-mt20 zd-tc-f13"><span class="tips_a"><a class="SLALink zd-tc-f13" target="_blank" href="'+e+'">'+getI18NValue("support.license.upgrade.note")+"</a></span> "+getI18NValue("support.flee.activate.note","Phonebridge Integration")+" </div>");var t='<hr><div class="zd-tc-clra6 zd-tc-f12 zd-tc-lh22">'+getI18NValue("support.flee.note3")+"</div>";showCustomPopup({type:"info",popupClass:"red-hd-popup",icon:"icon-exclamation-thincircle zd-tc-i-tag zd-tc-mr10",okButtonLabel:getI18NValue("crm.button.ok"),headerTitle:getI18NValue("support.history.operation.label.wfalert"),message:r,suggestion:t})},showConfigError:function(){var e='<hr><div class="zd-tc-clra6 zd-tc-f12 zd-tc-lh22">'+getI18NValue("support.zti.delete.suggestion")+" "+getI18NValue("support.telephony.pbx.config.sugg")+"</div>";showCustomPopup({type:"info",popupClass:"red-hd-popup",icon:"icon-exclamation-thincircle zd-tc-i-tag zd-tc-mr10",okButtonLabel:getI18NValue("crm.button.ok"),headerTitle:getI18NValue("support.history.operation.label.wfalert"),message:getI18NValue("support.telephony.pbx.config.errormsg"),suggestion:e})},pbSlideShow:function(){o=0;var e=function(){if((o+=1)<=40){var e=$(".slide:visible"),a=e.next(".slide"),r=$(".slide-dot.active-slider"),t=r.next(".slide-dot"),l={direction:"left",mode:"hide"},n={direction:"right",mode:"show"};e.is(":last-child")&&r.is(":last-child")?(e.effect("slide",l,2e3),$("#pbImgSlide1").effect("slide",n,2e3),r.removeClass("active-slider"),$("#pbSliderPoint1").addClass("active-slider")):(e.effect("slide",l,2e3),a.effect("slide",n,2e3),r.removeClass("active-slider"),t.addClass("active-slider"))}else s.showPBImage("1")};fetchJQueryUIAssets(function(){pbIntervalObj=setInterval(e,1e4)})},showPBImage:function(e){clearInterval(pbIntervalObj),$("[id^=pbSliderPoint]").removeClass("active-slider"),$("[id^=pbImgSlide]").hide(),$("#pbSliderPoint"+e).addClass("active-slider"),$("#pbImgSlide"+e).show()},filterProviders:function(e,a){$(".setupTab").removeClass("slctdTab"),$(a).addClass("slctdTab"),void 0===e&&(e=""),"all"===e&&$(".tele_logo_cont").show(),"onpre"===e&&($(".tele_logo_cont").hide(),$(".tele_logo_cont").filter("[telephonyType='onpremise']").show()),"cloud"===e&&($(".tele_logo_cont").show(),$(".tele_logo_cont").filter("[telephonyType='onpremise']").hide()),handleSubtabAnimateDiv()},playPBVideo:function(e,a){clearInterval(pbIntervalObj),a+="?autoplay=1&enablejsapi=1",$(e).find("iframe").attr("src",a).show()}}}}]);