(window.deskappJsonp=window.deskappJsonp||[]).push([[130],{"../components/lib/Textarea/Textarea.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=l(n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js")),r=l(n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js")),i=l(n("../components/lib/Textarea/Textarea.module.css"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onBlur=n.onBlur.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),o(t,[{key:"onChange",value:function(e){e&&e.preventDefault();var t=this.props.onChange;t&&t(e.target.value,e)}},{key:"onBlur",value:function(e){e&&e.preventDefault();var t=this.props.onBlur;t&&t(e.target.value,e)}},{key:"onKeyDown",value:function(e){var t=this.props.onKeyDown;t&&t(e)}},{key:"render",value:function(){var e=this.props,t=e.size,n=e.placeHolder,o=e.needBorder,r=e.text,l=e.isDisabled,c=e.resize,u=e.maxLength,d=e.animated,m=e.variant,p=e.getRef,h=e.onFocus,f=e.dataId,b=e.className,g=e.isReadOnly,v=e.needAppearance,y=e.needReadOnlyStyle,w={horizontal:"resizeX",vertical:"resizeY",both:"resizeboth",none:"noresize"},k={};g&&(k.readOnly="readOnly"),l&&(k.disabled="disabled");var C=v?i.default.container+" "+i.default[t]+" "+i.default[m]+" "+(o?i.default.needBorder:i.default.noBorder)+" "+(c?i.default[w[c]]:i.default[w.none])+"  "+(d?i.default.animated:"")+"   "+(l||g?"":i.default.effect)+"   ":""+i.default.basic;return s.default.createElement("textarea",a({className:(b||"")+" "+(g&&y?i.default.readonly:"")+" "+C,placeholder:n},k,{"data-id":f,maxLength:u,onChange:this.onChange,onKeyDown:this.onKeyDown,onFocus:h,onBlur:this.onBlur,ref:p,value:r}))}}]),t}();t.default=c,c.defaultProps={isDisabled:!1,isReadOnly:!1,dataId:"TextareaComp",needBorder:!0,resize:"none",size:"small",variant:"default",needAppearance:!0,needReadOnlyStyle:!0},c.propTypes={animated:r.default.bool,className:r.default.string,dataId:r.default.string,getRef:r.default.func,isDisabled:r.default.bool,isReadOnly:r.default.bool,maxLength:r.default.oneOfType([r.default.string,r.default.number]),needAppearance:r.default.bool,needBorder:r.default.bool,needReadOnlyStyle:r.default.bool,onBlur:r.default.func,onChange:r.default.func,onFocus:r.default.func,onKeyDown:r.default.func,placeHolder:r.default.string,resize:r.default.oneOf(["horizontal","vertical","both","none"]),size:r.default.oneOf(["xsmall","small","medium","large"]),text:r.default.string,variant:r.default.oneOf(["default","primary"])},c.propTypesDescription={needBorder:" ",isDisabled:" ",resize:" ",size:" ",variant:" ",placeHolder:" ",text:" ",onChange:" ",maxLength:" ",animated:" ",getRef:" ",onFocus:" ",onBlur:" "}},"./src/actions/replyAssistantActions.js":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return c});var a=n("./src/utils/RequestAPI.js"),o=n("./src/utils/Common.js"),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),r=n.n(s);function i(e){return{types:Object(o.m)("ZIA_STATUS"),shouldCallAPI:function(t){return!r()("departmentSpecificState["+e+"].ziaStatus",t)},callAPI:function(t){return Object(a.a)("/api/v1/zia/getFeatureStatus?feature=ticket_assistant&category=dep&categoryId="+e,!1,{orgId:t.currentOrgId}).get().then(function(t){return{status:t.status,deptId:e}})}}}function l(e,t,n){return{types:Object(o.m)("GET_BESTANSWER"),callAPI:function(o){return Object(a.a)("/api/v1/zia/tickets/"+e+"/assistant/answer?departmentId="+n+"&threadId="+t+"&contentType=html",!1,{orgId:o.currentOrgId}).get().then(function(e){return e})}}}function c(e,t,n){return{types:Object(o.m)("GET_BESTANSWER"),callAPI:function(o){return Object(a.a)("/api/v1/zia/tickets/"+e+"/assistant/chat?departmentId="+t+"&contentType=html&question="+n,!1,{orgId:o.currentOrgId}).get().then(function(e){return e})}}}},"./src/components/Subtab/Loading/Loading.js":function(e,t,n){"use strict";var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),r=n.n(s),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),l=n.n(i),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),h=n.n(p),f=n("./src/components/Subtab/Loading/SubtabLoading.module.css"),b=n.n(f),g=n("../components/lib/Layout/index.js"),v=function(e){function t(){return r()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),l()(t,[{key:"render",value:function(){return h.a.createElement(g.Container,{alignBox:"row",align:"both",className:b.a.container},h.a.createElement(g.Box,{className:b.a.dot}),h.a.createElement(g.Box,{className:b.a.dot}),h.a.createElement(g.Box,{className:b.a.dot}),h.a.createElement(g.Box,{className:b.a.dot}),h.a.createElement(g.Box,{className:b.a.dot}),h.a.createElement(g.Box,{className:b.a.dot}))}}]),t}(h.a.Component);t.a=v},"./src/components/Subtab/SuggestionPreviewBox/SuggestionPreviewBox.js":function(e,t,n){"use strict";var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),r=n.n(s),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),l=n.n(i),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),h=n.n(p),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),b=n.n(f),g=n("./src/components/Subtab/SuggestionPreviewBox/SuggestionPreviewBox.module.css"),v=n.n(g),y=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),w=n.n(y),k=n("./src/components/Subtab/ThreadAttachments/ThreadAttachments.js"),C=n("./src/fz-i18n/index.js"),_=n("./src/utils/bind.js"),N=n("../components/lib/Layout/index.js"),x=n("./src/components/Subtab/Loading/Loading.js"),j=function(e){function t(e){r()(this,t);var n=u()(this,(t.__proto__||o()(t)).call(this,e));return _.a.apply(n,["shareLink","pasteContent"]),n}return m()(t,e),l()(t,[{key:"shareLink",value:function(){var e=this.props,t=e.shareLink;t(e.previewData.id)}},{key:"pasteContent",value:function(){var e=this.props,t=e.pasteContent;t(e.previewData.id)}},{key:"render",value:function(){var e=this.props,t=e.closePreviewBox,n=e.previewData,a=e.ticketLabel,o=e.orgId,s=e.downloadAttachment,r=e.showAttachmentViewer,i=e.isPeekView,l=e.isLightAgent,c=n.createdTime,u=n.title,d=n.createdBy,m=n.category,p=n.answer,f=n.attachments,b=void 0===f?[]:f,g=n.status,y=n.permission;return c=C.h.userDateFormat(new Date(c),{},"lateby","left",!1,function(){return"DD MMM YYYY hh:mm A"}),h.a.createElement(N.Container,{className:v.a.suggestnDtls+" "+(i&&v.a.peeksuggestnDtls)},u?h.a.createElement(h.a.Fragment,null,h.a.createElement(N.Box,{onClick:t,className:v.a.header},h.a.createElement("span",{className:v.a.icnClse},h.a.createElement(w.a,{name:"ZD-cross",size:"20"}))),h.a.createElement(N.Box,{flexible:!0,scroll:"both",className:v.a.textArea},h.a.createElement("div",{className:v.a.topDiv},h.a.createElement("div",{className:v.a.topContnt},u)),h.a.createElement("div",{className:v.a.titleFormat},C.h.getI18NValue("support.label.created"),": ",h.a.createElement("span",{className:v.a.highLight},d&&d.name," "),C.h.getI18NValue("support.solutions.in.topic"),h.a.createElement("span",{className:v.a.highLight}," ",m&&m.name," "),C.h.getI18NValue("support.label.at")," ",c),h.a.createElement("div",{className:v.a.dtlsComnt,dangerouslySetInnerHTML:{__html:p}})),b.length?h.a.createElement("div",{className:v.a.attachCont},h.a.createElement(k.a,{data:b,downloadAttachment:s,showAttachmentViewer:r,orgId:o})):null,l?null:h.a.createElement(N.Box,null,h.a.createElement("div",{className:v.a.btmOptions},"Published"===g&&"AGENTS"!=y?h.a.createElement("span",{className:v.a.optnList,onClick:this.shareLink},h.a.createElement("span",{className:v.a.optionIcn},h.a.createElement(w.a,{name:"ZD-share",size:"14"})),h.a.createElement("span",{className:v.a.optionName},C.h.getI18NValue("support.label.share.link.to.ticket",[a]))):null,h.a.createElement("span",{className:v.a.optnList,onClick:this.pasteContent},h.a.createElement("span",{className:v.a.optionIcn},h.a.createElement(w.a,{name:"ZD-copy22",size:"14"})),h.a.createElement("span",{className:v.a.optionName},C.h.getI18NValue("support.label.paste.to.ticket",[a])))))):h.a.createElement(x.a,null))}}]),t}(h.a.Component);t.a=j,j.propTypes={closePreviewBox:b.a.func,downloadAttachment:b.a.func,isLightAgent:b.a.bool,isPeekView:b.a.bool,orgId:b.a.number,pasteContent:b.a.func,previewData:b.a.object,shareLink:b.a.func,showAttachmentViewer:b.a.func,ticketLabel:b.a.string}},"./src/components/Subtab/ThreadAttachments/ThreadAttachments.js":function(e,t,n){"use strict";var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),r=n.n(s),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),l=n.n(i),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),h=n.n(p),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),b=n.n(f),g=n("./src/components/Subtab/ThreadAttachments/ThreadAttachments.module.css"),v=n.n(g),y=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),w=n.n(y),k=n("./src/utils/Attachment.js"),C=n("./src/components/Link/Link.js"),_=n("./src/fz-i18n/index.js"),N=function(e){function t(){return r()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.orgId,o=t.showAttachmentViewer,s=t.size,r=t.neNeedToDownload,i=t.dataId,l=Object(k.h)(n);return h.a.createElement("div",null,h.a.createElement("div",{className:v.a.AttachCount,"data-id":i},h.a.createElement("span",{className:v.a.mr6},n.length),h.a.createElement("span",null,h.a.createElement(_.c,{i18NKey:n.length>1?"label.attachments":"support.feedback.attachment"})),h.a.createElement("span",{className:v.a.ml6},"(",Object(k.f)(l),")")),n.map(function(t,i){var l=t.name,c=t.downloadUrl,u=t.href,d=t.id,m=t.viewUrl,p=t.size,f=Object(k.l)(l)||Object(k.i)(l);return c=c||u,h.a.createElement("div",{className:v.a.docspan,key:i,onClick:r?null:f?k.b.bind(e,d,n,function(e){o(e)}):k.n.bind(e,m||u,a),"data-id":1===n.length?"threadAttch":"threadAttch_"+i},h.a.createElement("span",{className:v.a.attachment+" "+v.a[s]},h.a.createElement("div",{className:v.a.attachleft},h.a.createElement(w.a,{name:Object(k.d)(l),iconClass:v.a.attachIcon})),h.a.createElement("div",{className:v.a.attachright},h.a.createElement("span",{className:v.a.atatchName,"data-title":l},l),h.a.createElement("span",{className:v.a.attachSize},Object(k.f)(p))),r?null:h.a.createElement(C.a,{target:"_self",href:Object(k.a)(c,a),className:v.a.attachDownload,title:_.h.getI18NValue("support.label.download")},h.a.createElement(w.a,{name:"ZD-downloadNew",iconClass:v.a.downIcon}))))}))}}]),t}(h.a.Component);t.a=N,N.propTypes={data:b.a.array,dataId:b.a.string,downloadAttachment:b.a.func,neNeedToDownload:b.a.bool,orgId:b.a.string,showAttachmentViewer:b.a.func,size:b.a.string},N.defaultProps={size:"medium"}},"./src/components/Subtab/zia/BotConversation/BotConversation.js":function(e,t,n){"use strict";var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),r=n.n(s),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),l=n.n(i),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),h=n.n(p),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),b=n.n(f),g=n("./src/components/Subtab/zia/BotConversation/BotConversation.module.css"),v=n.n(g),y=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),w=n.n(y),k=n("../components/lib/Textarea/Textarea.js"),C=n.n(k),_=n("../components/lib/Card/index.js"),N=n("../components/lib/Layout/index.js"),x=n("./src/components/avatar/AvatarIcon/AvatarIcon.js"),j=n("./src/utils/bind.js"),E=n("./src/components/Subtab/zia/BotAnswer/BotAnswer.css"),I=n.n(E),z=n("./src/components/Link/Link.js"),A=function(e){function t(e){r()(this,t);var n=u()(this,(t.__proto__||o()(t)).call(this,e));n.state={isTruncate:!1};return j.a.apply(n,["onHelpFulClick","onNotHelpFulClick","setContentRef","showFullContent","onContainerCLick"]),n}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this.contentRef;e.offsetHeight<e.scrollHeight&&this.setState({isTruncate:!0})}},{key:"setContentRef",value:function(e){this.contentRef=e}},{key:"onHelpFulClick",value:function(){var e=this.props;(0,e.handleBotRating)(e.id,!0)}},{key:"onNotHelpFulClick",value:function(){var e=this.props;(0,e.handleBotRating)(e.id,!1)}},{key:"showFullContent",value:function(){var e=this.props,t=e.showFullContent;t(e.id)}},{key:"onContainerCLick",value:function(e){if("IMG"==e.target.tagName){for(var t=[],n=0,a=this.contentRef.querySelectorAll("img"),o=0;o<a.length;o++)t.push({viewUrl:a[o].src,index:o}),e.target==a[o]&&(n=o);this.props.showAttachmentViewer({previewData:t,selectedIndex:n})}}},{key:"render",value:function(){var e=this,t=this.state.isTruncate,n=this.props,a=n.data,o=n.openPreviewBox,s=n.pasteContent,r=n.isLightAgent,i=n.orgName,l=n.sanitizedDeptName,c=n.sanitizedSolutionName,u=a.answer,d=a.relatedArticles,m=a.needBotIcn,p=void 0===m||m,f=a.replyStatus,b=a.isRated,g=a.isNotHelpFul,v=a.isExpaned,y=d&&d.length;return t=t&&!v,h.a.createElement(N.Container,{alignBox:"row",className:I.a.animate+" "+(t?I.a.truncate:""),onClick:this.onContainerCLick},!y&&p?h.a.createElement(N.Box,{className:I.a.bot},h.a.createElement(x.a,{name:"ZD-botHead",size:"medium"})):null,y?h.a.createElement("div",{className:I.a.botConversation},h.a.createElement("div",{className:I.a.message+" "+(v?"":I.a.hideContent),dangerouslySetInnerHTML:{__html:u.message},ref:this.setContentRef}),t?h.a.createElement("span",{className:I.a.more,onClick:this.showFullContent},"see more..."):null,h.a.createElement(N.Box,{className:I.a.articleContainer},"articles"===f||r?h.a.createElement("div",null,h.a.createElement("p",{className:I.a.articleHeader},"Related Articles"),d.map(function(t){var n=t.id,a=t.title;return h.a.createElement("span",{className:I.a.article,key:n,onClick:o.bind(e,n)},a)})):h.a.createElement("div",{className:I.a.blueBtn,onClick:s.bind(this,d[0].id)},"Use this in your Reply"),h.a.createElement("div",{className:I.a.helpFul},"articles"!==f?h.a.createElement("span",{className:I.a.linkAricle,onClick:o.bind(this,d[0].id)},"Link to article"):h.a.createElement("div",null,"Helpful ?"),h.a.createElement("div",{className:I.a.icons},h.a.createElement("span",{className:I.a.icon+" "+(b?I.a.isRated:""),"data-title":b?null:"Helpful",onClick:!b&&this.onHelpFulClick},h.a.createElement(w.a,{name:"ZD-deskLikeNew"})),h.a.createElement("span",{className:I.a.icon+" "+(b?I.a.isRated:""),"data-title":b?null:"Not Helpful",onClick:!b&&this.onNotHelpFulClick},h.a.createElement(w.a,{name:"ZD-deskDislikeNew"})))))):h.a.createElement(N.Box,{className:I.a.botConversation+" "+(p?I.a.convWithIcon:"")+" "+(p?"":I.a.hideIcon)},h.a.createElement("div",{className:I.a.message+" "+(t?I.a.hideContent:""),dangerouslySetInnerHTML:{__html:u.message},ref:this.setContentRef}),t?h.a.createElement("span",{className:I.a.more,onClick:this.showFullContent},"see more..."):null,g&&!r?h.a.createElement(z.a,{className:I.a.greenBtn,href:"/agent/"+i+"/"+l+"/"+c+"/page#Solutions/new",target:"_blank"},"Create an article"):null))}}]),t}(p.Component),B=A;A.propTypes={data:b.a.array,handleBotRating:b.a.func,id:b.a.string,isLightAgent:b.a.bool,openPreviewBox:b.a.func,pasteContent:b.a.func,showAttachmentViewer:b.a.func,showFullContent:b.a.func};var S=n("./src/components/Subtab/zia/BotQuestion/BotQuestion.css"),D=n.n(S),L=n("../components/lib/Avatar/Avatar.js"),T=n.n(L),O=function(e){function t(){return r()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.name,a=e.photoURL;return h.a.createElement(N.Container,{alignBox:"row",className:D.a.animate+" "+D.a.user},h.a.createElement(N.Box,{className:D.a.bot},h.a.createElement(T.a,{name:n,src:a,size:"medium"})),h.a.createElement(N.Box,null,h.a.createElement("div",{className:D.a.userConversation},t)))}}]),t}(p.Component),R=O;O.propTypes={name:b.a.string,photoURL:b.a.string,question:b.a.object};var P=n("./src/components/Subtab/zia/BotTyping/BotTyping.module.css"),F=n.n(P),V=function(e){function t(e){return r()(this,t),u()(this,(t.__proto__||o()(t)).call(this,e))}return m()(t,e),l()(t,[{key:"render",value:function(){return h.a.createElement("div",{className:F.a.typing+" "+F.a.container},h.a.createElement("div",null),h.a.createElement("div",null),h.a.createElement("div",null))}}]),t}(h.a.Component);var Z=n("./src/components/Subtab/SuggestionPreviewBox/SuggestionPreviewBox.js"),H=n("./src/fz-i18n/index.js"),q=n("./src/utils/Editor.js"),U=function(e){function t(e){r()(this,t);var n=u()(this,(t.__proto__||o()(t)).call(this,e));n.state={question:"",previewData:{}};return j.a.apply(n,["onQuestionChange","onKeyDown","getAnswer","showTyping","hideTyping","setScrollRef","handleBotRating","openPreviewBox","closePreviewBox","shareLink","pasteContent","insertContentInEditor"]),n}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.ziaInitiated,a=t.initiateZIABotReply;n||(this.showTyping(),a().then(function(){e.hideTyping()}))}},{key:"onQuestionChange",value:function(e,t){this.setState({question:e})}},{key:"onKeyDown",value:function(e){13!==e.keyCode||e.shiftKey||this.getAnswer()}},{key:"getAnswer",value:function(){var e=this,t=this.state,n=t.question,a=t.isFetching;""==(n=n.trim())||a||(this.showTyping(),this.props.getAnswer(n).then(function(){e.hideTyping()},function(){e.hideTyping()}))}},{key:"showTyping",value:function(){var e=this;this.setState({isFetching:!0,question:""},function(){e.setScrollTop()})}},{key:"hideTyping",value:function(){var e=this;this.setState({isFetching:!1,question:""},function(){e.setScrollTop()})}},{key:"handleBotRating",value:function(e,t){var n=this;this.props.handleBotRating(e,t),setTimeout(function(){n.setScrollTop()},10)}},{key:"setScrollRef",value:function(e){this.srcollRef=e}},{key:"setScrollTop",value:function(){this.srcollRef.scrollTop=this.srcollRef.scrollHeight}},{key:"openPreviewBox",value:function(e){var t=this;this.setState({previewId:e}),this.props.getArticle(e).then(function(n){t.setState({previewData:n.data.entities.article[e]})})}},{key:"closePreviewBox",value:function(){this.setState({previewId:null})}},{key:"shareLink",value:function(){this.closePreviewBox();var e=this.props,t=e.isEdtiorOpen,n=e.editorId,a=this.state.previewData,o='<br><a href="'+a.webUrl+'" target="_blank" rel="noopener noreferrer">'+a.title+"</a><br>";this.closePreviewBox(),t?Object(q.c)(n,o):this.insertContentInEditor(o)}},{key:"pasteContent",value:function(e){var t=this;this.closePreviewBox();var n=this.props,a=n.isEdtiorOpen,o=n.editorId,s=n.getArticle,r=this.state.previewData,i=r.answer,l=r.attachments;i?(i=Object(q.e)(i),a?Object(q.c)(o,"<br>"+i+"<br></br>"):this.insertContentInEditor("<br>"+i+"<br></br>",l)):s(e).then(function(n){var s=n.data.entities.article[e]||{},r=s.answer,i=s.attachments;r=Object(q.e)(r),a?Object(q.c)(o,"<br>"+r+"<br></br>"):t.insertContentInEditor("<br>"+r+"<br></br>",i)})}},{key:"insertContentInEditor",value:function(e,t){var n=this.props,a=n.recentThread,o=n.setSolutionContentInEditor,s=n.recentThreadId,r=n.ticketId;this.closePreviewBox(),a?"DRAFT"==a.status?o(s,a.content,a,"editDraft",e,t):o(s,a.content,a,"replyall",e,t):o(r," ","","replyall",e,t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isFetching,a=t.question,o=t.previewId,s=t.previewData,r=void 0===s?{}:s,i=this.props,l=i.conversations,c=void 0===l?[]:l,u=i.name,d=i.photoURL,m=i.showFullContent,p=i.showAttachmentViewer,f=i.moduleMeta,b=i.downloadAttachment,g=i.isLightAgent,y=i.orgName,k=i.sanitizedDeptName,x=i.sanitizedSolutionName;return h.a.createElement(_.Card,null,h.a.createElement(_.CardHeader,{className:v.a.header},H.h.getI18NValue("support.zia.reply.assistant")),o?h.a.createElement(Z.a,{previewData:r,ticketLabel:f.tickets.singularLabel,downloadAttachment:b,showAttachmentViewer:p,closePreviewBox:this.closePreviewBox,shareLink:this.shareLink,pasteContent:this.pasteContent,isLightAgent:g,needArrow:!1}):null,h.a.createElement(_.CardContent,{className:v.a.posrel},h.a.createElement("div",{className:v.a.conversation,ref:this.setScrollRef},c.map(function(t,n){return"question"==t.type?h.a.createElement(R,{key:n,question:t.question,name:u,photoURL:d}):h.a.createElement(B,{key:n,id:n,data:t,handleBotRating:e.handleBotRating,showFullContent:m,showAttachmentViewer:p,openPreviewBox:e.openPreviewBox,pasteContent:e.pasteContent,isLightAgent:g,orgName:y,sanitizedDeptName:k,sanitizedSolutionName:x})}),n?h.a.createElement(V,null):null)),h.a.createElement(_.CardFooter,{className:v.a.footer},h.a.createElement(N.Container,{alignBox:"row",align:"vertical"},h.a.createElement(N.Box,{flexible:!0},h.a.createElement(C.a,{placeHolder:H.h.getI18NValue("support.ask.me.something"),needBorder:!1,text:a,onChange:this.onQuestionChange,onKeyDown:this.onKeyDown,className:v.a.textArea,maxLength:"5000"})),h.a.createElement(N.Box,{className:v.a.sendButton+" "+(a.length?v.a.sendHover:""),onClick:this.getAnswer},h.a.createElement(w.a,{name:"ZD-kbessentialsendmessage"})))))}}]),t}(h.a.Component);t.a=U;U.propTypes={conversations:b.a.array,downloadAttachment:b.a.func,editorId:b.a.string,getAnswer:b.a.func,getArticle:b.a.func,handleBotRating:b.a.func,initiateZIABotReply:b.a.func,isEdtiorOpen:b.a.bool,isLightAgent:b.a.bool,isPeekView:b.a.bool,moduleMeta:b.a.object,name:b.a.string,orgName:b.a.string,photoURL:b.a.string,recentThread:b.a.object,recentThreadId:b.a.string,sanitizedDeptName:b.a.string,sanitizedSolutionName:b.a.string,showAttachmentViewer:b.a.func,showFullContent:b.a.func,ticketId:b.a.string,ziaInitiated:b.a.bool}},"./src/components/avatar/AvatarIcon/AvatarIcon.js":function(e,t,n){"use strict";var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),r=n.n(s),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),l=n.n(i),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),h=n.n(p),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),b=n.n(f),g=n("./src/components/avatar/AvatarIcon/AvatarIcon.module.css"),v=n.n(g),y=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),w=n.n(y),k=function(e){function t(){return r()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.size,a=e.iconSize,o=e.iconClass,s=e.onClick,r=e.palette,i=e.dataId,l=e.className,c=e.isIconBold;return h.a.createElement("span",{className:v.a.container+" "+v.a[n]+" "+v.a[r]+" "+(l||""),onClick:s,"data-id":"ZD-chEmail1"===t?"autoId_215":"ZD-chPhone"===t?"autoId_885":i},h.a.createElement(w.a,{name:t,size:a,iconClass:v.a["text_"+o]?v.a["text_"+o]:o||null,isBold:c}))}}]),t}(h.a.Component);t.a=k,k.defaultProps={iconSize:"15",name:"ZD-addAgent",palette:"default",size:"medium",isIconBold:!1},k.propTypes={className:b.a.string,dataId:b.a.string,iconClass:b.a.string,iconSize:b.a.string,isIconBold:b.a.bool,name:b.a.string,onClick:b.a.func,palette:b.a.oneOf(["default","primary","secondary","success","danger"]),size:b.a.string}},"./src/containers/Subtab/ReplyAssistant/ReplyAssistant.js":function(e,t,n){"use strict";n.r(t);var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),r=n.n(s),i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),l=n.n(i),c=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),h=n.n(p),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),b=n.n(f),g=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-redux/es/index.js"),v=n("./src/actions/replyAssistantActions.js"),y=n("./src/components/Subtab/zia/BotConversation/BotConversation.js"),w=function(e){function t(e){r()(this,t);var n=u()(this,(t.__proto__||o()(t)).call(this,e));return n.state={},n}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.ticket,n=e.ticketId;(0,e.getBestAnswer)(n,t.recentThreadId,t.departmentId)}},{key:"render",value:function(){return h.a.createElement(y.a,{textBox:"true"})}}]),t}(p.Component);w.propTypes={getBestAnswer:b.a.func,ticket:b.a.object,ticketId:b.a.string},t.default=Object(g.connect)(function(e,t){return{ticket:e.module.ticket[t.ticketId]}},{getBestAnswer:v.b})(w)},"./src/utils/Attachment.js":function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"l",function(){return u}),n.d(t,"i",function(){return d}),n.d(t,"p",function(){return m}),n.d(t,"q",function(){return p}),n.d(t,"m",function(){return h}),n.d(t,"k",function(){return f}),n.d(t,"h",function(){return g}),n.d(t,"j",function(){return v}),n.d(t,"b",function(){return y}),n.d(t,"a",function(){return w}),n.d(t,"n",function(){return k}),n.d(t,"c",function(){return C}),n.d(t,"o",function(){return _}),n.d(t,"g",function(){return N});var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/promise.js"),o=n.n(a),s=n("./src/utils/Browser.js"),r=n("./src/fz-i18n/index.js");function i(e){var t=c(e),n=Object(s.a)().toLowerCase()||"",a=navigator.platform.toLowerCase()||"";switch(t){case"jpeg":case"jpg":case"png":case"gif":case"bmp":case"tiff":case"tif":case"ico":return"ZD-filePicture";case"txt":case"rtf":return"ZD-fileText2";case"pdf":return"ZD-filePdf";case"html":case"htm":case"xhtml":return-1!==n.indexOf("chrome")||-1!==n.indexOf("safari")?"ZD-chrome":-1!==n.indexOf("ie")||-1!==n.indexOf("edge")?"ZD-ie":"ZD-firefox";case"ppt":case"pps":case"odp":case"sxi":case"pptx":return"ZD-ppt";case"rar":case"jar":case"zip":return"ZD-zip3";case"doc":case"docx":case"sxw":case"odt":return-1!==a.indexOf("mac")||-1!==a.indexOf("linux")?"ZD-fileOpenoffice":"ZD-fileWord";case"xml":return"ZD-xml";case"xls":case"xlsx":case"sxc":case"ods":case"csv":case"tsv":return"ZD-fileExcel";case"ics":return"ZD-ics";case"exe":return"ZD-exe";case"sh":case"bin":return"ZD-sh2";case"css":return"ZD-css5";case"mp3":case"wav":case"wma":case"aac":case"m4r":case"ogg":return"ZD-fileMusic";case"mp4":case"mkv":case"mov":case"mpeg":case"flv":case"avi":case"webm":return"ZD-fileVideo";default:return"ZD-unknown"}}function l(e){return(e=parseInt(e))<1e3?e+" Bytes":e<1e6?(e/1e3).toFixed(1)+" KB":e>=1e6?(e/1e6).toFixed(1)+" MB":void 0}function c(e){return e&&-1!=e.indexOf(".")?e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase():""}function u(e){var t=c(e);return/jpeg|jpg|png|gif|bmp|ico/i.test(t)}function d(e){var t=c(e);return/mp3|wav|ogg/i.test(t)}function m(e,t){var n={inValidArray:[],validArray:[]};if(t+e.length>10)return n.isCountExceeds=!0,n;for(var a=0;a<e.length;a++){var o=e[a],s=o.name,r=o.size;h(s)?n.inValidArray.push({isUnSupported:!0}):f(s)?n.inValidArray.push({isFileNameSizeInvalid:!0}):0===o.size?n.inValidArray.push({isEmpty:!0}):b(r)?n.inValidArray.push({isAttachSizeExceeded:!0}):n.validArray.push(o)}return n}function p(e,t,n,a){if(t+e.length>10)a(r.h.getI18NValue("support.attachments.count.exceeds",[10]));else for(var o=0;o<e.length;o++){var s=e[o],i=s.name,l=s.size;if(h(i))a(r.h.getI18NValue("support.community.attachmentcontent.extensionnotpermitted"));else if(f(i))a(r.h.getI18NValue("support.comments.attachment.fileNameSizeLimitation"));else if(0!==s.size)if(b(l))a(r.h.getI18NValue("support.feedback.uploaded.file.exceeds.20mb"));else{var c=new FormData;c.append("file",s),n&&n(c)}else a(r.h.getI18NValue("support.request.empty.attachment.message"))}}function h(e){var t=e.split(".").pop().toLowerCase();return-1!==["ade","adp","bat","chm","cmd","com","cpl","exe","hta","ins","isp","jar","lib","lnk","mde","msc","msp","mst","pif","scr","sct","shb","sys","vb","vbe","vxd","wsc","wsf","wsh","jse","vbs"].indexOf(t)}function f(e){return e.length>100}function b(e){return e>20971520}function g(e){var t=0;return e.forEach(function(e){t+=parseInt(e.size)}),t}function v(e,t){return!(!(null!==e.types||e.files&&e.files.length>0)||t.fromPaste||!(e.files&&e.files.length>0||(e.types.indexOf?-1!==e.types.indexOf("Files"):e.types.contains("application/x-moz-file"))||"Files"===e.types[0]))}function y(e,t,n){var a={};a.previewData=t.filter(function(e){return!e.isPreview&&(u(e.name)||d(e.name))}),a.previewData.filter(function(t,n){t.id===e&&(a.selectedIndex=n)}),n&&n(a)}function w(e,t,n){var a=e.indexOf("/api"),o=e;return a>-1&&(o=e.slice(a,e.length),o+="?orgId="+t+(n?"&inline=true":"")),o}function k(e,t){window.open(w(e,t,!0))}function C(e,t){window.location.href=w(e,t,!1)}function _(e,t,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=e.length,c=[],u=[],d=0;if(a&&l>a-n){var m=r.h.getI18NValue("support.attachments.count.exceeds",[a]);return o.a.resolve({isError:!0,errorI18N:m})}for(var p=0;p<l;p++){var b=e[p],g=b||{},v=g.size,y=void 0===v?0:v,w=g.name,k=void 0===w?"":w;if(d+=y,h(k)){var C=r.h.getI18NValue("support.community.attachmentcontent.extensionnotpermitted");c.push({errorI18N:C,fileName:k,errorType:"fileType"})}else if(f(k)){var _=r.h.getI18NValue("support.comments.attachment.fileNameSizeLimitation");c.push({errorI18N:_,fileName:k,errorType:"fileNameSize"})}else if(0===y){var N=r.h.getI18NValue("support.request.empty.attachment.message");c.push({errorI18N:N,fileName:k,errorType:"emptyFile"})}else u.push(b)}if(!u.length){if(1===c.length){var x=c[0].errorI18N;return o.a.resolve({isError:!0,errorI18N:x})}var j=r.h.getI18NValue("support.unable.to.process.your.request");return o.a.resolve({isError:!0,errorI18N:j})}if(0===d){var E=r.h.getI18NValue("support.request.empty.attachment.message");return o.a.resolve({isError:!0,errorI18N:E})}if(d+i>1024*s*1024){var I=r.h.getI18NValue("support.attachments.size.limit.exceeds",[s]);return o.a.resolve({isError:!0,errorI18N:I})}for(var z=[],A=[],B=[],S=[],D=function(e){var n=u[e];if(t){var a=new FormData;a.append("file",n);var o=e,s=t(a,n,o).then(function(e){var t=(e.data||{}).data,n=void 0===t?{}:t,a=n.id;a&&(z[o]=n,A[o]=a)},function(t){var a=n.name,o=r.h.getI18NValue("support.unable.to.process.your.request");return S.push(e),c.push({errorI18N:o,fileName:a,errorType:"apiError"}),t});B.push(s)}},L=0;L<u.length;L++)D(L);var T={uploadFiles:z,inValidFiles:c,isError:!1,uploadFileIds:A,inValidFilesIndex:S};return o.a.all(B).then(function(){return A.length?T:{isError:!0,errorI18N:r.h.getI18NValue("support.unable.to.process.your.request")}})}function N(e,t){var n=e.name;return{index:t,isPreview:!0,size:e.size,name:n,href:URL.createObjectURL(e)}}},"./src/utils/Editor.js":function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return r}),n.d(t,"f",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return c});var a=n("./src/utils/Common.js");function o(e,t){var n=editor[e];n&&t&&n.insertHTML(t)}function s(e){var t=editor[e];if(null!=t){var n=t.getContent();return"<br>"==(n=n.trim())?"":("plaintext"==t.mode&&(n=function(e){void 0!==e&&(e=(e=encodeHTML(e)).replace(/\n/g,"<br/>"));return e}(n)),n)}return""}function r(e,t,n,a){var o={content:"",isSnippetExist:!1,triggerWord:""},s="";if(e.modify){var r=e.getRangeAt(0);e.collapseToStart(),e.modify("move","backward","word"),e.modify("extend","forward","word");var i=e.toString().toLowerCase().trim(),l=a.filter(function(e){return e.snippetWord.toLowerCase()==i.toLowerCase()});null!=(s=l.length?l[0].expandedContent:"")&&""!=s&&s.length>0?(o.isSnippetExist=!0,o.content=s,o.triggerWord=i.toLowerCase(),r.setStart(e.anchorNode,e.anchorOffset),r.setEnd(e.focusNode,e.focusOffset)):(o.content="&nbsp;&nbsp;&nbsp;&nbsp;",o.triggerWord=i.toLowerCase()),e.removeAllRanges(),e.addRange(r)}else o=function(e,t,n,a){var o="",s=e.getRangeAt(0);s.collapse(!0),s.setStart(e.anchorNode,0),o=s.toString();var r=s.cloneRange(),i=e.anchorNode.textContent,l=/\s+/,c=i.split(l).filter(Boolean),u=o.split(l).filter(Boolean),d="",m="",p={content:"",isSnippetExist:!1,triggerWord:""},h=u[u.length-1];if(""!=h&&void 0!==h){d=c[u.length-1],parseInt(d.length);var f=d.toLowerCase(),b=a.filter(function(e){var t=e.snippetWord;return t.toLowerCase()==f.toLowerCase()});m=b.length?b[0].expandedContent:""}if(null!=m&&""!=m&&null!=m){var g=parseInt(d.length-h.length),v=parseInt(o.length);g>0&&(v+=g);var y=parseInt(o.length+g-d.length),w=o.length-o.replace(/\s+$/g,"").length;(y-=w)<0&&(y=0),r.setStart(e.anchorNode,y),r.setEnd(e.focusNode,v),p.isSnippetExist=!0}else m=o;return p.content=m,p.triggerWord=d.toLowerCase(),e.removeAllRanges(),e.addRange(r),p}(e,0,0,a);return o}function i(e,t,n,o,s){for(var r={"${Cases.Contact Name}":Object(a.e)(n.firstName,n.lastName),"${Cases.Email}":n.email||"","${Cases.Phone}":t.phone||"","${Cases.Subject}":t.subject,"${Cases.Description}":t.description||"","${Cases.Request Id}":t.ticketNumber,"${Cases.Account Name}":o?o.accountName:"","${Cases.First Name}":n.firstName||"","${Cases.Last Name}":n.lastName||"","${Cases.CUSTOMER_PORTAL_LINK}":"10","${User.Support Rep Name}":Object(a.e)(s.firstName,s.lastName),"${User.Email}":s.emailId||"","${User.Phone}":s.phone||"","${User.First Name}":s.firstName||"","${User.Last Name}":s.lastName||"","${User.Mobile}":s.mobile||""},i=e.match(/(\$\{\w+\.[\w\s]+\})/g)||[],l=0;l<i.length;l++)e=e.replace(i[l],r[i[l]]);return e}function l(e){if(void 0===e)return!0;var t=e.getContent()||"";return""==t||"<div><br></div>"==t||!e.doc.body.textContent.trim().length}function c(e){return e.replace(/(<iframe.+?<\/iframe>)/g,function(e){var t=e.match(/(htt.+?")/)[0];return'<div><br></div><a href="'+(t=t.substring(0,t.length-1))+'" target="_blank">'+t+"</a>"})}},"./src/utils/bind.js":function(e,t,n){"use strict";function a(){for(var e=this,t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];n.forEach(function(t){e[t]=e[t].bind(e)})}n.d(t,"a",function(){return a})}}]);