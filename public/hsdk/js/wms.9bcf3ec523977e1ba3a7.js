(window.deskappJsonp=window.deskappJsonp||[]).push([[173],{"./src/actions/AgentAction.js":function(e,t,n){"use strict";n.d(t,"k",function(){return m}),n.d(t,"j",function(){return p}),n.d(t,"h",function(){return f}),n.d(t,"b",function(){return b}),n.d(t,"c",function(){return g}),n.d(t,"l",function(){return h}),n.d(t,"i",function(){return I}),n.d(t,"d",function(){return v}),n.d(t,"f",function(){return O}),n.d(t,"a",function(){return j}),n.d(t,"m",function(){return C}),n.d(t,"e",function(){return _}),n.d(t,"g",function(){return T}),n.d(t,"n",function(){return k});n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/keys.js");var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),a=n.n(i),o=n("./src/utils/RequestAPI.js"),r=n("./src/utils/Common.js"),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),c=n("./src/reducers/selector.js"),u=n("./src/utils/departmentQuery.js"),l=n("./src/constants/index.js"),d=n("./src/constants/agents.js");function m(e){return{types:Object(r.m)("AGENTS_COUNT"),callAPI:function(t){var n=Object(c.t)(t);return Object(o.a)("/api/v1/agentsTicketsCount?"+Object(u.a)(t)+"&agentIds="+e,!1,{orgId:t.currentOrgId}).get().then(function(e){return 204!==e.responseStatus?(e.data=e.data.map(function(e){return a()({},e,{id:e.agentId})}),{countData:e.data,deptId:n}):{}})}}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];e.from=y(e,"from","1"),e.limit=y(e,"limit","100"),e.searchStr=C(e);var n=e.from>1?"AGENT_NEXT":l.R.AGENT;return{types:Object(r.m)(n),callAPI:function(n){var i="/api/v1/agents?orgId="+n.currentOrgId+(t&&"allDepartment"!==t?"&departmentId="+t:"");return i+=j(e,["from","limit","status","isConfirmed","searchStr","profileIds","roleIds"]),Object(o.a)(i).get().then(function(n){if(204!==n.responseStatus){var i=n.data.length<e.limit,o=Object(s.b)(n.data,Object(s.a)(Object(s.c)(l.R.AGENT_L)));return a()(o,{noMoreData:i,depId:t})}return{entities:{noMoreData:!0},result:[]}})}}}function f(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return{types:Object(r.m)(t>1?"AGENT_NEXT":l.R.AGENT),callAPI:function(r){return Object(o.a)("/api/v1/agents?"+(e&&"allDepartment"!==e?"departmentId="+e:"")+"&from="+t+"&limit="+n+"&status=ACTIVE&isConfirmed="+i,!1,{orgId:r.currentOrgId}).get().then(function(t){if(204!==t.responseStatus){var i=t.data.length<n,o=Object(s.b)(t.data,Object(s.a)(Object(s.c)(l.R.AGENT_L)));return a()(o,{noMoreData:i,depId:e})}return{entities:{noMoreData:!0},result:[]}})}}}function b(e,t){return{types:Object(r.m)(l.R.AGENT),callAPI:function(n){return Object(o.a)("/api/v1/agents/"+e,!1,{orgId:n.currentOrgId}).get().then(function(e){var n=Object(s.b)(e,Object(s.c)(l.R.AGENT_L));return a()(n,{depId:t})})}}}function g(e){return{types:Object(r.m)(l.R.AGENT),callAPI:function(t){return Object(o.a)("/api/v1/agents/zuid/"+e,!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(s.b)(e,Object(s.c)(l.R.AGENT_L))})}}}function h(e,t,n){return{types:Object(r.m)("AGENT_SEARCH"),callAPI:function(i){return Object(o.a)("/api/v1/agents?searchStr=*"+e+"*&from="+t+"&limit="+n+"&status=ACTIVE&isConfirmed=true",!1,{orgId:i.currentOrgId}).get().then(function(e){if(204!==e.responseStatus){var i=e.data.length<n,o=Object(s.b)(e.data,Object(s.a)(Object(s.c)(l.R.AGENT_L)));return a()(o,{noMoreData:i})}return 1===t?{entities:{noMoreData:!0,isEmpty:!0},result:[]}:{entities:{noMoreData:!0},result:[]}})}}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.z,d=arguments[4];return{types:Object(r.m)(l.R.AGENT),callAPI:function(r){var m={activeAgents:"status=ACTIVE",deActiveAgents:"status=DISABLED",notConfirmedAgents:"isConfirmed=false",allAgents:"",activeConfirmedAgents:"status=ACTIVE&isConfirmed=true",activeConfirmedNonLightAgents:"status=ACTIVE&isConfirmed=true&rolePermissionType=${NON_LIGHT}"}[e.replace("Search","")]||"",p=d||Object(c.t)(r),f=d?"&departmentId="+d:Object(u.a)(r,!0),b="/api/v1/agents?"+(m?m+"&":"")+"from="+t+"&limit="+(2*i>200?200:2*i)+(n?"&searchStr=*"+n+"*":"")+f;return Object(o.a)(encodeURI(b),!1,{orgId:r.currentOrgId}).get().then(function(o){return a()({},Object(s.b)(204!==o.responseStatus?o.data:[],Object(s.a)(Object(s.c)(l.R.AGENT_L))),{deptId:p,from:t,limit:i,isNext:!!o.data&&o.data.length>i,searchStr:n,agentType:e})},function(e){throw e})}}}function v(e){return{types:Object(r.m)("AGENT"),shouldCallAPI:function(){return e.length>=1},callAPI:function(t){return Object(o.a)("/api/v1/agentsByIds?agentIds="+e.join(),!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(s.b)(204!==e.responseStatus?e.data:[],Object(s.a)(Object(s.c)(l.R.AGENT_L)))})}}}function O(e){return{types:Object(r.m)("TEAM_AGENT"),callAPI:function(t){return Object(o.a)("/api/v1/teams/"+e+"/members",!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(s.b)(e.members,Object(s.a)(Object(s.c)(l.R.AGENT_L)))})}}}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n="";return t.map(function(t){void 0!==e[t]&&(n+="&"+t+"="+e[t])}),n}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2];return void 0!==e[t]?e[t]:n}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=y(e,"searchType","string"),n=e.searchStr;return n&&(n="string*"==t?n+"*":"*string*"==t?"*"+n+"*":n),n}function E(e){var t=e.isConfirmed,n=e.status;switch(n){case d.a:return d.a;case d.d:return d.d;case d.c:return d.c;default:if(void 0!==t&&!t)return d.l;if(void 0===n)return d.b}}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.from=y(e,"from","1"),e.limit=y(e,"limit","100"),e.searchStr=C(e);var t=e.from>1?d.k:d.j;return{types:Object(r.m)(t),callAPI:function(t){var n="/api/v1/agents?orgId="+t.currentOrgId;return n+=j(e,["from","limit","status","isConfirmed","searchStr","departmentId","departmentIds","profileIds","roleIds"]),Object(o.a)(n).get().then(function(t){return a()(Object(s.b)(void 0!==t.data?t.data:[],Object(s.a)(Object(s.c)(l.R.AGENT_L))),{status:E(e)})})}}}function T(e,t,n){var i={status:e,isConfirmed:t,includeLightAgent:n};return i.includeLightAgent=y(i,"includeLightAgent",!0),{types:Object(r.m)(d.i),callAPI:function(e){var t="/api/v1/agents/count?orgId="+e.currentOrgId;return t+=j(i,["status","isConfirmed","includeLightAgent"]),Object(o.a)(t).get().then(function(e){return a()({},e,{status:E(i)})})}}}function k(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:d.m,data:{isEnabled:e}}}},"./src/actions/AgentCollisionActions.js":function(e,t,n){"use strict";n.d(t,"g",function(){return c}),n.d(t,"j",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"h",function(){return m}),n.d(t,"i",function(){return p}),n.d(t,"a",function(){return f}),n.d(t,"c",function(){return b}),n.d(t,"b",function(){return g}),n.d(t,"f",function(){return h});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),a=n.n(i),o=n("./src/utils/RequestAPI.js"),r=n("./src/utils/Common.js"),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js");function c(e){return{types:Object(r.m)("COLLIDING_USERS"),callAPI:function(t,n){return Object(o.a)("/api/v1/tickets/"+e+"/collision?include=author",!1,{orgId:t.currentOrgId}).get().then(function(e){var t=n(),i=Object(s.b)(e.collisionUsers,Object(s.a)(Object(s.c)("collisionUser",{id:"agentId",mapping:{author:Object(s.c)("agent")}}))),o=e.collisionUsers;return o=b(o=o.filter(function(e){return e.agentId&&e.agentId!=t.myInfo.id})),{collisionData:e=a()({},e,{collisionUsers:o,activeUsersLen:o.length}),entities:{agent:i.entities.agent}}})}}}function u(e,t,n){return{types:Object(r.m)("PUBLISH_USERACTION"),callAPI:function(i){return Object(o.a)("/api/v1/tickets/"+e+"/collision/userAction",!1,{orgId:i.currentOrgId}).post("",{actionType:t,instanceId:n}).then(function(e){return e})}}}function l(e,t){return{types:Object(r.m)("CREATE_CHAT"),callAPI:function(n){return Object(o.a)("/api/v1/tickets/"+e+"/collision/userChatAction",!1,{orgId:n.currentOrgId}).post("",{actionType:"createChat",agentId:t}).then(function(e){return e})}}}function d(e){return{types:Object(r.m)("CREATE_GROUPCHAT"),callAPI:function(t){return Object(o.a)("/api/v1/tickets/"+e+"/collision/userChatAction",!1,{orgId:t.currentOrgId}).post("",{actionType:"createGroupChat"}).then(function(e){return e})}}}function m(e){return{types:Object(r.m)("JOIN_CHAT"),callAPI:function(t){return Object(o.a)("/api/v1/tickets/"+e+"/collision/userChatAction",!1,{orgId:t.currentOrgId}).post("",{actionType:"joinChat"}).then(function(e){return e})}}}function p(e){return{types:Object(r.m)("LEAVE_CHAT"),callAPI:function(t){return Object(o.a)("/api/v1/tickets/"+e+"/collision/userChatAction",!1,{orgId:t.currentOrgId}).post("",{actionType:"leaveChat"}).then(function(e){return e})}}}function f(e,t){return{types:Object(r.m)("ADD_CHATMEMBERS"),callAPI:function(n){return Object(o.a)("/api/v1/tickets/"+e+"/collision/userChatAction",!1,{orgId:n.currentOrgId}).post("",{actionType:"addChatMembers",agentId:t}).then(function(e){return e})}}}function b(e){var t=0,n=0;return e=e.map(function(e,i){var o=Math.floor(i/4);if(n=55*o,0!=i){var r=(i+1)%4-1;t=r<0?165:55*r}return a()(e,{leftPos:t,topPos:n})})}function g(e){return{type:"CLEAR_COLLISION_DATA",data:{ticketId:e}}}function h(){return{types:Object(r.m)("GET_COLLISION_COMPRESS_META"),shouldCallAPI:function(e){return!e.ticketUIStatecollisionCompressMeta},callAPI:function(e){return Object(o.a)("/api/v1/realTime/ticketMeta",!1,{orgId:e.currentOrgId}).get().then(function(e){return e})}}}},"./src/actions/BluePrintActions.js":function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"j",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"e",function(){return m}),n.d(t,"a",function(){return p}),n.d(t,"f",function(){return f}),n.d(t,"b",function(){return b}),n.d(t,"i",function(){return g});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),a=n.n(i),o=n("./src/utils/RequestAPI.js"),r=n("./src/utils/Common.js");function s(e){return{types:Object(r.m)("GET_APPLIED_BLUEPRINT"),callAPI:function(t){return Object(o.a)("/api/v1/tickets/"+e+"/blueprint?include=transitionOwnerAgents,transitionOwnerTeams,transitionOwnerDept",!1,{orgId:t.currentOrgId}).get().then(function(t){return{entities:{ticket:a()({},e,{transitionData:204==t.responseStatus?"":t})},result:[]}})}}}function c(e,t){return{types:Object(r.m)("GET_TRANSITIONS"),callAPI:function(n){return Object(o.a)("/api/v1/tickets/"+e+"/transitions/"+t+"/form",!1,{orgId:n.currentOrgId}).get().then(function(e){return e})}}}function u(e,t,n){return{types:Object(r.m)("PERFORM_TRANSITION"),callAPI:function(i){return Object(o.a)("/api/v1/tickets/"+e+"/transitions/"+t+"/perform",!1,{orgId:i.currentOrgId}).post("",n).then(function(t){return{entities:{ticket:a()({},e,{status:t.updatedState})},result:[]}})}}}function l(e,t,n){return{types:Object(r.m)("VALIDATE_FIELD_UPDATES"),callAPI:function(i){return Object(o.a)("/api/v1/tickets/"+e+"/transitions/"+t+"/validateFieldUpdates",!1,{orgId:i.currentOrgId}).post("",n).then(function(e){return e})}}}function d(e){return{types:Object(r.m)("REVOKE_BLUEPRINT"),callAPI:function(t){return Object(o.a)("/api/v1/tickets/"+e+"/revokeBlueprint",!1,{orgId:t.currentOrgId}).post().then(function(t){return{entities:{ticket:a()({},e,{transitionData:""})},result:[]}})}}}function m(){return{type:"OPEN_FLOWCHAT"}}function p(){return{type:"CLOSE_FLOWCHAT"}}function f(e){return{type:"OPEN_TRANSITION_FORM",data:e}}function b(){return{type:"CLOSE_TRANSITION_FORM"}}function g(e){return{type:"TOGGLE_TRANSITION_FORM",data:e}}},"./src/actions/FeedsAction.js":function(e,t,n){"use strict";n.d(t,"b",function(){return b}),n.d(t,"g",function(){return g}),n.d(t,"f",function(){return h}),n.d(t,"d",function(){return I}),n.d(t,"c",function(){return v}),n.d(t,"e",function(){return O}),n.d(t,"a",function(){return j});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),r=n.n(o),s=n("./src/utils/RequestAPI.js"),c=n("./src/utils/Common.js"),u=n("./src/utils/departmentQuery.js"),l=n("./src/reducers/selector.js"),d=n("./src/actions/index.js"),m=n("./src/fz-i18n/index.js"),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),f=n("./src/constants/index.js");function b(){return{types:Object(c.m)("FEEDS_VIEWS_KEY"),callAPI:function(e){var t=Object(l.t)(e),n="";return n="allDepartment"==t?"departmentId=0":Object(u.a)(e),Object(s.a)("/api/v1/feed/viewKey?"+n,!1,{orgId:e.currentOrgId}).get().then(function(e){return{deptId:t,feedsViewKey:e}})}}}function g(e){return function(t,n){var i=Object(l.t)(n());return t({type:"UPDATE_FEED_VIEW",data:{view:e,deptId:i}})}}function h(e,t){return function(n,i){var a=Object(l.t)(i()),o=Object(p.b)(t,Object(p.c)(f.R.FEEDS_L,{id:"fdk"}));return n({type:"FEEDS_SUCCESS",data:o=r()({},o,{viewKey:e,noData:t.noData,deptId:a,renderType:t.rendertype})})}}function I(e){return{types:Object(c.m)("POST_STATUS_MESSAGE"),callAPI:function(t){return Object(s.a)("/api/v1/feed/userStatus",!1,{orgId:t.currentOrgId}).post("",e).then(function(e){return{res:e,entities:{},result:[]}})}}}function v(e){return function(t,n){var i=e.getAdditionalProperty("data")||{},a=m.h.getI18NValue("support.unable.to.process.your.request"),o=i.message||"InternalError";"Unknown_Module"===o||"InternalError"===o||"Unknown_Type"===o?a=m.h.getI18NValue("support.unable.to.process.your.request"):"Unauthorized"===o?a=m.h.getI18NValue("crm.security.error"):"Record_Deleted"===o?a=m.h.getI18NValue("crm.record.not.accessible.message"):"CommentEmpty"===o&&(a=m.h.getI18NValue("crm.field.empty.check",[m.h.getI18NValue("tabs.request.comment")])),t(Object(d.Q)({type:"alert",message:a}))}}function O(e,t,n){return function(i){return i({type:"REMOVE_FEED",data:{viewkey:e,fdk:t,deptId:n}})}}function j(e,t,n){return function(e,i){var o=i().module.feeds[t].comments.filter(function(e){return e.cfdk!=n});e({type:"REMOVE_FEED_COMMENT_DELETED_SUCCESS",data:{entities:{feeds:a()({},t,{comments:o})}}})}}},"./src/actions/RealTimeActions.js":function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"d",function(){return h}),n.d(t,"o",function(){return I}),n.d(t,"e",function(){return v}),n.d(t,"a",function(){return O}),n.d(t,"p",function(){return j}),n.d(t,"r",function(){return y}),n.d(t,"t",function(){return C}),n.d(t,"s",function(){return E}),n.d(t,"q",function(){return _}),n.d(t,"u",function(){return T}),n.d(t,"k",function(){return k}),n.d(t,"c",function(){return A}),n.d(t,"n",function(){return N}),n.d(t,"m",function(){return S}),n.d(t,"l",function(){return R}),n.d(t,"f",function(){return P}),n.d(t,"h",function(){return w}),n.d(t,"i",function(){return D}),n.d(t,"j",function(){return L}),n.d(t,"g",function(){return $});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/promise.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/toConsumableArray.js"),r=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),c=n.n(s),u=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),l=n.n(u),d=n("./src/utils/RequestAPI.js"),m=n("./src/utils/Common.js"),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),f=n("./src/constants/index.js"),b=n("./src/actions/AgentCollisionActions.js");function g(e,t,n){var i=n?"TICKET_ADD_COMMENT":"TICKET_ADD_CONVERSATION";return{types:Object(m.m)(i),callAPI:function(n,i){return Object(d.a)("/api/v1/tickets/"+e+"/comments/"+t+"?include=mentions",!1,{orgId:n.currentOrgId}).get().then(function(t){var n,a="1",o=i().module.ticket[e].commentCount;return(o=parseInt(o))&&o>0&&(a=o+1),{entities:(n={},l()(n,f.R.COMMENT_L,l()({},t.id,t)),l()(n,"ticket",l()({},e,l()({},f.R.COMMENT_L,[t.id]))),n),commentCount:a,result:e}})}}}function h(e,t,n){return function(i,a){var o="0",r=a().module.ticket[e].commentCount;(r=parseInt(r))&&(o=r-1),i({type:n?"TICKET_DELETE_COMMENT_SUCCESS":"TICKET_DELETE_CONVERSATION_SUCCESS",data:{entities:{ticket:l()({},e,l()({},f.R.COMMENT_L,[t]))},commentCount:o,result:e}})}}function I(e,t){return{types:Object(m.m)("UPDATECOMMENT"),callAPI:function(n){return Object(d.a)("/api/v1/tickets/"+e+"/comments/"+t,!1,{orgId:n.currentOrgId}).get().then(function(e){return{entities:{comment:l()({},t,e)}}})}}}function v(){return{types:Object(m.m)("REALTIMEDATA"),callAPI:function(e){return Object(d.a)("/api/v1/temp/realTimeMeta",!1,{orgId:e.currentOrgId}).get().then(function(e){return e})}}}function O(e,t){return{types:Object(m.m)("ADDTHREAD"),callAPI:function(n,i){return Object(d.a)("/api/v1/tickets/"+e+"/threads/"+t,!1,{orgId:n.currentOrgId}).get().then(function(t){var n=i(),a=t.id;if(!Object(m.L)(n,e,a)){var o=l()({},a,t),s=c()({},o,n.module.thread),u=n.module.ticket[e].thread||[],d=n.module.ticket[e].conversationIds||[],p=[a].concat(r()(u)),f=[{id:a,type:"thread"}].concat(r()(d));return{data:t,entities:{thread:s,ticket:l()({},e,{thread:p,conversationIds:f})}}}})}}}function j(e,t){return{types:Object(m.m)("UPDATETHREAD"),callAPI:function(n,i){return Object(d.a)("/api/v1/tickets/"+e+"/threads/"+t,!1,{orgId:n.currentOrgId}).get().then(function(n){var a=i(),o=a.module.ticket[e].conversationIds||[],r=a.module.ticket[e].thread||[];if(o.length){for(var s=0,c=0;c<=o.length;c++)if(o[c].id==t){s=c;break}o.splice(0,0,o.splice(s,1)[0])}else{var u=r.indexOf(t);r.splice(0,0,r.splice(u,1)[0])}return{data:n,entities:{thread:l()({},t,n),ticket:l()({},e,{conversationIds:o,thread:r})}}})}}}function y(e){return function(t,n){var i=e.author,a=e.ticketId,o=Object(p.b)(i,Object(p.c)("agent")),r=n(),s=c()({},r.collidingData[a]),u=s.collisionUsers,l=s.activeUsersLen,d=void 0===l?0:l;u=u?u.filter(function(e){if(e.agentId!=r.myInfo.id&&e.agentId!=i.id)return e}):[],u=[{agentId:i.id,userAction:"viewing"}].concat(u),u=Object(b.c)(u),t({type:"HANDLE_USERIN_SUCCESS",data:{collisionData:c()(s,{collisionUsers:u,ticketId:a,activeUsersLen:d+1,noViewers:!1}),entities:{agent:o.entities.agent}}})}}function C(e,t){return function(n,i){var a=i(),o=c()({},a.collidingData[e]),r={},s=o.collisionUsers,u=o.activeUsersLen;s=s?s.filter(function(e){if(e.agentId!=a.myInfo.id){if(e.agentId!=t)return e;r=e}}):[],r.userAction="isLeft";var l=new Date,d=l.getHours(),m=l.getMinutes(),p=d>=12?"P.M.":"A.M.",f=(d=(d%=12)||12)+":"+(m=m<10?"0"+m:m)+" "+p;r.time=f,s.push(r),s=Object(b.c)(s);var g=1==u;n({type:"HANDLE_USEROUT_SUCCESS",data:{collisionData:c()(o,{collisionUsers:s,ticketId:e,activeUsersLen:u-1,noViewers:g})}})}}function E(e,t){return function(n,i){var a=i(),o=c()({},a.collidingData[e]),r={},s=o.collisionUsers;s=s?s.filter(function(e){if(e.agentId!=a.myInfo.id){if(e.agentId!=t)return e;r=e}}):[],r.userAction="viewing",s=[r].concat(s),s=Object(b.c)(s),n({type:"HANDLE_USERONLINE_SUCCESS",data:{collisionData:c()(o,{collisionUsers:s,ticketId:e})}})}}function _(e,t){return function(n,i){var a=i(),o=c()({},a.collidingData[e]),r={},s=o.collisionUsers;s=s?s.filter(function(e){if(e.agentId!=a.myInfo.id){if(e.agentId!=t)return e;r=e}}):[],r.userAction="idle",s.push(r),s=Object(b.c)(s),n({type:"HANDLE_USERIDLE_SUCCESS",data:{collisionData:c()(o,{collisionUsers:s,ticketId:e})}})}}function T(e,t){return function(n,i){var a=i(),o=c()({},a.collidingData[e]),r={},s=o.collisionUsers;s=s?s.filter(function(e){if(e.agentId!=a.myInfo.id){if(e.agentId!=t)return e;r=e}}):[],r.userAction="replying",r.agentId=t,s=[r].concat(s),s=Object(b.c)(s),n({type:"HANDLE_USERREPLY_SUCCESS",data:{collisionData:c()(o,{collisionUsers:s,ticketId:e})}})}}function k(e){return function(t){t({type:"SET_NOVIWERS_SUCCESS",data:{collisionData:c()({ticketId:e,noViewers:!0,collisionUsers:[],activeUsersLen:0})}})}}function A(e,t){return function(n){n({type:"TICKET_THREAD_DELETE_SUCCESS",data:{ticketId:e,threadId:t}})}}function N(e){return function(t){t({type:"UPDATE_COLLISION_DATA_SUCCESS",data:{collisionData:e}})}}function S(e){var t={};return t.ticketId=e.ticketId,t.chatId=e.chatId,t.chatUsers=e.chatUsers,function(e){e({type:"UPDATE_COLLISION_CHATDATA",data:{chatData:t}})}}function R(e,t){var n=Date.now();return t=c()({},t,{notificationId:n,notificationTime:n}),function(n){n({type:"SHOW_COLLISION_NOTIFICATION",data:{ticketId:e,res:t}})}}function P(e,t){return function(n){n({type:"HIDE_COLLISION_NOTIFICATION",data:{ticketId:e,notificationId:t}})}}function w(e,t){return function(n){n({type:"REMOVE_COLLISION_NOTIFICATION",data:{ticketId:e,notificationId:t}})}}function D(e,t){return function(n){n({type:"RESET_NOTIFICATION_LIST",data:{ticketId:e,notificationList:t}})}}function L(e){return function(t){t({type:"REVOKE_BLUPRINT_SUCCESS",data:{entities:{ticket:l()({},e,{transitionData:""})}}})}}var $=function(){var e={resolve:null,reject:null};return{ob:e,showConfirmBox:function(t){return function(n){return n(function(e){return{type:"SHOW_REALTIMECONFIRM_ALERT",data:e}}(t)),new a.a(function(t,i){e.resolve=function(){n({type:"HIDE_REALTIMECONFIRM_ALERT"}),t()},e.reject=function(){n({type:"HIDE_REALTIMECONFIRM_ALERT"}),i()}})}}}}()},"./src/actions/ReplyActions.js":function(e,t,n){"use strict";n.d(t,"f",function(){return b}),n.d(t,"i",function(){return g}),n.d(t,"l",function(){return h}),n.d(t,"a",function(){return I}),n.d(t,"j",function(){return v}),n.d(t,"e",function(){return O}),n.d(t,"h",function(){return j}),n.d(t,"g",function(){return y}),n.d(t,"c",function(){return C}),n.d(t,"b",function(){return E}),n.d(t,"d",function(){return _}),n.d(t,"k",function(){return T});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/toConsumableArray.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),r=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),c=n.n(s),u=n("./src/utils/RequestAPI.js"),l=n("./src/utils/Common.js"),d=n("./src/constants/index.js"),m=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),f=n.n(p);function b(e,t){return{types:Object(l.m)("SAVEDRAFT"),callAPI:function(n,i){return Object(u.a)("/api/v1/tickets/"+e+"/draftReply",!1,{orgId:n.currentOrgId}).post("",t).then(function(t){var n=i(),o=t.id;if(!Object(l.L)(n,e,o)){var s=c()({},o,t),u=r()({},s,n.module.thread),d=n.module.ticket[e].thread||[],m=n.module.ticket[e].conversationIds||[],p=[o].concat(a()(d)),f=[{id:o,type:"thread"}].concat(a()(m));return{data:t,entities:{thread:u,ticket:c()({},e,{thread:p,conversationIds:f})}}}return{data:t}})}}}function g(e,t){return{types:Object(l.m)("SEND_FOR_REVIEW"),callAPI:function(n,i){return Object(u.a)("/api/v1/tickets/"+e+"/threads/"+t+"/sendForReview",!1,{orgId:n.currentOrgId}).post("").then(function(e){return e})}}}function h(e,t,n){return{types:Object(l.m)("UPDATEDRAFT"),callAPI:function(i,a){return Object(u.a)("/api/v1/tickets/"+e+"/draftReply/"+t,!1,{orgId:i.currentOrgId}).patch("",n).then(function(n){var i=a(),o=i.module.ticket[e].conversationIds||[],r=i.module.ticket[e].thread||[];if(o.length){for(var s=0,u=0;u<=o.length;u++)if(o[u].id==t){s=u;break}o.splice(0,0,o.splice(s,1)[0])}else{var l=r.indexOf(t);r.splice(0,0,r.splice(l,1)[0])}return{data:n,entities:{thread:c()({},t,n),ticket:c()({},e,{conversationIds:o,thread:r})}}})}}}function I(e,t,n){return{types:Object(l.m)("TICKET_THREAD_DELETE"),callAPI:function(i,a){return Object(u.a)(e,!1,{orgId:i.currentOrgId}).del().then(function(e){var i=a();return Object(l.L)(i,t,n)?{}:{ticketId:t,threadId:n}})}}}function v(e,t,n){var i=n?"?isPrivate=true":"";return{types:Object(l.m)("SENDREPLY"),callAPI:function(n,o){return Object(u.a)("/api/v1/tickets/"+e+"/sendReply"+i,!1,{orgId:n.currentOrgId}).post("",t).then(function(t){var n=o(),i=t.id;if(!Object(l.L)(n,e,i)){var s=c()({},i,t),u=r()({},s,n.module.thread),d=n.module.ticket[e].thread||[],m=n.module.ticket[e].conversationIds||[],p=[i].concat(a()(d)),f=[{id:i,type:"thread"}].concat(a()(m));return{data:t,entities:{thread:u,ticket:c()({},e,{thread:p,conversationIds:f})}}}return t})}}}function O(e,t,n){return{types:Object(l.m)("RESEND_THREAD"),callAPI:function(i,a){return Object(u.a)(e,!1,{orgId:i.currentOrgId}).post().then(function(e){var i=a();if(!Object(l.L)(i,n,t)){var o=i.module.ticket[n].conversationIds||[],r=i.module.ticket[n].thread||[];if(o.length){for(var s=0,u=0;u<=o.length;u++)if(o[u].id==t){s=u;break}o.splice(0,0,o.splice(s,1)[0])}else{var d=r.indexOf(t);r.splice(0,0,r.splice(d,1)[0])}return{data:e,entities:{thread:c()({},t,e),ticket:c()({},n,{thread:r,conversationIds:o})}}}return e})}}}function j(e,t,n,i){return e=i?e+"&isPrivate=true":e,{types:Object(l.m)("SENDDRAFT"),callAPI:function(i,a){return Object(u.a)(e,!1,{orgId:i.currentOrgId}).post().then(function(e){var i=a(),o=i.module.ticket[t].conversationIds||[],r=i.module.ticket[t].thread||[];if(o.length){for(var s=0,u=0;u<=o.length;u++)if(o[u].id==n){s=u;break}o.splice(0,0,o.splice(s,1)[0])}else{var l=r.indexOf(n);r.splice(0,0,r.splice(l,1)[0])}return{data:e,entities:{thread:c()({},n,e),ticket:c()({},t,{conversationIds:o,thread:r})}}})}}}function y(e){return{types:Object(l.m)("SEARCHCONTACT"),callAPI:function(t,n){return Object(u.a)("/api/v1/contacts/search?limit=10&email="+e+"*",!1,{orgId:t.currentOrgId}).get().then(function(e){return 204==e.responseStatus?{list:[]}:r()(Object(m.b)(e.data,Object(m.a)(Object(m.c)(d.R.CONTACT_L))),{list:e.data})})}}}function C(e){return{types:Object(l.m)("FROMEMAILADDRESS"),shouldCallAPI:function(t){return!f()("departmentSpecificState["+e+"].fromEmailAddress",t).length},callAPI:function(t){return Object(u.a)("/api/v1/mailReplyAddress?departmentId="+e+"&isActive=true",!1,{orgId:t.currentOrgId}).get().then(function(t){return 204!=t.responseStatus?{entities:{},result:[],address:t.data,deptId:e}:{res:t,entity:{},result:[]}})}}}function E(e){return{types:Object(l.m)("HAPPINESS_LINK_HOLDER"),callAPI:function(t){return Object(u.a)("/api/v1/customerHappinessLinkHolder?departmentId="+e,!1,{orgId:t.currentOrgId}).get().then(function(t){return{linkHolder:t.linkHolder,deptId:e}})}}}function _(e){return{types:Object(l.m)("MAIL_CONFIGURATIONS"),shouldCallAPI:function(t){return!f()("departmentSpecificState["+e+"].mailConfigurations.privateThreadConfig",t)},callAPI:function(t){return Object(u.a)("/api/v1/departments/"+e+"/mailConfigurations",!1,{orgId:t.currentOrgId}).get().then(function(t){return{res:t,deptId:e,entity:{},result:[]}})}}}function T(e){return function(t,n){for(var i=n(),a=i.module.ticket[e],o=a.thread,r=void 0===o?[]:o,s=a.conversationIds,u=a.commentCount,l=i.module.thread,d=0,m=0;m<r.length;m++)l[m]&&"DRAFT"!=l[m].status&&(d=1);var p=r[0];if(s){for(var f=0,b=0;b<s.length;b++)"thread"!=s[b].type||p||(p=s[b].id),l[s[b].id]&&"DRAFT"!=l[s[b].id].status&&(f+=1);d=f-parseInt(u)}var g={recentThreadId:p,recentThread:p?i.module.thread[p]:null,threadCount:d};return t({type:"SET_RECENT_THREAD_DATA_SUCCESS",data:{entities:{ticket:c()({},e,g)}}})}}},"./src/analytics/actions/dashboards/TwilioDashboardAction.js":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return l}),n.d(t,"e",function(){return d});var i=n("./src/utils/RequestAPI.js"),a=n("./src/utils/Common.js"),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),r=function(e){var t=[];return Object.prototype.hasOwnProperty.call(e,"departmentId")&&"allDepartment"!==e.departmentId&&t.push("departmentId="+e.departmentId),Object.prototype.hasOwnProperty.call(e,"status")&&t.push("status="+e.status),Object.prototype.hasOwnProperty.call(e,"from")&&t.push("from="+e.from),Object.prototype.hasOwnProperty.call(e,"limit")&&t.push("limit="+e.limit),Object.prototype.hasOwnProperty.call(e,"searchStr")&&t.push("searchStr="+e.searchStr),t.join("&")},s=function(e){var t="/api/v1/phone/agents/count?"+r(e);return Object(i.a)(t).get().then(function(e){return e}).catch(function(){return{}})},c=function(e){return{types:Object(a.m)(e.status+"_AGENTS_LIST"),shouldCallAPI:function(){return!0},callAPI:function(){var t="/api/v1/phone/agents/?"+r(e);return Object(i.a)(t).get().then(function(e){var t=Object(o.b)(e.data,Object(o.a)(Object(o.c)("agentList",{id:"userId"}))).entities;return{agentList:(void 0===t?{}:t).agentList}}).catch(function(){return{}})}}},u=function(e){var t="/api/v1/phone/agents/search?"+r(e);return Object(i.a)(t).get().then(function(e){return e}).catch(function(){return{}})},l=function(e){return{type:"TWILIO_DASHBOARD_DEPARTMENT_FILTER_CHANGE",data:{currentDepartmentId:e}}},d=function(e){return{type:"UPDATE_AGENT_COUNT",data:{agentCount:e}}}},"./src/components/Subtab/Loading/Loading.js":function(e,t,n){"use strict";var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),r=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),c=n.n(s),u=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=n.n(u),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),f=n.n(p),b=n("./src/components/Subtab/Loading/SubtabLoading.module.css"),g=n.n(b),h=n("../components/lib/Layout/index.js"),I=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||a()(t)).apply(this,arguments))}return m()(t,e),c()(t,[{key:"render",value:function(){return f.a.createElement(h.Container,{alignBox:"row",align:"both",className:g.a.container},f.a.createElement(h.Box,{className:g.a.dot}),f.a.createElement(h.Box,{className:g.a.dot}),f.a.createElement(h.Box,{className:g.a.dot}),f.a.createElement(h.Box,{className:g.a.dot}),f.a.createElement(h.Box,{className:g.a.dot}),f.a.createElement(h.Box,{className:g.a.dot}))}}]),t}(f.a.Component);t.a=I},"./src/components/Subtab/ThreadAttachments/ThreadAttachments.js":function(e,t,n){"use strict";var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),r=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),c=n.n(s),u=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=n.n(u),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),f=n.n(p),b=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),g=n.n(b),h=n("./src/components/Subtab/ThreadAttachments/ThreadAttachments.module.css"),I=n.n(h),v=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),O=n.n(v),j=n("./src/utils/Attachment.js"),y=n("./src/components/Link/Link.js"),C=n("./src/fz-i18n/index.js"),E=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||a()(t)).apply(this,arguments))}return m()(t,e),c()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,i=t.orgId,a=t.showAttachmentViewer,o=t.size,r=t.neNeedToDownload,s=t.dataId,c=Object(j.h)(n);return f.a.createElement("div",null,f.a.createElement("div",{className:I.a.AttachCount,"data-id":s},f.a.createElement("span",{className:I.a.mr6},n.length),f.a.createElement("span",null,f.a.createElement(C.c,{i18NKey:n.length>1?"label.attachments":"support.feedback.attachment"})),f.a.createElement("span",{className:I.a.ml6},"(",Object(j.f)(c),")")),n.map(function(t,s){var c=t.name,u=t.downloadUrl,l=t.href,d=t.id,m=t.viewUrl,p=t.size,b=Object(j.l)(c)||Object(j.i)(c);return u=u||l,f.a.createElement("div",{className:I.a.docspan,key:s,onClick:r?null:b?j.b.bind(e,d,n,function(e){a(e)}):j.n.bind(e,m||l,i),"data-id":1===n.length?"threadAttch":"threadAttch_"+s},f.a.createElement("span",{className:I.a.attachment+" "+I.a[o]},f.a.createElement("div",{className:I.a.attachleft},f.a.createElement(O.a,{name:Object(j.d)(c),iconClass:I.a.attachIcon})),f.a.createElement("div",{className:I.a.attachright},f.a.createElement("span",{className:I.a.atatchName,"data-title":c},c),f.a.createElement("span",{className:I.a.attachSize},Object(j.f)(p))),r?null:f.a.createElement(y.a,{target:"_self",href:Object(j.a)(u,i),className:I.a.attachDownload,title:C.h.getI18NValue("support.label.download")},f.a.createElement(O.a,{name:"ZD-downloadNew",iconClass:I.a.downIcon}))))}))}}]),t}(f.a.Component);t.a=E,E.propTypes={data:g.a.array,dataId:g.a.string,downloadAttachment:g.a.func,neNeedToDownload:g.a.bool,orgId:g.a.string,showAttachmentViewer:g.a.func,size:g.a.string},E.defaultProps={size:"medium"}},"./src/containers/Subtab/PrintTicketContainer/PrintTicketContainer.js":function(e,t,n){"use strict";var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),r=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),c=n.n(s),u=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=n.n(u),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=n.n(d),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),f=n.n(p),b=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),g=n.n(b),h=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-redux/es/index.js"),I=n("./src/components/Subtab/PrintTicket/PrintTicket.module.css"),v=n.n(I),O=n("./src/components/Subtab/Loading/Loading.js"),j=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),y=n.n(j),C=n("./src/components/Subtab/ThreadAttachments/ThreadAttachments.js"),E=n("./src/fz-i18n/index.js"),_=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||a()(t)).apply(this,arguments))}return m()(t,e),c()(t,[{key:"componentDidUpdate",value:function(e){e.thread!=this.props.thread&&this.props.thread&&"print"==this.props.action&&setTimeout(function(){return window.print()},100)}},{key:"render",value:function(){var e=this.props,t=e.thread,n=e.action,i=e.ticket,a=t?'"'+t.author.name+'"<'+t.author.email+">":null;return t?f.a.createElement("div",{className:v.a.ticketDetail},f.a.createElement("div",{className:v.a.ticketInfo},f.a.createElement("div",{className:v.a.felidDiv},f.a.createElement("span",{className:v.a.leftFelid},E.h.getI18NValue("support.request.from.emailid"),":"),f.a.createElement("div",{className:v.a.rightFelid},a),"showOriginal"==n?f.a.createElement("div",{className:v.a.printCont,onClick:function(){window.print()}},f.a.createElement(y.a,{name:"ZD-printing2",size:"16"})):null),t.to?f.a.createElement("div",{className:v.a.felidDiv,"data-id":"toAddress"},f.a.createElement("span",{className:v.a.leftFelid},E.h.getI18NValue("crm.label.to.email"),":"),f.a.createElement("div",{className:v.a.rightFelid},t.to)):null,f.a.createElement("div",{className:v.a.felidDiv},f.a.createElement("span",{className:v.a.leftFelid},E.h.getI18NValue("crm.events.date"),":"),f.a.createElement("div",{className:v.a.rightFelid},f.a.createElement(E.e,{to:t.createdTime,format:function(){return"ddd, MMM D, YYYY [at] hh:mm A"},ago:"ago",later:"late"}))),f.a.createElement("div",{className:v.a.felidDiv,dataId:"printSubject"},f.a.createElement("span",{className:v.a.leftFelid},E.h.getI18NValue("crm.label.subject"),":"),f.a.createElement("div",{className:v.a.rightFelid},i&&i.subject)),t.hasAttach?f.a.createElement("div",{className:v.a.felidDiv,onClick:function(){var e=document.scrollingElement||document.body;e.scrollTop=e.scrollHeight}},f.a.createElement("span",{className:v.a.leftFelid},E.h.getI18NValue("label.attachments"),":"),f.a.createElement("div",{className:v.a.attchmentText},E.h.getI18NValue("support.view.attachments"))):null),f.a.createElement("div",{className:v.a.ticketContent,dangerouslySetInnerHTML:{__html:t.content},"data-id":"content_"+id}),t.hasAttach?f.a.createElement("div",{className:v.a.ticketContent},f.a.createElement(C.a,{data:t.attachments,neNeedToDownload:!0,downloadAttachment:function(){},showAttachmentViewer:function(){},orgName:""})):null):f.a.createElement("div",{className:v.a.loadingCount},f.a.createElement(O.a,null))}}]),t}(f.a.Component),T=_;_.propTypes={action:g.a.string,thread:g.a.object,ticket:g.a.object};var k=n("./src/actions/TicketDetailViewAction.js"),A=n("./src/tickets/actions/detailView/index.js"),N=function(e){function t(e){return r()(this,t),l()(this,(t.__proto__||a()(t)).call(this,e))}return m()(t,e),c()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.ticketId,n=e.threadId,i=e.getThread,a=e.getTicket;i(t,n),a(t)}},{key:"render",value:function(){var e=this.props,t=e.thread,n=e.action,i=e.ticket;return f.a.createElement(T,{thread:t,ticket:i,action:n})}}]),t}(p.Component);N.propTypes={action:g.a.string,getThread:g.a.func,getTicket:g.a.func,thread:g.a.object,threadId:g.a.string,ticket:g.a.object,ticketId:g.a.string};t.a=Object(h.connect)(function(e,t){var n=e.routing.location.pathname.split("/")[8],i=e.routing.paramMap.moduleId;return{ticketId:i,threadId:n,thread:e.module.thread[n],ticket:e.module.ticket[i],action:e.routing.location.query.action}},{getThread:k.k,getTicket:A.a})(N)},"./src/feeds/constants.js":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={LABEL_REQUEST:"LABEL_REQUEST",LABEL_REQUESTS:"LABEL_REQUESTS",LABEL_TASK:"LABEL_TASK",USER_NAME:"USER_NAME",ACTION_OWNER:"ACTION_OWNER",COMMENTED_BY:"COMMENTED_BY",RECORD_OWNER:"RECORD_OWNER",FROM_DEPARTMENT:"FROM_DEPARTMENT",TO_DEPARTMENT:"TO_DEPARTMENT",CONTACTS:"CONTACTS",ACCOUNTS:"ACCOUNTS",BUG_URL:"BUG_URL",DEPARTMENT:"DEPARTMENT",SURVEY_GOOD:"Good",SURVEY_OK:"OK",SURVEY_BAD:"Bad",COMMENTRANGE:"50"}},"./src/feeds/i18n.js":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={"Status.direct.message.title":"$1 has sent a Direct Message in $2","Status.direct.message.title.min":"$1 has sent a Direct Message","Request.merged":"$2 has merged $1 in $3","Request.reassigned.with.account.min":"$5 reassigned a $1 from $2 | $3 to $4","Request.bug.added":"$2 added a $1 in $3","Request.restore.title.with.account":"$1 received from $2 | $3 in $4","Request.pickedup.without.account":"$3 self-assigned a $1 from $2 in $4","Request.updated.without.account":"$3 updated a $1 from $2 in $4","Task.update.min":"$2 updated a $1","Request.merged.min":"$2 has merged $1","Request.ownerupdate.without.account.min":"$1 from $2 was assigned to $3","Comment.updated.min":"$1 updated a comment","ACS.errortitle":"Error","ACS.errormsg":"Action cannot be performed as $1 has been deleted.","Task.completed":"$1 completed a $2 in $3","Request.add.without.account.min":"$1 from $2 was assigned to $3","Request.ownerupdate.with.account":"$1 from $2 | $3 was assigned to $4 in $5","User.mentions.comment":"$1 has mentioned you in a comment","Request.bug.reopened.min":"$2 re-opened a $1","Request.split.to.with.account.and.with.owner":"Spawned $1 from $2 | $3 was assigned to $4 in $5","Request.closed.without.account":"$2 from $3 was closed in $4","Request.response.received.with.account.min":"New Response received from $1 | $2","Request.updated.with.account":"$4 updated a $1 from $2 | $3 in $5","Task.update":"$2 updated a $1 in $3","Unassigned.Request.added.without.account":"New $1 received from $2 in $3","Request.closed.with.account.min":"$2 from $3 | $4 was closed","Request.reassigned.without.account":"$4 reassigned a $1 from $2 to $3 in $5","Request.pickedup.with.account.min":"$4 self-assigned a $1 from $2 | $3","Request.add.with.account":"$1 from $2 | $3 was assigned to $4 in $5","Comment.updated":"$1 updated a comment in $2","Request.split.to.without.account.and.without.owner":"$1 from $2 was spawned in $3","Request.resolution.deleted":"$1 has deleted a Resolution in $2","Task.add.min":"$3 assigned a new $1 to $2","Request.split.to.without.account.and.without.owner.min":"$1 from $2 was spawned","Request.response.sent.with.account":"$3 replied to $1 | $2 in $4","Request.split.to.with.account.and.with.owner.min":"Spawned $1 from $2 | $3 was assigned to $4","Comment.added.min":"$1 posted a comment","Request.response.received.without.account.min":"New Response received from $1","Request.restore.title.without.account":"$1 received from $2 in $3","Request.reopened.without.account.min":"$1 reopened a $2 from $3","Request.reopened.with.account":"$1 reopened a $2 from $3 | $4 in $5","Task.restore.title.min":"$2 was assigned with a $1","Task.reopened":"$2 re-opened a $1 in $3","Request.bug.closed.min":"$2 closed a $1","Request.response.received.without.account":"New Response received from $1 in $2","Request.resolution.added.min":"$1 has added a Resolution","Unassigned.Request.added.without.account.min":"New $1 received from $2","Request.resolution.deleted.min":"$1 has deleted a Resolution","Request.pickedup.without.account.min":"$3 self-assigned a $1 from $2 ","Request.pickedup.with.account":"$4 self-assigned a $1 from $2 | $3 in $5","Request.split.to.with.account.and.without.owner":"$1 from $2 | $3 was spawned in $4","Request.split.to.without.account.and.with.owner":"Spawned $1 from $2 was assigned to $3 in $4","Request.moved.min":"$4 moved a $1 from $3 to $2","Task.add":"$3 assigned a new $1 to $2 in $4","Survey.added.with.account":"$2 | $3 left a $4 rating for a $1 in $5","Request.split.to.without.account.and.with.owner.min":"Spawned $1 from $2 was assigned to $3","Request.closed.without.account.min":"$2 from $3 was closed","Request.updated.without.account.min":"$3 updated a $1 from $2","Survey.added.without.account.min":"$2 left a $3 rating for a $1","Comment.added":"$1 posted a comment in $2","Request.forwarded.min":"$2 forwarded a $1","Request.closed.with.account":"$2 from $3 | $4 was closed in $5","Unassigned.Request.added.with.account.min":"New $1 received from $2 | $3","Task.pickedup.min":"$2 self-assigned a $1","Status.update.message":"$1 has added a Status in $2","Status.update.message.min":"$1 has added a Status","Request.reopened.with.account.min":"$1 reopened a $2 from $3 | $4","Task.pickedup":"$2 self-assigned a $1 in $3","Request.reassigned.without.account.min":"$4 reassigned a $1 from $2 to $3","Request.resolution.added":"$1 has added a Resolution in $2","Task.owner.reassigned.min":"$3 reassigned a $1 to $2","Request.split.to.with.account.and.without.owner.min":"$1 from $2 | $3 was spawned","Request.response.received.with.account":"New Response received from $1 | $2 in $3","Survey.added.with.account.min":"$2 | $3 left a $4 rating for a $1","Request.restore.title.with.account.min":"$1 received from $2 | $3","Unassigned.Request.added.with.account":"New $1 received from $2 | $3 in $4","Request.resolution.modified.min":"Resolution updated by $1","Request.bug.reopened":"$2 re-opened a $1 in $3","Request.moved":"$4 moved a $1 from $3 to $2","Request.bug.closed":"$2 closed a $1 in $3","Task.reopened.min":"$2 re-opened a $1","Request.restore.title.without.account.min":"$1 received from $2","Request.splitted.min":"$3 has split a $1 from $2","Request.response.sent.with.account.min":"$3 replied to $1 | $2","Request.response.sent.without.account":"$2 replied to $1 in $3","Task.completed.min":"$1 completed a $2","Request.add.without.account":"$1 from $2 was assigned to $3 in $4","Request.ownerupdate.without.account":"$1 from $2 was assigned to $3 in $4","Request.updated.with.account.min":"$4 updated a $1 from $2 | $3","Task.owner.reassigned":"$3 reassigned a $1 to $2 in $4","Request.ownerupdate.with.account.min":"$1 from $2 | $3 was assigned to $4","Request.forwarded":"$2 forwarded a $1 in $3","Task.restore.title":"$2 was assigned with a $1 in $3","Request.resolution.modified":"Resolution updated by $1 in $2","Request.reassigned.with.account":"$5 reassigned a $1 from $2 | $3 to $4 in $6","Request.bug.added.min":"$2 added a $1","Request.response.sent.without.account.min":"$2 replied to $1","Survey.added.without.account":"$2 left a $3 rating for a $1 in $4","Request.splitted":"$3 has split a $1 from $2 in $4","Request.add.with.account.min":"$1 from $2 | $3 was assigned to $4","Request.reopened.without.account":"$1 reopened a $2 from $3 in $4"}},"./src/feeds/support.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/set.js"),r=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/toConsumableArray.js"),c=n.n(s),u=n("./src/actions/FeedsAction.js"),l=n("./src/actions/NotificationActions.js"),d=n("./src/feeds/constants.js"),m=n("./src/feeds/utils.js"),p=n("./src/utils/Common.js"),f=n("./src/fz-i18n/index.js"),b=n("./src/reducers/selector.js");function g(e,t,n,i){var a=e(),o=Object(b.t)(a),r=a.departmentSpecificState[o];r.feedsKeys[r.selectedFeedView]==n&&t(Object(u.f)(n,i))}function h(t,n){e.Support={},["Request","Task","Call","Event","StatusMessage","Game","Badge"].forEach(function(e,i){Support[e]={render:function(e,i,a,o){a.rendertype=e,a.viewkey=i,g(t,n,i,a)},invokeAction:function(e,t,n,i,a){},handleActionError:function(e,t,i,a){n(Object(u.c)(a))},handleAction:function(i,a,o,r){if("Request"===e&&"close"===a){var s=t(),c=Object(b.t)(s),l=s.departmentSpecificState[c],d=l.selectedFeedView,m=l.feedsKeys[d];"openRequestsFeeds"===d&&n(Object(u.e)(m,o,c))}},renderNotification:function(e,i,a,o){i.rendertype="push",i.viewkey=e,g(t,n,e,i)},renderComments:function(e,i,a,o,s,u){var l=t().module.feeds[i];l.comments=[].concat(c()(new r.a([].concat(c()(o),c()(l.comments))))),l.cmore=a,l.displayingCmt=!0,g(t,n,e,l)},renderMore:function(e,t){},updatePoll:function(e,t){},handleDelete:function(e,i,a,o){var r=t(),s=Object(b.t)(r);n("comment"==e?Object(u.a)(i,a,o,s):Object(u.e)(i,a,s))}}}),Support._View={init:function(e){},nodata:function(e){g(t,n,e,{noData:!0})},initNotification:function(e){},initShowMore:function(e){},completed:function(e,t){},completedShowMore:function(e,t){},renderTimeline:function(e,t,n,i,a,o){},_checkAndFetchMoreFeeds:function(e,t){}},Support.Activity=function(e,n){try{var i,o=e.getType(),r=t(),s=r.routing.paramMap,c=s.orgName,u=s.deptName,l=r.moduleMeta,d=(i={type:o,skey:e.getSkey(),latitle:e.getLATitle(),lamintitle:e.getLATitle(".min"),laplaintitle:e.getLATitle(void 0,!0),laminplaintitle:e.getLATitle(".min",!0),plaincont:e.getContent(),fdk:e.getFDK(),rendertype:"",latype:e.getLAType(),zgid:e.getAdditionalProperty("zgid"),time:e.getTime(),actionowner:e.getAOwner().split(":")[0],owner:e.getAOwner(),prd:e.getPrd()},a()(i,"fdk",e.getFDK()),a()(i,"title",e.getTitle()),a()(i,"department",e.getAdditionalProperty("Department")),a()(i,"photourl",e.getAdditionalProperty("photoUrl")),a()(i,"name",e.getAdditionalProperty("fullName")),a()(i,"email",e.getAdditionalProperty("email")),a()(i,"mintitle",e.getTitle(".min")),a()(i,"minplaintitle",e.getTitle(".min",!0)),a()(i,"plaintitle",e.getTitle(void 0,!0)),a()(i,"type",e.getType()),a()(i,"aowner",e.getAOwner().split(":")[0]),a()(i,"laowner",e.getLAOwner()?e.getLAOwner().split(":")[0]:""),a()(i,"cmore",e.getCMore()),a()(i,"cmdcount",parseInt(e.getTotalComments())||0),a()(i,"comments",e.getComments()),a()(i,"info",e.getAdditionalProperty("info")||e.getAdditionalProperty("niceurl")||""),a()(i,"prd",e.getPrd()),a()(i,"fdk",e.getFDK()),a()(i,"title",e.getTitle()),a()(i,"department",e.getAdditionalProperty("Department")),a()(i,"mintitle",e.getTitle(".min")),a()(i,"minplaintitle",e.getTitle(".min",!0)),a()(i,"plaintitle",e.getTitle(void 0,!0)),a()(i,"type",e.getType()),a()(i,"aowner",e.getAOwner().split(":")[0]),a()(i,"laowner",e.getLAOwner()?e.getLAOwner().split(":")[0]:""),a()(i,"cmore",e.getCMore()),a()(i,"cmdcount",parseInt(e.getTotalComments())||0),a()(i,"comments",e.getComments()),a()(i,"info",e.getAdditionalProperty("info")||e.getAdditionalProperty("niceurl")||""),a()(i,"activityType","Tasks"),i);if(void 0!==e._jobj.ap_Activity_Type&&(d.activityType=e._jobj.ap_Activity_Type),"Request"==o){d.isClosed="true"==e.getAdditionalProperty("Is_Closed"),d.isOnHold="true"==e.getAdditionalProperty("Is_OnHold"),d.recordId=e.getAdditionalProperty("SeCaseId"),d.seid=e.getAdditionalProperty("CaseId"),d.recordOwner=e.getAdditionalProperty("Owner"),d.threadcount=e.getAdditionalProperty("Thread_Count"),d.requestid=e.getAdditionalProperty("Request_Id"),d.blueprintApplied=e.getAdditionalProperty("blueprintApplied");var p="/agent/"+c+"/"+u+"/"+l.tickets.sanitizedName+"/details/"+d.seid;n?d.zgid==r.currentOrgId?d.cont="<a href="+p+' target="_blank" rel="noopener noreferrer">#'+e.getContent()+"</a>":d.cont="<span>#"+e.getContent()+"</span>":d.cont="<a href="+p+' onclick="return false">#'+e.getContent()+"</a>",d.channel=e.getAdditionalProperty("Channel"),d.threadStatus=parseInt(e.getAdditionalProperty("Thread_Status")),d.threadObj={channel:e.getAdditionalProperty("threadChannel"),status:e.getAdditionalProperty("threadDraftStatus"),isIncoming:e.getAdditionalProperty("threadIncoming"),isForward:e.getAdditionalProperty("threadForward")}}else if("Task"==e.getType()){d.isCompleted="true"==e.getAdditionalProperty("Is_Completed"),d.recordId=e.getAdditionalProperty("SecSeid"),d.seid=e.getAdditionalProperty("Seid");var f=e.getAdditionalProperty("CaseId");p="/agent/"+c+"/"+u+"/"+l.tasks.sanitizedName+"/details/"+f;n?d.zgid==r.currentOrgId?d.cont="<a href="+p+' target="_blank">'+e.getContent()+"</a>":d.cont="<span>"+e.getContent()+"</span>":d.cont="<a href="+p+' onclick="return false">'+e.getContent()+"</a>"}else d.recordId=e.getAdditionalProperty("recordId")||"status_msg_"+e.getFDK(),d.cont=Object(m.e)(e.getContent(),e.getAdditionalProperty("mentions"),!0,r);if(d.duedate="","Request"==o&&!d.isClosed||"Task"==o&&!d.isCompleted){var b=e.getAdditionalProperty("Priority")||"";b="-None-"===b?"":b,d.priority=b,d.duedate=e.getAdditionalProperty("Due_Date")}return d.onHoldTime="","Request"==o&&d.isOnHold&&(d.onholdtime=e.getAdditionalProperty("OnHold_Time")),d}catch(e){}},Support.Comment=function(e){var n=t(),i={},a=e.getPostedBy();e.getAdditionalProperty("actualCommenterZuid")&&(a=e.getAdditionalProperty("actualCommenterZuid")),e.getAdditionalProperty("Bug_Commenter_Name")?a=e.getAdditionalProperty("Bug_Commenter")+":user":e.getAdditionalProperty("Bug Commenter Name")&&(a=e.getAdditionalProperty("Bug Commenter")+":user"),e.getAdditionalProperty("attachDetails")&&(i.attachments=JSON.parse(e.getAdditionalProperty("attachDetails")));var o=e.getAdditionalProperty("lastName");return i.commentedby=o?Object(p.t)(e.getAdditionalProperty("firstName"),o):e._cmt.title.iprops[0].props.COMMENTED_BY,i.userType=o?e.getAdditionalProperty("usertype"):a.split(":")[1]||"user",i.photourl=o?e.getAdditionalProperty("photoUrl"):null,i.cmtcont=Object(m.e)(e.getContent(),e.getAdditionalProperty("mentions"),!0,n),i.cmtcontwithnormaldv=e.getContent(),i.cmtoriginalcont=e.getContent(),i.cfdk=e.getCFDK(),i.is_public=e.getAdditionalProperty("is_public"),void 0!==i.is_public&&"string"==typeof i.is_public&&(i.is_public="true"===i.is_public),i.cmdtime=e.getAt(),e.getAdditionalProperty("Bug_Commenter_Name")?i.commentedby=Object(p.k)(e.getAdditionalProperty("Bug_Commenter_Name")):e.getAdditionalProperty("Bug Commenter Name")&&(i.commentedby=Object(p.k)(e.getAdditionalProperty("Bug Commenter Name"))),i},Support.I18NString={getString:function(e,n){var i=t(),a=i.routing.paramMap,o=a.orgName,r=a.deptName,s=i.moduleMeta;switch(e){case d.a.LABEL_REQUEST:return n.default||i.moduleMeta.tickets.singularLabel;case d.a.LABEL_REQUESTS:return n.default||i.moduleMeta.tickets.pluralLabel;case d.a.LABEL_TASK:return n.default||i.moduleMeta.tasks.singularLabel;case d.a.CONTACTS:var c=n.conid,u=n.contact;return"<a id="+c+" href="+("/agent/"+o+"/"+r+"/"+s.contacts.sanitizedName+"/details/"+c)+' class="clrblu" onclick="return false">'+u+"</a>";case d.a.ACCOUNTS:var l=n.accid,m=n.account;return"<a id="+l+" href="+("/agent/"+o+"/"+r+"/"+s.accounts.sanitizedName+"/details/"+l)+' class="clrblu" onclick="return false">'+m+"</a>";case d.a.USER_NAME:case d.a.RECORD_OWNER:case d.a.ACTION_OWNER:if(null!=n.uid&&"null"!=n.uid){if(n.lastName){var f=Object(p.t)(n.firstName,n.lastName);return"<a href="+Object(p.o)(n.uid,i)+' class="clrblu">'+f+"</a>"}return}if(null!=n.teamid&&"null"!=n.teamid)return n.teamname?'<a href="javascript:;" class="clrblu">'+n.teamname+"</a>":void 0;break;case d.a.COMMENTED_BY:return'<a class="clrblu">'+n.COMMENTED_BY+"</a>";case d.a.BUG_URL:return n.Bug_URL?"<a href="+n.Bug_URL+' target="_new" class="clrblu">Bug</a>':"Bug";case d.a.FROM_DEPARTMENT:case d.a.TO_DEPARTMENT:case d.a.DEPARTMENT:return n.default||n.DEPNAME;case d.a.SURVEY_GOOD:return'"GOOD"';case d.a.SURVEY_OK:return'"OK"';case d.a.SURVEY_BAD:return'"BAD"'}}},Support.Uns={newNtfn:[],handleBadge:function(e,i,a){if(n(Object(l.m)(e.UNS)),"feed"==t().notificationPopup.type){(e=Object(m.a)(a,t)).ISNEW=!0,e.isRead=!1;var o=a.getSublist()||[];o.length>0&&(o=o.map(function(e){return Object(m.d)(e,t)})),e.subList=o,n(Object(l.a)(e))}},handleDesktopNotification:function(e){var t=e.getActionOwner();null==t&&(t="");var n=e.getInfo(void 0,!0);if(null!=n&&""!=n){n=n.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),AcsDesktopNotification.show("https://contacts.localzoho.com/file?t=user&fs=thumb&ID=10521559",f.h.getI18NValue("support.label.service.name"),n,10)}},renderNotificationList:function(e,i,a,o,r){for(var s=[],c=0;c<i.length;c++)if("Ticket"!=i[c].getProperty("type")){var u=Object(m.a)(i[c],t);u.isRead=u.ISNEW,u.ISNEW=!1;var d=i[c].getSublist()||[];d.length>0&&(d=d.map(function(e){return Object(m.d)(e,t)})),u.subList=d,s.push(u)}n(Object(l.j)(s,r))}},Support.onAcsConnect=function(){}}}).call(this,n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/webpack/buildin/global.js"))},"./src/feeds/utils.js":function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return r}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"b",function(){return l});var i=n("./src/actions/NotificationActions.js"),a=n("./src/feeds/i18n.js"),o=n("./src/utils/Common.js");function r(t,n){n(function(){var n,o;AcsApi.autoCorrect=(n=AcsApi.autoCorrect,o={},function(){var e=this,t=arguments[0],i=o[t];i&&clearTimeout(i);var a=arguments;o[t]=setTimeout(function(){n.apply(e,a),o[t]=null},1e3)}),AcsApi.init("Support","crmcsrfparam","crmcsr"),AcsDesktopNotification.syncOwner(),t(Object(i.l)()),"undefined"==typeof AcsResource&&(e.AcsResource={}),AcsResource.resourceobject=a.a,AcsApi.getBadgeCount("UNS")})}function s(e,t){var n={},i=t(),a=e.getInfo(void 0,!0),o=null,r=e.getAdditionalProperty("zgid")||"null",s=e.getAdditionalProperty("sanitizedOrgName")||i.module.org[r].portalName;e.getActionOwner()&&("_NONE_"!=e.getActionOwner().split(":")[0]&&(o=e.getAdditionalProperty("photoUrl")||o));var c=e.getAdditionalProperty("LAST_ACTIVITY");if("INCOMING_MAIL"==c||"RESPONSE_RECEIVED"==c||"contact"==e.getAdditionalProperty("photo_type")){o=null;var u=""+e.getAdditionalProperty("Contact_Id")||"";"undefined"!=u&&""!=u&&"null"!=u&&"null"!=r&&(o="/api/v1/contacts/"+u+"/photo?portalname="+s)}var l=e.getSkey()||Date.now(),d="";e.getProperty("viewkey")&&(d=e.getProperty("viewkey"));var m="";e.getRepeatCount()&&(m=e.getRepeatCount());var p="";e.getRepeatUsers()&&(p=e.getRepeatUsers());var f=e.getTime()||"";n.fdk=e._ntfn["Feed.fdk"],n.departmentId=e.getAdditionalProperty("Department"),n.accessFrom=e.getAccFrom(),n.type=e.getType(),n.title=a,n.photourl=o,n.ISNEW=e.isNew(),n.SKEY=l,n.info=e.getAdditionalProperty("info")||e.getAdditionalProperty("niceurl"),n.VIEWKEY=d,n.repCount=m,n.repUsers=p,n.time=f,n.seid=e.getAdditionalProperty("seid"),n.caseNumber=e.getAdditionalProperty("caseNumber"),n.subject=e.getAdditionalProperty("subject"),n.type=e.getProperty("type"),n.orgId=r;var b=e.getAdditionalProperty("sanitizedDepName"),g=e.getAdditionalProperty("sanitizedModule");if("Request"===n.type||"Ticket"===n.type){var h=e.getAdditionalProperty("caseId");n.entityURL=b?"/agent/"+s+"/"+b+"/"+g+"/details/"+h:"/support/"+s+"/ShowHomePage.do#Cases/dv/"+n.seid}else"status"===n.type||"Direct Message"===n.type||"StatusMessage"===n.type?(n.subject=e.getAdditionalProperty("subject"),n.entityURL="/support/"+s+"/ShowHomePage.do#feeds/"+n.info):"Task"===n.type&&(n.entityURL=b?"/agent/"+s+"/"+b+"/"+g+"/details/"+n.seid:"/support/"+s+"/ShowHomePage.do#Tasks/dv/"+n.seid);return n}function c(e,t){return(e=s(e,t)).isRead=!1,e.ISNEW=!1,e}function u(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{t=void 0===t?{}:t,n=null==n||n;for(var a=e,r=new RegExp("zsu[@[a-z]+(#|:).+?]zsu","g"),s=void 0;null!=(s=r.exec(e));){var c=s[0],u=c.split("zsu[")[1].slice(0,-4);if(0==u.indexOf("#")){var l=u.split(":"),d=l[0],m=l[2],p=d,f=i.routing.paramMap,b="/agent/"+f.orgName+"/"+f.deptName+"/"+i.moduleMeta.tickets.sanitizedName+"/details/"+m;n&&(p="<a href="+b+' class="clrblu">'+d+"</a>"),a=a.replace(c,p)}else if(0==u.indexOf("@"))if(-1!==u.indexOf("user")){var g=t[(h=u.replace("@user#","").replace("@user:","").split("_"))[0]];p=g;n?(g=g.replace(/>/g,"&gt;").replace(/</g,"&lt;"),p='<a href="javascript:;" class="clrblu" onclick="return false">'+Object(o.k)(g)+"</a>"):p=Object(o.k)(p),a=a.replace(c,p)}else{(h=u.replace("@team#","").replace("@team:","").split("_"))[0];var h,I=h[1];I=I.replace(/>/g,"&gt;").replace(/</g,"&lt;"),p='<a href="javascript:;" class="clrblu" onclick="return false">'+Object(o.k)(I)+"</a>",a=a.replace(c,p)}}return a}catch(t){return e}}function l(e,t){t=""+t,e="feedback widget"==(e=(""+e).toLowerCase())?e.replace(/\s+/g,""):e;var n={email:["support.request.status.email.icon.title"],phone:["support.request.status.phone.icon.title"],forums:["support.request.status.forums.icon.title"],web:["support.request.status.web.icon.title"],twitter:["support.request.status.request.twitter.incoming.icon.title"],facebook:["support.request.status.request.facebook.incoming.icon.title"],chat:["support.request.status.chat.icon.title"],feedbackwidget:["support.request.status.feedbackwidget.icon.title"],2:["support.request.status.request.sent.icon.title","ogmrequest"],3:["support.request.status.req.receive.icon.title","icmrequest"],6:["support.request.status.request.drafted.icon.title","ogmrequest"],7:["support.request.status.request.drafted.icon.title","icmrequest"],9:["support.request.status.req.receive.icon.title","icmrequest"],11:["support.request.status.req.receive.icon.title","icmforumrequest"],12:["support.request.status.request.sent.icon.title","ogmforumrequest"],13:["support.request.status.request.sent.icon.title","ogmforumrequest"],14:["support.request.status.req.receive.icon.title","icmforumrequest"],15:["support.request.status.request.forward.icon.title","fwdrequest"],17:["support.request.status.req.receive.icon.title","incomingCTI"],18:["support.request.status.request.sent.icon.title","outgoingCTI"],19:["support.request.status.request.twitter.incoming.icon.title","NewTwiticm"],20:["support.request.status.request.twitter.response.icon.title","NewTwiticm"],21:["support.request.status.request.twitter.outgoing.icon.title","NewTwitogn"],22:["support.request.status.request.facebook.incoming.icon.title","NewFbookIcm"],23:["support.request.status.request.facebook.response.icon.title","NewFbookIcm"],24:["support.request.status.request.facebook.outgoing.icon.title","NewFbookogn"],25:["support.request.status.chat.icon.title","chat"],26:["support.request.status.offlinechat.icon.title","offlinechat"],32:["support.request.status.req.receive.icon.title","incomingCTI"],33:["support.request.status.request.sent.icon.title","outgoingCTI"],34:["support.survey.listview.feedback.received"],43:["support.request.history.new.facebook.directMessage.received","NewFbookIcm"],44:["support.request.history.new.facebook.directMessage.received","NewFbookIcm"],45:["support.request.history.new.facebook.directMessage.sent","NewFbookogn"]};return t=["","undefined","0","1","5"].includes(t)||!n.hasOwnProperty(t)?e:t,n.hasOwnProperty(t)?n[t][0]:""}}).call(this,n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/webpack/buildin/global.js"))},"./src/index.js":function(e,t,n){"use strict";n.r(t);var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-dom/index.js"),r=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-redux/es/index.js"),c=(n("../components/lib/common/basic.module.css"),n("./src/components/common/reset.module.css"),n("./node_modules/@zohodesk/variables/lib/colorVariables.module.css"),n("./src/components/commonlist/listColors.module.css"),n("./node_modules/@zohodesk/variables/lib/internalColorVariables.module.css"),n("./node_modules/@zohodesk/variables/lib/sizeVariables.module.css"),n("./node_modules/@zohodesk/variables/lib/internalSizeVariables.module.css"),n("./node_modules/@zohodesk/variables/lib/fontFamilyVariables.module.css"),n("./src/components/common/responsive.module.css"),n("./src/fz-i18n/index.js")),u=n("./src/containers/AppContainer/AppContainer.js"),l=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),d=n.n(l),m=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),p=n.n(m),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),b=n.n(f),g=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),h=n.n(g),I=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),v=n.n(I),O=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),j=n.n(O),y=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),C=n.n(y),E=n("./src/components/WmsAction/WmsAction.module.css"),_=n.n(E),T=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),k=n.n(T),A=n("../components/lib/Layout/index.js"),N=n("../components/lib/Tooltip/Tooltip.js"),S=n.n(N),R=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||p()(t)).call(this,e));return n.handleOver=n.handleOver.bind(n),n.setTooltipRef=n.setTooltipRef.bind(n),n.setContainerRef=n.setContainerRef.bind(n),n}return j()(t,e),h()(t,[{key:"handleOver",value:function(e){this.tooltipRef&&this.tooltipRef.handleOver(e)}},{key:"setTooltipRef",value:function(e){this.tooltipRef=e}},{key:"setContainerRef",value:function(e){this.tooltipRef&&this.tooltipRef.setContainerRef(e)}},{key:"render",value:function(){var e=this.props,t=e.keyboardClick,n=e.pendingClick,i=e.recentClick,o=e.chatClick,r=e.feedbackClick,s=e.isMobile,u=e.onNotificationClick,l=e.onSetupClick,d=e.ziaNotificationClick,m=c.h.getI18NValue;return a.a.createElement(A.Container,{alignBox:"row",align:"vertical",className:_.a.container+" "+(s?_.a.mobile:_.a.default)+" ",onMouseOver:this.handleOver,eleRef:this.setContainerRef},a.a.createElement(S.a,{ref:this.setTooltipRef}),s&&a.a.createElement("span",{"data-title":"Notifications (N)",className:_.a.action,onClick:function(e){e.stopPropagation&&e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation(),u()}},a.a.createElement(k.a,{name:"ZD-toprightnotifi",iconClass:_.a.size13})),s&&a.a.createElement("span",{"data-title":"Setup (S)",className:_.a.action,onClick:function(){l()}},a.a.createElement(k.a,{name:"ZD-zdSetup",iconClass:_.a.size13})),a.a.createElement("span",{className:_.a.action,onClick:function(){return{}},"data-id":"askZiaWmsBar"},a.a.createElement("span",{className:_.a.size14},m("support.setup.zia.askzia"))),a.a.createElement("span",{"data-title":m("support.setup.zia.notification"),className:_.a.action,onClick:d,"data-id":"ziaNotificationsWmsBar"},a.a.createElement(k.a,{name:"ZD-zia",iconClass:_.a.size15})),!s&&a.a.createElement("span",{"data-title":"Keyboard Shortcuts (Shift + ?)",className:_.a.action,onClick:t&&t.bind(this),"data-id":"keyboardShortcutsWmsBar"},a.a.createElement(k.a,{name:"ZD-keyboard3",iconClass:_.a.size12})),a.a.createElement("span",{"data-title":"Pending Activities",className:_.a.action,onClick:n&&n.bind(this),"data-id":"pendingActivitiesWmsBar"},a.a.createElement(k.a,{name:"ZD-approval3",iconClass:_.a.size15})),a.a.createElement("span",{"data-title":"Recent Items",className:_.a.action,onClick:i&&i.bind(this),"data-id":"recentItemsWmsBar"},a.a.createElement(k.a,{name:"ZD-recent3",iconClass:_.a.size15})),a.a.createElement("span",{"data-title":"Live Chat",className:_.a.action,onClick:o&&o.bind(this),"data-id":"liveChatWmsBar"},a.a.createElement(k.a,{name:"ZD-livechat3",iconClass:_.a.size14})),a.a.createElement("span",{"data-title":"Share Feedback",className:_.a.action,onClick:r&&r.bind(this),"data-id":"shareFeedbackWmsBar"},a.a.createElement(k.a,{name:"ZD-feedback3",iconClass:_.a.size15})))}}]),t}(a.a.Component),P=R;R.propTypes={chatClick:C.a.func,feedbackClick:C.a.func,isMobile:C.a.bool,keyboardClick:C.a.func,onNotificationClick:C.a.func,onSetupClick:C.a.func,pendingClick:C.a.func,recentClick:C.a.func,ziaNotificationClick:C.a.func};var w=n("./src/actions/index.js"),D=n("./src/actions/Setup/index.js"),L=n("./src/reducers/selector.js"),$=n("./src/utils/Common.js"),M=n("./src/components/PortalLayer/PortalLayer.js"),U=n("./src/components/Drawer/Drawer.js"),z=n("./src/components/FreezeLayer/FreezeLayer.js"),x=n("./src/containers/asyncComponent.js"),q=n("./src/containers/mainAsyncComponent.js"),F=n("./src/utils/shortcuts.js"),V=n("./src/zia/containers/ziaAsyncComponent.js"),B=n("./src/utils/RequestAPI.js"),K=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),W=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),Z=n.n(W),H=n("./src/fz-i18n/utils.js"),G=n("./src/fz-i18n/offset.js"),Y=n("./src/components/recentItem/RecentItems/RecentItems.module.css"),Q=n.n(Y),J=n("./src/components/recentItem/RecentList/RecentList.module.css"),X=n.n(J),ee=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||p()(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return j()(t,e),h()(t,[{key:"onClick",value:function(){var e=this.props,t=e.id,n=e.onClick,i=e.module;n&&n(i,t)}},{key:"render",value:function(){var e=this.props,t=e.iconName,n=e.title,i=e.dateTime,o=e.iconSize;return a.a.createElement(A.Container,{alignBox:"column",className:X.a.container,onClick:this.onClick},a.a.createElement(A.Box,{className:X.a.listItem},a.a.createElement(A.Container,{alignBox:"row"},a.a.createElement(A.Box,{className:X.a.itemIcn},a.a.createElement("span",null,a.a.createElement(k.a,{name:t,size:o}))),a.a.createElement(A.Box,{className:X.a.subjectContainer},a.a.createElement("div",{className:X.a.subject},n),a.a.createElement("div",{className:X.a.time},i)))))}}]),t}(i.Component),te=ee;ee.propTypes={dateTime:C.a.string,iconName:C.a.string,iconSize:C.a.string,id:C.a.string,module:C.a.string,onClick:C.a.func,title:C.a.string};var ne=function(e){function t(e){return b()(this,t),v()(this,(t.__proto__||p()(t)).call(this,e))}return j()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.objects,n=e.isPin,i=e.onPinChange,o=e.onClose;return a.a.createElement(A.Container,{alignBox:"column",className:Q.a.container,dataId:"recentItemsDetailPopup"},a.a.createElement(U.c,{title:c.h.getI18NValue("support.label.recent.items"),iconName:"ZD-recent3",iconSize:"15",paddingSize:"small",onClose:o},a.a.createElement(A.Box,{flexible:!0,adjust:!0},a.a.createElement(A.Container,{isCover:!1,alignBox:"row",className:Q.a.pinContainer},a.a.createElement("div",{className:Q.a.pinIcon+" "+(n?Q.a.active:""),onClick:i,"data-id":n?"recentItemsPinned":"recentItemsUnPinned"},a.a.createElement(k.a,{name:"ZD-pinDark"}))))),t?a.a.createElement(U.a,null,t.map(function(e){return a.a.createElement("div",{"data-id":e.id,key:e.time+"_"+e.id+"_"+e.title},a.a.createElement(te,{title:e.title,dateTime:e.time,iconName:e.iconName,iconSize:e.iconSize,onClick:e.onClick,id:e.id,module:e.module}))})):a.a.createElement(A.Box,{tagName:"p",className:Q.a.marginAuto},a.a.createElement(k.a,{name:"ZD-information",iconClass:Q.a.infoIcon}),c.h.getI18NValue("support.no.matches.found")))}}]),t}(i.Component),ie=ne;ne.propTypes={isPin:C.a.bool,objects:C.a.arrayOf(C.a.shape({id:C.a.string,title:C.a.string,time:C.a.string,iconName:C.a.string,iconSize:C.a.oneOfType([C.a.string,C.a.number]),onClick:C.a.func,module:C.a.string})),onClose:C.a.func,onPinChange:C.a.func};var ae={Cases:"tickets",Chat:"chat",Community:"community",Contacts:"contacts",Accounts:"accounts",Reports:"reports",Socials:"social",Solutions:"kbCategory",Tasks:"tasks",Calls:"calls",Events:"events",Products:"products"},oe={Cases:"ZD-tickets30",Chat:"ZD-chats30",Community:"ZD-community30",Contacts:"ZD-lhsContacts",Accounts:"ZD-lhsAccounts",Reports:"ZD-reports30",Socials:"ZD-social30",Solutions:"ZD-kb30",Tasks:"ZD-taskNone",Calls:"ZD-telephone",Events:"ZD-events",Products:"ZD-products2"},re={Tasks:"19",Calls:"20"},se=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||p()(t)).call(this,e));return n.state={isMounted:!1},n.updateRecentItems=n.updateRecentItems.bind(n),n.onPinChange=n.onPinChange.bind(n),n.getPinStatus=n.getPinStatus.bind(n),n.getIconInfo=n.getIconInfo.bind(n),n.onRedirect=n.onRedirect.bind(n),n.updatePinStatusInReact=n.updatePinStatusInReact.bind(n),n.onClose=n.onClose.bind(n),n.changePinStatus=n.changePinStatus.bind(n),n.convertTimeZone=n.convertTimeZone.bind(n),n}return j()(t,e),h()(t,[{key:"convertTimeZone",value:function(e){return e=Object(H.b)(e,H.a,0),e=Object(H.b)(e,0,G.a[this.context.timeZone])}},{key:"onClose",value:function(){(0,(0,this.props.getUpdateFunction)().update)(!1),this.getPinStatus()&&this.changePinStatus(!1)}},{key:"onRedirect",value:function(e,t){this.props.openEntityDv(e,t)}},{key:"getIconInfo",value:function(e){return{iconSize:re[e]||"17",iconName:oe[e]}}},{key:"getPinStatus",value:function(){var e=this.props,t=e.orgId,n=e.notificationPopup;return Object($.M)()?"pinned"===Object($.A)(t+"_isRCItemPinned"):Z()("isPinned",n)}},{key:"changePinStatus",value:function(e,t){var n=this.props,i=n.orgId,a=n.notificationPopup;if(Object($.M)()){var o=void 0!==e?1==e?"pinned":"unpinned":"pinned"===Object($.A)(i+"_isRCItemPinned")?"unpinned":"pinned";Object($.O)(i+"_isRCItemPinned",o),t&&t()}else{var r=void 0!==e?e:!a.isPinned;this.updatePinStatusInReact(r)}}},{key:"onPinChange",value:function(){var e=this;this.changePinStatus(void 0,function(){e.updateRecentItems().then(function(t){e.setState(t)})})}},{key:"updateRecentItems",value:function(){var e=this.props,t=e.orgId,n=e.departmentId;return Object(B.a)("/api/v1/me/recentitems?department="+n,!1,{orgId:t}).get().then(function(e){var t=e.data,n=void 0===t?[]:t,i=Object(K.b)(n,Object(K.c)("data",{group:"array"})),a=i.entities,o=i.result;return{data:a.data,ids:o}})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("focus",this.updateRecentItems),Object($.M)()||this.updatePinStatusInReact(!1)}},{key:"updatePinStatusInReact",value:function(e){var t=this.props,n=t.notificationPopup,i=t.openRecentItems,a=d()({},n);delete a.type,i(d()(a,{isPinned:e}))}},{key:"componentDidMount",value:function(){var e=this;this.updateRecentItems().then(function(t){e.setState(d()(t,{isMounted:!0}),function(){Object($.M)()||e.updatePinStatusInReact(!1),document.addEventListener("focus",e.updateRecentItems)})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,i=void 0===n?{}:n,o=t.ids,r=void 0===o?[]:o,s=t.isMounted,u=void 0,l=this.props.removeClose;return u=r.length?[]:null,s?(r.map(function(t){var n=i[t];u.push(d()({id:n.id,title:n.title,time:Object(c.f)(e.convertTimeZone(n.time),"DD MMM YYYY HH:mm A"),onClick:e.onRedirect,module:ae[n.module]},e.getIconInfo(n.module)))}),a.a.createElement(A.Container,{onClick:l},a.a.createElement(ie,{onPinChange:this.onPinChange,onClose:this.onClose,isPin:this.getPinStatus(),objects:u}))):null}}]),t}(a.a.Component),ce=Object(s.connect)(function(e,t){return{orgId:Object(L.T)(e),departmentId:Object(L.t)(e),notificationPopup:Object(L.R)(e)}},{openRecentItems:w.J,openEntityDv:w.F})(se);se.contextTypes={timeZone:C.a.string},se.propTypes={orgId:C.a.string,departmentId:C.a.string,notificationPopup:C.a.object,openRecentItems:C.a.func,openEntityDv:C.a.func,removeClose:C.a.func,getUpdateFunction:C.a.func};var ue=n("../components/lib/Popup/Popup.js"),le=n.n(ue),de=function(e){function t(e){return b()(this,t),v()(this,(t.__proto__||p()(t)).call(this,e))}return j()(t,e),h()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,i=t.isPopupOpen,a=t.getUpdateFunction;if(i!=e.isPopupOpen&&n!=i){var o=a(),r=o.update,s=o.get;r&&r(!s())}}},{key:"render",value:function(){var e=this.props,t=e.removeClose,n=e.isActive,i=e.forwardRef,o=e.getUpdateFunction;return a.a.createElement(U.d,{palette:"plain",size:"xsmall",needFreeze:!1,forwardRef:i,isActive:n},a.a.createElement(ce,{removeClose:t,getUpdateFunction:o}))}}]),t}(a.a.Component);de.propTypes={forwardRef:C.a.object,getUpdateFunction:C.a.func,isActive:C.a.bool,isPopupOpen:C.a.bool,notificationPopup:C.a.object,orgId:C.a.string,removeClose:C.a.func};var me=le()(de);function pe(e){var t=e.isActive;return a.a.createElement(me,d()({},e,{isPopupOpen:t}))}pe.propTypes={isActive:C.a.bool};var fe=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||p()(t)).call(this,e));return n.onClickRecentItem=n.onClickRecentItem.bind(n),n.state={isZiaNotificationOpen:!1},n.toggleZiaNotifications=n.toggleZiaNotifications.bind(n),n.handlePortalLayer=n.handlePortalLayer.bind(n),n.getPortalState=n.getPortalState.bind(n),n.onKeyBoardClick=n.onOpenPopup.bind(n,"Keyboard"),n.onPendingActivityClick=n.onOpenPopup.bind(n,"PendingActivities"),n.onFeedbackClick=n.onOpenPopup.bind(n,"Feedback"),n.onCloseKeyboard=n.onClosePopup.bind(n,"Keyboard"),n.onClosePendingActivities=n.onClosePopup.bind(n,"PendingActivities"),n.onCloseFeedback=n.onClosePopup.bind(n,"Feedback"),n.onCloseZiaNotification=n.onClosePopup.bind(n,"ZiaNotifications"),n.getRecentItemFunctions=n.getRecentItemFunctions.bind(n),n.checkIsRecentItemsPinned=n.checkIsRecentItemsPinned.bind(n),n}return j()(t,e),h()(t,[{key:"handlePortalLayer",value:function(e,t){this["on"+t]=e}},{key:"getPortalState",value:function(e,t){this["get"+t+"State"]=e}},{key:"checkIsRecentItemsPinned",value:function(){var e=this.props,t=e.orgId,n=e.notificationPopup;return Object($.M)()?"pinned"===Object($.A)(t+"_isRCItemPinned"):selectn("isPinned",n)}},{key:"getRecentItemFunctions",value:function(){return{update:this.onRecentItem,get:this.getRecentItemState}}},{key:"onClickRecentItem",value:function(e){if(e&&e.stopPropagation&&e.stopPropagation(),e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation(),this.getRecentItemState()){var t=this.props,n=t.orgId,i=t.notificationPopup;if(Object($.M)())Object($.O)(n+"_isRCItemPinned","unpinned");else{var a=this.props.openRecentItems,o=d()({},i);delete o.type,a(d()(o,{isPinned:!1}))}}this.onRecentItem(!this.getRecentItemState())}},{key:"toggleZiaNotifications",value:function(){this.onZiaNotifications(!this.getZiaNotificationsState())}},{key:"onOpenPopup",value:function(e){this["on"+e](!0)}},{key:"onClosePopup",value:function(e){this["on"+e](!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,i=t.enableNotificationPopup,o=t.showSetup,r=t.moduleMeta;return a.a.createElement(a.a.Fragment,null,a.a.createElement(P,{isMobile:n,onNotificationClick:function(){i({type:"feed"})},onSetupClick:function(){o(!0)},keyboardClick:this.onKeyBoardClick,pendingClick:this.onPendingActivityClick,recentClick:this.onClickRecentItem,feedbackClick:this.onFeedbackClick,ziaNotificationClick:this.toggleZiaNotifications}),a.a.createElement(M.a,{saveUpdateFunction:this.handlePortalLayer,saveGetFunction:this.getPortalState,name:"RecentItem",initialState:this.checkIsRecentItemsPinned()},a.a.createElement(pe,{getUpdateFunction:this.getRecentItemFunctions,checkBeforeClose:function(){return!e.checkIsRecentItemsPinned()}})),a.a.createElement(M.a,{saveUpdateFunction:this.handlePortalLayer,name:"Keyboard"},a.a.createElement(z.a,{palette:"darkLight",animationName:"shrink"},a.a.createElement(x.O,{shortCutObj:Object(F.a)(r),onCloseClick:this.onCloseKeyboard}))),a.a.createElement(M.a,{saveUpdateFunction:this.handlePortalLayer,name:"PendingActivities"},a.a.createElement(U.d,{onClose:this.onClosePendingActivities,needFreeze:!0},a.a.createElement(x.ab,{onClose:this.onClosePendingActivities}))),a.a.createElement(M.a,{saveUpdateFunction:this.handlePortalLayer,name:"Feedback"},a.a.createElement(z.a,{animationName:"fade",childAnimationName:"expand",align:"both"},a.a.createElement(q.d,{onClose:this.onCloseFeedback}))),a.a.createElement(M.a,{saveUpdateFunction:this.handlePortalLayer,saveGetFunction:this.getPortalState,name:"ZiaNotifications"},a.a.createElement(U.d,{onClose:this.onCloseZiaNotification,size:"small",needFreeze:!0},a.a.createElement(V.d,{onClose:this.onCloseZiaNotification}))))}}]),t}(i.Component);fe.propTypes={enableNotificationPopup:C.a.func,isMobile:C.a.bool,notificationPopup:C.a.object,orgId:C.a.string,showSetup:C.a.func},fe.defaultProps={isMobile:!1};var be=Object(s.connect)(function(e,t){return{orgId:Object(L.T)(e),notificationPopup:Object(L.R)(e),moduleMeta:e.moduleMeta}},{enableNotificationPopup:w.i,showSetup:D.a})(fe),ge=n("./src/createAppStore.js"),he=n("./src/initialState.js"),Ie=n("./src/containers/Subtab/PrintTicketContainer/PrintTicketContainer.js");n.d(t,"renderWms",function(){return Oe});var ve=Object(ge.a)();function Oe(){r.a.render(a.a.createElement(s.Provider,{store:ve},a.a.createElement(c.a,{i18n:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i18n}),timeZone:function(e){return e.myInfo.timeZone}},a.a.createElement(be,null))),document.getElementById("wmsstatusbar"))}Object(he.b)(ve,{currentOrg:currentOrg,currentDepartment:currentDepartment,userInfo:userInfo,myProfile:myProfile,modules:modules,licenseType:licenseType,lastAccess:lastAccess,lastAccessQueueViewInfo:lastAccessQueueViewInfo,deskUrls:desk_urls}),ge.b.then(function(){"undefined"!=typeof isPrintOrShowOriginal&&isPrintOrShowOriginal?r.a.render(a.a.createElement(s.Provider,{store:ve},a.a.createElement(c.a,{i18n:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return i18n}),timeZone:function(e){return e.myInfo.timeZone},direction:"ltr"},a.a.createElement(Ie.a,null))),document.getElementById("react")):r.a.render(a.a.createElement(s.Provider,{store:ve},a.a.createElement(c.a,{direction:document.getElementsByTagName("html")[0].dir,i18n:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i18n}),permission:function(e){return e.module.profile[e.myInfo.profileId].permissions},timeZone:function(e){return e.myInfo.timeZone},license:function(e){return e.license},user:function(e){return e.myInfo}},a.a.createElement(u.a,null))),document.getElementById("react"))})},"./src/tickets/actions/detailView/index.js":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),a=n("./src/utils/RequestAPI.js"),o=n("./src/utils/Common.js"),r=n("./src/constants/index.js");function s(e){return{types:Object(o.m)(r.R.TICKET),shouldCallAPI:function(){return!!e},callAPI:function(t){return Object(a.a)("/api/v1/tickets/"+e+"?include=contacts,products,assignee,team,contract,source",!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(i.b)(e,Object(i.c)(r.R.TICKET_L,{mapping:{contact:Object(i.c)(r.R.CONTACT_L,{mapping:{account:Object(i.c)(r.R.ACCOUNT_L)}}),assignee:Object(i.c)(r.R.AGENT_L),team:Object(i.c)(r.R.TEAMS_L),product:Object(i.c)(r.R.PRODUCT_L)}}))})}}}},"./src/tickets/actions/form/index.js":function(e,t,n){"use strict";n.d(t,"b",function(){return O}),n.d(t,"c",function(){return j}),n.d(t,"d",function(){return C}),n.d(t,"a",function(){return E});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/keys.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/promise.js"),r=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),c=n.n(s),u=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),l=n.n(u),d=n("./src/actions/FormAction.js"),m=n("./src/tickets/actions/index.js"),p=n("./src/tickets/actions/detailView/index.js"),f=n("./src/constants/index.js"),b=n("./src/fz-i18n/index.js"),g=n("./src/actions/ContactActions.js"),h=d.t.showErrorPage;function I(e,t,n,i){var a=e(),o=a.myForm,r=a.dependencyMapping,s=a.ticketStatusMapping,c=o.myTicketLayoutId,u=o.ticketFields,l=o.ticketLayoutRules,d=o.ticketValidationRules,m=t||(n?"":c[i]),p=(s[m]||{}).statusMapping;return{ticketFields:u[m]||{},dependencyMapping:r.ticket[m],layoutRules:l[m],validationRules:d[m],statusMapping:p,loadFormLayoutId:m}}var v=function(e){return function(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments[4],s=arguments[5],u=arguments[6],b=arguments[7],g=arguments[8];return function(v,O){var j=y(e),C=l()("module.ticket."+n,O()),E=I(O,i,!!n,t),_=E.ticketFields,T=E.dependencyMapping,k=E.layoutRules,A=E.statusMapping,N=E.loadFormLayoutId,S=E.validationRules,R=!b||!S,P=N,w=l()("UIState.ticketForm.initialFormUIStates",O()).initialData,D=c()({},a,w),L=o,$={deptId:t,formId:"new",fullWidthFields:["subject","description","resolution"],hiddenFields:["resolution"],readOnlyFields:[],focusFieldName:L,moduleName:f.R.TICKET_L,lookupCreateFields:["contactId","accountId"],additionalFields:[{id:"attachment",name:"uploads",isCustomField:!1,type:"attachment",isReadOnly:!1,apiName:"uploads"}]};$=c()({},e,$);var M=_.sections;return b&&M&&T&&k&&A?(!n&&v(Object(d.o)(_,$,D,u,P,T,k,A)),j(n,v,O,_,P,C,u,T,k,L,s,S,b,A)):P?r.a.all([v(Object(d.m)("tickets",t,P)),v(Object(d.k)(P,f.R.TICKET_L)),v(Object(d.l)(P,f.R.TICKET_L)),v(Object(m.d)(P)),g&&R?v(Object(d.n)(P,f.R.TICKET_L)):null]).then(function(){var e=I(O,P,!!n,t),i=e.ticketFields,a=e.dependencyMapping,o=e.layoutRules,r=e.statusMapping,c=e.validationRules;return!n&&v(Object(d.o)(i,$,D,u,P,a,o,r)),j(n,v,O,i,P,C,u,a,o,L,s,c,b,r)},function(e){throw Object(d.s)(v,h,e)}):n?v(Object(p.a)(n)).then(function(){var e=l()("module.ticket."+n,O()),i=e||{},a=i.isTrashed,o=i.layoutId;return!e||a?v(h({isTrashed:!0})):r.a.all([v(Object(d.m)("tickets",t,o)),v(Object(d.k)(o,f.R.TICKET_L)),v(Object(d.l)(o,f.R.TICKET_L)),v(Object(m.d)(o)),g&&R?v(Object(d.n)(o,f.R.TICKET_L)):null]).then(function(){var i=I(O,o,!!n,t),a=i.ticketFields,r=i.dependencyMapping,c=i.layoutRules,l=i.statusMapping,d=i.validationRules;return j(n,v,O,a,o,e,u,r,c,L,s,d,!0,l)},function(e){throw Object(d.s)(v,h,e)})},function(e){throw Object(d.s)(v,h,e)}):v(Object(d.m)("tickets",t)).then(function(){var e=I(O,i,!!n,t),a=e.ticketFields,o=e.loadFormLayoutId;return r.a.all([v(Object(d.k)(o,f.R.TICKET_L)),v(Object(d.l)(o,f.R.TICKET_L)),v(Object(m.d)(o)),g&&R?v(Object(d.n)(o,f.R.TICKET_L)):null]).then(function(){var e=I(O,o,!!n,t),i=e.dependencyMapping,s=e.layoutRules,c=e.statusMapping;return v(Object(d.o)(a,$,D,u,o,i,s,c)),R&&!g&&v(Object(d.n)(o,f.R.TICKET_L)),r.a.resolve()},function(e){throw Object(d.s)(v,h,e)})},function(e){throw Object(d.s)(v,h,e)})}}},O=v({isFormReducer:!0}),j=v({isSingleUpdateReducer:!0}),y=function(e){return function(t,n,i,o,s,u,m,I,v,O,j,y,C,E){var _=!C||!y;if(t){var T=o.fieldDetails,k=!C||!u;return n(Object(p.a)(k?t:"")).then(function(){var u=l()("module.ticket."+t,i()),p=u||{},y=p.departmentId,C=void 0===y?"":y,k=p.isTrashed,A=p.blueprint,N=p.sharedDepartments,S=void 0===N?[]:N,R=p.secondaryContacts,P=void 0===R?[]:R;if(P.length&&n(Object(g.h)(P.toString())),!u||k)return n(h({isTrashed:!0}));var w=j?function(e,t){var n=["departmentId","contactId","email","subject","description","status","assigneeId","resolution","accountId","dueDate","channel","secondaryContacts"];return a()(e).map(function(i){var a=e[i],o=a.name;if(a.isMandatory&&("accountId"===o||"email"===o||"description"===o||"channel"===o)){var r=n.indexOf(o);"description"===o&&t.description||n.splice(r,1)}}),n}(T,u):[],D=S.length?["departmentId","phone","productId"]:["departmentId"],L={deptId:C,formId:t,fullWidthFields:["subject","description","resolution"],hiddenFields:w,readOnlyFields:D,focusFieldName:O,moduleName:f.R.TICKET_L,lookupCreateFields:["contactId","accountId"],lockedFields:A?["status"]:[],lockedFieldsInfo:{status:{infoText:b.h.getI18NValue("support.blueprints.status.lock.msg")}}};return L=c()({},e,L),n(Object(d.e)(o,L,u,m,s,I,v,E)),_&&n(Object(d.n)(s,f.R.TICKET_L)),r.a.resolve()},function(e){throw Object(d.s)(n,h,e)})}return _&&n(Object(d.n)(s,f.R.TICKET_L)),r.a.resolve()}};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments[4],o=arguments[5],r=arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],u={},l="",d="",m="",p="",b="",g=e.fieldUIStates,h=e.formId,I=t.ids,v=t.details;I.forEach(function(e){v[e].fields.forEach(function(e){var t=n[e],i=t.apiName,r=t.isCustomField,h=g[e],I=h.value,v=h.moduleName,O=h.createNew,j=h.type,y=h.isCreateNew,C=h.isShow,E=h.isChanged;I="Multiselect"===j&&I?I.join(";"):I;var _=a?C:!o||E,T=c.indexOf(i)>=0;if(_||T)if(r)u.cf||(u.cf={}),u.cf[i]=I;else if(v===f.R.CONTACT_L)u[i]=O&&y?"$"+f.R.CONTACT_L+".body:/id":I,l=O,b=I;else if(v===f.R.ACCOUNT_L)p=I,d=y?O:"";else if("Tags"!==i)if("email"===i&&(m=I),"assigneeId"===i){var k=I,A=k.assigneeId,N=k.teamId;u.assigneeId=A,u.teamId=N}else"secondaryContacts"===i?u[i]=s:i&&(u[i]=I)})}),i.forEach(function(e){var t=g[e],n=t.value,i=t.name;u[i]=n});var O=(d||"").trim(),j=(l||"").trim(),y={name:f.R.CONTACT_L,relativePath:l?"/api/v1/contacts":"/api/v1/contacts/"+b,method:l?"POST":"PATCH",payload:{accountId:O?"$"+f.R.ACCOUNT_L+".body:/id":p},dependent:O?[f.R.ACCOUNT_L]:[]},C=O||j;if(l)y.payload.lastName=l;else{var E=(r[b]||{}).accountId;p&&E!==p&&(C=!0)}m&&l&&(y.payload.email=m);var _={name:f.R.ACCOUNT_L,relativePath:"/api/v1/accounts",method:"POST",payload:{accountName:d}},T=[{name:f.R.TICKET_L,relativePath:h?"new"===h?"/api/v1/tickets":"/api/v1/tickets/"+h:"",method:h?"new"===h?"POST":"PATCH":"",payload:u,headers:{featureFlags:"multiLayout,apiName,secondaryContacts"},dependent:C?[f.R.CONTACT_L]:[]}];return C&&T.push(y),O&&T.push(_),T}function E(e,t,n,i,a){var o=n.fieldUIStates,s=t.email,c=t.contactId,u=o[s].value,l=void 0===u?"":u,d=l?l.trim():"",m=o[c].value,p=void 0===m?"":m,g=i.contact[p]||{},h=g.email,I=void 0===h?"":h,v=g.secondaryEmail,O=p?(I||(void 0===v?"":v))!==d:!!d;return O?e(f.R.CONTACT_L,"email",d).then(function(e){var t=(e.data||{}).duplicateIds;return(void 0===t?[]:t).length>1&&O?{isError:!0,message:b.h.getI18NValue("support.cases.alert.email.exist",[a])}:{isError:!1,message:""}}):r.a.resolve({isError:!1,message:""})}},"./src/tickets/reducers/ticketSelector.js":function(e,t,n){"use strict";n.d(t,"e",function(){return l}),n.d(t,"f",function(){return I}),n.d(t,"c",function(){return v}),n.d(t,"a",function(){return O}),n.d(t,"d",function(){return j}),n.d(t,"b",function(){return y});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/reselect/es/index.js"),r=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),s=n.n(r),c=n("./src/reducers/selector.js"),u=n("./src/utils/Common.js"),l=function(e){return s()("module.ticket",e)},d=Object(o.createSelector)([function(e){return e.departmentSpecificState},c.t],function(e,t){return s()(""+t,e)}),m=function(e){return Object(o.createSelector)(d,function(t){return s()("ticketList.views."+e,t)})},p=m("starred"),f=m("all"),b=m("archived"),g=m("blueprint"),h=Object(o.createSelector)([d,c.tb],function(e,t){var n=e.ticketList.viewMapper;return t&&n?n[t]:""}),I=Object(o.createSelector)([function(e){return s()("module.ticketview",e)||{}},f,b,p,g],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return{allViews:t.map(function(t){return e[t]}),archivedViews:n.map(function(t){return e[t]}),starredViews:i.map(function(t){return a()({},e[t],{count:e[t]&&e[t].count&&Object(u.r)(e[t].count)})}),bluePrintViews:o.map(function(t){return e[t]})}}),v=(Object(o.createSelector)([d],function(e){return s()("ticketList.filters",e)||{}}),Object(o.createSelector)([h,function(e){return e.module.ticketview},p],function(e,t,n){var i=-1!==n.indexOf(e),o=t[e];return{viewId:e,selectedView:a()({},o,{isStarredView:i,count:i&&o.count&&Object(u.r)(o.count)})}})),O=function(e){return s()("myInfo.associatedDepartmentIds",e)||[]},j=Object(o.createSelector)([function(e){return e.routing.paramMap.teamId},function(e){return e.module.teams}],function(e,t){var n=s()(""+e,t);return{teamId:e,team:a()({},n,{displayLabel:s()("name",n),isStarEnable:!1,isCVCreateEnable:!1,viewTitle:"support.request.all.teams"})}}),y=Object(o.createSelector)([d,c.nb],function(e,t){return s()("ticketList.viewUIState."+t,e)||{}})},"./src/utils/Attachment.js":function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"l",function(){return l}),n.d(t,"i",function(){return d}),n.d(t,"p",function(){return m}),n.d(t,"q",function(){return p}),n.d(t,"m",function(){return f}),n.d(t,"k",function(){return b}),n.d(t,"h",function(){return h}),n.d(t,"j",function(){return I}),n.d(t,"b",function(){return v}),n.d(t,"a",function(){return O}),n.d(t,"n",function(){return j}),n.d(t,"c",function(){return y}),n.d(t,"o",function(){return C}),n.d(t,"g",function(){return E});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/promise.js"),a=n.n(i),o=n("./src/utils/Browser.js"),r=n("./src/fz-i18n/index.js");function s(e){var t=u(e),n=Object(o.a)().toLowerCase()||"",i=navigator.platform.toLowerCase()||"";switch(t){case"jpeg":case"jpg":case"png":case"gif":case"bmp":case"tiff":case"tif":case"ico":return"ZD-filePicture";case"txt":case"rtf":return"ZD-fileText2";case"pdf":return"ZD-filePdf";case"html":case"htm":case"xhtml":return-1!==n.indexOf("chrome")||-1!==n.indexOf("safari")?"ZD-chrome":-1!==n.indexOf("ie")||-1!==n.indexOf("edge")?"ZD-ie":"ZD-firefox";case"ppt":case"pps":case"odp":case"sxi":case"pptx":return"ZD-ppt";case"rar":case"jar":case"zip":return"ZD-zip3";case"doc":case"docx":case"sxw":case"odt":return-1!==i.indexOf("mac")||-1!==i.indexOf("linux")?"ZD-fileOpenoffice":"ZD-fileWord";case"xml":return"ZD-xml";case"xls":case"xlsx":case"sxc":case"ods":case"csv":case"tsv":return"ZD-fileExcel";case"ics":return"ZD-ics";case"exe":return"ZD-exe";case"sh":case"bin":return"ZD-sh2";case"css":return"ZD-css5";case"mp3":case"wav":case"wma":case"aac":case"m4r":case"ogg":return"ZD-fileMusic";case"mp4":case"mkv":case"mov":case"mpeg":case"flv":case"avi":case"webm":return"ZD-fileVideo";default:return"ZD-unknown"}}function c(e){return(e=parseInt(e))<1e3?e+" Bytes":e<1e6?(e/1e3).toFixed(1)+" KB":e>=1e6?(e/1e6).toFixed(1)+" MB":void 0}function u(e){return e&&-1!=e.indexOf(".")?e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase():""}function l(e){var t=u(e);return/jpeg|jpg|png|gif|bmp|ico/i.test(t)}function d(e){var t=u(e);return/mp3|wav|ogg/i.test(t)}function m(e,t){var n={inValidArray:[],validArray:[]};if(t+e.length>10)return n.isCountExceeds=!0,n;for(var i=0;i<e.length;i++){var a=e[i],o=a.name,r=a.size;f(o)?n.inValidArray.push({isUnSupported:!0}):b(o)?n.inValidArray.push({isFileNameSizeInvalid:!0}):0===a.size?n.inValidArray.push({isEmpty:!0}):g(r)?n.inValidArray.push({isAttachSizeExceeded:!0}):n.validArray.push(a)}return n}function p(e,t,n,i){if(t+e.length>10)i(r.h.getI18NValue("support.attachments.count.exceeds",[10]));else for(var a=0;a<e.length;a++){var o=e[a],s=o.name,c=o.size;if(f(s))i(r.h.getI18NValue("support.community.attachmentcontent.extensionnotpermitted"));else if(b(s))i(r.h.getI18NValue("support.comments.attachment.fileNameSizeLimitation"));else if(0!==o.size)if(g(c))i(r.h.getI18NValue("support.feedback.uploaded.file.exceeds.20mb"));else{var u=new FormData;u.append("file",o),n&&n(u)}else i(r.h.getI18NValue("support.request.empty.attachment.message"))}}function f(e){var t=e.split(".").pop().toLowerCase();return-1!==["ade","adp","bat","chm","cmd","com","cpl","exe","hta","ins","isp","jar","lib","lnk","mde","msc","msp","mst","pif","scr","sct","shb","sys","vb","vbe","vxd","wsc","wsf","wsh","jse","vbs"].indexOf(t)}function b(e){return e.length>100}function g(e){return e>20971520}function h(e){var t=0;return e.forEach(function(e){t+=parseInt(e.size)}),t}function I(e,t){return!(!(null!==e.types||e.files&&e.files.length>0)||t.fromPaste||!(e.files&&e.files.length>0||(e.types.indexOf?-1!==e.types.indexOf("Files"):e.types.contains("application/x-moz-file"))||"Files"===e.types[0]))}function v(e,t,n){var i={};i.previewData=t.filter(function(e){return!e.isPreview&&(l(e.name)||d(e.name))}),i.previewData.filter(function(t,n){t.id===e&&(i.selectedIndex=n)}),n&&n(i)}function O(e,t,n){var i=e.indexOf("/api"),a=e;return i>-1&&(a=e.slice(i,e.length),a+="?orgId="+t+(n?"&inline=true":"")),a}function j(e,t){window.open(O(e,t,!0))}function y(e,t){window.location.href=O(e,t,!1)}function C(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=e.length,u=[],l=[],d=0;if(i&&c>i-n){var m=r.h.getI18NValue("support.attachments.count.exceeds",[i]);return a.a.resolve({isError:!0,errorI18N:m})}for(var p=0;p<c;p++){var g=e[p],h=g||{},I=h.size,v=void 0===I?0:I,O=h.name,j=void 0===O?"":O;if(d+=v,f(j)){var y=r.h.getI18NValue("support.community.attachmentcontent.extensionnotpermitted");u.push({errorI18N:y,fileName:j,errorType:"fileType"})}else if(b(j)){var C=r.h.getI18NValue("support.comments.attachment.fileNameSizeLimitation");u.push({errorI18N:C,fileName:j,errorType:"fileNameSize"})}else if(0===v){var E=r.h.getI18NValue("support.request.empty.attachment.message");u.push({errorI18N:E,fileName:j,errorType:"emptyFile"})}else l.push(g)}if(!l.length){if(1===u.length){var _=u[0].errorI18N;return a.a.resolve({isError:!0,errorI18N:_})}var T=r.h.getI18NValue("support.unable.to.process.your.request");return a.a.resolve({isError:!0,errorI18N:T})}if(0===d){var k=r.h.getI18NValue("support.request.empty.attachment.message");return a.a.resolve({isError:!0,errorI18N:k})}if(d+s>1024*o*1024){var A=r.h.getI18NValue("support.attachments.size.limit.exceeds",[o]);return a.a.resolve({isError:!0,errorI18N:A})}for(var N=[],S=[],R=[],P=[],w=function(e){var n=l[e];if(t){var i=new FormData;i.append("file",n);var a=e,o=t(i,n,a).then(function(e){var t=(e.data||{}).data,n=void 0===t?{}:t,i=n.id;i&&(N[a]=n,S[a]=i)},function(t){var i=n.name,a=r.h.getI18NValue("support.unable.to.process.your.request");return P.push(e),u.push({errorI18N:a,fileName:i,errorType:"apiError"}),t});R.push(o)}},D=0;D<l.length;D++)w(D);var L={uploadFiles:N,inValidFiles:u,isError:!1,uploadFileIds:S,inValidFilesIndex:P};return a.a.all(R).then(function(){return S.length?L:{isError:!0,errorI18N:r.h.getI18NValue("support.unable.to.process.your.request")}})}function E(e,t){var n=e.name;return{index:t,isPreview:!0,size:e.size,name:n,href:URL.createObjectURL(e)}}},"./src/wms/TicketListActions.js":function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return p});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),r=n.n(o),s=n("./src/reducers/selector.js"),c=n("./src/constants/index.js"),u=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),l=n("./src/wms/common.js"),d=n("./src/tickets/reducers/ticketSelector.js");function m(e){return{type:"CLEAR_WMS_LIST_SUCCESS",data:e}}function p(e,t,n,i){try{var o=e.operations||{},m=e.svCount,p=Object(s.t)(t),g=r()({},e,{meta:Object(l.a)(e.meta,i)});!function(e,t,n){var i=e.meta;if(i){var a=Object(u.b)(i,Object(u.c)(c.R.TICKET_L,{mapping:{contact:Object(u.c)(c.R.CONTACT_L,{mapping:{account:Object(u.c)(c.R.ACCOUNT_L)}})}}));n({type:"WMS_META_SUCCESS",data:a,moduleName:c.R.TICKET_L})}}(g,0,n),o.delete&&o.delete[p]&&f(g,t,n),o.add&&o.add[p]&&b(g,t,n),o.update&&o.update[p]&&function(e,t,n,i){var o=e.meta.id,c=e.operations||{},u=Object(s.t)(t),l=Object(s.nb)(t);if(-1!==c.update[u].indexOf(l)){var m=Object(d.b)(t),p=m.list,g=void 0===p?[]:p,h=-1===g.indexOf(o);if(h){var I=r()({},e),v={meta:I.meta,module:I.module,operations:{delete:a()({},u,[l])}};f(v,i(),n);var O={meta:I.meta,module:I.module,operations:{add:a()({},u,[l])}};b(O,i(),n)}}}(g,t,n,i),o.generalChanges&&function(e,t,n,i){var o=e.meta,c=e.operations||{},u=Object(s.t)(t),l=Object(s.nb)(t),m=c.generalChanges,p=-1===Object(d.b)(t).list.indexOf(o.id);if(-1!==m.indexOf(u)&&p){var g=r()({},e),h={meta:g.meta,module:g.module,operations:{delete:a()({},u,[l])},isGeneralChanges:!0};f(h,i(),n);var I={meta:g.meta,module:g.module,operations:{add:a()({},u,[l])},isGeneralChanges:!0};b(I,i(),n)}}(g,t,n,i),m&&m[p]&&function(e,t,n){var i=Object(s.t)(t),a=e.svCount[i];n({type:"WMS_TICKETS_STARREDVIEW_COUNT_SUCCESS",data:{deptId:i,count:a,moduleName:c.R.TICKET_L}})}(g,t,n)}catch(e){console.log("ticketList wms update exception ====> ",e)}}function f(e,t,n){var i=e.meta,a=e.operations||{},o=e.isGeneralChanges,r=Object(s.t)(t),u=Object(s.nb)(t);(-1!==(a.delete?a.delete[r]:[]).indexOf(u)||o)&&n({type:"WMS_LIST_DELETE_SUCCESS",data:{id:i.id,viewId:u,deptId:r,moduleName:c.R.TICKET_L}})}function b(e,t,n){var i=e.meta,a=e.operations||{},o=e.isGeneralChanges,r=Object(s.t)(t),u=a.add?a.add[r]:[],l=Object(s.nb)(t);if(-1!==u.indexOf(l)||o){var m=function(e,t,n){Object(s.t)(t),Object(s.nb)(t);var i=t.module.ticket,a=Object(d.b)(t),o=a.preference,r=a.list,u=e.meta;if(-1!==r.indexOf(u.id))return r;var l=o.sortBy,m=!o.sorting,p=m?0:r.length,f=u.ticketNumber,b=u.createdTime,g=new Date(b).getTime(),h=u.customerResponseTime,I=new Date(h).getTime(),v=u.dueDate;r.some(function(e,t){var n=i[e];if(l===c.w.SORT_TICKETNUMBER){var a=n.ticketNumber;if(m){if(parseInt(a)<parseInt(f))return p=t,!0}else if(parseInt(a)>parseInt(f))return p=t,!0}else if(l===c.w.SORT_RECENTTHREAD){var o=n.customerResponseTime,r=new Date(o).getTime();if(m){if(r<I)return p=t,!0}else if(r>I)return p=t,!0}else if(l===c.w.SORT_CREATEDTIME){var s=n.createdTime,u=new Date(s).getTime();if(m){if(u<g)return p=t,!0}else if(u>g)return p=t,!0}else if(l===c.w.SORT_DUEDATE){var d=n.dueDate;return!(d&&!v)}});var O=r.slice();return O.splice(p,0,u.id),O}(e,t);n({type:"WMS_LIST_ADD_SUCCESS",data:{id:i.id,viewId:l,deptId:r,ticketList:m,moduleName:c.R.TICKET_L}})}}},"./src/wms/TicketQueueActions.js":function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"b",function(){return h});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/keys.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),r=n.n(o),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),c=n.n(s),u=n("./src/reducers/selector.js"),l=n("./src/constants/index.js"),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),m=n("./src/wms/common.js"),p=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),f=n.n(p),b=l.q.QUEUE_INFO;function g(e){return{type:"UPDATE_WMS_QUEUE_TICKETS",data:e}}function h(e,t,n,i){try{var a=e.operations||{},o=e.svCount,s=Object(u.t)(t),p=c()({},e,{meta:Object(m.a)(e.meta,i)});!function(e,t,n){var i=e.meta;if(i){var a=Object(d.b)(i,Object(d.c)(l.R.TICKET_L,{mapping:{contact:Object(d.c)(l.R.CONTACT_L,{mapping:{account:Object(d.c)(l.R.ACCOUNT_L)}})}}));n({type:"WMS_META_SUCCESS",data:a,moduleName:l.R.TICKET_L})}}(p,0,n),a.delete&&a.delete[s]&&v(p,t,n),a.add&&a.add[s]&&I(p,t,n),a.update&&a.update[s]&&function(e,t,n,i){e.meta;var a=e.operations||{},o=Object(u.t)(t),s=Object(u.nb)(t);if(-1!==a.update[o].indexOf(s)){var l=c()({},e),d={meta:l.meta,module:l.module,operations:{delete:r()({},o,[s])}};v(d,i(),n);var m={meta:l.meta,module:l.module,operations:{add:r()({},o,[s])}};I(m,i(),n)}}(p,t,n,i),a.generalChanges&&function(e,t,n,i){var a=e.meta,o=e.operations||{},s=Object(u.t)(t),l=Object(u.nb)(t),d=o.generalChanges,m=Object(u.D)(t),p=i().queue[s][m],f=O(a.id,p);if(-1!==d.indexOf(s)&&f){var b=c()({},e),g={meta:b.meta,module:b.module,operations:{delete:r()({},s,[l])},isGeneralChanges:!1};v(g,i(),n);var h={meta:b.meta,module:b.module,operations:{add:r()({},s,[l])},isGeneralChanges:!0};I(h,i(),n)}}(p,t,n,i),o&&o[s]&&function(e,t,n){var i=Object(u.t)(t),a=e.svCount[i];n({type:"WMS_TICKETS_STARREDVIEW_COUNT_SUCCESS",data:{deptId:i,count:a,moduleName:l.R.TICKET_L}})}(p,t,n),n({type:"WMS_TICKET_META_SUCCESS",data:Object(d.b)(p.meta,Object(d.c)(l.R.TICKET_L,{mapping:{contact:Object(d.c)(l.R.CONTACT_L,{mapping:{account:Object(d.c)(l.R.ACCOUNT_L)}})}}))})}catch(e){console.log("ticketQueue wms update exception ====> ",e)}}function I(e,t,n){var i=e.meta,a=e.operations||{},o=e.isGeneralChanges,r=Object(u.D)(t),s=Object(u.t)(t),c=Object(u.nb)(t),d=a.add?a.add[s]:[];t.queue[s][r];if(-1!==d.indexOf(c)||o){var m=function(e,t,n){var i="",a=Object(u.t)(t),o=t.queue[a][n],r=o.selectedSlots,s=b.OTHER_TICKETS,c=t.module.ticket;if(n===l.R.Q_STATUS){var d=e.status;i=-1===r.indexOf(d)?s:d}else if(n===l.R.Q_DUE)i=function(e,t){var n=e?parseInt(e):void 0,i=l.q[l.R.Q_DUE];if(t.splice(t.indexOf(i.API_NO_DUE),1),t[t.indexOf(i.API_OVER_DUE)]=i.OVER_DUE,void 0===n||""===n)return i.API_NO_DUE;var a="";return t.some(function(e,i){if(e=parseInt(e),n<=e||n===e||i+1==t.length&&n>=e)return a=e,!0}),a===i.OVER_DUE?i.API_OVER_DUE:a}(e.due,o.selectedSlots.slice());else if(n===l.R.Q_CRM)i=e.contact.crmType;else if(n===l.R.Q_PRIORITY){var m=e.priority;i=-1===r.indexOf(m)?s:m}var p=f()("slotsInfo."+i,o)||{tickets:[]},g=function(e,t,n){var i=e.tickets,a=void 0===i?[]:i,o=t.dueDate,r=t.customerResponseTime,s=""!==o,c=j(o,r);if(0===a.length)return 0;var u=-1;return a.some(function(e,t){var i=n[e];if(i){var a=i.dueDate,o=i.customerResponseTime;if(s){if(""===a)return u=t,!0;var l=j(a,o);if(l&&l>c)return u=t,!0}else if(""===a&&o<r)return u=t,!0}}),u}(p,e,c),h=p.tickets.slice();(-1!==g||h.length<10)&&h.splice(g,0,e.id);return{slotName:i,slotTickets:h}}(i,t,r);n({type:"WMS_QUEUE_ADD_SUCCESS",data:{id:i.id,viewId:c,deptId:s,slotTickets:m.slotTickets,slotName:m.slotName,queueName:r,moduleName:l.R.TICKET_L}})}}function v(e,t,n){var i=e.meta,a=e.operations||{},o=e.isGeneralChanges,r=Object(u.D)(t),s=Object(u.t)(t),c=Object(u.nb)(t),d=a.delete?a.delete[s]:[],m=t.queue[s][r];(-1!==d.indexOf(c)||o)&&n({type:"WMS_QUEUE_DELETE_SUCCESS",data:{queueName:r,slotName:O(i.id,m),id:i.id,viewId:c,deptId:s,moduleName:l.R.TICKET_L}})}function O(e,t){var n="",i=t.slotsInfo;return a()(i).some(function(t,a){for(var o=i[t].tickets,r=0;r<o.length;r++)if(o[r]===e)return n=t,!0}),n}function j(e,t){var n=new Date(e).getTime(),i=new Date(t).getTime(),a=""+((n=n>b.DEFAULT_MIN_DUEDATE?n:b.DEFAULT_MIN_DUEDATE)-b.MIN_DUEDATE),o=""+(i=i?b.MAX_CUST_RESP_TIME-i/1e3:0);return o=(o=0===o?b.DEFAULT_CUST_RESP_TIME_STRING:o).padStart(10,"0"),a.concat(o)}},"./src/wms/action.js":function(e,t,n){"use strict";n.r(t);var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),a=n.n(i),o=n("./src/actions/index.js"),r=n("./src/reducers/selector.js"),s=n("./src/fz-i18n/index.js"),c=function(){},u=void 0,l=void 0;c.setMetaInfo=function(e,t){u=e,l=t},c.getSubscribedList=function(){if(d.isPubSubConnected)return PubSubApi.getSubscribedList()},c.isSubscribed=function(e){if(d.isPubSubConnected)return PubSubApi.isSubscribed(e)},c.subscribe=function(e,t){var n=c.generatePskey(e,t,d.COLLISIONKEY);if(d.isPubSubConnected){var i=c.isSubscribed(n);n.indexOf(d.COLLISIONKEY)>-1&&!i&&d.retryCount<3&&!d.keysWithSubscribeCallInitiated[n]&&(d.keysWithSubscribeCallInitiated[n]=1,c.getSubscriptionParamsAndSubscribe(n,d.retryCount,e,t,d.COLLISIONKEY))}},c.generatePskey=function(e,t,n,i){if(n==d.COLLISIONKEY)return c.getPskey(e,t,n)},c.getSubscriptionParamsAndSubscribe=function(e,t,n,i,a){c.parsePskey(e,n,i,a);var d="action=getSubscriptionParams&entityId="+i+"&pskeyText="+a+"&userdepid="+Object(r.t)(u()),m=Object(r.U)(u());l(Object(o.r)("/support/"+m+"/PubSub.do",d)).then(function(t){var n=t.data.data;if(0,null!=n&&"success"==n.status){var i=n.subscriptionParams;PubSubApi.subscribe(e,i.psuri,i.configuration,"",i.authtype,i.authid)}else l(Object(o.Q)({type:"alert",message:s.h.getI18NValue("support.label.collision.detection.error")}))})},c.getPskey=function(e,t,n,i){if(n===d.COLLISIONKEY){var a=e+"_"+t+"_"+n;return Object(r.Fb)(u())&&(a+=d.DOMAINMAPPED),a}},c.parsePskey=function(e,t,n,i){var a=e.split("_");if(3===a.length&&e.indexOf(d.COLLISIONKEY)>-1){t=a[0],n=a[1];return(i=a[2]).endsWith(d.DOMAINMAPPED)&&(i=i.substring(0,i.length-d.DOMAINMAPPED.length)),c.getPskey(t,n,i)}},c.unSubscribe=function(e){d.isPubSubConnected&&(e.indexOf(d.COLLISIONKEY)>-1&&void 0===d.keysWithUnsubscribeCallInitiated[e]&&c.isSubscribed(e)&&(PubSubApi.unSubscribe(e),d.keysWithUnsubscribeCallInitiated[e]=1))};var d=function(){};d.COLLISIONKEY="collisionKey",d.retryCount=0,d.keysWithSubscribeCallInitiated={},d.DOMAINMAPPED="DM",d.currCaseId="",d.prevCaseId="",d.keysWithUnsubscribeCallInitiated={},d.userListInitiated={},d.userLeft=function(e){var t=c.getSubscribedList(),n="";for(var i in t)(n=t[i]).indexOf(e+"_collisionKey")>-1&&c.unSubscribe(n);"undefined"!=typeof Telephony&&Telephony&&Telephony.Notification&&Telephony.Notification.disableCallPPAssociateBtn()},d.clearCollisionTempStorage=function(){d.retryCount=0};var m=n("./src/wms/TicketListActions.js"),p=n("./src/wms/TicketQueueActions.js"),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/keys.js"),b=n.n(f),g=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),h=n.n(g),I=n("./src/utils/Common.js"),v=n("./src/constants/index.js"),O=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/simple-normalizr/es/index.js"),j=n("./src/actions/RealTimeActions.js"),y=n("./src/actions/BluePrintActions.js"),C=n("./src/actions/AgentAction.js"),E=n("./src/tickets/actions/form/index.js"),_=n("./src/wms/common.js"),T=["contactId","assigneeId","teamId","blueprint","sentiment","customerResponseTime","threadCount"];function k(e,t,n,i){var c=e.meta,u=e.dvMeta,l=e.actionBy,d=e.modifiedFields,f=e.userType;c=Object(_.a)(c,i);var g=function(){var m=t.myInfo.id;if(!Object(I.H)(u)&&m!=l){var p=c.id;if("TRASH"==u.eventType||"SPAM_DELETE"==u.eventType){var g=t.collidingData[p];g=h()({},g,{isDeleted:!0,actionBy:l}),n(Object(j.n)(g))}else if("bpRevoked"==u.eventType)n(Object(j.j)(p));else if("MERGE"==u.eventType||"SPLITTED_REQUEST"==u.eventType)return void n(Object(j.j)(p))}if(c){var C=c.id;if((C==CollisionUtil.currCaseId||C==function(e){return e.routing.paramMap.moduleId}(t))&&d){if(l&&l!=m)if(d.includes("departmentId")){var _=Object(r.t)(t),k=c,N=k.departmentId,S=k.ticketNumber,R=t.collidingData,P=t.myInfo,w=t.module;R=R[C];var D=P.associatedDepartmentIds.includes(N),L=w.department[w.ticket[C].departmentId].name,$=w.department[N].name,M=N==_;if(R=h()({},R,{isDepChanged:!0,toDepId:N,toDepName:$,fromDepName:L,actionBy:l,haveMoveDepPer:D,isSameDep:M}),n(Object(j.n)(R)),M){var U=t.module.agent[l]||{},z=U.name,x=U.firstName,q=void 0===x?"":x,F=U.lastName,V=void 0===F?"":F,B=z||Object(I.e)(q,V),K=t.moduleMeta.tickets.singularLabel.toLowerCase();n(Object(o.Q)({type:"success",message:s.h.getI18NValue("support.label.collision.detection.ticket.movedept.msg",[B,K,S,$,L])}))}}else if(d.includes("blueprint")&&!a()("dvMeta.eventType",e))n(Object(y.c)(C));else{!function(e,t,n,i,a,o){var r=o(),c=r.myInfo,u=r.module,l=r.moduleMeta,d=u.ticket[t].statusType,m=n.statusType,p=l.tickets.singularLabel.toLowerCase(),f=[],g=!1;e.forEach(function(e){if("contactId"==e)f=function(e,t){var n=[],i=t.id,a=t.contact,o=e.module,r=e.myForm,s=o.ticket[i].layoutId,c=r.ticketFields[s],u=c.fieldDetails,l=c.fieldMapper;return b()(a).map(function(e){if("id"!=e&&"crmType"!=e&&"isSpam"!=e)if("account"==e){var i=u[l.accountId].displayLabel;n.push({fieldName:i,fieldValue:t.contact.account.accountName})}else if("lastName"==e&&!e.firstName||e.lastName){var o=a.firstName,r=void 0===o?"":o,s=a.lastName,c=void 0===s?"":s,d=Object(I.e)(r,c),m=u[l.contactId].displayLabel;n.push({fieldName:m,fieldValue:d})}else if(l[e]){var p=u[l[e]].displayLabel;n.push({fieldName:p,fieldValue:t.contact[e]})}}),n}(r,n);else{if(!("assigneeId"!=e&&"teamId"!=e||g)){var o=function(e,t,n,i,a,o){var r=o.assigneeId,c=o.teamId,u=e.module,l=u.agent,d=u.teams,m=u.ticket[n],p=m.assigneeId,f=m.teamId,b=null;if(p!=r||f!=c){var g=l[p],h=g||{},v=h.name,O=h.firstName,j=void 0===O?"":O,y=h.lastName,C=void 0===y?"":y,E=v||Object(I.e)(j,C),_=E;if(f){var T=d[f].name;_=p?E+"/"+T:T}if(r||c){var k="";if(o.assignee){var A=o.assignee;k=A.name;var N=A.firstName,S=A.lastName;k=k||Object(I.e)(N,S)}var R=k;if(c){var P=o.team.name;R=r?k+"/"+P:P}b=r!=a||c?p||f?p!=t||c?r!=t||c?s.h.getI18NValue("support.collision.reassign.ticket.from.other",[i,R,_]):s.h.getI18NValue("support.collision.reassign.ticket.toyou",[i]):s.h.getI18NValue("support.collision.reassign.ticket",[i,R]):r!=t||c?s.h.getI18NValue("support.collision.assign.ticket",[i,R]):s.h.getI18NValue("support.collision.assign.ticket.toyou",[i]):s.h.getI18NValue("support.label.collision.detection.owner.selfassign",[i])}else b=p!=t||c?s.h.getI18NValue("support.collision.unassign.ticket",[i,_]):s.h.getI18NValue("support.collision.unassign.ticket.from.you",[i])}return b}(r,c.id,t,p,i,n);return a(Object(j.l)(t,{message:o,actionBy:i,showNotification:!1})),void(g=!0)}if("status"==e&&m!=d){var u=function(e,t){return"Open"==t?s.h.getI18NValue("support.label.collision.detection.ticket.reopen",[e]):"Closed"==t?s.h.getI18NValue("support.label.collision.detection.ticket.closed",[e]):s.h.getI18NValue("support.label.collision.detection.ticket.onhold",[e])}(p,m);return void a(Object(j.l)(t,{message:u,actionBy:i,showNotification:!1}))}if("isSpam"==e){var l=n[e]?s.h.getI18NValue("support.label.collision.detection.mark.spam",[p]):s.h.getI18NValue("support.label.collision.detection.mark.notspam",[p]);return void a(Object(j.l)(t,{message:l,actionBy:i,showNotification:!1}))}}if("status"==e)f.push({fieldName:s.h.getI18NValue("label.request.status"),fieldValue:n[e]});else if("dueDate"==e&&n[e])f.push({fieldName:s.h.getI18NValue("crm.tasks.duedate"),fieldValue:A(n[e])});else if("responseDueDate"==e&&n[e])f.push({fieldName:s.h.getI18NValue("support.labal.respose.due"),fieldValue:(E=n[e],s.h.userDateFormat(E,{today:"["+s.h.getI18NValue("support.common.due.today")+"] hh:mm A",tomorrow:"["+s.h.getI18NValue("support.common.due.tomorrow")+"] hh:mm A",others:function(){return"DD MMM YYYY hh:mm A"}},"","",!0))});else if("productId"==e&&n.product){var h=r.module,v=r.myForm,O=h.ticket[n.id].layoutId,y=v.ticketFields[O],C=y.fieldDetails[y.fieldMapper.productId].displayLabel;f.push({fieldName:C,fieldValue:n.product.productName})}else e.startsWith("cf_")?f.push(function(e,t,n){var i=e.module,a=e.myForm,o=i.ticket[t.id].layoutId,r=a.ticketFields[o],c=r.fieldDetails,u=r.fieldMapper,l=c[u[n]],d=l.displayLabel,m=l.type,p=t.cf[n];return"Date"!=m&&"DateTime"!=m||(p=s.h.userDateFormat(new Date(p),{},"lateby","left",!1,function(){return"Date"==m?"DD MMM YYYY":"DD MMM YYYY hh:mm A"})),{fieldName:d,fieldValue:p}}(r,n,e)):n[e]&&!T.includes(e)&&f.push({fieldName:e,fieldValue:n[e]});var E}),f.length&&a(Object(j.l)(t,{message:s.h.getI18NValue("support.label.realtime.fieldupdate.user"),actionBy:i,showNotification:!1,modifiedData:f}))}(d,C,c,l,n,i);var W=a()("collidingData["+C+"].collisionUsers",t);W&&W.length||n(Object(j.k)(C))}else if("portalUser"==f){var Z=t.moduleMeta.tickets.singularLabel.toLowerCase();if(d.includes("status")&&"Closed"==c.statusType)n(Object(o.Q)({type:"success",message:s.h.getI18NValue("support.label.collision.customer.ticket.closed",[Z])}));else if(d.includes("priority"))n(Object(o.Q)({type:"success",message:s.h.getI18NValue("support.label.collision.customer.update.priority",[Z,c.priority])}));else{var H=d[0],G=null;(G=H.startsWith("cf_")?c.cf[H]:c[H])&&n(Object(o.Q)({type:"success",message:s.h.getI18NValue("support.label.collision.customer.update.field",[Z,H,G])}))}}var Y=t.module.ticket[c.id],Q=h()({},Y.cf,c.cf),J=h()({},c,{cf:Q}),X=Object(O.b)(J,Object(O.c)(v.R.TICKET_L,{mapping:{contact:Object(O.c)(v.R.CONTACT_L,{mapping:{account:Object(O.c)(v.R.ACCOUNT_L)}}),assignee:Object(O.c)(v.R.AGENT_L),product:Object(O.c)(v.R.PRODUCT_L),team:Object(O.c)(v.R.TEAMS_L)}}));n({type:"WMS_META_SUCCESS",data:X,moduleName:v.R.TICKET_L});var ee=Y.id,te=Y.departmentId,ne=Y.layoutId;n(Object(E.b)(te,ee,ne,{},"",!0,{},!0))}}};l&&!a()("module.agent["+l+"]",t)?n(Object(C.b)(l,c.departmentId)).then(g):g(),!function(e){if(a()("UIState.peekState.navigationObj.curviewId",e))return!0;return!1}(t)?function(e){if(a()("UIState.peekState.navigationObj.queueName",e))return!0;return!1}(t)&&Object(p.b)(e,t,n,i):Object(m.b)(e,t,n,i)}function A(e){var t=!1;return s.h.userDateFormat(new Date(e),{},"lateby","left",!1,function(e){return"lateby"==e.suffix&&(t=!0),null}),s.h.userDateFormat(e,{today:t?"DD MMM YYYY hh:mm A":"["+s.h.getI18NValue("support.common.due.today")+"] hh:mm A",tomorrow:"["+s.h.getI18NValue("support.common.due.tomorrow")+"] hh:mm A",others:function(){return"DD MMM YYYY hh:mm A"}},"","",!0)}var N=n("./src/telephony/constants/index.js"),S=n("./src/telephony/utils/index.js"),R=N.a.MIDDLEWARE,P=N.a.UPDATE_STATUS,w=N.a.LOGIN_RC,D=function(e,t,n,i){var a=e.module;if("onlineStatus"===a){var o=e.status,r=e.statusText;if(o%100==1){if(UserPhoneStatus.WEB_ONLINE==o&&n({type:"TELEPHONY_C2C",data:!0}),UserPhoneStatus.PH_ONLINE==o){var s=t.routing.urls.detailView.match>0&&"tickets"==t.moduleMapper[t.routing.paramMap.moduleName],c=t.routing.urls.detailView.match>0&&"contacts"==t.moduleMapper[t.routing.paramMap.moduleName];(s||c)&&n({type:"TELEPHONY_C2C",data:!1})}}else o%100==0?(($("#NewRPForm").is(":visible")||$("#contactLeftPanel").is(":visible"))&&SupportUI.DetailView.hideTwilioOutIconRDV(),jQuery("[id='phone_onoff']").find("[id='status_onoffswitch_txt']").text(r).removeClass("zd-tc-onlineclr zd-tc-busyclr").addClass("zd-tc-offlineclr")):o%100!=2&&o%100!=3||(($("#NewRPForm").is(":visible")||$("#contactLeftPanel").is(":visible"))&&SupportUI.DetailView.hideTwilioOutIconRDV(),jQuery("[id='phone_onoff']").find("[id='status_onoffswitch_txt']").text(r).removeClass("zd-tc-offlineclr zd-tc-onlineclr").addClass("zd-tc-busyclr"))}if("ZTI"===a&&Telephony.ZTI.handleCustomMessage(e),"TWI"===a&&("true"==e.updatetwiliostatus?Object(S.phoneStatusMapping)(t.telephony.channelStatus)!==e.twiliostatus&&n({type:""+P,data:Object(S.codeToStatusMapper)(e.twiliostatus,e.ctiname)}):Telephony.Notification.showNotification(e)),"rcOauthResponse"===a&&n({type:R+"/"+w,data:e}),"ctiapi"===a){var u=Object(S.codeToStatusMapper)(e.status,e.ctiname);t.telephony.channelStatus.status!==u.status&&n({type:""+P,data:u})}if("closeNotification"===a)if("rescheduleCall"===e.close_action){var l=e.activityId;$("#unAnswered_"+l).removeClass("show"),setTimeout(function(){$("#unAnswered_"+l).remove(),removeFreezeLayer(!0)},500)}else Telephony.Notification.closeNotification(e.close_action)},L=n("./src/Timer.js"),M=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/slicedToArray.js"),U=n.n(M),z=n("./src/analytics/actions/dashboards/TwilioDashboardAction.js"),x=["offline","online","busy","oncall","acw"],q=function(e,t,n){var i=U()(e.presence,1)[0],a=i.Phone,o=i.userId;if(Object.prototype.hasOwnProperty.call(t,"analytics")&&Object.prototype.hasOwnProperty.call(t.analytics,"phoneAvailability")){for(var r=x[a%100],s=t.analytics.phoneAvailability,c=!1,u=0,l=x.length;u<l;u++)x[u]!==r&&Object.prototype.hasOwnProperty.call(s[x[u]],o)&&(n({type:"CHANGE_AGENT_AVAILABILITY",data:{fromStatus:x[u],toStatus:r,userId:o}}),c=!0);c&&Object(z.b)({departmentId:s.currentDepartmentId}).then(function(e){var t={onlineAgents:Number(e.ONLINE),availableAgents:Number(e.AVAILABLE),onCallAgents:Number(e.ONCALL),acwAgents:Number(e.ACW),busyAgents:Number(e.BUSY),offlineAgents:Number(e.OFFLINE)};n(Object(z.e)(t))})}},F=["metaData","starredViewCount","presence"],V=["mailSendingFailure","channelPreference","activityReminderNotify"];var B=n("./src/feeds/utils.js"),K=n("./src/containers/asyncComponent.js"),W=n("./src/feeds/support.js"),Z=function(){},H=void 0,G=void 0;Z.setMetaInfo=function(e,t){H=e,G=t},Z.serverup=function(){Z.isWMSConnected=!0,Object(W.a)(H,G),Object(B.c)(G,K.Ab),PubSubApi.init()},Z.serverdown=function(){Z.isWMSConnected=!1,CollisionUtil.isPubSubConnected=!1},Z.handleCustomMessage=function(e){console.log("wmsMessage==>",e),(H().currentOrgId==e.zgid||"activityReminderNotify"===e.type||e.Telephony||"channelPreference"===e.messageType)&&function(e,t,n){var i=n.module,a=n.type||n.messageType,o=e();-1!==F.indexOf(a)?-1!==["metaData","starredViewCount"].indexOf(a)&&"Cases"===i?Object(r.Tb)(o)?Object(m.b)(n,o,t,e):Object(r.Ob)(o)?Object(p.b)(n,o,t,e):function(e){return e.routing.urls.detailView.match>0&&"tickets"==e.moduleMapper[e.routing.paramMap.moduleName]}(o)&&k(n,o,t,e):"hqPage"===a?console.log("HQ Page WMS handling..."):"presence"===a&&q(n,o,t):-1!==V.indexOf(a)?(console.log("allPageType"),"mailSendingFailure"==a?t({type:"ADD_EMAIL_FAILURELIST",data:{newItem:n.metadata,deptId:n.depId}}):"channelPreference"===a?"mailStatusUpdated"===n.eventType&&o.channelPreferences.mailStatus!==n.mailStatus&&t({type:"UPDATE_CHANNEL_PREFERENCES_SUCCESS",data:{mailStatus:n.mailStatus}}):"activityReminderNotify"==a&&t({type:"SHOW_REMINDER_POPNOTIFICATION",data:n})):n.Telephony&&D(n,o,t,e),L.a.handleWmsMessage(n)}(H,G,e)};var Y=n("./src/actions/AgentCollisionActions.js"),Q=n("./src/actions/ReplyActions.js"),J=function(){},X=void 0,ee=void 0;function te(e,t){var n=X(),i=null,a=n.moduleMeta.tickets.singularLabel.toLowerCase();(n.collisionNotificationList[e]||[]).forEach(function(e){e.actionBy==t&&"replying"==e.mode&&(i=e.notificationId)}),ee(i?Object(j.h)(e,i):Object(j.l)(e,{message:s.h.getI18NValue("support.label.collision.detection.agent.view.notify",[a]),actionBy:t,showNotification:!1,mode:"userIn"})),ee(Object(j.s)(e,t))}function ne(e){return"comments"==e.routing.paramMap.tabName}function ie(e){var t=c.parsePskey(e);if(t.split("_")[2]===d.COLLISIONKEY){var n=t.split("_")[0],i=t.split("_")[1],a=X(),o=a.routing.paramMap.moduleId;return n==a.currentOrgId&&i==o}return!1}function ae(e,t,n){e.Collaboration=Z,e.CollisionUtil=d,e.PubSubImpl=J,Z.setMetaInfo(t,n),J.setMetaInfo(t,n),c.setMetaInfo(t,n),n(Object(Y.f)())}function oe(e,t){if(2==e.routing.urls.detailView.match&&"tickets"==e.moduleMapper[e.routing.paramMap.moduleName]||a()("routing.location.query.peekId",e)){var n=e.routing.paramMap.moduleId;d.prevCaseId=d.currCaseId,d.currCaseId=n,""!=d.prevCaseId&&d.prevCaseId!=d.currCaseId?(d.userLeft(d.prevCaseId),d.prevCaseId=""):(d.currUserId=e.myInfo.id,c.subscribe(e.currentOrgId,n))}else d.currCaseId&&(d.userLeft(d.currCaseId),d.currCaseId="")}J.setMetaInfo=function(e,t){X=e,ee=t},J.onConnect=function(){d.isPubSubConnected=!0,oe(X())},J.handleUserIn=function(e,t){console.log("userIn")},J.handleSubscribe=function(e){},J.handleUnSubscribe=function(e){var t=c.parsePskey(e).split("_");t[2]===d.COLLISIONKEY&&(delete d.keysWithUnsubscribeCallInitiated[e],delete d.keysWithSubscribeCallInitiated[e],delete d.userListInitiated[t[1]],d.clearCollisionTempStorage())},J.handleUserList=function(e,t){if(ie(e)){var n=c.parsePskey(e).split("_")[1];d.userListInitiated[n]||ee(Object(Y.g)(n)).then(function(e){d.userListInitiated[n]=1;var t=e.data.collisionData.collisionUsers;(void 0===t?[]:t).forEach(function(e){var t=e.userAction,i=e.agentId;"replying"==t&&i!=d.agentId&&ee(Object(j.l)(n,{message:s.h.getI18NValue("support.label.collision.detection.agent.reply"),actionBy:i,showNotification:!0,mode:"replying"}))})})}},J.handleMessage=function(e,t){if(ie(e)){var n=X(),i=c.parsePskey(e).split("_")[1];console.log("msg",t);var a=t.eventType,r=t.actionBy,u=t.userType,l=t.msgType,m=t.commentId,p=t.threadId,f=n.moduleMeta.tickets.singularLabel.toLowerCase();if("commentAdded"==a){if(r!=d.currUserId&&ee("customer"==u?Object(o.Q)({type:"success",message:s.h.getI18NValue("support.label.collision.detection.customer.comment.add")}):Object(j.l)(i,{message:s.h.getI18NValue("support.label.collision.detection.comment.add"),actionBy:r,showNotification:!0})),!Object(I.F)(n,i,m)){var b=ne(n);ee(Object(j.b)(i,m,b))}}else if("commentDeleted"==a){if(r!=d.currUserId&&ee("customer"==u?Object(o.Q)({type:"success",message:s.h.getI18NValue("support.label.collision.detection.customer.comment.delete")}):Object(j.l)(i,{message:s.h.getI18NValue("support.label.collision.detection.comment.delete"),actionBy:r,showNotification:!1})),Object(I.F)(n,i,m)){var g=ne(n);ee(Object(j.d)(i,m,g))}}else if("commentUpdated"==a)r!=d.currUserId&&"customer"==u&&ee(Object(o.Q)({type:"success",message:s.h.getI18NValue("support.label.collision.detection.customer.comment.edit")})),ee(Object(j.o)(i,m));else if("draftUpdated"==a)ee(Object(j.p)(i,p)).then(function(){ee(Object(Q.k)(i))});else if("replied"==a||"draftSaved"==a||"agentForwardedReply"==a||"feedbackAdded"==a){r!=d.currUserId&&("feedbackAdded"==a?ee(Object(o.Q)({type:"success",message:s.h.getI18NValue("support.label.collision.detection.feedback")})):"customer"==u&&ee(Object(o.Q)({type:"success",message:s.h.getI18NValue("support.label.collision.detection.customer.replied")})),"draftSaved"==a?ee(Object(j.l)(i,{message:s.h.getI18NValue("support.label.collision.detection.agent.savedraft"),actionBy:r,showNotification:!1})):"replied"==a&&(te(i,r),ee(Object(j.l)(i,{message:s.h.getI18NValue("support.label.collision.detection.agent.replied",[f]),actionBy:r,showNotification:!0,action:"replied"})))),Object(I.L)(n,i,p)?ee(Object(j.p)(i,p)).then(function(){ee(Object(Q.k)(i))}):ee(Object(j.a)(i,p)).then(function(){ee(Object(Q.k)(i))})}else if("draftDiscarded"==a){Object(I.L)(n,i,p)&&(ee(Object(j.c)(i,p)),setTimeout(function(){ee(Object(Q.k)(i))},100)),r!=d.currUserId&&ee(Object(j.l)(i,{message:s.h.getI18NValue("support.label.collision.detection.agent.discarddraft"),actionBy:r,showNotification:!1}))}else if("ticketCollision"==l)if("chatCreated"==a||"leftChat"==a||"joinedChat"==a||"membersAddedToChat"==a||"groupChatCreated"==a)ee(Object(j.m)(t));else if("replying"==a&&r!=d.currUserId){var h=n.collidingData[i].collisionUsers,v=!1;h.forEach(function(e){var t=e.agentId,n=e.userAction;t==r&&"replying"==n&&(v=!0)}),v||(ee(Object(j.l)(i,{message:s.h.getI18NValue("support.label.collision.detection.agent.reply"),actionBy:r,showNotification:!0,mode:"replying"})),ee(Object(j.u)(i,r)))}else if("userIn"==a&&r!=d.currUserId){var O=n.collidingData[i].collisionUsers,y=!1;(void 0===O?[]:O).forEach(function(e){var t=e.agentId,n=e.userAction;t==r&&"viewing"==n&&(y=!0)}),y||(ee(Object(j.l)(i,{message:s.h.getI18NValue("support.label.collision.detection.agent.view.notify",[f]),actionBy:r,showNotification:!0,noNeedShowinList:!0,mode:"userIn"})),ee(Object(j.r)(t)))}else"userOut"==a&&r!=d.currUserId?(ee(Object(j.l)(i,{message:s.h.getI18NValue("support.label.collision.detection.agent.left.notify",[f]),actionBy:r,showNotification:!0,mode:"userOut"})),ee(Object(j.t)(i,r))):"viewing"==a&&r!=d.currUserId?te(i,r):"idle"==a&&r!=d.currUserId&&ee(Object(j.q)(i,r))}},n.d(t,"setCollaboration",function(){return ae}),n.d(t,"wmsHandleAfterDispatch",function(){return oe})},"./src/wms/common.js":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),a=n.n(i),o=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/keys.js"),r=n.n(o),s=function(e,t){var n=t().ticketUIState.collisionCompressMeta,i=r()(n).reduce(function(t,i){return e[n[i]]?i.split(".").length>1?t=function(e,t,n){for(var i=t.split("."),a=e,o=0;o<i.length;o++)o==i.length-1?e[i[o]]=n:e[i[o]]?e[i[o]]&&(e=e[i[o]]):(e[i[o]]={},e=e[i[o]]);return a}(t,i,e[n[i]]):t[i]=e[n[i]]:i.includes(".")||(t[i]=null),t},{});return e.cf?a()({},i,{cf:e.cf}):i}},"./src/wms/utils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"registerWMS",function(){return a}),n.d(t,"wmsUIReady",function(){return o});n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-dom/index.js");var i=n("./src/index.js");function a(e){var t=e.isSilent,n=e.email,i=e.zuid,a=e.baseDomain,o=e.isDomainMappedPortal;if("undefined"!=typeof WebMessanger){var r=WMSSessionConfig.CHAT|WMSSessionConfig.CHAT_PRESENCE|WMSSessionConfig.PRESENCE_PERSONAL|WMSSessionConfig.CROSS_PRD;WebMessanger.setConfig(r),o&&"zoho.com"!==a&&"localzoho.com"!==a&&(WebMessanger.useSameDomain(),WebMessanger.enableTokenPairAuth()),WebMessanger.setNoDomainChange(),WebMessanger.enableGlobalSearch(),WebMessanger.registerZuid("ZS",i,n,t)}}function o(){WebMessanger.disableWMSStatus(),WebMessanger.disableToggleUI(),Object(i.renderWms)()}},"./src/zia/containers/ziaAsyncComponent.js":function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return c});var i=n("./src/async-handler/asyncComponent.js"),a=n("./src/async-handler/libraryImports.js"),o=Object(i.a)({promise:function(){return Promise.all([n.e(0),n.e(179)]).then(n.bind(null,"./src/zia/containers/ZiaNotificationContainer/ZiaNotificationContainer.js"))}}),r=Object(i.a)({promise:function(){return Object(a.a)().then(function(){return Promise.all([n.e(0),n.e(177)]).then(n.bind(null,"./src/components/zia/zianotifications/ZiaAnomalyChart/ZiaAnomalyChart.js"))})}}),s=Object(i.a)({promise:function(){return Promise.all([n.e(0),n.e(178)]).then(n.bind(null,"./src/zia/containers/ZiaAnomalyList/ZiaAnomalyList.js"))}}),c=Object(i.a)({promise:function(){return Promise.all([n.e(0),n.e(176)]).then(n.bind(null,"./src/zia/containers/ZiaAlertList/ZiaAlertList.js"))}})}}]);