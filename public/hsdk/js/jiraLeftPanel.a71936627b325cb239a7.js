(window.deskappJsonp=window.deskappJsonp||[]).push([[107],{"../components/lib/Button/Button.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=i(n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js")),s=i(n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js")),l=i(n("../components/lib/Button/Button.module.css")),r=n("../components/lib/utils/dummyFunction.js");function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.palette,a=e.disabled,s=e.size,r=e.onClick,i=e.rounded,u=e.status,c=e.children,d=e.isBold,p=e.dataId,f=e.needAppearance,m=e.className,b=e.getRef,g=f?l.default[n.toLowerCase()]+" "+(i?l.default.rounded:"")+"   "+(c?l.default["button_"+s.toLowerCase()]:l.default[s.toLowerCase()]):""+l.default.default;return o.default.createElement("button",{className:(m||"")+" "+g+" "+(d?l.default.bold:"")+"  ","data-id":a?p+"_disabled":p,disabled:a||"loading"===u.toLowerCase(),onClick:r,type:"button",ref:b},c||t,"none"!==u&&f&&o.default.createElement("div",{className:l.default.overlay},o.default.createElement("div",{className:"loading"===u.toLowerCase()?l.default.loading:l.default.success},o.default.createElement("div",{className:l.default.element}))))}}]),t}();t.default=u,u.defaultProps={children:null,dataId:"buttonComp",disabled:!1,isBold:!0,needAppearance:!0,onClick:r.dummyFunction,palette:"primary",rounded:!1,size:"medium",status:"none",text:"Button"},u.propTypes={children:s.default.node,className:s.default.string,dataId:s.default.string,disabled:s.default.bool,getRef:s.default.func,isBold:s.default.bool,needAppearance:s.default.bool,onClick:s.default.func,palette:s.default.oneOf(["plainPrimary","plainSecondary","primary","primaryFilled","danger","dangerFilled","secondary","secondaryFilled","successFilled","info"]),rounded:s.default.bool,size:s.default.oneOf(["small","medium","large","xlarge"]),status:s.default.oneOf(["loading","success","none"]),text:s.default.string},u.propTypesDescription={onClick:" ",text:" ",palette:" ",disabled:" ",size:" ",rounded:" ",status:" ",isBold:" ",children:" "}},"../components/lib/Label/Label.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=r(n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js")),s=r(n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js")),l=r(n("../components/lib/Label/Label.module.css"));function r(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.type,a=e.palette,s=e.size,r=e.clipped,i=e.name,u=e.title,c=e.onClick,d=e.dataId;return o.default.createElement("label",{className:l.default.label+" "+l.default[n]+" "+l.default[s]+" "+l.default[a]+"\n          "+(r?l.default.dotted:"")+" "+(c?l.default.pointer:l.default.cursor),name:i,"data-title":u,"data-id":d,onClick:c},t)}}]),t}();t.default=i,i.defaultProps={clipped:!1,dataId:"label",palette:"default",size:"medium",text:"Label",type:"title"},i.propTypes={clipped:s.default.bool,dataId:s.default.string,name:s.default.string,onClick:s.default.func,palette:s.default.oneOf(["default","primary","secondary","danger","mandatory"]),size:s.default.oneOf(["small","medium","large"]),text:s.default.string,title:s.default.string,type:s.default.oneOf(["title","subtitle"])},i.propTypesDescription={type:" ",size:" ",name:" ",palette:" ",text:" ",id:" ",clipped:" ",title:" "}},"./src/actions/JiraActions.js":function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"g",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"d",function(){return m}),n.d(t,"f",function(){return b});var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),l=n.n(s),r=n("./src/utils/RequestAPI.js"),i=n("./src/utils/Common.js");function u(e){return{types:Object(i.m)("GET_JIRABUG_INFO"),callAPI:function(t){return Object(r.a)("/api/v1/tickets/"+e+"/jiraIssue?isReact=true",!1,{orgId:t.currentOrgId}).get().then(function(t){return{entities:{ticket:l()({},e,{jiraBugInfo:t.issueInfo?t:null})},result:[]}})}}}function c(e,t){return{types:Object(i.m)("CREATE_JIRA"),callAPI:function(n,a){return Object(r.a)("/api/v1/tickets/"+e+"/jiraIssue",!1,{orgId:n.currentOrgId}).post("",t).then(function(e){return e})}}}function d(e){return{types:Object(i.m)("DELINK_JIRABUG"),callAPI:function(t,n){return Object(r.a)("/api/v1/tickets/"+e+"/jiraIssue",!1,{orgId:t.currentOrgId}).del().then(function(t){return{entities:{ticket:l()({},e,{jiraBugInfo:null})},result:[]}})}}}function p(e,t){var n=t.transitionId,a=t.issueStatus,s=t.issueStatusCategory;return{types:Object(i.m)("OPEN_OR_CLOSE_BUG"),callAPI:function(t,i){return Object(r.a)("/api/v1/tickets/"+e+"/jiraIssue/applyTransition",!1,{orgId:t.currentOrgId}).patch("",{transitionId:n}).then(function(t){var n=i().module.ticket[e].jiraBugInfo;return o()(n.issueInfo,{issueStatusCategory:s,issueStatus:a}),{entities:{ticket:l()({},e,{jiraBugInfo:n})},result:[]}})}}}function f(e){return{types:Object(i.m)("GET_PROJECT_FILEBUG_BETA"),callAPI:function(t){return Object(r.a)("/api/v1/jira/projectsFileBugMeta?departmentId="+e,!1,{orgId:t.currentOrgId}).get().then(function(e){return e.projects})}}}function m(e){return{types:Object(i.m)("GET_JIRA_USERS"),callAPI:function(t){return Object(r.a)("/api/v1/jira/users?projectKey="+e,!1,{orgId:t.currentOrgId}).get().then(function(e){return e.data})}}}function b(e,t){var n="startsWith="+t;return e&&(n+="&fieldId="+e),{types:Object(i.m)("GET_SUGGESTION_LABELS"),callAPI:function(e){return Object(r.a)("/api/v1/jiraIssue/labels?"+n,!1,{orgId:e.currentOrgId}).get().then(function(e){return e.labels})}}}},"./src/components/FieldItem/FieldItem.js":function(e,t,n){"use strict";var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),l=n.n(s),r=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),i=n.n(r),u=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),p=n.n(d),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),m=n.n(f),b=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),g=n.n(b),j=n("./src/components/FieldItem/FieldItem.module.css"),h=n.n(j),y=n("../components/lib/Label/Label.js"),_=n.n(y),k=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),I=n.n(k),C=function(e){function t(){return l()(this,t),c()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=(e.status,e.children),a=e.id,o=e.isLocked,s=e.lockedMsg,l=e.dataId;return m.a.createElement("div",{"data-id":l,className:""+(o?h.a.locked:"")},m.a.createElement("div",{className:""+(o?h.a.inline:"")},m.a.createElement(_.a,{size:"small",text:t,type:"title",id:a,clipped:!0})),s?m.a.createElement("span",{className:h.a.lockIcon,"data-title":s},m.a.createElement(I.a,{name:"ZD-locked",isBold:!0})):null,m.a.createElement("div",{className:h.a.ticketForm},n))}}]),t}(m.a.Component);t.a=C,C.defaultProps={status:"data",text:"Label",isLocked:!1,lockedMsg:""},C.propTypes={children:g.a.node,dataId:g.a.string,id:g.a.string,isLocked:g.a.bool,lockedMsg:g.a.string,status:g.a.oneOfType([g.a.string,g.a.bool]),text:g.a.string}},"./src/components/Subtab/jira/JiraLeftPanel/JiraLeftPanel.module.css":function(e,t,n){e.exports={jiraContainer:"zd-jiraleftpanel-jiraContainer zdcef62dc1e6",jiraHead:"zd-jiraleftpanel-jiraHead",titleHead:"zd-jiraleftpanel-titleHead zdc4b505a7b0",bugName:"zd-jiraleftpanel-bugName zdbce71b4599 zdccf2edd024 zdcef62dc1e6",newTab:"zd-jiraleftpanel-newTab",jiraDetails:"zd-jiraleftpanel-jiraDetails zd6063afa107",jiraContent:"zd-jiraleftpanel-jiraContent",jiraFooter:"zd-jiraleftpanel-jiraFooter zdc4b505a7b0",delinkButtom:"zd-jiraleftpanel-delinkButtom"}},"./src/containers/Subtab/JiraLeftPanelContainer/JiraLeftPanelContainer.js":function(e,t,n){"use strict";n.r(t);var a=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),o=n.n(a),s=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),l=n.n(s),r=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),i=n.n(r),u=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),d=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),p=n.n(d),f=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),m=n.n(f),b=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),g=n.n(b),j=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-redux/es/index.js"),h=n("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),y=n.n(h),_=n("./src/actions/JiraActions.js"),k=n("./src/actions/index.js"),I=n("./src/fz-i18n/index.js"),C=n("./src/utils/bind.js"),v=n("./src/components/Subtab/jira/JiraLeftPanel/JiraLeftPanel.module.css"),O=n.n(v),E=n("../components/lib/Layout/index.js"),B=n("./node_modules/@zohodesk/icons/lib/Icon/index.js"),z=n.n(B),x=n("../components/lib/Button/Button.js"),P=n.n(x),N=n("./src/components/FieldItem/FieldItem.js"),w=n("./src/components/Link/Link.js"),S=function(e){function t(e){l()(this,t);var n=c()(this,(t.__proto__||o()(t)).call(this,e));return n.state={},n.openOrCloseBug=n.openOrCloseBug.bind(n),n}return p()(t,e),i()(t,[{key:"openOrCloseBug",value:function(){var e=this;this.setState({actionStatus:"loading"}),this.props.openOrCloseBug().then(function(){e.setState({actionStatus:"none"})},function(){e.setState({actionStatus:"none"})})}},{key:"render",value:function(){var e=this.state.actionStatus,t=void 0===e?"none":e,n=this.props,a=n.haveClosePer,o=n.info,s=void 0===o?{}:o,l=n.isReadOnly,r=n.delinkBug,i=s.issueKey,u=s.issueInfoUrl,c=s.issueTitle,d=s.issueType,p=s.assignee,f=s.reporter,b=s.priority,g=s.issueStatus,j=s.issueStatusCategory;return m.a.createElement(E.Container,null,m.a.createElement(E.Box,{className:O.a.jiraContainer,flexible:!0,scroll:"vertical"},m.a.createElement("div",{className:O.a.jiraHead},m.a.createElement(w.a,{className:O.a.titleHead,href:u,target:"_blank"},m.a.createElement("span",{className:O.a.bugName},i),m.a.createElement("span",{className:O.a.newTab},m.a.createElement(z.a,{isBold:!0,name:"ZD-newtab",size:"14"}))),m.a.createElement("span",{className:O.a.jiraDetails},c)),m.a.createElement("div",{className:O.a.jiraContent},m.a.createElement(N.a,{text:I.h.getI18NValue("support.integ.jira.project")},m.a.createElement("span",null,i.split("-")[0])),m.a.createElement(N.a,{text:I.h.getI18NValue("support.integ.jira.issuetype")},m.a.createElement("span",null,d)),p?m.a.createElement(N.a,{text:I.h.getI18NValue("support.integ.jira.assignee")},m.a.createElement("span",null,p.name)):null,m.a.createElement(N.a,{text:I.h.getI18NValue("support.integ.jira.reporter")},m.a.createElement("span",null,f.name)),m.a.createElement(N.a,{text:I.h.getI18NValue("support.integ.jira.issue.priority")},m.a.createElement("span",null,b.name)),m.a.createElement(N.a,{text:I.h.getI18NValue("support.integ.jira.issue.status")},m.a.createElement("span",null,g)))),l?null:m.a.createElement(E.Box,{className:O.a.jiraFooter},m.a.createElement(P.a,{disabled:!a,onClick:this.openOrCloseBug,palette:"primaryFilled",status:t,text:I.h.getI18NValue("done"==j?"support.integ.jira.reopen.issue":"support.integ.jira.close.issue")}),m.a.createElement("span",{className:O.a.delinkButtom},m.a.createElement(P.a,{onClick:r,palette:"secondary",text:I.h.getI18NValue("support.integ.jira.bug.delink")}))))}}]),t}(m.a.Component),L=S;S.propTypes={delinkBug:g.a.func,haveClosePer:g.a.bool,info:g.a.object,isReadOnly:g.a.bool,openOrCloseBug:g.a.func};var T=function(e){function t(e){l()(this,t);var n=c()(this,(t.__proto__||o()(t)).call(this,e));n.state={haveClosePer:!0};return C.a.apply(n,["openOrCloseBug","checkHaveClosePer"]),n}return p()(t,e),i()(t,[{key:"componentDidUpdate",value:function(e,t){y()("jiraBugInfo.bugStatusCategory",e)!=y()("jiraBugInfo.bugStatusCategory",this.props)&&this.checkHaveClosePer()}},{key:"componentDidMount",value:function(){this.checkHaveClosePer()}},{key:"checkHaveClosePer",value:function(){for(var e=this.props.jiraBugInfo,t=e.issueInfo,n=e.transitionInfo,a="new"==t.issueStatusCategory?"done":"new",o=null,s=0;s<n.length;s++){var l=n[s];a==l.issueStatusCategory&&(o=l)}o?this.setState({haveClosePer:!0,transitionObj:o,transitionId:o.transitionId,transitionStatus:a}):this.setState({haveClosePer:!1})}},{key:"openOrCloseBug",value:function(){var e=this,t=this.props,n=t.ticketId,a=t.openOrCloseBug,o=t.showMessage,s=this.state.transitionObj;return a(n,s).then(function(){"new"==s.issueStatusCategory?o({type:"success",message:I.h.getI18NValue("support.integ.jira.issue.reopened")}):o({type:"success",message:I.h.getI18NValue("support.integ.jira.issue.closed")}),e.checkHaveClosePer()},function(){o({type:"alert",message:I.h.getI18NValue("support.unable.to.process.your.request")})})}},{key:"render",value:function(){var e=this.props,t=e.jiraBugInfo,n=e.isReadOnly,a=e.delinkBug,o=this.state.haveClosePer;return t?m.a.createElement(L,{info:t.issueInfo,isReadOnly:n,haveClosePer:o,delinkBug:a,openOrCloseBug:this.openOrCloseBug}):null}}]),t}(f.Component);T.propTypes={delinkBug:g.a.func,isReadOnly:g.a.bool,jiraBugInfo:g.a.object,openOrCloseBug:g.a.func,showMessage:g.a.func,ticketId:g.a.string};t.default=Object(j.connect)(function(e,t){return{jiraBugInfo:e.module.ticket[t.ticketId].jiraBugInfo}},{openOrCloseBug:_.g,showMessage:k.Q})(T)},"./src/utils/bind.js":function(e,t,n){"use strict";function a(){for(var e=this,t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];n.forEach(function(t){e[t]=e[t].bind(e)})}n.d(t,"a",function(){return a})}}]);