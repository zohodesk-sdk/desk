(window.deskappJsonp=window.deskappJsonp||[]).push([[168],{"./src/components/avatar/AvatarIcon/AvatarIcon.js":function(e,t,a){"use strict";var r=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),n=a.n(r),s=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),o=a.n(s),i=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),c=a.n(i),l=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=a.n(l),d=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),m=a.n(d),p=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),h=a.n(p),b=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),g=a.n(b),f=a("./src/components/avatar/AvatarIcon/AvatarIcon.module.css"),k=a.n(f),T=a("./node_modules/@zohodesk/icons/lib/Icon/index.js"),y=a.n(T),_=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||n()(t)).apply(this,arguments))}return m()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.size,r=e.iconSize,n=e.iconClass,s=e.onClick,o=e.palette,i=e.dataId,c=e.className,l=e.isIconBold;return h.a.createElement("span",{className:k.a.container+" "+k.a[a]+" "+k.a[o]+" "+(c||""),onClick:s,"data-id":"ZD-chEmail1"===t?"autoId_215":"ZD-chPhone"===t?"autoId_885":i},h.a.createElement(y.a,{name:t,size:r,iconClass:k.a["text_"+n]?k.a["text_"+n]:n||null,isBold:l}))}}]),t}(h.a.Component);t.a=_,_.defaultProps={iconSize:"15",name:"ZD-addAgent",palette:"default",size:"medium",isIconBold:!1},_.propTypes={className:g.a.string,dataId:g.a.string,iconClass:g.a.string,iconSize:g.a.string,isIconBold:g.a.bool,name:g.a.string,onClick:g.a.func,palette:g.a.oneOf(["default","primary","secondary","success","danger"]),size:g.a.string}},"./src/components/setup/timetrack/History/TimeTrackHistory.module.css":function(e,t,a){e.exports={container:"zd-timetrackhistory-container",imageCover:"zd-timetrackhistory-imageCover",contentCover:"zd-timetrackhistory-contentCover",date:"zd-timetrackhistory-date",time:"zd-timetrackhistory-time",title:"zd-timetrackhistory-title zdccf2edd024",subContent:"zd-timetrackhistory-subContent",heading:"zd-timetrackhistory-heading",subElement:"zd-timetrackhistory-subElement"}},"./src/containers/Setup/customize/timetrack/History/CustomizeTimeHistory.module.css":function(e,t,a){e.exports={contentCover:"zd-customizetimehistory-contentCover"}},"./src/containers/Setup/customize/timetrack/History/History.js":function(e,t,a){"use strict";a.r(t);var r=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/promise.js"),n=a.n(r),s=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),o=a.n(s),i=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=a.n(i),l=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/classCallCheck.js"),u=a.n(l),d=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/createClass.js"),m=a.n(d),p=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=a.n(p),b=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/inherits.js"),g=a.n(b),f=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),k=a.n(f),T=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react-redux/es/index.js"),y=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/prop-types/index.js"),_=a.n(y),E=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),v=a.n(E),S=a("./src/containers/Setup/customize/timetrack/History/CustomizeTimeHistory.module.css"),C=a.n(S),I=a("./src/reducers/selector.js"),A=a("./src/fz-i18n/index.js"),N=a("./src/containers/Setup/customize/timetrack/utils.js"),z=a("./src/actions/setupactions/TimeTrack.js"),j=a("../components/lib/Avatar/Avatar.js"),D=a.n(j),P=a("./src/components/avatar/AvatarIcon/AvatarIcon.js"),V=a("../components/lib/Layout/index.js"),B=a("./src/components/setup/timetrack/History/TimeTrackHistory.module.css"),x=a.n(B),O=function(e){function t(e){return u()(this,t),h()(this,(t.__proto__||c()(t)).call(this,e))}return g()(t,e),m()(t,[{key:"render",value:function(){var e,t=this.props,a=t.avatarIcon,r=t.avatar,n=t.date,s=t.time,o=t.title,i=t.subContent,c=void 0===i?[]:i,l=r||{},u=l.name,d=l.src;return e=c.map(function(e,t){var a=e.heading,r=e.value,n=void 0!==a?k.a.createElement("span",{className:x.a.heading},a):null,s=void 0!==e?k.a.createElement("span",null,r):null;return k.a.createElement("div",{key:t,className:x.a.subElement},n,s)}),k.a.createElement(V.Container,{alignBox:"row",className:x.a.container},k.a.createElement(V.Box,{className:x.a.imageCover},void 0!==a?k.a.createElement(P.a,{name:a,iconSize:"19",size:"xmedium"}):k.a.createElement(D.a,{name:u,src:d})),k.a.createElement(V.Box,{className:x.a.contentCover},k.a.createElement("div",null,n&&k.a.createElement("div",{className:x.a.date},n),s&&k.a.createElement("div",{className:x.a.time},s)),o&&k.a.createElement("div",{className:x.a.title},o),c&&k.a.createElement("div",{className:x.a.subContent},e)))}}]),t}(k.a.Component),H=O;O.propTypes={avatar:_.a.shape({src:_.a.string,name:_.a.string}),avatarIcon:_.a.string,date:_.a.string,subContent:_.a.arrayOf(_.a.shape({heading:_.a.string,value:_.a.string})),time:_.a.string,title:_.a.string};var L=a("./src/components/Drawer/Drawer.js"),M=function(e){function t(e){u()(this,t);var a=h()(this,(t.__proto__||c()(t)).call(this,e));return a.state={isAPICallMade:!1,hasMore:!0},a.loadHistory=a.loadHistory.bind(a),a.updateState=a.updateState.bind(a),a.handleScroll=a.handleScroll.bind(a),a.setScrollElement=a.setScrollElement.bind(a),a.getContent=a.getContent.bind(a),a}return g()(t,e),m()(t,[{key:"setScrollElement",value:function(e){this.scrollElement=e}},{key:"handleScroll",value:function(e){var t=this,a=this.state,r=a.hasMore;!a.isAPICallMade&&r&&e.target.scrollTop+e.target.offsetHeight>e.target.scrollHeight-1&&this.setState({isAPICallMade:!0},function(){t.loadHistory().then(function(e){t.updateState(e.data.data)})})}},{key:"getBillingTypeName",value:function(e){switch(e){case"SPECIFIC_COST_PER_AGENT":return A.h.getI18NValue("support.setup.timetrack.specificcostperagent");case"SPECIFIC_COST_PER_PROFILE":return A.h.getI18NValue("support.setup.timetrack.specificcostperprofile");case"FIXED_COST_FOR_AGENTS":return A.h.getI18NValue("support.setup.timetrack.fixedcostforagents");case"FIXED_COST_FOR_TICKETS":return A.h.getI18NValue("support.setup.timetrack.fixedcostfortickets",moduleMapKey.Cases.changed_i18n_module)}}},{key:"getContent",value:function(e){var t,a=void 0,r=[],n={},s=currentOrg.currencyLocale,i=this.props.profile,c=e.name,l=e.modifiedBy,u=(e.modifiedTime,e.owner),d=e.agentId,m=e.oldValue,p=e.newValue,h=e.profileId,b=e.cost,g=function(e){return v()(e+".name",i)||""};u.map(function(e){o()(n,e)});var f=n[l].name;switch(t={name:n[l].name,src:n[l].photoURL.replace(/'/g,"")},c){case"BILLING_PREFERENCE_ENABLED":a=A.h.getI18NValue("support.setup.timetrack.history.billingpreferenceenabled",f);break;case"BILLING_TYPE_SELECTED":p=this.getBillingTypeName(p),a=A.h.getI18NValue("support.setup.timetrack.history.billingtypeselected",[f,p]);break;case"BILLING_TYPE_CHANGED":m=this.getBillingTypeName(m),p=this.getBillingTypeName(p),a=A.h.getI18NValue("support.setup.timetrack.history.billingTypeChanged",[f,m,p]);break;case"BILLING_PREFERENCE_DISABLED":a=A.h.getI18NValue("support.setup.timetrack.history.billingpreferencedisabled",f);break;case"FIXED_COST_ENTERED":p=""+s+p,a=A.h.getI18NValue("support.setup.timetrack.history.fixedcostentered",[f,p]);break;case"FIXED_COST_EDITED":p=""+s+p,m=""+s+m,a=A.h.getI18NValue("support.setup.timetrack.history.fixedcostedited",[f,m,p]);break;case"AGENT_ADDED":a=A.h.getI18NValue("support.setup.timetrack.history.agentadded",f),r.push({heading:A.h.getI18NValue("support.ctiapi.supportrepname"),value:n[d].name},{heading:A.h.getI18NValue("support.request.timeentry.cost"),value:""+s+b});break;case"AGENT_COST_EDITED":p=""+s+p,m=""+s+m,a=A.h.getI18NValue("support.setup.timetrack.history.agentcostedited",[f,n[d].name,m,p]);break;case"AGENT_DELETED":a=A.h.getI18NValue("support.setup.timetrack.history.agentdeleted",[f,n[d].name]);break;case"PROFILE_ADDED":a=A.h.getI18NValue("support.setup.timetrack.history.profileadded",[f,g(h)]),r.push({heading:A.h.getI18NValue("crm.security.profile.name"),value:g(h)},{heading:A.h.getI18NValue("support.request.timeentry.cost"),value:""+s+b});break;case"PROFILE_COST_EDITED":p=""+s+p,m=""+s+m,a=A.h.getI18NValue("support.setup.timetrack.history.profilecostedited",[f,g(h),m,p]);break;case"PROFILE_DELETED":a=A.h.getI18NValue("support.setup.timetrack.history.profiledeleted",[f,g(h)])}return{title:a,avatar:t,subContent:r}}},{key:"componentWillUnmount",value:function(){var e=this.props;(0,e.initTimeTrackHistory)(e.depId)}},{key:"loadHistory",value:function(){var e=this.state,t=e.from,a=void 0===t?"0":t,r=(e.isAPICallMade,this.props);return(0,r.onScroll)(r.depId,a).then(function(e){return e})}},{key:"updateState",value:function(e,t){var a=this.state.from,r=void 0===a?"0":a,n=0!=e.length&&e.length%50==0,s=Number(r)+50;this.setState({from:s,isAPICallMade:!1,hasMore:n},function(){t&&t()})}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=(t.loadProfiles,t.currentOrgId),r=this.loadHistory(),s=Object(z.d)("0","50",a);n.a.all([r,s]).then(function(t){var a=t[0];e.updateState(a.data.data,function(){e.scrollElement&&e.scrollElement.addEventListener("scroll",e.handleScroll)})})}},{key:"render",value:function(){var e=this;if(void 0!==this.state.from){var t=this.props,a=t.data,r=void 0===a?[]:a,n=t.onClose,s=null,o=this.context.timeZone;o=Object(N.e)(o);var i=r.map(function(t,a){var r,n=t.modifiedTime,o=void 0,i=e.getContent(t),c=i.title,l=i.avatar,u=i.subContent,d=A.h.userDateFormat(new Date(n),{},"lateby","left",!1,function(){return"D MMM YYYY"}),m=A.h.userDateFormat(new Date(n),{},"lateby","left",!1,function(){return"hh:mm A"});return s!=d&&(o=d,s=d),r=m,k.a.createElement("div",{key:a},k.a.createElement(H,{date:o,time:r,title:c,avatar:l,subContent:u}))});return k.a.createElement(k.a.Fragment,null,k.a.createElement(L.c,{title:A.h.getI18NValue("support.setup.timetrack.billinghistory"),onClose:n,paddingSize:"medium"}),k.a.createElement(L.a,{className:C.a.contentCover,eleRef:this.setScrollElement,paddingSize:"small"},i))}return null}}]),t}(k.a.Component);M.contextTypes={timeZone:_.a.string},M.propTypes={currentOrgId:_.a.string,data:_.a.array,depId:_.a.string,initTimeTrackHistory:_.a.func,loadProfiles:_.a.func,onClose:_.a.func,onScroll:_.a.func,profile:_.a.object};t.default=Object(T.connect)(function(e,t){var a=e.routing.paramMap,r=a.setupSubOrDepOrModuleName,n=(a.deptName,a.orgName,Object(I.t)(e,r)),s=v()("departmentSpecificState["+n+"].timetrack",e)||{},o=v()("history.data",s)||[],i=Object(I.T)(e),c=e.module.profile;return{data:o,depId:n,currentOrgId:i,profile:void 0===c?{}:c}},{onClose:z.a,onScroll:z.f,loadProfiles:z.i,initTimeTrackHistory:z.e})(M)},"./src/containers/Setup/customize/timetrack/utils.js":function(e,t,a){"use strict";a.d(t,"d",function(){return d}),a.d(t,"e",function(){return m}),a.d(t,"a",function(){return p}),a.d(t,"c",function(){return h}),a.d(t,"b",function(){return b});var r=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/slicedToArray.js"),n=a.n(r),s=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/helpers/defineProperty.js"),o=a.n(s),i=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/babel-runtime/core-js/object/assign.js"),c=a.n(i),l=a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/selectn/index.js"),u=a.n(l);a("../../../../npm-global/lib/node_modules/@zohodesk/react-cli/node_modules/react/index.js"),a("./src/fz-i18n/index.js");function d(e,t,a,r){var n={},s=void 0;switch(a){case"autoTrackAction":return(s=c()({},u()("ticketPreference.autoTrackAction",r)||{}))[e]=t,n.ticketPreference=c()({},r.ticketPreference,{autoTrackAction:s}),c()({},r,n);case"ticketPreference":return(s=c()({},u()("ticketPreference",r)||{}))[e]=t,c()({},r,{ticketPreference:s});case"activityPreference":return(s=c()({},u()("activityPreference",r)||{}))[e]=t,c()({},r,{activityPreference:s});case"autoTimerPopup":case"taskPopup":case"eventPopup":case"trackModePopup":default:return c()({},r,o()({},e,t))}}function m(e){switch(e){case"SystemV/AST4":case"PRT":return"America/Anguilla";case"SystemV/AST4ADT":return"America/Glace_Bay";case"SystemV/CST6":return"America/Belize";case"SystemV/CST6CDT":return"America/Bahia_Banderas";case"SystemV/EST5":case"EST":return"America/Atikokan";case"SystemV/EST5EDT":case"IET":return"America/Detroit";case"SystemV/HST10":case"HST":return"Pacific/Honolulu";case"SystemV/MST7":case"MST":case"PNT":return"America/Creston";case"SystemV/MST7MDT":return"America/Boise";case"SystemV/PST8":case"SystemV/PST8PDT":case"PST":return"America/Los_Angeles";case"SystemV/YST9":case"SystemV/YST9YDT":case"AST":return"America/Anchorage";case"AET":return"Australia/Broken_Hill";case"AGT":return"America/Buenos_Aires";case"ART":return"Africa/Cairo";case"BET":return"Brazil/East";case"BST":return"Asia/Dhaka";case"CAT":return"Africa/Blantyre";case"CNT":return"Canada/Newfoundland";case"CST":return"CST6CDT";case"CTT":return"Asia/Chongqing";case"EAT":return"Africa/Asmara";case"ECT":return"Antarctica/Troll";case"IST":return"Asia/kolkata";case"JST":return"Asia/Tokyo";case"MIT":return"Pacific/Apia";case"NET":return"Asia/Yerevan";case"NST":return"NZ";case"PLT":return"Asia/Karachi";case"SST":return"Pacific/Guadalcanal";case"VST":return"Asia/Bangkok";default:return e}}function p(e,t,a,r){if(e){var s=e.match(/^([0-9]*|[0-9]*\.[0-9]*)$/g);if(s){var o=e.split("."),i=n()(o,2),c=i[0],l=i[1];return c&&(s=c.length<=a),l&&(s=l.length<=r),s?e:t}return t}return e}function h(e){return"0"==e?"":e}function b(e){if(e){var t=e.split("."),a=n()(t,2),r=a[0],s=a[1];return r=Number(r),s?r+"."+s:""+r}return"0"}}}]);