(window.deskappJsonp=window.deskappJsonp||[]).push([[106],{1054:function(t,e,a){"use strict";a.d(e,"f",function(){return n}),a.d(e,"d",function(){return i}),a.d(e,"a",function(){return d}),a.d(e,"b",function(){return o}),a.d(e,"e",function(){return s}),a.d(e,"c",function(){return u});var r=a(8),n={DASHBOARDS:"dashboards",REPORTS:"reports"},i=31,d=[{id:"BAR",title:r.f.getI18NValue("support.survey.report.chart.bar")},{id:"STACKEDBAR",title:r.f.getI18NValue("crm.dashboard.label.stacked.bar")},{id:"PERCENTAGEBAR",title:r.f.getI18NValue("crm.dashboard.label.precentage.bar")},{id:"PIE",title:r.f.getI18NValue("crm.report.pie")},{id:"FUNNEL",title:r.f.getI18NValue("crm.report.funnel")},{id:"LINE",title:r.f.getI18NValue("crm.report.line")},{id:"MULTIPLELINE",title:r.f.getI18NValue("support.dashboard.label.multiple.line")},{id:"TABLE",title:r.f.getI18NValue("crm.dashboard.label.table")}],o={BAR:"bar",STACKEDBAR:"stackedBar",PERCENTAGEBAR:"percentageBar",PIE:"pie",FUNNEL:"funnel",LINE:"line",MULTIPLELINE:"multiLine",TABLE:"table",TICKETS:"ticket",TASKS:"task",CONTACTS:"contact",ACCOUNTS:"account",EMBEDED:"embed"},s=[{displayLabel:r.f.getI18NValue("crm.report.record.count"),fieldId:"Record Count"}],u=[{label:r.f.getI18NValue("support.survey.last.7days"),id:"LAST_7_DAYS"},{label:r.f.getI18NValue("support.survey.last.30days"),id:"LAST_30_DAYS"},{label:r.f.getI18NValue("Current Week"),id:"THIS_WEEK"},{label:r.f.getI18NValue("Last Week"),id:"LAST_WEEK"},{label:r.f.getI18NValue("Current Month"),id:"THIS_MONTH"},{label:r.f.getI18NValue("Last Month"),id:"LAST_MONTH"},{label:r.f.getI18NValue("Custom"),id:"CUSTOM_IN_DATE"}]},1058:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var r={DASHBOARDS:{DEFAULT:"SET_AS_DEFAULT_DASHBOARD",LIST:"GET_DASHBOARDS_LIST",VIEW:"GET_DASHBOARD",CREATE:"CREATE_DASHBOARD",UPDATE:"UPDATE_DASHBOARD",DELETE:"DELETE_DASHBOARD",FOLDER:{VIEW:"GET_DASHBOARD_FOLDER",CREATE:"CREATE_DASHBOARD_FOLDER",UPDATE:"UPDATE_DASHBOARD_FOLDER",DELETE:"DELETE_DASHBOARD_FOLDER"},COMPONENT:{LIST:"GET_DASHBOARD_COMPONENTS",ADD:"ADD_COMPONENT",UPDATE:"UPDATE_COMPONENT",DELETE:"DELETE_COMPONENT"}},REPORTS:{LIST:"GET_REPORTS_LIST"},GALLERY:"GET_GALLERY_LISTS"}},1105:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var r="all-dashboards"},1167:function(t,e,a){"use strict";a.d(e,"a",function(){return d}),a.d(e,"b",function(){return s}),a.d(e,"c",function(){return u});var r=a(23),n=a.n(r),i=a(1105);function d(t,e){for(var a=[],r=0;r<e.length;r++){var d=e[r].dashboards;a.push.apply(a,n()(d))}return[{departmentId:t,id:i.a,name:"All Dashboards",isCustomizable:!1,dashboards:a}].concat(n()(e))}function o(t,e,a,r,n,i){return r=r>=15?r:24,n=n>=6?n:8,{i:t.toString(),x:e,y:a,w:r,h:n,minW:15,minH:6,maxW:48,maxH:15,componentId:i}}function s(t){return t.forEach(function(e,a){var r=e.style,n=e.id,i=e.position;if(r){var d=r.xCoordinate,s=r.yCoordinate,u=r.width,l=r.height;t[a].layout=o(parseInt(i-1),parseInt(d),parseInt(s),parseInt(u),parseInt(l),n)}else t[a].layout=o(a,a%2*24,1/0,24,8,n)}),t}function u(t){return[{id:"ticket",title:t.tickets.displayLabel},{id:"contact",title:t.contacts.displayLabel},{id:"account",title:t.accounts.displayLabel},{id:"task",title:t.tasks.displayLabel}]}},1255:function(t,e,a){"use strict";var r,n,i,d=a(5),o=a.n(d),s=a(2),u=a.n(s),l=a(32),c=a(188),E=a(1054),S=a(1105),f=a(1058),p=a(1167),A=f.a.DASHBOARDS,D=A.LIST,T=A.FOLDER,L=A.COMPONENT,I=f.a.GALLERY,R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],a=e.data,r=e.type;switch(r){case I+"_SUCCESS":var n=a.data||{},i=n.entities.gallery,d=void 0===i?{}:i;return d;default:return t}},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],a=e.data,r=void 0===a?{}:a,n=e.type;switch(n){case I+"_SUCCESS":var i=r.data||{},d=i.result,o=void 0===d?[]:d;return o;default:return t}},O=f.a.REPORTS.LIST,v=f.a.REPORTS,b=f.a.DASHBOARDS,h=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.type,n=a.data,i=void 0===n?{}:n;if(t===E.f.DASHBOARDS){if(r===b.LIST+"_SUCCESS")return i.data.entities[t];if(r===b.DELETE+"_SUCCESS"){var d=i.dashboardId,o=i.folderId,s=u()({},e),l=s[o]?s[o][E.f.DASHBOARDS]:[],c=s[S.a]?s[S.a][E.f.DASHBOARDS]:[];return l=l.filter(function(t){return t.id!==d}),c=c.filter(function(t){return t.id!==d}),s[o][E.f.DASHBOARDS]=l,s[S.a][E.f.DASHBOARDS]=c,s}if(r===b.FOLDER.DELETE+"_SUCCESS"){var f=i.folderId,p=u()({},e);return p[f]&&delete p[f],p}}else if(t===E.f.REPORTS&&r===v.LIST+"_SUCCESS")return i.data.entities[t];return e}},N=Object(l.c)((r={},o()(r,E.f.DASHBOARDS,h(E.f.DASHBOARDS)),o()(r,E.f.REPORTS,h(E.f.REPORTS)),r)),m=Object(l.c)({dashboardsFoldersList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],a=e.data,r=void 0===a?{}:a,n=e.type;switch(n){case D+"_SUCCESS":return r.data.result||[];case T.DELETE+"_SUCCESS":var i=r||{},d=i.folderId,o=t.filter(function(t){return t!==d});return o||[];default:return t}},module:N,components:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],a=e.data,r=void 0===a?{}:a,n=e.type;switch(n){case L.LIST+"_SUCCESS":var i=r||{},d=i.data,s=void 0===d?[]:d,l=i.dashboardId;return s.length&&(s=Object(p.b)(s)),u()({},t,o()({},l,s));case L.ADD+"_SUCCESS":var c=r||{},E=c.data,S=void 0===E?{}:E,f=c.dashboardId,A=t[f]||[];return A.push(S),t[f]=A,t;case L.UPDATE+"_SUCCESS":var D=r||{},T=D.componentId,I=D.dashboardId,R=D.data,g=void 0===R?{}:R,O=t[I]||[],v=O.findIndex(function(t){return t.id==T});return O[v]=g,t[I]=O,t;case L.DELETE+"_SUCCESS":var b=r||{},h=b.dashboardId,N=b.componentId,m=t[h]||[],C=m.filter(function(t){return t.id!==N});return t[h]=C,t;default:return t}},reportsFoldersList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],a=e.data,r=e.type;switch(r){case O+"_SUCCESS":return a.data.result;default:return t}}}),C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],a=Object(c.a)(m)(t,e);return u()({},a,{galleries:R(t.galleries,e),galleryModule:g(t.galleryModule,e)})},_=a(257),y=a(17),B=Object(_.a)();n="analytics",i=C,B.injectAsyncReducer(n,i),B.dispatch({type:"RE_INIT_DEPARTMENT",data:{deptId:Object(y.r)(B.getState())}})},1501:function(t,e,a){"use strict";a.d(e,"a",function(){return l});var r=a(7),n=a(15),i=a(6),d=a(17),o=a(1058),s=a(1054),u=o.a.REPORTS.LIST;function l(){return{types:Object(i.m)(u),callAPI:function(t){var e=Object(d.r)(t),a="/api/v1/reportFolders?"+("departmentId="+e+"&include=reports,default");return Object(n.a)(a,!1,{orgId:t.currentOrgId}).get().then(function(t){var a=t.data,n=void 0===a?[]:a;return n.length?{data:Object(r.normalize)(n,Object(r.arrayOf)(Object(r.schema)(s.f.REPORTS))),deptId:e}:{data:n,deptId:e}},function(t){return console.log("Getting error in reports list",t),{data:[],deptId:e}})}}}},581:function(t,e,a){"use strict";a.r(e);var r=a(12),n=a.n(r),i=a(9),d=a.n(i),o=a(10),s=a.n(o),u=a(13),l=a.n(u),c=a(14),E=a.n(c),S=a(0),f=a.n(S),p=(a(8),a(1)),A=a.n(p),D=a(26),T=a(19),L=a.n(T),I=a(17),R=(a(1255),a(1054)),g=a(1501),O=function(t){function e(t){d()(this,e);var a=l()(this,(e.__proto__||n()(e)).call(this,t));return a.state={isLoading:!0},a.getList=a.getList.bind(a),a}return E()(e,t),s()(e,[{key:"componentDidMount",value:function(){var t=this;this.props.reportsFoldersList.length?this.setState({isLoading:!1}):this.setState({isLoading:!0},function(){t.getList()})}},{key:"componentDidUpdate",value:function(t,e){var a=this;this.props.deptId!==t.deptId&&this.setState({isLoading:!0},function(){a.getList()})}},{key:"getList",value:function(){var t=this;this.props.getReportsList().then(function(){t.setState({isLoading:!1})})}},{key:"render",value:function(){return f.a.createElement(f.a.Fragment,null,"Waiting for Reports List UI Component")}}]),e}(S.Component);e.default=Object(D.connect)(function(t,e){var a=Object(I.r)(t),r=t.analytics,n=void 0===r?{}:r,i=[],d={};if(void 0!==n[a]){var o=n[a];i=o.reportsFoldersList,d=o.module[R.f.REPORTS]}var s=L()("moduleMeta.reports.singularLabel",t)||"",u=L()("moduleMeta.reports.pluralLabel",t)||"";return{orgName:t.routing.paramMap.orgName,deptName:t.routing.paramMap.deptName,viewName:t.routing.paramMap.viewName,moduleMeta:t.moduleMeta,reportSingModuleName:s,reportsModuleName:u,deptId:a,reportsFoldersList:i,reportsView:d}},{getReportsList:g.a})(O),O.propTypes={dashboardSingModuleName:A.a.string,dashboardsModuleName:A.a.string,deptId:A.a.string,deptName:A.a.string,getReportsList:A.a.func,moduleMeta:A.a.object,orgName:A.a.string,reportsFoldersList:A.a.array,reportsView:A.a.object,viewName:A.a.string}}}]);