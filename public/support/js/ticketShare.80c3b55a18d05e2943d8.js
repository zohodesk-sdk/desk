(window.deskappJsonp=window.deskappJsonp||[]).push([[132],{1044:function(e,t,a){"use strict";var n=a(38),s=a.n(n),r=a(2),i=a.n(r),o=a(11),l=a.n(o),c=a(23),p=a.n(c),u=a(12),d=a.n(u),m=a(9),h=a.n(m),S=a(10),g=a.n(S),f=a(13),D=a.n(f),_=a(14),v=a.n(_),N=a(0),b=a.n(N),E=a(1),k=a.n(E),I=a(26),y=a(154),L=a.n(y),T=a(3),C=a(24),O=a(17);function x(e){return{globalDeptIds:e.departmentOrder,departments:e.module.department}}t.a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.E,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=function(r){function o(e){h()(this,o);var t=D()(this,(o.__proto__||d()(o)).call(this,e));return t.state={listUIState:{from:1,isNext:!1},searchUIState:{from:1,isNext:!1,deptIds:[],searchStr:""},searchStr:"",isFetching:!1},t._isMounted=!1,t.getDeptsListSel=Object(O.Kb)(),t.handleGetDepts=t.handleGetDepts.bind(t),t.handleGetNextDepts=t.handleGetNextDepts.bind(t),t.handleSearchDepts=t.handleSearchDepts.bind(t),t.handleAPI=t.handleAPI.bind(t),t.handleSearchDeptsArray=t.handleSearchDeptsArray.bind(t),t.handleGetDeptsList=t.handleGetDeptsList.bind(t),t.handleLocalDeptsSearch=t.handleLocalDeptsSearch.bind(t),t}return v()(o,r),g()(o,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentDidUpdate",value:function(e){this.props.deptId,e.deptId}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleAPI",value:function(){for(var e=this,t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];var s=a.slice(1,a.length),r=a[0],i=this.state.isFetching,o=this._isMounted;return i?l.a.resolve():(this.setState({isFetching:!0}),r.apply(void 0,p()(s)).then(function(t){return o&&e.setState({isFetching:!1}),t&&204!==t.responseStatus?t:l.a.resolve()},function(t){throw o&&e.setState({isFetching:!1}),t}))}},{key:"handleGetDeptsList",value:function(e){var n=this,s=this.props.getDepartment,r=this.state,o=r.searchStr,c=r.listUIState,p=r.searchUIState,u=this._isMounted,d="NEXT"===e,m=o.replace(/\s+/g,""),h=p.searchStr,S=void 0===h?"":h,g=o.replace(/\s+/g,"").toLowerCase(),f=S.replace(/\s+/g,"").toLowerCase();if(o){if("CURRENT"!==e||g!==f){var D=p.from,_=void 0===D?1:D,v=d?_+a:1;return this.setState({searchUIState:i()({},p,{from:v,isNext:!1})}),this.handleAPI(s,v,a,t,m).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data||{},a=t.result,s=void 0===a?[]:a,r=t.isNext,i=t.from,o=t.searchStr;return n.handleSearchDeptsArray(s,i,r,o,d),e},function(e){throw u&&n.setState({searchUIState:i()({},p,{from:_,isNext:!1})}),e})}return l.a.resolve()}var N=c.from,b=void 0===N?1:N,E=d?b+a:1;return this.setState({listUIState:i()({},c,{from:E,isNext:!1})}),this.handleAPI(s,E,a,t,o).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data||{},a=t.from,s=t.isNext;return u&&n.setState({listUIState:i()({},c,{from:a,isNext:s})}),e},function(e){throw u&&n.setState({listUIState:i()({},c,{from:b,isNext:!1})}),e})}},{key:"handleSearchDeptsArray",value:function(e,t,n,s,r){var i=this.state.searchUIState.deptIds,o=this._isMounted,l=t-1,c=l+(2*a>200?200:2*a),u=r?[].concat(p()(i.slice(0,l)),p()(e),p()(i.slice(c,i.length))):e;o&&this.setState({searchUIState:{deptIds:u,from:t,isNext:n,searchStr:s}})}},{key:"handleGetDepts",value:function(){return this.handleGetDeptsList("CURRENT").then(function(e){return e},function(e){throw e})}},{key:"handleSearchDepts",value:function(e){this.setState({searchStr:e})}},{key:"handleGetNextDepts",value:function(){return this.handleGetDeptsList("NEXT").then(function(e){return e},function(e){throw e})}},{key:"handleLocalDeptsSearch",value:function(){var e=this.state.searchStr,t=this.props,a=t.departments;return t.globalDeptIds.filter(function(t){var n=a[t].name.replace(/\s+/g,"").toLowerCase(),s=e.replace(/\s+/g,"").toLowerCase();return-1!==n.indexOf(s)})}},{key:"render",value:function(){var r=this.state,i=r.searchStr,o=void 0===i?"":i,l=r.listUIState,c=r.isFetching,p=r.searchUIState,u=this.props,d=u.globalDeptIds,m=u.departments,h=o?p:l,S=h.from,g=h.isNext,f=h.deptIds,D=h.searchStr,_=void 0===D?"":D,v=o.replace(/\s+/g,"").toLowerCase(),N=_.replace(/\s+/g,"").toLowerCase(),E=v?N===v?f:n?this.handleLocalDeptsSearch():[]:d,k=this.getDeptsListSel({},{departments:m,departmentsOrder:E.slice(0,S-1+a),isEnabled:t});return b.a.createElement(e,s()({},this.props,{deptsList:k,deptIds:E,getDepts:this.handleGetDepts,getNextDepts:this.handleGetNextDepts,searchString:o,isFetching:c,onSearchDepts:this.handleSearchDepts,isNextDepts:g}))}}]),o}(b.a.Component);return r.propTypes={departments:k.a.object,getDepartment:k.a.func,globalDeptIds:k.a.array},L()(Object(I.connect)(function(e){return x(e)},{getDepartment:C.m})(r),e)}},1292:function(e,t,a){"use strict";a.d(t,"b",function(){return c}),a.d(t,"c",function(){return p}),a.d(t,"a",function(){return u});var n=a(2),s=a.n(n),r=a(3),i=a(15),o=a(6),l=a(7);function c(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c="?status=ACTIVE&isConfirmed=true";return c+="&departmentIds="+e+"&from="+t+"&limit="+a+(n.length>1?"&searchStr=*${searchStr}*":""),{types:Object(o.m)("SHARED_DEPARTMENT_AGENTS"),callAPI:function(e,n){return Object(i.a)("/api/v1/agents"+c,!1,{orgId:e.currentOrgId}).get().then(function(e){var n=e.data.length<a;return s()({},Object(l.normalize)(204!==e.responseStatus?e.data:[],Object(l.arrayOf)(Object(l.schema)(r.L.AGENT_L))),{from:t,noMoreData:n})})}}}function p(e){return{type:"OPEN_TICKETSHARE_FORM",data:e}}function u(){return{type:"CLOSE_TICKETSHARE_FORM"}}},1777:function(e,t,a){e.exports={continerDiv:"TicketShare-module__continerDiv",headerDiv:"TicketShare-module__headerDiv",headingDiv:"TicketShare-module__headingDiv common-module__dotted common-module__oflow common-module__ellipsis",iconsList:"TicketShare-module__iconsList",iconInfo:"TicketShare-module__iconInfo",iconClose:"TicketShare-module__iconClose",shareParagraph:"TicketShare-module__shareParagraph",learnMore:"TicketShare-module__learnMore",inputArea:"TicketShare-module__inputArea",shareList:"TicketShare-module__shareList",listDiv:"TicketShare-module__listDiv",informationDiv:"TicketShare-module__informationDiv",from:"TicketShare-module__from common-module__semibold common-module__ftsmooth",parentDep:"TicketShare-module__parentDep common-module__dotted common-module__oflow common-module__ellipsis",to:"TicketShare-module__to common-module__semibold common-module__ftsmooth",gotitButton:"TicketShare-module__gotitButton common-module__dotted common-module__oflow common-module__ellipsis",gotButton:"TicketShare-module__gotButton"}},1778:function(e,t,a){e.exports={container:"ShareDepList-module__container",listLayout:"ShareDepList-module__listLayout",deleteLayout:"ShareDepList-module__deleteLayout",rightPanel:"ShareDepList-module__rightPanel",shareContent:"ShareDepList-module__shareContent",shareTitle:"ShareDepList-module__shareTitle common-module__dotted common-module__oflow common-module__ellipsis common-module__semibold common-module__ftsmooth",accessDetail:"ShareDepList-module__accessDetail common-module__dotted common-module__oflow common-module__ellipsis",title:"ShareDepList-module__title common-module__dotted common-module__oflow common-module__ellipsis",dropicon:"ShareDepList-module__dropicon",closeIcon:"ShareDepList-module__closeIcon",tickIcon:"ShareDepList-module__tickIcon",dropDown:"ShareDepList-module__dropDown",accessList:"ShareDepList-module__accessList common-module__semibold common-module__ftsmooth",detailList:"ShareDepList-module__detailList",selected:"ShareDepList-module__selected",isReadOnly:"ShareDepList-module__isReadOnly",alertMsg:"ShareDepList-module__alertMsg",cancelButton:"ShareDepList-module__cancelButton common-module__semibold common-module__ftsmooth"}},1779:function(e,t,a){e.exports={infoHeading:"SharingDescription-module__infoHeading",typeDescription:"SharingDescription-module__typeDescription",infoContent:"SharingDescription-module__infoContent",typeLists:"SharingDescription-module__typeLists common-module__semibold common-module__ftsmooth"}},1780:function(e,t,a){e.exports={posrel:"DeptInputSelect-module__posrel"}},622:function(e,t,a){"use strict";a.r(t);var n=a(12),s=a.n(n),r=a(9),i=a.n(r),o=a(10),l=a.n(o),c=a(13),p=a.n(c),u=a(14),d=a.n(u),m=a(0),h=a.n(m),S=a(1),g=a.n(S),f=a(26),D=a(1292),_=a(100),v=a(5),N=a.n(v),b=a(2),E=a.n(b),k=a(23),I=a.n(k),y=a(1777),L=a.n(y),T=a(16),C=a(30),O=(a(99),a(72)),x=a.n(O),R=a(80),P=a.n(R),F=a(73),V=a.n(F),w=a(8),A=a(1778),U=a.n(A),M=function(e){function t(e){i()(this,t);var a=p()(this,(t.__proto__||s()(t)).call(this,e));return a.state={isUnShareOpen:!1},a.changePermission=a.changePermission.bind(a),a.unShareDepartment=a.unShareDepartment.bind(a),a.openUnShare=a.openUnShare.bind(a),a.closeUnShare=a.closeUnShare.bind(a),a.handleTogglePopup=a.handleTogglePopup.bind(a),a}return d()(t,e),l()(t,[{key:"changePermission",value:function(e,t){var a=this.props,n=a.id,s=a.index,r=a.changePermission,i=a.closePopupOnly;r(n,s,e),i(t)}},{key:"closeUnShare",value:function(){this.setState({isUnShareOpen:!1})}},{key:"openUnShare",value:function(){var e=this.props,t=e.isFormChanged,a=e.id,n=e.unShareDepartment;t?n(a):this.setState({isUnShareOpen:!0})}},{key:"unShareDepartment",value:function(){var e=this,t=this.props,a=t.id,n=t.unShareDepartment;n(a).then(function(){setTimeout(function(){e.setState({isUnShareOpen:!1})},300)})}},{key:"handleTogglePopup",value:function(e){(0,this.props.togglePopup)(e,"bottomCenter")}},{key:"render",value:function(){var e=this.props,t=(e.id,e.name),a=e.type,n=e.isReadOnly,s=e.ticketLabel,r=e.removeClose,i=e.unSharingStatus,o=e.isPopupOpen,l=e.isPopupReady,c=e.position,p=e.getTargetRef,u=e.getContainerRef,d=this.state.isUnShareOpen;return h.a.createElement(T.Container,{alignBox:d?"column":"row",className:U.a.container+" "+(d?U.a.deleteLayout:U.a.listLayout)+" "+(n?U.a.isReadOnly:"")},d?h.a.createElement(h.a.Fragment,null,h.a.createElement(T.Box,{className:U.a.alertMsg},w.f.getI18NValue("support.ticketshare.revoke.confirmation",[s])),h.a.createElement(T.Box,{className:U.a.buttonDiv},h.a.createElement(V.a,{text:w.f.getI18NValue("support.label.ticketshare.revoke"),status:i,palette:"dangerFilled",onClick:this.unShareDepartment}),h.a.createElement("span",{className:U.a.cancelButton,onClick:this.closeUnShare},w.f.getI18NValue("support.label.cancel")))):h.a.createElement(h.a.Fragment,null,h.a.createElement(T.Box,{flexible:!0,className:U.a.leftPanel,onClick:this.handleTogglePopup,eleRef:p},h.a.createElement(T.Container,{className:U.a.shareContent},h.a.createElement(T.Box,{className:U.a.shareTitle},t),h.a.createElement(T.Box,null,h.a.createElement("span",{className:U.a.accessDetail},w.f.getI18NValue("support.label.ticket.share."+a)),n?null:h.a.createElement("span",{className:U.a.dropicon},h.a.createElement(C.TopbandFontIcon,{name:"blockDownArrow",size:"6"}),o?h.a.createElement("span",{className:U.a.dropDown},h.a.createElement(x.a,{size:"small",boxPosition:c,isActive:l,onClick:r,getRef:u},h.a.createElement("div",{className:U.a.accessList+" "+("READ_WRITE"==a?U.a.selected:""),onClick:this.changePermission.bind(this,"READ_WRITE")},h.a.createElement("div",null,h.a.createElement("span",{className:U.a.title},w.f.getI18NValue("support.label.ticket.share.READ_WRITE")),"READ_WRITE"==a?h.a.createElement("span",{className:U.a.tickIcon},h.a.createElement(C.SetupFontIcon,{name:"tickNew1",size:"9"})):null),h.a.createElement("div",{className:U.a.detailList},w.f.getI18NValue("support.ticket.shared.readwrite.desc",[s]))),h.a.createElement("div",{className:U.a.accessList+" "+("RESTRICTED_ACCESS"==a?U.a.selected:""),onClick:this.changePermission.bind(this,"RESTRICTED_ACCESS")},h.a.createElement("div",null,h.a.createElement("span",{className:U.a.title},w.f.getI18NValue("support.label.ticket.share.RESTRICTED_ACCESS")),"RESTRICTED_ACCESS"==a?h.a.createElement("span",{className:U.a.tickIcon},h.a.createElement(C.SetupFontIcon,{name:"tickNew1",size:"9"})):null),h.a.createElement("div",{className:U.a.detailList},w.f.getI18NValue("support.ticket.shared.restricted.desc",[s]))),h.a.createElement("div",{className:U.a.accessList+" "+("READ_ONLY"==a?U.a.selected:""),onClick:this.changePermission.bind(this,"READ_ONLY")},h.a.createElement("div",null,h.a.createElement("span",{className:U.a.title},w.f.getI18NValue("support.label.ticket.share.READ_ONLY")),"READ_ONLY"==a?h.a.createElement("span",{className:U.a.tickIcon},h.a.createElement(C.SetupFontIcon,{name:"tickNew1",size:"9"})):null),h.a.createElement("div",{className:U.a.detailList},w.f.getI18NValue("support.ticket.shared.readonly.desc",[s]))))):null)))),n?null:h.a.createElement(T.Box,{className:U.a.rightPanel,onClick:this.openUnShare},h.a.createElement("span",{className:U.a.closeIcon},h.a.createElement(C.GettingstartedFontIcon,{name:"closee",size:"20"})))))}}]),t}(h.a.Component);M.propTypes={changePermission:g.a.func,closePopupOnly:g.a.func,getContainerRef:g.a.func,getTargetRef:g.a.func,id:g.a.string,index:g.a.string,isFormChanged:g.a.bool,isPopupOpen:g.a.bool,isPopupReady:g.a.bool,isReadOnly:g.a.bool,name:g.a.string,position:g.a.string,removeClose:g.a.func,ticketLabel:g.a.string,togglePopup:g.a.func,type:g.a.string,unShareDepartment:g.a.func,unSharingStatus:g.a.string};var B=P()(M),j=a(1779),G=a.n(j),z=function(e){function t(){return i()(this,t),p()(this,(t.__proto__||s()(t)).apply(this,arguments))}return d()(t,e),l()(t,[{key:"render",value:function(){var e=this.props.ticketLabel;return h.a.createElement("div",{className:G.a.informationDiv},h.a.createElement("div",{className:G.a.infoHeading},w.f.getI18NValue("support.label.ticketshare.permission.levels")),h.a.createElement("div",{className:G.a.infoContent},h.a.createElement("div",{className:G.a.typeLists},w.f.getI18NValue("support.label.ticket.share.READ_WRITE")),h.a.createElement("div",{className:G.a.typeDescription},w.f.getI18NValue("support.ticket.shared.readwrite.desc",[e]))),h.a.createElement("div",{className:G.a.infoContent},h.a.createElement("div",{className:G.a.typeLists},w.f.getI18NValue("support.label.ticket.share.RESTRICTED_ACCESS")),h.a.createElement("div",{className:G.a.typeDescription},w.f.getI18NValue("support.ticket.shared.restricted.desc",[e]))),h.a.createElement("div",{className:G.a.infoContent},h.a.createElement("div",{className:G.a.typeLists},w.f.getI18NValue("support.label.ticket.share.READ_ONLY")),h.a.createElement("div",{className:G.a.typeDescription},w.f.getI18NValue("support.ticket.shared.readonly.desc",[e]))))}}]),t}(h.a.Component),W=z;z.propTypes={ticketLabel:g.a.string};var H=a(11),Y=a.n(H),K=a(1780),q=a.n(K),J=a(203),X=a.n(J),$=a(1044),Q=a(17),Z=function(e){function t(e){i()(this,t);var a=p()(this,(t.__proto__||s()(t)).call(this,e));return a.handlePopupOpen=a.handlePopupOpen.bind(a),a.handleSearchDepts=a.handleSearchDepts.bind(a),a.handleSelectDept=a.handleSelectDept.bind(a),a.handleDefaulValueSet=a.handleDefaulValueSet.bind(a),a.state={defaultSelectedDeptDetails:[],isPopupFirstTimeOpened:!1},a.getDeptsList=Object(Q.Kb)(),a}return d()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.handleDefaulValueSet(this.props),this.handlePopupOpen()}},{key:"componentWillReceiveProps",value:function(e){e.selectedDept!==this.props.selectedDept&&this.handleDefaulValueSet(e)}},{key:"handleDefaulValueSet",value:function(e){var t=e.selectedDept,a=e.departments,n=e.isShowEnabledDepts,s=this.getDeptsList({},{departments:a,departmentsOrder:[t],isEnabled:n});this.setState({defaultSelectedDeptDetails:s})}},{key:"handleSearchDepts",value:function(e){var t=this.props,a=t.onSearchDepts,n=t.getDepts;return a(e),e?n():Y.a.resolve()}},{key:"handlePopupOpen",value:function(e){var t=this.props.getDepts,a=this.state.isPopupFirstTimeOpened;return a||this.setState({isPopupFirstTimeOpened:!0}),a?Y.a.resolve():t(e)}},{key:"handleSelectDept",value:function(e){var t=this.props.onChange;"none"!==e&&t&&t(e)}},{key:"render",value:function(){var e=this.props,t=e.selectedDepartmentIds,a=e.deptsList,n=e.getNextDepts,s=e.isNextDepts,r=(e.selectedDept,e.needNoneValue),i=e.searchString,o=(e.excludeDepts,e.emptyMessage,e.getRef,e.needSearch,e.textBoxSize,e.textBoxVariant,e.onChange),l=e.isDisabled,c=e.isPopupOpen,p=e.errMsg,u=(this.state.defaultSelectedDeptDetails,w.f.getI18NValue("None"));a=r&&!i?[{id:"none",name:"--"+u+"--"}].concat(I()(a)):a;var d=[];return a.map(function(e){-1==t.indexOf(e.id)&&d.push(e)}),h.a.createElement("div",{className:q.a.posrel},h.a.createElement(X.a,{isDisabled:l,title:p,isPopupOpen:c,valueField:"id",textField:"name",selectedOptions:[],options:d,onChange:o,needToCloseOnSelect:!0,onFocus:this.handlePopupOpen,getNextOptions:n,isNextOptions:s,noMoreOptionsMessage:w.f.getI18NValue("support.label.no.match.found"),emptyMessage:w.f.getI18NValue("support.label.no.match.found"),placeHolder:w.f.getI18NValue("support.label.search.department")}))}}]),t}(m.Component);Z.propTypes={selectedDept:g.a.array.isRequired,onChange:g.a.func.isRequired,needNoneValue:g.a.bool,excludeDepts:g.a.array,emptyMessage:g.a.string,isShowEnabledDepts:g.a.bool,getRef:g.a.func,needSearch:g.a.bool,departments:g.a.object,deptsList:g.a.array,getDepts:g.a.func,getNextDepts:g.a.func,searchString:g.a.string,onSearchDepts:g.a.func,isNextDepts:g.a.bool,textBoxSize:g.a.string,textBoxVariant:g.a.string,isDisabled:g.a.bool,isPopupOpen:g.a.bool,errMsg:g.a.string,selectedDepartmentIds:g.a.array},Z.defaultProps={needNoneValue:!1,needSearch:!0,textBoxSize:"medium",textBoxVariant:"default"};var ee,te=Object($.a)(Z),ae=(Object($.a)(Z,!1),a(3)),ne=a(62),se=a(109),re=function(e){function t(e){i()(this,t);var a=p()(this,(t.__proto__||s()(t)).call(this,e));return a.state={sharedDepartments:e.sharedDepartments,isShareOptionOpen:e.isNewForm||!1,isSharingDescOpen:!1,isFormChanged:!1},a.toggleSharingDesc=a.toggleSharingDesc.bind(a),a.showShareOption=a.showShareOption.bind(a),a.addDepartment=a.addDepartment.bind(a),a.unShareDepartment=a.unShareDepartment.bind(a),a.changePermission=a.changePermission.bind(a),a.onSubmit=a.onSubmit.bind(a),a}return d()(t,e),l()(t,[{key:"toggleSharingDesc",value:function(){this.setState(function(e){return{isSharingDescOpen:!e.isSharingDescOpen}})}},{key:"showShareOption",value:function(){this.setState({isShareOptionOpen:!0})}},{key:"addDepartment",value:function(e){this.setState(function(t){return{sharedDepartments:[].concat(I()(t.sharedDepartments),[{id:e[0],type:"READ_WRITE"}]),isFormChanged:!0}})}},{key:"unShareDepartment",value:function(e){var t=this,a=this.state,n=a.isFormChanged,s=a.sharedDepartments.filter(function(t){return t.id!=e});if(!n)return this.setState({unSharingStatus:"loading"}),this.props.updateData(s).then(function(){t.setState({unSharingStatus:"success"}),setTimeout(function(){t.setState({sharedDepartments:s,unSharingStatus:"none"})},300)},function(){t.setState({unSharingStatus:"none"})});this.setState({sharedDepartments:s})}},{key:"changePermission",value:function(e,t,a){var n=this;this.setState({sharedDepartments:[].concat(I()(this.state.sharedDepartments.slice(0,t)),[E()({},this.state.sharedDepartments[t],{type:a})],I()(this.state.sharedDepartments.slice(t+1)))},function(){var e=n.state,t=e.isFormChanged,a=e.sharedDepartments;t||n.props.updateData(a)})}},{key:"onSubmit",value:function(){var e=this;this.setState({sharingStatus:"loading"});var t=this.props,a=t.updateData,n=t.closeTicketShareForm;a(this.state.sharedDepartments).then(function(){e.setState({sharingStatus:"success"}),setTimeout(function(){n()},300)},function(){e.setState({sharingStatus:"node"})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isSharedTicket,n=t.closeTicketShareForm,s=t.ticketLabel,r=t.parentDepName,i=t.departmentsObj,o=t.parentDepId,l=t.isNewForm,c=this.state,p=c.isShareOptionOpen,u=c.isSharingDescOpen,d=c.isFormChanged,m=c.sharedDepartments,S=c.sharingStatus,g=void 0===S?"none":S,f=c.unSharingStatus,D=void 0===f?"none":f,_=[o];return m.map(function(e){_.push(e.id)}),h.a.createElement(T.Container,{className:L.a.continerDiv},h.a.createElement(T.Box,{className:L.a.headerDiv},h.a.createElement("div",null,h.a.createElement("span",{className:L.a.headingDiv},a?w.f.getI18NValue("support.label.tickeshare.shared.info"):w.f.getI18NValue("support.label.tickeshare.header",[s])),u?null:h.a.createElement("span",{className:L.a.iconsList},a?null:h.a.createElement("span",{className:L.a.iconInfo,onClick:this.toggleSharingDesc},h.a.createElement(C.CommonFontIcon,{name:"information57",size:"15"})),h.a.createElement("span",{className:L.a.iconClose,onClick:n},h.a.createElement(C.ChannelsFontIcon,{name:"close2",size:"11"})))),h.a.createElement("div",{className:L.a.shareParagraph},a?w.f.getI18NValue("support.ticketshare.shared.desc",[s.toLowerCase()]):w.f.getI18NValue("support.ticketshare.sharing.desc",[s.toLowerCase()]),a?null:h.a.createElement(se.a,{className:L.a.learnMore,target:"_blank",href:ae.V},w.f.getI18NValue("support.crmlabel.learnmore"))),a?h.a.createElement("span",null,h.a.createElement("div",{className:L.a.from},w.f.getI18NValue("support.label.ticketshare.sharedfrom")),h.a.createElement("p",{className:L.a.parentDep,"data-title":r},r),h.a.createElement("div",{className:L.a.to},w.f.getI18NValue("support.label.ticketshare.sharedto"))):null,p&&!u?h.a.createElement("div",{className:L.a.inputArea},h.a.createElement(te,{selectedDept:o,selectedDepartmentIds:_,onChange:this.addDepartment,isDisabled:11==_.length,errMsg:11==_.length?w.f.getI18NValue("support.ticketshare.maxcount.error"):null,isPopupOpen:l&&_.length<11})):null),h.a.createElement(T.Box,{flexible:!0,scroll:"vertical"},h.a.createElement("div",{className:L.a.listDiv},u?h.a.createElement(W,{closeDesc:this.toggleSharingDesc}):m.map(function(t,n){var r=t.id,o=t.type,l=i[r]?i[r].name:"test";return h.a.createElement("div",{className:L.a.shareList,key:n},h.a.createElement(B,{index:n,isReadOnly:a,id:r,name:l,type:o,ticketLabel:s,changePermission:e.changePermission,unShareDepartment:e.unShareDepartment,unSharingStatus:D,isFormChanged:d}))}))),a?null:u?h.a.createElement(T.Box,null,h.a.createElement("div",{className:L.a.gotButton,onClick:this.toggleSharingDesc},h.a.createElement("span",{className:L.a.gotitButton},w.f.getI18NValue("support.label.ticketshare.gotit")))):!p||d||l?h.a.createElement(h.a.Fragment,null,d||l?h.a.createElement(ne.b,{submitText:l?w.f.getI18NValue("support.community.singlepost.share"):w.f.getI18NValue("support.label.update"),submitStatus:g,onSubmit:this.onSubmit,cancelText:w.f.getI18NValue("support.label.cancel"),onCancel:n,paddingSize:"medium"}):h.a.createElement(ne.b,{submitText:w.f.getI18NValue("support.label.ticketshare.sharemore"),onSubmit:this.showShareOption,paddingSize:"medium"})):null)}}]),t}(h.a.Component),ie=re;re.propTypes=(ee={closeTicketShareForm:g.a.func,departmentsObj:g.a.object},N()(ee,"departmentsObj",g.a.object),N()(ee,"isNewForm",g.a.bool),N()(ee,"isSharedTicket",g.a.bool),N()(ee,"parentDepId",g.a.string),N()(ee,"parentDepName",g.a.string),N()(ee,"sharedDepartments",g.a.array),N()(ee,"updateData",g.a.func),ee);var oe=function(e){function t(e){i()(this,t);var a=p()(this,(t.__proto__||s()(t)).call(this,e));return a.updateData=a.updateData.bind(a),a}return d()(t,e),l()(t,[{key:"updateData",value:function(e){var t=this.props,a=t.ticketId;return(0,t.updateTicket)(a,{sharedDepartments:e})}},{key:"render",value:function(){var e=this.props,t=(e.ticketId,e.sharedDepartments),a=e.closeTicketShareForm,n=e.isSharedTicket,s=e.parentDepName,r=e.ticketLabel,i=e.departmentsObj,o=e.parentDepId,l=e.isNewForm;return h.a.createElement(ie,{closeTicketShareForm:a,isSharedTicket:n,parentDepName:s,ticketLabel:r,sharedDepartments:t,departmentsObj:i,parentDepId:o,updateData:this.updateData,isNewForm:l})}}]),t}(m.Component);oe.propTypes={closeTicketShareForm:g.a.func,departmentsObj:g.a.object,isNewForm:g.a.bool,isSharedTicket:g.a.bool,parentDepId:g.a.string,parentDepName:g.a.string,sharedDepartments:g.a.array,ticketId:g.a.string,ticketLabel:g.a.string,updateTicket:g.a.func};t.default=Object(f.connect)(function(e,t){return{ticketLabel:e.moduleMeta.tickets.singularLabel,departmentsObj:e.module.department}},{closeTicketShareForm:D.a,updateTicket:_.k})(oe)}}]);