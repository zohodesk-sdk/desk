(window.deskappJsonp=window.deskappJsonp||[]).push([[87],{1007:function(e,t,n){"use strict";var a,o=n(5),i=n.n(o),c=n(12),r=n.n(c),s=n(9),l=n.n(s),u=n(10),d=n.n(u),m=n(13),p=n.n(m),f=n(14),v=n.n(f),_=n(0),I=n.n(_),g=n(1),h=n.n(g),y=n(1042),E=n.n(y),b=n(157),N=n.n(b),k=n(30),S=n(80),C=n.n(S),T=n(72),w=n.n(T),O=n(1026),F=n.n(O),P=n(361),M=n.n(P),D=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||r()(t)).call(this,e));return n.handleSelect=n.handleSelect.bind(n),n.togglePopup=n.togglePopup.bind(n),n}return v()(t,e),d()(t,[{key:"handleSelect",value:function(e,t,n,a){if(void 0!==this.props.onSelect){var o=this.props;(0,o.onSelect)(e,o.entity)}this.props.togglePopup(a)}},{key:"togglePopup",value:function(e){var t=this.props,n=t.togglePopup,a=t.boxPosition;e.stopPropagation(),n(e,a)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isPopupOpen,a=t.onPopupChange;e.isPopupOpen!==n&&a&&a(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=void 0===n?"white":n,o=t.objValues,i=t.Icnsize,c=t.IcnName,r=(t.removeClose,t.listStyle,t.arrowPosition),s=t.position,l=t.right,u=(t.isScroll,t.widgets),d=void 0===u?[]:u,m=t.onWidgetScroll,p=t.onWidgetSelect,f=t.selectedWidgetId,v=t.arrowRight,_=t.arrowLeft,g=t.size,h=t.left,y=t.isPopupOpen,b=t.isPopupReady,S=t.getTargetRef,C=t.getContainerRef;return i=i||"medium",I.a.createElement("span",{className:N.a.posrel,ref:S,onClick:this.togglePopup},I.a.createElement("span",{className:E.a.defaultSize+" "+N.a.posrel+" "+E.a[a]},I.a.createElement("span",null,I.a.createElement(k.TopbandFontIcon,{name:c,size:i}))),y?I.a.createElement("span",{className:E.a.dropDivPosition},I.a.createElement(w.a,{isAnimate:!0,right:l,left:h,isActive:b,size:g,arrowRight:v,arrowLeft:_,boxPosition:s,getRef:C,arrowPosition:r},o.map(function(t,n){return I.a.createElement(M.a,{autoHover:!0,value:t.name,iconName:t.iconName||null,iconClass:t.iconClass,iconSize:t.size,key:n,id:t.name,onClick:e.handleSelect,dataId:"Delete"===t.name?"delete":"Edit"===t.name?"edit":t.name})}),o.length&&d.length?I.a.createElement(F.a,null):null,d.length?I.a.createElement("div",{className:E.a.widgetList,onScroll:m},d.map(function(e){var t=e.name,n=e.sanitisedName+"_"+e.installationId;return f!=n?I.a.createElement(M.a,{autoHover:!0,value:decodeURIComponent(t),iconName:null,key:n,id:n,onClick:function(){p(n,e)}}):null})):null)):null)}}]),t}(_.Component);D.defaultProps={IcnName:"more1",size:"small"},D.propTypes=(a={IcnName:h.a.string,Icnsize:h.a.string,arrowLeft:h.a.string,arrowPosition:h.a.string,arrowRight:h.a.string,boxPosition:h.a.string,entity:h.a.object,getContainerRef:h.a.func},i()(a,"getContainerRef",h.a.func),i()(a,"getTargetRef",h.a.func),i()(a,"isPopupOpen",h.a.bool),i()(a,"isPopupReady",h.a.bool),i()(a,"isScroll",h.a.bool),i()(a,"left",h.a.string),i()(a,"listStyle",h.a.string),i()(a,"objValues",h.a.array),i()(a,"onPopupChange",h.a.func),i()(a,"onSelect",h.a.func),i()(a,"onWidgetScroll",h.a.func),i()(a,"onWidgetSelect",h.a.func),i()(a,"position",h.a.string),i()(a,"removeClose",h.a.func),i()(a,"right",h.a.string),i()(a,"selectedWidgetId",h.a.string),i()(a,"size",h.a.string),i()(a,"theme",h.a.string),i()(a,"togglePopup",h.a.func),i()(a,"widgets",h.a.array),a),t.a=C()(D)},1026:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=c(n(0)),i=c(n(360));function c(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"render",value:function(){return o.default.createElement("div",{className:i.default.separator})}}]),t}();t.default=r},1042:function(e,t,n){e.exports={defaultSize:"MorePopup-module__defaultSize common-module__offSelection",black:"MorePopup-module__black",white:"MorePopup-module__white",iconCustom:"MorePopup-module__iconCustom",mr10:"MorePopup-module__mr10",dropDivPosition:"MorePopup-module__dropDivPosition",dropdownPosition:"MorePopup-module__dropdownPosition",secondaryIcon:"MorePopup-module__secondaryIcon",widgetList:"MorePopup-module__widgetList"}},1069:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i});var a=function(e){return e.module.profile[e.myInfo.profileId].permissions.financeInteg},o=function(e){return"ENABLED"===e.integrations.INVOICE.status?"invoice":"ENABLED"===e.integrations.BOOKS.status?"books":null},i=function(e){return"ENABLED"===e.integrations.INVOICE.status?"ZohoInvoice":"ENABLED"===e.integrations.BOOKS.status?"ZohoBooks":null}},1096:function(e,t,n){"use strict";(function(e){n.d(t,"n",function(){return p}),n.d(t,"l",function(){return f}),n.d(t,"a",function(){return v}),n.d(t,"k",function(){return _}),n.d(t,"j",function(){return I}),n.d(t,"B",function(){return g}),n.d(t,"A",function(){return h}),n.d(t,"r",function(){return y}),n.d(t,"b",function(){return E}),n.d(t,"q",function(){return b}),n.d(t,"o",function(){return N}),n.d(t,"f",function(){return k}),n.d(t,"g",function(){return S}),n.d(t,"p",function(){return T}),n.d(t,"m",function(){return w}),n.d(t,"t",function(){return O}),n.d(t,"u",function(){return F}),n.d(t,"s",function(){return P}),n.d(t,"z",function(){return M}),n.d(t,"w",function(){return D}),n.d(t,"d",function(){return A}),n.d(t,"v",function(){return x}),n.d(t,"c",function(){return L}),n.d(t,"x",function(){return j}),n.d(t,"e",function(){return B}),n.d(t,"i",function(){return R}),n.d(t,"h",function(){return z}),n.d(t,"y",function(){return Z});var a=n(19),o=n.n(a),i=n(3),c=n(17),r=n(24),s=n(8),l=n(15),u=n(6),d=n(46),m=n(1069);function p(e,t,n,a){return{types:Object(u.m)("GETINVOICES"),callAPI:function(o){var c=t&&"all"!=t?"&status="+t:"",r="";"Cases"===e&&(r="&departmentId="+o.module.ticket[n].departmentId);var s="pageNumber="+a+"&deskEntityId="+n+"&deskModuleName="+e+c+r;return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(o)+"/invoices?"+s,!1,{orgId:o.currentOrgId}).get().then(function(e){return{data:204!=e.responseStatus?e.data:[],pageNumber:a}})}}}e.ZInvoice={};var f=function(e,t,n,a){return{types:Object(u.m)("GETESTIMATES"),callAPI:function(o){var c="pageNumber="+a+"&deskEntityId="+n+"&deskModuleName="+e+(t&&"all"!=t?"&status="+t:"");return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(o)+"/estimates?"+c,!1,{orgId:o.currentOrgId}).get().then(function(e){return{data:204!=e.responseStatus?e.data:[],pageNumber:a}})}}},v=function(e){return{type:"CHANGE_FINANCE_ENTITY",data:{entity:e.entity,module:e.module,status:e.status}}};function _(e,t){return{types:Object(u.m)("GETACTIVITY"),callAPI:function(n){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(n)+"/contacts/"+e+"/activity?pageNumber="+t,!1,{orgId:n.currentOrgId}).get().then(function(e){return{data:204!=e.responseStatus?e.data:[]}})}}}function I(e){return{types:Object(u.m)("DELINKCONTACT"),callAPI:function(t){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(t)+"/contacts/disassociate?deskEntityId="+e,!1,{orgId:t.currentOrgId}).del().then(function(e){return e})}}}function g(e,t){return{types:Object(u.m)("UPDATE_INVOICE_STATUS"),callAPI:function(n){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(n)+"/invoices/"+e,!1,{orgId:n.currentOrgId}).patch("",{status:t}).then(function(e){return e})}}}function h(e,t){return{types:Object(u.m)("UPDATE_ESTIMATE_STATUS"),callAPI:function(n){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(n)+"/estimates/"+e,!1,{orgId:n.currentOrgId}).patch("",{status:t}).then(function(e){return e})}}}function y(e){return{types:Object(u.m)("MARKALL_INVOICE_SENT"),callAPI:function(t){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(t)+"/invoices/markAsSent",!1,{orgId:t.currentOrgId}).post("",{ids:e}).then(function(e){return e})}}}var E=function(){return{type:"CLEAR_SELECTED_FINANCE_ENTITIES"}};function b(e){return{types:Object(u.m)("MARKALL_ESTIMATE_SENT"),callAPI:function(t){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(t)+"/estimates/markAsSent",!1,{orgId:t.currentOrgId}).post("",{ids:e}).then(function(e){return e})}}}function N(){return{types:Object(u.m)("GET_PAYMENTMETA"),callAPI:function(e){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(e)+"/paymentTermsMeta",!1,{orgId:e.currentOrgId}).get().then(function(e){return e})}}}function k(e){return{types:Object(u.m)("CREATE_CONTACT"),callAPI:function(t,n){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(t)+"/contacts",!1,{orgId:t.currentOrgId}).post("",e).then(function(e){return e})}}}function S(e,t){return{types:Object(u.m)("CREATE_CONTACT_MAPPING"),callAPI:function(n,a){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(n)+"/contacts/"+t,!1,{orgId:n.currentOrgId}).patch("",e).then(function(e){return e})}}}function C(e,t){var n={Cases:"tickets",Contacts:"contacts",Accounts:"accounts"};return{types:Object(u.m)("HAS_UNBILLED_TIMEENTRY"),callAPI:function(a){var o="Cases"!=t?Object(d.a)(a,!0):"",c=""+i.w+n[t]+"/"+e+"/timeEntry?isBillable=true"+o;return Object(l.a)(c,!1,{orgId:a.currentOrgId}).get().then(function(e){return{hasUnBilledTimeEntry:204!=e.responseStatus&&e.data.some(function(e){return null==e.invoiceId})}})}}}function T(e){return{types:Object(u.m)("GET_UNBILLED_TIMEENTRY"),callAPI:function(t){return Object(l.a)(e,!1,{orgId:t.currentOrgId}).get().then(function(e){return e})}}}function w(e){return{types:Object(u.m)("GET_FINACE_ENTITY"),callAPI:function(t){return Object(l.a)(e,!1,{orgId:t.currentOrgId}).get().then(function(e){return e})}}}function O(e,t){return{type:"CHANGE_INVOICE_MODULE",data:{module:e,status:t}}}function F(e){return{type:"CHANGE_INVOICE_STATUS",data:{status:e}}}function P(e){return{type:"SELECT_INVOICE",data:{selectedItem:e}}}function M(){return{type:"RESET_INVOICE_DEFAULT_DATA"}}function D(e){return{type:"OPEN_INVOICE_DETAILS",data:e}}function A(){return{type:"CLOSE_INVOICE_DETAILS"}}function x(e){return{type:"OPEN_INVOICE_IFRAME_FORM",data:e}}function L(){return{type:"CLOSE_INVOICE_IFRAME_FORM"}}function j(e){return{type:"OPEN_INVOICE_FORM",data:e}}function B(){return{type:"CLOSE_INVOICE_FORM"}}var V=function(e){var t=e.integrations,n=Object(c.I)(e),a=i.l[n],r=e.routing.paramMap.moduleId,s=e.module[a.stateKey][r];return{integrations:t,moduleId:r,contactId:"tickets"===n?s.contactId:r,moduleData:s,deskModuleName:a.deskModuleName,orgName:Object(c.O)(e),financeContact:o()("financeInfo.financeContact",e)||{}}},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,a){var o=a(),i=V(o),c=i.moduleId,r=i.deskModuleName,s=i.moduleData,l=i.orgName,u=i.financeContact,d=i.integrations;ZInvoice.entityType="invoice",ZInvoice.isDetailView=!1,ZInvoice.includeTimeEntries=!1;var p=function(a){if(!a){ZInvoice.isHasUnbilledTimeEntries=!1,"Cases"===r?(ZInvoice.caseSubject="[## "+s.ticketNumber+" ##] "+s.subject,ZInvoice.caseId=s.id):(ZInvoice.caseSubject="",ZInvoice.caseId="");var i="/support/"+l+"/connectzb?entityType=2&acceptJHTML=true&entityid="+u.id+"&accountType="+Object(m.a)(o);return n(x({isOpen:!0,src:i,openFinance:e}))}ZInvoice.includeTimeEntries=!0,ZInvoice.isHasUnbilledTimeEntries=!0;var c=t.timeEntryIds;return n(j({type:"invoiceForm",data:{isPreferenceOpen:!0,financeContact:u,timeEntryIds:void 0===c?[]:c},accountType:"ENABLED"==d.INVOICE.status?"invoice":"books",entity:"invoice"}))},f=t.timeEntryIds;return(void 0===f?[]:f).length?p(!0):n(C(c,r)).then(function(e){return p(e.data.hasUnBilledTimeEntry)})}},z=function(e){return function(t,n){var a=n(),o=V(a),i=o.moduleData,c=o.deskModuleName,r=o.orgName,s=o.financeContact;return ZInvoice.includeTimeEntries=!1,ZInvoice.isDetailView=!1,ZInvoice.entityType="estimate","Cases"===c?(ZInvoice.caseSubject="[## "+i.ticketNumber+" ##] "+i.subject,ZInvoice.caseId=i.id):(ZInvoice.caseSubject="",ZInvoice.caseId=""),t(x({isOpen:!0,src:"/support/"+r+"/connectzb?entityType=1&acceptJHTML=true&entityid="+s.id+"&accountType="+Object(m.a)(a),openFinance:e}))}},Z=function(e,t,n){return function(a,o){var c=o(),d=V(c),p=d.contactId,f=d.deskModuleName,v=d.integrations;return a(function(e,t){return{types:Object(u.m)("SEARCHCONTACTS"),callAPI:function(n){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(n)+"/contacts/search?deskEntityId="+e+"&deskModuleName="+t,!1,{orgId:n.currentOrgId}).get().then(function(e){return e})}}}(p,f)).then(function(o){return o.data&&"contactId"==o.data.matchedBy?a(function(e,t){return{types:Object(u.m)("FINANCECONTACT"),callAPI:function(n){return Object(l.a)(i.w+"zohoFinance/"+Object(m.c)(n)+"/contacts?deskEntityId="+e+"&deskModuleName="+t,!1,{orgId:n.currentOrgId}).get().then(function(e){return e})}}}(p,f)).then(function(){"invoice"===t?a(R(e,n)):"estimate"===t?a(z(e)):e()}):(a(j({type:"invoiceForm",data:204!=o.data.responseStatus?o.data:null,accountType:"ENABLED"==v.INVOICE.status?"invoice":"books",openFinance:e,entity:t})),{isInvoiceInfoOpen:!1})}).catch(function(e){throw a(Object(r.Q)({type:"alert",message:s.f.getI18NValue("support.invoice.integ.email.error")})),e})}}}).call(this,n(68))},1296:function(e,t,n){"use strict";var a=n(12),o=n.n(a),i=n(9),c=n.n(i),r=n(10),s=n.n(r),l=n(13),u=n.n(l),d=n(14),m=n.n(d),p=n(0),f=n.n(p),v=n(1393),_=n.n(v),I=function(e){function t(){return c()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){return f.a.createElement("div",{className:_.a.stencillist},f.a.createElement("div",{className:_.a.stencilLoading}),f.a.createElement("div",{className:_.a.stencilLoading}),f.a.createElement("div",{className:_.a.stencilLoading}))}}]),t}(f.a.Component);t.a=I},1393:function(e,t,n){e.exports={stencillist:"Loading-module__stencillist",stencilLoading:"Loading-module__stencilLoading",Stencils__placeHolderShimmer:"Loading-module__Stencils__placeHolderShimmer"}},1604:function(e,t,n){e.exports={booksPart:"InvoiceHead-module__booksPart",booksHead:"InvoiceHead-module__booksHead",arrowRgt:"InvoiceHead-module__arrowRgt",booksTitle:"InvoiceHead-module__booksTitle",newTab:"InvoiceHead-module__newTab"}},1605:function(e,t){e.exports="//vimalesan.herokuapp.com/support/fonts/EmptyInvoice.39c45ef7332804b2e593.svg"},1606:function(e,t,n){e.exports={emtyPart:"EmptyPage-module__emtyPart",emtySection:"EmptyPage-module__emtySection",emtyTxt:"EmptyPage-module__emtyTxt"}},1607:function(e,t,n){e.exports={accFooter:"InvoiceFooter-module__accFooter",titleName:"InvoiceFooter-module__titleName common-module__dotted common-module__oflow common-module__ellipsis",footerPart:"InvoiceFooter-module__footerPart",footerbdr:"InvoiceFooter-module__footerbdr"}},1608:function(e,t,n){e.exports={accFiliter:"InvoiceFilter-module__accFiliter common-module__cboth",Lft:"InvoiceFilter-module__Lft",Rgt:"InvoiceFilter-module__Rgt",invceDrpTxt:"InvoiceFilter-module__invceDrpTxt",invceDrpIcon:"InvoiceFilter-module__invceDrpIcon",FltrTxt:"InvoiceFilter-module__FltrTxt",FltrTxtIcon:"InvoiceFilter-module__FltrTxtIcon"}},1609:function(e,t,n){e.exports={invocecustmerDetail:"ContactInfo-module__invocecustmerDetail",invoceInfo:"ContactInfo-module__invoceInfo",customerName:"ContactInfo-module__customerName common-module__semibold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis",customerRole:"ContactInfo-module__customerRole common-module__dotted common-module__oflow common-module__ellipsis",customerId:"ContactInfo-module__customerId ContactInfo-module__customerRole common-module__dotted common-module__oflow common-module__ellipsis",invoDlink:"ContactInfo-module__invoDlink"}},1610:function(e,t,n){e.exports={container:"ActivityList-module__container",invoiceDetails:"ActivityList-module__invoiceDetails",leftBorder:"ActivityList-module__leftBorder",activityDetails:"ActivityList-module__activityDetails",circle:"ActivityList-module__circle",date:"ActivityList-module__date",noofDays:"ActivityList-module__noofDays",activityStatus:"ActivityList-module__activityStatus common-module__semibold common-module__ftsmooth",activityDescription:"ActivityList-module__activityDescription",viewDetails:"ActivityList-module__viewDetails"}},1611:function(e,t,n){e.exports={creditDiv:"Overview-module__creditDiv",overviewDetails:"Overview-module__overviewDetails",overviewRecivedtls:"Overview-module__overviewRecivedtls",valueAid:"Overview-module__valueAid common-module__dotted common-module__oflow common-module__ellipsis",usedValue:"Overview-module__usedValue common-module__dotted common-module__oflow common-module__ellipsis",receivable:"Overview-module__receivable Overview-module__usedValue common-module__dotted common-module__oflow common-module__ellipsis"}},1612:function(e,t,n){e.exports={estimateDiv:"InvoiceList-module__estimateDiv",alignItems:"InvoiceList-module__alignItems",checkBox:"InvoiceList-module__checkBox",moreIcon:"InvoiceList-module__moreIcon",estimateDetails:"InvoiceList-module__estimateDetails",EstimateValue:"InvoiceList-module__EstimateValue",estimateNo:"InvoiceList-module__estimateNo",estimateDate:"InvoiceList-module__estimateDate",isChecked:"InvoiceList-module__isChecked",totalValue:"InvoiceList-module__totalValue common-module__dotted common-module__oflow common-module__ellipsis",invoiceStatus:"InvoiceList-module__invoiceStatus",draft:"InvoiceList-module__draft",declined:"InvoiceList-module__declined",sent:"InvoiceList-module__sent",accepted:"InvoiceList-module__accepted",invoiced:"InvoiceList-module__invoiced",void:"InvoiceList-module__void",overdue:"InvoiceList-module__overdue",paid:"InvoiceList-module__paid",partially_paid:"InvoiceList-module__partially_paid"}},1613:function(e,t,n){e.exports={headerDiv:"Massaction-module__headerDiv",markSent:"Massaction-module__markSent",iconPdf:"Massaction-module__iconPdf",iconPrint:"Massaction-module__iconPrint"}},601:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),i=n(12),c=n.n(i),r=n(9),s=n.n(r),l=n(10),u=n.n(l),d=n(13),m=n.n(d),p=n(14),f=n.n(p),v=n(0),_=n.n(v),I=n(1),g=n.n(I),h=n(26),y=n(81),E=n(16),b=n(8),N=n(1096),k=n(24),S=n(17),C=n(3),T=n(1604),w=n.n(T),O=n(30),F=function(e){function t(){return s()(this,t),m()(this,(t.__proto__||c()(t)).apply(this,arguments))}return f()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.titlehead,n=e.onClose,a=e.hasBackButton;return _.a.createElement("div",{className:w.a.booksPart},_.a.createElement("div",{className:w.a.booksHead},a&&_.a.createElement("span",{className:w.a.arrowRgt,onClick:n},_.a.createElement(O.TopbandFontIcon,{name:"keyboardBackspace",size:"17",onClick:this.handleNavigate})),_.a.createElement("span",{className:w.a.booksTitle},t)))}}]),t}(v.Component),P=F;F.propTypes={arrowRight:g.a.string,hasBackButton:g.a.bool,newtab:g.a.string,onClose:g.a.func,titlehead:g.a.string},F.defaultProps={hasBackButton:!0};var M=n(153),D=n(1605),A=n.n(D),x=function(e){function t(){return s()(this,t),m()(this,(t.__proto__||c()(t)).apply(this,arguments))}return f()(t,e),u()(t,[{key:"render",value:function(){return _.a.createElement(M.a,{viewBox:"0 0 298 123.5",name:"invoice"},_.a.createElement("image",{xlinkHref:A.a,height:"100%",width:"100%"}))}}]),t}(_.a.Component);var L=n(1606),j=n.n(L),B=function(e){function t(){return s()(this,t),m()(this,(t.__proto__||c()(t)).apply(this,arguments))}return f()(t,e),u()(t,[{key:"render",value:function(){var e=this.props.text;return _.a.createElement(E.Box,{scroll:"vertical",flexible:!0,className:j.a.emtyPart},_.a.createElement("div",{className:j.a.emtySection},_.a.createElement(x,null),_.a.createElement("span",{className:j.a.emtyTxt},e)))}}]),t}(v.Component),V=B;B.propTypes={text:g.a.string};var R=n(1607),z=n.n(R),Z=function(e){function t(e){s()(this,t);var n=m()(this,(t.__proto__||c()(t)).call(this,e));return n.createEstimate=n.createEstimate.bind(n),n.createInvoice=n.createInvoice.bind(n),n}return f()(t,e),u()(t,[{key:"createEstimate",value:function(){this.props.createEstimate()}},{key:"createInvoice",value:function(){this.props.createInvoice()}},{key:"render",value:function(){var e=this.props.permission,t=void 0===e?{}:e;return _.a.createElement(E.Container,{className:z.a.accFooter,alignBox:"row",isCover:!1},t.createEstimate?_.a.createElement(E.Box,{className:z.a.footerPart+" "+z.a.footerbdr,onClick:this.createEstimate},_.a.createElement("span",{className:z.a.titleName},b.f.getI18NValue("support.finance.create.estimate"))):null,t.createInvoice?_.a.createElement(E.Box,{className:z.a.footerPart,onClick:this.createInvoice,flexible:!0},_.a.createElement("span",{className:z.a.titleName},b.f.getI18NValue("support.finance.create.invoice"))):null)}}]),t}(v.Component),H=Z;Z.propTypes={createEstimate:g.a.func,createInvoice:g.a.func,permission:g.a.object};var U=n(1608),G=n.n(U),J=n(1007),W=function(e){function t(e){s()(this,t);var n=m()(this,(t.__proto__||c()(t)).call(this,e));return n.modulePopup=_.a.createRef(),n.filterPopup=_.a.createRef(),n.toggleModule=n.toggleModule.bind(n),n.toggleFilter=n.toggleFilter.bind(n),n}return f()(t,e),u()(t,[{key:"toggleModule",value:function(e){this.modulePopup.current.togglePopup(e)}},{key:"toggleFilter",value:function(e){this.filterPopup.current.togglePopup(e)}},{key:"render",value:function(){var e=this.props,t=e.moduleFilter,n=e.statusFilter,a=e.selectedModule,o=e.selectedStatus,i=e.onModuleSelect,c=e.onStatusSelect,r=e.showStatus,s=e.showModule;return r||(r=o!=b.f.getI18NValue("support.finance.status.all")),_.a.createElement(E.Box,{className:G.a.accFiliter},s?_.a.createElement("div",{className:G.a.Lft,onClick:this.toggleModule},_.a.createElement("span",null,_.a.createElement("span",{className:G.a.invceDrpTxt},a),_.a.createElement("span",{className:G.a.invceDrpIcon},_.a.createElement(J.a,{right:"-25",objValues:t,IcnName:"down1",Icnsize:"7",isIconsInList:!1,onSelect:i,ref:this.modulePopup})))):null,r?_.a.createElement("div",{className:G.a.Rgt,onClick:this.toggleFilter},_.a.createElement("span",null,_.a.createElement("span",{className:G.a.FltrTxt},o),_.a.createElement("span",{className:G.a.FltrTxtIcon},_.a.createElement(J.a,{right:"-10",objValues:n,IcnName:"down1",Icnsize:"6",isIconsInList:!1,onSelect:c,ref:this.filterPopup})))):null)}}]),t}(v.Component),K=W;W.propTypes={moduleFilter:g.a.array,onModuleSelect:g.a.func,onStatusSelect:g.a.func,selectedModule:g.a.string,selectedStatus:g.a.string,showModule:g.a.bool,showStatus:g.a.bool,statusFilter:g.a.array};var Y=n(1296),q=n(1609),Q=n.n(q),X=function(e){function t(){return s()(this,t),m()(this,(t.__proto__||c()(t)).apply(this,arguments))}return f()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.permission,n=void 0===t?{}:t,a=e.contactName,o=e.currencyCode,i=e.contactEmail,c=e.deleteContact;return _.a.createElement(E.Container,{className:Q.a.invocecustmerDetail,alignBox:"row",isCover:!1},_.a.createElement(E.Box,{flexible:!0,className:Q.a.invoceInfo},_.a.createElement("div",{className:Q.a.customerName},a),_.a.createElement("div",{className:Q.a.customerRole},o),_.a.createElement("div",{className:Q.a.customerId},i)),n.createInvoice||n.createEstimate||n.createContact?_.a.createElement(E.Box,{className:Q.a.invoDlink,onClick:c},b.f.getI18NValue("support.finance.delink.contact")):null)}}]),t}(_.a.Component),$=X;X.propTypes={contactEmail:g.a.string,contactName:g.a.string,currencyCode:g.a.string,deleteContact:g.a.func,permission:g.a.object};var ee=n(1610),te=n.n(ee),ne=function(e){function t(e){s()(this,t);var n=m()(this,(t.__proto__||c()(t)).call(this,e));return n.onScroll=n.onScroll.bind(n),n}return f()(t,e),u()(t,[{key:"formatDateForInvoice",value:function(e){var t=new Date(e),n=t.getDate(),a=t.getMonth(),o=t.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][a]+" "+n+" "+o}},{key:"onScroll",value:function(){var e=this,t=this.props,n=t.noMoreData,a=t.fetchData;if(!n){var o=this.scrollContainerRef;o.scrollHeight<=o.scrollTop+o.offsetHeight&&!this._Fetching&&(this._Fetching=!0,a().then(function(t){e._Fetching=!1}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.activity,a=t.noMoreData,o=t.permission,i=void 0===o?{}:o,c=t.viewFinace,r=null;return _.a.createElement(E.Box,{scroll:"vertical",flexible:!0,className:te.a.container,eleRef:function(t){e.scrollContainerRef=t},onScroll:this.onScroll},n&&n.map(function(t,n){var a=t.transacationId,o=t.date,s=t.dateDescription,l=t.description,u=t.transactionType,d=t.operationType,m=!0;return r==o&&(m=!1),r=o,_.a.createElement("div",{className:te.a.invoiceDetails},_.a.createElement("div",{className:te.a.circle}),_.a.createElement("div",{className:te.a.activityDetails},_.a.createElement("div",null,m?_.a.createElement("span",{className:te.a.date},e.formatDateForInvoice(o)):null,_.a.createElement("span",{className:te.a.noofDays},s)),_.a.createElement("div",{className:te.a.activityStatus},u," ",d),"invoice"==u&&i.viewInvoice||"estimate"==u&&i.viewEstimate?_.a.createElement("div",{className:te.a.activityDescription},l," -"," ",_.a.createElement("span",{className:te.a.viewDetails,onClick:c.bind(e,a,u)},b.f.getI18NValue("support.finance.comment.view.details"))):_.a.createElement("div",{className:te.a.activityDescription},l)))}),a?null:_.a.createElement(Y.a,null))}}]),t}(_.a.Component),ae=ne;ne.propTypes={activity:g.a.array,fetchData:g.a.fun,noMoreData:g.a.bool,permission:g.a.object,viewFinace:g.a.func};var oe=n(1611),ie=n.n(oe),ce=function(e){function t(){return s()(this,t),m()(this,(t.__proto__||c()(t)).apply(this,arguments))}return f()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.symbol,n=e.unusedAmount,a=e.outStandingAmount;return _.a.createElement(E.Container,{alignBox:"row",className:ie.a.creditDiv},_.a.createElement(E.Box,{className:ie.a.overviewDetails},_.a.createElement("div",{className:ie.a.valueAid,"data-title":n},t," ",n),_.a.createElement("div",{className:ie.a.usedValue},b.f.getI18NValue("support.finance.unused.credit"))),_.a.createElement(E.Box,{className:ie.a.overviewRecivedtls,"data-title":a},_.a.createElement("div",{className:ie.a.valueAid},t," ",a),_.a.createElement("div",{className:ie.a.receivable},b.f.getI18NValue("support.finance.outstand.receivable"))))}}]),t}(_.a.Component),re=ce;ce.propTypes={outStandingAmount:g.a.number,symbol:g.a.string,unusedAmount:g.a.number};var se=n(1612),le=n.n(se),ue=n(947),de=n.n(ue),me=function(e){function t(e){s()(this,t);var n=m()(this,(t.__proto__||c()(t)).call(this,e));return n.onScroll=n.onScroll.bind(n),n.constructMoreOption=n.constructMoreOption.bind(n),n}return f()(t,e),u()(t,[{key:"onScroll",value:function(){var e=this,t=this.props,n=t.noMoreData,a=t.fetchData;if(!n){var o=this.scrollContainerRef;o.scrollHeight<=o.scrollTop+o.offsetHeight&&!this._Fetching&&(this._Fetching=!0,a().then(function(t){e._Fetching=!1}))}}},{key:"constructMoreOption",value:function(e){var t=this.props.type;return e=e.toLowerCase(),"invoice"==t?"draft"===e?[{name:b.f.getI18NValue("support.finance.mark.as.sent"),id:"sent"},{name:b.f.getI18NValue("support.finance.void.invoice"),id:"void"},{name:b.f.getI18NValue("support.finance.clone.entity"),id:"clone"}]:"sent"===e?[{name:b.f.getI18NValue("support.finance.void.invoice"),id:"void"},{name:b.f.getI18NValue("support.finance.clone.entity"),id:"clone"}]:"void"===e?[{name:b.f.getI18NValue("support.finance.convert.to.draft"),id:"draft"},{name:b.f.getI18NValue("support.finance.clone.entity"),id:"clone"}]:"overdue"===e?[{name:b.f.getI18NValue("support.finance.void.invoice"),id:"void"},{name:b.f.getI18NValue("support.finance.clone.entity"),id:"clone"}]:[{name:b.f.getI18NValue("support.finance.clone.entity"),id:"clone"}]:"draft"===e?[{name:b.f.getI18NValue("support.finance.convert.to.invoice"),id:"invoice"},{name:b.f.getI18NValue("support.finance.mark.as.sent"),id:"sent"},{name:b.f.getI18NValue("support.finance.clone.entity"),id:"clone"}]:"sent"===e?[{name:b.f.getI18NValue("support.finance.mark.as.accepted"),id:"accepted"},{name:b.f.getI18NValue("support.finance.mark.as.declined"),id:"declined"},{name:b.f.getI18NValue("support.finance.convert.to.invoice"),id:"invoice"},{name:b.f.getI18NValue("support.finance.clone.entity"),id:"clone"}]:"accepted"===e?[{name:b.f.getI18NValue("support.finance.convert.to.invoice"),id:"invoice"},{name:b.f.getI18NValue("support.finance.mark.as.declined"),id:"declined"},{name:b.f.getI18NValue("support.finance.clone.entity"),id:"clone"}]:"declined"===e?[{name:b.f.getI18NValue("support.finance.mark.as.accepted"),id:"accepted"},{name:b.f.getI18NValue("support.finance.clone.entity"),id:"clone"}]:[{name:b.f.getI18NValue("support.finance.clone.entity"),id:"clone"}]}},{key:"stopPropagation",value:function(e){e&&e.stopPropagation&&e.stopPropagation(),e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=void 0===n?[]:n,o=t.type,i=t.noMoreData,c=t.permission,r=void 0===c?{}:c,s=t.updateStatus,l=t.cloneEntity,u=t.convertEstimateToInvoice,d=t.selectedItem,m=void 0===d?[]:d,p=t.onItemSelect,f=t.viewFinace;return _.a.createElement(E.Box,{eleRef:function(t){e.scrollContainerRef=t},flexible:!0,onScroll:this.onScroll,scroll:"vertical"},a.map(function(t,n){var a=t.estimateNumber,i=t.invoiceNumber,c=t.dateFormatted,d=t.totalFormatted,v=t.statusFormatted,I=t.id,g=t.status,h=v.toLocaleLowerCase().replace(" ","_"),y=m.includes(I);return _.a.createElement("div",{key:n,className:le.a.estimateDiv},_.a.createElement(E.Container,{alignBox:"row",className:le.a.alignItems,onClick:f.bind(e,I,o,g)},_.a.createElement(E.Box,{className:le.a.estimateDetails,shrink:!0},_.a.createElement("span",{className:le.a.checkBox+" "+(y?le.a.isChecked:""),onClick:e.stopPropagation},_.a.createElement(de.a,{checked:y,id:I,labelSize:"small",onChange:function(e){p(I,e)}})),_.a.createElement("div",{className:le.a.estimateNo},"estimate"==o?a:i),_.a.createElement("div",{className:le.a.estimateDate},c)),_.a.createElement(E.Box,{className:le.a.EstimateValue,shrink:!0},_.a.createElement("div",{className:le.a.totalValue,"data-title":d},d),_.a.createElement("div",{className:le.a.invoiceStatus+" "+le.a[h]},v,"invoice"==o&&r.createInvoice||"estimate"==o&&r.createEstimate?_.a.createElement("span",{className:le.a.moreIcon},_.a.createElement(J.a,{arrowRight:"10",IcnName:"more1",Icnsize:"13",isIconsInList:!1,objValues:e.constructMoreOption(v),onSelect:function(e){if(e==b.f.getI18NValue("support.finance.mark.as.sent"))e="sent";else if(e==b.f.getI18NValue("support.finance.void.invoice"))e="void";else if(e==b.f.getI18NValue("support.finance.convert.to.draft"))e="draft";else if(e==b.f.getI18NValue("support.finance.mark.as.accepted"))e="accepted";else if(e==b.f.getI18NValue("support.finance.mark.as.declined"))e="declined";else{if(e==b.f.getI18NValue("support.finance.convert.to.invoice"))return void u(I);if(e==b.f.getI18NValue("support.finance.clone.entity"))return void l(I,o)}s(o,I,e)},right:"17"})):null))))}),i?null:_.a.createElement(Y.a,null))}}]),t}(_.a.Component),pe=me;me.propTypes={cloneEntity:g.a.func,convertEstimateToInvoice:g.a.func,fetchData:g.a.func,list:g.a.array,noMoreData:g.a.bool,onItemSelect:g.a.func,permission:g.a.object,selectedItem:g.a.array,type:g.a.string,updateStatus:g.a.func,viewFinace:g.a.func};var fe=n(1613),ve=n.n(fe),_e=function(e){function t(){return s()(this,t),m()(this,(t.__proto__||c()(t)).apply(this,arguments))}return f()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.markAllSent,n=e.downloadInvoicePDF,a=e.printInvoicePDF;return _.a.createElement(E.Container,{className:ve.a.headerDiv,alignBox:"row",align:"vertical",isCover:!1},_.a.createElement("span",{className:ve.a.markSent,onClick:t},b.f.getI18NValue("support.finance.mark.as.sent")),_.a.createElement("span",{className:ve.a.iconPdf,onClick:n},_.a.createElement(O.CommonFontIcon,{name:"filePdf",size:"10"})),_.a.createElement("span",{className:ve.a.iconPrint,onClick:a},_.a.createElement(O.TopbandFontIcon,{name:"printing2",size:"11"})))}}]),t}(_.a.Component),Ie=_e;_e.propTypes={downloadInvoicePDF:g.a.func,markAllSent:g.a.func,printInvoicePDF:g.a.func};var ge,he=n(1069),ye=b.f.getI18NValue,Ee=function(e){function t(e){s()(this,t);var n=m()(this,(t.__proto__||c()(t)).call(this,e));return n.state={pageNumber:1,activity:[]},n.ticketSelectedLabel=ye("support.finance.module.invoices",[n.props.moduleMeta.tickets.singularLabel]),n.getModuleFilters=n.getModuleFilters.bind(n),n.getStatusFilters=n.getStatusFilters.bind(n),n.onModuleSelect=n.onModuleSelect.bind(n),n.onStatusSelect=n.onStatusSelect.bind(n),n.getInvoices=n.getInvoices.bind(n),n.getEstimates=n.getEstimates.bind(n),n.onTabchange=n.onTabchange.bind(n),n.getActivity=n.getActivity.bind(n),n.deleteContact=n.deleteContact.bind(n),n.updateStatus=n.updateStatus.bind(n),n.onItemSelect=n.onItemSelect.bind(n),n.markAllSent=n.markAllSent.bind(n),n.statusSuccessCallback=n.statusSuccessCallback.bind(n),n.downloadInvoicePDF=n.downloadInvoicePDF.bind(n),n.printInvoicePDF=n.printInvoicePDF.bind(n),n.viewFinace=n.viewFinace.bind(n),n.cloneEntity=n.cloneEntity.bind(n),n.convertEstimateToInvoice=n.convertEstimateToInvoice.bind(n),n.viewFinaceFromActivity=n.viewFinaceFromActivity.bind(n),n.reloadList=n.reloadList.bind(n),n}return f()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.reloadList()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.resetDefaultData,n=e.closeInvoiceInfo;t(),n()}},{key:"reloadList",value:function(){var e=this.props,t=e.selectedModule,n=e.selectedStatus,a=e.currentTab;"invoice"==a?this.getInvoices(1,t,n):"estimate"==a?this.getEstimates(1,t,n):"activity"==a&&this.getActivity(1)}},{key:"componentDidUpdate",value:function(){this.props.isRefresh&&this.reloadList()}},{key:"onModuleSelect",value:function(e){var t=ye("support.finance.status.all");this.props.onModuleSelect(e,t),"estimate"==this.props.currentTab?this.getEstimates(1,e,t):this.getInvoices(1,e,t)}},{key:"onStatusSelect",value:function(e){var t=this.props,n=t.selectedModule,a=t.onStatusSelect;a(e),"estimate"==this.props.currentTab?this.getEstimates(1,n,e):this.getInvoices(1,n,e)}},{key:"onItemSelect",value:function(e,t){var n=this.props,a=n.selectedItem,o=n.onItemSelect;o(a=t?a.concat(e):a.filter(function(t){return t!==e}))}},{key:"getModuleFilters",value:function(){var e=this.props.moduleMeta;return[{name:ye("support.finance.module.invoices",[e.tickets.singularLabel]),id:"ticket"},{name:ye("support.finance.module.invoices",[e.contacts.singularLabel]),id:"contact"}]}},{key:"getStatusFilters",value:function(e){var t=[];return("invoice"==e?["support.finance.status.all","support.finance.status.sent","support.finance.status.draft","support.finance.status.overdue","support.finance.status.paid","support.finance.status.void","support.finance.status.unpaid","support.finance.status.partially_paid","support.finance.status.viewed"]:["support.finance.status.all","support.finance.status.sent","support.finance.status.draft","support.finance.status.invoiced","support.finance.status.accepted","support.finance.status.declined","support.finance.status.expired"]).forEach(function(e){t.push({name:ye(e),id:ye(e)})}),t}},{key:"onTabchange",value:function(e){var t=this.props,n=t.changeFinanceEntity;t.currentTab!=e&&n({entity:e})}},{key:"getInvoices",value:function(e,t,n){var a=this;e=e||this.state.pageNumber+1;var o=this.props,i=o.ticketId,c=o.getInvoices,r=o.contactId,s=o.deskModuleName,l=s,u=r,d=n.toLowerCase().replace(" ","_");return"Cases"===s&&(t===this.ticketSelectedLabel?u=i:l="Contacts"),c(l,d,u,e).then(function(){return a.setState({pageNumber:e})})}},{key:"getEstimates",value:function(e,t,n){e=e||this.state.pageNumber+1;var a=this.props,o=a.ticketId,i=a.getEstimates,c=a.contactId,r=a.deskModuleName,s=c,l=r,u=n.toLowerCase().replace(" ","_");return"Cases"===r&&(t===this.ticketSelectedLabel?s=o:l="Contacts"),i(l,u,s,e)}},{key:"getActivity",value:function(e){var t=this;e=e||this.state.pageNumber+1;var n=this.props,a=n.getActivity;return a(n.financeContact.id,e).then(function(n){var a=n.data.data.length<10,o=1==e?n.data.data:t.state.activity.concat(n.data.data);t.setState({activity:o,noMoreActivity:a,pageNumber:e})})}},{key:"deleteContact",value:function(){var e=this.props,t=e.deleteContact,n=e.closeInvoiceInfo,a=e.showMessage;t(e.contactId).then(function(){a({type:"success",message:ye("support.finance.integ.contact.unmapped")}),n()})}},{key:"updateStatus",value:function(e,t,n){var a=this,o=this.props,i=o.updateInvoiceStatus,c=o.updateEstimateStatus;"invoice"==e?i(t,n).then(function(){a.statusSuccessCallback(e,n)}):c(t,n).then(function(){a.statusSuccessCallback(e,n)})}},{key:"cloneEntity",value:function(e,t){var n=this.props,a=n.orgName,o=n.openIframeForm,i=n.accountType;ZInvoice.isDetailView=!1,ZInvoice.entityType=t;var c="/support/"+a+"/connectzb?entityType="+("invoices"===t||"invoice"===t?C.t.ZB_INVOICE_CLONE:C.t.ZB_ESTIMATE_CLONE)+"&acceptJHTML=true&entityid="+e+"&accountType="+i;"invoices"===t&&ZInvoice.isUnbilledTimeEntriesAvailable(),o({isOpen:!0,src:c})}},{key:"convertEstimateToInvoice",value:function(e){var t=this.props,n=t.ticketId,a=t.orgName,o=t.openIframeForm,i=t.deskModuleName,c=t.accountType;ZInvoice.isDetailView=!1,ZInvoice.entityType="invoices","Cases"===i&&(ZInvoice.caseId=n),o({isOpen:!0,src:"/support/"+a+"/connectzb?entityType="+C.t.ZB_ESTIMATE_TO_INVOICE+"&acceptJHTML=true&entityid="+e+"&accountType="+c})}},{key:"markAllSent",value:function(){var e=this,t=this.props,n=t.markAllInvoicesSent,a=t.markAllEstimateSent,o=t.selectedItem,i=this.props.currentTab;"invoice"==i?n(o).then(function(){e.statusSuccessCallback(i,"Sent")}):a(o).then(function(){e.statusSuccessCallback(i,"Sent")})}},{key:"statusSuccessCallback",value:function(e,t){var n=this.props,a=n.showMessage,o=n.selectedModule,i=n.selectedStatus;"invoice"==e?(a({type:"success",message:ye("support.finance.staus.update",[ye("support.invoice.label.for.ticket"),t])}),this.getInvoices(1,o,i)):(a({type:"success",message:ye("support.finance.staus.update",[ye("support.estimate.label.for.ticket"),t])}),this.getEstimates(1,o,i))}},{key:"downloadInvoicePDF",value:function(){var e=this.props,t=e.currentTab,n=e.clearSelectedFinanceEntities,a=e.selectedItem,o=e.orgName,i=e.financeContact,c=e.accountType,r="";"invoice"==t?(r="501",1==a.length&&(r="14")):(r="502",1==a.length&&(r="15")),1==a.length?window.location.href="/support/"+o+"/connectzb?entityType="+r+"&entityid="+a.toString()+"&accountType="+c:window.location.href="/support/"+o+"/connectzb?entityType=501&entityids="+a.toString()+"&contactName="+encodeURIComponent(i.contactName)+"&limit="+a.length+"&accountType="+c,n()}},{key:"printInvoicePDF",value:function(){var e=this.props,t=e.currentTab,n=e.clearSelectedFinanceEntities,a=e.accountType,o=e.selectedItem,i=e.orgName,c=e.financeContact,r="";if("invoice"==t?(r="503",1==o.length&&(r="14")):(r="504",1==o.length&&(r="15")),1==o.length)var s="/support/"+i+"/connectzb?entityType="+r+"&print=true&entityid="+o.toString()+"&accountType="+a;else s="/support/"+i+"/connectzb?entityType="+r+"&print=true&entityids="+o.toString()+"&contactName="+encodeURIComponent(c.currencycode)+"&limit="+o.length+"&accountType="+a;window.open(s,"_blank"),n()}},{key:"viewFinaceFromActivity",value:function(e,t){var n=this,a=this.props,o=a.orgName,i=a.getFinaceEntity,c=a.accountType;i("/support/"+o+"/connectzb?entityType="+("invoice"==t?12:13)+"&entityid="+e+"&accountType="+c).then(function(a){var o=a.data,i="";"invoice"==t&&o.invoice&&(i=o.invoice.status),"estimate"==t&&o.estimate&&(i=o.estimate.status),n.viewFinace(e,t,i)})}},{key:"viewFinace",value:function(e,t,n){var a=this.props,o=a.orgName,i=a.openInvoiceDetails,c=a.financePermissions,r="/support/"+o+"/connectzb?entityType="+("invoice"==t?"12":"13")+"&acceptJHTML=true&entityid="+e+"&accountType="+a.accountType;ZInvoice.entityType=t,ZInvoice.entityId=e,i({isOpen:!0,invoiceId:e,type:t,status:n,src:r,permissions:c})}},{key:"render",value:function(){var e=this.props,t=e.financePermissions,n=void 0===t?{}:t,a=e.closeInvoiceInfo,o=e.financeContact,i=e.invoices,c=e.estimates,r=e.selectedModule,s=e.selectedStatus,l=e.noMoreData,u=e.selectedItem,d=e.deskModuleName,m=e.currentTab,p=e.createInvoice,f=e.createEstimate,v=e.heading,I=this.state,g=I.activity,h=I.noMoreActivity,b="Cases"===d,N=void 0;"invoice"===m&&i?N=s!==ye("support.finance.status.all")||0!==i.length:"estimate"===m&&c&&(N=s!==ye("support.finance.status.all")||0!==c.length);var k="Cases"===d;l="activity"==m?h:l;var S=o.contactName,C=o.currencyCode,T=o.currencySymbol,w=o.outstanding_receivable_amount,O=o.unused_credits_receivable_amount,F=o.email,M=this.getModuleFilters();return _.a.createElement(E.Container,{alignBox:"column"},_.a.createElement(E.Box,null,_.a.createElement(P,{titlehead:ye("support.finance.contact.info",[v,"Contact"]),newtab:"newtab",arrow:"arrowRight",onClose:a,hasBackButton:k}),S?_.a.createElement($,{permission:n,contactName:S,currencyCode:C,contactEmail:F,deleteContact:this.deleteContact}):_.a.createElement(Y.a,null)),_.a.createElement(E.Box,{flexible:!0},_.a.createElement(y.TabWrapper,{defaultTab:m,type:"delta",needTabBorder:!0,onSelect:this.onTabchange},u.length?_.a.createElement(Ie,{markAllSent:this.markAllSent,downloadInvoicePDF:this.downloadInvoicePDF,printInvoicePDF:this.printInvoicePDF}):_.a.createElement(y.Tabs,{isResponsive:!1},_.a.createElement(y.Tab,{id:"overview",onClick:function(){},text:ye("support.finance.overview")}),_.a.createElement(y.Tab,{id:"activity",onClick:function(){},text:ye("support.finance.activity")}),_.a.createElement(y.Tab,{id:"estimate",onClick:function(){},text:ye("support.finance.integ.estimate")}),_.a.createElement(y.Tab,{id:"invoice",onClick:function(){},text:ye("support.finance.integ.invoice")})),_.a.createElement(y.TabContentWrapper,null,_.a.createElement(y.TabContent,{id:"overview"},_.a.createElement(re,{symbol:T,unusedAmount:O,outStandingAmount:w})),_.a.createElement(y.TabContent,{id:"activity"},g.length?_.a.createElement(E.Box,{flexible:!0},_.a.createElement(E.Container,{alignBox:"column"},_.a.createElement(ae,{activity:g,noMoreData:l,fetchData:this.getActivity,permission:n,viewFinace:this.viewFinaceFromActivity}))):_.a.createElement(Y.a,null)),_.a.createElement(y.TabContent,{id:"estimate"},_.a.createElement(E.Box,{flexible:!0},_.a.createElement(E.Container,{alignBox:"column",isScrollAttribute:!0},b||N?_.a.createElement(K,{moduleFilter:M,statusFilter:this.getStatusFilters("estimate"),selectedModule:r==this.ticketSelectedLabel?M[0].name:M[1].name,selectedStatus:s,onModuleSelect:this.onModuleSelect,onStatusSelect:this.onStatusSelect,showStatus:N,showModule:b}):null,c?c.length?_.a.createElement(pe,{list:c,type:"estimate",permission:n,noMoreData:r==this.ticketSelectedLabel||l,fetchData:this.getEstimates,updateStatus:this.updateStatus,selectedItem:u,onItemSelect:this.onItemSelect,viewFinace:this.viewFinace,cloneEntity:this.cloneEntity,convertEstimateToInvoice:this.convertEstimateToInvoice}):_.a.createElement(V,{text:ye("support.finance.estimate.not.found")}):_.a.createElement(Y.a,null)))),_.a.createElement(y.TabContent,{id:"invoice"},_.a.createElement(E.Box,{flexible:!0},_.a.createElement(E.Container,{alignBox:"column",isScrollAttribute:!0},b||N?_.a.createElement(K,{moduleFilter:M,statusFilter:this.getStatusFilters("invoice"),selectedModule:r==this.ticketSelectedLabel?M[0].name:M[1].name,selectedStatus:s,onModuleSelect:this.onModuleSelect,onStatusSelect:this.onStatusSelect,showStatus:N,showModule:b}):null,i?i.length?_.a.createElement(pe,{list:i,type:"invoice",permission:n,noMoreData:r==this.ticketSelectedLabel||l,fetchData:this.getInvoices,updateStatus:this.updateStatus,selectedItem:u,onItemSelect:this.onItemSelect,cloneEntity:this.cloneEntity,viewFinace:this.viewFinace}):_.a.createElement(V,{text:ye("support.finance.invoice.not.found")}):_.a.createElement(Y.a,null))))))),_.a.createElement(E.Box,null,_.a.createElement(H,{permission:n,createEstimate:f,createInvoice:p})))}}]),t}(v.Component);Ee.propTypes=(ge={accountType:g.a.string,changeFinanceEntity:g.a.func,clearSelectedFinanceEntities:g.a.func,closeInvoiceInfo:g.a.func,contactId:g.a.string,createEstimate:g.a.func},o()(ge,"createEstimate",g.a.func),o()(ge,"createInvoice",g.a.func),o()(ge,"currentTab",g.a.string),o()(ge,"deleteContact",g.a.func),o()(ge,"deskModuleName",g.a.string),o()(ge,"estimates",g.a.array),o()(ge,"financeContact",g.a.object),o()(ge,"financePermissions",g.a.object),o()(ge,"getActivity",g.a.func),o()(ge,"getEstimates",g.a.func),o()(ge,"getFinaceEntity",g.a.func),o()(ge,"getInvoices",g.a.func),o()(ge,"heading",g.a.string),o()(ge,"invoices",g.a.array),o()(ge,"isRefresh",g.a.bool),o()(ge,"markAllEstimateSent",g.a.func),o()(ge,"markAllInvoicesSent",g.a.func),o()(ge,"moduleMeta",g.a.object),o()(ge,"noMoreData",g.a.bool),o()(ge,"onItemSelect",g.a.func),o()(ge,"onModuleSelect",g.a.func),o()(ge,"onStatusSelect",g.a.func),o()(ge,"openIframeForm",g.a.func),o()(ge,"openInvoiceDetails",g.a.func),o()(ge,"orgName",g.a.string),o()(ge,"resetDefaultData",g.a.func),o()(ge,"selectedItem",g.a.array),o()(ge,"selectedModule",g.a.string),o()(ge,"selectedStatus",g.a.string),o()(ge,"showMessage",g.a.func),o()(ge,"ticketId",g.a.string),o()(ge,"updateEstimateStatus",g.a.func),o()(ge,"updateInvoiceStatus",g.a.func),ge);t.default=Object(h.connect)(function(e){var t=e.moduleMeta,n=e.financeInfo,a=n.invoices,o=n.estimates,i=n.noMoreData,c=void 0!==i&&i,r=n.selectedItem,s=void 0===r?[]:r,l=n.entity,u=void 0===l?"invoice":l,d=n.isRefresh,m=void 0!==d&&d,p=n.selectedModule,f=void 0===p?ye("support.finance.module.invoices",[t.tickets.singularLabel]):p,v=n.selectedStatus,_=void 0===v?ye("support.finance.status.all"):v,I=n.financeContact,g=void 0===I?{}:I,h=e.moduleMapper[e.routing.paramMap.moduleName],y=C.l[h],E=y.deskModuleName,b=y.stateKey,N=e.routing.paramMap.moduleId,k=e.module[b][N],T="tickets"===h?k.contactId:N,w="tickets"===h?N:null,O="ENABLED"==e.integrations.INVOICE.status?ye("support.invoice.integ.setup.title"):ye("support.books.integ.setup.title");return{accountType:Object(he.a)(e),financePermissions:Object(he.b)(e),orgName:Object(S.O)(e),moduleMeta:t,invoices:a,estimates:o,noMoreData:c,currentTab:u,selectedItem:s,isRefresh:m,selectedModule:f,selectedStatus:_,ticketId:w,contactId:T,deskModuleName:E,financeContact:g,heading:O}},{getInvoices:N.n,getEstimates:N.l,getActivity:N.k,deleteContact:N.j,updateInvoiceStatus:N.B,updateEstimateStatus:N.A,showMessage:k.Q,openInvoiceDetails:N.w,markAllInvoicesSent:N.r,markAllEstimateSent:N.q,onModuleSelect:N.t,onStatusSelect:N.u,onItemSelect:N.s,resetDefaultData:N.z,openIframeForm:N.v,getFinaceEntity:N.m,changeFinanceEntity:N.a,clearSelectedFinanceEntities:N.b,createEstimate:N.h,createInvoice:N.i})(Ee)},947:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=s(n(0)),i=s(n(1)),c=s(n(953)),r=s(n(151));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"onChange",value:function(e){var t=this.props,n=t.onChange,a=t.checked;n&&n(!a,e)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.name,a=e.checked,i=e.disabled,s=e.palette,l=e.text,u=e.labelPalette,d=e.active,m=e.labelSize,p=e.getRef,f=e.dataId,v=d?c.default[s+"_active"]:"",_=i?c.default.disabled:c.default.pointer;return o.default.createElement("span",{className:c.default.container+" "+_+" "+(l?c.default.layout:c.default.basic)+" "},o.default.createElement("input",{type:"checkbox",className:c.default.input+" "+(a?c.default.checked:""),name:n,checked:a,disabled:i,ref:p}),o.default.createElement("label",{className:c.default["label_"+s]+" "+v+" "+(l?c.default.layoutshrink:""),onClick:this.onChange,"data-id":f},o.default.createElement("span",null)),l&&o.default.createElement("span",{className:c.default.text},o.default.createElement(r.default,{text:l,palette:u,id:t,size:m,type:"title",clipped:!0,onClick:this.onChange})))}}]),t}();t.default=l,l.defaultProps={active:!1,checked:!1,disabled:!1,labelPalette:"default",labelSize:"medium",palette:"primary"},l.propTypes={active:i.default.bool,checked:i.default.bool,dataId:i.default.string,disabled:i.default.bool,getRef:i.default.func,id:i.default.string.isRequired,labelPalette:i.default.oneOf(["default","primary","secondary","danger","mandatory"]),labelSize:i.default.oneOf(["small","medium","large"]),name:i.default.string,onChange:i.default.func,palette:i.default.oneOf(["primary","danger"]),text:i.default.string},l.propTypesDescription={disabled:" ",checked:" ",active:" ",labelPalette:" ",labelSize:" ",getRef:" ",palette:" ",onChange:" ",text:" "}},953:function(e,t,n){e.exports={container:"CheckBox-module__container common-module__offSelection",layout:"CheckBox-module__layout common-module__dflex common-module__flexrow common-module__alignVertical",basic:"CheckBox-module__basic",input:"CheckBox-module__input",label:"CheckBox-module__label",disabled:"CheckBox-module__disabled common-module__disabled",pointer:"CheckBox-module__pointer",layoutshrink:"CheckBox-module__layoutshrink common-module__flexshrink",text:"CheckBox-module__text common-module__flexgrow",checked:"CheckBox-module__checked",tick:"CheckBox-module__tick",label_primary:"CheckBox-module__label_primary CheckBox-module__label",label_danger:"CheckBox-module__label_danger CheckBox-module__label",primary_active:"CheckBox-module__primary_active",danger_active:"CheckBox-module__danger_active"}}}]);