(window.deskappJsonp=window.deskappJsonp||[]).push([[63],{1004:function(e,t,a){"use strict";(function(e){var n=a(11),o=a.n(n),i=a(2),r=a.n(i),s=a(12),l=a.n(s),c=a(9),d=a.n(c),m=a(10),u=a.n(m),p=a(13),h=a.n(p),f=a(14),g=a.n(f),v=a(0),_=a.n(v),C=(a(1),a(16)),b=a(1012),E=a(997),y=a(1013),I=a.n(y),A=(a(1014),function(t){function a(e){d()(this,a);var t=h()(this,(a.__proto__||l()(a)).call(this,e));t.state={isEditorLoad:!1};return E.a.apply(t,["editorCallback","handleUpload","handleChange","focusCallback","handleInlineUpload","processPastedFile","handleDropUpload","blurCallback"]),t}return g()(a,t),u()(a,[{key:"componentDidMount",value:function(){var t=this.props,a=t.id,n=t.value,o=t.editorMode,i=void 0===o?"":o,s=t.editorOptions,l=void 0===s?{}:s,c=t.needEditorFocus,d=void 0===c||c,m=t.mode;if(a&&e.ZohoDeskEditor){var u={id:a,content:n,callback:this.editorCallback,imageuploadcallback:this.handleInlineUpload,processPastedFile:this.processPastedFile,handleInlineDropImage:this.handleDropUpload,contentChanged:this.handleChange,focusCallback:this.focusCallback,lineHeight:"Normal",needEditorFocus:d,blurCallback:this.blurCallback,mode:m};u=r()(u,l),ZohoDeskEditor_Init.init(i),ZohoDeskEditor.create&&ZohoDeskEditor.create(u)}}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.id,n=t.chageEditorContent;t.value;e.isEmptyContent&&editor[a]&&editor[a].setContent(""),e.chageEditorContent!=n&&e.chageEditorContent&&void 0!==n&&editor[a].setContent(e.value)}},{key:"componentWillUnmount",value:function(){var t=this.props.id;e.editor&&e.editor[t]&&delete e.editor[t]}},{key:"focusCallback",value:function(){var e=this.props.onFocus;e&&e()}},{key:"handleChange",value:function(){var e=this.props,t=e.onChange,a=e.id,n=editor[a]?editor[a]:{},o=n.getContent?n.getContent():"";Object(b.a)(n)||(o=""),o="plaintext"===n.mode?Object(b.b)(o):o,t&&t(o.trim(),a)}},{key:"editorCallback",value:function(t){var a=this.props.editorCallback;this.setState({isEditorLoad:!0});var n=this.props.id;e.editor=e.editor||{},editor[n]||(editor[n]=t),a&&a(t)}},{key:"handleInlineUpload",value:function(e,t,a,n,o){this.handleUpload(e).then(function(e){var a={};a[0]={url:e,desc:o},t(a,n)},function(){a(n)})}},{key:"handleDropUpload",value:function(e,t,a){this.handleUpload(e).then(function(e){t(e)},function(){a()})}},{key:"blurCallback",value:function(){var e=this.props.blurCallback;e&&e()}},{key:"processPastedFile",value:function(e,t,a,n){var o=void 0;"blob"===t?o=e:(o=new Blob([e.split(",")[1]],{type:"image/png"})).name="zohokb_"+(new Date).getTime()+Math.floor(1e3*Math.random()+1);this.handleUpload(o).then(function(e){a(e)},function(){n()})}},{key:"handleUpload",value:function(e){var t=this.props.onUpload;try{var a=new FormData;return a.append("file",e),t(a).then(function(e){var t=e.data||{},a=t.data,n=t.orgId,o=a||{},i=o.id,r=o.href;if(i)return r+"?orgId="+n;throw{}},function(e){throw e})}catch(e){return o.a.reject()}}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.dataId,n=this.state.isEditorLoad;return _.a.createElement(C.Container,{className:I.a.editDraft,dataId:a},!n&&_.a.createElement("div",{className:I.a.stencillist9},_.a.createElement("div",{className:I.a.stencilLoading}),_.a.createElement("div",{className:I.a.stencilLoading}),_.a.createElement("div",{className:I.a.stencilLoading}),_.a.createElement("div",{className:I.a.stencilLoading}),_.a.createElement("div",{className:I.a.stencilLoading}),_.a.createElement("div",{className:I.a.stencilLoading})),_.a.createElement(C.Box,{flexible:!0,id:t,dataId:a}))}}]),a}(v.Component));t.a=A}).call(this,a(68))},1007:function(e,t,a){"use strict";var n,o=a(5),i=a.n(o),r=a(12),s=a.n(r),l=a(9),c=a.n(l),d=a(10),m=a.n(d),u=a(13),p=a.n(u),h=a(14),f=a.n(h),g=a(0),v=a.n(g),_=a(1),C=a.n(_),b=a(1042),E=a.n(b),y=a(157),I=a.n(y),A=a(30),k=a(80),S=a.n(k),N=a(72),T=a.n(N),w=a(1026),O=a.n(w),x=a(361),D=a.n(x),P=function(e){function t(e){c()(this,t);var a=p()(this,(t.__proto__||s()(t)).call(this,e));return a.handleSelect=a.handleSelect.bind(a),a.togglePopup=a.togglePopup.bind(a),a}return f()(t,e),m()(t,[{key:"handleSelect",value:function(e,t,a,n){if(void 0!==this.props.onSelect){var o=this.props;(0,o.onSelect)(e,o.entity)}this.props.togglePopup(n)}},{key:"togglePopup",value:function(e){var t=this.props,a=t.togglePopup,n=t.boxPosition;e.stopPropagation(),a(e,n)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.isPopupOpen,n=t.onPopupChange;e.isPopupOpen!==a&&n&&n(a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.theme,n=void 0===a?"white":a,o=t.objValues,i=t.Icnsize,r=t.IcnName,s=(t.removeClose,t.listStyle,t.arrowPosition),l=t.position,c=t.right,d=(t.isScroll,t.widgets),m=void 0===d?[]:d,u=t.onWidgetScroll,p=t.onWidgetSelect,h=t.selectedWidgetId,f=t.arrowRight,g=t.arrowLeft,_=t.size,C=t.left,b=t.isPopupOpen,y=t.isPopupReady,k=t.getTargetRef,S=t.getContainerRef;return i=i||"medium",v.a.createElement("span",{className:I.a.posrel,ref:k,onClick:this.togglePopup},v.a.createElement("span",{className:E.a.defaultSize+" "+I.a.posrel+" "+E.a[n]},v.a.createElement("span",null,v.a.createElement(A.TopbandFontIcon,{name:r,size:i}))),b?v.a.createElement("span",{className:E.a.dropDivPosition},v.a.createElement(T.a,{isAnimate:!0,right:c,left:C,isActive:y,size:_,arrowRight:f,arrowLeft:g,boxPosition:l,getRef:S,arrowPosition:s},o.map(function(t,a){return v.a.createElement(D.a,{autoHover:!0,value:t.name,iconName:t.iconName||null,iconClass:t.iconClass,iconSize:t.size,key:a,id:t.name,onClick:e.handleSelect,dataId:"Delete"===t.name?"delete":"Edit"===t.name?"edit":t.name})}),o.length&&m.length?v.a.createElement(O.a,null):null,m.length?v.a.createElement("div",{className:E.a.widgetList,onScroll:u},m.map(function(e){var t=e.name,a=e.sanitisedName+"_"+e.installationId;return h!=a?v.a.createElement(D.a,{autoHover:!0,value:decodeURIComponent(t),iconName:null,key:a,id:a,onClick:function(){p(a,e)}}):null})):null)):null)}}]),t}(g.Component);P.defaultProps={IcnName:"more1",size:"small"},P.propTypes=(n={IcnName:C.a.string,Icnsize:C.a.string,arrowLeft:C.a.string,arrowPosition:C.a.string,arrowRight:C.a.string,boxPosition:C.a.string,entity:C.a.object,getContainerRef:C.a.func},i()(n,"getContainerRef",C.a.func),i()(n,"getTargetRef",C.a.func),i()(n,"isPopupOpen",C.a.bool),i()(n,"isPopupReady",C.a.bool),i()(n,"isScroll",C.a.bool),i()(n,"left",C.a.string),i()(n,"listStyle",C.a.string),i()(n,"objValues",C.a.array),i()(n,"onPopupChange",C.a.func),i()(n,"onSelect",C.a.func),i()(n,"onWidgetScroll",C.a.func),i()(n,"onWidgetSelect",C.a.func),i()(n,"position",C.a.string),i()(n,"removeClose",C.a.func),i()(n,"right",C.a.string),i()(n,"selectedWidgetId",C.a.string),i()(n,"size",C.a.string),i()(n,"theme",C.a.string),i()(n,"togglePopup",C.a.func),i()(n,"widgets",C.a.array),n),t.a=S()(P)},1012:function(e,t,a){"use strict";function n(e){var t=e&&e.getContent&&e.getContent()||"";return!(""==t||!t.length||"<div><br></div>"==t||!("plaintext"===e.mode||e.doc.body.innerText.trim().length||e.doc.getElementsByTagName("img").length||e.doc.getElementsByTagName("iframe").length))}function o(e){return 1==/<|>|&|"|'|\\/g.test(e)&&(e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/\\/g,"&#x5c;")).replace(/'/g,"&#39;")),e}a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})},1013:function(e,t,a){e.exports={icon:"TextEditor-module__icon",small:"TextEditor-module__small",threeDotIcon:"TextEditor-module__threeDotIcon",editDraft:"TextEditor-module__editDraft",New_Editor_MultiTools:"TextEditor-module__New_Editor_MultiTools",cardDetail:"TextEditor-module__cardDetail",stencilLoading:"TextEditor-module__stencilLoading",stencillist9:"TextEditor-module__stencillist9",Stencils__placeHolderShimmer:"TextEditor-module__Stencils__placeHolderShimmer"}},1014:function(e,t,a){(function(e){e.ZohoDeskEditor_Init=function(){},ZohoDeskEditor_Init.init=function(e){ZohoDeskEditor_Init.version="v1.8.9",ZohoDeskEditor_Init.inlineQuotes=!0,ZohoDeskEditor_Init.csrfCookieVal="",ZohoDeskEditor_Init.csrfParamVal="",ZohoDeskEditor_Init.defaultFontSize="16",ZohoDeskEditor_Init.defaultFontFamily="ProximaNovaRegular, Arial, Helvetica, sans-serif",ZohoDeskEditor_Init.dropDownTopPadding=11,ZohoDeskEditor_Init.dropDownLeftPadding=5,ZohoDeskEditor_Init.slidebarClass="KB_Editor_DropDown_Slidebar";var t=navigator.userAgent.toLowerCase();ZohoDeskEditor_Init.is_ie=-1!==t.indexOf("ie"),ZohoDeskEditor_Init.is_safari=-1!==t.indexOf("safari"),ZohoDeskEditor_Init.is_opera=-1!==t.indexOf("opera"),ZohoDeskEditor_Init.is_mac=-1!==t.indexOf("mac"),ZohoDeskEditor_Init.loading=!0,ZohoDeskEditor_Init.changedTools=["fontfamily"],ZohoDeskEditor_Init.spellcheckURL="lt.zoho.com",ZohoDeskEditor_Init.useProxy=!0,ZohoDeskEditor_Init.useSameDomain=!0,ZohoDeskEditor_Init.domain=document.domain,ZohoDeskEditor_Init.contextVal="support",ZohoDeskEditor_Init.spellcheckProxyUrl="/"+ZohoDeskEditor_Init.contextVal+"/ze",ZohoDeskEditor_Init.tabKeyHandling=!0;var a=window.location.protocol,n="",o="com",i="",r=".zohostatic.";"US".indexOf("SKY")>-1&&(r=".skydeskstatic.",o="jp"),"US".indexOf("RO")>-1&&(i="-ro"),["LOC","DEV"].indexOf("US")>-1&&(n="local"),ZohoDeskEditor_Init.jsurl=a+"//"+n+"localjs"+i+r+o+"/zde/"+ZohoDeskEditor_Init.version+"/js/",ZohoDeskEditor_Init.cssurl=a+"//"+n+"localcss"+i+r+o+"/zde/"+ZohoDeskEditor_Init.version+"/css/",ZohoDeskEditor_Init.imgurl=a+"//"+n+"localimg"+i+r+o+"/zde/"+ZohoDeskEditor_Init.version+"/images/","CommentEditor"==e||"replyComments"==e?(ZohoDeskEditor_Init.toolbarOrder=[["bold","Bold (Ctrl+B)","#KBEditortools_txtbold","KBEditortools-txtbold"],["italic","Italic (Ctrl+I)","#KBEditortools_txtitalic","KBEditortools-txtitalic"],["undterline","Underline (Ctrl+U)","#KBEditortools_txtunderline","KBEditortools-txtunderline"],["forecolor","Font color","#KBEditortools_clrpick","KBEditortools-clrpick"],["backcolor","Background color","#KBEditortools_bgclr","KBEditortools-bgclr"],["listoptions","Lists","#KBEditortools_list_round","KBEditortools-list-round"],["removeFormat","Clear formatting","#KBEditortools_clr","KBEditortools-clr"],["link","Insert link","#KBEditortools_insertlink","KBEditortools-insertlink"],["table","Insert table","#KBEditortools_inserttable","KBEditortools-inserttable"]],"replyComments"==e&&(ZohoDeskEditor_Init.toolbarOrder=ZohoDeskEditor_Init.toolbarOrder.slice(0,5))):ZohoDeskEditor_Init.toolbarOrder=[["bold","Bold (Ctrl+B)","#KBEditortools_txtbold","KBEditortools-txtbold"],["italic","Italic (Ctrl+I)","#KBEditortools_txtitalic","KBEditortools-txtitalic"],["underline","Underline (Ctrl+U)","#KBEditortools_txtunderline","KBEditortools-txtunderline"],["forecolor","Font color","#KBEditortools_clrpick","KBEditortools-clrpick"],["backcolor","Background color","#KBEditortools_bgclr","KBEditortools-bgclr"],["heading","Headings","#KBEditortools_block_down_arrow","KB_Editor_Bdr_div Text_Type"],["fontSize","Font size","#KBEditortools_block_down_arrow","KB_Editor_Bdr_div TextSize_Type"],["alignoptions","Align","#KBEditortools_align_left","KBEditortools-align-left"],["listoptions","Lists","#KBEditortools_list_round","KBEditortools-list-round"],["indentoptions","Indent","#KBEditortools_increaseindent","KBEditortools-increaseindent"],["attach","Insert image","#KBEditortools_insertimage","KBEditortools-insertimage"],["removeFormat","Clear formatting","#KBEditortools_clr","KBEditortools-clr"],["articlelink","Insert article as link","#KBEditortools_linkarticle","KBEditortools-linkarticle"],["insertoptions","Insert options","#KBEditortools_block_down_arrow","KB_Editor_Bdr_div Insert_Type"],["editorexpand","Normal view","#KBEditortools_expand","KBEditortools-expand"],["styletext","Text Style","#KBEditortools_txtbgclr","KBEditortools-txtbgclr"],["plaintext","Plain text","#KBEditortools_arrow","KB_Editor_PlainText KB_Editor_FullScreen"]],ZohoDeskEditor_Init.heading=[{htm:"Heading 1",datAttr:"h1"},{htm:"Heading 2",datAttr:"h2"},{htm:"Heading 3",datAttr:"h3"},{htm:"Normal",datAttr:"p"}],ZohoDeskEditor_Init.insertoptions=[{htm:"Insert link",datAttr:"link",iconClass:"KBEditortools-insertlink",svgId:"#KBEditortools_insertlink"},{htm:"Remove link",datAttr:"unlink",iconClass:"KBEditortools-removelink",svgId:"#KBEditortools_removelink"},{htm:"Insert HTML",datAttr:"object",iconClass:"KBEditortools-embed2",svgId:"#KBEditortools_embed_2"},{htm:"Edit HTML",datAttr:"edithtml",iconClass:"KBEditortools-embed2",svgId:"#KBEditortools_embed_2"},{htm:"Insert table",datAttr:"table",iconClass:"KBEditortools-inserttable",svgId:"#KBEditortools_inserttable"},{htm:"Insert horizontal rule",datAttr:"inserthorizontalrule",iconClass:"KBEditortools-hr",svgId:"#KBEditortools_hr"},{htm:"Insert code",datAttr:"code",iconClass:"KBEditortools-code",svgId:"#KBEditortools_code"}],ZohoDeskEditor_Init.align=[{htm:"Align left",datAttr:"justifyleft",iconClass:"KBEditortools-align-left",svgId:"#KBEditortools_align_left"},{htm:"Align right",datAttr:"justifyright",iconClass:"KBEditortools-align-right",svgId:"#KBEditortools_align_right"},{htm:"Align justify",datAttr:"justifyfull",iconClass:"KBEditortools-align-justify",svgId:"#KBEditortools_align_justify"},{htm:"Align center",datAttr:"justifycenter",iconClass:"KBEditortools-align-center",svgId:"#KBEditortools_align_center"}],ZohoDeskEditor_Init.list=[{htm:"Bullets",datAttr:"insertunorderedlist",iconClass:"KBEditortools-list-round",svgId:"#KBEditortools_list_round"},{htm:"Numbering",datAttr:"insertorderedlist",iconClass:"KBEditortools-list-number",svgId:"#KBEditortools_list_number"}],ZohoDeskEditor_Init.indent=[{htm:"Increase indent",datAttr:"indent",iconClass:"KBEditortools-increaseindent",svgId:"#KBEditortools_increaseindent"},{htm:"Decrease indent",datAttr:"outdent",iconClass:"KBEditortools-decreaseindent",svgId:"#KBEditortools_decreaseindent"}],ZohoDeskEditor_Init.others=[{htm:"Check spelling",datAttr:"spellcheck"},{htm:"Plain text mode",datAttr:"switchmode"}],ZohoDeskEditor_Init.attachDrop=[{clk:function(e){e.uploadImage("load"),ZohoDeskEditor_Init.needEditorStats&&e.updateCount("image")},htm:"Upload",iconClass:"KBEditortools-upload",svgId:"#KBEditortools_upload"},{clk:function(e){callZDOCSAttachViewer(docsObj,"inline")},htm:"Gallery",iconClass:"KBEditortools-image",svgId:"#KBEditortools_image"},{clk:function(e){e.uploadImage("url"),ZohoDeskEditor_Init.needEditorStats&&e.updateCount("image")},htm:"URL",iconClass:"KBEditortools-sphere",svgId:"#KBEditortools_sphere"}],ZohoDeskEditor_Init.fontSize=[{htm:"8",datAttr:"1"},{htm:"10",datAttr:"2"},{htm:"12",datAttr:"3"},{htm:"14",datAttr:"4"},{htm:"18",datAttr:"5"},{htm:"24",datAttr:"6"},{htm:"36",datAttr:"7"}];var s=function(e){ZohoDeskEditor_Init.toolbarOrder.splice(e,0,["fontfamily","Font","#KBEditortools_Icon_Font","KBEditortools_Icon_Font"]),ZohoDeskEditor_Init.fontfamily=[{htm:"ProximaNova",ff:"ProximaNovaRegular, Arial, Helvetica"},{htm:"Arial",ff:"Arial, Helvetica, sans-serif"},{htm:"Helvetica",ff:"undefined"},{htm:"Verdana",ff:"verdana"},{htm:"Wide",ff:'"arial black"'},{htm:"Courier New",ff:'"courier new", courier, monospace'},{htm:"Comic Sans MS",ff:'"comic sans ms"'},{htm:"Garamond",ff:"garamond, serif"},{htm:"Georgia",ff:"georgia, times new roman, times, serif"},{htm:"Narrow",ff:'"arial narrow", sans-serif'},{htm:"Serif",ff:"serif, times new roman"},{htm:"Tahoma",ff:"tahoma, arial, helvetica, sans-serif"},{htm:"Times New Roman",ff:'"times new roman", times, serif'},{htm:"Trebuchet",ff:'"trebuchet ms", arial, helvetica, sans-serif'},{htm:"Calibri",ff:"Calibri, Verdana, Arial, sans-serif"}]};if("TicketReply"===e){for(var l=0,c=(d=[5,11,12,12,12]).length;l<c;l++)ZohoDeskEditor_Init.toolbarOrder.splice(d[l],1);ZohoDeskEditor_Init.toolbarOrder.unshift(["template","Template","#TemplateIcon","TemplateIcon"]),ZohoDeskEditor_Init.toolbarOrder.unshift(["snippet","","#SnippetIcon","SnippetIcon"]),ZohoDeskEditor_Init.defaultFontSize=10,ZohoDeskEditor_Init.defaultFontFamily="Arial, Helvetica, sans-serif",ZohoDeskEditor_Init.attachDrop.splice(1,1),ZohoDeskEditor_Init.dropDownTopPadding=2,ZohoDeskEditor_Init.dropDownLeftPadding=0,s(5),ZohoDeskEditor_Init.toolbarOrder.splice(3,0,["strikethrough","Strikethrough","#KBEditortools_strike","KBEditortools_strike"]),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheck","Spell Check","#KBEditortools_spellcheck","KBEditortools_spellcheck"]),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheckoptions","Spell Check Languages","#KBEditortools_block_down_arrow","KBEditortools-Block-down-arrow"]),ZohoDeskEditor_Init.insertoptions.push({htm:"Insert quote",datAttr:"quote",iconClass:"KBEditortools-quote",svgId:"#KBEditortools_quote"}),ZohoDeskEditor_Init.tabKeyHandling=!1,ZohoDeskEditor_Init.toolbarOrder.push(["moreoptions","More","#KBEditortools_more1","Kbeditor_more_icon"]),ZohoDeskEditor_Init.moreoptions=[{htm:"Plain Text",datAttr:"plaintext"}]}if("Snippets"===e){var d;for(l=0,c=(d=[5,8,8,8,8,9,10]).length;l<c;l++)ZohoDeskEditor_Init.toolbarOrder.splice(d[l],1);ZohoDeskEditor_Init.defaultFontSize=12,ZohoDeskEditor_Init.toolbarOrder.push(["moreoptions","More","#KBEditortools_more1","Kbeditor_more_icon"]),s(5),ZohoDeskEditor_Init.moreoptions=[{htm:"Increase Indent",datAttr:"indent",iconClass:"KBEditortools-increaseindent",svgId:"#KBEditortools_increaseindent"},{htm:"Decrease Indent",datAttr:"outdent",iconClass:"KBEditortools-decreaseindent",svgId:"#KBEditortools_decreaseindent"},{htm:"Plain Text",datAttr:"plaintext"}]}"TicketForm"===e&&(ZohoDeskEditor_Init.attachDrop.splice(1,1),ZohoDeskEditor_Init.insertoptions.push({htm:"Insert quote",datAttr:"quote",iconClass:"KBEditortools-quote",svgId:"#KBEditortools_quote"}),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheck","Spell Check","#KBEditortools_spellcheck","KBEditortools_spellcheck"]),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheckoptions","Spell Check Languages","#KBEditortools_block_down_arrow","KBEditortools-Block-down-arrow"]),ZohoDeskEditor_Init.toolbarOrder.splice(12,1),ZohoDeskEditor_Init.toolbarOrder.splice(13,1),ZohoDeskEditor_Init.toolbarOrder.splice(3,0,["strikethrough","Strikethrough","#KBEditortools_strike","KBEditortools_strike"]),ZohoDeskEditor_Init.defaultFontFamily="Arial, Helvetica, sans-serif",s(6))}}).call(this,a(68))},1019:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1027),_=a.n(v),C=a(30),b=a(16),E=a(174),y=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.constructPreviewData=a.constructPreviewData.bind(a),a}return u()(t,e),l()(t,[{key:"openNewTab",value:function(e){window.open(e)}},{key:"constructImgURL",value:function(e){var t=this.props.orgId,a=e.indexOf("/api"),n=e.slice(a,e.length);return n+="?orgId="+t+"&inline=true"}},{key:"constructPreviewData",value:function(e){var t=this.props,a=t.oldAttachments,n=t.newAttachments,o=t.showAttachmentViewer,i=a.length?a.concat(n):n;Object(E.a)(e,i,function(e){o(e)})}},{key:"constructAttachItem",value:function(e,t){var a=e.id,n=e.isPreview,o=e.viewUrl,i=e.href,r=e.name,s=e.size,l=e.percentComplete,c=void 0===l?"0":l,d=this.props,m=d.deleleUpload,u=d.removeAttachment,p=(d.isPeekView,o||(n?i:this.constructImgURL(i))),f=Object(E.j)(r),g=Object(E.e)(s),v=Object(E.c)(r);return h.a.createElement("div",{className:_.a.upload+" "+_.a.mr12+" "+(n?_.a.preview:"")},n?h.a.createElement("div",{className:_.a.loader,style:{width:c+"%"}}):null,f?h.a.createElement("img",{onClick:!n&&this.constructPreviewData.bind(this,a),src:p,className:_.a.uploadimage}):h.a.createElement("div",{className:_.a.attachInfo,onClick:this.openNewTab.bind(this,p)},h.a.createElement(C.CommonFontIcon,{name:v,size:"14"}),h.a.createElement("span",{className:_.a.attachsize},g)),n?null:h.a.createElement("span",{className:_.a.uploadclose,onClick:n?null:"new"==t?m.bind(this,a):u.bind(this,a),"data-id":"deleteUpload"},h.a.createElement(C.TopbandFontIcon,{name:"close",size:"12",color:"pure"})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.oldAttachments,n=t.newAttachments,o=t.from,i=t.isPeekView,r=_.a.attachList;return"leftPanel"==o?r=r+" "+_.a.w75:"replyEdtior"==o&&(r=i?r+" "+_.a.peekReplyAttach:r+" "+_.a.replyAttach),a&&a.length||n&&n.length?h.a.createElement(b.Container,{alignBox:"row",scroll:"horizontal",className:r},a&&a.length?a.map(function(t,a){return h.a.createElement(b.Box,{key:a},e.constructAttachItem(t,"old"))}):null,n&&n.length?n.map(function(t,a){return h.a.createElement(b.Box,{key:a,dataId:"attachmentItem_"+(a+1)},e.constructAttachItem(t,"new"))}):null):null}}]),t}(h.a.Component);t.a=y,y.propTypes={data:g.a.object,deleleUpload:g.a.func,from:g.a.string,isPeekView:g.a.bool,newAttachments:g.a.array,oldAttachments:g.a.array,orgId:g.a.string,removeAttachment:g.a.func,showAttachmentViewer:g.a.func}},1021:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(244),_=a(250),C=a(73),b=a.n(C),E=a(245),y=a(247),I=a(1063),A=a.n(I),k=a(359),S=a.n(k),N=a(3),T=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.documentKeyupHandler=a.documentKeyupHandler.bind(a),a}return u()(t,e),l()(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.documentKeyupHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.documentKeyupHandler)}},{key:"documentKeyupHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.preventDefault();var t=this.props,a=t.onSubmitClick,n=t.onCancelClick,o=t.isActive;27===e.keyCode&&o?n():13===e.keyCode&&o&&a()}},{key:"render",value:function(){var e=this.props,t=e.isActive,a=e.palette,n=e.size,o=e.type,i=e.title,r=e.message,s=e.confirmationMessage,l=e.submitText,c=e.cancelText,d=e.onSubmitClick,m=e.onCancelClick,u=e.children;return h.a.createElement(S.a,{portalId:N.v},h.a.createElement(v.a,{isShow:t,size:n},h.a.createElement(_.a,{title:i,palette:a,iconType:o}),h.a.createElement(E.a,{alignBox:"row",className:A.a.section},h.a.createElement("div",{className:A.a.innerSection},u||h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{dangerouslySetInnerHTML:{__html:r}}),s&&h.a.createElement("div",{className:A.a.text},s))),h.a.createElement("div",{className:A.a.footer},h.a.createElement(y.a,null,h.a.createElement("div",{className:A.a.footerInnerSpacing},h.a.createElement(b.a,{text:l,palette:"primary"==a?"primaryFilled":"dangerFilled",onClick:d}),c&&h.a.createElement("span",{className:A.a.buttonGap},h.a.createElement(b.a,{text:c,palette:"secondary",onClick:m}))))))))}}]),t}(p.Component);t.a=T,T.propTypes={alertData:g.a.object,isActive:g.a.bool,onCancelClick:g.a.func,onSubmitClick:g.a.func,palette:g.a.oneOf(["default","primary","danger"]),size:g.a.oneOf(["small","medium"]),type:g.a.oneOf(["delete","alert","remoteAssist","splitTicket"])},T.defaultProps={isActive:!1,type:"alert",palette:"danger",size:"small"}},1026:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=r(a(0)),i=r(a(360));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),n(t,[{key:"render",value:function(){return o.default.createElement("div",{className:i.default.separator})}}]),t}();t.default=s},1027:function(e,t,a){e.exports={upload:"UploadList-module__upload common-module__cboth",uploadimage:"UploadList-module__uploadimage",loader:"UploadList-module__loader",uploadclose:"UploadList-module__uploadclose",attachsize:"UploadList-module__attachsize common-module__dotted common-module__oflow common-module__ellipsis",attachInfo:"UploadList-module__attachInfo",attachList:"UploadList-module__attachList",mr12:"UploadList-module__mr12",w75:"UploadList-module__w75",preview:"UploadList-module__preview",replyAttach:"UploadList-module__replyAttach",peekReplyAttach:"UploadList-module__peekReplyAttach"}},1028:function(e,t,a){"use strict";a.d(t,"c",function(){return o}),a.d(t,"a",function(){return i}),a.d(t,"b",function(){return r}),a.d(t,"f",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"e",function(){return c});var n=a(6);function o(e,t){var a=editor[e];a&&t&&a.insertHTML(t)}function i(e){var t=editor[e];if(null!=t){var a=t.getContent();return"<br>"==(a=a.trim())?"":("plaintext"==t.mode&&(a=function(e){void 0!==e&&(e=(e=encodeHTML(e)).replace(/\n/g,"<br/>"));return e}(a)),a)}return""}function r(e,t,a,n){var o={content:"",isSnippetExist:!1,triggerWord:""},i="";if(e.modify){var r=e.getRangeAt(0);e.collapseToStart(),e.modify("move","backward","word"),e.modify("extend","forward","word");var s=e.toString().toLowerCase().trim(),l=n.filter(function(e){return e.snippetWord.toLowerCase()==s.toLowerCase()});null!=(i=l.length?l[0].expandedContent:"")&&""!=i&&i.length>0?(o.isSnippetExist=!0,o.content=i,o.triggerWord=s.toLowerCase(),r.setStart(e.anchorNode,e.anchorOffset),r.setEnd(e.focusNode,e.focusOffset)):(o.content="&nbsp;&nbsp;&nbsp;&nbsp;",o.triggerWord=s.toLowerCase()),e.removeAllRanges(),e.addRange(r)}else o=function(e,t,a,n){var o="",i=e.getRangeAt(0);i.collapse(!0),i.setStart(e.anchorNode,0),o=i.toString();var r=i.cloneRange(),s=e.anchorNode.textContent,l=/\s+/,c=s.split(l).filter(Boolean),d=o.split(l).filter(Boolean),m="",u="",p={content:"",isSnippetExist:!1,triggerWord:""},h=d[d.length-1];if(""!=h&&void 0!==h){m=c[d.length-1],parseInt(m.length);var f=m.toLowerCase(),g=n.filter(function(e){var t=e.snippetWord;return t.toLowerCase()==f.toLowerCase()});u=g.length?g[0].expandedContent:""}if(null!=u&&""!=u&&null!=u){var v=parseInt(m.length-h.length),_=parseInt(o.length);v>0&&(_+=v);var C=parseInt(o.length+v-m.length),b=o.length-o.replace(/\s+$/g,"").length;(C-=b)<0&&(C=0),r.setStart(e.anchorNode,C),r.setEnd(e.focusNode,_),p.isSnippetExist=!0}else u=o;return p.content=u,p.triggerWord=m.toLowerCase(),e.removeAllRanges(),e.addRange(r),p}(e,0,0,n);return o}function s(e,t,a,o,i){for(var r={"${Cases.Contact Name}":Object(n.e)(a.firstName,a.lastName),"${Cases.Email}":a.email||"","${Cases.Phone}":t.phone||"","${Cases.Subject}":t.subject,"${Cases.Description}":t.description||"","${Cases.Request Id}":t.ticketNumber,"${Cases.Account Name}":o?o.accountName:"","${Cases.First Name}":a.firstName||"","${Cases.Last Name}":a.lastName||"","${Cases.CUSTOMER_PORTAL_LINK}":"10","${User.Support Rep Name}":Object(n.e)(i.firstName,i.lastName),"${User.Email}":i.emailId||"","${User.Phone}":i.phone||"","${User.First Name}":i.firstName||"","${User.Last Name}":i.lastName||"","${User.Mobile}":i.mobile||""},s=e.match(/(\$\{\w+\.[\w\s]+\})/g)||[],l=0;l<s.length;l++)e=e.replace(s[l],r[s[l]]);return e}function l(e){if(void 0===e)return!0;var t=e.getContent()||"";return""==t||"<div><br></div>"==t||!e.doc.body.textContent.trim().length}function c(e){return e.replace(/(<iframe.+?<\/iframe>)/g,function(e){var t=e.match(/(htt.+?")/)[0];return'<div><br></div><a href="'+(t=t.substring(0,t.length-1))+'" target="_blank">'+t+"</a>"})}},1042:function(e,t,a){e.exports={defaultSize:"MorePopup-module__defaultSize common-module__offSelection",black:"MorePopup-module__black",white:"MorePopup-module__white",iconCustom:"MorePopup-module__iconCustom",mr10:"MorePopup-module__mr10",dropDivPosition:"MorePopup-module__dropDivPosition",dropdownPosition:"MorePopup-module__dropdownPosition",secondaryIcon:"MorePopup-module__secondaryIcon",widgetList:"MorePopup-module__widgetList"}},1053:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1080),_=a.n(v),C=a(64),b=a.n(C),E=a(56),y=a.n(E),I=function(e){function t(e){return r()(this,t),d()(this,(t.__proto__||o()(t)).call(this,e))}return u()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.src,a=e.name,n=e.size,o=e.iconClass,i=e.iconName,r=e.iconSize,s=e.iconColor,l=e.borderPalette,c=e.onClick,d=e.title,m=e.iconTitle,u=e.onIconClick,p=e.showOnHover?_.a.hover:"";return h.a.createElement("div",{className:_.a.container+" "+p},h.a.createElement(b.a,{src:t,name:a,title:d,size:n,onClick:c}),i&&h.a.createElement("span",{className:_.a.thread+" "+_.a["border_"+l],"data-title":m,onClick:u},h.a.createElement("span",{className:_.a.icon},h.a.createElement(y.a,{name:i,size:r,color:s,className:o}))))}}]),t}(h.a.Component);t.a=I,I.defaultProps={size:"medium",iconSize:"6",borderPalette:"default"},I.propTypes={borderPalette:g.a.oneOfType([g.a.string,g.a.bool]),iconClass:g.a.string,iconColor:g.a.oneOfType([g.a.string,g.a.bool]),iconName:g.a.oneOfType([g.a.string,g.a.bool]),iconSize:g.a.oneOfType([g.a.string,g.a.bool]),iconTitle:g.a.string,name:g.a.string,onClick:g.a.func,onIconClick:g.a.func,showOnHover:g.a.bool,size:g.a.string,src:g.a.string,title:g.a.string}},1063:function(e,t,a){e.exports={section:"AlertLookupPortal-module__section",innerSection:"AlertLookupPortal-module__innerSection",footerInnerSpacing:"AlertLookupPortal-module__footerInnerSpacing",footer:"AlertLookupPortal-module__footer",buttonGap:"AlertLookupPortal-module__buttonGap",text:"AlertLookupPortal-module__text",extraSmall:"AlertLookupPortal-module__extraSmall"}},1080:function(e,t,a){e.exports={container:"AvatarThread-module__container common-module__dInflex",thread:"AvatarThread-module__thread common-module__rounded",icon:"AvatarThread-module__icon common-module__middleBoth common-module__middle",border_primary:"AvatarThread-module__border_primary",border_success:"AvatarThread-module__border_success",border_danger:"AvatarThread-module__border_danger",hover:"AvatarThread-module__hover"}},1081:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(71),o=a.n(n),i=a(6),r={storage:{},isStorageSupported:function(){try{var e=window.localStorage;return e.setItem("test","1"),e.removeItem("test"),!0}catch(e){return!1}},storeItemIntoStorage:function(e,t){try{this.isStorageSupported()?Object(i.J)(t)?localStorage.setItem(e,o()(t)):localStorage.setItem(e,t):this.storage[e]=t}catch(e){if(22==e.code)try{for(var a=localStorage.length,n=new Date,r=0;r<a;r++){var s=localStorage.key(r),l=this.getItemFromStorage(s)||{};l&&l.time&&n>l.expireTime&&this.removeItem(s)}storeData()}catch(e){alert("Local Storage Limit exceeded")}}},getItemFromStorage:function(e){if(!this.isStorageSupported())return this.storage[e];try{return JSON.parse(localStorage.getItem(e))}catch(t){return localStorage.getItem(e)}},deleteItemFromStorage:function(e){this.isStorageSupported()?localStorage.removeItem(e):this.storage[e]=void 0},getAllItemFromStorage:function(){if(this.isStorageSupported()){for(var e={},t=0;t<localStorage.length;t++){var a=localStorage.key(t),n=this.getItemFromStorage(a);e[a]=n}return e}return this.storage},setItem:function(e,t,a){-1==(a=null==a||null==a?10800:a)&&(a=86400);var n=new Date,o={value:t,expireTime:new Date(n.setSeconds(n.getSeconds()+a))};this.storeItemIntoStorage(e,o)},getItem:function(e){var t=this.getItemFromStorage(e)||{};if(t&&t.expireTime&&new Date>=new Date(t.expireTime))return void this.removeItem(e);return t.value},removeItem:function(e){this.deleteItemFromStorage(e)}}},1082:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(72),_=a.n(v),C=a(361),b=a.n(C),E=a(8),y=a(1097),I=a.n(y),A=function(e){function t(){return r()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return u()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.boxPosition,a=e.bottom,n=e.left,o=e.onAttchClick,i=e.openCloudAttach,r=e.labelName;return h.a.createElement(_.a,{size:"small",boxPosition:t,isActive:!0,bottom:a,left:n},h.a.createElement("label",{htmlFor:r},h.a.createElement(b.a,{autoHover:!0,value:E.f.getI18NValue("support.create.form.label.attachment.mycomputer"),iconName:"emptyfle",dataId:"fileAttach"}),h.a.createElement("input",{className:I.a.fileCont,type:"file",multiple:"multiple",id:r,onChange:o})),h.a.createElement(b.a,{autoHover:!0,value:E.f.getI18NValue("support.create.form.label.attachment.cloud"),iconName:"cloudicn",onClick:i,dataId:"cloudAttach"}))}}]),t}(p.Component);t.a=A,A.propTypes={bottom:g.a.string,boxPosition:g.a.string,labelName:g.a.string,left:g.a.string,onAttchClick:g.a.func,openCloudAttach:g.a.func}},1083:function(e,t,a){"use strict";function n(e){e=(e=o(e))?e.trim():e;return/^[\w]([\w\-\.\+\'\&]*)@([\w\-\.]*)(\.[a-zA-Z]{2,22}(\.[a-zA-Z]{2}){0,2})$/.test(e)}function o(e){var t=e;return-1!==t.indexOf(">")&&-1!==t.indexOf("<")&&(t=t.substring(t.indexOf("<")+1,t.indexOf(">"))),t}function i(e,t){var a=e.trim();if(-1!==a.indexOf(">")&&a.indexOf("<")>0){var n=a;a=a.substring(0,a.indexOf("<")),t||(a=a.replace(/"/g,"")),""==a&&(a=n.substring(n.lastIndexOf("<")+1,n.lastIndexOf(">")))}else a=a.replace(/<|>/g,"");return a}function r(e){var t=0,a=0,o=0,r=(e=e.trim()).indexOf("@",o);if(-1!==r)if(-1!==(o=e.indexOf(",",r))?(a=e.substring(t,o),t=o+1):(a=e.substring(t,e.length),-1),","===a||" "===a)-1;else{if(-1!=a.indexOf(",")){var l=i(a,!0);if(","===l.charAt(l.length-1))return!1;if(!(-1!==l.indexOf('"')&&l.lastIndexOf('"')>0||-1!==l.indexOf("'")&&l.lastIndexOf("'")>0)&&-1!=l.indexOf(",")&&","!=l.substring(0,1))return!1;var c=l.substring(l.indexOf('"')+1,l.lastIndexOf('"'));if(""==c&&(c=l.substring(l.indexOf("'")+1,l.lastIndexOf("'"))),""!=c&&-1==c.indexOf(","))return!1}var d=s(a);if(!n(d=d.trim()))return!1}else if(-1,o<=e.length)return!1;return!0}function s(e){return-1===e.indexOf("<")?e:e.substring(e.lastIndexOf("<")+1,e.lastIndexOf(">"))}function l(e,t){var a=!1,n=-1;if(e.length)for(var o=0;o<e.length;o++){s(e[o])==s(t)&&(a=!0,n=o)}return{isDuplicate:a,index:n}}function c(e){for(var t=[],a=e.indexOf("@"),n=void 0;-1!==a;)-1===(n=e.indexOf(",",a))&&(n=e.length),t.push(e.substring(0,n)),a=(e=e.substring(n+1,e.length)).indexOf("@");return-1===a&&""!==e&&t.push(e),t}a.d(t,"f",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"a",function(){return i}),a.d(t,"e",function(){return r}),a.d(t,"c",function(){return l}),a.d(t,"d",function(){return c})},1097:function(e,t,a){e.exports={fileCont:"UploadPopup__fileCont"}},1107:function(e,t,a){"use strict";(function(e){var n=a(2),o=a.n(n),i=a(12),r=a.n(i),s=a(9),l=a.n(s),c=a(10),d=a.n(c),m=a(13),u=a.n(m),p=a(14),h=a.n(p),f=a(0),g=a.n(f),v=a(1),_=a.n(v),C=a(1122),b=a.n(C),E=(a(1007),a(1053)),y=a(1019),I=a(1123),A=a(8),k=a(174),S=a(6),N=a(1081),T=a(1028),w=a(30),O=a(16),x=a(1004),D=a(1082),P=function(t){function a(e){l()(this,a);var t=u()(this,(a.__proto__||r()(a)).call(this,e)),n=t.props,o=n.value,i=n.attachments;return t.state={content:o||"",oldAttachments:i||[],newAttachments:[],isAttachmentUploading:!1,isDragOver:!1,mode:"private",showTools:N.a.getItem("showCommentTools"),isAttachmentModified:!1,isLoading:!1},t._isMounted=!1,t.uploadAttach=t.uploadAttach.bind(t),t.deleleUpload=t.deleleUpload.bind(t),t.removeAttachment=t.removeAttachment.bind(t),t.updateComment=t.updateComment.bind(t),t.clearComment=t.clearComment.bind(t),t.toggleComment=t.toggleComment.bind(t),t.dragEnter=t.dragEnter.bind(t),t.dragLeave=t.dragLeave.bind(t),t.attachDrop=t.attachDrop.bind(t),t.changeMode=t.changeMode.bind(t),t.toggleTools=t.toggleTools.bind(t),t.commentCallback=t.commentCallback.bind(t),t.checkCommentChanged=t.checkCommentChanged.bind(t),t.addComment=t.addComment.bind(t),t.dragAttach=t.dragAttach.bind(t),t.addCloudAttch=t.addCloudAttch.bind(t),t.openCloudAttach=t.openCloudAttach.bind(t),t.closeCloudAttach=t.closeCloudAttach.bind(t),t.closeComment=t.closeComment.bind(t),t}return h()(a,t),d()(a,[{key:"componentWillReceiveProps",value:function(e){e.oldAttachments==this.props.oldAttachments&&e.value==this.props.value&&e.newAttachments==this.props.newAttachments||this.setState({content:e.value||"",oldAttachments:e.oldAttachments||[],newAttachments:e.newAttachments||[]})}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"addComment",value:function(){var e=this,t=this.state,a=t.mode,n=t.isCommentAdding,o=this.props,i=o.attachmentIds,r=o.hasAttachments,s=void 0===r||r,l=o.hasPrivacyMode,c=void 0===l||l;if(!n){var d=editor["Comment_"+this.props.id],m=d.mentionsList,u=d.mentionsHandler("val");if(this.isValid(d)){var p="public"==a,h=this.props,f=h.revertIsCommentChanged,g=h.addComment;h.isCommentChanged&&f&&f(),this.setState({isCommentAdding:!0});var v={content:u};s&&(v.attachmentIds=i),c&&(v.isPublic=p),this.setState({isLoading:!0}),g(v,m,function(){e._isMounted&&(e.setState({oldAttachments:[],newAttachments:[],isAttachmentModified:!1,isCommentAdding:!1,mode:"private"}),e.props.setAttachmentIds([]),e.clearComment()),e.setState({isLoading:!1})},function(){e.setState({isLoading:!1})})}}}},{key:"updateComment",value:function(){var e=this,t=this.props,a=t.id,n=t.value,o=t.revertIsCommentChanged,i=t.isCommentChanged,r=t.updateComment,s=t.attachmentIds,l=editor["Comment_"+a],c=l.mentionsList,d=l.mentionsHandler("val");i&&o&&o(),this.setState({isAttachmentModified:!1}),this.isValid(l)&&(this.setState({isLoading:!0}),r(a,d,s,n,c,function(){e.setState({isLoading:!1})}))}},{key:"isValid",value:function(t){var a=this.state.isAttachmentUploading,n=this.props.attachmentIds,o=!0,i=t.getContent();return a?(o=!1,this.props.showMessage({type:"alert",message:A.f.getI18NValue("support.attachment.upload.process")})):Object(T.d)(t)&&!n.length?(o=!1,this.props.showConfirmBox({type:"alert",submitText:A.f.getI18NValue("crm.button.ok"),title:A.f.getI18NValue("support.history.operation.label.wfalert"),message:A.f.getI18NValue("support.contact.comment.empty"),isActive:!0,palette:"danger"}).then(function(){deleteComment(id,commentId,e)}).catch(function(){})):i.length>32e3&&(o=!1,this.props.showMessage({type:"alert",message:A.f.getI18NValue("support.comment.limit.exceeded")})),o}},{key:"addCloudAttch",value:function(e,t,a){var n=this,i=this.state,r=i.newAttachments,s=i.oldAttachments.length+r.length+a,l={index:s,href:null,isPreview:!0};this.setState(function(e){var t=o()({},e);return t.newAttachments.push(l),t}),this.props.uploadCloudAttachment(e,s,function(e,t){var a=n.state.newAttachments.map(function(a){return a.index===t?o()({},a,{percentComplete:e}):a});n.setState({newAttachments:a})}).then(function(e){var t=e.data,a=n.state.newAttachments.map(function(e){return e.index===t.data.index?t.data:e});n.setState({newAttachments:a});var o=n.props,i=o.attachmentIds,r=o.setAttachmentIds;i.push(t.data.id),r(i);var s=n.props,l=s.isCommentChanged,c=s.setIsCommentChanged;!l&&c&&c(),n.setState({isAttachmentModified:!0})},function(){n.setState(function(e){var t=o()({},e);return t.newAttachments=t.newAttachments.filter(function(e){return s!==e.index}),t})})}},{key:"uploadAttach",value:function(e){var t=this,a=this.state,n=a.newAttachments,i=a.oldAttachments.length+n.length,r=e.target?e.target.files:e,s=r.length,l=Object(k.n)(r,i),c=l.inValidArray,d=l.validArray,m=this.props.showMessage;if(l.isCountExceeds)m({type:"alert",message:A.f.getI18NValue("support.attachments.count.exceeds",[10])});else{if(c.length)for(var u=0;u<c.length;u++){var p=c[u];p.isUnSupported&&m({type:"alert",message:A.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted")}),p.isFileNameSizeInvalid&&m({type:"alert",message:A.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation")}),p.isEmpty&&m({type:"alert",message:A.f.getI18NValue("support.request.empty.attachment.message")}),p.isAttachSizeExceeded&&m({type:"alert",message:A.f.getI18NValue("support.feedback.uploaded.file.exceeds.20mb")})}d.length&&function(){var e=0;t.setState({isAttachmentUploading:!0});for(var a=function(a){var n=d[a],r=new FormData;r.append("file",n);var l=i+a,m=Object(k.f)(n,l);t.setState(function(e){var t=o()({},e);return t.newAttachments.push(m),t}),t.props.uploadAttach(r,l,function(e,a){var n=t.state.newAttachments.map(function(t){return t.index===a?o()({},t,{percentComplete:e}):t});t.setState({newAttachments:n})}).then(function(a){if(a){var n=a.data;e+=1;var o=t.state.newAttachments.map(function(e){return e.index===n.data.index?n.data:e});t.setState({newAttachments:o});var i=t.props,r=i.attachmentIds,l=i.setAttachmentIds;r.push(n.data.id),l(r);var d=t.props,m=d.isCommentChanged,u=d.setIsCommentChanged;!m&&u&&u(),t.setState({isAttachmentModified:!0}),e+c.length==s&&t.setState({isAttachmentUploading:!1})}}).catch(function(e){t.setState(function(t){var a=o()({},t);return a.newAttachments=a.newAttachments.filter(function(t){return e.attachIndex!==t.index}),a})})},n=0;n<d.length;n++)a(n)}()}e.target&&(e.target.value="")}},{key:"deleleUpload",value:function(e){var t=this;this.props.deleleUpload(e).then(function(){t.setState(function(a){var n=o()({},a);n.newAttachments=n.newAttachments.filter(function(t){return e!==t.id});var i=t.props,r=i.isCommentChanged,s=i.setIsCommentChanged,l=i.revertIsCommentChanged;return n.newAttachments.length?(!r&&s&&s(),t.setState({isAttachmentModified:!0})):(r&&l&&l(),t.setState({isAttachmentModified:!1},function(){return[t.checkCommentChanged()]})),n});var a=t.props,n=a.attachmentIds;(0,a.setAttachmentIds)(n.filter(function(t){return e!==t}))})}},{key:"removeAttachment",value:function(e){var t=this;this.setState(function(a){var n=o()({},a);n.oldAttachments=n.oldAttachments.filter(function(t){return e!==t.id});var i=t.props,r=i.isCommentChanged,s=i.setIsCommentChanged;return!r&&s&&s(),t.setState({isAttachmentModified:!0}),n});var a=this.props,n=a.attachmentIds;(0,a.setAttachmentIds)(n.filter(function(t){return e!==t}))}},{key:"clearComment",value:function(){this.setState({content:""});var e=editor["Comment_"+this.props.id];e.setContent(""),Object(S.N)(e.doc)}},{key:"toggleComment",value:function(){if(""==this.state.content)this.props.toggleComment();else{var e=this.props,t=e.revertIsCommentChanged;e.isCommentChanged&&t&&t(),this.setState({isAttachmentModified:!1}),this.clearComment()}}},{key:"dragEnter",value:function(){this.setState({isDragOver:!0})}},{key:"dragLeave",value:function(){this.setState({isDragOver:!1})}},{key:"attachDrop",value:function(e){var t=e.nativeEvent.dataTransfer;Object(k.h)(t,e)&&(e.preventDefault(),this.uploadAttach(t.files),this.setState({isDragOver:!1})),e.stopPropagation(),this.setState({isDragOver:!1})}},{key:"dragAttach",value:function(e){this.uploadAttach(e)}},{key:"changeMode",value:function(e){this.setState({mode:e})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"toggleTools",value:function(){var e=this;this.setState({showTools:!this.state.showTools},function(){e.state.showTools?N.a.setItem("showCommentTools",!0):N.a.setItem("showCommentTools",!1)})}},{key:"commentCallback",value:function(e){var t=this,a=this.props.mention,n=(void 0===a?[]:a).map(function(e){var t=e.type,a=e.name,n=e.zuid,o=e.id,i=e.firstName,r=e.lastName,s=e.photoURL,l=Object(S.e)(i,r);return"AGENT"==t?{avatar:s,id:n,name:l,type:"user",value:l}:{id:o,name:a,type:"team",value:a}});e.mentionsHandler("setMentions",n),ZohoDeskEditor._addEvent(e.doc,"keyup",function(){setTimeout(function(){t.checkCommentChanged(e)},1)})}},{key:"checkCommentChanged",value:function(e){e=e||editor["Comment_"+this.props.id];var t=this.props,a=t.value,n=t.type,o=t.isCommentChanged,i=t.setIsCommentChanged,r=t.revertIsCommentChanged,s=this.state.isAttachmentModified,l=e.getContent()||"";"edit"==n?a==l?!s&&o&&r&&r():!o&&i&&i():Object(T.d)(e)?(this.setState({content:""}),!s&&o&&r&&r()):(this.setState({content:l}),!o&&i&&i())}},{key:"openCloudAttach",value:function(){this.setState({isCLoudOpen:!0}),this.props.openCloudAttach()}},{key:"closeCloudAttach",value:function(){this.setState({isCLoudOpen:!1})}},{key:"closeComment",value:function(){var e=this.props,t=e.id,a=e.closeComment;a(t)}},{key:"render",value:function(){A.f.getI18NValue("support.create.form.label.attachment.mycomputer"),A.f.getI18NValue("support.create.form.label.attachment.cloud");var e=this.props,t=e.type,a=e.orgId,n=e.id,o=e.from,i=e.showAttachmentViewer,r=e.photoURL,s=e.name,l=e.borderStyle,c=(e.value,e.revertIsCommentChanged),d=e.isCommentChanged,m=e.editorMode,u=void 0===m?"CommentEditor":m,p=e.isFromBlueprint,h=e.hasPrivacyMode,f=void 0===h||h,v=e.hasAttachments,_=void 0===v||v,C=e.isCloudAttchOpen,k=e.CloudAttachmentIframe,S=e.havePublicComment,N=e.needAttachment,T=e.getAutofillContacts,P=this.state,F=P.content,B=void 0===F?"":F,L=P.oldAttachments,V=P.newAttachments,R=P.isDragOver,M=P.mode,j=P.showTools,z=P.isCLoudOpen,K=P.isLoading,U={handleAutoFill:!0,needEditorFocus:"feeds"!=o&&!p,skipScrollOnEnter:!0,resizeOptions:{minHeight:80,maxHeight:225},defaultfontfamily:"'ProximaNovaRegular',Arial,Helvetica,sans-serif",defaultfontsize:"14px",padding:"0",lineHeight:"22px",needInlineAttachHandling:!1,getAutofillContacts:T,handleInlineDropImage:this.dragAttach},H="public"==M,W=b.a.postbox;return"leftPanel"==o&&(W=W+" "+b.a.minW319),W="bottom"==l?W+" "+b.a.defaultborder:W+" "+b.a.fullborder,g.a.createElement("div",{className:W+" "+(p?b.a.bluePrintLayar:""),onDragEnter:this.dragEnter,onDragOver:this.dragEnter,onDragLeave:this.dragLeave,onDrop:this.attachDrop},R&&g.a.createElement("div",{className:b.a.attachOver},A.f.getI18NValue("support.request.attachment.drop.files")),g.a.createElement("div",{className:b.a.postHeader},p?null:g.a.createElement("span",{className:b.a.postAvatar},g.a.createElement(E.a,{src:r,name:s,size:"xsmall",iconName:"conversation"==t&&"zdeskCommentfilled",borderPalette:"conversation"==t&&"primary",iconColor:"conversation"==t&&"primary",iconSize:"conversation"==t&&"8"})),g.a.createElement("div",{className:b.a.commentBox+" commentArea "+(j?"":"hideTools")+" "+("leftPanel"==o?"leftCommentArea":"")},g.a.createElement(x.a,{id:"Comment_"+n,value:B,editorCallback:this.commentCallback,editorMode:u,editorOptions:U})),_?g.a.createElement("div",{className:b.a.attachHolder+" "+(j?b.a.attachHolderVisi:"")},g.a.createElement(y.a,{oldAttachments:L,newAttachments:V,orgId:a,deleleUpload:this.deleleUpload,removeAttachment:this.removeAttachment,from:o,showAttachmentViewer:i})):null),g.a.createElement(O.Container,{alignBox:"row",className:"leftPanel"==o?b.a.leftFooter+" "+b.a.postFooter:b.a.postFooter},g.a.createElement(O.Box,{className:b.a.commentOptions},g.a.createElement("span",{className:b.a.listIcon},_&&N?g.a.createElement("span",{className:b.a.attachParent+" "+("edit"==t?b.a.bdrNone+" "+b.a.attchIcn:"leftPanel"==o?b.a.bdrNone+" "+b.a.mt0+" "+b.a.attchIcn:b.a.attchIcn),"data-id":"AttachIcon"},g.a.createElement("label",{className:b.a.fileCont,htmlFor:"commentAttach"},g.a.createElement("input",{className:b.a.fileAttch,type:"file",onChange:this.uploadAttach,multiple:"multiple",id:"commentAttach"})),g.a.createElement(w.TopbandFontIcon,{name:"attachment5",size:"14"}),"leftPanel"==o?g.a.createElement("div",{className:b.a.attchPopup},g.a.createElement(D.a,{labelName:"commentAttachLabel",boxPosition:"bottomRight",onAttchClick:this.uploadAttach,openCloudAttach:this.openCloudAttach})):null):null,_&&"leftPanel"!=o&&N?g.a.createElement("span",{className:b.a.iconCloud,onClick:this.openCloudAttach},g.a.createElement(w.TopbandFontIcon,{name:"cloudIcon",size:"12"})):null,g.a.createElement("span",{"data-title":A.f.getI18NValue("support.label.comments.format"),className:b.a.iconAttach,onClick:this.toggleTools},"A"))),p?null:g.a.createElement(I.a,{revertIsCommentChanged:c,isCommentChanged:d,closeComment:this.closeComment,updateComment:this.updateComment,toggleComment:this.toggleComment,clearComment:this.clearComment,type:t,from:o,isPublic:H,changeMode:this.changeMode,content:B,addComment:this.addComment,hasPrivacyMode:f,havePublicComment:S,isLoading:K}),C&&z&&k?g.a.createElement(k,{addCloudAttch:this.addCloudAttch,totalLen:L.length+V.length,closeIframe:this.closeCloudAttach}):null))}}]),a}(g.a.Component);t.a=P,P.propTypes={CloudAttachmentIframe:_.a.node,addComment:_.a.func,attachmentIds:_.a.func,attachments:_.a.object,borderStyle:_.a.string,closeComment:_.a.func,deleleUpload:_.a.func,editorMode:_.a.string,from:_.a.string,getAutofillContacts:_.a.func,hasAttachments:_.a.bool,hasPrivacyMode:_.a.bool,havePublicComment:_.a.bool,id:_.a.string,isCloudAttchOpen:_.a.bool,isCommentChanged:_.a.bool,isFromBlueprint:_.a.bool,mention:_.a.array,name:_.a.string,needAttachment:_.a.bool,newAttachments:_.a.object,oldAttachments:_.a.object,openCloudAttach:_.a.func,orgId:_.a.string,page:_.a.string,photoURL:_.a.string,revertIsCommentChanged:_.a.func,setAttachmentIds:_.a.func,setIsCommentChanged:_.a.func,showAttachmentViewer:_.a.func,showConfirmBox:_.a.func,showMessage:_.a.func,toggleComment:_.a.func,type:_.a.string,updateComment:_.a.func,uploadAttach:_.a.func,uploadCloudAttachment:_.a.func,value:_.a.string},P.defaultProps={borderStyle:"bottom",isFromBlueprint:!1,needAttachment:!0}}).call(this,a(530)(e))},1122:function(e,t,a){e.exports={defaultborder:"CommentBox-module__defaultborder",fullborder:"CommentBox-module__fullborder",postHeader:"CommentBox-module__postHeader",commentBox:"CommentBox-module__commentBox",attachOver:"CommentBox-module__attachOver",postAvatar:"CommentBox-module__postAvatar",fileCont:"CommentBox-module__fileCont",postFooter:"CommentBox-module__postFooter",leftFooter:"CommentBox-module__leftFooter common-module__alignBetween",mt0:"CommentBox-module__mt0",postSubmit:"CommentBox-module__postSubmit",radioDiv:"CommentBox-module__radioDiv",radiobtn:"CommentBox-module__radiobtn",bdrNone:"CommentBox-module__bdrNone",minW319:"CommentBox-module__minW319",minW259:"CommentBox-module__minW259",attchIcn:"CommentBox-module__attchIcn",commentOptions:"CommentBox-module__commentOptions common-module__flexgrow",listIcon:"CommentBox-module__listIcon common-module__dflex",iconCloud:"CommentBox-module__iconCloud",iconAttach:"CommentBox-module__iconAttach",sentButton:"CommentBox-module__sentButton",clearButton:"CommentBox-module__clearButton",attachHolderVisi:"CommentBox-module__attachHolderVisi",attachHolder:"CommentBox-module__attachHolder",bluePrintLayar:"CommentBox-module__bluePrintLayar",fileAttch:"CommentBox-module__fileAttch",attchPopup:"CommentBox-module__attchPopup",attachParent:"CommentBox-module__attachParent",postbox:"CommentBox-module__postbox"}},1123:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1124),_=a.n(v),C=a(30),b=a(239),E=a.n(b),y=a(8),I=a(16),A=a(73),k=a.n(A),S=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.state={isPopupOpen:!1},a.togglePopup=a.togglePopup.bind(a),a}return u()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this;this._mount=!0,window.addEventListener("click",function(){e._mount&&e.setState({isPopupOpen:!1})})}},{key:"componentWillUnmount",value:function(){this._mount=!1}},{key:"togglePopup",value:function(e){this.setState(function(e){return{isPopupOpen:!e.isPopupOpen}}),e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,a=t.revertIsCommentChanged,n=t.isCommentChanged,o=t.closeComment,i=t.toggleComment,r=t.clearComment,s=t.type,l=t.from,c=t.content,d=void 0===c?"":c,m=t.isPublic,u=t.changeMode,p=t.addComment,f=t.updateComment,g=t.hasPrivacyMode,v=t.havePublicComment,b=t.isLoading,A=this.state.isPopupOpen,S="large";"leftPanel"==l&&(S="medium");var N=""==d&&"conversation"!=s;return h.a.createElement(I.Box,{className:_.a.postSubmit},h.a.createElement("span",{className:_.a.sentButton},"edit"==s?h.a.createElement(k.a,{text:y.f.getI18NValue("support.button.save"),palette:"primaryFilled",size:"medium",onClick:f,status:b?"loading":"none"}):v&&g?h.a.createElement("span",{className:_.a.commentButton},g?h.a.createElement("div",{className:_.a[S]+" "+(b?"":_.a.isActive)},b?h.a.createElement(k.a,{status:"loading",palette:"primaryFilled",size:"medium",className:_.a.loading}):h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:_.a.content,onClick:p},h.a.createElement("p",{className:_.a.actionType},y.f.getI18NValue("tabs.request.comment")),h.a.createElement("p",{className:_.a.subtitle},m?y.f.getI18NValue("support.request.public"):y.f.getI18NValue("support.department.type.internal"))),h.a.createElement("span",{className:_.a.arrow,onClick:function(t){t.stopPropagation&&t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation(),e.togglePopup(t)}},h.a.createElement(C.TopbandFontIcon,{name:"blockDownArrow",size:"6"})))):h.a.createElement(k.a,{text:y.f.getI18NValue("tabs.request.comment"),palette:"primaryFilled",size:"medium",onClick:p,status:b?"loading":"none"}),h.a.createElement("div",{className:_.a.buttonAction+" "+(A?_.a.active:"")+" "+("leftPanel"==l?_.a.commentLeftPopup:" "),onClick:function(e){e.stopPropagation&&e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}},h.a.createElement("div",{className:_.a.switchAction,onClick:function(){u(m?"private":"public")}},h.a.createElement("p",null,h.a.createElement("span",{className:_.a.actionNotify},y.f.getI18NValue("support.request.public")),h.a.createElement("span",{className:_.a.switchbox},h.a.createElement(E.a,{id:"commentPrivate",name:"commentPrivate",size:"small",checked:m,onChange:function(){u(m?"private":"public")}}))),h.a.createElement("p",{className:_.a.actionSubtitle},y.f.getI18NValue("support.solutions.comments.display.in.customer.self.service.portal"))))):h.a.createElement(k.a,{text:y.f.getI18NValue("tabs.request.comment"),palette:"primaryFilled",size:"medium",onClick:p,status:b?"loading":"none"})),h.a.createElement("span",{className:_.a.clearButton},h.a.createElement(k.a,{text:"edit"==s||"task"==l||"conversation"==s&&""==d?y.f.getI18NValue("support.label.cancel"):y.f.getI18NValue("support.request.clear"),palette:"secondary",size:"medium",disabled:N,onClick:function(){"edit"==s||"task"==l?(n&&a&&a(),o()):"conversation"==s?i():r()}})))}}]),t}(h.a.Component);t.a=S,S.propTypes={addComment:g.a.func,changeMode:g.a.func,clearComment:g.a.func,closeComment:g.a.func,content:g.a.string,from:g.a.string,hasPrivacyMode:g.a.bool,havePublicComment:g.a.bool,isCommentChanged:g.a.bool,isLoading:g.a.bool,isPublic:g.a.bool,module:g.a.string,revertIsCommentChanged:g.a.func,toggleComment:g.a.func,type:g.a.string,updateComment:g.a.func}},1124:function(e,t,a){e.exports={commentButton:"CommentActionButton-module__commentButton common-module__dflex",commentAction:"CommentActionButton-module__commentAction common-module__dtable",isActive:"CommentActionButton-module__isActive",large:"CommentActionButton-module__large CommentActionButton-module__commentAction common-module__dtable",medium:"CommentActionButton-module__medium CommentActionButton-module__commentAction common-module__dtable",loading:"CommentActionButton-module__loading",peekLeftClearBtn:"CommentActionButton-module__peekLeftClearBtn",arrow:"CommentActionButton-module__arrow",content:"CommentActionButton-module__content common-module__tcenter common-module__pointer",actionType:"CommentActionButton-module__actionType common-module__semibold common-module__ftsmooth",subtitle:"CommentActionButton-module__subtitle common-module__oflow",buttonAction:"CommentActionButton-module__buttonAction common-module__vishidden",active:"CommentActionButton-module__active common-module__visible",actionSubtitle:"CommentActionButton-module__actionSubtitle",switchAction:"CommentActionButton-module__switchAction",actionNotify:"CommentActionButton-module__actionNotify",switchbox:"CommentActionButton-module__switchbox",peekLeftPopup:"CommentActionButton-module__peekLeftPopup",commentLeftPopup:"CommentActionButton-module__commentLeftPopup",pl30:"CommentActionButton-module__pl30",sentButton:"CommentActionButton-module__sentButton",postSubmit:"CommentActionButton-module__postSubmit common-module__dflex"}},1155:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a(26),v=a(1107),_=a(17),C=a(131),b=a(6),E=a(24),y=a(956),I=a(242),A=a(22),k=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e)),n=[],i=a.props.attachments;if(i&&i.length)for(var s=0;s<i.length;s++)n.push(i[s].id);return a.state={from:0,limit:25,attachmentIds:n},a.getAutofillContacts=Object(C.a)(a.getAutofillContacts.bind(a),100,!0),a.getMentions=a.getMentions.bind(a),a.setAttachmentIds=a.setAttachmentIds.bind(a),a}return u()(t,e),l()(t,[{key:"setAttachmentIds",value:function(e){this.setState({attachmentIds:e})}},{key:"getAutofillContacts",value:function(e,t,a){var n=this,o=this.props,i=o.deptId,r=o.teamsList,s=o.getTeamsList;r.length?this.getMentions(e,t,a):s(i).then(function(){n.getMentions(e,t,a)})}},{key:"getMentions",value:function(e,t,a){var n=this,o=this.props,i=o.deptId,r=o.getAgentsList,s=o.searchAgents,l=this.state,c=l.from,d=l.limit;d=(c=(t-1)*d)+d,e.length>1?s(e,c,d).then(function(e){console.log("res",e)}):(this.invokeMentionsCallback(t,a),r(i,c,d).then(function(){n.invokeMentionsCallback(t,a)}))}},{key:"invokeMentionsCallback",value:function(e,t){for(var a=this.props,n=a.agentsObject,o=a.teamsObject,i=a.agentsList,r=a.teamsList,s=i?i.map(function(e){return n[e]}):[],l=r.map(function(e){return o[e]}),c=s.concat(l),d=25*(e-1),m=d+25,u=[],p=0;p<c.length;p++){var h=c[p],f=h.id,g=h.zuid,v=h.name,_=h.isConfirmed,C=h.photoURL,E=h.firstName,y=h.lastName;if(h.subTeams){var I={id:f,name:v,value:v,type:"team",team:Object(b.u)(v)};u.push(I)}else if(_){var A={id:g,userId:f,avatar:C||"https://contacts.localzoho.com/file?t=user&fs=thumb&ID=53746212&exp=600",name:Object(b.e)(E,y),value:v,type:"user"};u.push(A)}}u.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}),u=u.slice(d,m);var k={};k.results=u,k.isMore=u.length>0,t(k)}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.orgId,n=e.id,o=e.from,i=e.showAttachmentViewer,r=(e.photoURL,e.name,e.borderStyle),s=e.isPeekView,l=e.value,c=e.revertIsCommentChanged,d=e.setIsCommentChanged,m=e.isCommentChanged,u=e.addComment,p=e.uploadAttach,f=e.deleleUpload,g=e.toggleComment,_=e.updateComment,C=e.closeComment,E=e.showConfirmBox,y=e.showMessage,I=e.page,k=e.oldAttachments,S=e.newAttachments,N=e.attachments,T=e.editorMode,w=e.myInfo,O=e.hasAttachments,x=e.hasPrivacyMode,D=e.openCloudAttach,P=e.isCloudAttchOpen,F=e.mention,B=e.isLightAgent,L=e.havePublicComment,V=e.uploadCloudAttachment,R=e.needAttachment;return h.a.createElement(v.a,{id:n,orgId:a,value:l,from:o,page:I,type:t,addComment:u,updateComment:_,closeComment:C,toggleComment:g,oldAttachments:k,newAttachments:S,attachments:N,uploadAttach:p,deleleUpload:f,showAttachmentViewer:i,isPeekView:s,isCommentChanged:m,setIsCommentChanged:d,revertIsCommentChanged:c,showConfirmBox:E,showMessage:y,borderStyle:r,getAutofillContacts:this.getAutofillContacts,editorMode:T,photoURL:w.photoURL,name:Object(b.e)(w.firstName,w.lastName),setAttachmentIds:this.setAttachmentIds,attachmentIds:this.state.attachmentIds,hasAttachments:O,hasPrivacyMode:x,openCloudAttach:D,isCloudAttchOpen:P,CloudAttachmentIframe:A.s,mention:F,havePublicComment:L&&!B,uploadCloudAttachment:V,needAttachment:R})}}]),t}(h.a.Component);k.propTypes={addComment:f.PropTypes.func,agentsList:f.PropTypes.array,agentsObject:f.PropTypes.object,attachments:f.PropTypes.object,borderStyle:f.PropTypes.string,closeComment:f.PropTypes.func,deleleUpload:f.PropTypes.func,deptId:f.PropTypes.string,editorMode:f.PropTypes.string,from:f.PropTypes.string,getAgentsList:f.PropTypes.func,getTeamsList:f.PropTypes.func,hasAttachments:f.PropTypes.bool,hasPrivacyMode:f.PropTypes.bool,havePublicComment:f.PropTypes.bool,id:f.PropTypes.string,isCloudAttchOpen:f.PropTypes.bool,isCommentChanged:f.PropTypes.bool,isLightAgent:f.PropTypes.bool,isPeekView:f.PropTypes.bool,mention:f.PropTypes.array,myInfo:f.PropTypes.object,needAttachment:f.PropTypes.bool,newAttachments:f.PropTypes.object,oldAttachments:f.PropTypes.object,openCloudAttach:f.PropTypes.func,orgId:f.PropTypes.string,page:f.PropTypes.string,revertIsCommentChanged:f.PropTypes.func,searchAgents:f.PropTypes.func,setIsCommentChanged:f.PropTypes.func,showAttachmentViewer:f.PropTypes.func,showConfirmBox:f.PropTypes.func,showMessage:f.PropTypes.func,teamsList:f.PropTypes.array,teamsObject:f.PropTypes.object,toggleComment:f.PropTypes.func,type:f.PropTypes.string,updateComment:f.PropTypes.func,uploadAttach:f.PropTypes.func,uploadCloudAttachment:f.PropTypes.func,value:f.PropTypes.string},t.a=Object(g.connect)(function(e,t){var a=Object(_.r)(e),n=e.myInfo,o=e.module,i=e.isCloudAttchOpen,r=e.activeAgents,s=e.departmentSpecificState,l=Object(b.c)(n.profileId,o.profile);return{deptId:a,teamsList:s[a].teamsList,agentsList:r[a],agentsObject:o.agent,teamsObject:o.teams,myInfo:n,isCloudAttchOpen:i,isLightAgent:l}},{getTeamsList:E.u,getAgentsList:y.g,searchAgents:y.j,showConfirmBox:E.a.showConfirmBox,showMessage:E.Q,openCloudAttach:I.h,uploadCloudAttachment:I.l})(k)},1162:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1021),_=a(8),C=function(e){function t(){return r()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return u()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.deleteDraft,a=e.closeAlert;return h.a.createElement(v.a,{isActive:!0,title:_.f.getI18NValue("support.request.alert.discard.draft.header"),message:_.f.getI18NValue("crm.confirm.discard.draft"),submitText:_.f.getI18NValue("support.yes"),cancelText:_.f.getI18NValue("support.label.cancel"),onSubmitClick:t,onCancelClick:a})}}]),t}(p.Component);t.a=C,C.propTypes={deleteDraft:g.a.func,moduleMeta:g.a.object}},1168:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1197),_=a.n(v),C=a(8),b=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.state={playingIndex:1},a.play=a.play.bind(a),a.playNext=a.playNext.bind(a),a.pauseOthers=a.pauseOthers.bind(a),a}return u()(t,e),l()(t,[{key:"play",value:function(e){this.setState({playingIndex:e}),this.pauseOthers(e)}},{key:"playNext",value:function(e){var t=e+1;this.setState({playingIndex:t});var a=document.getElementById("audio"+t);a&&a.play()}},{key:"pauseOthers",value:function(e){Array.prototype.slice.call(document.getElementsByTagName("audio")).forEach(function(t,a){e!=a+1&&t.pause()})}},{key:"render",value:function(){var e=this,t=this.state.playingIndex,a=this.props.thread,n=JSON.parse(a.content),o=n.voicemailurl,i=n.recordingurl,r=n.voicemailduration,s=n.recordingduration,l=void 0,c=void 0,d=void 0,m=[],u=0;if(o.startsWith("https://")||i.startsWith("https://"))o.startsWith("https://")?(l=o,c=r,d=C.f.getI18NValue("support.twi.msg.voicemessage")):(l=i,c=s,d=C.f.getI18NValue("support.twi.msg.callrecording"));else{u=(m=JSON.parse(n.recordingurl)).length,l=m[0].url,l=u>2?l:l+m[1].rid;var p=s%3600,f=Math.floor(p/60),g=p%60,v=Math.ceil(g);c=Math.floor(s/3600)+":"+f+":"+v+" (H:M:S)",d=C.f.getI18NValue("support.twi.msg.callrecording")}return h.a.createElement("div",{className:_.a.audioDiv},h.a.createElement("div",{className:_.a.audioHead},h.a.createElement("span",{className:_.a.audioTitle},d),h.a.createElement("span",{className:_.a.audioDur},"( ",C.f.getI18NValue("crm.activities.call.duration"),":",h.a.createElement("span",null,c)," )"),u>2?h.a.createElement("span",null,C.f.getI18NValue("support.label.playing")," ",h.a.createElement("span",null,t),"/",u-1," ",C.f.getI18NValue("support.label.recording")):null),h.a.createElement("div",{className:_.a.audioSource},u>2?m.map(function(t,a){var n=m[a].rid;return n?h.a.createElement("audio",{controls:!0,id:"audio"+a,src:l+n,key:a,className:_.a.audio,onPlay:function(){e.play(a)},onEnded:function(){e.playNext(a)},style:{display:"block"}}):null}):h.a.createElement("audio",{controls:!0,src:l,className:_.a.audio})))}}]),t}(h.a.Component);t.a=b,b.propTypes={thread:g.a.object}},1191:function(e,t,a){"use strict";a.d(t,"d",function(){return c}),a.d(t,"c",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"b",function(){return u});var n=a(2),o=a.n(n),i=a(15),r=a(3),s=a(6),l=a(7);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.W;return a=a.trim(),{types:Object(s.m)(r.L.TICKET_TEMPLATE),shouldCallAPI:function(o){if(n)return!0;var i=o.ticketTemplate,r=i.deptId,s=i.searchStr,l=i.from;return e!==r||a!==s||t!==l},callAPI:function(n){var s=n.currentOrgId,d=2*c>100?100:2*c;return Object(i.a)(r.w+"ticketTemplates?from="+t+"&limit="+d+"&departmentId="+e+(a?"&templateName="+a:""),!1,{orgId:s}).get().then(function(n){var i=Object(l.normalize)(204!==n.responseStatus?n.data:[],Object(l.arrayOf)(Object(l.schema)(r.L.TICKET_TEMPLATE_L)));return o()({},i,{from:t,limit:c,isNextData:!!n.data&&n.data.length>c,searchStr:a,deptId:e})})},payload:{from:t}}}function d(e){return{types:Object(s.m)("TICKET_TEMPLATE_DETAIL"),callAPI:function(t){var a=t.currentOrgId;return Object(i.a)(r.w+"ticketTemplates/"+e,!1,{orgId:a}).get().then(function(e){return Object(l.normalize)(e,Object(l.schema)(r.L.TICKET_TEMPLATE_L))},function(e){throw e})}}}function m(e,t,a,n,o){var l="departmentId="+e+"&module="+t+"&from="+a+"&limit="+n;return""!=o&&o&&(l+="&searchStr=*"+o+"*"),{types:Object(s.m)("EMAIL_TEMPLATE_LIST"),callAPI:function(e){return Object(i.a)(r.w+"templates?"+l,!1,{orgId:e.currentOrgId}).get().then(function(e){return e})}}}function u(e,t){return{types:Object(s.m)("TEMPLATESFOLDERSLIST"),callAPI:function(a){return Object(i.a)("/api/v1/templates/"+e+"/render?entityId="+t,!1,{orgId:a.currentOrgId}).post("").then(function(e){return{res:e,entity:{},result:[]}})}}}},1197:function(e,t,a){e.exports={audioDiv:"AudioMessage-module__audioDiv",audioHead:"AudioMessage-module__audioHead",audioTitle:"AudioMessage-module__audioTitle",audioDur:"AudioMessage-module__audioDur",audioSource:"AudioMessage-module__audioSource",audio:"AudioMessage-module__audio"}},1198:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1199),_=a.n(v),C=a(1053),b=a(30),E=a(8),y=a(459),I=a(1007),A=a(6),k=a(204),S=a(3),N=a(16),T=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.state={editedId:"conversation"==a.props.page?a.props.editedId:""},a.closeComment=a.closeComment.bind(a),a.editComment=a.editComment.bind(a),a.updateComment=a.updateComment.bind(a),a.focusOnAttachments=a.focusOnAttachments.bind(a),a}return u()(t,e),l()(t,[{key:"componentWillReceiveProps",value:function(e){e.editedId!=this.props.editedId&&this.setState({editedId:e.editedId})}},{key:"constructMoreObj",value:function(){var e=this.props,t=e.haveCommentEditPermission,a=e.haveCommentDeletePermission,n=[];return t&&n.splice(0,0,{name:E.f.getI18NValue("crm.label.edit"),iconName:"pen2",size:"size14"}),a&&n.splice(t?1:0,0,{name:E.f.getI18NValue("support.permission.delete.comment"),iconName:"delete2",size:"size14"}),n}},{key:"editComment",value:function(e){var t=this,a=function(){var a=t.props,n=a.page,o=a.editComment;"conversation"==n?o(e):t.setState({editedId:e})};"undefined"==typeof ZohoDeskEditor?Object(k.a)(S.j,"js","ZohoDeskEditor").then(a):a()}},{key:"closeComment",value:function(){var e=this.props,t=e.page,a=e.closeComment;"conversation"==t?a():this.setState({editedId:""})}},{key:"updateComment",value:function(e,t,a,n,o,i){var r=this,s=this.props,l=s.updateComment,c=s.hasAttachments,d={content:t};(void 0===c||c)&&(d.attachmentIds=a),l(e,d,n,o,function(e){r.closeComment(),i&&i()})}},{key:"focusOnAttachments",value:function(){Object(A.l)(this.props.scrollCont,this.attachCont.offsetTop-10)}},{key:"replaceMentions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments[2];return t.length&&(e=e.replace(/zsu[@[a-z]+(#|:).+?]zsu/g,function(e,n){var o=e,i=e.split("zsu[")[1].slice(0,-4);if(0==i.indexOf("@")){if(-1!==i.indexOf("user")){for(var r=i.replace("@user#","").replace("@user:","").split("_")[0],s={},l=0;l<t.length;l++)r!=t[l].zuid&&r!=t[l].id||(s=t[l]);var c=s,d=c.id,m=c.userId,u=c.name,p=c.firstName,h=c.lastName,f=u||Object(A.e)(p,h);return a?f:'<a href="/support/arunadesk/ShowHomePage.do#setup/organization/agents/'+(m||d)+'" class='+_.a.mention+' onclick="return false">'+f+"</a>"}for(var g=i.replace("@team#","").replace("@team:","").split("_")[0],v={},C=0;C<t.length;C++)g==t[C].id&&(v=t[C]);return a?v.name:"<a class="+_.a.mention+">"+v.name+"</a>"}if(0==i.indexOf("#")&&-1==i.indexOf("activity")){var b=i.split(":"),E=b[0],y=b[2];return a?E:"<a class="+_.a.mention+" href='#Cases/dv/"+y+'\' onclick="return false">'+E+"</a>"}return o})),e}},{key:"render",value:function(){var e=this,t=this.props,a=t.comments,n=t.orgId,o=t.page,i=t.deleteComment,r=t.uploadAttach,s=t.deleleUpload,l=t.from,c=t.showAttachmentViewer,d=t.downloadAttachment,m=t.renderCommentHistory,u=(t.photoURL,t.name,t.setIsCommentChanged),p=t.revertIsCommentChanged,f=t.isCommentChanged,g=(t.showConfirmBox,t.showMessage,t.isAdminUser),v=t.hasPrivacyMode,A=void 0===v||v,k=t.haveCommentEditPermission,S=t.haveCommentDeletePermission,T=t.currentUserId,w=t.hasAttachments,O=void 0===w||w,x=t.CommentBoxContainer,D=t.isReadOnly,P=this.state.editedId,F=h.a.createElement(b.TopbandFontIcon,{name:"more",size:"20"}),B=_.a.tname;return"leftPanel"==l&&(B=B+" "+_.a.mw100),h.a.createElement("span",{className:_.a.commentLeftList},a.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1],v=t.id,w=t.commenter,L=t.commenterId,V=t.attachments,R=t.content,M=t.mention,j=t.isPublic,z=t.commentedTime,K=t.modifiedTime,U=w||{},H=U.name,W=U.photoURL,Z=(L==T||g)&&(k||S);return v===P?h.a.createElement(x,{id:v,isCommentChanged:f,setIsCommentChanged:u,revertIsCommentChanged:p,key:"comment"+P,type:"edit",attachments:V,value:e.replaceMentions(R,M,!0),mention:M,orgId:n,closeComment:e.closeComment,page:o,uploadAttach:r,deleleUpload:s,updateComment:e.updateComment,showAttachmentViewer:c,hasAttachments:O,hasPrivacyMode:A}):h.a.createElement(N.Container,{alignBox:"row",className:"leftPanel"==l?_.a.leftList+" "+_.a.threadList:_.a.threadList,key:a,id:v},h.a.createElement(N.Box,{className:_.a.cleft},h.a.createElement(C.a,{name:H,src:"null"!=W?W:null,size:"xmedium",iconName:"comment"!=o&&"task"!=l&&"zdeskCommentfilled",borderPalette:"comment"!=o&&"primary",iconColor:"comment"!=o&&"primary",iconSize:"comment"!=o&&"8"})),h.a.createElement("div",{className:_.a.cRight},h.a.createElement("div",null,h.a.createElement("span",{className:B,"data-title":H},H),h.a.createElement("span",{className:_.a.prithrlist},A&&"leftPanel"!=l&&"task"!=l&&h.a.createElement("span",null,j?h.a.createElement("span",{className:_.a.thrdate},h.a.createElement(E.c,{i18NKey:"support.request.public.comment"})):h.a.createElement("span",{className:_.a.thrdate},h.a.createElement(E.c,{i18NKey:"support.request.private.comment"}))),h.a.createElement("span",{className:_.a.thrdate},h.a.createElement(E.d,{to:z,format:function(){return"DD MMM YYYY hh:mm A"},ago:"ago",later:"late"})),K&&"leftPanel"!=l&&h.a.createElement("span",{className:_.a.thrdate+" "+_.a.editTxt,onClick:m&&m.bind(e,v),"data-id":"CommentHistory"},h.a.createElement(E.c,{i18NKey:"support.request.history.commented.editedtext"})))),h.a.createElement("div",{className:"leftPanel"==l&&_.a.mt12},h.a.createElement("p",{className:_.a.thrdPlain,dangerouslySetInnerHTML:{__html:e.replaceMentions(R,M)}})),V&&V.length?h.a.createElement("div",{className:_.a.attachCont,ref:function(t){e.attachCont=t}},h.a.createElement(y.a,{data:V,downloadAttachment:d,showAttachmentViewer:c,orgId:n,size:"leftPanel"==l?"small":"medium"})):null),h.a.createElement(N.Box,{className:_.a.moreOptions},"leftPanel"!=l&&Z&&!D?h.a.createElement("span",{className:_.a.rgt+" "+_.a.more},h.a.createElement(I.a,{objValues:e.constructMoreObj(),moreIcon:F,Icnsize:"16",onSelect:function(t){"Edit"==t?e.editComment(v):"Delete"==t&&i(v)},listStyle:"alpha"})):null,"leftPanel"!=l&&V&&V.length?h.a.createElement("span",{"data-title":E.f.getI18NValue("support.attachments"),className:_.a.rgt+" "+_.a.posrel,onClick:e.focusOnAttachments},h.a.createElement("span",{className:_.a.mailicn},h.a.createElement(b.TopbandFontIcon,{name:"attachment5",size:"11"})),h.a.createElement("span",{className:_.a.attachCount},V.length)):null))}))}}]),t}(h.a.Component);t.a=T,T.propTypes={CommentBoxContainer:g.a.node,closeComment:g.a.func,comments:g.a.array,currentUserId:g.a.string,deleleUpload:g.a.func,deleteComment:g.a.func,downloadAttachment:g.a.func,editComment:g.a.func,editedId:g.a.string,focusOnAttachments:g.a.func,from:g.a.string,getThread:g.a.func,hasAttachments:g.a.bool,hasPrivacyMode:g.a.bool,haveCommentDeletePermission:g.a.bool,haveCommentEditPermission:g.a.bool,isAdminUser:g.a.bool,isCommentChanged:g.a.bool,isReadOnly:g.a.bool,name:g.a.string,orgId:g.a.string,page:g.a.string,photoURL:g.a.string,renderCommentHistory:g.a.func,revertIsCommentChanged:g.a.func,scrollCont:g.a.object,setIsCommentChanged:g.a.func,showAttachmentViewer:g.a.func,showConfirmBox:g.a.func,showMessage:g.a.func,updateComment:g.a.func,uploadAttach:g.a.func}},1199:function(e,t,a){e.exports={threadList:"CommentsList-module__threadList common-module__cboth",attachCont:"CommentsList-module__attachCont",attachCount:"CommentsList-module__attachCount",peekAttachCont:"CommentsList-module__peekAttachCont",leftList:"CommentsList-module__leftList",mt12:"CommentsList-module__mt12",editTxt:"CommentsList-module__editTxt",cleft:"CommentsList-module__cleft",more:"CommentsList-module__more",cRight:"CommentsList-module__cRight common-module__flexgrow",posrel:"CommentsList-module__posrel",rgt:"CommentsList-module__rgt common-module__fright",tname:"CommentsList-module__tname common-module__bold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis common-module__ftsmooth",commentLeftList:"CommentsList-module__commentLeftList",mw100:"CommentsList-module__mw100",mw130:"CommentsList-module__mw130",thrdate:"CommentsList-module__thrdate common-module__dotted common-module__oflow common-module__ellipsis common-module__ftsmooth",showrec:"CommentsList-module__showrec",forum_status:"CommentsList-module__forum_status common-module__semibold common-module__ftsmooth common-module__ftsmooth",forum_txt:"CommentsList-module__forum_txt common-module__dotted common-module__oflow common-module__ellipsis common-module__dotted common-module__oflow common-module__ellipsis",attach_look:"CommentsList-module__attach_look",attach_count:"CommentsList-module__attach_count",mailicn:"CommentsList-module__mailicn",thrdPlain:"CommentsList-module__thrdPlain",moreOptions:"CommentsList-module__moreOptions",mention:"CommentsList-module__mention",prithrlist:"CommentsList-module__prithrlist"}},1200:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1201),_=a.n(v),C=a(64),b=a.n(C),E=a(72),y=a.n(E),I=a(16),A=a(6),k=a(8),S=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.getScrollContainerRef=a.getScrollContainerRef.bind(a),a.getSelectedItemRef=a.getSelectedItemRef.bind(a),a.onScroll=a.onScroll.bind(a),a.isFetching=!1,a}return u()(t,e),l()(t,[{key:"getScrollContainerRef",value:function(e){this.scrollContainerRef=e}},{key:"getSelectedItemRef",value:function(e){this.selectItemRef=e}},{key:"componentDidUpdate",value:function(){var e=this.props.selectSearchIndex,t=this.scrollContainerRef,a=this.selectItemRef;if(a&&t){var n=a.offsetTop-t.scrollTop,o=a.offsetHeight,i=t.offsetHeight;(n<0||o+n>i)&&(t.scrollTop=0==e?0:t.scrollTop+n)}}},{key:"onScroll",value:function(e){var t=this;if(this.props.fetchData&&!this.isFetching){var a=e.currentTarget;a.scrollHeight<=a.scrollTop+a.offsetHeight&&(this.isFetching=!0,this.props.fetchData().then(function(){t.isFetching=!1},function(){t.isFetching=!1}))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.orgName,o=(t.selectEmail,t.type),i=t.selectSearchIndex,r=(t.addTag,t.needFixed),s=t.needAvatar,l=t.onSelect;return h.a.createElement(y.a,{onScroll:this.onScroll,isArrow:!1,boxPosition:"bottomCenter",isActive:!0,className:""+(r?_.a.resetDropbox:"")},h.a.createElement("div",{ref:this.getScrollContainerRef,className:s?_.a.agentSearch:_.a.tagsSearch},a.length?a.map(function(t,a){t.id;var r=t.name,c=t.email,d=t.isNew,m=t.firstName,u=t.lastName,p=t.photoURL,f=t.newLabel,g=s&&p?p+"?portalname="+n:null;s&&Object(A.g)(m,u);return r=s?Object(A.e)(m,u):r,h.a.createElement(I.Container,{alignBox:"row",align:"vertical",className:_.a.asItem+" "+(i==a?_.a.selectIem:""),onMouseDown:function(){l(t,o)},eleRef:a==i?e.getSelectedItemRef:null,key:a},s?h.a.createElement(I.Box,{className:_.a.imgCont},h.a.createElement(b.a,{src:g,name:r,size:"medium"})):null,h.a.createElement(I.Box,{flexible:!0},h.a.createElement("div",{className:_.a.ashead},d?h.a.createElement("span",{className:_.a.newTag},f):null,r),c?h.a.createElement("div",{className:_.a.asemail},c):null))}):h.a.createElement("div",{className:_.a.searchDiv},k.f.getI18NValue("support.label.searching"))))}}]),t}(h.a.Component);t.a=S,S.propTypes={addTag:g.a.func,data:g.a.array,fetchData:g.a.oneOfType([g.a.func,g.a.bool]),isPopupOpen:g.a.bool,needAvatar:g.a.bool,orgName:g.a.string,placeholder:g.a.string,removeClose:g.a.func,selectEmail:g.a.func,selectSearchIndex:g.a.number,theme:g.a.string,togglePopup:g.a.func,type:g.a.string},S.defaultProps={data:[],needAvatar:!0}},1201:function(e,t,a){e.exports={searchDrop:"SearchResults-module__searchDrop",resetDropbox:"SearchResults-module__resetDropbox",agentSearch:"SearchResults-module__agentSearch SearchResults-module__searchDrop",tagsSearch:"SearchResults-module__tagsSearch SearchResults-module__searchDrop",asItem:"SearchResults-module__asItem",ashead:"SearchResults-module__ashead common-module__semibold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis",newTag:"SearchResults-module__newTag",selectIem:"SearchResults-module__selectIem",searchDiv:"SearchResults-module__searchDiv",imgCont:"SearchResults-module__imgCont",asemail:"SearchResults-module__asemail common-module__dotted common-module__oflow common-module__ellipsis",defaultSize:"SearchResults-module__defaultSize",black:"SearchResults-module__black",white:"SearchResults-module__white",iconCustom:"SearchResults-module__iconCustom"}},122:function(e,t,a){e.exports={attachment:"ThreadAttachments-module__attachment common-module__cboth",medium:"ThreadAttachments-module__medium",small:"ThreadAttachments-module__small",attachleft:"ThreadAttachments-module__attachleft common-module__tcenter",attachright:"ThreadAttachments-module__attachright",atatchName:"ThreadAttachments-module__atatchName common-module__dotted common-module__oflow common-module__ellipsis",attachSize:"ThreadAttachments-module__attachSize",attachDownload:"ThreadAttachments-module__attachDownload",pt8:"ThreadAttachments-module__pt8",docspan:"ThreadAttachments-module__docspan",attachCount:"ThreadAttachments-module__attachCount",mr6:"ThreadAttachments-module__mr6",ml6:"ThreadAttachments-module__ml6"}},1222:function(e,t,a){"use strict";a.d(t,"e",function(){return f}),a.d(t,"h",function(){return g}),a.d(t,"k",function(){return v}),a.d(t,"a",function(){return _}),a.d(t,"i",function(){return C}),a.d(t,"d",function(){return b}),a.d(t,"g",function(){return E}),a.d(t,"f",function(){return y}),a.d(t,"b",function(){return I}),a.d(t,"c",function(){return A}),a.d(t,"j",function(){return k});var n=a(20),o=a.n(n),i=a(23),r=a.n(i),s=a(2),l=a.n(s),c=a(5),d=a.n(c),m=a(15),u=a(6),p=(a(46),a(3)),h=a(7);function f(e,t){return{types:Object(u.m)("SAVEDRAFT"),callAPI:function(a,n){return Object(m.a)("/api/v1/tickets/"+e+"/draftReply",!1,{orgId:a.currentOrgId}).post("",t).then(function(t){var a=n(),o=t.id,i=d()({},o,t),s=l()({},i,a.module.thread),c=a.module.ticket[e].thread||[],m=a.module.ticket[e].conversationIds||[],u=[o].concat(r()(c)),p=[{id:o,type:"thread"}].concat(r()(m));return{data:t,entities:{thread:s,ticket:d()({},e,{thread:u,conversationIds:p})}}})}}}function g(e,t){return{types:Object(u.m)("SEND_FOR_REVIEW"),callAPI:function(a,n){return Object(m.a)("/api/v1/tickets/"+e+"/threads/"+t+"/sendForReview",!1,{orgId:a.currentOrgId}).post("").then(function(e){return e})}}}function v(e,t,a){return{types:Object(u.m)("UPDATEDRAFT"),callAPI:function(n,o){return Object(m.a)("/api/v1/tickets/"+e+"/draftReply/"+t,!1,{orgId:n.currentOrgId}).patch("",a).then(function(a){var n=o(),i=n.module.ticket[e].conversationIds||[],r=n.module.ticket[e].thread||[];if(i.length){for(var s=0,l=0;l<=i.length;l++)if(i[l].id==t){s=l;break}i.splice(0,0,i.splice(s,1)[0])}else{var c=r.indexOf(t);r.splice(0,0,r.splice(c,1)[0])}return{data:a,entities:{thread:d()({},t,a),ticket:d()({},e,{conversationIds:i,thread:r})}}})}}}function _(e,t,a){return{types:Object(u.m)("TICKET_THREAD_DELETE"),callAPI:function(n,o){return Object(m.a)(e,!1,{orgId:n.currentOrgId}).del().then(function(e){return{ticketId:t,threadId:a}})}}}function C(e,t,a){var n=a?"?isPrivate=true":"";return{types:Object(u.m)("SENDREPLY"),callAPI:function(a,o){return Object(m.a)("/api/v1/tickets/"+e+"/sendReply"+n,!1,{orgId:a.currentOrgId}).post("",t).then(function(t){var a=o(),n=t.id,i=d()({},n,t),s=l()({},i,a.module.thread),c=a.module.ticket[e].thread||[],m=a.module.ticket[e].conversationIds||[],u=[n].concat(r()(c)),p=[{id:n,type:"thread"}].concat(r()(m));return{data:t,entities:{thread:s,ticket:d()({},e,{thread:u,conversationIds:p})}}})}}}function b(e,t,a){return{types:Object(u.m)("RESEND_THREAD"),callAPI:function(n,o){return Object(m.a)(e,!1,{orgId:n.currentOrgId}).post().then(function(e){var n=o(),i=n.module.ticket[a].conversationIds||[],r=n.module.ticket[a].thread||[];if(i.length){for(var s=0,l=0;l<=i.length;l++)if(i[l].id==t){s=l;break}i.splice(0,0,i.splice(s,1)[0])}else{var c=r.indexOf(t);r.splice(0,0,r.splice(c,1)[0])}return{data:e,entities:{thread:d()({},t,e),ticket:d()({},a,{thread:r,conversationIds:i})}}})}}}function E(e,t,a,n){return e=n?e+"&isPrivate=true":e,{types:Object(u.m)("SENDDRAFT"),callAPI:function(n,o){return Object(m.a)(e,!1,{orgId:n.currentOrgId}).post().then(function(e){var n=o(),i=n.module.ticket[t].conversationIds||[],r=n.module.ticket[t].thread||[];if(i.length){for(var s=0,l=0;l<=i.length;l++)if(i[l].id==a){s=l;break}i.splice(0,0,i.splice(s,1)[0])}else{var c=r.indexOf(a);r.splice(0,0,r.splice(c,1)[0])}return{data:e,entities:{thread:d()({},a,e),ticket:d()({},t,{conversationIds:i,thread:r})}}})}}}function y(e){return{types:Object(u.m)("SEARCHCONTACT"),callAPI:function(t,a){return Object(m.a)("/api/v1/contacts/search?limit=10&email="+e+"*",!1,{orgId:t.currentOrgId}).get().then(function(e){return 204==e.responseStatus?{list:[]}:l()(Object(h.normalize)(e.data,Object(h.arrayOf)(Object(h.schema)(p.L.CONTACT_L))),{list:e.data})})}}}function I(e){return{types:Object(u.m)("FROMEMAILADDRESS"),shouldCallAPI:function(t){return!t.departmentSpecificState[e]||!t.departmentSpecificState[e].fromEmailAddress.length},callAPI:function(t){return Object(m.a)("/api/v1/mailReplyAddress?departmentId="+e+"&isActive=true",!1,{orgId:t.currentOrgId}).get().then(function(t){return 204!=t.responseStatus?{entities:{},result:[],address:t.data,deptId:e}:{res:t,entity:{},result:[]}})}}}function A(e){return{types:Object(u.m)("MAIL_CONFIGURATIONS"),shouldCallAPI:function(t){return!o()(t.departmentSpecificState[e].mailConfigurations).length},callAPI:function(t){return Object(m.a)("/api/v1/departments/"+e+"/mailConfigurations",!1,{orgId:t.currentOrgId}).get().then(function(t){return{res:t,deptId:e,entity:{},result:[]}})}}}function k(e){return function(t,a){var n=a(),o=n.module.ticket[e],i=o.thread,r=void 0===i?[]:i,s=o.conversationIds,l=o.threadCount,c=o.commentCount;l=r.length;var m=r[0];if(s){for(var u=0;u<s.length;u++)if("thread"==s[u].type){m=s[u].id;break}l=s.length-parseInt(c)}var p={recentThreadId:m,recentThread:m?n.module.thread[m]:null,threadCount:l};return t({type:"SET_RECENT_THREAD_DATA_SUCCESS",data:{entities:{ticket:d()({},e,p)}}})}}},1233:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1234),_=a.n(v),C=a(16),b=a(239),E=a.n(b),y=a(8),I=a(73),A=a.n(I),k=function(e){function t(){return r()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return u()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.closeTicket,a=e.reOpenTicket,n=e.isSpam,o=e.isClosed,i=e.isOnHold,r=e.notSpam,s=e.moduleName,l=e.haveCloseTicketPermission,c=e.isCancel,d=e.onClick,m=e.isCloserNotificationEnable,u=e.toggleCloserNotification,p=!1;l||o||i||(p=!0);var f=m?y.f.getI18NValue("support.survey.lable.last.notification.disable",[s]):y.f.getI18NValue("support.survey.lable.last.notification.enable",[s]);return h.a.createElement(C.Container,{alignBox:"row",align:"vertical",className:_.a.container},c||n||p||o||i?null:h.a.createElement(C.Box,{className:_.a.switch,"data-title":f},h.a.createElement(E.a,{id:"notification",checked:m,onChange:u})),h.a.createElement(C.Box,{flexible:!0},n?h.a.createElement(A.a,{className:_.a.spamButton,onClick:r,needAppearance:!1},y.f.getI18NValue("support.not.spam")):p?c?h.a.createElement(A.a,{className:_.a.cancelButton,onClick:d,needAppearance:!1},y.f.getI18NValue("support.label.cancel")):null:h.a.createElement(A.a,{className:_.a.blueBtn,onClick:o||i?a:t,dataId:"reopen-ticket",needAppearance:!1},o||i?y.f.getI18NValue("support.label.reopen.req",[s]):y.f.getI18NValue("support.common.set.close.entity",[s]))))}}]),t}(h.a.Component);t.a=k,k.propTypes={closeTicket:g.a.func,haveCloseTicketPermission:g.a.bool,isCancel:g.a.bool,isClosed:g.a.bool,isCloserNotificationEnable:g.a.bool,isOnHold:g.a.bool,isSpam:g.a.bool,moduleName:g.a.string,notSpam:g.a.func,onClick:g.a.func,reOpenTicket:g.a.func,toggleCloserNotification:g.a.func}},1234:function(e,t,a){e.exports={button:"TicketCloseButton-module__button common-module__dotted common-module__oflow common-module__ellipsis common-module__semibold common-module__ftsmooth",blueBtn:"TicketCloseButton-module__blueBtn common-module__dotted common-module__oflow common-module__ellipsis common-module__semibold common-module__ftsmooth",spamButton:"TicketCloseButton-module__spamButton TicketCloseButton-module__button common-module__dotted common-module__oflow common-module__ellipsis common-module__semibold common-module__ftsmooth",cancelButton:"TicketCloseButton-module__cancelButton TicketCloseButton-module__button common-module__dotted common-module__oflow common-module__ellipsis common-module__semibold common-module__ftsmooth",container:"TicketCloseButton-module__container",switch:"TicketCloseButton-module__switch"}},1235:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1236),_=a.n(v),C=a(52),b=a(64),E=a.n(b),y=a(73),I=a.n(y),A=a(8),k=a(6),S=a(359),N=a.n(S),T=a(3),w=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.documentKeyupHandler=a.documentKeyupHandler.bind(a),a}return u()(t,e),l()(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.documentKeyupHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.documentKeyupHandler)}},{key:"documentKeyupHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.preventDefault();var t=this.props,a=t.replyConfirm,n=t.closeAlert;27===e.keyCode?n():13===e.keyCode&&a()}},{key:"render",value:function(){var e=this.props,t=e.agents,a=e.replyingUsers,n=e.replyConfirm,o=e.closeAlert,i=e.isFromReplyEditor;return h.a.createElement(N.a,{portalId:T.v},h.a.createElement(C.a,{align:"both",isActive:!0,animationName:"fadeIn"},h.a.createElement("div",{className:_.a.popup},h.a.createElement("div",{className:_.a.header},a.map(function(e,a){var n=t[e.agentId];return h.a.createElement("span",{key:a,className:_.a.user},h.a.createElement(E.a,{size:"large",src:n.photoURL,name:n.name||Object(k.e)(n.firstName,n.lastName)}))}),h.a.createElement("p",{className:_.a.information},a.map(function(e,n){var o=t[e.agentId];return n+=1,h.a.createElement("span",{className:_.a.name,key:n},h.a.createElement("span",null,o.name||Object(k.e)(o.firstName,o.lastName)),n===a.length-1?a.length>1?h.a.createElement("span",{className:_.a.name},A.f.getI18NValue("and")):null:n!==a.length?h.a.createElement("span",null,","):null)}),h.a.createElement("span",null," ",i?A.f.getI18NValue("support.label.collision.detection.newagent.replying"):a.length>1?A.f.getI18NValue("support.label.collision.detection.agent.replying",[A.f.getI18NValue("are")]):A.f.getI18NValue("support.label.collision.detection.agent.replying",[A.f.getI18NValue("is")])))),h.a.createElement("div",{className:_.a.footer},h.a.createElement("div",{className:_.a.footerTitle},A.f.getI18NValue("support.label.collision.detection.agent.reply.question")),h.a.createElement("div",null,h.a.createElement(I.a,{text:A.f.getI18NValue("support.yes"),size:"Medium",palette:"primaryFilled",onClick:n}),h.a.createElement("span",{className:_.a.lastButton},h.a.createElement(I.a,{text:A.f.getI18NValue("support.no"),size:"Medium",palette:"secondary",onClick:o})))))))}}]),t}(h.a.Component);t.a=w,w.propTypes={agents:g.a.object,closeAlert:g.a.func,isFromReplyEditor:g.a.bool,replyConfirm:g.a.func,replyingUsers:g.a.array}},1236:function(e,t,a){e.exports={popup:"CollisionReplyAlert-module__popup",header:"CollisionReplyAlert-module__header",information:"CollisionReplyAlert-module__information",name:"CollisionReplyAlert-module__name common-module__semibold common-module__ftsmooth",user:"CollisionReplyAlert-module__user",footer:"CollisionReplyAlert-module__footer",footerTitle:"CollisionReplyAlert-module__footerTitle",lastButton:"CollisionReplyAlert-module__lastButton"}},1279:function(e,t,a){"use strict";a.d(t,"d",function(){return m}),a.d(t,"b",function(){return u}),a.d(t,"a",function(){return p}),a.d(t,"e",function(){return h}),a.d(t,"c",function(){return f});var n=a(2),o=a.n(n),i=a(5),r=a.n(i),s=a(15),l=a(3),c=a(6),d=a(7),m=function(e,t,a,n,i){return{types:Object(c.m)(t.toUpperCase()+"_GET_"+l.L.COMMENT),callAPI:function(c){return Object(s.a)(""+l.w+e+"/"+a+"/comments?sortBy=-commentedTime&from="+n+"&limit="+i+"&include=mentions",!1,{orgId:c.currentOrgId}).get().then(function(e){var i;if(204!=e.responseStatus){var s=r()({id:a},l.L.COMMENT_L,e.data);return o()({},Object(d.normalize)(s,Object(d.schema)(t,{mapping:{comment:Object(d.arrayOf)(Object(d.schema)(l.L.COMMENT_L))}})),{from:n})}return{entities:(i={},r()(i,l.L.COMMENT_L,{}),r()(i,t,[]),i),from:n}})}}},u=function(e,t,a,n,o){return{types:Object(c.m)(t.toUpperCase()+"_DELETE_"+o),callAPI:function(o,i){return Object(s.a)(""+l.w+e+"/"+a+"/comments/"+n,!1,{orgId:o.currentOrgId}).del().then(function(e){if(200==e.responseStatus){var o="0",s=i().module[t][a].commentCount;return(s=parseInt(s))&&(o=s-1),{entities:r()({},t,r()({},a,r()({},l.L.COMMENT_L,[n]))),commentCount:o,result:a}}})}}},p=function(e,t,a,n,i){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return{types:Object(c.m)(t.toUpperCase()+"_ADD_"+i),callAPI:function(i,c){return Object(s.a)(""+l.w+e+"/"+a+"/comments",!1,{orgId:i.currentOrgId}).post("",n).then(function(e){var n,i="1",s=c().module[t][a].commentCount;return(s=parseInt(s))&&s>0&&(i=s+1),{entities:(n={},r()(n,l.L.COMMENT_L,r()({},e.id,o()({},e,{mention:d}))),r()(n,t,r()({},a,r()({},l.L.COMMENT_L,[e.id]))),n),commentCount:i,result:a}})}}},h=function(e,t,a,n,i,d){var m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];return{types:Object(c.m)(t.toUpperCase()+"_UPDATE_"+d),callAPI:function(t){return Object(s.a)(""+l.w+e+"/"+a+"/comments/"+n,!1,{orgId:t.currentOrgId}).patch("",i).then(function(e){return{entities:r()({},l.L.COMMENT_L,r()({},n,o()({},e,{mention:m})))}})}}},f=function(e,t){return{types:Object(c.m)("COMMENTHISTORY"),callAPI:function(a){return Object(s.a)(l.w+"tickets/"+e+"/comments/"+t+"/history",!1,{orgId:a.currentOrgId}).get().then(function(e){return{data:e.data,entities:{},result:[]}})}}}},1280:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1021),_=a(8),C=function(e){function t(){return r()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return u()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.deleteThread,a=e.closeAlert;return h.a.createElement(v.a,{isActive:!0,title:_.f.getI18NValue("support.history.operation.label.wfalert"),message:_.f.getI18NValue("support.failedmail.remove"),submitText:_.f.getI18NValue("crm.button.delete"),cancelText:_.f.getI18NValue("support.label.cancel"),onSubmitClick:t,onCancelClick:a})}}]),t}(p.Component);t.a=C,C.propTypes={deleteThread:g.a.func,moduleMeta:g.a.object}},1281:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(26),g=a(1),v=a.n(g),_=a(1282),C=a.n(_),b=a(235),E=a.n(b),y=a(73),I=a.n(y),A=a(1007),k=a(1162),S=a(30),N=a(8),T=a(24),w=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e)),n=a.props,i=(n.channel,n.replyThread),s=n.replyMode;return a.state={content:"twitter"==s?"@"+i.twitterProfile+" ":a.props.content,tweetLen:"twitterDm"==s?8e3:280,mode:"twitterDm"==s?"twitterDm":"tweet"},a.handleChange=a.handleChange.bind(a),a.sendDraft=a.sendDraft.bind(a),a.saveDraft=a.saveDraft.bind(a),a.updateDraft=a.updateDraft.bind(a),a.sendReply=a.sendReply.bind(a),a.constructSwtichOptions=a.constructSwtichOptions.bind(a),a.deleteDraftConfirmation=a.deleteDraftConfirmation.bind(a),a.deleteDraft=a.deleteDraft.bind(a),a.closeAlert=a.closeAlert.bind(a),a}return u()(t,e),l()(t,[{key:"handleChange",value:function(e){var t=this.props,a=t.channel,n=t.replyMode,o=t.setReplyData;this.setState({content:e});var i="";"TWITTER"==a?(i=280-e.length,this.setState({tweetLen:i})):(i=8e3-e.length,this.setState({tweetLen:i})),o&&o("content",e),""!=i&&(i<0?(o&&o("isMaxLimit",!0),o&&o("maxCount","twitterDm"==n?8e3:280)):o&&o("isMaxLimit",!1))}},{key:"sendDraft",value:function(){var e=this.props,t=e.showMessage,a=e.hideMessage,n=e.sendDraft,o=this.state.content;""!=o&&o?(a(),n()):t({type:"alert",message:N.f.getI18NValue("support.social.reply.empty")})}},{key:"sendReply",value:function(){if("twitterDm"!=this.state.mode){var e=this.props,t=e.showMessage,a=e.hideMessage,n=e.sendReply,o=e.channel,i=this.state,r=i.content,s=i.tweetLen;""!=r&&r?"TWITTER"==o&&s<0?t({type:"alert",message:N.f.getI18NValue("support.social.twitter.reply.limit")}):(a(),n({channel:o="FACEBOOK_DM"==o?"FACEBOOK":o,content:r})):t({type:"alert",message:N.f.getI18NValue("support.social.reply.empty")})}}},{key:"saveDraft",value:function(){var e=this.props,t=e.showMessage,a=e.hideMessage,n=e.saveDraft,o=e.closeEdtior,i=this.state.content;""!=i&&i?(a(),n({channel:"FACEBOOK",content:i},function(e){o()})):t({type:"alert",message:N.f.getI18NValue("support.social.reply.empty")})}},{key:"updateDraft",value:function(){var e=this.props,t=e.showMessage,a=e.hideMessage,n=e.updateDraft,o=e.closeEdtior,i=this.state.content;""!=i&&i?(a(),n({channel:"FACEBOOK",content:i},function(e){o()})):t({type:"alert",message:N.f.getI18NValue("support.social.reply.empty")})}},{key:"constructSwtichOptions",value:function(e){return"FACEBOOK"==e||"FACEBOOK_DM"==e?[{name:N.f.getI18NValue("crm.label.email"),iconName:"chEmail1",size:"11"},{name:N.f.getI18NValue("support.social.facebook.name"),iconName:"chFacebook",size:"14"}]:[{name:N.f.getI18NValue("crm.label.email"),iconName:"chEmail1",size:"12"},{name:N.f.getI18NValue("support.social.common.tweet"),iconName:"chTwitter",size:"16"},{name:N.f.getI18NValue("support.social.common.direct.message"),iconName:"bubble",size:"16"}]}},{key:"deleteDraftConfirmation",value:function(){this.setState({alertMode:"deleteDraft"})}},{key:"deleteDraft",value:function(){this.props.deleteDraft(),this.closeAlert()}},{key:"closeAlert",value:function(){this.setState({alertMode:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.content,n=t.tweetLen,o=t.mode,i=t.alertMode,r=this.props,s=r.closeEdtior,l=r.isDraft,c=r.channel,d=r.openEditor,m=r.threadId,u=r.replyThread,p=r.haveMailSendPermission,f=r.isFromBlueprint,g=r.haveForWardPermissionOnly;return h.a.createElement("div",null,h.a.createElement("div",{className:C.a.fbContnet+" "+(f?C.a.bluePrintLayar:"")},h.a.createElement("div",{className:C.a.socialIcn},h.a.createElement("div",{className:C.a.chIcon},"twitterDm"==o?h.a.createElement(S.CommunityFontIcon,{name:"bubble",size:"17"}):h.a.createElement(S.TicketsFontIcon,{name:"FACEBOOK"==c||"FACEBOOK_DM"==c?"chFacebook":"chTwitter",size:"16"})),g?null:h.a.createElement(A.a,{Icnsize:"8",IcnName:"blockDownArrow",icnStatus:!0,arrowPosition:"topLeft",left:"-53",objValues:this.constructSwtichOptions(c),listStyle:"alpha",boxPosition:"bottomRight",onSelect:function(t){t==N.f.getI18NValue("crm.label.email")?d(m,a,u,"replyall"):t==N.f.getI18NValue("support.social.common.direct.message")?(e.setState({mode:"twitterDm",content:"",tweetLen:8e3}),f&&d("","","","twitterDm")):t==N.f.getI18NValue("support.social.common.tweet")&&(e.setState({mode:"tweet",content:"@"+u.twitterProfile+" ",tweetLen:280}),f&&d("","","","tweet"))}})),h.a.createElement("div",{className:C.a.txtArea},h.a.createElement(E.a,{size:f?"xlarge":"medium",placeholder:N.f.getI18NValue("support.request.type.facebook.comment"),text:a,needBorder:!1,onChange:this.handleChange})),"TWITTER"==c&&f?h.a.createElement("span",{className:C.a.tweetLen+" "+(n<0?C.a.limitExcited:null)},n):null),f?null:h.a.createElement("div",{className:C.a.footer},h.a.createElement("div",{className:C.a.optionsCont},p?h.a.createElement(I.a,{text:"twitterDm"==o?N.f.getI18NValue("support.social.send.dm"):"FACEBOOK"==c?N.f.getI18NValue("support.social.post.comment"):"FACEBOOK_DM"==c?N.f.getI18NValue("support.social.replymessage"):N.f.getI18NValue("support.social.post.tweet"),palette:"primaryFilled",size:"medium",onClick:l?this.sendDraft:this.sendReply}):null,"FACEBOOK"==c?h.a.createElement(I.a,{text:N.f.getI18NValue("support.common.request.mail.save.draft"),palette:p?"secondary":"primaryFilled",size:"medium",onClick:l?this.updateDraft:this.saveDraft}):null,l&&"FACEBOOK"==c?h.a.createElement(I.a,{text:N.f.getI18NValue("support.common.request.mail.discard.draft"),palette:"secondary",size:"medium",onClick:this.deleteDraftConfirmation}):null,h.a.createElement(I.a,{text:N.f.getI18NValue("support.label.cancel"),palette:"secondary",size:"medium",onClick:s}),"TWITTER"==c?h.a.createElement("span",{className:C.a.tweetLen+" "+(n<0?C.a.limitExcited:null)},n):null)),"deleteDraft"==i?h.a.createElement(k.a,{closeAlert:this.closeAlert,deleteDraft:this.deleteDraft}):null)}}]),t}(p.Component);w.propTypes={channel:v.a.string,closeEdtior:v.a.func,content:v.a.string,deleteDraft:v.a.func,haveForWardPermissionOnly:v.a.bool,haveMailSendPermission:v.a.bool,hideMessage:v.a.func,isDraft:v.a.bool,isFromBlueprint:v.a.bool,openEditor:v.a.func,replyMode:v.a.string,replyThread:v.a.object,saveDraft:v.a.func,sendDraft:v.a.func,sendReply:v.a.func,setReplyData:v.a.func,showMessage:v.a.func,threadId:v.a.string,updateDraft:v.a.func},t.a=Object(f.connect)(function(e,t){return{id:e.routing.paramMap.moduleId}},{showMessage:T.Q,hideMessage:T.w})(w)},1282:function(e,t,a){e.exports={footer:"SocialReply-module__footer",optionsCont:"SocialReply-module__optionsCont",fbContnet:"SocialReply-module__fbContnet",socialIcn:"SocialReply-module__socialIcn",socialEditor:"SocialReply-module__socialEditor",icons:"SocialReply-module__icons",downArrow:"SocialReply-module__downArrow",txtArea:"SocialReply-module__txtArea",chIcon:"SocialReply-module__chIcon",tweetLen:"SocialReply-module__tweetLen",limitExcited:"SocialReply-module__limitExcited",bluePrintLayar:"SocialReply-module__bluePrintLayar"}},1283:function(e,t,a){e.exports={container:"Composebox-module__container",scrollBox:"Composebox-module__scrollBox",composeRow:"Composebox-module__composeRow",rightContainer:"Composebox-module__rightContainer",composeFlabel:"Composebox-module__composeFlabel common-module__dotted common-module__oflow common-module__ellipsis",selectLitetheme:"Composebox-module__selectLitetheme",emptyErr:"Composebox-module__emptyErr common-module__dblk",replyIcns:"Composebox-module__replyIcns common-module__posrel",textVal:"Composebox-module__textVal common-module__dotted common-module__oflow common-module__ellipsis",icnMore:"Composebox-module__icnMore",moreAction:"Composebox-module__moreAction",recipientstheme:"Composebox-module__recipientstheme",recipient:"Composebox-module__recipient",demomore:"Composebox-module__demomore",fromAddress:"Composebox-module__fromAddress",fromAlert:"Composebox-module__fromAlert",soloDraft:"Composebox-module__soloDraft",visHidden:"Composebox-module__visHidden common-module__vishidden"}},1284:function(e,t,a){e.exports={rlyedr:"TokenList-module__rlyedr",rlymailtxt:"TokenList-module__rlymailtxt common-module__dotted common-module__oflow common-module__ellipsis",rlyact:"TokenList-module__rlyact",rlyclo:"TokenList-module__rlyclo",item:"TokenList-module__item",placeholder:"TokenList-module__placeholder",inputCont:"TokenList-module__inputCont",sel:"TokenList-module__sel",invalide:"TokenList-module__invalide",invalideInput:"TokenList-module__invalideInput"}},1285:function(e,t,a){e.exports={alertDiv:"FromAddressEmpty-module__alertDiv common-module__dotted common-module__oflow common-module__ellipsis",icnExclatn:"FromAddressEmpty-module__icnExclatn",alertText:"FromAddressEmpty-module__alertText",refreshText:"FromAddressEmpty-module__refreshText"}},1286:function(e,t,a){e.exports={mainContainer:"ReplyFooter-module__mainContainer common-module__posrel",shadow:"ReplyFooter-module__shadow common-module__posab common-module__w100",bluePrintLayar:"ReplyFooter-module__bluePrintLayar",btmDiv:"ReplyFooter-module__btmDiv",uploadImg:"ReplyFooter-module__uploadImg",sendBtn:"ReplyFooter-module__sendBtn",actionBtn:"ReplyFooter-module__actionBtn",attchIcn:"ReplyFooter-module__attchIcn",attchPopup:"ReplyFooter-module__attchPopup",replyBottom:"ReplyFooter-module__replyBottom",fileCont:"ReplyFooter-module__fileCont"}},1287:function(e,t,a){e.exports={ticketButton:"SendButton-module__ticketButton",ticketAction:"SendButton-module__ticketAction common-module__dtable",haveMore:"SendButton-module__haveMore",arrow:"SendButton-module__arrow",content:"SendButton-module__content common-module__pointer",actionType:"SendButton-module__actionType common-module__semibold common-module__ftsmooth",subtitle:"SendButton-module__subtitle common-module__oflow",buttonAction:"SendButton-module__buttonAction common-module__vishidden",active:"SendButton-module__active common-module__visible",secondarybutton:"SendButton-module__secondarybutton common-module__semibold common-module__ftsmooth",actionSubtitle:"SendButton-module__actionSubtitle",switchAction:"SendButton-module__switchAction",actionNotify:"SendButton-module__actionNotify",switchbox:"SendButton-module__switchbox",pl30:"SendButton-module__pl30"}},1288:function(e,t,a){e.exports={mainContainer:"ForumFooter-module__mainContainer common-module__cboth",shadow:"ForumFooter-module__shadow common-module__w100",forumDiv:"ForumFooter-module__forumDiv common-module__flexgrow",buttonGroup:"ForumFooter-module__buttonGroup",postButton:"ForumFooter-module__postButton",forumStatus:"ForumFooter-module__forumStatus",forumstatusText:"ForumFooter-module__forumstatusText common-module__bold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis common-module__offSelection",container:"ForumFooter-module__container common-module__cboth",statusSel:"ForumFooter-module__statusSel",dropDown:"ForumFooter-module__dropDown",dropList:"ForumFooter-module__dropList common-module__semibold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis common-module__offSelection"}},1289:function(e,t,a){e.exports={list:"SnippetActionPopup-module__list",icon:"SnippetActionPopup-module__icon",popup:"SnippetActionPopup-module__popup"}},1290:function(e,t,a){e.exports={replyArea:"ReplyEditor-module__replyArea"}},1291:function(e,t,a){e.exports={listCont:"EmailTemplatePopup-module__listCont",title:"EmailTemplatePopup-module__title common-module__semibold common-module__ftsmooth",list:"EmailTemplatePopup-module__list common-module__dotted common-module__oflow common-module__ellipsis",footer:"EmailTemplatePopup-module__footer",footerOption:"EmailTemplatePopup-module__footerOption common-module__dotted common-module__oflow common-module__ellipsis",updateIcon:"EmailTemplatePopup-module__updateIcon",emptyTxt:"EmailTemplatePopup-module__emptyTxt",emtyIcon:"EmailTemplatePopup-module__emtyIcon",viewpopsearch:"EmailTemplatePopup-module__viewpopsearch",popup:"EmailTemplatePopup-module__popup",seperate:"EmailTemplatePopup-module__seperate"}},1336:function(e,t,a){"use strict";var n=a(5),o=a.n(n),i=a(2),r=a.n(i),s=a(23),l=a.n(s),c=a(12),d=a.n(c),m=a(9),u=a.n(m),p=a(10),h=a.n(p),f=a(13),g=a.n(f),v=a(14),_=a.n(v),C=a(0),b=a.n(C),E=a(1),y=a.n(E),I=a(26),A=a(533),k=a.n(A),S=a(16),N=a(1004),T=a(153),w=function(e){function t(){return u()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.isRender,a=e.isSymbol;return b.a.createElement(T.a,{viewBox:"0 0 32 32",name:"PlusIcon",isRender:t,isSymbol:a},b.a.createElement("g",null,b.a.createElement("path",{style:{fill:"#767d89"},d:"M16,2.7c0.4,0,0.7,0.1,0.9,0.4s0.4,0.6,0.4,0.9v10.7H28c0.4,0,0.7,0.1,0.9,0.4c0.3,0.3,0.4,0.6,0.4,0.9 c0,0.4-0.1,0.7-0.4,0.9c-0.3,0.3-0.6,0.4-0.9,0.4H17.3V28c0,0.4-0.1,0.7-0.4,0.9c-0.3,0.3-0.6,0.4-0.9,0.4c-0.4,0-0.7-0.1-0.9-0.4 c-0.3-0.3-0.4-0.6-0.4-0.9V17.3H4c-0.4,0-0.7-0.1-0.9-0.4S2.7,16.4,2.7,16s0.1-0.7,0.4-0.9c0.3-0.3,0.6-0.4,0.9-0.4h10.7V4 c0-0.4,0.1-0.7,0.4-0.9C15.3,2.8,15.6,2.7,16,2.7z"})))}}]),t}(b.a.Component),O=w;w.propTypes={isRender:y.a.bool,isSymbol:y.a.bool},w.defaultProps={isRender:!0,isSymbol:!1};var x=function(e){function t(){return u()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.isRender,a=e.isSymbol;return b.a.createElement(T.a,{viewBox:"0 0 31 32",name:"SnippetIcon",isRender:t,isSymbol:a},b.a.createElement("g",null,b.a.createElement("path",{d:"M14.4,8.2L15.6,9L16,8.4l-1-0.7l2.5-3.7L11.5,0L8.9,3.8L7.9,3L7.6,3.6l1.2,0.8c-2.3,3-5.9,0.8-6,0.7L2.3,4.9L0,23.8 l16.6-9.3l-0.4-0.3C15.9,13.9,12.6,11.5,14.4,8.2L14.4,8.2z M1.5,22l5.2-7.7c0.3,0.1,0.6,0.2,0.9,0.2c1.2,0,2.1-0.9,2.2-2.1 c0-1.2-0.9-2.1-2.1-2.2c-1.2,0-2.1,0.9-2.2,2.1c0,0.6,0.2,1.2,0.7,1.6L1,21.6L2.8,6c1.2,0.6,4.4,1.7,6.5-1.1l4.5,3 c-1.8,3,0.4,5.6,1.4,6.5L1.5,22L1.5,22z M6.7,13.6c-0.7-0.4-0.8-1.3-0.4-2s1.3-0.8,2-0.4c0.7,0.4,0.8,1.3,0.4,2 c-0.2,0.3-0.5,0.5-0.9,0.6C7.5,13.9,7.1,13.8,6.7,13.6L6.7,13.6z"}),b.a.createElement("path",{style:{fill:"#03A3FE"},d:"M30.9,25c-4.9,0.7-5.4,1.2-5.9,6.7c-0.6-5.4-1.1-6-6.1-6.5c4.9-0.7,5.4-1.2,5.9-6.7 C25.4,23.9,25.9,24.5,30.9,25z M30.3,8.2c-4.5,0.6-4.9,1.1-5.5,6.3c-0.5-5.3-0.9-5.8-5.4-6.4c4.5-0.6,4.9-1.1,5.5-6.3 C25.4,7.1,25.8,7.6,30.3,8.2z M16.2,25.7c-4.5,0.6-4.9,1.1-5.5,6.3c-0.5-5.3-0.9-5.8-5.4-6.4c4.5-0.6,4.9-1.1,5.5-6.3 C11.3,24.6,11.7,25.1,16.2,25.7z"})))}}]),t}(b.a.Component),D=x;x.propTypes={isRender:y.a.bool,isSymbol:y.a.bool},x.defaultProps={isRender:!0,isSymbol:!1};var P=function(e){function t(){return u()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.isRender,a=e.isSymbol;return b.a.createElement(T.a,{viewBox:"0 0 32 32",name:"TemplateIcon",isRender:t,isSymbol:a},b.a.createElement("g",null,b.a.createElement("path",{d:"M3.6,27.7h5.9v2.8c0,0.8,0.7,1.5,1.5,1.5h17.4c0.8,0,1.5-0.7,1.5-1.5V5.9c0-0.8-0.7-1.5-1.5-1.5h-5.9V1.5 C22.5,0.7,21.8,0,21,0L3.6,0C2.8,0,2.1,0.7,2.1,1.5v24.6C2.1,27,2.8,27.7,3.6,27.7z M28.4,5.7c0.1,0,0.2,0.1,0.2,0.2v24.6 c0,0.1-0.1,0.2-0.2,0.2H11c-0.1,0-0.2-0.1-0.2-0.2V5.9c0-0.1,0.1-0.2,0.2-0.2C11,5.7,28.4,5.7,28.4,5.7z M9.5,16.6v3.1V16.6z M9.5,12v3.3V12z M9.5,7.6v3.2V7.6z M9.5,21v5.3H3.6c-0.1,0-0.2-0.1-0.2-0.2V1.5c0-0.1,0.1-0.2,0.2-0.2H21c0.1,0,0.2,0.1,0.2,0.2 v2.7L11,4.3c-0.8,0-1.5,0.7-1.5,1.5v0.1L9.5,21z M26.9,25.5c0,0.4-0.3,0.7-0.7,0.7H15.7c-0.4,0-0.7-0.3-0.7-0.7s0.3-0.7,0.7-0.7 h10.6C26.6,24.8,26.9,25.1,26.9,25.5z M12.8,21c0-0.4,0.3-0.7,0.7-0.7h12.8c0.4,0,0.7,0.3,0.7,0.7s-0.3,0.7-0.7,0.7H13.4 C13.1,21.7,12.8,21.4,12.8,21L12.8,21z M12.8,16.5c0-0.4,0.3-0.7,0.7-0.7h12.8c0.4,0,0.7,0.3,0.7,0.7s-0.3,0.7-0.7,0.7H13.4 C13.1,17.1,12.8,16.8,12.8,16.5L12.8,16.5z M12.8,12c0-0.4,0.3-0.7,0.7-0.7h12.8c0.4,0,0.7,0.3,0.7,0.7s-0.3,0.7-0.7,0.7H13.4 C13.1,12.6,12.8,12.4,12.8,12L12.8,12z"})))}}]),t}(b.a.Component),F=P;P.propTypes={isRender:y.a.bool,isSymbol:y.a.bool},P.defaultProps={isRender:!0,isSymbol:!1};var B=a(1283),L=a.n(B),V=a(30),R=a(1007),M=a(99),j=a.n(M),z=a(1200),K=a(6),U=a(1284),H=a.n(U),W=a(1083),Z=a(8),q=function(e){function t(e){u()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={value:"",editedValue:a.props.editedValue||"",selectedIndex:null,errordiv:"",errorIndex:null,editedIndex:a.props.editedIndex||null,selectSearchIndex:-1},a.formatEmailAddress=a.formatEmailAddress.bind(a),a.removeEmail=a.removeEmail.bind(a),a.selectEmail=a.selectEmail.bind(a),a.handleSearchIndex=a.handleSearchIndex.bind(a),a.resetSearchData=a.resetSearchData.bind(a),a}return _()(t,e),h()(t,[{key:"componentWillReceiveProps",value:function(e){e.editedValue==this.props.editedValue&&e.editedIndex==this.props.editedIndex||this.setState({editedValue:e.editedValue,editedIndex:e.editedIndex})}},{key:"handleChange",value:function(e,t){"edit"==e?this.setState({editedValue:t}):this.setState({value:t}),t.length>2?this.props.searchContact(this.props.mode,t):this.resetSearchData()}},{key:"removeEmail",value:function(e){var t=this,a=this.props,n=a.removeEmail,o=a.mode,i=this.state.selectedIndex;null==i&&e?this.setState({selectedIndex:e-1}):(n(i,o,"",function(){t.formInput&&t.formInput.focus()}),this.setState({selectedIndex:e-1}))}},{key:"formatEmailAddress",value:function(e,t){var a=this;this.setState({selectedIndex:null});var n=this.props,o=n.mode,i=n.formatEmailAddress,r=n.emailArr,s=n.searchMode,l=n.searchData,c=this.state,d=c.selectSearchIndex,m=c.selectedIndex,u=t.keyCode,p=t.key,h="string"==typeof t?t:t.target.value;if(38==u||40==u)s==o&&"noData"!=l&&this.handleSearchIndex(u);else if(s==o&&"noData"!=l&&13==u&&-1!=d)this.handleSearchIndex(u);else if(8==u&&""==h)this.removeEmail(r.length);else if(13==u&&null!=m)this.props.editEmail(this.state.selectedIndex,this.props.emailArr[this.state.selectedIndex],o,function(){a.editInput.focus(),a.editInput.select()});else{if(this.setState({selectedIndex:null}),""==h)return;(13==u||188==u&&","==p||"focusout"==e)&&(this.resetSearchData(),188==u&&(h=h.substring(0,h.indexOf(","))),i(h,o,function(e){"isValide"==e.type?a.setState({value:""},function(){a.formInput&&a.formInput.focus()}):"isInValide"==e.type?(a.setState({errordiv:"form"}),setTimeout(function(){a.setState({errordiv:""})},2e3)):"duplicate"==e.type&&(a.setState({errorIndex:e.index},function(){a.formInput&&a.formInput.focus()}),setTimeout(function(){a.setState({errorIndex:null})},2e3))}))}}},{key:"changeEmailAddress",value:function(e,t,a){var n=this,o=this.props,i=o.mode,r=o.changeEmailAddress,s=o.removeEmail,l=o.searchMode,c=o.searchData,d=a.key,m=a.keyCode,u="string"==typeof a?a:a.target.value;38==m||40==m?l==i&&"noData"!=c&&this.handleSearchIndex(m):l==i&&"noData"!=c&&13==m&&-1!=this.state.selectSearchIndex?this.handleSearchIndex(m):8==m&&""==u?s(e,i,"edit",function(){n.formInput&&n.formInput.focus()}):(13==m||188==m&&","==d||"focusout"==t)&&(this.resetSearchData(),188==m&&(u=u.substring(0,u.indexOf(","))),r(u,e,i,function(e){"isValide"==e.type?n.setState({value:""},function(){n.formInput&&n.formInput.focus()}):"isInValide"==e.type?(n.setState({errordiv:"edit"}),setTimeout(function(){n.setState({errordiv:""})},2e3)):"duplicate"==e.type&&(n.setState({errorIndex:e.index},function(){n.editInput.focus()}),setTimeout(function(){n.setState({errorIndex:null})},2e3))}))}},{key:"editEmail",value:function(e,t,a){var n=this;this.state.selectedIndex==e?this.props.editEmail(e,t,a,function(){n.editInput.focus(),n.editInput.select()}):this.setState({selectedIndex:e})}},{key:"selectEmail",value:function(e,t){e.firstName,e.lastName;var a=e.email,n=Object(K.e)(e.firstName,e.lastName)+"<"+a+">";"edit"==t?(this.setState({editedValue:n,errordiv:""}),this.changeEmailAddress(this.state.editedIndex,"focusout",n)):(this.setState({value:n,errordiv:""}),this.formatEmailAddress("focusout",n)),this.resetSearchData()}},{key:"resetSearchData",value:function(){this.setState({selectSearchIndex:-1}),this.props.closeSearchPopup()}},{key:"handleSearchIndex",value:function(e){var t=this.props.searchData;if(13==e){var a=this.state,n=a.selectSearchIndex,o=a.editedIndex;if(n>-1){var i=t[n],r=i.email,s=i.firstName,l=i.lastName,c=Object(K.e)(s,l)+"<"+r+">";null==o?(this.setState({value:c,errordiv:""}),this.formatEmailAddress("focusout",c)):(this.setState({editedValue:c,errordiv:""}),this.changeEmailAddress(o,"focusout",c)),this.resetSearchData()}}else 40==e?this.setState(function(e){return{selectSearchIndex:e.selectSearchIndex==t.length-1?0:e.selectSearchIndex+1}}):this.setState(function(e){return{selectSearchIndex:e.selectSearchIndex<=0?t.length-1:e.selectSearchIndex-1}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.emailArr,n=t.mode,o=t.removeEmail,i=t.editedMode,r=t.searchMode,s=t.searchData,l=t.orgName,c=this.state,d=c.value,m=c.editedValue,u=c.selectedIndex,p=c.errordiv,h=c.errorIndex,f=c.editedIndex,g=c.selectSearchIndex;return b.a.createElement(S.Container,{wrap:!0,alignBox:"row"},a.map(function(t,a){var c=Object(W.a)(t),d=Object(W.e)(t);return f==a&&n==i?b.a.createElement(S.Box,{shrink:!0,className:H.a.item},b.a.createElement(j.a,{value:m,dataId:"toAddress_"+e.props.orgName,placeHolder:"Enter the Recipients Email Address",className:"edit"==p?H.a.placeholder+" "+H.a.invalideInput:H.a.placeholder,needAppearance:!1,onChange:e.handleChange.bind(e,"edit"),onKeyUp:e.changeEmailAddress.bind(e,a,""),onBlur:e.changeEmailAddress.bind(e,a,"focusout"),inputRef:function(t){e.editInput=t}}),r==n&&"noData"!=s?b.a.createElement("span",null,b.a.createElement(z.a,{data:s,orgName:l,onSelect:e.selectEmail,type:"edit",selectSearchIndex:g,needFixed:!0})):null):b.a.createElement(S.Box,{className:u==a?H.a.item+" "+H.a.sel:d?H.a.item:H.a.item+" "+H.a.invalide,key:a,id:u},b.a.createElement("div",{className:H.a.rlyedr,onClick:e.editEmail.bind(e,a,t,n)},b.a.createElement("span",{className:H.a.rlyact},b.a.createElement("span",{className:H.a.rlyclo,onClick:o.bind(e,a,n,"",function(){e.formInput&&e.formInput.focus()})},b.a.createElement(V.TopbandFontIcon,{name:"close",size:"17"})),b.a.createElement("span",{className:h==a?H.a.rlymailtxt+" "+H.a.invalideInput:H.a.rlymailtxt},c))))}),n!=i&&b.a.createElement(S.Box,{flexible:!0,className:H.a.item+" "+H.a.inputCont},b.a.createElement(j.a,{type:"text",value:d,placeHolder:Z.f.getI18NValue("support.email.placeholder"),className:"form"==p?H.a.placeholder+" "+H.a.invalideInput:H.a.placeholder,needAppearance:!1,onChange:this.handleChange.bind(this,""),onKeyUp:this.formatEmailAddress.bind(this,""),onBlur:this.formatEmailAddress.bind(this,"focusout"),inputRef:function(t){e.formInput=t}}),r==n&&"noData"!=s?b.a.createElement(z.a,{data:s,orgName:l,onSelect:this.selectEmail,type:"form",selectSearchIndex:g,needFixed:!0}):null))}}]),t}(b.a.Component),G=q;q.propTypes={changeEmailAddress:y.a.func,closeSearchPopup:y.a.func,editEmail:y.a.func,editedIndex:y.a.string,editedMode:y.a.string,editedValue:y.a.string,emailArr:y.a.array,formatEmailAddress:y.a.func,mode:y.a.string,orgName:y.a.string,removeEmail:y.a.func,searchContact:y.a.func,searchData:y.a.array,searchMode:y.a.string};var $=a(1285),Y=a.n($),J=function(e){function t(e){u()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={mode:"Configure"},a._mount=!1,a.refreshAdrress=a.refreshAdrress.bind(a),a.openConfigurePage=a.openConfigurePage.bind(a),a}return _()(t,e),h()(t,[{key:"refreshAdrress",value:function(){var e=this;this.props.getFromEmailAddress(function(){e._mount&&e.setState({mode:"Configure"})})}},{key:"openConfigurePage",value:function(){this.setState({mode:"refresh"}),this.props.openConfigurePage()}},{key:"componentDidMount",value:function(){this._mount=!0}},{key:"componentWillUnmount",value:function(){this._mount=!1}},{key:"render",value:function(){var e=this.state.mode;return b.a.createElement("div",null,"Configure"==e?b.a.createElement("div",{className:Y.a.alertDiv,onClick:this.openConfigurePage},b.a.createElement("span",{className:Y.a.icnExclatn},b.a.createElement(V.CommonFontIcon,{name:"exclamationThincircle",size:"14"})),b.a.createElement("span",{className:Y.a.alertText},Z.f.getI18NValue("support.email.fromaddress.click"))):b.a.createElement("div",{className:Y.a.refreshText,onClick:this.refreshAdrress},Z.f.getI18NValue("crm.button.refresh")))}}]),t}(b.a.Component),Q=J;J.propTypes={getFromEmailAddress:y.a.func,openConfigurePage:y.a.func};var X=a(949),ee=a.n(X),te=function(e){function t(e){u()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e)),n=a.props,o=n.toAddress,i=void 0===o?[]:o,r=n.ccAddress,s=void 0===r?[]:r,l=n.bccAddress,c=void 0===l?[]:l;return a.state={toArray:i,ccArray:s,bccArray:c,editedMode:"",editedIndex:null,editedValue:"",isCcVisible:!!s.length,isBccVisible:!!c.length,moreData:0},a.formatEmailAddress=a.formatEmailAddress.bind(a),a.removeEmail=a.removeEmail.bind(a),a.editEmail=a.editEmail.bind(a),a.changeEmailAddress=a.changeEmailAddress.bind(a),a.showCc=a.showCc.bind(a),a.showBcc=a.showBcc.bind(a),a.constructRecipients=a.constructRecipients.bind(a),a.createRecipientCount=a.createRecipientCount.bind(a),a.hideRecipients=a.hideRecipients.bind(a),a.replyActions=a.replyActions.bind(a),a.handleFromAdressChange=a.handleFromAdressChange.bind(a),a}return _()(t,e),h()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=t.toArray,n=t.ccArray,o=t.bccArray,i=t.isCcVisible,r=t.isBccVisible;e.toAddress==a&&e.ccAddress==n&&e.bccAddress==o||(this.setState({toArray:e.toAddress,ccArray:e.ccAddress,bccArray:e.bccAddress}),i||this.setState({isCcVisible:!!e.ccAddress.length}),r||this.setState({isBccVisible:!!e.bccAddress.length})),e.mode!=this.props.mode&&"forward"==e.mode&&this.setState({isCcVisible:!1}),e.isEditorFocus!=this.props.isEditorFocus&&e.isEditorFocus&&this.setState({isCcVisible:!1,isBccVisible:!1})}},{key:"formatEmailAddress",value:function(e,t,a){for(var n=Object(W.d)(e),o=0;o<n.length;o++){var i=n[o].trim();if(Object(W.e)(i)){var r=this.props.addEmail;if("to"==t){var s=Object(W.c)(this.state.toArray,i);s.isDuplicate?a&&a({type:"duplicate",index:s.index}):(r(i,t),a&&a({type:"isValide"}))}else if("bcc"==t){var l=Object(W.c)(this.state.bccArray,i);l.isDuplicate?a&&a({type:"duplicate",index:l.index}):(r(i,t),a&&a({type:"isValide"}))}else if("cc"==t){var c=Object(W.c)(this.state.ccArray,i);c.isDuplicate?a&&a({type:"duplicate",index:c.index}):(r(i,t),a&&a({type:"isValide"}))}}else a&&a({type:"isInValide"})}}},{key:"changeEmailAddress",value:function(e,t,a,n){if(Object(W.e)(e)){var o=this.props.changeEmail,i=!1;if("to"==a){var r=Object(W.c)(this.state.toArray,e);r.isDuplicate&&r.index!=t?n&&n({type:"duplicate",index:r.index}):(o(e,t,a),i=!0,n&&n({type:"isValide"}))}else if("bcc"==a){var s=Object(W.c)(this.state.bccArray,e);s.isDuplicate&&s.index!=t?n&&n({type:"duplicate",index:s.index}):(o(e,t,a),i=!0,n&&n({type:"isValide"}))}else if("cc"==a){var l=Object(W.c)(this.state.ccArray,e);l.isDuplicate&&l.index!=t?n&&n({type:"duplicate",index:l.index}):(o(e,t,a),i=!0,n&&n({type:"isValide"}))}i&&this.setState({editedMode:"",editedIndex:null,editedValue:""})}else n&&n({type:"isInValide"})}},{key:"editEmail",value:function(e,t,a,n){this.setState({editedIndex:e,editedValue:t,editedMode:a},function(){n&&n()})}},{key:"removeEmail",value:function(e,t,a,n){var o=this.props.removeEmail;"to"==t?o(e,t,function(){n&&n()}):"bcc"==t?o(e,t,function(){n&&n()}):"cc"==t&&o(e,t,function(){n&&n()}),"edit"==a&&this.setState({editedMode:"",editedIndex:null,editedValue:""},function(){n&&n()})}},{key:"showBcc",value:function(){this.setState({isBccVisible:!0})}},{key:"showCc",value:function(){this.setState({isCcVisible:!0})}},{key:"constructSwtichOptions",value:function(e,t){var a=[];if("FACEBOOK"==t||"FACEBOOK_DM"==t)a=[{name:Z.f.getI18NValue("crm.label.email"),iconName:"chEmail1",size:"11"},{name:Z.f.getI18NValue("support.social.facebook.name"),iconName:"chFacebook",size:"14"}];else if("TWITTER"==t||"TWITTER_DM"==t)a=[{name:Z.f.getI18NValue("crm.label.email"),iconName:"chEmail1",size:"11"},{name:Z.f.getI18NValue("support.social.common.tweet"),iconName:"chTwitter",size:"16"},{name:Z.f.getI18NValue("support.social.common.direct.message"),iconName:"bubble",size:"16"}];else for(var n=[{label:Z.f.getI18NValue("support.common.request.mail.replyall"),key:"replyall"},{label:Z.f.getI18NValue("support.common.request.mail.reply"),key:"reply"},{label:Z.f.getI18NValue("support.common.request.mail.forward"),key:"forward"}],o=0;o<n.length;o++){var i=n[o],r=i.label,s=i.key;e!=s&&a.push({name:r,iconName:s,size:"13"})}return a}},{key:"constructRecipients",value:function(e,t){for(var a=[],n=e.length-t,o=0;o<n;o++){var i=Object(W.a)(e[o]);a.push(b.a.createElement("span",{className:L.a.recipient,key:o},o==n-1?i:i+","))}return a}},{key:"createRecipientCount",value:function(){var e=this.state,t=e.toArray,a=e.ccArray,n=e.bccArray,o=t.concat(a,n).length;if(o&&this.recipientsCont){for(var i=this.recipientsCont.offsetWidth,r=this.recipientsCont.children,s=0,l=0,c=0;c<r.length;c++)if(i<=(s+=r[c].offsetWidth)){l=o-c;break}this.setState({moreData:l})}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isRecipientsVisible,a=e.inValideArr;t&&!(void 0===a?[]:a).length&&this.createRecipientCount()}},{key:"componentDidUpdate",value:function(e){var t=e.ccAddress,a=void 0===t?[]:t,n=e.bccAddress,o=void 0===n?[]:n,i=e.toAddress,r=void 0===i?[]:i,s=e.isRecipientsVisible;this.props.isRecipientsVisible!=s&&this.props.isRecipientsVisible&&!this.props.inValideArr.length&&this.createRecipientCount(),r.length==this.props.toAddress.length&&a.length==this.props.ccAddress.length&&o.length==this.props.bccAddress.length||!this.props.isRecipientsVisible||this.createRecipientCount()}},{key:"hideRecipients",value:function(){this.setState({moreData:0}),this.props.hideRecipients()}},{key:"replyActions",value:function(e){var t=this.props,a=t.threadId,n=t.content,o=t.thread,i="";e==Z.f.getI18NValue("support.common.request.mail.replyall")?i="replyall":e==Z.f.getI18NValue("support.common.request.mail.reply")?i="reply":e==Z.f.getI18NValue("support.common.request.mail.forward")?i="forward":e==Z.f.getI18NValue("crm.label.email")?i="replyall":e==Z.f.getI18NValue("support.social.facebook.name")&&"FACEBOOK_DM"==o.channel?i="facebookDm":e==Z.f.getI18NValue("support.social.facebook.name")?i="facebook":e==Z.f.getI18NValue("support.social.common.tweet")?i="twitter":e==Z.f.getI18NValue("support.social.common.direct.message")&&(i="twitterDm"),this.props.openEditor(a,n,o,i)}},{key:"handleFromAdressChange",value:function(e){this.setState({selectedFromAddress:e});var t=this.props.fromEmailAddress.filter(function(t){return t.id==e});this.props.changeFromEmailAddress(t[0].address)}},{key:"constructDraftObj",value:function(){var e=this.props,t=e.isDraft,a=e.draftText,n=e.saveDraft,o=e.updateDraft,i=e.deleteDraft,r=e.isCustomChannel,s=e.isFromBlueprint,l=e.thread,c=e.mode,d=e.haveForWardPermissionOnly,m=e.haveMailSendPermission;return b.a.createElement(b.a.Fragment,null,t?b.a.createElement("div",{className:L.a.moreAction+" "+(s?L.a.visHidden:"")},b.a.createElement("span",{onClick:o},a),b.a.createElement("span",{className:L.a.icnMore},b.a.createElement(R.a,{IcnName:"down1",Icnsize:"8",icnStatus:!0,listStyle:"alpha",arrowRight:"24",objValues:[{name:Z.f.getI18NValue("support.common.request.mail.discard.draft"),iconName:"draftDelete",size:"13"}],onSelect:i}))):b.a.createElement(b.a.Fragment,null,!r&&!s||s&&("FACEBOOK"==l.channel||"TWITTER"==l.channel||"TWITTER_DM"==l.channel||"FACEBOOK_DM"==l.channel)?b.a.createElement("span",{className:L.a.moreAction},b.a.createElement(V.TicketsFontIcon,{name:"FACEBOOK"==l.channel||"TWITTER"==l.channel||"TWITTER_DM"==l.channel||"FACEBOOK_DM"==l.channel?"chEmail1":c,size:"12"}),d?null:b.a.createElement("span",{className:L.a.icnMore},b.a.createElement(R.a,{IcnName:"blockDownArrow",Icnsize:"8",icnStatus:!0,listStyle:"alpha",arrowLeft:"55",size:"xmini",objValues:this.constructSwtichOptions(c,l.channel),onSelect:this.replyActions}))):null,m&&!s?b.a.createElement("span",{className:L.a.moreAction},b.a.createElement("span",{onClick:n},a)):null))}},{key:"render",value:function(){var e=this,t=this.props,a=(t.mode,t.draftText,t.isDraft,t.saveDraft,t.updateDraft,t.fromEmailAddress),n=(t.deleteDraft,t.searchContact),o=t.searchMode,i=t.searchData,r=t.orgName,s=t.closeSearchPopup,l=t.isRecipientsVisible,c=(t.threadId,t.content,t.thread,t.inValideArr),d=void 0===c?[]:c,m=(t.isPeekView,t.getFromEmailAddress),u=t.openConfigurePage,p=t.haveMailSendPermission,h=t.mailConfigurations,f=t.myInfo,g=(t.isFromBlueprint,t.haveForWardPermissionOnly,t.isFromAddressFetching),v=t.isToEmpty,_=t.isCustomChannel,C=this.state,E=C.toArray,y=C.editedIndex,I=C.editedValue,A=C.editedMode,k=C.isCcVisible,N=C.isBccVisible,T=C.ccArray,w=C.bccArray,O=C.moreData,x=C.selectedFromAddress,D=h.agentNameInTicketReply,P=Object(K.e)(f.firstName,f.lastName),F=E.concat(T,w),B=[];return a.map(function(e){var t=D?P:e.displayName;B.push({id:e.id,name:'"'+t+'"<'+e.address+">"})}),x||B[0]&&(x=B[0].id),_?p?b.a.createElement(S.Container,{className:L.a.soloDraft,alignBox:"row"},b.a.createElement(S.Box,{flexible:!0}),this.constructDraftObj()):null:b.a.createElement(S.Container,{className:L.a.container},b.a.createElement(S.Box,{className:L.a.composeRow},b.a.createElement(S.Container,{align:"vertical",alignBox:"row",className:L.a.subRow},b.a.createElement(S.Box,{className:L.a.composeFlabel},Z.f.getI18NValue("label.request.from")),b.a.createElement(S.Box,{className:L.a.fromAddress,flexible:!0,shrink:!0},B.length||g?b.a.createElement(ee.a,{emptyMessage:Z.f.getI18NValue("support.label.no.match.found"),needBorder:!1,needLocalSearch:!0,needSearch:!0,onChange:this.handleFromAdressChange,options:B,selectedValue:x||" ",textField:"name",valueField:"id"}):b.a.createElement("div",{className:L.a.fromAlert},b.a.createElement(Q,{getFromEmailAddress:m,openConfigurePage:u}))),b.a.createElement(S.Box,{className:L.a.rightContainer},b.a.createElement("div",{className:L.a.actionCont},this.constructDraftObj())))),l&&F.length&&!d.length?b.a.createElement(S.Box,{onClick:this.hideRecipients},b.a.createElement(S.Container,{align:"vertical",alignBox:"row",className:L.a.subRow},b.a.createElement(S.Box,{className:L.a.composeFlabel},Z.f.getI18NValue("support.request.history.wfalert.recipients")),b.a.createElement(S.Box,{className:L.a.recipientstheme,eleRef:function(t){e.recipientsCont=t},flexible:!0,shrink:!0},this.constructRecipients(F,O),O?b.a.createElement("span",{className:L.a.demomore},O," ",Z.f.getI18NValue("crm.login.more")):null))):b.a.createElement(S.Box,{className:L.a.scrollBox,dataId:"autoId_23"},b.a.createElement(S.Container,{alignBox:"row"},b.a.createElement(S.Box,{flexible:!0},b.a.createElement("div",{className:L.a.composeRow},b.a.createElement(S.Container,{alignBox:"row",align:"vertical",className:L.a.subRow},b.a.createElement(S.Box,{className:L.a.composeFlabel},Z.f.getI18NValue("crm.label.to.email")),b.a.createElement(S.Box,{className:L.a.selectLitetheme,flexible:!0},b.a.createElement(G,{changeEmailAddress:this.changeEmailAddress,closeSearchPopup:s,editedIndex:y,editedMode:A,editedValue:I,editEmail:this.editEmail,emailArr:E,formatEmailAddress:this.formatEmailAddress,mode:"to",orgName:r,removeEmail:this.removeEmail,searchContact:n,searchData:i,searchMode:o}),v?b.a.createElement("div",{className:L.a.emptyErr},Z.f.getI18NValue("support.common.email.validation.message")):null))),k||T.length?b.a.createElement("div",{className:L.a.composeRow},b.a.createElement(S.Container,{alignBox:"row",align:"vertical",className:L.a.subRow},b.a.createElement(S.Box,{className:L.a.composeFlabel},Z.f.getI18NValue("crm.label.cc.email")),b.a.createElement(S.Box,{className:L.a.selectLitetheme,flexible:!0},b.a.createElement(G,{changeEmailAddress:this.changeEmailAddress,closeSearchPopup:s,editedIndex:y,editedMode:A,editedValue:I,editEmail:this.editEmail,emailArr:T,formatEmailAddress:this.formatEmailAddress,mode:"cc",orgName:r,removeEmail:this.removeEmail,searchContact:n,searchData:i,searchMode:o})))):null,N||w.length?b.a.createElement("div",{className:L.a.composeRow},b.a.createElement(S.Container,{alignBox:"row",align:"vertical",className:L.a.subRow},b.a.createElement(S.Box,{className:L.a.composeFlabel},Z.f.getI18NValue("crm.label.bcc.email")),b.a.createElement(S.Box,{className:L.a.selectLitetheme,flexible:!0},b.a.createElement(G,{changeEmailAddress:this.changeEmailAddress,closeSearchPopup:s,editedIndex:y,editedMode:A,editedValue:I,editEmail:this.editEmail,emailArr:w,formatEmailAddress:this.formatEmailAddress,mode:"bcc",orgName:r,removeEmail:this.removeEmail,searchContact:n,searchData:i,searchMode:o})))):null),b.a.createElement(S.Box,{className:L.a.rightContainer},l?null:b.a.createElement("div",{className:L.a.replyIcns},k||T.length?null:b.a.createElement("span",{className:L.a.textVal,onClick:this.showCc},Z.f.getI18NValue("crm.label.cc.email")),N||w.length?null:b.a.createElement("span",{className:L.a.textVal,onClick:this.showBcc},Z.f.getI18NValue("crm.label.bcc.email")))))))}}]),t}(b.a.Component),ae=te;te.propTypes={addEmail:y.a.func,bccAddress:y.a.array,ccAddress:y.a.array,changeEmail:y.a.func,changeFromEmailAddress:y.a.func,closeSearchPopup:y.a.func,content:y.a.string,deleteDraft:y.a.func,draftText:y.a.string,fromEmailAddress:y.a.any,getFromEmailAddress:y.a.func,haveForWardPermissionOnly:y.a.bool,haveMailSendPermission:y.a.bool,hideRecipients:y.a.func,iconName:y.a.string,inValideArr:y.a.array,isDraft:y.a.bool,isEditorFocus:y.a.bool,isFromAddressFetching:y.a.bool,isFromBlueprint:y.a.bool,isPeekView:y.a.bool,isRecipientsVisible:y.a.bool,isToEmpty:y.a.bool,mailConfigurations:y.a.object,mode:y.a.string,myInfo:y.a.object,openConfigurePage:y.a.func,openEditor:y.a.func,orgName:y.a.string,removeEmail:y.a.func,saveDraft:y.a.func,searchContact:y.a.func,searchData:y.a.array,searchMode:y.a.string,thread:y.a.any,threadId:y.a.string,toAddress:y.a.array,updateDraft:y.a.func};var ne=a(1286),oe=a.n(ne),ie=a(1287),re=a.n(ie),se=a(239),le=a.n(se),ce=function(e){function t(e){u()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={isPopupOpen:!1},a.togglePopup=a.togglePopup.bind(a),a.onActionClick=a.onActionClick.bind(a),a}return _()(t,e),h()(t,[{key:"togglePopup",value:function(e){this.setState(function(e){return{isPopupOpen:!e.isPopupOpen}}),e.stopPropagation()}},{key:"onActionClick",value:function(){var e=this.props,t=e.isDraft,a=e.sendDraft,n=e.sendReply;t?a():n()}},{key:"render",value:function(){var e=this.props,t=e.sendAndClose,a=(e.isDraft,e.isPrivateThread),n=e.isPrivateButtonEnable,o=e.togglePrivateSwitch,i=e.isStatusLocked,r=(e.havePrivateThreadConfig,e.haveForWardPermissionOnly,e.isSharedTicket),s=e.haveVisibilityChangePer,l=this.state.isPopupOpen?re.a.active:"",c=n?Z.f.getI18NValue("support.request.thread.display.not.helpcenter"):Z.f.getI18NValue("support.request.thread.display.helpcenter"),d=s||!i&&!r;return b.a.createElement(S.Container,{className:re.a.ticketButton,isCover:!1},b.a.createElement("div",{className:re.a.ticketAction},b.a.createElement("div",{className:re.a.content+" "+(d?re.a.haveMore:""),onClick:this.onActionClick,"data-id":"replySendBtn"},b.a.createElement("p",{className:re.a.actionType},Z.f.getI18NValue("crm.button.send")),a?b.a.createElement("p",{className:re.a.subtitle},Z.f.getI18NValue("support.request.private.thread")):null),d?b.a.createElement("span",{className:re.a.arrow,onClick:this.togglePopup},b.a.createElement(V.TopbandFontIcon,{name:"blockDownArrow",size:"8"})):null),b.a.createElement("div",{className:re.a.buttonAction+" "+l},s?b.a.createElement("div",{className:re.a.switchAction},b.a.createElement("p",null,b.a.createElement("span",{className:re.a.actionNotify},Z.f.getI18NValue("support.department.type.internal")),b.a.createElement("span",{className:re.a.switchbox},b.a.createElement(le.a,{id:"private",name:"private",size:"small",checked:n,onChange:o}))),b.a.createElement("p",{className:re.a.actionSubtitle},c)):null,i||r?null:b.a.createElement("div",{"data-id":"sendOption"},b.a.createElement("span",{className:re.a.secondarybutton,onClick:t},Z.f.getI18NValue("support.request.send.and.close")))))}}]),t}(b.a.Component),de=ce;ce.propTypes={haveForWardPermissionOnly:y.a.bool,havePrivateThreadConfig:y.a.bool,haveVisibilityChangePer:y.a.bool,isDraft:y.a.bool,isPrivateButtonEnable:y.a.bool,isPrivateThread:y.a.bool,isSharedTicket:y.a.bool,isStatusLocked:y.a.bool,sendAndClose:y.a.func,sendDraft:y.a.func,sendReply:y.a.func,togglePrivateSwitch:y.a.func};var me=a(1019),ue=a(1233),pe=a(1082),he=a(73),fe=a.n(he),ge=function(e){function t(){return u()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.closeEdtior,a=e.orgId,n=e.showAttachmentViewer,o=e.openCloudAttach,i=e.closeCloudAttach,r=e.deleleUpload,s=e.uploadAttach,l=e.removeAttachment,c=e.oldAttachments,d=e.newAttachments,m=e.sendDraft,u=e.isDraft,p=e.sendReply,h=e.sendAndClose,f=e.isPrivateThread,g=e.isPrivateButtonEnable,v=e.togglePrivateSwitch,_=e.isPeekView,C=e.haveMailSendPermission,E=e.isStatusLocked,y=e.havePrivateThreadConfig,I=e.isFromBlueprint,A=e.sendForReview,k=e.CloudAttachmentIframe,N=e.isCloudAttchOpen,T=e.addCloudAttch,w=e.haveForWardPermissionOnly,O=e.isSharedTicket,x=e.haveVisibilityChangePer,D=e.isCustomChannel,P=e.acceptsAttachments,F=e.appName,B=e.deleteDraft,L=e.sendCusomChannelReply,R=!0;return D&&!P&&(R=!1),b.a.createElement(S.Container,{alignBox:"row",align:"vertical",className:oe.a.mainContainer+" "+(I?oe.a.bluePrintLayar:"")},b.a.createElement("div",{className:oe.a.shadow}),b.a.createElement(S.Container,{alignBox:"row",dataId:"editorContainer",className:oe.a.replyBottom,isCover:!1},R?b.a.createElement(S.Box,{className:oe.a.btmDiv},b.a.createElement(S.Container,{className:oe.a.attchIcn,align:"vertical",alignBox:"row"},b.a.createElement("label",{htmlFor:"replyAttach"},b.a.createElement(V.TopbandFontIcon,{name:"attachment5",size:"16"}),b.a.createElement("input",{className:oe.a.fileCont,type:"file",onChange:s,multiple:"multiple",id:"replyAttach"})),b.a.createElement("div",{className:oe.a.attchPopup},b.a.createElement(pe.a,{label:"replyAttachLabel",boxPosition:"topRight",bottom:35,left:5,onAttchClick:s,openCloudAttach:o})))):null,b.a.createElement(S.Box,{shrink:!0,flexible:!0,className:oe.a.uploadImg},b.a.createElement(me.a,{oldAttachments:c,newAttachments:d,deleleUpload:r,removeAttachment:l,showAttachmentViewer:n,orgId:a,from:"replyEdtior",isPeekView:_})),I?null:b.a.createElement(S.Box,{dataId:"send-options"},b.a.createElement(S.Container,{align:"vertical",alignBox:"row",isCover:!1},C?D?b.a.createElement(b.a.Fragment,null,b.a.createElement(fe.a,{palette:"primaryFilled",text:Z.f.getI18NValue("support.common.request.channel.integ.sendvia",[F]),onClick:L,className:oe.a.actionBtn}),u?b.a.createElement(fe.a,{palette:"secondary",text:Z.f.getI18NValue("support.common.request.mail.discard.draft",[F]),className:oe.a.actionBtn,onClick:B}):null):b.a.createElement("span",{className:oe.a.sendBtn},b.a.createElement(de,{sendDraft:m,sendReply:p,sendAndClose:h,isDraft:u,isPrivateThread:f,isPrivateButtonEnable:g,togglePrivateSwitch:v,haveMailSendPermission:C,isStatusLocked:E,havePrivateThreadConfig:y,haveForWardPermissionOnly:w,isSharedTicket:O,haveVisibilityChangePer:x})):b.a.createElement(fe.a,{palette:"primaryFilled",text:Z.f.getI18NValue("support.common.save.and.send.for.review"),onClick:A,className:oe.a.actionBtn}),b.a.createElement(S.Box,null,b.a.createElement(ue.a,{isCancel:!0,onClick:t}))))),N&&k?b.a.createElement(k,{addCloudAttch:T,totalLen:c.length+d.length,closeIframe:i}):null)}}]),t}(b.a.Component),ve=ge;ge.propTypes={CloudAttachmentIframe:y.a.node,addCloudAttch:y.a.func,closeCloudAttach:y.a.func,closeEdtior:y.a.func,deleleUpload:y.a.func,deleteDraft:y.a.func,haveForWardPermissionOnly:y.a.bool,haveMailSendPermission:y.a.bool,havePrivateThreadConfig:y.a.bool,haveVisibilityChangePer:y.a.bool,isCloudAttchOpen:y.a.bool,isCustomChannel:y.a.bool,isDraft:y.a.bool,isFromBlueprint:y.a.bool,isPeekView:y.a.bool,isPrivateButtonEnable:y.a.bool,isPrivateThread:y.a.bool,isSharedTicket:y.a.bool,isStatusLocked:y.a.bool,newAttachments:y.a.array,oldAttachments:y.a.array,openCloudAttach:y.a.func,orgId:y.a.string,removeAttachment:y.a.func,sendAndClose:y.a.func,sendDraft:y.a.func,sendForReview:y.a.func,sendReply:y.a.func,showAttachmentViewer:y.a.func,togglePrivateSwitch:y.a.func,uploadAttach:y.a.func};var _e=a(1288),Ce=a.n(_e),be=a(72),Ee=a.n(be),ye=function(e){function t(e){u()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={draftId:null,statusOpen:!1},a._mount=a.saveDraft=a.saveDraft.bind(a),a.sendReply=a.sendReply.bind(a),a.togglePopup=a.togglePopup.bind(a),a}return _()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this;this._mount=!0,window.addEventListener("click",function(){e._mount&&e.setState({statusOpen:!1})})}},{key:"componentWillUnmount",value:function(){this._mount=!1}},{key:"togglePopup",value:function(){this.setState(function(e){return{statusOpen:!e.statusOpen}})}},{key:"onSelect",value:function(e){var t=this.props,a=t.ticketId;(0,t.changeForumStatus)(t.channelRelatedInfo.topicId,e,a),this.togglePopup()}},{key:"sendReply",value:function(){var e=this.props,t=e.isDraft,a=e.editorId,n=e.sendReply,o=e.sendDraft,i=e.updateDraft,r=e.channelRelatedInfo,s=e.showMessage;if(""==r.forumStatus)s({type:"alert",message:Z.f.getI18NValue("support.community.tickettopic.selectstatus")});else{var l=this.state.draftId,c={channel:"FORUMS",content:l?editor[l].getContent():editor[a].getContent()};t?i(function(){o()}):n(c)}}},{key:"saveDraft",value:function(){var e=this,t=this.props,a=t.isDraft,n=t.editorId,o=t.saveDraft,i=t.updateDraft,r=this.state.draftId,s=r?editor[r].getContent():editor[n].getContent();a?i({channel:"FORUMS",content:s},function(){}):o(function(){e.setState({draftId:n})})}},{key:"render",value:function(){var e=this,t=this.state.statusOpen,a=this.props,n=a.closeEdtior,o=a.isDraft,i=a.channelRelatedInfo,r=a.deleteDraft,s=i.topicType,l=i.forumStatus,c=Object(K.s)(s),d=Z.f.getI18NValue("support.forum.setstatus"),m=!1;return c.forEach(function(e){l==e.value&&(d=e.label,m=!0)}),b.a.createElement(S.Container,{alignBox:"row",className:Ce.a.mainContainer},b.a.createElement("div",{className:Ce.a.shadow}),b.a.createElement(S.Box,{className:Ce.a.forumDiv},"QUESTION"==s||"IDEA"==s||"PROBLEM"==s?b.a.createElement("div",{className:Ce.a.forumStatus},b.a.createElement(Ee.a,{isAnimate:!0,isArrow:!1,isRadius:!1,size:"default",boxPosition:"topCenter",isActive:t},c.map(function(t,a){var n=t.label,o=t.value,i=n==d;return b.a.createElement("div",{className:Ce.a.dropList+" "+(i?Ce.a.selected:""),key:a,onClick:e.onSelect.bind(e,o)},n)})),b.a.createElement("div",{className:Ce.a.container+" "+(m?Ce.a.statusSel:"")},b.a.createElement("span",{className:Ce.a.forumstatusText},d),b.a.createElement("span",{className:Ce.a.dropDown,onClick:function(t){t.stopPropagation&&t.stopPropagation(),e.togglePopup()}},b.a.createElement(V.TopbandFontIcon,{name:"blockDownArrow",size:"8"})))):null),b.a.createElement(S.Box,null,b.a.createElement("span",{className:Ce.a.postButton},b.a.createElement(fe.a,{text:Z.f.getI18NValue("support.forums.posttoforums"),palette:"primaryFilled",size:"medium",onClick:this.sendReply})),b.a.createElement("span",{className:Ce.a.postButton},b.a.createElement(fe.a,{text:Z.f.getI18NValue("support.common.request.mail.save.draft"),palette:"secondary",size:"medium",onClick:this.saveDraft}),o?b.a.createElement("span",{className:Ce.a.postButton},b.a.createElement(fe.a,{text:Z.f.getI18NValue("support.common.request.mail.discard.draft"),palette:"secondary",size:"medium",onClick:r})):null),b.a.createElement("span",{className:Ce.a.postButton},b.a.createElement(fe.a,{text:Z.f.getI18NValue("support.label.cancel"),palette:"secondary",size:"medium",onClick:n}))))}}]),t}(b.a.Component),Ie=ye;ye.propTypes={changeForumStatus:y.a.func,channelRelatedInfo:y.a.object,closeEdtior:y.a.func,deleteDraft:y.a.func,editorId:y.a.string,isDraft:y.a.bool,saveDraft:y.a.func,sendDraft:y.a.func,sendReply:y.a.func,showMessage:y.a.func,ticketId:y.a.string,updateDraft:y.a.func};var Ae=a(1289),ke=a.n(Ae),Se=function(e){function t(){return u()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.openSnippet;return b.a.createElement("div",{className:ke.a.popup,onMouseUp:function(e){e.stopPropagation&&e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}},b.a.createElement(Ee.a,{isAnimate:!0,size:"small",isActive:!0,boxPosition:"bottomRight",isArrow:!0,arrowLeft:"15"},b.a.createElement(S.Container,{alignBox:"row",className:ke.a.list,onClick:e.bind(this,"list")},b.a.createElement(S.Box,{className:ke.a.icon},b.a.createElement(D,null)),b.a.createElement(S.Box,{flexible:!0},Z.f.getI18NValue("support.solution.addedit.snippet"))),b.a.createElement(S.Container,{alignBox:"row",className:ke.a.list,onClick:e.bind(this,"form")},b.a.createElement(S.Box,{className:ke.a.icon},b.a.createElement(O,null)),b.a.createElement(S.Box,{flexible:!0},Z.f.getI18NValue("support.module.add",[Z.f.getI18NValue("support.solution.addedit.snippet")])))))}}]),t}(b.a.Component),Ne=Se;Se.propTypes={openSnippet:y.a.func};var Te,we=a(1168),Oe=a(1162),xe=a(131),De=a(17),Pe=a(242),Fe=a(1222),Be=a(1191),Le=a(74),Ve=a(24),Re=a(113),Me=a(256),je=a(174),ze=a(1028),Ke=(a(1290),a(87)),Ue=a(28),He=a(1235),We=a(22),Ze=a(20),qe=a.n(Ze),Ge=a(1291),$e=a.n(Ge),Ye=a(65),Je=a(458),Qe=function(e){function t(e){return u()(this,t),g()(this,(t.__proto__||d()(t)).call(this,e))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.from,n=t.limit,o=t.isFetching,i=t.searchStr,r=t.handleSearch,s=t.templeData,l=t.insertEmailTemplateData,c=t.noMoreData,d=t.fetchData,m=t.handleRefresh,u=qe()(s),p=u.length;return b.a.createElement("div",{className:$e.a.popup,onClick:function(e){e.stopPropagation&&e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}},b.a.createElement(Ee.a,{isAnimate:!0,size:"xxlarge",boxPosition:"bottomRight",isActive:!0,arrowLeft:"55"},b.a.createElement(Ye.Card,{from:a,limit:n,noMoreData:c,fetchData:d,noNeedUpScroll:!0},b.a.createElement(Ye.CardHeader,{className:$e.a.viewpopsearch},b.a.createElement(j.a,{placeHolder:Z.f.getI18NValue("crm.label.search"),value:i,onChange:r})),b.a.createElement(Ye.CardContent,{className:$e.a.listCont},p?u.map(function(t,a){var n=s[t],o=n.list,i=void 0===o?[]:o,r=n.name;return i.length?b.a.createElement("div",{key:a},b.a.createElement("div",{className:$e.a.title},r),i.map(function(t,a){var n=t.templateId,o=t.templateName;return b.a.createElement("div",{className:$e.a.list,"data-title":o,onClick:l.bind(e,n),key:a},o)}),p!=a+1?b.a.createElement("div",{className:$e.a.seperate}):null):null}):o?b.a.createElement(Je.a,null):b.a.createElement("div",{className:$e.a.emptyTxt},b.a.createElement("div",{className:$e.a.emtyIcon},b.a.createElement(V.CommonFontIcon,{name:"exclamationThincircle",size:"30"})),Z.f.getI18NValue("support.module.empty.message",[Z.f.getI18NValue("support.request.template")]))),b.a.createElement(Ye.CardFooter,{className:$e.a.footer},b.a.createElement("span",{className:$e.a.footerOption,onClick:m},b.a.createElement("span",{className:$e.a.updateIcon},b.a.createElement(V.TopbandFontIcon,{name:"update",size:"16"})),Z.f.getI18NValue("crm.button.refresh")),b.a.createElement("span",{className:$e.a.footerOption},b.a.createElement("span",{className:$e.a.updateIcon},"+"),Z.f.getI18NValue("crm.button.create.new.email.template"))))))}}]),t}(C.Component),Xe=Qe;Qe.propTypes=(Te={fetchData:y.a.func,from:y.a.string,handleRefresh:y.a.func,handleSearch:y.a.func},o()(Te,"handleSearch",y.a.func),o()(Te,"insertEmailTemplateData",y.a.func),o()(Te,"isFetching",y.a.bool),o()(Te,"limit",y.a.string),o()(Te,"noMoreData",y.a.bool),o()(Te,"searchStr",y.a.string),o()(Te,"templeData",y.a.object),Te);var et=function(e){function t(e){u()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={from:0,limit:50,searchStr:"",templeData:{},templatesList:[]},a.getEmailTemplates=a.getEmailTemplates.bind(a),a.fetchData=a.fetchData.bind(a),a.handleSearch=Object(xe.a)(a.handleSearch.bind(a),100,!0),a.handleRefresh=a.handleRefresh.bind(a),a}return _()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.getEmailTemplates(0)}},{key:"getEmailTemplates",value:function(e){var t=this,a=this.state,n=a.limit,o=a.searchStr,i=a.templatesList,r=this.props,s=r.deptId,l=r.getEmailTemplates;return this.setState({isFetching:!0,from:e}),l(s,"tickets",e,n,o).then(function(e){var a=!e.data.length||e.data.length<n,o=e.data.length?i.concat(e.data):i;t.setState({isFetching:!1,noMoreData:a,templatesList:o}),t.constructTemplateData(o)},function(){t.setState({isFetching:!1,noMoreData:!0})})}},{key:"constructTemplateData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.length&&e.forEach(function(e){var a=e.folder,n=a.folderId,o=a.folderName,i=(t[n]||{}).list,s=(void 0===i?[]:i).concat([e]),l=r()({},t[n],{list:s,name:o});t[n]=l}),this.setState({templeData:t})}},{key:"handleSearch",value:function(e){var t=this;this.setState({searchStr:e,noMoreData:!1,templatesList:[]},function(){t.getEmailTemplates(0)})}},{key:"fetchData",value:function(e){return this.getEmailTemplates(e)}},{key:"handleRefresh",value:function(){this.handleSearch("")}},{key:"render",value:function(){var e=this.state,t=e.from,a=e.limit,n=e.templeData,o=e.searchStr,i=e.isFetching,r=e.noMoreData,s=this.props.insertEmailTemplateData;return b.a.createElement(Xe,{from:t,limit:a,noMoreData:r,fetchData:this.fetchData,isFetching:i,templeData:n,searchStr:o,insertEmailTemplateData:s,handleSearch:this.handleSearch,handleRefresh:this.handleRefresh})}}]),t}(C.Component);et.propTypes={deptId:y.a.string,getEmailTemplates:y.a.func,insertEmailTemplateData:y.a.func};var tt,at=Object(I.connect)(function(e,t){return{}},{getEmailTemplates:Be.a})(et),nt=function(e){function t(e){u()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={newAttachments:[],isAttachmentUploading:!1,draftText:Z.f.getI18NValue("support.common.request.mail.save.draft"),selectedFromAddress:"",searchMode:"",searchData:[],isRecipientsVisible:!0,isPrivateButtonEnable:!0,isTemplateOpen:!1,isSnippetActionOpen:!1},a.draftTimeLimit=6e4,a.constructEditorData=a.constructEditorData.bind(a),a.constructFromAddress=a.constructFromAddress.bind(a),a.saveDraft=a.saveDraft.bind(a),a.sendForReview=a.sendForReview.bind(a),a.updateDraft=a.updateDraft.bind(a),a.uploadAttach=a.uploadAttach.bind(a),a.deleleUpload=a.deleleUpload.bind(a),a.removeAttachment=a.removeAttachment.bind(a),a.addEmail=a.addEmail.bind(a),a.changeEmail=a.changeEmail.bind(a),a.removeEmail=a.removeEmail.bind(a),a.getEmailObj=a.getEmailObj.bind(a),a.changeFromEmailAddress=a.changeFromEmailAddress.bind(a),a.sendDraft=a.sendDraft.bind(a),a.searchContact=Object(xe.a)(a.searchContact.bind(a),100,!0),a.closeSearchPopup=a.closeSearchPopup.bind(a),a.hideRecipients=a.hideRecipients.bind(a),a.editorFocus=a.editorFocus.bind(a),a.editorCallback=a.editorCallback.bind(a),a.sendReply=a.sendReply.bind(a),a.sendAndClose=a.sendAndClose.bind(a),a.togglePrivateSwitch=a.togglePrivateSwitch.bind(a),a.checkIsPrivateThread=a.checkIsPrivateThread.bind(a),a.bindKeyDown=a.bindKeyDown.bind(a),a.insertEmailTemplateData=a.insertEmailTemplateData.bind(a),a.openSnippet=a.openSnippet.bind(a),a.getFromEmailAddress=a.getFromEmailAddress.bind(a),a.hidePopup=a.hidePopup.bind(a),a.createDraftTimer=a.createDraftTimer.bind(a),a.addCloudAttch=a.addCloudAttch.bind(a),a.openCloudAttach=a.openCloudAttach.bind(a),a.closeCloudAttach=a.closeCloudAttach.bind(a),a.constructReplyHeader=a.constructReplyHeader.bind(a),a.blurCallback=a.blurCallback.bind(a),a.deleteDraftConfirmation=a.deleteDraftConfirmation.bind(a),a.deleteDraft=a.deleteDraft.bind(a),a.closeAlert=a.closeAlert.bind(a),a.sendCusomChannelReply=a.sendCusomChannelReply.bind(a),a}return _()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.constructEditorData(),this.constructFromAddress(),document.addEventListener("click",this.hidePopup),this.setDefaultFromAddress()}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.state,o=n.toAddress,i=n.ccAddress,r=n.bccAddress;n.noNeedCheckCollision;t.toAddress==o&&t.ccAddress==i&&t.bccAddress==r||this.checkIsPrivateThread(),e.replyMode!=this.props.replyMode&&this.setState({ccAddress:[]},function(){a.constructEditorData(function(){a.constructCcAddress()})}),this.props.fromAddress!=e.fromAddress&&this.props.fromAddress.length&&this.setDefaultFromAddress(),e.replyingUsers.length!=this.props.replyingUsers.length&&this.props.replyingUsers.length&&this.setState({alertMode:"collisionReply"})}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.replyMode;e.replyMode!=a&&this.setState({chageEditorContent:!0},function(){setTimeout(function(){t.setState({chageEditorContent:!1})},100)})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hidePopup)}},{key:"setDefaultFromAddress",value:function(){var e=this.props.fromAddress;if(e.length){var t=e[0].address;this.setState({selectedFromAddress:t});var a=this.props.setReplyData;a&&a("fromEmailAddress",t)}}},{key:"constructEditorData",value:function(e){var t=this.props,a=t.solutionAttachments,n=void 0===a?[]:a,o=t.havePrivateThreadConfig,i=t.replyThread,r=t.replyMode,s=t.contactEmail,l=t.setReplyData,c=(t.fromAddress,i.attachments),d=void 0===c?[]:c,m=i.author,u=void 0===m?{}:m,p=i.fromEmailAddress,h=i.direction,f=i.to,g=void 0===f?[]:f,v=i.cc,_=void 0===v?[]:v,C=i.bcc,b=void 0===C?[]:C,E=i.status,y=i.channel,I=i.visibility;d=n.length?n:d;var A=[];if(((d="editDraft"==r||"forward"==r?d:[]).length||n.length)&&("editDraft"==r||"forward"==r))for(var k=0;k<d.length;k++)A.push(d[k].id);var S=u.email&&"FEEDBACK"!=y?[u.email]:p?[p]:[];"out"==h&&(S=g.length?Object(W.d)(g):[]),S="forward"!=r?S:[];for(var N=_.length&&"forward"!=r?Object(W.d)(_):[],T=b.length&&"editDraft"==r?Object(W.d)(b):[],w=S.concat(N,T),O=[],x=0;x<S.length;x++)Object(W.e)(S[x])||O.push(x);var D="forward"==r,P=void 0,F=!0;D?(P=!0,F=!1):o?P=-1==w.indexOf(s):(P="private"==I,F=!1),l&&l("toAddress",S),l&&l("ccAddress",N),l&&l("bccAddress",T),l&&l("isPrivateThread",P),this.setState({attachmentIds:A,oldAttachments:d,isDraft:"DRAFT"==E,toAddress:S,ccAddress:N,bccAddress:T,replyMode:r,isPrivateThread:P,inValideArr:O,isRecipientsVisible:S.length,isForwardReply:D,haveVisibilityChangePer:F},function(){e&&e()})}},{key:"constructFromAddress",value:function(){var e=this,t=this.props,a=t.replyThread,n=(t.deptId,t.haveForWardPermissionOnly,t.channelRelatedInfo);"FORUMS"==a.channel&&!n.isTopicDeleted||(this.setState({isFromAddressFetching:!0}),this.getFromEmailAddress().then(function(t){var a=function(){e.setState({isFromAddressFetching:!1}),e.constructCcAddress()};t&&t.data.res&&204==t.data.res.responseStatus?e.getFromEmailAddress(!0).then(a):a()}))}},{key:"getFromEmailAddress",value:function(e){var t=this.props,a=t.getFromEmailAddress,n=t.deptId;return a(n=e?"allDepartment":n)}},{key:"constructCcAddress",value:function(){var e=this.props,t=e.haveForWardPermissionOnly,a=e.setReplyData,n=e.mailConfigurations,o=(e.secondaryContacts,e.contacts,e.fromAddress),i=e.replyMode;if(n.autoCCToMailbox&&!t&&"forward"!=i){var r=this.state.ccAddress;if(-1==r.indexOf(o[0].address)){var s=[].concat(l()(r),[o[0].address],l()(this.constructSecondaryContactEmails()));this.setState({ccAddress:s}),a&&a("ccAddress",s)}}}},{key:"constructSecondaryContactEmails",value:function(){var e=this.props,t=e.secondaryContacts,a=void 0===t?[]:t,n=e.contacts,o=[];a.length&&Object(K.h)(a,n).forEach(function(e){var t=e.firstName,a=e.lastName,n=e.email,i=Object(K.e)(t,a);o.push(i+"<"+n+">")});return o}},{key:"hidePopup",value:function(){this.setState({isTemplateOpen:!1,isSnippetActionOpen:!1})}},{key:"checkIsPrivateThread",value:function(){var e=this.state,t=e.toAddress,a=void 0===t?[]:t,n=e.ccAddress,o=void 0===n?[]:n,i=e.bccAddress,r=void 0===i?[]:i,s=e.isForwardReply,l=e.isPrivateButtonEnable,c=this.props,d=c.havePrivateThreadConfig,m=c.contactEmail,u=c.replyThread,p=void 0===u?{}:u,h=c.setReplyData,f=a.concat(o,r),g=!0,v=!0;if(s)g=!0,v=!1;else if(d)if(l)for(var _=0;_<f.length;_++){if(Object(W.b)(f[_])==m){g=!1,v=!1;break}v=!0}else g=!1;else g="private"==p.visibility,v=!1;this.setState({isPrivateThread:g,haveVisibilityChangePer:v}),h&&h("isPrivateThread",g)}},{key:"addEmail",value:function(e,t){var a=this,n=this.props.setReplyData;if("to"==t){var o=[].concat(l()(this.state.toAddress),[e]);this.setState({toAddress:o},function(){a.checkEmailValide()}),n&&n("toAddress",o)}else if("cc"==t){var i=[].concat(l()(this.state.ccAddress),[e]);this.setState({ccAddress:i},function(){a.checkEmailValide()}),n&&n("ccAddress",i)}else if("bcc"==t){var r=[].concat(l()(this.state.bccAddress),[e]);this.setState({bccAddress:r},function(){a.checkEmailValide()}),n&&n("bccAddress",r)}}},{key:"checkEmailValide",value:function(){var e=this.state,t=e.toAddress,a=e.ccAddress,n=e.bccAddress,o=this.props.contact.email;if(o&&this.props.haveForWardPermissionOnly){var i=!0;if(t.forEach(function(e){Object(W.b)(e)==o&&(i=!1)}),i&&a.forEach(function(e){Object(W.b)(e)==o&&(i=!1)}),i&&n.forEach(function(e){Object(W.b)(e)==o&&(i=!1)}),!i){var r=this.props,s=r.showMessage,l=r.moduleMeta;return s({type:"alert",message:Z.f.getI18NValue("support.ticketshare.reply.error",[l.tickets.singularLabel])}),!1}return!0}return!0}},{key:"changeEmail",value:function(e,t,a){var n=this.props.setReplyData;if("to"==a){var o=this.state.inValideArr.filter(function(e){return e!==t});this.setState(function(a){var i=a.toAddress.slice();return i[t]=e,n&&n("toAddress",i),{toAddress:i,inValideArr:o}})}else"cc"==a?this.setState(function(a){var o=a.ccAddress.slice();return o[t]=e,n&&n("ccAddress",o),{ccAddress:o}}):"bcc"==a&&this.setState(function(a){var o=a.bccAddress.slice();return o[t]=e,n&&n("bccAddress",o),{bccAddress:o}})}},{key:"removeEmail",value:function(e,t,a){var n=this.props.setReplyData;if("to"==t){var o=this.state,i=o.toAddress,r=o.inValideArr.filter(function(t){return t!==e});i=[].concat(l()(i.slice(0,e)),l()(i.slice(e+1))),n&&n("toAddress",i),this.setState({toAddress:i,inValideArr:r},function(){a&&a()})}else if("cc"==t){var s=this.state.ccAddress;s=[].concat(l()(s.slice(0,e)),l()(s.slice(e+1))),this.setState({ccAddress:s},function(){a&&a()}),n&&n("ccAddress",s)}else if("bcc"==t){var c=this.state.bccAddress;c=[].concat(l()(c.slice(0,e)),l()(c.slice(e+1))),this.setState({bccAddress:c},function(){a&&a()}),n&&n("bccAddress",c)}}},{key:"openCloudAttach",value:function(){this.setState({isCLoudOpen:!0}),this.props.openCloudAttach()}},{key:"closeCloudAttach",value:function(){this.setState({isCLoudOpen:!1})}},{key:"addCloudAttch",value:function(e,t,a){var n=this,o=this.state,i=o.newAttachments,s=o.oldAttachments.length+i.length+a,l={index:s,href:null,isPreview:!0};this.setState(function(e){var t=r()({},e);return t.newAttachments.push(l),t}),this.props.uploadCloudAttachment(e,s,function(e,t){var a=n.state.newAttachments.map(function(a){return a.index===t?r()({},a,{percentComplete:e}):a});n.setState({newAttachments:a})}).then(function(e){var t=e.data,a=n.state.newAttachments.map(function(e){return e.index===t.data.index?t.data:e});n.setState({newAttachments:a}),n.setState(function(e){var a=r()({},e);a.attachmentIds.push(t.data.id);var o=n.props.setReplyData;return o&&o("replyAttachmentIds",a.attachmentIds),a}),n.state.isDraft?n.updateDraft():n.saveDraft()},function(){n.setState(function(e){var t=r()({},e);return t.newAttachments=t.newAttachments.filter(function(e){return s!==e.index}),t})})}},{key:"uploadAttach",value:function(e){var t=this,a=this.state,n=a.newAttachments,o=a.oldAttachments.length+n.length,i=e.target?e.target.files:e,s=i.length,l=Object(je.n)(i,o),c=l.inValidArray,d=l.validArray,m=this.props.showMessage;if(l.isCountExceeds)m({type:"alert",message:Z.f.getI18NValue("support.attachments.count.exceeds",[10])});else{if(c)for(var u=0;u<c.length;u++){var p=c[u];p.isUnSupported&&m({type:"alert",message:Z.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted")}),p.isFileNameSizeInvalid&&m({type:"alert",message:Z.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation")}),p.isEmpty&&m({type:"alert",message:Z.f.getI18NValue("support.request.empty.attachment.message")}),p.isAttachSizeExceeded&&m({type:"alert",message:Z.f.getI18NValue("support.feedback.uploaded.file.exceeds.20mb")})}d&&function(){var e=0;t.setState({isAttachmentUploading:!0});for(var a=function(a){var n=d[a],i=new FormData;i.append("file",n);var l=o+a,m=Object(je.f)(n,l);t.setState(function(e){var t=r()({},e);return t.newAttachments.push(m),t}),t.props.uploadAttach(i,l,function(e,a){var n=t.state.newAttachments.map(function(t){return t.index===a?r()({},t,{percentComplete:e}):t});t.setState({newAttachments:n})}).then(function(a){var n=a.data;e+=1;var o=t.state.newAttachments.map(function(e){return e.index===n.data.index?n.data:e});t.setState({newAttachments:o}),t.setState(function(e){var a=r()({},e);a.attachmentIds.push(n.data.id);var o=t.props.setReplyData;return o&&o("replyAttachmentIds",a.attachmentIds),a}),e+c.length==s&&(t.state.isDraft?t.updateDraft():t.saveDraft(),t.setState({isAttachmentUploading:!1}))},function(){t.setState(function(e){var t=r()({},e);return t.newAttachments=t.newAttachments.filter(function(e){return l!==e.index}),t})})},n=0;n<d.length;n++)a(n)}()}e.target&&(e.target.value="")}},{key:"deleleUpload",value:function(e){var t=this;this.props.deleleUpload(e).then(function(){t.setState(function(a){var n=r()({},a);n.newAttachments=n.newAttachments.filter(function(t){return e!==t.id}),n.attachmentIds=n.attachmentIds.filter(function(t){return e!==t});var o=t.props.setReplyData;return o&&o("replyAttachmentIds",n.attachmentIds),n})})}},{key:"removeAttachment",value:function(e){var t=this;this.setState(function(a){var n=r()({},a);n.oldAttachments=n.oldAttachments.filter(function(t){return e!==t.id}),n.attachmentIds=n.attachmentIds.filter(function(t){return e!==t});var o=t.props.setReplyData;return o&&o("replyAttachmentIds",n.attachmentIds),n})}},{key:"getEmailObj",value:function(){var e=this.state,t=e.toAddress,a=e.ccAddress,n=e.bccAddress,o="",i="",r="";if(t.length)for(var s=0;s<t.length;s++)o+=0==s?t[s]:","+t[s];if(a.length)for(var l=0;l<a.length;l++)i+=0==l?a[l]:","+a[l];if(n.length)for(var c=0;c<n.length;c++)r+=0==c?n[c]:","+n[c];return{toArr:o,ccArr:i,bccArr:r}}},{key:"saveDraft",value:function(){var e=this;if(this.props.haveMailSendPermission&&this.checkEmailValide()){if(this.state.inValideArr.length)return void this.setState({isToEmpty:!0});this.setState({draftText:"Saving draft...",isToEmpty:!1});var t=this.props,a=(t.ticketId,t.editorId),n=t.saveDraft,o=t.revertIsEditorChanged,i=t.isEditorChanged,r=t.isCustomChannel,s=t.channelInfo,l=this.state,c=l.attachmentIds,d=l.selectedFromAddress,m=editor[a].getContent(),u=this.getEmailObj(),p={channel:"EMAIL",attachmentIds:c,to:u.toArr,cc:u.ccArr,bcc:u.bccArr,fromEmailAddress:d,contentType:"html",content:m};if(r){var h="html",f=s.code;s.replyConfig.contentTypes.includes("text/html")||(h="plaintext"),p={content:m,channel:f,contentType:h,attachmentIds:c}}n(p,function(t){i&&o();var n=Z.f.userDateFormat(new Date(t.data.createdTime),{},"lateby","left",!1,function(){return"hh:mm A"});e.setState({draftText:"Saved @ "+n,isDraft:!0,draftId:a})})}}},{key:"sendForReview",value:function(){if(this.checkEmailValide()){var e=this.props,t=(e.ticketId,e.editorId),a=e.saveDraft,n=e.sendForReview,o=e.revertIsEditorChanged,i=e.isEditorChanged,r=e.replyThread,s=e.updateDraft,l=e.isCustomChannel,c=e.channelInfo,d=this.state,m=d.attachmentIds,u=d.selectedFromAddress,p=editor[t].getContent(),h=this.getEmailObj(),f={channel:"EMAIL",attachmentIds:m,to:h.toArr,cc:h.ccArr,bcc:h.bccArr,fromEmailAddress:u,contentType:"html",content:p};if(l){var g="html",v=c.code;c.replyConfig.contentTypes.includes("text/html")||(g="plaintext"),f={content:p,channel:v,contentType:g}}"DRAFT"==r.status?s(f,function(e){i&&o(),n()}):a(f,function(e){i&&o(),n()})}}},{key:"updateDraft",value:function(){var e=this;if(this.props.haveMailSendPermission&&this.checkEmailValide()){this.setState({draftText:Z.f.getI18NValue("support.common.request.mail.saving.draft")+"...\n        "});var t=this.props,a=(t.ticketId,t.editorId),n=t.updateDraft,o=t.revertIsEditorChanged,i=t.isEditorChanged,r=t.isCustomChannel,s=t.channelInfo,l=this.state,c=l.attachmentIds,d=l.selectedFromAddress,m=l.draftId,u=m?editor[m].getContent():editor[a].getContent(),p=this.getEmailObj(),h={channel:"EMAIL",attachmentIds:c,to:p.toArr,cc:p.ccArr,bcc:p.bccArr,fromEmailAddress:d,contentType:"html",content:u};if(r){var f="html",g=s.code;s.replyConfig.contentTypes.includes("text/html")||(f="plaintext"),h={content:u,channel:g,contentType:f,attachmentIds:c}}n(h,function(t){i&&o();var n=Z.f.userDateFormat(new Date(t.data.createdTime),{},"lateby","left",!1,function(){return"hh:mm A"});e.setState({draftText:Z.f.getI18NValue("support.social.saved")+" @ "+n,isDraft:!0,draftId:m||a})})}}},{key:"changeFromEmailAddress",value:function(e){var t=this.props,a=t.haveForWardPermissionOnly;if((t.mailConfigurations||{}).autoCCToMailbox&&!a){var n=this.state,o=n.ccAddress,i=n.selectedFromAddress,r=o.indexOf(i);r>-1?-1==o.indexOf(e)&&(o[r]=e):o.push(e),this.setState({ccAddress:o});var s=this.props.setReplyData;s&&s("ccAddress",o)}this.setState({selectedFromAddress:e});var l=this.props.setReplyData;l&&l("fromEmailAddress",e)}},{key:"sendDraft",value:function(e){if(this.props.haveMailSendPermission&&this.checkEmailValide()){if(!this.state.toAddress.length)return void this.setState({isToEmpty:!0});this.setState({isToEmpty:!1});var t=this.props,a=t.editorId,n=t.updateDraft,o=t.sendDraft,i=t.revertIsEditorChanged,r=t.isEditorChanged,s=this.state,l=s.attachmentIds,c=s.selectedFromAddress,d=s.draftId,m=s.isPrivateThread,u=s.isPrivateButtonEnable,p=d?editor[d].getContent():editor[a].getContent(),h=this.getEmailObj(),f={channel:"EMAIL",attachmentIds:l,to:h.toArr,cc:h.ccArr,bcc:h.bccArr,fromEmailAddress:c,contentType:"html",content:p},g=m&&u;n(f,function(t){o(g,function(){r&&i(),"function"==typeof e&&e()})})}}},{key:"sendReply",value:function(e,t){if(this.props.haveMailSendPermission&&this.checkEmailValide()){if(!this.state.toAddress.length||this.state.inValideArr.length)return void this.setState({isToEmpty:!0});this.setState({isToEmpty:!1});var a=this.props,n=a.editorId,o=(a.updateDraft,a.sendReply),i=a.replyMode,r=a.revertIsEditorChanged,s=a.isEditorChanged,l=this.state,c=l.attachmentIds,d=l.selectedFromAddress,m=l.isPrivateThread,u=l.isPrivateButtonEnable,p=editor[n].getContent(),h=this.getEmailObj();o({channel:"EMAIL",attachmentIds:c,to:h.toArr,cc:h.ccArr,bcc:h.bccArr,fromEmailAddress:d,contentType:"html",content:p,isForward:"forward"==i},m&&u,e,function(){s&&r(),"function"==typeof t&&t()})}}},{key:"sendAndClose",value:function(){var e=this.props,t=e.isDraftThread,a=e.closeTicket,n=e.haveEditPermission;t?this.sendDraft(function(){n&&a()}):this.sendReply(!0,function(){n&&a()})}},{key:"sendCusomChannelReply",value:function(){var e=this.props,t=e.editorId,a=e.sendReply,n=(e.revertIsEditorChanged,e.isEditorChanged,e.channelInfo),o=this.state.attachmentIds,i=editor[t].getContent(),r=(this.getEmailObj(),"html"),s=n.code;n.replyConfig.contentTypes.includes("text/html")||(r="plaintext"),a({content:i,channel:s,contentType:r,attachmentIds:o})}},{key:"searchContact",value:function(e,t){var a=this;this.setState({searchMode:e}),this.props.searchContact(t).then(function(e){e.data.list.length?a.setState({searchData:e.data.list}):a.setState({searchData:"noData"})})}},{key:"closeSearchPopup",value:function(){this.setState({searchMode:"",searchData:[]})}},{key:"hideRecipients",value:function(){this.setState({isRecipientsVisible:!1})}},{key:"blurCallback",value:function(){this.setState({isEditorFocus:!1})}},{key:"editorFocus",value:function(){var e=this.state.toAddress,t=void 0===e?[]:e;this.setState({isTemplateOpen:!1,isSnippetActionOpen:!1}),t.length?this.setState({isRecipientsVisible:!0}):this.setState({isRecipientsVisible:!1}),this.setState({isEditorFocus:!0})}},{key:"editorCallback",value:function(e){var t=this,a=this.props,n=a.ticketId,o=a.publishUserAction,i=(a.editorId,a.getSnippetList),r=(a.ticket,a.isPeekView,a.isCustomChannel),s=a.channelInfo;r&&(s.replyConfig.contentTypes.includes("text/html")||e.toolbardiv.querySelectorAll(".KB_Editor_Richtext,.ze_plain")[0].remove());var l=this.state.toAddress;(void 0===l?[]:l).length?this.setState({isRecipientsVisible:!0}):this.setState({isRecipientsVisible:!1}),o(n,"reply",WebMessanger.getRawSid&&WebMessanger.getRawSid()),i(),this.bindKeyDown();var c=document.getElementsByClassName("TemplateIcon")[0],d=document.getElementsByClassName("SnippetIcon")[0];c.addEventListener("mouseup",function(e){e.stopPropagation(),t.setState({isTemplateOpen:!0,isSnippetActionOpen:!1})}),d.addEventListener("mouseup",function(e){e.stopPropagation(),t.setState({isSnippetActionOpen:!0,isTemplateOpen:!1})})}},{key:"bindKeyDown",value:function(){var e=this,t=this.props.editorId,a=editor[t];a.doc.onkeydown=function(t){var n=t.keyCode,o=t.shiftKey,i=t.altKey,r=t.ctrlKey,s=t.metaKey;if(9===n){t.preventDefault(),t.stopPropagation();for(var l=e.props,c=l.snippetData,d=l.snippets,m=l.ticket,u=l.contact,p=l.account,h=l.agent,f=c.snippetIds,g=[],v=0;v<f.length;v++){d[f[v]]&&g.push(d[f[v]])}var _=Object(ze.b)(a._getSelection(),a.doc,a,g).content;_=Object(ze.f)(_,m,u,p,h),a.insertHTML(_)}if(!(o||i||r||s||9==n||20==n||33==n||34==n||37==n||38==n||39==n||40==n)){e.setState({contentModified:!0},function(){e.createDraftTimer()});var C=e.props,b=C.isEditorChanged,E=C.setIsEditorChanged;!b&&E()}}}},{key:"createDraftTimer",value:function(){var e=this;setTimeout(function(){e.state.contentModified&&(e.state.isDraft?e.updateDraft():e.saveDraft(),e.setState({contentModified:!1}))},this.draftTimeLimit)}},{key:"togglePrivateSwitch",value:function(){var e=this;this.setState(function(e){return{isPrivateButtonEnable:!e.isPrivateButtonEnable}},function(){e.checkIsPrivateThread()})}},{key:"insertEmailTemplateData",value:function(e){var t=this,a=this.props,n=a.getTemplateContent,o=(a.editorId,a.ticketId),i=a.isEditorChanged,r=a.setIsEditorChanged;n(e,o).then(function(e){var a=e.data.res.body;new RegExp("<(\"[^\"]*\"|'[^']*'|[^'\">])*>").test(a)||(a=a.replace(/\n/g,"<br/>")),Object(ze.c)(t.props.editorId,a),t.setState({contentModified:!0},function(){t.createDraftTimer()}),!i&&r(),t.setState({isTemplateOpen:!1})})}},{key:"openSnippet",value:function(e){this.setState({isSnippetActionOpen:!1});var t=this.props,a=t.openSnippet;a(e,t.editorId)}},{key:"constructReplyHeader",value:function(){var e=this.props,t=e.replyThread,a=e.replyMode,n=e.ticket,o=e.ticketId,i=e.editorId,r=e.myInfo,s=e.isCustomChannel,l=t.author,c=t.to,d=t.cc,m=t.from,u=Z.f.userDateFormat(new Date(t.createdTime),{},"lateby","left",!1,function(){return"DDD, DD MMM YYYY HH:mm:ss"}),p=-Ke.a[r.timeZone];p=((p=parseInt(p))<0?"+":"-")+Object(Ue.g)(parseInt(Math.abs(p/60)),2)+Object(Ue.g)(Math.abs(p%60),2);var h="";if(o!=i){var f=s?m:'"'+l.name+'" < '+l.email+" > ";h="forward"==a?"<div>\n          <div>============ "+Z.f.getI18NValue("support.mail.header.forwarded.message")+" ============<br></div>\n          <div>"+Z.f.getI18NValue("support.request.from.emailid")+":  "+Object(K.k)(f)+"<br></div>\n          <div>"+Z.f.getI18NValue("crm.label.to.email")+": "+Object(K.k)(c)+"<br></div>\n          <div>"+Z.f.getI18NValue("crm.label.cc.email")+": "+Object(K.k)(d)+"<br></div>\n          <div>"+Z.f.getI18NValue("crm.events.date")+": "+u+" "+p+" <br></div>\n          <div>"+Z.f.getI18NValue("crm.label.subject")+": "+Object(K.k)(n.subject)+"</div>\n          <div>============ "+Z.f.getI18NValue("support.mail.header.forwarded.message")+" ============<br></div>\n        </div><br>":"<div>---- "+Z.f.getI18NValue("support.on")+" "+u+" "+p+" <b> "+Object(K.k)(f)+" </b> "+Z.f.getI18NValue("suppot.mail.header.wrote")+" ---- <br></div><br>"}return h}},{key:"deleteDraftConfirmation",value:function(){this.setState({alertMode:"deleteDraft"})}},{key:"deleteDraft",value:function(){this.props.deleteDraft(),this.closeAlert()}},{key:"closeAlert",value:function(){this.setState({alertMode:null})}},{key:"render",value:function(){var e=this.props,t=e.editorId,a=e.replyContent,n=e.replyThread,o=e.replyMode,i=e.orgName,r=e.orgId,s=e.showAttachmentViewer,l=e.closeEdtior,c=e.openEditor,d=e.signatureObj,m=void 0===d?{}:d,u=e.linkHolder,p=e.solutionContent,h=e.saveDraft,f=e.updateDraft,g=e.isDraftThread,v=e.sendReply,_=e.sendDraft,C=e.replyingUsers,E=e.agents,y=e.ticketId,I=e.isPeekView,A=e.haveMailSendPermission,T=e.channelRelatedInfo,w=e.mailConfigurations,x=e.myInfo,P=e.isStatusLocked,B=e.havePrivateThreadConfig,L=e.isFromBlueprint,V=e.isCloudAttchOpen,R=e.haveForWardPermissionOnly,M=e.isSharedTicket,j=e.uploadAttach,z=e.fromAddress,U=e.isCustomChannel,H=e.channelInfo,W=e.changeForumStatus,Z=e.showMessage,q=e.deptId,G=this.state,$=G.newAttachments,Y=G.oldAttachments,J=G.draftText,Q=G.toAddress,X=G.ccAddress,ee=G.bccAddress,te=G.searchMode,ne=G.searchData,oe=G.isRecipientsVisible,ie=G.isPrivateThread,re=G.haveVisibilityChangePer,se=G.isPrivateButtonEnable,le=G.inValideArr,ce=G.isTemplateOpen,de=G.isSnippetActionOpen,me=G.isCLoudOpen,ue=G.chageEditorContent,pe=G.isEditorFocus,he=G.isFromAddressFetching,fe=G.isToEmpty,ge=G.alertMode,_e=n&&"DRAFT"==n.status,Ce="forum"==o&&!T.isTopicDeleted,be=H.replyConfig,Ee=H.appName,ye=!0,Ae=!0,ke=void 0;if(U){be.contentTypes;var Se=be.includeQuotedMessage,Te=be.acceptsAttachments;be.contentTypes.includes("text/html")||(ke="plaintext"),Ae=Se,ye=Te}var xe=a;if(""!=xe&&"<html><body><div></div></body></html>"!=xe&&!_e){"TWILIO"==n.channel&&Object(K.G)(n.content)&&(xe=k.a.renderToStaticMarkup(b.a.createElement(we.a,{thread:n})));var De=this.constructReplyHeader();xe=Ae?'<br><blockquote style="border-left: 1px dotted #e5e5e5;margin-left:5px;padding-left: 5px;">'+De+"<div>"+xe+"</div></blockquote>":""}return Ce?xe="":(_e||(m.isActive&&m.signature&&!_e&&(xe="<br>"+m.signature+xe),u&&"forward"!=o&&Ae&&(xe="<div><br></div><div><br></div>"+u+"<div><br></div>"+xe+"<div><br></div>")),"string"==typeof p&&(xe=p+xe)),b.a.createElement(S.Container,null,b.a.createElement(O,{isRender:!1,isSymbol:!0}),b.a.createElement(D,{isRender:!1,isSymbol:!0}),b.a.createElement(F,{isRender:!1,isSymbol:!0}),Ce?null:b.a.createElement(S.Box,null,b.a.createElement(ae,{mode:o,saveDraft:this.saveDraft,updateDraft:this.updateDraft,toAddress:Q,bccAddress:ee,ccAddress:X,isDraft:_e,draftText:J,addEmail:this.addEmail,changeEmail:this.changeEmail,removeEmail:this.removeEmail,fromEmailAddress:z,isFromAddressFetching:he,changeFromEmailAddress:this.changeFromEmailAddress,deleteDraft:this.deleteDraftConfirmation,searchContact:this.searchContact,openEditor:c,threadId:t,content:a,thread:n,searchMode:te,searchData:ne,orgName:i,closeSearchPopup:this.closeSearchPopup,isRecipientsVisible:oe,hideRecipients:this.hideRecipients,inValideArr:le,isPeekView:I,getFromEmailAddress:this.getFromEmailAddress,openConfigurePage:function(){},haveMailSendPermission:A,mailConfigurations:w,myInfo:x,isFromBlueprint:L,haveForWardPermissionOnly:R,isEditorFocus:pe,isToEmpty:fe,isCustomChannel:U})),ce||de?b.a.createElement(S.Box,null,ce?b.a.createElement(at,{deptId:q,insertEmailTemplateData:this.insertEmailTemplateData}):de?b.a.createElement(Ne,{openSnippet:this.openSnippet}):null):null,b.a.createElement(S.Box,{flexible:!0,className:"replyArea"},b.a.createElement(N.a,{id:t,value:xe,onFocus:this.editorFocus,editorCallback:this.editorCallback,editorMode:"TicketReply",onUpload:j,chageEditorContent:ue,blurCallback:this.blurCallback,mode:ke})),b.a.createElement(S.Box,null,Ce?L?null:b.a.createElement(Ie,{ticketId:y,changeForumStatus:W,showMessage:Z,closeEdtior:l,sendDraft:_,editorId:t,saveDraft:h,deleteDraft:this.deleteDraftConfirmation,updateDraft:f,isDraft:g,sendReply:v,channelRelatedInfo:T,haveMailSendPermission:A}):b.a.createElement(ve,{isFromBlueprint:L,closeEdtior:l,uploadAttach:this.uploadAttach,deleleUpload:this.deleleUpload,showAttachmentViewer:s,openCloudAttach:this.openCloudAttach,closeCloudAttach:this.closeCloudAttach,orgId:r,newAttachments:$,oldAttachments:Y,removeAttachment:this.removeAttachment,sendDraft:this.sendDraft,isDraft:_e,sendReply:this.sendReply,sendAndClose:this.sendAndClose,isPrivateThread:ie,haveVisibilityChangePer:re,isPrivateButtonEnable:se,togglePrivateSwitch:this.togglePrivateSwitch,isPeekView:I,haveMailSendPermission:A,isStatusLocked:P,havePrivateThreadConfig:B,sendForReview:this.sendForReview,isCloudAttchOpen:V&&me,CloudAttachmentIframe:We.s,addCloudAttch:this.addCloudAttch,haveForWardPermissionOnly:R,isSharedTicket:M,isCustomChannel:U,acceptsAttachments:ye,appName:Ee,deleteDraft:this.deleteDraftConfirmation,sendCusomChannelReply:this.sendCusomChannelReply})),"deleteDraft"==ge?b.a.createElement(Oe.a,{closeAlert:this.closeAlert,deleteDraft:this.deleteDraft}):"collisionReply"==ge&&C.length?b.a.createElement(He.a,{agents:E,replyingUsers:C,replyConfirm:this.closeAlert,closeAlert:l,isFromReplyEditor:!0}):null)}}]),t}(C.Component);nt.defaultProps={isFromBlueprint:!1},nt.propTypes=(tt={account:y.a.object,agent:y.a.object,agents:y.a.object,changeForumStatus:y.a.func},o()(tt,"changeForumStatus",y.a.func),o()(tt,"channelInfo",y.a.object),o()(tt,"channelRelatedInfo",y.a.object),o()(tt,"closeEdtior",y.a.func),o()(tt,"closeTicket",y.a.func),o()(tt,"contact",y.a.object),o()(tt,"contactEmail",y.a.string),o()(tt,"contacts",y.a.object),o()(tt,"deleleUpload",y.a.func),o()(tt,"deleteDraft",y.a.func),o()(tt,"deptId",y.a.string),o()(tt,"downloadAttachment",y.a.func),o()(tt,"editorId",y.a.string),o()(tt,"fromAddress",y.a.array),o()(tt,"getFromEmailAddress",y.a.func),o()(tt,"getSnippetList",y.a.func),o()(tt,"getTemplateContent",y.a.func),o()(tt,"haveEditPermission",y.a.bool),o()(tt,"haveForWardPermissionOnly",y.a.bool),o()(tt,"haveMailSendPermission",y.a.bool),o()(tt,"havePrivateThreadConfig",y.a.bool),o()(tt,"isCloudAttchOpen",y.a.bool),o()(tt,"isCustomChannel",y.a.bool),o()(tt,"isDraft",y.a.bool),o()(tt,"isDraftThread",y.a.bool),o()(tt,"isEditorChanged",y.a.func),o()(tt,"isFromBlueprint",y.a.bool),o()(tt,"isPeekView",y.a.bool),o()(tt,"isSharedTicket",y.a.bool),o()(tt,"isStatusLocked",y.a.bool),o()(tt,"linkHolder",y.a.string),o()(tt,"mailConfigurations",y.a.object),o()(tt,"moduleMeta",y.a.object),o()(tt,"myInfo",y.a.object),o()(tt,"openCloudAttach",y.a.func),o()(tt,"openEditor",y.a.func),o()(tt,"openSnippet",y.a.func),o()(tt,"orgId",y.a.number),o()(tt,"orgName",y.a.string),o()(tt,"publishUserAction",y.a.func),o()(tt,"replyMode",y.a.string),o()(tt,"replyThread",y.a.object),o()(tt,"replyingUsers",y.a.array),o()(tt,"revertIsEditorChanged",y.a.func),o()(tt,"saveDraft",y.a.func),o()(tt,"searchContact",y.a.func),o()(tt,"secondaryContacts",y.a.array),o()(tt,"sendDraft",y.a.func),o()(tt,"sendForReview",y.a.func),o()(tt,"sendReply",y.a.func),o()(tt,"setIsEditorChanged",y.a.func),o()(tt,"setReplyData",y.a.func),o()(tt,"showAttachmentViewer",y.a.func),o()(tt,"showMessage",y.a.func),o()(tt,"signatureObj",y.a.object),o()(tt,"snippetData",y.a.object),o()(tt,"snippets",y.a.object),o()(tt,"solutionAttachments",y.a.array),o()(tt,"solutionContent",y.a.string),o()(tt,"ticket",y.a.object),o()(tt,"ticketId",y.a.string),o()(tt,"updateDraft",y.a.func),o()(tt,"uploadAttach",y.a.func),o()(tt,"uploadCloudAttachment",y.a.func),tt);t.a=Object(I.connect)(function(e,t){var a=e.module.ticket[t.ticketId],n=e.module.contact[a.contactId],o=e.myInfo.id,i=e.ticketUIState.isEditorChanged,r=void 0!==i&&i,s=a.departmentId,l=e.departmentSpecificState[s],c=l&&l.fromEmailAddress.length?l.fromEmailAddress:e.departmentSpecificState.allDepartment?e.departmentSpecificState.allDepartment.fromEmailAddress:[],d=e.myPreferences,m=d.signatureObj,u=d.linkHolder,p=[],h=(e.collidingData[t.ticketId]||{}).collidingUsers,f=void 0===h?[]:h;if(f.length)for(var g=0;g<f.length;g++)"replying"==f[g].userAction&&f[g].agentId!=o&&p.push(f[g]);return{orgName:e.routing.paramMap.orgName,orgId:Object(De.N)(e),signatureObj:m,linkHolder:u,collidingData:e.collidingData[t.ticketId],agents:e.module.agent,snippetData:e.snippetData,snippets:e.module.snippet,contact:n,agent:e.module.agent[o],ticket:a,account:e.module.account[n.accountId],isEditorChanged:r,deptId:s,fromAddress:c,mailConfigurations:l.mailConfigurations,havePrivateThreadConfig:l.mailConfigurations.privateThreadConfig,myInfo:e.myInfo,isCloudAttchOpen:e.isCloudAttchOpen,moduleMeta:e.moduleMeta,contacts:e.module.contact,secondaryContacts:a.secondaryContacts,replyingUsers:p}},{downloadAttachment:Pe.e,uploadAttach:Pe.k,deleleUpload:Pe.d,showAttachmentViewer:Pe.i,openCloudAttach:Pe.h,getFromEmailAddress:Fe.b,searchContact:Fe.f,publishUserAction:Re.h,openSnippet:Me.f,getSnippetList:Me.d,getTemplateContent:Be.b,setIsEditorChanged:Le.t,revertIsEditorChanged:Le.r,showMessage:Ve.Q,uploadCloudAttachment:Pe.l,changeForumStatus:Le.a})(nt)},1371:function(e,t,a){e.exports={threadList:"ThreadsList-module__threadList common-module__cboth",attachCont:"ThreadsList-module__attachCont",cleft:"ThreadsList-module__cleft common-module__posrel",draftText:"ThreadsList-module__draftText common-module__dotted common-module__oflow common-module__ellipsis",poiter:"ThreadsList-module__poiter",bgWhite:"ThreadsList-module__bgWhite",otherChanell:"ThreadsList-module__otherChanell",more:"ThreadsList-module__more",keyWord:"ThreadsList-module__keyWord",attachmentCount:"ThreadsList-module__attachmentCount common-module__posab",cright:"ThreadsList-module__cright common-module__posrel",posrel:"ThreadsList-module__posrel common-module__posrel",tname:"ThreadsList-module__tname common-module__bold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis common-module__dinblk common-module__pointer common-module__ftsmooth",thrdate:"ThreadsList-module__thrdate common-module__dotted common-module__oflow common-module__ellipsis common-module__ftsmooth",showrec:"ThreadsList-module__showrec common-module__posrel",forum_status:"ThreadsList-module__forum_status common-module__semibold common-module__ftsmooth common-module__vtop common-module__ftsmooth",forum_txt:"ThreadsList-module__forum_txt common-module__dotted common-module__oflow common-module__ellipsis common-module__dinblk",attach_look:"ThreadsList-module__attach_look",attach_count:"ThreadsList-module__attach_count common-module__posab",mailicn:"ThreadsList-module__mailicn common-module__pointer",thrdPlain:"ThreadsList-module__thrdPlain",mr10:"ThreadsList-module__mr10",bestAns:"ThreadsList-module__bestAns",prithrlist:"ThreadsList-module__prithrlist common-module__flexgrow",recipientsCont:"ThreadsList-module__recipientsCont",recipientsHide:"ThreadsList-module__recipientsHide",jiraIcon:"ThreadsList-module__jiraIcon common-module__jira",rightMore:"ThreadsList-module__rightMore common-module__justifyFend",cntntOvrLd:"ThreadsList-module__cntntOvrLd",cntntOvrLdSpn:"ThreadsList-module__cntntOvrLdSpn",cntOvrLdLnk:"ThreadsList-module__cntOvrLdLnk",viaChannel:"ThreadsList-module__viaChannel",channelName:"ThreadsList-module__channelName"}},1372:function(e,t,a){e.exports={container:"SentimentAspects-module__container",posrel:"SentimentAspects-module__posrel",pop:"SentimentAspects-module__pop",header:"SentimentAspects-module__header common-module__bold common-module__ftsmooth",sentiment:"SentimentAspects-module__sentiment",f12:"SentimentAspects-module__f12",waterMark:"SentimentAspects-module__waterMark",botPositive:"SentimentAspects-module__botPositive SentimentAspects-module__sentiment",botNeutral:"SentimentAspects-module__botNeutral SentimentAspects-module__sentiment",botNegative:"SentimentAspects-module__botNegative SentimentAspects-module__sentiment"}},1373:function(e,t,a){e.exports={container:"KeyWords-module__container",posrel:"KeyWords-module__posrel",pop:"KeyWords-module__pop",header:"KeyWords-module__header common-module__semibold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis KeyWords-module__posrel",hashIcon:"KeyWords-module__hashIcon",tags:"KeyWords-module__tags",keyword:"KeyWords-module__keyword",content:"KeyWords-module__content"}},1374:function(e,t,a){e.exports={container:"RecipientsInfo-module__container common-module__curdefault common-module__w100",list:"RecipientsInfo-module__list",label:"RecipientsInfo-module__label common-module__textCaps",value:"RecipientsInfo-module__value common-module__wbreak"}},1530:function(e,t,a){"use strict";var n=a(23),o=a.n(n),i=a(12),r=a.n(i),s=a(9),l=a.n(s),c=a(10),d=a.n(c),m=a(13),u=a.n(m),p=a(14),h=a.n(p),f=a(0),g=a.n(f),v=a(1),_=a.n(v),C=a(1371),b=a.n(C),E=a(1053),y=a(30),I=a(8),A=a(960),k=a(6),S=a(3),N=a(459),T=a(1007),w=a(1372),O=a.n(w),x=a(72),D=a.n(x),P=a(80),F=a.n(P),B=function(e){function t(){return l()(this,t),u()(this,(t.__proto__||r()(t)).apply(this,arguments))}return h()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.sentiment,a=e.aspects,n=e.openPopupOnly,o=e.closePopupOnly,i=e.isPopupOpen,r=e.removeClose,s=Object(k.y)(t),l=s.icon,c=s.name;return g.a.createElement("div",{className:O.a.container,onMouseEnter:n,onMouseLeave:o,onClick:r},g.a.createElement(y.TicketsFontIcon,{name:l,size:"10"}),i?g.a.createElement(D.a,{isAnimate:!0,size:"mlarge",boxPosition:"bottomRight",isActive:!0,left:"-20",onClick:r},g.a.createElement("div",{className:O.a.pop},g.a.createElement("p",{className:O.a.header},I.f.getI18NValue("support.zia.sentiment.label")),g.a.createElement("p",{className:O.a[l]},c),a&&a.length?g.a.createElement(g.a.Fragment,null,g.a.createElement("p",{className:O.a.header},I.f.getI18NValue("support.zia.thread.sentiment.aspects")),g.a.createElement("p",{className:O.a.f12},a.join(", "),".")):null,g.a.createElement("span",{className:O.a.waterMark},g.a.createElement(y.TicketsFontIcon,{name:l,size:"50"})))):null)}}]),t}(g.a.Component);B.propTypes={aspects:_.a.array,closePopupOnly:_.a.func,isPopupOpen:_.a.bool,openPopupOnly:_.a.func,removeClose:_.a.func,sentiment:_.a.string};var L=F()(B),V=a(1373),R=a.n(V),M=function(e){function t(e){return l()(this,t),u()(this,(t.__proto__||r()(t)).call(this,e))}return h()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.keyWords,a=e.openPopupOnly,n=e.closePopupOnly,o=e.isPopupOpen,i=e.removeClose;return g.a.createElement("div",{className:R.a.container,onMouseEnter:a,onMouseLeave:n,onClick:i},g.a.createElement(y.TicketsFontIcon,{iconClass:R.a.hashIcon,name:"botHash",size:"13"}),o?g.a.createElement(D.a,{isAnimate:!0,size:"mlarge",boxPosition:"bottomRight",isActive:!0,left:"-20",onClick:i},g.a.createElement("div",{className:R.a.pop},g.a.createElement("div",{className:R.a.posrel},g.a.createElement("p",{className:R.a.header},I.f.getI18NValue("support.zia.thread.keyword.lable")),g.a.createElement("div",{className:R.a.content},t.map(function(e,t){return g.a.createElement("p",{className:R.a.keyword,key:t},e)}))))):null)}}]),t}(g.a.Component);M.propTypes={closePopupOnly:_.a.func,isPopupOpen:_.a.bool,keyWords:_.a.array,openPopupOnly:_.a.func,removeClose:_.a.func};var j=F()(M),z=a(1168),K=a(1374),U=a.n(K),H=a(16),W=function(e){function t(){return l()(this,t),u()(this,(t.__proto__||r()(t)).apply(this,arguments))}return h()(t,e),d()(t,[{key:"constructEmailList",value:function(e){for(var t=e.split(","),a=[],n=0;n<t.length;n++)a.push(g.a.createElement("span",{className:U.a.mr10,key:n},n==t.length-1?t[n]:t[n]+","));return a}},{key:"render",value:function(){var e=this.props,t=e.from,a=e.to,n=e.cc,o=e.bcc;return g.a.createElement("div",{className:U.a.container},g.a.createElement(H.Container,{alignBox:"row",className:U.a.list,isCover:!1},g.a.createElement(H.Box,{className:U.a.label},I.f.getI18NValue("label.request.from")),g.a.createElement(H.Box,{flexible:!0,className:U.a.value},t)),a?g.a.createElement(H.Container,{alignBox:"row",className:U.a.list},g.a.createElement(H.Box,{className:U.a.label},I.f.getI18NValue("label.request.to")),g.a.createElement(H.Box,{flexible:!0,className:U.a.value},this.constructEmailList(a))):null,n?g.a.createElement(H.Container,{alignBox:"row",className:U.a.list},g.a.createElement(H.Box,{className:U.a.label},I.f.getI18NValue("crm.label.cc.email")),g.a.createElement(H.Box,{flexible:!0,className:U.a.value},this.constructEmailList(n))):null,o?g.a.createElement("div",{className:U.a.list},g.a.createElement("span",{className:U.a.label},I.f.getI18NValue("crm.label.bcc.email")),g.a.createElement("span",{className:U.a.value},this.constructEmailList(o))):null)}}]),t}(f.Component),Z=W;W.propTypes={bcc:_.a.string,cc:_.a.string,from:_.a.string,to:_.a.string};var q=a(1081),G=a(1162),$=a(1280),Y=a(1021),J=function(e){function t(){return l()(this,t),u()(this,(t.__proto__||r()(t)).apply(this,arguments))}return h()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.splitTicket,a=e.moduleMeta,n=e.closeAlert;return g.a.createElement(Y.a,{isActive:!0,type:"splitTicket",title:I.f.getI18NValue("support.request.alert.split.ticket.header",[a.tickets.singularLabel]),message:I.f.getI18NValue("crm.confirm.split.request",[a.tickets.singularLabel]),submitText:I.f.getI18NValue("support.yes"),cancelText:I.f.getI18NValue("support.label.cancel"),onSubmitClick:t,onCancelClick:n})}}]),t}(f.Component),Q=J;J.propTypes={closeAlert:_.a.func,moduleMeta:_.a.object,splitTicket:_.a.func};var X=a(109),ee=function(e){function t(e){l()(this,t);var a=u()(this,(t.__proto__||r()(t)).call(this,e));return a.state={openedThreads:[a.props.latestThreadId],isRecipientsOpen:q.a.getItem("isRecipientsOpen"),recipientsOpenArr:[],recipientsCloseArr:[],openedTruncatedId:[]},a.openThread=a.openThread.bind(a),a.replyActions=a.replyActions.bind(a),a.constructMoreObj=a.constructMoreObj.bind(a),a.toggleRecipients=a.toggleRecipients.bind(a),a.onContainerCLick=a.onContainerCLick.bind(a),a.setContentRef=a.setContentRef.bind(a),a.openTruncatedContant=a.openTruncatedContant.bind(a),a.constructDirectionChanellObj=a.constructDirectionChanellObj.bind(a),a.deleteDraftConfirmation=a.deleteDraftConfirmation.bind(a),a.deleteDraft=a.deleteDraft.bind(a),a.deleteFailedThreadConfirmation=a.deleteFailedThreadConfirmation.bind(a),a.deleteFailedThread=a.deleteFailedThread.bind(a),a.splitTicketConfirmation=a.splitTicketConfirmation.bind(a),a.splitTicket=a.splitTicket.bind(a),a.closeAlert=a.closeAlert.bind(a),a}return h()(t,e),d()(t,[{key:"componentWillReceiveProps",value:function(e){e.latestThreadId!=this.props.latestThreadId&&this.setState({openedThreads:[e.latestThreadId]})}},{key:"openThread",value:function(e,t,a,n){var o=this;"true"==a&&n.stopPropagation();var i=this.state.openedThreads.indexOf(e),r=!1;if(-1==i)t?(this.state.openedThreads.push(e),"true"==a&&(r=!0)):this.props.getThread(e,function(){o.state.openedThreads.push(e),o.setState({openedThreads:o.state.openedThreads},function(){"true"==a&&setTimeout(function(){Object(k.l)(o.props.scrollCont,o.attachCont.offsetTop-20)},100)})});else{if("true"==a)return void Object(k.l)(this.props.scrollCont,this.attachCont.offsetTop-20);this.state.openedThreads.splice(i,1)}this.setState({openedThreads:this.state.openedThreads},function(){setTimeout(function(){r&&Object(k.l)(o.props.scrollCont,o.attachCont.offsetTop-20)},100)})}},{key:"openTruncatedContant",value:function(e){var t=this,a=e.id,n=e.fullContentURL;this.props.getFullContent(n,a).then(function(){t.setState({openedTruncatedId:[].concat(o()(t.state.openedTruncatedId),[a])})})}},{key:"replyActions",value:function(e,t,a,n){var o=this.props,i=o.orgName,r=o.sanitizedDeptName,s=o.moduleMeta,l=o.ticketId,c=o.openJiraForm,d=o.openBugTrackerForm,m=o.bugName,u="";if(n==I.f.getI18NValue("crm.button.reply"))u="FACEBOOK_DM"==a.channel?"facebookDm":"reply";else if(n==I.f.getI18NValue("support.common.request.mail.replyall"))u="replyall";else if(n==I.f.getI18NValue("support.label.thread.forward.title"))u="forward";else if(n==I.f.getI18NValue("crm.post.reply"))"FACEBOOK"==a.channel?u="facebook":"FORUMS"==a.channel?u="forum":"TWITTER"==a.channel?u="twitter":"TWITTER_DM"==a.channel&&(u="twitterDm");else if(n==I.f.getI18NValue("support.common.request.mail.edit.draft"))u="FACEBOOK"==a.channel?"facebook":"FORUMS"==a.channel?"forum":"editDraft";else{if(n==I.f.getI18NValue("support.common.request.mail.discard.draft")){var p=a.actions[0].href;return void this.deleteDraftConfirmation(p,e)}if(n==I.f.getI18NValue("support.label.thread.delete")){var h=a.actions[0].href;return void this.deleteFailedThreadConfirmation(h,e)}if(n==I.f.getI18NValue("support.split.as.new",s.tickets.singularLabel))return void this.splitTicketConfirmation(e);if(n==I.f.getI18NValue("support.integ.jira.file.a.bug"))return void c(a.isDescriptionThread?null:e);if(n==I.f.getI18NValue("support.bug.integ.file",[m]))return void d({type:"bugTracker",ticketId:l,bugName:m,id:a.isDescriptionThread?null:e,threadId:e});if(n==I.f.getI18NValue("support.label.print"))return void window.open(S.s+"/"+i+"/"+r+"/"+s.tickets.sanitizedName+"/details/"+l+"/thread/"+e+"?action=print");if(n==I.f.getI18NValue("support.show.original"))return void window.open(S.s+"/"+i+"/"+r+"/"+s.tickets.sanitizedName+"/details/"+l+"/thread/"+e+"?action=showOriginal","winName","width=750,height=700");if(n==I.f.getI18NValue("support.mail.label.resend")){var f=a.actions[1].href;return void this.props.resendFailedThread(f,e)}if(n==I.f.getI18NValue("support.common.request.mail.send.draft")){var g=a.to.split(","),v=a.bcc.split(","),_=a.cc.split(","),C=-1==g.concat(_,v).indexOf(this.props.contactEmail);return void this.props.sendDraft(C,function(){},a)}}this.props.openEditor(e,t,a,u)}},{key:"deleteDraftConfirmation",value:function(e,t){this.setState({deleteUrl:e,deleteId:t,alertMode:"deleteDraft"})}},{key:"deleteDraft",value:function(){var e=this.state,t=e.deleteUrl,a=e.deleteId;this.props.deleteDraft(t,a),this.closeAlert()}},{key:"deleteFailedThreadConfirmation",value:function(e,t){this.setState({deleteUrl:e,deleteId:t,alertMode:"deleteThread"})}},{key:"deleteFailedThread",value:function(){var e=this.state,t=e.deleteUrl,a=e.deleteId;this.props.deleteFailedThread(t,a),this.closeAlert()}},{key:"splitTicketConfirmation",value:function(e){this.setState({splitThreadId:e,alertMode:"splitTicket"})}},{key:"splitTicket",value:function(){var e=this.state.splitThreadId;this.props.splitTicket(e),this.closeAlert()}},{key:"closeAlert",value:function(){this.setState({deleteId:null,deleteUrl:null,alertMode:null,splitThreadId:null})}},{key:"constructMoreObj",value:function(e){var t=this.props,a=t.haveMailSendPermission,n=t.haveJiraBugCreatePer,o=t.haveBugCreatePer,i=t.bugName,r=t.haveForWardPermissionOnly,s=t.isReadOnly,l=t.isSpam,c=t.threadCount,d="in"==e.direction&&!e.isDescriptionThread&&!r&&1!=parseInt(c),m=!a||s||l?[]:[{name:I.f.getI18NValue("crm.button.reply"),iconName:"reply",size:"12"},{name:I.f.getI18NValue("support.common.request.mail.replyall"),iconName:"replyall",size:"12"},{name:I.f.getI18NValue("support.label.thread.forward.title"),iconName:"forward",size:"12"}];if(m=r?[m[2]]:m,"DRAFT"!=e.status||l?"FAILED"!=e.status||l?"FACEBOOK"!=e.channel&&"FACEBOOK_DM"!=e.channel&&"TWITTER"!=e.channel&&"TWITTER_DM"!=e.channel&&"FORUMS"!=e.channel||l||(m=!a||r||s?[]:[{name:"FACEBOOK_DM"==e.channel?I.f.getI18NValue("crm.button.reply"):I.f.getI18NValue("crm.post.reply"),iconName:"reply",size:"12"}]):m=a&&!s?[{name:I.f.getI18NValue("support.mail.label.resend"),iconName:"zdresend",size:"15"},{name:I.f.getI18NValue("support.label.thread.delete"),iconName:"close1",size:"15"}]:[]:(m=a&&!s?[{name:I.f.getI18NValue("support.common.request.mail.edit.draft"),iconName:"editdDraft",size:"16"},{name:I.f.getI18NValue("support.common.request.mail.discard.draft"),iconName:"draftDelete",size:"16"},{name:I.f.getI18NValue("support.common.request.mail.send.draft"),iconName:"replyDraft",size:"16"}]:[],m=r?[m[0]]:m),"FAILED"!=e.status){var u=[{name:I.f.getI18NValue("support.show.original"),iconName:"originalView",size:"16"},{name:I.f.getI18NValue("support.label.print"),iconName:"printing2",size:"16"}];!d||s||l||u.splice(0,0,{name:I.f.getI18NValue("support.split.as.new",this.props.moduleMeta.tickets.singularLabel),iconName:"splitNew",size:"16"}),!n||"DRAFT"==e.status||s||l||u.splice(d?1:0,0,{name:I.f.getI18NValue("support.integ.jira.file.a.bug"),iconClass:b.a.jiraIcon}),!o||"DRAFT"==e.status||s||l||u.splice(d?1:0,0,{name:I.f.getI18NValue("support.bug.integ.file",[i]),iconName:"buginfo",size:"14"}),m=m.concat(u)}return m}},{key:"toggleRecipients",value:function(e){var t=this.state,a=t.recipientsCloseArr,n=t.recipientsOpenArr;t.isRecipientsOpen?a.includes(e)?this.setState({recipientsCloseArr:this.state.recipientsCloseArr.filter(function(t){return t!==e})}):this.setState({recipientsCloseArr:[].concat(o()(this.state.recipientsCloseArr),[e])}):n.includes(e)?this.setState({recipientsOpenArr:this.state.recipientsOpenArr.filter(function(t){return t!==e})}):this.setState({recipientsOpenArr:[].concat(o()(this.state.recipientsOpenArr),[e])}),q.a.getItem("isRecipientsOpen")?q.a.setItem("isRecipientsOpen",!1):q.a.setItem("isRecipientsOpen",!0)}},{key:"setContentRef",value:function(e){this.contentRef=e}},{key:"onContainerCLick",value:function(e){if("IMG"==e.target.tagName){for(var t=[],a=0,n=this.contentRef.querySelectorAll("img"),o=0;o<n.length;o++)t.push({viewUrl:n[o].src,index:o}),e.target==n[o]&&(a=o);this.props.showAttachmentViewer({previewData:t,selectedIndex:a})}}},{key:"constructDirectionChanellObj",value:function(e){var t=e.channel,a=e.direction,n=e.status,o=e.isForward,i="chEmailOut",r=I.f.getI18NValue("support.label.thread.outgoing.email.title");return"FEEDBACK"==t?i="chFeedback":"DRAFT"==n?(i="chEmailDft",r=I.f.getI18NValue("support.label.thread.support.draft.title")):o?(i="chEmailFwd",r=I.f.getI18NValue("support.common.request.mail.forward")):"in"==a&&(i="chEmailIn",r=I.f.getI18NValue("support.label.thread.incoming.email.title")),{iconName:i,title:r}}},{key:"render",value:function(){var e=this,t=this.props,a=t.threads,n=t.orgName,o=t.showAttachmentViewer,i=t.widgets,r=t.selectedWidgetId,s=t.onWidgetScroll,l=t.onWidgetSelect,c=t.ticketChannel,d=t.moduleMeta,m=t.customChannelsInfo,u=this.state,p=u.openedThreads,h=u.isRecipientsOpen,f=u.recipientsOpenArr,v=u.recipientsCloseArr,_=u.openedTruncatedId,C=u.alertMode,S=g.a.createElement(y.TicketsFontIcon,{name:"more",size:"20"});return g.a.createElement("div",null,a.map(function(t){var a=t.id,d=t.author,u=t.createdTime,C=t.direction,w=t.status,O=t.channel,x=t.isForward,D=t.content,P=t.visibility,F=t.channelRelatedInfo,B=t.hasAttach,V=t.attachmentCount,R=t.from,M=t.to,K=t.cc,U=t.bcc,W=t.summary,q=t.attachments,G=t.sentiment,$=t.aspects,Y=t.keyWords,J=t.isContentTruncated,Q=t.isDescriptionThread,ee=t.source,te=ee&&"INTEGRATION"==ee.type;te||(te=m[O]&&"INTEGRATION"==m[O].type,ee=m[O]),u=I.f.userDateFormat(new Date(u),{},"lateby","left",!1,function(){return"DD MMM YYYY hh:mm A"}),C="DRAFT"==w?"dft":"FAILED"==w?"failed":"FEEDBACK"==O?"feedback":x?"fwd":C;var ae=Object(A.b)(C),ne=-1!=p.indexOf(a),oe=-1==_.indexOf(a)&&J,ie='"'+d.name+'" < '+d.email+" > ",re=h;"Forums"==c?re=!1:v.includes(a)?re=!1:f.includes(a)&&(re=!0);var se=c.toLowerCase()!=O.toLowerCase()&&!Q&&"OFFLINE_CHAT"!=O&&"ONLINE_CHAT"!=O,le=e.constructDirectionChanellObj(t),ce=ee||{},de=ce.permalink,me=ce.appName;return g.a.createElement("div",{className:(ne&&b.a.bgWhite)+" "+b.a.threadList,key:a,id:a,"data-id":"ThreadDiscrip"},g.a.createElement("div",{className:b.a.cleft},g.a.createElement(E.a,{src:d.photoURL,name:d.name||"d",size:"xmedium",iconName:ae.icon,borderPalette:ae.bordercolor,iconColor:ae.color,iconSize:ae.size})),g.a.createElement("div",{className:b.a.cright,onClick:e.onContainerCLick,ref:e.setContentRef},g.a.createElement("div",{className:b.a.poiter},g.a.createElement(H.Container,{alignBox:"row",align:"vertical",isCover:!1,onClick:e.openThread.bind(e,a,D)},g.a.createElement(H.Box,null,g.a.createElement(H.Container,{alignBox:"row",align:"vertical"},g.a.createElement(H.Box,{className:b.a.tname,"data-title":d.name},d.name),G?g.a.createElement(H.Box,null,g.a.createElement(L,{sentiment:G,aspects:$})):null,g.a.createElement(H.Box,{className:b.a.prithrlist},g.a.createElement(H.Container,{alignBox:"row",align:"vertical"},"DRAFT"==w?g.a.createElement("span",{className:b.a.draftText},I.f.getI18NValue("support.history.operation.label.draft")," ","@"):"private"==P?g.a.createElement("span",{className:b.a.thrdate},I.f.getI18NValue("support.department.type.internal")," ","."):F&&F.isDeleted?g.a.createElement("span",{className:b.a.thrdate,"data-title":I.f.getI18NValue("support.forums.deletedinforums")},I.f.getI18NValue("support.community.tickettopic.responsedeleted")," ","."):null,g.a.createElement("span",{className:b.a.thrdate},u),F&&F.isBestSolution?g.a.createElement("span",{className:b.a.thrdate+" "+b.a.bestAns},I.f.getI18NValue("support.badgification.badge.creditname.postbestanswer")):null,te?g.a.createElement("span",{className:b.a.viaChannel,"data-title":O},I.f.getI18NValue("support.common.request.channel.integ.via")," ",de?g.a.createElement(X.a,{className:b.a.channelName,href:de,target:"_blank"},me):me):null,"Forums"!=c?g.a.createElement("span",{className:b.a.recipientsCont+" "+(re?"":b.a.recipientsHide),onClick:function(t){t.stopPropagation(),e.toggleRecipients(a)},"data-title":re?I.f.getI18NValue("crm.button.hide.recipients"):I.f.getI18NValue("crm.button.show.recipients")},g.a.createElement(y.TopbandFontIcon,{name:"down",size:"5"})):null)),Y?g.a.createElement(H.Box,{className:b.a.keyWord},g.a.createElement(j,{keyWords:Y})):null)),g.a.createElement(H.Box,{flexible:!0},g.a.createElement(H.Container,{className:b.a.rightMore,alignBox:"row",align:"vertical"},se?g.a.createElement(H.Box,{className:b.a.otherChanell},g.a.createElement(y.TicketsFontIcon,{name:le.iconName,size:"12",title:le.title})):null,B?g.a.createElement(H.Box,{className:" "+b.a.posrel,onClick:e.openThread.bind(e,a,D,"true"),"data-title":I.f.getI18NValue("support.attachments")},g.a.createElement("span",{className:b.a.mailicn},g.a.createElement(y.TopbandFontIcon,{name:"attachment5",size:"11"})),g.a.createElement("span",{className:b.a.attachmentCount},V)):null,g.a.createElement(H.Box,{className:b.a.more},g.a.createElement(T.a,{objValues:e.constructMoreObj(t),onSelect:function(n){e.replyActions(a,D,t,n)},moreIcon:S,Icnsize:"16",listStyle:"alpha",widgets:i,selectedWidgetId:r,onWidgetScroll:s,onWidgetSelect:l}))))),re?g.a.createElement(Z,{from:te?R:ie,to:M,cc:K,bcc:U}):null,g.a.createElement("div",{onClick:e.openThread.bind(e,a,D)},!ne&&"TWILIO"!=O&&"TELEPHONY"!=O&&g.a.createElement("p",{className:b.a.thrdPlain,dangerouslySetInnerHTML:{__html:W}}))),ne&&("TWILIO"!=O&&"TELEPHONY"!=O||!Object(k.G)(D)?g.a.createElement("span",null,g.a.createElement("p",{className:b.a.thrdPlain,dangerouslySetInnerHTML:{__html:D},onMouseOver:function(e){e.stopPropagation()}}),oe?g.a.createElement("div",{className:b.a.cntntOvrLd},g.a.createElement("span",{className:b.a.cntntOvrLdSpn},"["," ",I.f.getI18NValue("support.label.threads.truncated")," ","]"),g.a.createElement("span",{className:b.a.cntOvrLdLnk,onClick:e.openTruncatedContant.bind(e,t)},I.f.getI18NValue("support.label.threads.showfullcont"))):null):g.a.createElement(z.a,{thread:t}))),q&&q.length&&ne?g.a.createElement("div",{className:b.a.attachCont,ref:function(t){e.attachCont=t}},g.a.createElement(N.a,{data:q,downloadAttachment:e.props.downloadAttachment,showAttachmentViewer:o,orgName:n,dataId:"attachList_"+a})):null)}),"deleteDraft"==C?g.a.createElement(G.a,{closeAlert:this.closeAlert,deleteDraft:this.deleteDraft}):"deleteThread"==C?g.a.createElement($.a,{closeAlert:this.closeAlert,deleteThread:this.deleteFailedThread}):"splitTicket"==C?g.a.createElement(Q,{closeAlert:this.closeAlert,splitTicket:this.splitTicket,moduleMeta:d}):null)}}]),t}(g.a.Component);t.a=ee;ee.propTypes={bugName:_.a.string,contactEmail:_.a.string,deleteDraft:_.a.func,deleteFailedThread:_.a.func,downloadAttachment:_.a.func,getFullContent:_.a.func,getThread:_.a.func,haveBugCreatePer:_.a.bool,haveForWardPermissionOnly:_.a.bool,haveJiraBugCreatePer:_.a.bool,haveMailSendPermission:_.a.bool,isReadOnly:_.a.bool,isSpam:_.a.bool,latestThreadId:_.a.string,moduleMeta:_.a.object,onWidgetScroll:_.a.func,onWidgetSelect:_.a.func,openBugTrackerForm:_.a.func,openEditor:_.a.func,openJiraForm:_.a.func,orgName:_.a.string,resendFailedThread:_.a.func,sanitizedDeptName:_.a.string,scrollCont:_.a.object,selectedWidgetId:_.a.string,sendDraft:_.a.func,showAttachmentViewer:_.a.func,splitTicket:_.a.func,threads:_.a.array,ticketChannel:_.a.string,ticketId:_.a.string,widgets:_.a.array}},1559:function(e,t,a){e.exports={footer:"Conversation-module__footer"}},173:function(e,t,a){e.exports={container:"Loading-module__container",dot:"Loading-module__dot",bounce:"Loading-module__bounce"}},174:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"e",function(){return l}),a.d(t,"d",function(){return c}),a.d(t,"j",function(){return d}),a.d(t,"n",function(){return m}),a.d(t,"o",function(){return u}),a.d(t,"k",function(){return p}),a.d(t,"i",function(){return h}),a.d(t,"g",function(){return g}),a.d(t,"h",function(){return v}),a.d(t,"a",function(){return _}),a.d(t,"l",function(){return b}),a.d(t,"b",function(){return E}),a.d(t,"m",function(){return y}),a.d(t,"f",function(){return I});var n=a(11),o=a.n(n),i=a(177),r=a(8);function s(e){var t=c(e),a=Object(i.a)().toLowerCase()||"",n=navigator.platform.toLowerCase()||"";switch(t){case"jpeg":case"jpg":case"png":case"gif":case"bmp":case"tiff":case"tif":case"ico":return"filePicture";case"txt":case"rtf":return"fileText2";case"pdf":return"filePdf";case"html":case"htm":case"xhtml":return-1!==a.indexOf("chrome")||-1!==a.indexOf("safari")?"chrome":-1!==a.indexOf("ie")||-1!==a.indexOf("edge")?"ie":"firefox";case"ppt":case"pps":case"odp":case"sxi":case"pptx":return"ppt";case"rar":case"jar":case"zip":return"zip3";case"doc":case"docx":case"sxw":case"odt":return-1!==n.indexOf("mac")||-1!==n.indexOf("linux")?"fileOpenoffice":"fileWord";case"xml":return"xml";case"xls":case"xlsx":case"sxc":case"ods":case"csv":case"tsv":return"fileExcel";case"ics":return"ics";case"exe":return"exe";case"sh":case"bin":return"sh2";case"css":return"css52";case"mp3":case"wav":case"wma":case"aac":case"m4r":case"ogg":return"fileMusic";case"mp4":case"mkv":case"mov":case"mpeg":case"flv":case"avi":case"webm":return"fileVideo";default:return"unknown"}}function l(e){return(e=parseInt(e))<1e3?e+" Bytes":e<1e6?(e/1e3).toFixed(1)+" KB":e>=1e6?(e/1e6).toFixed(1)+" MB":void 0}function c(e){return e&&e.indexOf(".")?e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase():""}function d(e){var t=c(e);return-1!=="jpeg|jpg|png|gif|bmp|ico".indexOf(t)}function m(e,t){var a={inValidArray:[],validArray:[]};if(t+e.length>10)return a.isCountExceeds=!0,a;for(var n=0;n<e.length;n++){var o=e[n],i=o.name,r=o.size;p(i)?a.inValidArray.push({isUnSupported:!0}):h(i)?a.inValidArray.push({isFileNameSizeInvalid:!0}):0===o.size?a.inValidArray.push({isEmpty:!0}):f(r)?a.inValidArray.push({isAttachSizeExceeded:!0}):a.validArray.push(o)}return a}function u(e,t,a){if(t+e.length>10)alert(r.f.getI18NValue("support.attachments.count.exceeds",[10]));else for(var n=0;n<e.length;n++){var o=e[n],i=o.name,s=o.size;if(p(i))alert(r.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted"));else if(h(i))alert(r.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation"));else if(0!==o.size)if(f(s))alert(r.f.getI18NValue("support.feedback.uploaded.file.exceeds.20mb"));else{var l=new FormData;l.append("file",o),a&&a(l)}else alert(r.f.getI18NValue("support.request.empty.attachment.message"))}}function p(e){var t=e.split(".").pop().toLowerCase();return-1!==["ade","adp","bat","chm","cmd","com","cpl","exe","hta","ins","isp","jar","lib","lnk","mde","msc","msp","mst","pif","scr","sct","shb","sys","vb","vbe","vxd","wsc","wsf","wsh","jse","vbs"].indexOf(t)}function h(e){return e.length>100}function f(e){return e>20971520}function g(e){var t=0;return e.forEach(function(e){t+=parseInt(e.size)}),t}function v(e,t){return!(!(null!==e.types||e.files&&e.files.length>0)||t.fromPaste||!(e.files&&e.files.length>0||(e.types.indexOf?-1!==e.types.indexOf("Files"):e.types.contains("application/x-moz-file"))||"Files"===e.types[0]))}function _(e,t,a){var n={};n.previewData=t.filter(function(e){return!e.isPreview&&d(e.name)}),n.previewData.filter(function(t,a){t.id===e&&(n.selectedIndex=a)}),a&&a(n)}function C(e,t,a){var n=e.indexOf("/api"),o=e;return n>-1&&(o=e.slice(n,e.length),o+="?orgId="+t+(a?"&inline=true":"")),o}function b(e,t){window.open(C(e,t,!0))}function E(e,t){window.location.href=C(e,t,!1)}function y(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=e.length,c=[],d=[],m=0;if(n&&l>n-a){var u=r.f.getI18NValue("support.attachments.count.exceeds",[n]);return o.a.resolve({isError:!0,errorI18N:u})}for(var f=0;f<l;f++){var g=e[f],v=g||{},_=v.size,C=void 0===_?0:_,b=v.name,E=void 0===b?"":b;if(m+=C,p(E)){var y=r.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted");c.push({errorI18N:y,fileName:E,errorType:"fileType"})}else if(h(E)){var I=r.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation");c.push({errorI18N:I,fileName:E,errorType:"fileNameSize"})}else if(0===C){var A=r.f.getI18NValue("support.request.empty.attachment.message");c.push({errorI18N:A,fileName:E,errorType:"emptyFile"})}else d.push(g)}if(!d.length){if(1===c.length){var k=c[0].errorI18N;return o.a.resolve({isError:!0,errorI18N:k})}var S=r.f.getI18NValue("support.unable.to.process.your.request");return o.a.resolve({isError:!0,errorI18N:S})}if(0===m){var N=r.f.getI18NValue("support.request.empty.attachment.message");return o.a.resolve({isError:!0,errorI18N:N})}if(m+s>1024*i*1024){var T=r.f.getI18NValue("support.attachments.size.limit.exceeds",[i]);return o.a.resolve({isError:!0,errorI18N:T})}for(var w=[],O=[],x=[],D=function(e){var a=d[e];if(t){var n=new FormData;n.append("file",a);var o=t(n).then(function(e){var t=(e.data||{}).data,a=void 0===t?{}:t,n=a.id;n&&(w.push(a),O.push(n))},function(e){var t=a.name,n=r.f.getI18NValue("support.unable.to.process.your.request");throw c.push({errorI18N:n,fileName:t,errorType:"apiError"}),e});x.push(o)}},P=0;P<d.length;P++)D(P);var F={uploadFiles:w,inValidFiles:c,isError:!1,uploadFileIds:O};return o.a.all(x).then(function(){return F},function(){return w.length?F:{isError:!0,errorI18N:r.f.getI18NValue("support.unable.to.process.your.request")}})}function I(e,t){var a=e.name;return{index:t,isPreview:!0,size:e.size,name:a,href:URL.createObjectURL(e)}}},458:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(173),g=a.n(f),v=a(16),_=function(e){function t(){return r()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return u()(t,e),l()(t,[{key:"render",value:function(){return h.a.createElement(v.Container,{alignBox:"row",align:"both",className:g.a.container},h.a.createElement(v.Box,{className:g.a.dot}),h.a.createElement(v.Box,{className:g.a.dot}),h.a.createElement(v.Box,{className:g.a.dot}),h.a.createElement(v.Box,{className:g.a.dot}),h.a.createElement(v.Box,{className:g.a.dot}),h.a.createElement(v.Box,{className:g.a.dot}))}}]),t}(h.a.Component);t.a=_},459:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(122),_=a.n(v),C=a(176),b=a.n(C),E=a(120),y=a.n(E),I=a(174),A=a(109),k=a(8),S=function(e){function t(){return r()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return u()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.orgId,o=t.showAttachmentViewer,i=t.size,r=t.neNeedToDownload,s=t.dataId,l=Object(I.g)(a);return h.a.createElement("div",null,h.a.createElement("div",{className:_.a.AttachCount,"data-id":s},h.a.createElement("span",{className:_.a.mr6},a.length),h.a.createElement("span",null,h.a.createElement(k.c,{i18NKey:"label.attachments"})),h.a.createElement("span",{className:_.a.ml6},"(",Object(I.e)(l),")")),a.map(function(t,s){var l=Object(I.j)(t.name);return h.a.createElement("div",{className:_.a.docspan,key:s,onClick:r?null:l?I.a.bind(e,t.id,a,function(e){o(e)}):I.l.bind(e,t.viewUrl?t.viewUrl:t.href,n),"data-id":1===a.length?"threadAttch":"threadAttch_"+s},h.a.createElement("span",{className:_.a.attachment+" "+_.a[i]},h.a.createElement("div",{className:_.a.attachleft},h.a.createElement(b.a,{name:Object(I.c)(t.name),size:"20"})),h.a.createElement("div",{className:_.a.attachright},h.a.createElement("span",{className:_.a.atatchName},t.name),h.a.createElement("span",{className:_.a.attachSize},Object(I.e)(t.size))),r?null:h.a.createElement(A.a,{onClick:e.props.downloadAttachment.bind(e,t.downloadUrl?t.downloadUrl:t.href),target:"_blank",className:_.a.attachDownload},h.a.createElement(y.a,{name:"downloadNew",size:"medium"==i?"14":"13",color:"pure"}))))}))}}]),t}(h.a.Component);t.a=S,S.propTypes={data:g.a.array,dataId:g.a.string,downloadAttachment:g.a.func,neNeedToDownload:g.a.bool,orgId:g.a.string,showAttachmentViewer:g.a.func,size:g.a.string},S.defaultProps={size:"medium"}},665:function(e,t,a){"use strict";a.r(t);var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),m=a(14),u=a.n(m),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(26),_=a(74),C=a(1279),b=a(242),E=a(24),y=a(53),I=a(38),A=a.n(I),k=a(1530),S=a(1198),N=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.state={editedId:""},a.editComment=a.editComment.bind(a),a.closeComment=a.closeComment.bind(a),a}return u()(t,e),l()(t,[{key:"editComment",value:function(e){this.setState({editedId:e})}},{key:"closeComment",value:function(){this.setState({editedId:""})}},{key:"render",value:function(){var e=this,t=this.props.data,a=this.state.editedId;return t.map(function(t,n){return"comment"==t.type||t.commenterId?h.a.createElement("div",{key:n},h.a.createElement(S.a,A()({page:"conversation",comments:[t]},e.props,{editedId:a,editComment:e.editComment,closeComment:e.closeComment}))):h.a.createElement("div",{key:n},h.a.createElement(k.a,A()({threads:[t]},e.props)))})}}]),t}(h.a.Component),T=N;N.propTypes={data:g.a.array};var w=a(1155),O=a(458),x=a(1281),D=a(1336),P=a(65),F=(a(1559),a(8)),B=(a(17),a(6)),L=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.state={from:1,limit:15,isFetchDone:!1,isQueryDone:!1},a._mount=!1,a.getThread=a.getThread.bind(a),a.downloadAttachment=a.downloadAttachment.bind(a),a.deleteComment=a.deleteComment.bind(a),a.addComment=a.addComment.bind(a),a.uploadAttach=a.uploadAttach.bind(a),a.deleleUpload=a.deleleUpload.bind(a),a.updateComment=a.updateComment.bind(a),a.fetchData=a.fetchData.bind(a),a.renderCommentHistory=a.renderCommentHistory.bind(a),a.handleError=a.handleError.bind(a),a}return u()(t,e),l()(t,[{key:"componentDidMount",value:function(){this._mount=!0,this.fetchData(this.state.from),this.props.getLatestThread(this.props.id)}},{key:"componentDidUpdate",value:function(e){e.id!=this.props.id&&(this.fetchData(this.state.from),this.props.getLatestThread(this.props.id),this.setState({isFetchFailure:!1,from:1,limit:15,isFetchDone:!1,isQueryDone:!1}))}},{key:"componentWillReceiveProps",value:function(e){if(e.needToOpenEditor&&this.state.isQueryDone){this.props.closeEditorState();var t=this.props,a=t.recentThread,n=t.recentThreadId,o=t.openEditor,i=t.id;a?"DRAFT"==a.status?o(n,a.content,a,"FACEBOOK"==a.channel?"facebook":"FORUMS"==a.channel?"forum":"editDraft"):"FAILED"!=a.status&&("FACEBOOK"==a.channel||"TWITTER"==a.channel||"FACEBOOK_DM"==a.channel||"FORUMS"==a.channel?o(n,a.content,a,"FACEBOOK"==a.channel?"facebook":"FACEBOOK_DM"==a.channel?"facebookDm":"FORUMS"==a.channel?"forum":"twitter"):o(n,a.content,a,"replyall")):o(i," ","","replyall")}}},{key:"componentWillUnmount",value:function(){this._mount=!1;var e=this.props,t=e.isConvCommentOpen,a=e.toggleComment;t&&a()}},{key:"fetchData",value:function(e){var t=this,a=this.props,n=a.id,o=a.getConversation,i=a.isConversationQuerySent,r=this.state.limit;return o(n,e,r).then(function(a){if(t._mount){var n=a.data.noMoreData;t.setState({from:e,noMoreData:n,isFetchDone:!0})}t.setState({isQueryDone:!0}),i()},function(e){t.setState({isFetchFailure:!0})})}},{key:"getThread",value:function(e,t){var a=this.props,n=a.id,o=a.getThread;o(n,e).then(function(e){t&&t(e.data.entities)})}},{key:"downloadAttachment",value:function(e){this.props.downloadAttachment(e)}},{key:"deleteComment",value:function(e){var t=this.props,a=t.id,n=t.deleteComment;(0,t.showConfirmBox)({type:"delete",submitText:F.f.getI18NValue("crm.button.delete"),cancelText:F.f.getI18NValue("support.label.cancel"),title:F.f.getI18NValue("support.label.delete.comment"),message:F.f.getI18NValue("support.task.label.comment.delete"),isActive:!0,palette:"danger"}).then(function(){n("tickets","ticket",a,e,"CONVERSATION")}).catch(function(){})}},{key:"addComment",value:function(e,t,a){var n=this.props,o=n.id,i=n.addComment,r=n.toggleComment;(0,n.zAppHookEvent)("ticket.comment",{ticketId:o,content:e.content,isPublic:e.isPublic},function(){i("tickets","ticket",o,e,"CONVERSATION",t).then(function(e){r(),a&&a(e)})})}},{key:"updateComment",value:function(e,t,a,n,o){var i=this.props,r=i.id,s=i.updateComment;(0,i.zAppHookEvent)("ticket.comment.edit",{commentId:e,oldContent:a,newContent:t.content,ticketId:r},function(){s("tickets","ticket",r,e,t,"CONVERSATION",n).then(function(e){o&&o()},function(){o&&o()})})}},{key:"handleError",value:function(){this.props.showMessage({type:"alert",message:F.f.getI18NValue("support.unable.to.process.your.request")})}},{key:"uploadAttach",value:function(e,t,a){var n=this;return this.props.uploadAttach(e,t,function(e,t){a(e,t)}).then(function(e){return e},function(e){throw n.handleError(),{attachIndex:t,err:e}})}},{key:"deleleUpload",value:function(e){var t=this;return this.props.deleleUpload(e).catch(function(){t.handleError()})}},{key:"renderCommentHistory",value:function(e){var t=this.props,a=t.id,n=t.openLookUp,o=t.showCommentHistory;n("commentHistory"),o({ticketId:a,commentId:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.moduleMeta,n=t.orgId,o=t.isConvCommentOpen,i=t.toggleComment,r=t.showAttachmentViewer,s=t.isEdtiorOpen,l=t.closeEdtior,c=t.openEditor,d=t.editorId,m=t.replyContent,u=t.replyThread,p=t.replyMode,f=t.deleteDraft,g=t.updateDraft,v=t.saveDraft,_=t.sendForReview,C=t.sendDraft,b=t.sendReply,E=t.solutionContent,y=t.solutionAttachments,I=t.contactEmail,A=t.thread,k=t.comment,S=t.conversationIds,N=t.myInfo,F=t.isPeekView,L=t.deleteFailedThread,V=t.resendFailedThread,R=t.recentThreadId,M=t.id,j=t.splitTicket,z=t.sanitizedDeptName,K=t.orgName,U=t.widgets,H=t.selectedWidgetId,W=t.onWidgetScroll,Z=t.onWidgetSelect,q=t.closeTicket,G=t.haveEditPermission,$=t.haveMailSendPermission,Y=t.channelRelatedInfo,J=t.setIsCommentChanged,Q=t.revertIsCommentChanged,X=t.isCommentChanged,ee=t.showConfirmBox,te=t.showMessage,ae=t.isAdminUser,ne=t.haveCommentEditPermission,oe=t.haveCommentDeletePermission,ie=t.currentUserId,re=t.haveJiraBugCreatePer,se=t.openJiraForm,le=t.bugName,ce=t.haveBugCreatePer,de=t.openBugTrackerForm,me=t.isStatusLocked,ue=t.haveForWardPermissionOnly,pe=t.isReadOnly,he=t.isSharedTicket,fe=t.getFullContent,ge=t.ticketChannel,ve=t.isSpam,_e=t.isCustomChannel,Ce=t.channelInfo,be=t.customChannelsInfo,Ee=t.threadCount,ye=this.state,Ie=ye.isFetchDone,Ae=ye.from,ke=ye.limit,Se=ye.noMoreData,Ne=ye.isFetchFailure,Te=[];if(S)for(var we=0;we<S.length;we++){var Oe=S[we].type,xe=S[we].id,De="thread"==Oe?A[xe]:k[xe];De&&Te.push(De)}var Pe=u&&"DRAFT"==u.status;return s&&"facebook"!=p&&"facebookDm"!=p&&"twitter"!=p&&"twitterDm"!=p?h.a.createElement(D.a,{isDraftThread:Pe,ticketId:this.props.id,closeEdtior:l,editorId:d,replyContent:m,replyThread:u,replyMode:p,deleteDraft:f,updateDraft:g,saveDraft:v,sendForReview:_,sendDraft:C,sendReply:b,openEditor:c,solutionContent:E,solutionAttachments:y,contactEmail:I,isPeekView:F,closeTicket:q,haveEditPermission:G,haveMailSendPermission:$,channelRelatedInfo:Y,isStatusLocked:me,haveForWardPermissionOnly:ue,isSharedTicket:he,isCustomChannel:_e,channelInfo:Ce}):Te.length?h.a.createElement(P.Card,{needToFetch:!0,from:Ae,limit:ke,noMoreData:Se,fetchData:this.fetchData,noNeedUpScroll:!0},h.a.createElement(P.CardHeader,null,!s||"facebook"!=p&&"facebookDm"!=p&&"twitter"!=p&&"twitterDm"!=p?o?h.a.createElement(w.a,{id:M,addComment:this.addComment,uploadAttach:this.uploadAttach,deleleUpload:this.deleleUpload,orgId:n,toggleComment:i,showAttachmentViewer:r,type:"conversation",isPeekView:F,isCommentChanged:X,setIsCommentChanged:J,revertIsCommentChanged:Q,havePublicComment:!ue&&!pe}):null:h.a.createElement(x.a,{closeEdtior:l,sendForReview:_,updateDraft:g,content:Pe?m:"",isDraft:Pe,deleteDraft:f,sendDraft:C,sendReply:b,channel:u.channel,openEditor:c,threadId:d,replyThread:u,replyMode:p,haveMailSendPermission:$,haveForWardPermissionOnly:ue,saveDraft:v})),h.a.createElement(P.CardContent,{eleRef:function(t){e.scrollCont=t}},h.a.createElement(T,{data:Te,getThread:this.getThread,addComment:this.addComment,downloadAttachment:this.downloadAttachment,deleteComment:this.deleteComment,updateComment:this.updateComment,renderCommentHistory:this.renderCommentHistory,uploadAttach:this.uploadAttach,deleleUpload:this.deleleUpload,orgId:n,showAttachmentViewer:r,openEditor:c,deleteDraft:f,deleteFailedThread:L,resendFailedThread:V,sendDraft:C,contactEmail:I,photoURL:N.photoURL,name:Object(B.e)(N.firstName,N.lastName),scrollCont:this.scrollCont,isPeekView:F,latestThreadId:R,ticketId:M,moduleMeta:a,splitTicket:j,sanitizedDeptName:z,orgName:K,widgets:U,selectedWidgetId:H,onWidgetScroll:W,onWidgetSelect:Z,haveMailSendPermission:$,isCommentChanged:X,setIsCommentChanged:J,revertIsCommentChanged:Q,showConfirmBox:ee,showMessage:te,isAdminUser:ae,haveCommentEditPermission:ne,haveCommentDeletePermission:oe,currentUserId:ie,haveJiraBugCreatePer:re,openJiraForm:se,bugName:le,haveBugCreatePer:ce,openBugTrackerForm:de,CommentBoxContainer:w.a,haveForWardPermissionOnly:ue,isReadOnly:pe,getFullContent:fe,ticketChannel:ge,isSpam:ve,customChannelsInfo:be,threadCount:Ee}))):o?h.a.createElement(w.a,{addComment:this.addComment,uploadAttach:this.uploadAttach,deleleUpload:this.deleleUpload,orgId:n,toggleComment:i,showAttachmentViewer:r,type:"conversation",isPeekView:F,isCommentChanged:X,setIsCommentChanged:J,revertIsCommentChanged:Q,havePublicComment:!ue&&!pe}):Ne?h.a.createElement("div",null,"Unable To Proccess your request"):Ie?null:h.a.createElement(O.a,null)}}]),t}(p.Component);L.propTypes={addComment:g.a.func,bugName:g.a.string,channelInfo:g.a.object,channelRelatedInfo:g.a.object,closeEditorState:g.a.func,closeEdtior:g.a.func,closeTicket:g.a.func,comment:g.a.object,contactEmail:g.a.string,conversationIds:g.a.array,currentUserId:g.a.string,customChannelsInfo:g.a.object,deleleUpload:g.a.func,deleteComment:g.a.func,deleteDraft:g.a.func,deleteFailedThread:g.a.func,downloadAttachment:g.a.func,getConversation:g.a.func,getFullContent:g.a.func,getLatestThread:g.a.func,getThread:g.a.func,haveBugCreatePer:g.a.bool,haveCommentDeletePermission:g.a.bool,haveCommentEditPermission:g.a.bool,haveEditPermission:g.a.bool,haveForWardPermissionOnly:g.a.bool,haveJiraBugCreatePer:g.a.bool,haveMailSendPermission:g.a.bool,id:g.a.string,isAdminUser:g.a.bool,isCommentChanged:g.a.bool,isConvCommentOpen:g.a.bool,isConversationQuerySent:g.a.func,isCustomChannel:g.a.bool,isEdtiorOpen:g.a.bool,isPeekView:g.a.bool,isReadOnly:g.a.bool,isSharedTicket:g.a.bool,isSpam:g.a.bool,isStatusLocked:g.a.bool,moduleMeta:g.a.object,myInfo:g.a.object,needToOpenEditor:g.a.bool,onWidgetScroll:g.a.func,onWidgetSelect:g.a.func,openBugTrackerForm:g.a.func,openEditor:g.a.func,openJiraForm:g.a.func,openLookUp:g.a.func,orgId:g.a.string,orgName:g.a.string,recentThread:g.a.object,recentThreadId:g.a.string,replyMode:g.a.string,resendFailedThread:g.a.func,revertIsCommentChanged:g.a.func,sanitizedDeptName:g.a.string,saveDraft:g.a.func,selectedWidgetId:g.a.string,sendDraft:g.a.func,sendForReview:g.a.func,sendReply:g.a.func,setIsCommentChanged:g.a.func,showAttachmentViewer:g.a.func,showCommentHistory:g.a.func,showConfirmBox:g.a.func,showMessage:g.a.func,solutionAttachments:g.a.array,solutionContent:g.a.oneOfType([g.a.string,g.a.object]),splitTicket:g.a.func,thread:g.a.object,threadCount:g.a.string,ticketChannel:g.a.string,toggleComment:g.a.func,updateComment:g.a.func,updateDraft:g.a.func,uploadAttach:g.a.func,widgets:g.a.array,zAppHookEvent:g.a.func};t.default=Object(v.connect)(function(e,t){var a=e.ticketUIState,n=a.needToOpenEditor,o=void 0!==n&&n,i=a.isCommentChanged,r=void 0!==i&&i;return{thread:e.module.thread,comment:e.module.comment,conversationIds:e.module.ticket[t.id].conversationIds,moduleMeta:e.moduleMeta,orgId:e.currentOrgId,myInfo:e.myInfo,sanitizedDeptName:e.routing.paramMap.deptName,orgName:e.routing.paramMap.orgName,needToOpenEditor:o,isCommentChanged:r,customChannelsInfo:e.customChannelsInfo}},{getConversation:_.d,getThread:_.j,getLatestThread:_.h,downloadAttachment:b.e,uploadAttach:b.k,deleleUpload:b.d,deleteComment:C.b,addComment:C.a,updateComment:C.e,showAttachmentViewer:b.i,openLookUp:E.G,showCommentHistory:E.O,zAppHookEvent:y.m,closeEditorState:_.b,setIsCommentChanged:_.s,revertIsCommentChanged:_.q,showConfirmBox:E.a.showConfirmBox,showMessage:E.Q,getFullContent:_.e})(L)},949:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectComponent=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=C(o),r=C(a(1)),s=C(a(80)),l=C(a(72)),c=C(a(234)),d=C(a(99)),m=a(202),u=C(m),p=C(a(236)),h=C(a(237)),f=C(a(957)),g=C(a(63)),v=a(358),_=a(201);function C(e){return e&&e.__esModule?e:{default:e}}var b=[],E=t.SelectComponent=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.getFilterSuggestions=(0,v.makeGetMultiSelectFilterSuggestions)(),a.formatOptions=(0,v.makeFormatOptions)(),a.getSelectedValue=(0,v.makeGetSelectedValueText)(),a.selectedFormatOptions={};var n=e.selectedValue,o=e.searchDebounceTime,i=void 0===o?500:o,r=e.isDefaultSelectValue,s=a.handleFormatOptions(a.props),l=s.allOptions,c=s.normalizedAllOptions,d=s.optionsOrder,m=s.normalizedFormatOptions,u=a.getSelectedValue({optionsOrder:d,selectedValue:n,normalizedFormatOptions:m,selectedFormatOptions:a.selectedFormatOptions,isDefaultSelectValue:r}),p=u.selected,h=u.hoverIndex,f=u.selectedValueDetails,g=u.selectedId;u.isSelfValueChanged;return a.state={selected:p,options:l,optionsNormalize:c,hoverIndex:h,searchStr:"",isFetchingOptions:!1,selectedId:g,selectedValueIndex:h},a.optionsOrder=d,a._isMounted=!1,a.normalizedFormatOptions=m,a.allSelectedOptions=f,a.handleChange=a.handleChange.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleSearch=a.handleSearch.bind(a),a.handleFilterSuggestions=a.handleFilterSuggestions.bind(a),a.handleMouseEnter=a.handleMouseEnter.bind(a),a.handleFetchOptions=a.handleFetchOptions.bind(a),a.handleGetNextOptions=a.handleGetNextOptions.bind(a),a.handleScroll=a.handleScroll.bind(a),a.handleSearchOptions=(0,_.debounce)(a.handleSearchOptions.bind(a),i),a.suggestionContainerRef=a.suggestionContainerRef.bind(a),a.suggestionItemRef=a.suggestionItemRef.bind(a),a.searchInputRef=a.searchInputRef.bind(a),a.valueInputRef=a.valueInputRef.bind(a),a.togglePopup=a.togglePopup.bind(a),a.handleSelectFocus=a.handleSelectFocus.bind(a),a.handleFormatOptions=a.handleFormatOptions.bind(a),a.handlePopupClose=a.handlePopupClose.bind(a),a.handleClearSearch=a.handleClearSearch.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),n(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectedValue,a=e.isDefaultSelectValue,n=this.state.hoverIndex,o=this.handleFormatOptions(e),i=o.allOptions,r=o.normalizedAllOptions,s=o.optionsOrder,l=o.normalizedFormatOptions,c=this.selectedFormatOptions,d=this.getSelectedValue({optionsOrder:s,selectedValue:t,normalizedFormatOptions:l,selectedFormatOptions:c,isDefaultSelectValue:a}),m=d.selected,u=d.hoverIndex,p=d.selectedValueDetails,h=d.selectedId;d.isSelfValueChanged,this.props.selectedValue;this.selectedFormatOptions=Object.assign(c,p),this.normalizedFormatOptions=l,this.optionsOrder=s,this.setState({options:i,optionsNormalize:r,selected:m,hoverIndex:n||u,selectedId:h,selectedValueIndex:u})}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.suggestionContainer,n=this.optionsOrder,o=this.isSelectWithAvatarComponent,i=this.state,r=i.hoverIndex,s=i.searchStr,l=i.selectedValueIndex,c=this.props,d=c.needLocalSearch,m=c.onDropBoxClose,u=c.onDropBoxOpen,p=c.needSearch,h=c.onSearch,f=c.isPopupOpen,g=this["suggestion_"+((0,_.getIsEmptyValue)(n[r])?"":n[r])];f&&(0,_.scrollTo)(a,g),e.isPopupOpen!==f&&(f?(u&&this.handleFetchOptions(u,s),setTimeout(function(){t.searchInput&&t.searchInput.focus()},10)):(p&&this.valueInput&&this.valueInput.focus(),m&&m(),h&&h(""),this.setState({searchStr:o?s:"",hoverIndex:l})));var v=this.props,C=v.isNextOptions,b=v.getNextOptions,E=(f?this.handleFilterSuggestions():[]).length;f&&E<=5&&C&&b&&!d&&this.handleFetchOptions(b,s)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleFormatOptions",value:function(e){var t=e.options,a=e.valueField,n=e.textField;return this.formatOptions({options:t,valueField:a,textField:n})}},{key:"handleChange",value:function(e,t,a,n){n&&n.preventDefault&&n.preventDefault();var o=this.props,i=o.onChange,r=o.isReadOnly,s=this.state.optionsNormalize;!r&&i&&i(e,s[e]),this.valueInput&&this.valueInput.focus(),this.handlePopupClose(n)}},{key:"handleKeyDown",value:function(e){var t=this.props,a=t.onChange,n=t.isPopupOpen,o=this.state,i=o.hoverIndex,r=o.optionsNormalize,s=this.handleFilterSuggestions(),l=e.keyCode;if(n&&(38===l||40===l)&&e.preventDefault&&e.preventDefault(),38===l&&n&&s.length)0===i||(i-=1),this.setState({hoverIndex:i});else if(40===l&&n&&s.length)i===s.length-1||(i===s.length-3&&this.handleGetNextOptions(),i+=1),this.setState({hoverIndex:i});else if(13===l){var c=(s[i]||{}).id;n&&!(0,_.getIsEmptyValue)(c)&&a&&a(c,r[c]),n?!(0,_.getIsEmptyValue)(c)&&this.togglePopup(e):this.togglePopup(e)}}},{key:"handleSearchOptions",value:function(){var e=this.props.onSearch,t=this.state.searchStr;t&&this.handleFetchOptions(e,t)}},{key:"handleSearch",value:function(e){var t=this,a=this.state.searchStr,n=void 0===a?"":a,o=this.props.onSearch,i=n.toLowerCase().replace(/\s+/g,"")!==e.toLowerCase().replace(/\s+/g,"");this.setState({searchStr:e,hoverIndex:0},function(){e?i&&o&&t.handleSearchOptions():o&&t.handleFetchOptions(o,"")})}},{key:"handleMouseEnter",value:function(e){var t=this.state.hoverIndex,a=this.optionsOrder.indexOf(e);t!==a&&this.setState({hoverIndex:a})}},{key:"handleFilterSuggestions",value:function(){var e=this.props,t=e.needLocalSearch,a=e.excludeOptions,n=void 0===a?b:a,o=e.needSearch,i=this.state,r=i.options,s=void 0===r?b:r,l=i.searchStr;return o&&l&&l.trim().length||n&&n.length?this.getFilterSuggestions({options:s,selectedOptions:n,searchStr:l,needSearch:t}).suggestions:s}},{key:"handleScroll",value:function(e){e.target.scrollTop+e.target.offsetHeight>e.target.scrollHeight-1&&this.handleGetNextOptions()}},{key:"handleFetchOptions",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.state.isFetchingOptions,o=void 0!==n&&n,i=this._isMounted;if(!o&&e){this.setState({isFetchingOptions:!0});try{return e(a).then(function(){i&&t.setState({isFetchingOptions:!1})},function(){i&&t.setState({isFetchingOptions:!1})})}catch(e){i&&this.setState({isFetchingOptions:!1})}}}},{key:"handleGetNextOptions",value:function(){var e=this.props,t=e.isNextOptions,a=e.getNextOptions,n=this.state.searchStr;t&&a&&this.handleFetchOptions(a,n)}},{key:"togglePopup",value:function(e){var t=this.props,a=t.togglePopup,n=t.isReadOnly,o=t.defaultDropBoxPosition;!n&&a(e,o?o+"Center":null)}},{key:"handlePopupClose",value:function(e){(0,this.props.closePopupOnly)(e)}},{key:"suggestionContainerRef",value:function(e){this.suggestionContainer=e}},{key:"suggestionItemRef",value:function(e,t,a){this["suggestion_"+a]=e}},{key:"searchInputRef",value:function(e){this.searchInput=e}},{key:"valueInputRef",value:function(e){var t=this.props.getRef;this.valueInput=e,t&&t(e)}},{key:"handleSelectFocus",value:function(e){var t=(e||{}).target;t&&t.setSelectionRange(t,0)}},{key:"handleClearSearch",value:function(){var e=this;this.handleSearch(""),setTimeout(function(){e.searchInput&&e.searchInput.focus()},1)}},{key:"render",value:function(){var e=this.props,t=e.needSearch,a=e.dropBoxSize,n=e.emptyMessage,o=e.searchEmptyMessage,r=e.needBorder,s=e.needSelectDownIcon,v=e.position,_=e.defaultDropBoxPosition,C=e.getTargetRef,b=e.getContainerRef,E=e.isPopupOpen,y=e.removeClose,I=e.isPopupReady,A=e.animationStyle,k=e.textBoxSize,S=e.textBoxVariant,N=e.searchBoxSize,T=e.searchBoxPlaceHolder,w=e.maxLength,O=e.isDisabled,x=e.title,D=e.size,P=e.placeHolder,F=e.className,B=e.portalId,L=e.isReadOnly,V=e.dataId,R=this.state,M=R.hoverIndex,j=R.selected,z=R.searchStr,K=R.isFetchingOptions,U=R.selectedId,H=R.options,W=this.handleFilterSuggestions();return i.default.createElement("div",{className:f.default.container+" "+f.default["box_"+D]+" ","data-title":O?x:""},i.default.createElement("div",{className:""+(F||""),onClick:O||L?null:this.togglePopup,ref:C},s?i.default.createElement(c.default,{isDisabled:O,iconRotated:E,inputRef:this.valueInputRef,maxLength:w,needBorder:r,onFocus:this.handleSelectFocus,onKeyDown:this.handleKeyDown,placeHolder:P,isReadOnly:!0,size:k,value:j,variant:S,needReadOnlyStyle:!!L,dataId:V,isClickable:!L&&!O,className:L||O?"":f.default.input,needEffect:!L},i.default.createElement("div",{className:f.default.arrowIcon,"data-id":V+"_downIcon"},i.default.createElement(g.default,{name:"blockDownArrow",size:"8"}))):i.default.createElement(d.default,{disabled:O,inputRef:this.valueInputRef,maxLength:w,needBorder:r,onFocus:this.handleSelectFocus,onKeyDown:this.handleKeyDown,placeHolder:P,readOnly:!0,size:k,value:j,variant:S,needReadOnlyStyle:!!L,dataId:V,isClickable:!L&&!O})),L||O||!E?null:i.default.createElement(l.default,{animationStyle:A,boxPosition:v||_+"Center",getRef:b,isActive:I,isAnimate:!0,isArrow:!1,onClick:y,portalId:B,dataIdContainer:V+"_suggestions"},i.default.createElement(u.default,{className:f.default.box,onScroll:this.handleScroll},t?i.default.createElement(m.CardHeader,null,i.default.createElement("div",{className:f.default.search+" "+f.default[D]},i.default.createElement(c.default,{inputRef:this.searchInputRef,maxLength:w,onChange:this.handleSearch,onKeyDown:this.handleKeyDown,placeHolder:T,size:N,value:z,onClear:this.handleClearSearch,dataIdSearchBox:V+"_searchBox"}))):null,i.default.createElement(m.CardContent,{className:a?f.default[a]:"",eleRef:this.suggestionContainerRef,dataId:V+"_Options"},W.length?i.default.createElement(p.default,{activeId:U,suggestions:W,getRef:this.suggestionItemRef,hoverOption:M,onClick:this.handleChange,onMouseEnter:this.handleMouseEnter}):i.default.createElement(h.default,{emptyMessage:n,isLoading:K,options:H,searchEmptyMessage:o,searchString:z,suggestions:W,dataIdLoading:V+"_loading",dataIdSrchEmptyMsg:V+"_srchEmptyMsg",dataIdNoOptnsMsg:V+"_noOptnsMsg"})))))}}]),t}();E.propTypes={animationStyle:r.default.string,className:r.default.string,closePopupOnly:r.default.func,dataId:r.default.string,defaultDropBoxPosition:r.default.oneOf(["bottom","top","left","right"]),dropBoxSize:r.default.oneOf(["small","medium","large"]),emptyMessage:r.default.string,excludeOptions:r.default.array,getContainerRef:r.default.func,getNextOptions:r.default.func,getRef:r.default.func,getTargetRef:r.default.func,isDefaultSelectValue:r.default.bool,isDisabled:r.default.bool,isNextOptions:r.default.bool,isPopupOpen:r.default.bool,isPopupReady:r.default.bool,isReadOnly:r.default.bool,maxLength:r.default.string,needBorder:r.default.bool,needLocalSearch:r.default.bool,needSearch:r.default.bool,needSelectDownIcon:r.default.bool,onChange:r.default.func.isRequired,onDropBoxClose:r.default.func,onDropBoxOpen:r.default.func,onSearch:r.default.func,options:r.default.oneOfType([r.default.arrayOf(r.default.oneOfType([r.default.string,r.default.number])),r.default.arrayOf(r.default.shape({id:r.default.oneOfType([r.default.string,r.default.number]),text:r.default.oneOfType([r.default.string,r.default.number])}))]).isRequired,placeHolder:r.default.string,portalId:r.default.string,position:r.default.string,removeClose:r.default.func,searchBoxPlaceHolder:r.default.string,searchBoxSize:r.default.string,searchDebounceTime:r.default.number,searchEmptyMessage:r.default.string,selectedValue:r.default.oneOfType([r.default.oneOfType([r.default.string,r.default.number]),r.default.shape({id:r.default.oneOfType([r.default.string,r.default.number]),text:r.default.oneOfType([r.default.string,r.default.number])})]),size:r.default.oneOf(["small","medium"]),textBoxSize:r.default.string,textBoxVariant:r.default.string,textField:r.default.string,title:r.default.string,togglePopup:r.default.func,valueField:r.default.string},E.propTypesDescription={size:" ",title:" ",isDisabled:" ",maxLength:" ",searchBoxSize:" ",searchBoxPlaceHolder:" ",textBoxSize:" ",textBoxVariant:" ",options:" ",selectedValue:" ",onChange:" ",emptyMessage:" ",needSearch:" ",valueField:" ",textField:" "},E.defaultProps={animationStyle:"bounce",defaultDropBoxPosition:"bottom",dropBoxSize:"small",isDefaultSelectValue:!0,isDisabled:!1,isReadOnly:!1,needBorder:!0,needLocalSearch:!0,needSearch:!1,needSelectDownIcon:!0,placeHolder:"",searchBoxPlaceHolder:"Search",searchBoxSize:"medium",size:"medium",dataId:"selectComponent",textBoxSize:"medium",textBoxVariant:"default",textField:"text",valueField:"id"},E.displayName="Select";var y=(0,s.default)(E);y.propTypes=E.propTypes,y.defaultProps=E.defaultProps,t.default=y},956:function(e,t,a){"use strict";a.d(t,"i",function(){return u}),a.d(t,"g",function(){return p}),a.d(t,"b",function(){return h}),a.d(t,"j",function(){return f}),a.d(t,"h",function(){return g}),a.d(t,"c",function(){return v}),a.d(t,"e",function(){return _}),a.d(t,"a",function(){return C}),a.d(t,"k",function(){return E}),a.d(t,"d",function(){return I}),a.d(t,"f",function(){return A}),a.d(t,"l",function(){return k});a(20);var n=a(2),o=a.n(n),i=a(15),r=a(6),s=a(7),l=a(17),c=a(46),d=a(3),m=a(39);function u(e){return{types:Object(r.m)("AGENTS_COUNT"),callAPI:function(t){var a=Object(l.r)(t);return Object(i.a)("/api/v1/agentsTicketsCount?"+Object(c.a)(t)+"&agentIds="+e,!1,{orgId:t.currentOrgId}).get().then(function(e){return 204!==e.responseStatus?(e.data=e.data.map(function(e){return o()({},e,{id:e.agentId})}),{countData:e.data,deptId:a}):{}})}}}function p(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{types:Object(r.m)(d.L.AGENT),callAPI:function(r){return Object(i.a)("/api/v1/agents?"+(e&&"allDepartment"!==e?"departmentId="+e:"")+"&from="+t+"&limit="+a+"&status=ACTIVE&isConfirmed="+n,!1,{orgId:r.currentOrgId}).get().then(function(t){if(204!==t.responseStatus){var n=t.data.length<a,i=Object(s.normalize)(t.data,Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)));return o()(i,{noMoreData:n,depId:e})}return{entities:{noMoreData:!0},result:[]}})}}}function h(e,t){return{types:Object(r.m)(d.L.AGENT),callAPI:function(a){return Object(i.a)("/api/v1/agents/"+e,!1,{orgId:a.currentOrgId}).get().then(function(e){var a=Object(s.normalize)(e,Object(s.schema)(d.L.AGENT_L));return o()(a,{depId:t})})}}}function f(e,t,a){return{types:Object(r.m)("AGENT_SEARCH"),callAPI:function(n){return Object(i.a)("/api/v1/agents?searchStr="+e+"&from="+t+"&limit="+a,!1,{orgId:n.currentOrgId}).get().then(function(e){if(204!==e.responseStatus){var n=e.data.length<a,i=Object(s.normalize)(e.data,Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)));return o()(i,{noMoreData:n})}return 1===t?{entities:{noMoreData:!0,isEmpty:!0},result:[]}:{entities:{noMoreData:!0},result:[]}})}}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],a=arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.u,m=arguments[4];return{types:Object(r.m)(d.L.AGENT),callAPI:function(r){var u={activeAgents:"status=ACTIVE",deActiveAgents:"status=DISABLED",notConfirmedAgents:"isConfirmed=false",allAgents:"",activeConfirmedAgents:"status=ACTIVE&isConfirmed=true",activeConfirmedNonLightAgents:"status=ACTIVE&isConfirmed=true&rolePermissionType=${NON_LIGHT}"}[e.replace("Search","")]||"",p=m||Object(l.r)(r),h=m?"&departmentId="+m:Object(c.a)(r,!0),f="/api/v1/agents?"+(u?u+"&":"")+"from="+t+"&limit="+(2*n>200?200:2*n)+(a?"&searchStr=*"+a+"*":"")+h;return Object(i.a)(encodeURI(f),!1,{orgId:r.currentOrgId}).get().then(function(i){return o()({},Object(s.normalize)(204!==i.responseStatus?i.data:[],Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L))),{deptId:p,from:t,limit:n,isNext:!!i.data&&i.data.length>n,searchStr:a,agentType:e})},function(e){throw e})}}}function v(e){return{types:Object(r.m)("AGENT"),shouldCallAPI:function(){return e.length>=1},callAPI:function(t){return Object(i.a)("/api/v1/agentsByIds?agentIds="+e.join(),!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(s.normalize)(204!==e.responseStatus?e.data:[],Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)))})}}}function _(e){return{types:Object(r.m)("TEAM_AGENT"),callAPI:function(t){return Object(i.a)("/api/v1/teams/"+e+"/members",!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(s.normalize)(e.members,Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)))})}}}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a="";return t.map(function(t){void 0!==e[t]&&(a+="&"+t+"="+e[t])}),a}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a=arguments[2];return void 0!==e[t]?e[t]:a}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=b(e,"searchType","string"),a=e.searchStr;return a&&(a="string*"==t?a+"*":"*string*"==t?"*"+a+"*":a),a}function y(e){var t=e.isConfirmed,a=e.status;switch(a){case m.a:return m.a;case m.d:return m.d;case m.c:return m.c;default:if(void 0!==t&&!t)return m.l;if(void 0===a)return m.b}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.from=b(e,"from","1"),e.limit=b(e,"limit","100"),e.searchStr=E(e);var t=e.from>1?m.k:m.j;return{types:Object(r.m)(t),callAPI:function(t){var a="/api/v1/agents?orgId="+t.currentOrgId;return a+=C(e,["from","limit","status","isConfirmed","searchStr","departmentId","departmentIds","profileIds","roleIds"]),Object(i.a)(a).get().then(function(t){return o()(Object(s.normalize)(void 0!==t.data?t.data:[],Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L))),{status:y(e)})})}}}function A(e,t,a){var n={status:e,isConfirmed:t,includeLightAgent:a};return n.includeLightAgent=b(n,"includeLightAgent",!0),{types:Object(r.m)(m.i),callAPI:function(e){var t="/api/v1/agents/count?orgId="+e.currentOrgId;return t+=C(n,["status","isConfirmed","includeLightAgent"]),Object(i.a)(t).get().then(function(e){return o()({},e,{status:y(n)})})}}}function k(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:m.m,data:{isEnabled:e}}}},957:function(e,t,a){e.exports={input:"Select-module__input",small:"Select-module__small",medium:"Select-module__medium",large:"Select-module__large",emptyState:"Select-module__emptyState common-module__semibold common-module__ftsmooth",box_small:"Select-module__box_small",box_medium:"Select-module__box_medium",hide:"Select-module__hide common-module__vishidden",container:"Select-module__container",arrowIcon:"Select-module__arrowIcon",box:"Select-module__box",search:"Select-module__search"}},960:function(e,t,a){"use strict";function n(e,t){var a=void 0,n="";return e?"OFFLINE_CHAT"==(a=e.channel)?n="missed":e.isDraft?n="draft":e.isForward?n="forward":"in"===e.direction?n="incoming":"out"===e.direction&&(n="outgoing"):(a=t||"",n="default"),{channelName:a,action:n}}function o(e){return{in:{icon:"emailIn",bordercolor:"primary",color:"primary",size:"10"},out:{icon:"emailOut",bordercolor:"primary",color:"primary",size:"10"},dft:{icon:"pen2",bordercolor:"primary",color:"primary",size:"8"},fwd:{icon:"emailFwd",bordercolor:"primary",color:"primary",size:"6"},feedback:{icon:"feedback",bordercolor:"primary",color:"primary",size:"10"},comment:{icon:"zdeskCommentfilled",bordercolor:"primary",color:"primary",size:"8"},failed:{icon:"notifiExclamation",bordercolor:"primary",color:"danger",size:"10"}}[e]}function i(){return{EMAIL:{default:"chEmail1",incoming:"chEmailIn",outgoing:"chEmailOut",draft:"chEmailDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chEmailMis"},FACEBOOK:{default:"chFacebook",incoming:"chFacebookIn",outgoing:"chFacebookOut",draft:"chFacebookDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chFacebookMis"},FACEBOOK_DM:{default:"chFacebookDmOut",incoming:"chFacebookDmOut",outgoing:"chFacebookDmOut",draft:"chFacebookDmOut",forward:"chFacebookDmOut",forwardDraft:"chFacebookDmOut",missed:""},TWITTER:{default:"chTwitter",incoming:"chTwitterIn",outgoing:"chTwitterOut",draft:"chTwitterDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chTwitterMis"},FORUMS:{default:"chForums",incoming:"chForumsIn",outgoing:"chForumsOut",draft:"chForumsDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chForumsMis"},CHAT:{default:"chChat",incoming:"chChatIn",outgoing:"chEmailOut",draft:"chEmailDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chChatMis"},OFFLINE_CHAT:{default:"chChat",incoming:"chChatIn",outgoing:"chEmailOut",draft:"chEmailDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chChatMis"},ONLINE_CHAT:{default:"chChat",incoming:"chChatIn",outgoing:"chEmailOut",draft:"chEmailDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chChatMis"},PHONE:{default:"activityCalls",incoming:"chPhoneIn",outgoing:"chPhoneOut",draft:"chEmailDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chPhoneMis"},WEB:{default:"chWeb",incoming:"chWebIn",out:"chEmailOut",draft:"chEmailDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chWebMis"},CUSTOMERPORTAL:{default:"chWeb",incoming:"chWebIn",out:"chEmailOut",draft:"chEmailDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chWebMis"},FEEDBACK:{default:"chFeedback",incoming:"chFeedback",out:"chFeedbackOut",draft:"chEmailDft",forward:"chEmailFwd",forwardDraft:"forwarddft",missed:"chFeedbackMis"}}}a.d(t,"c",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"a",function(){return i})},997:function(e,t,a){"use strict";function n(){for(var e=this,t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];a.forEach(function(t){e[t]=e[t].bind(e)})}a.d(t,"a",function(){return n})}}]);