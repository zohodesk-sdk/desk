(window.deskappJsonp=window.deskappJsonp||[]).push([[46],{1023:function(e,t,a){"use strict";var n=a(12),r=a.n(n),o=a(9),s=a.n(o),i=a(10),l=a.n(i),c=a(13),u=a.n(c),p=a(14),d=a.n(p),m=a(0),g=a.n(m),v=a(1),f=a.n(v),h=a(1046),b=a.n(h),A=a(152),_=function(e){function t(e){return s()(this,t),u()(this,(t.__proto__||r()(t)).call(this,e))}return d()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.iconName,a=e.iconClass,n=e.iconSize,r=e.palette,o=e.size,s=e.onClick,i=e.iconColor,l=e.title;return g.a.createElement("span",{className:b.a.container,onClick:s,"data-id":"addreqNowbutton","data-title":l},g.a.createElement(A.a,{name:t,iconClass:a,iconSize:n,palette:r,size:o,iconColor:i}))}}]),t}(g.a.Component);t.a=_,_.defaultProps={size:"xmedium",iconName:"plus",palette:"secondary",iconSize:"16",iconColor:"primary"},_.propTypes={iconClass:f.a.string,iconColor:f.a.string,iconName:f.a.string,iconSize:f.a.string,onClick:f.a.func,palette:f.a.string,size:f.a.string,title:f.a.string}},1034:function(e,t,a){"use strict";var n=a(12),r=a.n(n),o=a(9),s=a.n(o),i=a(10),l=a.n(i),c=a(13),u=a.n(c),p=a(14),d=a.n(p),m=a(0),g=a.n(m),v=a(153),f=a(1035),h=a.n(f),b=function(e){function t(){return s()(this,t),u()(this,(t.__proto__||r()(t)).apply(this,arguments))}return d()(t,e),l()(t,[{key:"render",value:function(){return g.a.createElement(v.a,{viewBox:"0 0 298 123.5",name:"cloud"},g.a.createElement("image",{xlinkHref:h.a,height:"100%",width:"100%"}))}}]),t}(g.a.Component);t.a=b},1035:function(e,t){e.exports="//vimalesan.herokuapp.com/support"+"./fonts/EmptyCloud.ad84742889552ed3919f.svg"},1038:function(e,t,a){"use strict";var n=a(12),r=a.n(n),o=a(9),s=a.n(o),i=a(10),l=a.n(i),c=a(13),u=a.n(c),p=a(14),d=a.n(p),m=a(0),g=a.n(m),v=a(1),f=a.n(v),h=a(1043),b=a.n(h),A=a(1034),_=a(8),y=a(109),E=function(e){function t(){return s()(this,t),u()(this,(t.__proto__||r()(t)).apply(this,arguments))}return d()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.subtabName,a=e.link,n=e.noNeedToShowAdd,r=e.noNeedToShowHelp,o=e.emptyMessage1,s=e.emptyMessage2,i=e.children,l=e.needClickHere,c=e.onClick;return t=t.toLowerCase(),g.a.createElement("div",{className:b.a.emptyImgdiv},g.a.createElement("div",{className:b.a.emptyImgbg},g.a.createElement(A.a,null)),g.a.createElement("div",{className:b.a.txtGrop},g.a.createElement("div",{className:b.a.dtemptytxt},o||g.a.createElement("span",null,_.f.getI18NValue("support.tab.empty.message",[t]))),!n&&g.a.createElement("div",{className:b.a.dtemptysubtxt},_.f.getI18NValue("support.tab.add.message",[t]),g.a.createElement("span",{className:b.a.plr10},i)," ",_.f.getI18NValue("support.icon")),s&&g.a.createElement("div",{className:b.a.dtemptysubtxt},g.a.createElement("span",null,s),l?g.a.createElement("span",{className:b.a.clickHere,onClick:c},_.f.getI18NValue("support.api.click.here")):null),!r&&g.a.createElement("div",null,g.a.createElement("div",{className:b.a.dtemptysubtxt2},_.f.getI18NValue("tab.request.emptypages.learnmore"),g.a.createElement(y.a,{className:b.a.slalink,target:"_blank",href:a},_.f.getI18NValue("support.api.click.here"))))))}}]),t}(g.a.Component);t.a=E,E.propTypes={children:f.a.node,emptyMessage1:f.a.string,emptyMessage2:f.a.string,link:f.a.string,needClickHere:f.a.bool,noNeedToShowAdd:f.a.bool,noNeedToShowHelp:f.a.bool,onClick:f.a.func,subtabName:f.a.string},E.defaultProps={needClickHere:!1}},1043:function(e,t,a){e.exports={emptyImgdiv:"SubtabEmptystate-module__emptyImgdiv",emptyImgbg:"SubtabEmptystate-module__emptyImgbg",dtemptytxt:"SubtabEmptystate-module__dtemptytxt common-module__semibold common-module__ftsmooth",dtemptysubtxt:"SubtabEmptystate-module__dtemptysubtxt undefined",dtemptysep:"SubtabEmptystate-module__dtemptysep",dtemptysubtxt2:"SubtabEmptystate-module__dtemptysubtxt2 undefined",slalink:"SubtabEmptystate-module__slalink",txtGrop:"SubtabEmptystate-module__txtGrop",plr10:"SubtabEmptystate-module__plr10",clickHere:"SubtabEmptystate-module__clickHere"}},1046:function(e,t,a){e.exports={container:"PlusIcon-module__container common-module__dinblk"}},1055:function(e,t,a){"use strict";var n=a(38),r=a.n(n),o=a(12),s=a.n(o),i=a(9),l=a.n(i),c=a(10),u=a.n(c),p=a(13),d=a.n(p),m=a(14),g=a.n(m),v=a(0),f=a.n(v),h=a(1),b=a.n(h),A=a(16),_=a(65),y=a(1023),E=a(1070),I=a.n(E),N=function(e){function t(){return l()(this,t),d()(this,(t.__proto__||s()(t)).apply(this,arguments))}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.onAdd,a=e.getLeftPlaceHolder,n=e.title,o=e.label,s=e.getRightPlaceHolder,i=e.type,l=e.leftClassName,c=e.rightClassName,u=e.needBorder,p=void 0===u||u,d=e.needShadow,m=void 0===d||d,g=e.needPlusIconLine,v=void 0===g||g,h=e.children;return f.a.createElement(_.CardHeader,r()({className:I.a.tabHead+" "+(m?I.a.shadowStyle:"")+" "+(p?I.a.borderStyle:"")},this.props),f.a.createElement(A.Container,{alignBox:"row",className:""+I.a[i],align:"vertical"},t||h?f.a.createElement(A.Box,{className:I.a.left+" "+(v?I.a.plusIconLine:"")},t?f.a.createElement(y.a,{onClick:t}):h):null,n?f.a.createElement(A.Box,{className:I.a.title},n):null,a&&f.a.createElement(A.Box,{flexible:!0,shrink:!0,adjust:!!s,className:""+(l||"")},o?f.a.createElement("div",{className:I.a.label},o):null,a),s&&f.a.createElement(A.Box,{flexible:!0,shrink:!0,adjust:!!a,className:" "+(c||"")},f.a.createElement(A.Container,{alignBox:"row",align:"vertical",className:I.a.aside},s))))}}]),t}(f.a.Component);N.propTypes={children:b.a.element,getLeftPlaceHolder:b.a.func,getRightPlaceHolder:b.a.func,label:b.a.string,leftClassName:b.a.string,needBorderShadow:b.a.bool,needPlusIconLine:b.a.bool,onAdd:b.a.func,rightClassName:b.a.string,title:b.a.string,type:b.a.oneOf(["primary","secondary"])},N.defaultProps={type:"primary"};var C=function(e){function t(){return l()(this,t),d()(this,(t.__proto__||s()(t)).apply(this,arguments))}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.scroll,n=e.className,r=e.eleRef,o=e.dataId,s=e.onScroll;return console.log("====onScroll"),f.a.createElement(_.CardContent,{scroll:a,isScrollAttribute:!0,onScroll:s,className:n||"",eleRef:r,dataId:o},t)}}]),t}(f.a.Component);C.propTypes={children:b.a.element,className:b.a.element,dataId:b.a.string,eleRef:b.a.func,scroll:b.a.oneOf(["vertical"])},C.defaultProps={scroll:"vertical"};var S=function(e){function t(){return l()(this,t),d()(this,(t.__proto__||s()(t)).apply(this,arguments))}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this.props.children;return f.a.createElement(_.Card,r()({isScrollAttribute:!0,dataId:"subTabLayout"},this.props,{childTypes:{cardHeader:N,cardContent:C}}),e)}}]),t}(f.a.Component),O=S;S.propTypes={children:b.a.element},a.d(t,"c",function(){return O}),a.d(t,"b",function(){return N}),a.d(t,"a",function(){return C})},1070:function(e,t,a){e.exports={tabHead:"SubtabLayout-module__tabHead",shadowStyle:"SubtabLayout-module__shadowStyle",left:"SubtabLayout-module__left",plusIconLine:"SubtabLayout-module__plusIconLine",borderStyle:"SubtabLayout-module__borderStyle",aside:"SubtabLayout-module__aside common-module__justifyFend",title:"SubtabLayout-module__title",label:"SubtabLayout-module__label",primary:"SubtabLayout-module__primary",secondary:"SubtabLayout-module__secondary"}},1156:function(e,t,a){"use strict";var n=a(12),r=a.n(n),o=a(9),s=a.n(o),i=a(10),l=a.n(i),c=a(13),u=a.n(c),p=a(14),d=a.n(p),m=a(0),g=a.n(m),v=a(1),f=a.n(v),h=a(1157),b=a.n(h),A=a(30),_=a(80),y=a.n(_),E=a(72),I=a.n(E),N=a(112),C=a.n(N),S=a(240),O=a.n(S),k=function(e){function t(e){s()(this,t);var a=u()(this,(t.__proto__||r()(t)).call(this,e));return a.handleSelect=a.handleSelect.bind(a),a.handleTogglePopup=a.handleTogglePopup.bind(a),a}return d()(t,e),l()(t,[{key:"handleSelect",value:function(e,t,a,n){var r=this.props,o=(r.objValues,r.onSelect),s=r.togglePopup;void 0!==o&&o(t,e),s(n)}},{key:"handleTogglePopup",value:function(e){(0,this.props.togglePopup)(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.objValues,n=t.togglePopup,r=t.arrowPosition,o=t.selectedId,s=t.selectedName,i=t.isPopupOpen,l=t.isPopupReady,c=(t.position,t.getTargetRef),u=t.getContainerRef,p=t.boxPosition;s=s||a.find(function(e){return e.id===o}).name;var d=a.map(function(t,a){var n=o?t.id===o:t.name===s;return 1!=t.isTitle?g.a.createElement(C.a,{autoHover:!0,value:t.name,key:a,onClick:e.handleSelect,id:t.id,active:n}):g.a.createElement("div",{className:b.a.heading,key:a},g.a.createElement(O.a,{text:t.name}))});return g.a.createElement("div",{className:b.a.container,"data-id":"subfiltertestId1"},g.a.createElement("span",{className:b.a.box,onClick:n,ref:c},g.a.createElement("div",{className:b.a.textContainer},g.a.createElement("span",{"data-id":s.includes("All")?"AllTasksOption":s,className:b.a.text,"data-title":s},s),g.a.createElement("span",{className:b.a.icon},g.a.createElement(A.TopbandFontIcon,{name:"down",size:"6"}))),i?g.a.createElement(I.a,{isActive:l,size:"small",boxPosition:p,arrowPosition:r,getRef:u,isAnimate:!0},g.a.createElement("div",{className:b.a.popup,"data-id":"SubfilterClick"},d)):null))}}]),t}(m.Component);k.propTypes={arrowPosition:f.a.string,boxPosition:f.a.string,getContainerRef:f.a.func,getTargetRef:f.a.func,isPopupOpen:f.a.bool,isPopupReady:f.a.bool,objValues:f.a.array,onSelect:f.a.func,position:f.a.string,selectedId:f.a.string,selectedName:f.a.string,togglePopup:f.a.func},k.defaultProps={boxPosition:"bottomRight",arrowPosition:"start"},t.a=y()(k)},1157:function(e,t,a){e.exports={container:"SubFilter-module__container",box:"SubFilter-module__box common-module__offSelection",text:"SubFilter-module__text common-module__textCaps",icon:"SubFilter-module__icon"}},1292:function(e,t,a){"use strict";a.d(t,"b",function(){return c}),a.d(t,"c",function(){return u}),a.d(t,"a",function(){return p});var n=a(2),r=a.n(n),o=a(3),s=a(15),i=a(6),l=a(7);function c(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c="?status=ACTIVE&isConfirmed=true";return c+="&departmentIds="+e+"&from="+t+"&limit="+a+(n.length>1?"&searchStr=*${searchStr}*":""),{types:Object(i.m)("SHARED_DEPARTMENT_AGENTS"),callAPI:function(e,n){return Object(s.a)("/api/v1/agents"+c,!1,{orgId:e.currentOrgId}).get().then(function(e){var n=e.data.length<a;return r()({},Object(l.normalize)(204!==e.responseStatus?e.data:[],Object(l.arrayOf)(Object(l.schema)(o.L.AGENT_L))),{from:t,noMoreData:n})})}}}function u(e){return{type:"OPEN_TICKETSHARE_FORM",data:e}}function p(){return{type:"CLOSE_TICKETSHARE_FORM"}}},1381:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(12),s=a.n(o),i=a(9),l=a.n(i),c=a(10),u=a.n(c),p=a(13),d=a.n(p),m=a(14),g=a.n(m),v=a(0),f=a.n(v),h=a(1),b=a.n(h),A=a(1382),_=a.n(A),y=a(73),E=a.n(y),I=a(203),N=a.n(I),C=a(99),S=a.n(C),O=a(235),k=a.n(O),j=a(8),L=function(e){function t(e){l()(this,t);var a=d()(this,(t.__proto__||s()(t)).call(this,e));return a.state={},a.onApproverChange=a.onApproverChange.bind(a),a.addApproval=a.addApproval.bind(a),a}return g()(t,e),u()(t,[{key:"onApproverChange",value:function(e){var t=this.props.onApproverChange;t(e)}},{key:"addApproval",value:function(){var e=this.props,t=e.subject,a=e.description,n=e.selectedAgents,o=e.createApproval;if(""===t||!n.length)return""===t?this.setState({isSubjectEmpty:!0}):this.setState({isSubjectEmpty:!1}),void(n.length?this.setState({isSelectedAgentsEmpty:!1}):this.setState({isSelectedAgentsEmpty:!0}));this.setState({isSubjectEmpty:!1,isSelectedAgentsEmpty:!1});var s={subject:t,approverIds:n};a&&(s=r()(s,{description:a})),o(s)}},{key:"render",value:function(){var e=this.props,t=e.closeForm,a=e.agentsList,n=e.getAgents,r=e.isPeekView,o=e.autoFetch,s=e.isFromBlueprint,i=e.onSubjectChange,l=e.onDescriptionChange,c=e.selectedAgents,u=e.subject,p=e.description,d=this.state,m=d.isSubjectEmpty,g=d.isSelectedAgentsEmpty;return f.a.createElement("div",{className:_.a.addApprove+" "+(s?_.a.bluePrintLayar:"")},f.a.createElement("div",{className:r?_.a.peekapproveForm:_.a.approveForm,"data-id":"approveForm"},f.a.createElement("div",{className:_.a.listForm},f.a.createElement("div",{className:_.a.formTitle},j.f.getI18NValue("support.label.select.approver")),f.a.createElement("div",{className:_.a.formInput},f.a.createElement(N.a,{valueField:"id",textField:"name",selectedOptions:c,options:a,onChange:this.onApproverChange,getNextOptions:n,isNextOptions:o,noMoreOptionsMessage:j.f.getI18NValue("support.label.no.match.found"),emptyMessage:g?j.f.getI18NValue("support.label.empty.approver"):null}))),f.a.createElement("div",{className:_.a.listForm},f.a.createElement("div",{className:_.a.formTitle},j.f.getI18NValue("support.feedback.label.subject")),f.a.createElement("div",{className:_.a.formInput},f.a.createElement(S.a,{onChange:i,value:u,errorMsg:m?j.f.getI18NValue("crm.field.empty.check",[j.f.getI18NValue("support.feedback.label.subject")]):null}))),f.a.createElement("div",{className:_.a.listForm},f.a.createElement("div",null,j.f.getI18NValue("support.feedback.label.description")),f.a.createElement("div",{className:_.a.formInput},f.a.createElement(k.a,{text:p,animated:!0,resize:"vertical",onChange:l}))),s?null:f.a.createElement("div",{className:_.a.buttonDiv},f.a.createElement("span",null,f.a.createElement(E.a,{text:j.f.getI18NValue("request.actions.submit.for.approval"),palette:"primaryFilled",size:"medium",onClick:this.addApproval})),f.a.createElement("span",{className:_.a.cancelBtn},f.a.createElement(E.a,{text:j.f.getI18NValue("support.label.cancel"),palette:"secondary",size:"medium",onClick:t})))))}}]),t}(f.a.Component);t.a=L,L.defaultProps={isFromBlueprint:!1},L.propTypes={agentsList:b.a.oneOfType([b.a.object,b.a.array]),autoFetch:b.a.bool,closeForm:b.a.func,createApproval:b.a.func,description:b.a.string,getAgents:b.a.oneOfType([b.a.func,b.a.bool]),isFromBlueprint:b.a.bool,isPeekView:b.a.bool,onApproverChange:b.a.func,onDescriptionChange:b.a.func,onSubjectChange:b.a.func,selectedAgents:b.a.array,subject:b.a.string}},1382:function(e,t,a){e.exports={addApprove:"ApprovalsForm-module__addApprove",approveForm:"ApprovalsForm-module__approveForm",peekapproveForm:"ApprovalsForm-module__peekapproveForm ApprovalsForm-module__approveForm",formTitle:"ApprovalsForm-module__formTitle",formInput:"ApprovalsForm-module__formInput",listForm:"ApprovalsForm-module__listForm",buttonDiv:"ApprovalsForm-module__buttonDiv",cancelBtn:"ApprovalsForm-module__cancelBtn",bluePrintLayar:"ApprovalsForm-module__bluePrintLayar"}},1573:function(e,t,a){},1574:function(e,t,a){e.exports={tickethistoryCont:"ApprovalsList-module__tickethistoryCont",avtDiv:"ApprovalsList-module__avtDiv common-module__rounded",dateFont:"ApprovalsList-module__dateFont",timeFont:"ApprovalsList-module__timeFont",histContent:"ApprovalsList-module__histContent common-module__semibold common-module__ftsmooth",mw80:"ApprovalsList-module__mw80",tickHisContent:"ApprovalsList-module__tickHisContent",ticketListdiv:"ApprovalsList-module__ticketListdiv",fntTimeicn:"ApprovalsList-module__fntTimeicn",apprcnt:"ApprovalsList-module__apprcnt",dot:"ApprovalsList-module__dot",aprvedApproved:"ApprovalsList-module__aprvedApproved",aprvedRejected:"ApprovalsList-module__aprvedRejected",aprvedPending:"ApprovalsList-module__aprvedPending",btnDiv:"ApprovalsList-module__btnDiv",r10:"ApprovalsList-module__r10",cancelBtn:"ApprovalsList-module__cancelBtn",wrap:"ApprovalsList-module__wrap",inActive:"ApprovalsList-module__inActive common-module__semibold common-module__ftsmooth",ticketHistorylist:"ApprovalsList-module__ticketHistorylist"}},656:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a.n(n),o=a(9),s=a.n(o),i=a(10),l=a.n(i),c=a(13),u=a.n(c),p=a(14),d=a.n(p),m=a(0),g=a.n(m),v=a(1),f=a.n(v),h=a(26),b=a(23),A=a.n(b),_=a(5),y=a.n(_),E=a(15),I=a(6),N=a(7),C=a(3);var S=a(956),O=a(1292),k=a(1038),j=a(1055),L=(a(1573),a(1156)),P=a(1574),T=a.n(P),D=a(64),F=a.n(D),w=a(30),x=a(73),V=a.n(x),R=a(8),M=function(e){function t(){return s()(this,t),u()(this,(t.__proto__||r()(t)).apply(this,arguments))}return d()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.currentUserId,r=t.updateApproval,o=t.isPeekView,s=t.isReadOnly,i=t.haveChangePermission,l=null;return g.a.createElement("div",{className:T.a.wrap},a.map(function(t,a){var c=t.id,u=t.subject,p=t.description,d=t.requestedTime,m=t.approver,v=t.requester,f=t.status,h=t.processedTime,b=R.f.userDateFormat(new Date(d),{},"lateby","left",!1,function(){return"DD MMM YYYY"}),A=R.f.userDateFormat(new Date(d),{},"lateby","left",!1,function(){return"hh:mm A"});b!=l?l=b:b=null,h&&(h=R.f.userDateFormat(new Date(h),{},"lateby","left",!1,function(){return"DD/MM/YYYY hh:mm A"}));var _=Object(I.e)(m.firstName,m.lastName),y=Object(I.e)(v.firstName,v.lastName);return g.a.createElement("div",{className:T.a.tickethistoryCont,key:a},g.a.createElement("div",null,g.a.createElement("span",{className:T.a.avtDiv},g.a.createElement(F.a,{src:m.photoUrl,name:_,size:"xmedium"})),g.a.createElement("div",null,g.a.createElement("div",{className:T.a.tickHisContent},g.a.createElement("div",null,b&&g.a.createElement("div",{className:T.a.dateFont},b),g.a.createElement("div",{className:T.a.timeFont},A),"Pending"!=f||i?null:g.a.createElement("div",{className:T.a.inActive},R.f.getI18NValue("support.label.status.inactive"))),g.a.createElement("div",{className:T.a.histContent+" "+(n==m.id&&!h&&T.a.mw80)},y," ",R.f.getI18NValue("support.request.actions.approval.sent.to")," ",_),g.a.createElement("div",{className:T.a.apprcnt},h?g.a.createElement("span",null,g.a.createElement("span",{className:T.a.fntTimeicn},g.a.createElement(w.CommonFontIcon,{name:"clock",size:"small"})),g.a.createElement("span",null,g.a.createElement("div",{className:T.a.timeFont},h)),g.a.createElement("span",{className:T.a.dot},".")):null,g.a.createElement("span",{className:T.a["aprved"+f]},f)),g.a.createElement("span",null,g.a.createElement("div",{className:T.a.ticketListdiv},g.a.createElement("span",{className:T.a.ticketHistorylist},R.f.getI18NValue("crm.label.subject")),g.a.createElement("span",null,g.a.createElement("span",null,u))),p.length?g.a.createElement("div",{className:T.a.ticketListdiv},g.a.createElement("span",{className:T.a.ticketHistorylist},R.f.getI18NValue("support.feedback.label.description")),g.a.createElement("span",null,p)):null)),n!=m.id||h||s||!i?null:g.a.createElement("span",{className:T.a.btnDiv+" "+(o&&T.a.r10),"data-id":"buttonCont"},g.a.createElement("span",null,g.a.createElement(V.a,{text:R.f.getI18NValue("support.request.approval.option.approve"),palette:"primaryFilled",size:o?"small":"medium",onClick:r.bind(e,c,"Approved")})),g.a.createElement("span",{className:T.a.cancelBtn},g.a.createElement(V.a,{text:R.f.getI18NValue("support.request.approval.option.reject"),palette:"secondary",size:o?"small":"medium",onClick:r.bind(e,c,"Rejected")}))))))}))}}]),t}(g.a.Component),H=M;M.propTypes={currentUserId:f.a.string,data:f.a.array,haveChangePermission:f.a.bool,isPeekView:f.a.bool,isReadOnly:f.a.bool,updateApproval:f.a.func};var z=a(1381),B=a(1023),G=(a(17),a(238)),q=function(e){function t(e){s()(this,t);var a=u()(this,(t.__proto__||r()(t)).call(this,e));return a.state={from:0,limit:15,mode:R.f.getI18NValue("support.tabs.request.allapprovals"),noMoreData:!1,isQueueySend:!1,isEmpty:!1,data:[],page:"list",agentsList:[],agentFrom:1,noMoreAgentData:!1,notAccessible:!1,subject:"",description:"",selectedAgents:[]},a.fetchData=a.fetchData.bind(a),a.updateApproval=a.updateApproval.bind(a),a.openForm=a.openForm.bind(a),a.closeForm=a.closeForm.bind(a),a.getAgentsList=a.getAgentsList.bind(a),a.createApproval=a.createApproval.bind(a),a.setAgentsData=a.setAgentsData.bind(a),a.onSubjectChange=a.onSubjectChange.bind(a),a.onDescriptionChange=a.onDescriptionChange.bind(a),a.onApproverChange=a.onApproverChange.bind(a),a}return d()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.fetchData(this.state.from)}},{key:"onSubjectChange",value:function(e){this.setState({subject:e})}},{key:"onDescriptionChange",value:function(e){this.setState({description:e})}},{key:"onApproverChange",value:function(e){this.setState({selectedAgents:e})}},{key:"fetchData",value:function(e){var t=this,a=this.props,n=a.getApprovals,r=a.ticketId,o=this.state,s=o.limit,i=o.mode==R.f.getI18NValue("support.tabs.request.pendingapprovals")?"Pending":null;return n(r,e,s,i).then(function(a){var n=a.data,r=n.noMoreData,o=n.isEmpty;t.setState({noMoreData:r,isEmpty:o,from:e})},function(e){var a=JSON.parse(e.response).message;a!=C.R&&a!=C.S||t.setState({notAccessible:!0})})}},{key:"updateApproval",value:function(e,t){var a=this.props,n=a.ticketId,r=a.updateApproval;r(n,e,t)}},{key:"createApproval",value:function(e){var t=this.props,a=t.ticketId,n=t.createApproval;n(a,e).then(this.closeForm)}},{key:"closeForm",value:function(){this.setState({page:"list"})}},{key:"openForm",value:function(){this.setState({page:"form",subject:"",description:"",selectedAgents:[]}),this.getAgentsList(this.state.agentFrom)}},{key:"getFullAccessDepIds",value:function(e,t){var a=[t];return e.forEach(function(e){var t=e.id;"READ_WRITE"==e.type&&a.push(t)}),a}},{key:"getAgentsList",value:function(e){var t=this;e=1===e?e:this.state.agentFrom+50;var a=this.props,n=a.getAgentsList,r=a.departmentId,o=a.sharedDepartments,s=void 0===o?[]:o,i=a.getSharedDepartmentAgents;return s.length?i(this.getFullAccessDepIds(s,r),e,50).then(function(a){a&&t.setState({noMoreAgentData:a.data.noMoreData,agentFrom:e});var n=t.props,r=n.agentsId,o=n.agentsObject;t.setAgentsData(r,o)}):n(r,e,50).then(function(a){a&&t.setState({noMoreAgentData:a.data.noMoreData,agentFrom:e});var n=t.props,r=n.agentsId,o=n.agentsObject;t.setAgentsData(r,o)})}},{key:"setAgentsData",value:function(e,t){var a=[];if(e&&e.length)for(var n=0;n<e.length;n++){var r=t[e[n]],o=r.id,s=r.isConfirmed,i=r.firstName,l=r.lastName,c=r.rolePermissionType;if(s&&"Light"!=c){var u={id:o,name:Object(I.e)(i,l)};a.push(u)}}this.setState({agentsList:a})}},{key:"componentWillReceiveProps",value:function(e,t){if(this.props.agentsId!=e.agentsId||this.state.page!=t.page){var a=e.agentsId,n=e.agentsObject;this.setAgentsData(a,n)}}},{key:"getRightPlaceHolder",value:function(){var e=this,t=this.state.mode,a=R.f.getI18NValue("support.tabs.request.allapprovals"),n=t==a?[{name:R.f.getI18NValue("support.tabs.request.pendingapprovals")}]:[{name:a}];return g.a.createElement(L.a,{selectedName:t,objValues:n,onSelect:function(t){e.setState({from:0,mode:t},function(){e.fetchData(0)})}})}},{key:"render",value:function(){var e=this.state,t=e.mode,a=e.isEmpty,n=e.noMoreData,r=e.page,o=e.agentsList,s=e.noMoreAgentData,i=e.notAccessible,l=e.subject,c=e.description,u=e.selectedAgents,p=this.props,d=p.count,m=p.currentUserId,v=p.isPeekView,f=p.haveEditPermission,h=p.isReadOnly,b=p.approvals,A=p.isSpam,_=p.moduleLabel,y=p.haveChangePermission,E=g.a.createElement(B.a,{onClick:this.openForm}),I=g.a.createElement(j.b,{onAdd:f&&this.openForm&&y,getLeftPlaceHolder:this.getRightPlaceHolder()});return i?g.a.createElement(G.a,null):"form"==r?g.a.createElement(z.a,{closeForm:this.closeForm,agentsList:o,getAgents:this.getAgentsList,autoFetch:!s,createApproval:this.createApproval,isPeekView:v,subject:l,description:c,selectedAgents:u,onSubjectChange:this.onSubjectChange,onDescriptionChange:this.onDescriptionChange,onApproverChange:this.onApproverChange}):a&&t==R.f.getI18NValue("support.tabs.request.pendingapprovals")?g.a.createElement(j.c,null,I,A?g.a.createElement(k.a,{subtabName:t,emptyMessage2:R.f.getI18NValue("support.spam.emptystate.message",[_.toLowerCase(),R.f.getI18NValue("tabs.request.approval")]),noNeedToShowAdd:!0,noNeedToShowHelp:!0}):g.a.createElement(k.a,{subtabName:t,noNeedToShowAdd:!0,link:"http://www.zoho.com/support/help/associates-with-requests.html#Add_Attachment"})):"0"!=d||b.length?g.a.createElement(j.c,{needToFetch:!0,noMoreData:n,fetchData:!n&&this.fetchData,noNeedUpScroll:!0},I,g.a.createElement(j.a,null,g.a.createElement(H,{data:b,currentUserId:m,updateApproval:this.updateApproval,isPeekView:v,isReadOnly:h,haveChangePermission:y}))):A?g.a.createElement(k.a,{subtabName:R.f.getI18NValue("tabs.request.approval"),emptyMessage2:R.f.getI18NValue("support.spam.emptystate.message",[_.toLowerCase(),R.f.getI18NValue("tabs.request.approval").toLowerCase()]),noNeedToShowAdd:!0,noNeedToShowHelp:!0}):g.a.createElement(k.a,{subtabName:R.f.getI18NValue("tabs.request.approvals"),noNeedToShowAdd:!f||h,link:"http://www.zoho.com/support/help/associates-with-requests.html#Add_Attachment"},E)}}]),t}(m.Component);q.propTypes={agentsId:f.a.array,agentsObject:f.a.object,approvals:f.a.array,count:f.a.string,createApproval:f.a.func,currentUserId:f.a.string,departmentId:f.a.string,getAgentsList:f.a.func,getApprovals:f.a.func,getSharedDepartmentAgents:f.a.func,haveChangePermission:f.a.bool,haveEditPermission:f.a.bool,isPeekView:f.a.bool,isReadOnly:f.a.bool,isSpam:f.a.bool,moduleLabel:f.a.string,sharedDepartments:f.a.array,ticketId:f.a.string,updateApproval:f.a.func};t.default=Object(h.connect)(function(e,t){var a=t.departmentId,n=t.sharedDepartments,r=t.ticketId,o=e.sharedDepartmentAgentIds,s=e.activeAgents,i=e.myInfo,l=e.module,c=n.length?o:s[a],u=l.agent,p=l.approval,d=l.ticket[r].approvalIds,m=Object(I.h)(d,p);return{currentUserId:i.id,agentsId:c,agentsObject:u,approvals:m}},{getApprovals:function(e,t,a,n){var r="from="+t+"&limit="+a;return r=n?r+"&status="+n:r,{types:Object(I.m)("APPROVALSLIST"),callAPI:function(n,o){return Object(E.a)("/api/v1/tickets/"+e+"/approvals?"+r,!1,{orgId:n.currentOrgId}).get().then(function(n){var r=Object(N.normalize)(n.data,Object(N.arrayOf)(Object(N.schema)(C.L.APPROVAL_L))),s=n.data.length<a,i=o().module.ticket[e].approvalIds,l=0==t?r.result:i.concat(r.result),c=!r.result.length&&0==t;return{entities:{approval:r.entities.approval,ticket:y()({},e,{approvalIds:l})},noMoreData:s,isEmpty:c}})}}},updateApproval:function(e,t,a){return{types:Object(I.m)("UPDATEAPPROVAL"),callAPI:function(n){return Object(E.a)("/api/v1/tickets/"+e+"/approvals/"+t,!1,{orgId:n.currentOrgId}).patch("",{status:a}).then(function(e){return{entities:{approval:y()({},t,e)}}})}}},createApproval:function(e,t){return{types:Object(I.m)("CREATEAPPROVAL"),callAPI:function(a,n){return Object(E.a)("/api/v1/tickets/"+e+"/approvals",!1,{orgId:a.currentOrgId}).post("",t).then(function(t){var a=Object(N.normalize)(t.approvals,Object(N.arrayOf)(Object(N.schema)(C.L.APPROVAL_L))),r=n().module.ticket[e],o=r.approvalIds,s=void 0===o?[]:o,i=r.approvalCount,l=void 0===i?0:i,c=[].concat(A()(a.result),A()(s)),u=parseInt(l)+a.result.length;return{entities:{approval:a.entities.approval,ticket:y()({},e,{approvalIds:c,approvalCount:u})}}})}}},getAgentsList:S.g,getSharedDepartmentAgents:O.b})(q)},956:function(e,t,a){"use strict";a.d(t,"i",function(){return d}),a.d(t,"g",function(){return m}),a.d(t,"b",function(){return g}),a.d(t,"j",function(){return v}),a.d(t,"h",function(){return f}),a.d(t,"c",function(){return h}),a.d(t,"e",function(){return b}),a.d(t,"a",function(){return A}),a.d(t,"k",function(){return y}),a.d(t,"d",function(){return I}),a.d(t,"f",function(){return N}),a.d(t,"l",function(){return C});a(20);var n=a(2),r=a.n(n),o=a(15),s=a(6),i=a(7),l=a(17),c=a(46),u=a(3),p=a(39);function d(e){return{types:Object(s.m)("AGENTS_COUNT"),callAPI:function(t){var a=Object(l.r)(t);return Object(o.a)("/api/v1/agentsTicketsCount?"+Object(c.a)(t)+"&agentIds="+e,!1,{orgId:t.currentOrgId}).get().then(function(e){return 204!==e.responseStatus?(e.data=e.data.map(function(e){return r()({},e,{id:e.agentId})}),{countData:e.data,deptId:a}):{}})}}}function m(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{types:Object(s.m)(u.L.AGENT),callAPI:function(s){return Object(o.a)("/api/v1/agents?"+(e&&"allDepartment"!==e?"departmentId="+e:"")+"&from="+t+"&limit="+a+"&status=ACTIVE&isConfirmed="+n,!1,{orgId:s.currentOrgId}).get().then(function(t){if(204!==t.responseStatus){var n=t.data.length<a,o=Object(i.normalize)(t.data,Object(i.arrayOf)(Object(i.schema)(u.L.AGENT_L)));return r()(o,{noMoreData:n,depId:e})}return{entities:{noMoreData:!0},result:[]}})}}}function g(e,t){return{types:Object(s.m)(u.L.AGENT),callAPI:function(a){return Object(o.a)("/api/v1/agents/"+e,!1,{orgId:a.currentOrgId}).get().then(function(e){var a=Object(i.normalize)(e,Object(i.schema)(u.L.AGENT_L));return r()(a,{depId:t})})}}}function v(e,t,a){return{types:Object(s.m)("AGENT_SEARCH"),callAPI:function(n){return Object(o.a)("/api/v1/agents?searchStr="+e+"&from="+t+"&limit="+a,!1,{orgId:n.currentOrgId}).get().then(function(e){if(204!==e.responseStatus){var n=e.data.length<a,o=Object(i.normalize)(e.data,Object(i.arrayOf)(Object(i.schema)(u.L.AGENT_L)));return r()(o,{noMoreData:n})}return 1===t?{entities:{noMoreData:!0,isEmpty:!0},result:[]}:{entities:{noMoreData:!0},result:[]}})}}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],a=arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.u,p=arguments[4];return{types:Object(s.m)(u.L.AGENT),callAPI:function(s){var d={activeAgents:"status=ACTIVE",deActiveAgents:"status=DISABLED",notConfirmedAgents:"isConfirmed=false",allAgents:"",activeConfirmedAgents:"status=ACTIVE&isConfirmed=true",activeConfirmedNonLightAgents:"status=ACTIVE&isConfirmed=true&rolePermissionType=${NON_LIGHT}"}[e.replace("Search","")]||"",m=p||Object(l.r)(s),g=p?"&departmentId="+p:Object(c.a)(s,!0),v="/api/v1/agents?"+(d?d+"&":"")+"from="+t+"&limit="+(2*n>200?200:2*n)+(a?"&searchStr=*"+a+"*":"")+g;return Object(o.a)(encodeURI(v),!1,{orgId:s.currentOrgId}).get().then(function(o){return r()({},Object(i.normalize)(204!==o.responseStatus?o.data:[],Object(i.arrayOf)(Object(i.schema)(u.L.AGENT_L))),{deptId:m,from:t,limit:n,isNext:!!o.data&&o.data.length>n,searchStr:a,agentType:e})},function(e){throw e})}}}function h(e){return{types:Object(s.m)("AGENT"),shouldCallAPI:function(){return e.length>=1},callAPI:function(t){return Object(o.a)("/api/v1/agentsByIds?agentIds="+e.join(),!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(i.normalize)(204!==e.responseStatus?e.data:[],Object(i.arrayOf)(Object(i.schema)(u.L.AGENT_L)))})}}}function b(e){return{types:Object(s.m)("TEAM_AGENT"),callAPI:function(t){return Object(o.a)("/api/v1/teams/"+e+"/members",!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(i.normalize)(e.members,Object(i.arrayOf)(Object(i.schema)(u.L.AGENT_L)))})}}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a="";return t.map(function(t){void 0!==e[t]&&(a+="&"+t+"="+e[t])}),a}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a=arguments[2];return void 0!==e[t]?e[t]:a}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_(e,"searchType","string"),a=e.searchStr;return a&&(a="string*"==t?a+"*":"*string*"==t?"*"+a+"*":a),a}function E(e){var t=e.isConfirmed,a=e.status;switch(a){case p.a:return p.a;case p.d:return p.d;case p.c:return p.c;default:if(void 0!==t&&!t)return p.l;if(void 0===a)return p.b}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.from=_(e,"from","1"),e.limit=_(e,"limit","100"),e.searchStr=y(e);var t=e.from>1?p.k:p.j;return{types:Object(s.m)(t),callAPI:function(t){var a="/api/v1/agents?orgId="+t.currentOrgId;return a+=A(e,["from","limit","status","isConfirmed","searchStr","departmentId","departmentIds","profileIds","roleIds"]),Object(o.a)(a).get().then(function(t){return r()(Object(i.normalize)(void 0!==t.data?t.data:[],Object(i.arrayOf)(Object(i.schema)(u.L.AGENT_L))),{status:E(e)})})}}}function N(e,t,a){var n={status:e,isConfirmed:t,includeLightAgent:a};return n.includeLightAgent=_(n,"includeLightAgent",!0),{types:Object(s.m)(p.i),callAPI:function(e){var t="/api/v1/agents/count?orgId="+e.currentOrgId;return t+=A(n,["status","isConfirmed","includeLightAgent"]),Object(o.a)(t).get().then(function(e){return r()({},e,{status:E(n)})})}}}function C(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:p.m,data:{isEnabled:e}}}}}]);