(window.deskappJsonp=window.deskappJsonp||[]).push([[18],{1048:function(e,t,a){"use strict";var n=a(12),o=a.n(n),r=a(9),c=a.n(r),l=a(10),i=a.n(l),s=a(13),u=a.n(s),d=a(14),p=a.n(d),h=a(0),m=a.n(h),f=a(153),_=a(1049),v=a.n(_),S=function(e){function t(){return c()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){return m.a.createElement(f.a,{viewBox:"0 0 298 123.5",name:"contact"},m.a.createElement("image",{xlinkHref:v.a,height:"100%",width:"100%"}))}}]),t}(m.a.Component);t.a=S},1049:function(e,t){e.exports="//vimalesan.herokuapp.com/support"+"./fonts/EmptyContact.3a5a749e7a8c64b5799d.svg"},1059:function(e,t,a){"use strict";var n=a(12),o=a.n(n),r=a(9),c=a.n(r),l=a(10),i=a.n(l),s=a(13),u=a.n(s),d=a(14),p=a.n(d),h=a(0),m=a.n(h),f=a(153),_=a(1060),v=a.n(_),S=function(e){function t(){return c()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){return m.a.createElement(f.a,{viewBox:"0 0 298 123.5",name:"accounts"},m.a.createElement("image",{xlinkHref:v.a,height:"100%",width:"100%"}))}}]),t}(m.a.Component);t.a=S},1060:function(e,t){e.exports="//vimalesan.herokuapp.com/support"+"./fonts/EmptyAccounts.01e00f086cfc9f2312fd.svg"},1086:function(e,t,a){e.exports={container:"EmptyPage-module__container",image:"EmptyPage-module__image",contentDiv:"EmptyPage-module__contentDiv common-module__ftsmooth"}},1087:function(e,t){e.exports="//vimalesan.herokuapp.com/support"+"./fonts/EmptyProducts.7e8050e8ffac1c3f591b.svg"},1088:function(e,t,a){"use strict";var n=a(12),o=a.n(n),r=a(9),c=a.n(r),l=a(10),i=a.n(l),s=a(13),u=a.n(s),d=a(14),p=a.n(d),h=a(0),m=a.n(h),f=a(1),_=a.n(f),v=a(1086),S=a.n(v),g=a(251),y=a(1059),C=a(1048),k=a(153),b=a(1087),E=a.n(b),M=function(e){function t(){return c()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){return m.a.createElement(k.a,{viewBox:"0 0 298 123.3",name:"products"},m.a.createElement("image",{xlinkHref:E.a,height:"100%",width:"100%"}))}}]),t}(m.a.Component);var x=function(e){function t(e){c()(this,t);var a=u()(this,(t.__proto__||o()(t)).call(this,e));return a.renderEmptyState=a.renderEmptyState.bind(),a}return p()(t,e),i()(t,[{key:"renderEmptyState",value:function(e){switch(e){case"search":return m.a.createElement(g.a,null);case"account":return m.a.createElement(y.a,null);case"contact":return m.a.createElement(C.a,null);case"product":return m.a.createElement(M,null);default:return null}}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.title;return m.a.createElement("div",{className:S.a.container},m.a.createElement("div",{className:S.a.image+" "},this.renderEmptyState(t)),m.a.createElement("div",{className:S.a.contentDiv},a))}}]),t}(h.Component);t.a=x;x.propTypes={title:_.a.string,type:_.a.oneOf(["search","account","contact","product"])},x.defaultProps={title:"No Results Found",type:"search"}},1217:function(e,t,a){"use strict";var n=a(12),o=a.n(n),r=a(9),c=a.n(r),l=a(10),i=a.n(l),s=a(13),u=a.n(s),d=a(14),p=a.n(d),h=a(0),m=a.n(h),f=a(1218),_=a.n(f),v=a(233),S=a.n(v),g=function(e){function t(){return c()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){return m.a.createElement("div",{className:_.a.container},m.a.createElement("div",{className:_.a.avatar},m.a.createElement(S.a,{shape:"circle",size:"large"})),m.a.createElement("div",{className:_.a.innerContainer},m.a.createElement(S.a,{size:"custom"}),m.a.createElement("div",{className:_.a.mt10},m.a.createElement(S.a,{size:"medium"}))))}}]),t}(h.Component);t.a=g},1218:function(e,t,a){e.exports={container:"LookupListStencils-module__container",avatar:"LookupListStencils-module__avatar",innerContainer:"LookupListStencils-module__innerContainer",mt10:"LookupListStencils-module__mt10"}},1525:function(e,t,a){"use strict";var n=a(12),o=a.n(n),r=a(9),c=a.n(r),l=a(10),i=a.n(l),s=a(13),u=a.n(s),d=a(14),p=a.n(d),h=a(0),m=a.n(h),f=a(1),_=a.n(f),v=a(1526),S=a.n(v),g=a(30),y=function(e){function t(){return c()(this,t),u()(this,(t.__proto__||o()(t)).apply(this,arguments))}return p()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,a=e.text,n=e.align;return m.a.createElement("div",{className:S.a.searchBox+" "+S.a[n],onClick:t,"data-id":"advancedSearchButton"},m.a.createElement("span",{className:S.a.text},m.a.createElement(g.TopbandFontIcon,{name:"advancesearch",size:"15"})),m.a.createElement("span",{className:S.a.text,"data-id":"advancedSearchText"},a))}}]),t}(m.a.Component);t.a=y,y.propTypes={align:_.a.oneOfType(["center","left"]),onClick:_.a.func,text:_.a.string},y.defaultProps={align:"center"}},1526:function(e,t,a){e.exports={searchBox:"AdvancedSearchButton-module__searchBox common-module__semibold common-module__ftsmooth",text:"AdvancedSearchButton-module__text",center:"AdvancedSearchButton-module__center",left:"AdvancedSearchButton-module__left"}},1905:function(e,t,a){e.exports={container:"GlobalSearch-module__container",searchEntityPopup:"GlobalSearch-module__searchEntityPopup",midContainer:"GlobalSearch-module__midContainer",popContainer:"GlobalSearch-module__popContainer"}},1906:function(e,t,a){e.exports={listBox:"SearchEntityList-module__listBox",card:"SearchEntityList-module__card",searchPopupShow:"SearchEntityList-module__searchPopupShow",removeAnnimation:"SearchEntityList-module__removeAnnimation",searchPopupClose:"SearchEntityList-module__searchPopupClose",footer:"SearchEntityList-module__footer",html:"SearchEntityList-module__html"}},1907:function(e,t,a){e.exports={list:"SearchEntityItem-module__list",disable:"SearchEntityItem-module__disable",checkCircleBox:"SearchEntityItem-module__checkCircleBox",text:"SearchEntityItem-module__text common-module__semibold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis",checkCircle:"SearchEntityItem-module__checkCircle",check:"SearchEntityItem-module__check",checkAnimation:"SearchEntityItem-module__checkAnimation"}},1908:function(e,t,a){e.exports={modulBox:"SearchHeader-module__modulBox",container:"SearchHeader-module__container",searchIcon:"SearchHeader-module__searchIcon",downIcon:"SearchHeader-module__downIcon",iconBox:"SearchHeader-module__iconBox",closeBox:"SearchHeader-module__closeBox",searchBox:"SearchHeader-module__searchBox",searchContainer:"SearchHeader-module__searchContainer",inputBox:"SearchHeader-module__inputBox",closeIcon:"SearchHeader-module__closeIcon",input:"SearchHeader-module__input common-module__semibold common-module__ftsmooth",closeText:"SearchHeader-module__closeText",resultBox:"SearchHeader-module__resultBox",inputResize:"SearchHeader-module__inputResize",iconClose:"SearchHeader-module__iconClose",inputAnnimate:"SearchHeader-module__inputAnnimate",srchTagMovement:"SearchHeader-module__srchTagMovement"}},1909:function(e,t,a){e.exports={dropDown:"ModulePopup-module__dropDown",space:"ModulePopup-module__space",option:"ModulePopup-module__option",title:"ModulePopup-module__title",dTitle:"ModulePopup-module__dTitle",chooseModule:"ModulePopup-module__chooseModule",selectedModule:"ModulePopup-module__selectedModule",active:"ModulePopup-module__active"}},1910:function(e,t,a){e.exports={container:"GlobalSearchSuggestion-module__container",searchPopupShow:"GlobalSearchSuggestion-module__searchPopupShow",emptyBox:"GlobalSearchSuggestion-module__emptyBox",contentBox:"GlobalSearchSuggestion-module__contentBox",resultBox:"GlobalSearchSuggestion-module__resultBox",tabs:"GlobalSearchSuggestion-module__tabs",tab:"GlobalSearchSuggestion-module__tab",footer:"GlobalSearchSuggestion-module__footer"}},1911:function(e,t,a){e.exports={container:"ViewMoreSearchResult-module__container",icon:"ViewMoreSearchResult-module__icon",text:"ViewMoreSearchResult-module__text"}},1912:function(e,t,a){e.exports={emptyContainer:"PopupEmptyPage-module__emptyContainer",EmptyBox:"PopupEmptyPage-module__EmptyBox",btnBox:"PopupEmptyPage-module__btnBox"}},1913:function(e,t,a){e.exports={container:"SearchButton-module__container",text:"SearchButton-module__text common-module__dotted common-module__oflow common-module__ellipsis"}},233:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=l(a(0)),r=l(a(1)),c=l(a(527));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),n(t,[{key:"render",value:function(){var e=this.props,t=e.shape,a=e.size,n=e.palette;return a="rect"===t?c.default[a]:c.default["c"+a],t="rect"===t?c.default.rectangular:c.default.circle,o.default.createElement("div",{className:t+" "+a+" "+c.default[n]})}}]),t}();t.default=i,i.propTypes={palette:r.default.oneOf(["primary","secondary"]),shape:r.default.oneOf(["rect","circle"]),size:r.default.oneOf(["small","medium","large","default"])},i.defaultProps={palette:"primary",shape:"rect",size:"medium"},i.propTypesDescription={shape:" ",size:" ",palette:" "}},527:function(e,t,a){e.exports={stencil:"Stencils-module__stencil",placeHolderShimmer:"Stencils-module__placeHolderShimmer",rectangular:"Stencils-module__rectangular Stencils-module__stencil",primary:"Stencils-module__primary",secondary:"Stencils-module__secondary",small:"Stencils-module__small",default:"Stencils-module__default",medium:"Stencils-module__medium",large:"Stencils-module__large",circle:"Stencils-module__circle Stencils-module__stencil",clarge:"Stencils-module__clarge",cmedium:"Stencils-module__cmedium",cdefault:"Stencils-module__cdefault",csmall:"Stencils-module__csmall"}},599:function(e,t,a){"use strict";a.r(t);var n=a(38),o=a.n(n),r=a(5),c=a.n(r),l=a(2),i=a.n(l),s=a(20),u=a.n(s),d=a(12),p=a.n(d),h=a(9),m=a.n(h),f=a(10),_=a.n(f),v=a(13),S=a.n(v),g=a(14),y=a.n(g),C=a(0),k=a.n(C),b=a(1),E=a.n(b),M=a(115),x=function(e){function t(e){m()(this,t);var a=S()(this,(t.__proto__||p()(t)).call(this,e));return a.state={showSpam:!1,module:"tickets"},a.showSpamResults=a.showSpamResults.bind(a),a.hideSpam=a.hideSpam.bind(a,!1),a}return y()(t,e),_()(t,[{key:"hideSpam",value:function(){this.setState({showSpam:!1})}},{key:"showSpamResults",value:function(e){this.setState({module:e,showSpam:!0})}},{key:"render",value:function(){var e=this.state,t=e.showSpam,a=e.module;return k.a.createElement(k.a.Fragment,null,t?k.a.createElement(M.i,o()({},this.props,{module:a,hideSpam:this.hideSpam})):k.a.createElement(M.h,o()({},this.props,{showSpamResults:this.showSpamResults})))}}]),t}(k.a.Component),P=a(1905),N=a.n(P),I=a(1906),B=a.n(I),w=a(16),A=a(1907),D=a.n(A),T=function(e){function t(e){m()(this,t);var a=S()(this,(t.__proto__||p()(t)).call(this,e));return a.onClick=a.onClick.bind(a),a}return y()(t,e),_()(t,[{key:"onClick",value:function(){var e=this.props,t=e.isDisable,a=e.onClick,n=e.id;t||a(n)}},{key:"render",value:function(){var e=this.props,t=e.text,a=e.isActive,n=e.isDisable,o=void 0!==n&&n;return k.a.createElement("div",{className:D.a.container},k.a.createElement("div",{className:o?D.a.disable:D.a.list,onClick:this.onClick,"data-id":"searchEntityItem"},a?k.a.createElement("div",{className:D.a.checkCircleBox,"data-id":"activeItem"},k.a.createElement("span",{className:D.a.checkCircle}," ",k.a.createElement("span",{className:D.a.check}," "))):null,k.a.createElement("span",{"data-id":"entityText",className:D.a.text},t)))}}]),t}(k.a.Component),R=T;T.propTypes={id:E.a.oneOfType([E.a.string,E.a.object]),isActive:E.a.bool,isDisable:E.a.bool,onClick:E.a.func,text:E.a.string};var O=a(1525),L=a(8),j=function(e){function t(){return m()(this,t),S()(this,(t.__proto__||p()(t)).apply(this,arguments))}return y()(t,e),_()(t,[{key:"render",value:function(){var e=this.props,t=e.searchModules,a=e.moduleMeta,n=e.searchDepartmentData,o=e.handleModuleSelect,r=e.handleDeptChange,c=e.currentModule,l=e.currentDepartment,i=e.onClick,s=e.onAdvancedSearchClick;return k.a.createElement(w.Container,{className:B.a.card,onClick:i},k.a.createElement(w.Box,{flexible:!0,shrink:!0,scroll:"vertical"},k.a.createElement(w.Container,{alignBox:"column"},k.a.createElement(w.Box,{className:B.a.listBox},t&&t.map(function(e,t){var n=a[e],r=n.displayLabel,l=n.apiKey;return k.a.createElement(R,{key:t,id:l,text:r,isActive:c.apiKey===l,onClick:o})})),k.a.createElement(w.Box,{className:B.a.listBox},n&&n.map(function(e,t){var a=e.name,n=e.id,o=L.f.getI18NValue("support.autosuggest.searchin",a);return k.a.createElement(R,{key:t,text:o,id:n,isActive:l===n,isDisable:"contacts"===c.apiKey||"accounts"===c.apiKey,onClick:r})})))),k.a.createElement(w.Box,null,k.a.createElement("div",{className:B.a.footer},k.a.createElement(O.a,{text:L.f.getI18NValue("support.globalsearch.advanced.link"),onClick:s,align:"left"}))))}}]),t}(C.Component),W=j;j.propTypes={currentDepartment:E.a.string,currentModule:E.a.object,handleDeptChange:E.a.func,handleModuleSelect:E.a.func,moduleMeta:E.a.object,onAdvancedSearchClick:E.a.func,onClick:E.a.func,searchDepartmentData:E.a.array,searchModules:E.a.array};var z=a(1908),H=a.n(z),V=a(63),U=a.n(V),K=a(1909),F=a.n(K),G=a(264),q=function(e){function t(e){m()(this,t);var a=S()(this,(t.__proto__||p()(t)).call(this,e));return a.onSelect=a.onSelect.bind(a),a}return y()(t,e),_()(t,[{key:"onSelect",value:function(e,t){(0,this.props.onModuleSelect)(t.sanitizedName)}},{key:"render",value:function(){for(var e=this.props,t=e.selectedModule,a=e.searchModules,n=e.moduleMeta,o=[],r=0;r<=a.length-1;r++)n[a[r]]&&o.push(n[a[r]]);return k.a.createElement("div",{className:F.a.chooseModule},k.a.createElement("div",{className:F.a.title},L.f.getI18NValue("support.globalsearch.choose.module")),k.a.createElement(G.a,{title:"MODULES",options:o,value:t.displayLabel,keyName:"displayLabel",idName:"apiKey",onClick:this.onSelect,isArrow:!1}))}}]),t}(k.a.Component),J=q;q.docs={componentGroup:"Molecule"},q.propTypes={isPopupOpen:E.a.bool,moduleMeta:E.a.object,onModuleSelect:E.a.func,removeClose:E.a.func,searchModules:E.a.array,selectedModule:E.a.object,togglePopup:E.a.func};var Q=a(99),X=a.n(Q),Y=function(e){function t(e){m()(this,t);var a=S()(this,(t.__proto__||p()(t)).call(this,e));return a.focusTimer=!1,a.changeInputFocus=a.changeInputFocus.bind(a),a.onSearchEntityClick=a.onSearchEntityClick.bind(a),a}return y()(t,e),_()(t,[{key:"changeInputFocus",value:function(e){e?this.inputEle.focus():this.inputEle.blur()}},{key:"componentDidMount",value:function(){var e=this.props.focusInput;this.changeInputFocus(e)}},{key:"componentDidUpdate",value:function(e){e.focusInput;var t=this.props.focusInput;this.changeInputFocus(t)}},{key:"onSearchEntityClick",value:function(){var e=this,t=this.props,a=t.onSearchIconClick;t.focusInput&&(this.focusTimer=setTimeout(function(){return e.changeInputFocus()},500)),a()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.focusTimer)}},{key:"render",value:function(){var e=this,t=this.props,a=t.searchModule,n=t.onChange,o=t.onClick,r=t.onKeyup,c=t.isSearchResult,l=void 0!==c&&c,i=t.onCloseIconClick,s=t.searchWord,u=t.searchModules,d=t.onModuleSelect,p=t.moduleMeta,h=t.searchPopupModule;return k.a.createElement(w.Container,{alignBox:"row",className:H.a.container,dataId:"searchHeader"},l&&k.a.createElement(w.Box,{className:H.a.modulBox,dataId:"modulePopupParent"},k.a.createElement(J,{onModuleSelect:d,searchModules:u,selectedModule:a,moduleMeta:p})),k.a.createElement(w.Box,{flexible:!0,className:H.a.subContainer},k.a.createElement(w.Container,{className:H.a.searchBox+" "+(l?H.a.resultBox:""),alignBox:"row",dataId:"searchBox"},k.a.createElement(w.Box,{className:H.a.inputAnnimate,flexible:!0},k.a.createElement("span",{className:H.a.iconBox,onClick:this.onSearchEntityClick},k.a.createElement("i",{className:H.a.searchIcon},k.a.createElement(U.a,{name:"toprightsearch",size:"18"})),k.a.createElement("i",{className:H.a.downIcon},k.a.createElement(U.a,{name:"down",size:"5"}))),k.a.createElement("span",{className:H.a.inputBox},k.a.createElement(X.a,{className:H.a.input+" "+(l?H.a.inputResize:""),maxLength:75,onChange:n,onClick:o,onKeyUp:r,placeHolder:L.f.getI18NValue("support.autosuggest.searchin",h.displayLabel),value:s,autofocus:!0,dataId:"searchInput",inputRef:function(t){e.inputEle=t},needAppearance:!1}))),k.a.createElement(w.Box,{className:H.a.closeBox,onClick:i,dataId:"onSearchResultEsc"},k.a.createElement("div",{className:H.a.iconClose},k.a.createElement("span",{className:H.a.closeIcon},k.a.createElement(U.a,{name:"close",size:"30"})),!l&&k.a.createElement("span",{className:H.a.closeText},L.f.getI18NValue("support.zohocrm.integration.lable.name.esc")))))))}}]),t}(k.a.Component),Z=Y;Y.propTypes={focusInput:E.a.bool,isSearchResult:E.a.bool,moduleMeta:E.a.object,onChange:E.a.func,onClick:E.a.func,onCloseIconClick:E.a.func,onKeyup:E.a.func,onModuleSelect:E.a.func,onSearchIconClick:E.a.func,placeHolder:E.a.string,searchModule:E.a.object,searchModules:E.a.array,searchWord:E.a.string};var $=a(1910),ee=a.n($),te=a(1911),ae=a.n(te),ne=a(30),oe=function(e){function t(){return m()(this,t),S()(this,(t.__proto__||p()(t)).apply(this,arguments))}return y()(t,e),_()(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.onClick;return k.a.createElement("div",{className:ae.a.container,"data-id":"viewMoreSearchResult",onClick:a},k.a.createElement("span",{className:ae.a.text,"data-id":"text"},t),k.a.createElement("span",{className:ae.a.icon},k.a.createElement(ne.TopbandFontIcon,{name:"arrowRight",size:"14"})))}}]),t}(k.a.Component),re=oe;oe.propTypes={onClick:E.a.func,text:E.a.string};var ce=a(1912),le=a.n(ce),ie=a(1088),se=a(1913),ue=a.n(se),de=function(e){function t(){return m()(this,t),S()(this,(t.__proto__||p()(t)).apply(this,arguments))}return y()(t,e),_()(t,[{key:"render",value:function(){var e=this.props,t=e.iconName,a=e.text,n=e.onClick;return k.a.createElement(w.Container,{alignBox:"row",align:"both",className:ue.a.container,onClick:n,dataId:"searchButton"},k.a.createElement(w.Box,null,k.a.createElement(ne.TopbandFontIcon,{name:t,size:"14"})),k.a.createElement(w.Box,{shrink:!0,adjust:!0,className:ue.a.text,dataId:"searchText","data-title":a},a))}}]),t}(k.a.Component),pe=de;de.propTypes={iconName:E.a.string,onClick:E.a.func,text:E.a.string};var he=function(e){function t(){return m()(this,t),S()(this,(t.__proto__||p()(t)).apply(this,arguments))}return y()(t,e),_()(t,[{key:"render",value:function(){var e=this.props.onAdvancedSearchClick;return k.a.createElement(w.Container,{align:"horizontal",dataId:"popupEmptyPage"},k.a.createElement("div",{className:le.a.emptyContainer},k.a.createElement("div",{className:le.a.EmptyBox},k.a.createElement(ie.a,{title:L.f.getI18NValue("support.no.matches.found")})),k.a.createElement("div",{className:le.a.btnBox},k.a.createElement(pe,{iconName:"advancesearch",text:L.f.getI18NValue("support.globalsearch.advanced.link"),onClick:e}))))}}]),t}(k.a.Component),me=he;he.propTypes={onAdvancedSearchClick:E.a.func};var fe=a(81),_e=a(1217),ve=function(e){function t(e){m()(this,t);var a=S()(this,(t.__proto__||p()(t)).call(this,e));return a.onTabChange=a.onTabChange.bind(a),a}return y()(t,e),_()(t,[{key:"onTabChange",value:function(e){(0,this.props.handleModuleSelect)(e,!0)}},{key:"render",value:function(){var e=this.props,t=e.count,a=e.selectedModule,n=e.searchModules,o=e.isLoading,r=e.onClick,c=e.onAdvancedSearchClick,l=e.onViewMoreClick,i=e.autoSuggestion,s=e.moduleMeta;return k.a.createElement(w.Container,{className:ee.a.container,onClick:r},k.a.createElement(w.Box,{flexible:!0},k.a.createElement(fe.TabWrapper,{defaultTab:a.apiKey,type:"delta",needTabBorder:!0,isAnimate:!0,onSelect:this.onTabChange,hookToDisableInternalState:!0},k.a.createElement(fe.Tabs,{isResponsive:!0,className:ee.a.tabs},n.map(function(e,t){var a=s[e];return k.a.createElement(fe.Tab,{key:t,id:a.apiKey,text:a.displayLabel,className:ee.a.tab})})),k.a.createElement(fe.TabContentWrapper,null,k.a.createElement(fe.TabContent,{id:a.apiKey},k.a.createElement("div",{className:ee.a.contentBox},k.a.createElement(w.Box,{scroll:"vertical",shrink:!0,className:(0===t?ee.a.emptyBox:null)+" "+ee.a.resultBox},o?k.a.createElement(k.a.Fragment,null,k.a.createElement(_e.a,null),k.a.createElement(_e.a,null),k.a.createElement(_e.a,null),k.a.createElement(_e.a,null),k.a.createElement(_e.a,null),k.a.createElement(_e.a,null),k.a.createElement(_e.a,null),k.a.createElement(_e.a,null),k.a.createElement(_e.a,null),k.a.createElement(_e.a,null)):0===t?k.a.createElement(me,{onAdvancedSearchClick:c}):i)))))),0!==t&&k.a.createElement(w.Box,{className:ee.a.footer},k.a.createElement(re,{text:L.f.getI18NValue("support.globalsearch.viewmoresearchresults"),align:"height",onClick:l})))}}]),t}(k.a.Component),Se=ve;ve.propTypes={autoSuggestion:E.a.element,count:E.a.number,handleModuleSelect:E.a.func,isLoading:E.a.bool,moduleMeta:E.a.object,onAdvancedSearchClick:E.a.func,onClick:E.a.func,onViewMoreClick:E.a.func,searchModules:E.a.array,selectedModule:E.a.object};var ge=function(e){function t(){return m()(this,t),S()(this,(t.__proto__||p()(t)).apply(this,arguments))}return y()(t,e),_()(t,[{key:"stopPropagation",value:function(e){e&&e.stopPropagation&&e.stopPropagation()}},{key:"render",value:function(){var e=this.props,t=e.onSearchIconClick,a=e.closePopup,n=e.onKeyUp,o=e.onChange,r=e.searchModules,c=e.searchDepartmentData,l=e.searchPopupModule,i=e.currentDepartment,s=e.handleModuleSelect,u=e.handleDeptChange,d=e.searchEntityVisibility,p=e.count,h=e.isLoading,m=void 0!==h&&h,f=e.onInputClick,_=e.searchWord,v=e.onAdvancedSearchClick,S=e.onViewMoreClick,g=e.isSearchPopupOpen,y=e.isSearchResult,C=e.onModuleSelect,b=e.searchModule,E=e.autoSuggestion,M=e.autoSuggestionVisibility,x=e.searchResult,P=e.moduleMeta;return k.a.createElement(w.Container,{className:N.a.container},k.a.createElement(w.Box,{className:N.a.middleContainer},k.a.createElement(Z,{searchModules:r,moduleMeta:P,searchPopupModule:l,searchModule:b,searchWord:_,onSearchIconClick:t,onChange:o,onCloseIconClick:a,onKeyup:n,onClick:f,focusInput:g,onModuleSelect:C,isSearchResult:!g})),k.a.createElement(w.Box,{flexible:!0,className:N.a.midContainer},y&&x,g&&k.a.createElement(w.Container,{className:N.a.popContainer,alignBox:"row",align:"horizontal",onClick:a},k.a.createElement(w.Box,{className:N.a.searchEntityPopup},d?k.a.createElement(W,{searchModules:r,moduleMeta:P,searchDepartmentData:c,currentModule:l,currentDepartment:i,handleModuleSelect:s,handleDeptChange:u,onAdvancedSearchClick:v,onClick:this.stopPropagation}):M&&k.a.createElement(Se,{searchModules:r,moduleMeta:P,count:p,handleModuleSelect:s,selectedModule:l,isLoading:m,onAdvancedSearchClick:v,onViewMoreClick:S,onClick:this.stopPropagation,autoSuggestion:E,searchWord:_})))))}}]),t}(k.a.Component),ye=ge;ge.propTypes={autoSuggestion:E.a.element,autoSuggestionVisibility:E.a.bool,closePopup:E.a.func,count:E.a.number,currentDepartment:E.a.string,handleDeptChange:E.a.func,handleModuleSelect:E.a.func,isLoading:E.a.bool,isSearchPopupOpen:E.a.bool,isSearchResult:E.a.bool,moduleMeta:E.a.object,onAdvancedSearchClick:E.a.func,onChange:E.a.func,onInputClick:E.a.func,onKeyUp:E.a.func,onModuleSelect:E.a.func,onSearchIconClick:E.a.func,onViewMoreClick:E.a.func,searchDepartmentData:E.a.array,searchEntityVisibility:E.a.bool,searchModule:E.a.object,searchModules:E.a.array,searchPopupModule:E.a.object,searchResult:E.a.element,searchWord:E.a.string};var Ce=a(26),ke=a(17),be=a(132),Ee=a(91),Me=a(24),xe=a(19),Pe=a.n(xe),Ne=a(66),Ie=a(6),Be=function(e){function t(e){m()(this,t);var a=S()(this,(t.__proto__||p()(t)).call(this,e)),n=e.searchModule,o=e.searchWord;return a.state={visibility:!1,results:{},currentSearchModule:n,searchWord:o||"",searchedWord:"",isLoading:!1},a.promises=[],a.onSearchIconClick=a.onSearchIconClick.bind(a),a.saveSearchResults=a.saveSearchResults.bind(a),a.handleModuleSelect=a.handleModuleSelect.bind(a),a.handleDeptChange=a.handleDeptChange.bind(a),a.onInputClick=a.onInputClick.bind(a),a.onChange=a.onChange.bind(a),a.onKeyUp=a.onKeyUp.bind(a),a.getCachedResults=a.getCachedResults.bind(a),a.onAdvancedSearchClick=a.onAdvancedSearchClick.bind(a),a.navigateAway=a.navigateAway.bind(a),a.closeIconClick=a.closeIconClick.bind(a),a.displayAlert=a.displayAlert.bind(a),a.handleModuleNavigation=a.handleModuleNavigation.bind(a),a.addPromise=a.addPromise.bind(a),a.removePromise=a.removePromise.bind(a),a.cancelUnresolvedPromises=a.cancelUnresolvedPromises.bind(a),a.isPresentAlready=a.isPresentAlready.bind(a),a.getSearchResult=a.getSearchResult.bind(a),a.autoSearchResult=Object(Ne.m)(a.getSearchResult,1e3),a.invokeSearch=a.invokeSearch.bind(a),a}return y()(t,e),_()(t,[{key:"cancelUnresolvedPromises",value:function(e){this.promises.slice(0,e-1).forEach(function(e){e.isResolved||e.cancel()})}},{key:"addPromise",value:function(e){return this.promises=this.promises.concat(e),this.promises.length}},{key:"shouldComponentUpdate",value:function(e,t){return Object(Ie.K)(e,this.props)||Object(Ie.K)(t,this.state)}},{key:"removePromise",value:function(e){this.promises=this.promises.filter(function(t){return t!==e})}},{key:"componentDidUpdate",value:function(e,t){var a=e.searchModule,n=e.isSearchPopupOpen,o=this.props,r=o.searchModule,c=o.isSearchPopupOpen,l=o.isSearchResult,i=t.visibility,s=this.state.visibility;r!==a&&"community"!==r&&this.setState({currentSearchModule:r}),!l||n||!c||!i&&s||this.invokeSearch()}},{key:"componentWillUnmount",value:function(){this.promises.map(function(e){return e.cancel()}),this.autoSearchResult.cancel()}},{key:"closeIconClick",value:function(){var e=this.props,t=e.isSearchPopupOpen,a=e.closeSearchPopup,n=e.deptName,o=e.orgName,r=(e.searchModules,e.lastAccessedViewName),c=e.ticketSanitizedName;if(t)a();else{var l=this.props,i=l.push,s=l.prevUrl,u=s.pathname,d=s.query;i(u||d?d?{pathname:u,query:d}:{pathname:u}:{pathname:"/"+o+"/"+n+"/"+c+"/list/"+r},!!u)}}},{key:"isPresentAlready",value:function(e){var t=this.state.currentSearchModule,a=this.props.searchDep,n=0!==u()(this.getCachedResults(a,t,e)).length;return n&&this.setState({isLoading:!1,searchedWord:e}),n}},{key:"getSearchResult",value:function(){var e=this,t=this.state,a=t.searchWord,n=t.currentSearchModule,o=this.props.searchDep;if(!this.isPresentAlready(a)){var r=this.props.getGlobalAutoSuggestion,c=Object(Ne.l)(r({searchWord:a,currModule:n,deptId:o})),l=this.addPromise(c);c.promise.then(function(t){e.cancelUnresolvedPromises(l),e.saveSearchResults(t)}).then(function(){return e.removePromise(c)})}}},{key:"saveSearchResults",value:function(e){var t=this,a=e.data,n=a.result,o=void 0===n?[]:n,r=(a.count,a.searchWord),l=a.moduleName,s=a.dept;this.setState(function(e){var a=e.results,n=t.getCachedDept(l,s);return{results:i()({},a,c()({},n,i()({},a[n],c()({},r,i()({},a[n]?a[n][r]:{},c()({},l,{list:o,count:o.length})))))),isLoading:!1,visibility:!1,searchedWord:r}})}},{key:"navigateAway",value:function(e){var t=this.state.currentSearchModule,a=this.props.moduleMeta,n=e.searchModule,o=void 0===n?Pe()(t+".sanitizedName",a):n,r=e.event,c=e.isAdvancedSearch,l=void 0!==c&&c,i=this.state.searchWord,s=this.props.searchDep,u=this.props,d=u.departments,p=u.deptName,h=u.orgName,m=u.push,f=u.isSearchPopupOpen,_=u.url,v=u.closeSearchPopup,S=u.deleteFacet,g=u.setSearchWord,y=u.ticketSanitizedName;if(l){v();var C=this.props.currentModule;m({pathname:"/"+h+"/"+p+"/"+("all-modules"===o?C:o||y)+"/advSearch"})}else{var k="allDepartment"!==s&&d.length>1?d[1].sanitizedName:"all";if(i.trim().length<2)return void this.displayAlert(r);var b={pathname:"/"+h+"/"+p+"/search/"+o+"/"+i,query:{searchDept:k}};_.pathname.includes("/search/")||(b.state={prevSearchUrl:_}),f&&S()&&g(i),m(b)}}},{key:"onKeyUp",value:function(e){if(13===e.keyCode)this.navigateAway({event:e});else if(27===e.keyCode){(0,this.props.closeSearchPopup)()}}},{key:"onAdvancedSearchClick",value:function(){this.navigateAway({isAdvancedSearch:!0})}},{key:"onChange",value:function(e){var t=this,a=this.props.isSearchPopupOpen;this.setState({searchWord:e},function(){a&&(e.trim().length<2||t.autoSearchResult.func())})}},{key:"getCachedDept",value:function(e,t){return"contacts"===e||"accounts"===e?"allDepartment":t}},{key:"getCachedResults",value:function(e,t,a){var n=this.state.results,o=this.getCachedDept(t,e);return Pe()([""+o,""+a,""+t],n)||{}}},{key:"handleModuleSelect",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state,o=n.currentSearchModule,r=n.searchWord;if(e!==o){if(a)return r.trim().length<2?void this.displayAlert():void this.setState({currentSearchModule:e,isLoading:!0},function(){t.getSearchResult()});this.setState({currentSearchModule:e})}}},{key:"handleDeptChange",value:function(e){var t=this.props,a=t.searchDep,n=t.changeSearchDept;e!==a&&n(e)}},{key:"handleModuleNavigation",value:function(e){this.navigateAway({searchModule:e})}},{key:"onSearchIconClick",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props,a=t.isSearchPopupOpen,n=t.openSearchPopup;a?this.setState(function(t){return{visibility:e&&!t.visibility}}):(n(),this.setState({visibility:!0}))}},{key:"invokeSearch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.searchWord,a=t.trim().length,n=this.props,o=n.isSearchResult,r=(n.openSearchPopup,n.searchModule);if(o){if(a<2)return;this.setState(function(){var e={isLoading:!0};return"community"!==r&&(e=i()({},e,{currentSearchModule:r})),e},function(){e.getSearchResult()})}}},{key:"onInputClick",value:function(e){var t=this,a=e.target.value,n=a.trim().length,o=this.props,r=o.isSearchPopupOpen,c=o.openSearchPopup;r&&n>1?this.isPresentAlready(a)?this.setState({visibility:!1}):this.setState({isLoading:!0,visibility:!1},function(){t.getSearchResult()}):(c(),this.invokeSearch(a))}},{key:"displayAlert",value:function(e){if(e){var t=this.props.alertState;e.stopPropagation&&e.stopPropagation(),t||e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}var a=L.f.getI18NValue,n=a("crm.button.ok"),o=a("support.history.operation.label.wfalert"),r=a("crm.search.letters.check");(0,this.props.showConfirmBox)({type:"alert",submitText:n,title:o,message:r,isActive:!0,palette:"danger"})}},{key:"render",value:function(){var e=this.props,t=e.searchModules,a=e.departments,n=e.isSearchResult,r=e.isSearchPopupOpen,c=e.searchModule,l=e.moduleMeta,i=e.searchDep,s=this.state,d=s.currentSearchModule,p=s.visibility,h=s.results,m=s.isLoading,f=s.searchWord,_=s.searchedWord,v=Object(Ne.b)(),S=Pe()(""+d,l)||v,g=Pe()(""+c,l)||v,y=this.getCachedResults(i,d,_),C=y.list,b=y.count,E=k.a.createElement(x,{onAdvancedSearchClick:this.onAdvancedSearchClick,module:c}),P=k.a.createElement(M.f,{list:C,count:b,module:d,searchWord:_,currentWord:f,moduleMeta:l,deptId:i}),N={isLoading:m,autoSuggestionVisibility:0!==u()(h).length||m,searchEntityVisibility:p,isSearchResult:n,isSearchPopupOpen:r},I={onSearchIconClick:this.onSearchIconClick,closePopup:this.closeIconClick,onKeyUp:this.onKeyUp,onInputClick:this.onInputClick,onChange:this.onChange,handleModuleSelect:this.handleModuleSelect,handleDeptChange:this.handleDeptChange,onAdvancedSearchClick:this.onAdvancedSearchClick,onModuleSelect:this.handleModuleNavigation,onViewMoreClick:this.navigateAway};return k.a.createElement(ye,o()({},N,I,{searchWord:f,searchModules:t,moduleMeta:l,searchDepartmentData:a,searchPopupModule:S,currentDepartment:i,count:b,searchModule:g,searchResult:E,autoSuggestion:P}))}}]),t}(k.a.Component);Be.propTypes={alertState:E.a.bool,closeSearchPopup:E.a.func,currentDepartment:E.a.object,currentModule:E.a.string,deleteFacet:E.a.func,departments:E.a.array,deptName:E.a.string,getGlobalAutoSuggestion:E.a.func,isSearchPopupOpen:E.a.bool,isSearchResult:E.a.bool,lastAccessedViewName:E.a.string,navigateAway:E.a.func,openSearchPopup:E.a.func,orgName:E.a.string,prevUrl:E.a.object,push:E.a.func,referrer:E.a.number,searchModule:E.a.string,searchModules:E.a.array,searchWord:E.a.string,searchedWord:E.a.string,setSearchWord:E.a.func,showConfirmBox:E.a.func,ticketSanitizedName:E.a.string,url:E.a.object};t.default=Object(Ce.connect)(function(){var e=Object(be.c)(!1);return function(t){var a=e(t),n=a.searchModules,o=a.isSearchPopupOpen,r=a.moduleMeta,c=Object(be.g)(t),l=t.routing.paramMap,i=l.deptName,s=l.orgName,u=l.searchWord,d=Object(ke.o)(t),p=Object(be.b)(t),h=Object(be.e)(t),m=Object(be.d)(t),f=Pe()("moduleMeta.tickets.sanitizedName",t);return{deptName:i,orgName:s,searchModule:c,searchModules:n,moduleMeta:r,searchDept:Pe()("routing.location.query.searchDept",t)||"",alertState:t.freezeLayer,url:d,prevUrl:p,searchWord:u,searchDep:h,departments:m,isSearchResult:Object(be.j)(t),isSearchPopupOpen:o,lastAccessedViewName:Object(ke.eb)(t),currentModule:Pe()("routing.paramMap.moduleName",t)||f,ticketSanitizedName:f}}},{openSearchPopup:Ee.o,closeSearchPopup:Ee.d,getGlobalAutoSuggestion:Ee.f,push:Me.K,showConfirmBox:Me.a.showConfirmBox,deleteFacet:Ee.e,setSearchWord:Ee.s,changeSearchDept:Ee.b})(Be)}}]);