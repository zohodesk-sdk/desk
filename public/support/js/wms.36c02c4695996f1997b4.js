(window.deskappJsonp=window.deskappJsonp||[]).push([[143],{1266:function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"b",function(){return d});var r=n(253),i=n(1318),a=n(6);function o(t,n){n(function(){var n,a;AcsApi.autoCorrect=(n=AcsApi.autoCorrect,a={},function(){var e=this,t=arguments[0],r=a[t];r&&clearTimeout(r);var i=arguments;a[t]=setTimeout(function(){n.apply(e,i),a[t]=null},1e3)}),AcsApi.init("Support","crmcsrfparam","crmcsr"),AcsDesktopNotification.syncOwner(),t(Object(r.l)()),"undefined"==typeof AcsResource&&(e.AcsResource={}),AcsResource.resourceobject=i.a,AcsApi.getBadgeCount("UNS")})}function s(e,t){var n={},r=t(),i=e.getInfo(void 0,!0),a=null,o=e.getAdditionalProperty("zgid")||"null",s=e.getAdditionalProperty("sanitizedOrgName")||r.module.org[o].portalName;e.getActionOwner()&&("_NONE_"!=e.getActionOwner().split(":")[0]&&(a=e.getAdditionalProperty("photoUrl")||a));var u=e.getAdditionalProperty("LAST_ACTIVITY");if("INCOMING_MAIL"==u||"RESPONSE_RECEIVED"==u||"contact"==e.getAdditionalProperty("photo_type")){a=null;var c=""+e.getAdditionalProperty("Contact_Id")||"";"undefined"!=c&&""!=c&&"null"!=c&&"null"!=o&&(a="/api/v1/contacts/"+c+"/photo?portalname="+s)}var d=e.getSkey()||Date.now(),l="";e.getProperty("viewkey")&&(l=e.getProperty("viewkey"));var p="";e.getRepeatCount()&&(p=e.getRepeatCount());var m="";e.getRepeatUsers()&&(m=e.getRepeatUsers());var f=e.getTime()||"";n.fdk=e._ntfn["Feed.fdk"],n.departmentId=e.getAdditionalProperty("Department"),n.accessFrom=e.getAccFrom(),n.type=e.getType(),n.title=i,n.photourl=a,n.ISNEW=e.isNew(),n.SKEY=d,n.info=e.getAdditionalProperty("info")||e.getAdditionalProperty("niceurl"),n.VIEWKEY=l,n.repCount=p,n.repUsers=m,n.time=f,n.seid=e.getAdditionalProperty("seid"),n.caseNumber=e.getAdditionalProperty("caseNumber"),n.subject=e.getAdditionalProperty("subject"),n.type=e.getProperty("type"),n.orgId=o;var g=e.getAdditionalProperty("sanitizedDepName"),b=e.getAdditionalProperty("sanitizedModule");if("Request"===n.type||"Ticket"===n.type){var O=e.getAdditionalProperty("caseId");n.entityURL=g?"/agent/"+s+"/"+g+"/"+b+"/details/"+O:"/support/"+s+"/ShowHomePage.do#Cases/dv/"+n.seid}else"status"===n.type||"Direct Message"===n.type||"StatusMessage"===n.type?(n.subject=e.getAdditionalProperty("subject"),n.entityURL="/support/"+s+"/ShowHomePage.do#feeds/"+n.info):"Task"===n.type&&(n.entityURL=g?"/agent/"+s+"/"+g+"/"+b+"/details/"+n.seid:"/support/"+s+"/ShowHomePage.do#Tasks/dv/"+n.seid);return n}function u(e,t){return(e=s(e,t)).isRead=!1,e.ISNEW=!1,e}function c(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{t=void 0===t?{}:t,n=null==n||n;for(var i=e,o=new RegExp("zsu[@[a-z]+(#|:).+?]zsu","g"),s=void 0;null!=(s=o.exec(e));){var u=s[0],c=u.split("zsu[")[1].slice(0,-4);if(0==c.indexOf("#")){var d=c.split(":"),l=d[0],p=d[2],m=l,f=r.routing.paramMap,g="/agent/"+f.orgName+"/"+f.deptName+"/"+r.moduleMeta.tickets.sanitizedName+"/details/"+p;n&&(m="<a href="+g+' class="clrblu">'+l+"</a>"),i=i.replace(u,m)}else if(0==c.indexOf("@"))if(-1!==c.indexOf("user")){var b=t[(O=c.replace("@user#","").replace("@user:","").split("_"))[0]];m=b;n?(b=b.replace(/>/g,"&gt;").replace(/</g,"&lt;"),m='<a href="javascript:;" class="clrblu" onclick="return false">'+Object(a.k)(b)+"</a>"):m=Object(a.k)(m),i=i.replace(u,m)}else{(O=c.replace("@team#","").replace("@team:","").split("_"))[0];var O,h=O[1];h=h.replace(/>/g,"&gt;").replace(/</g,"&lt;"),m='<a href="javascript:;" class="clrblu" onclick="return false">'+Object(a.k)(h)+"</a>",i=i.replace(u,m)}}return i}catch(t){return e}}function d(e,t){t=""+t,e="feedback widget"==(e=(""+e).toLowerCase())?e.replace(/\s+/g,""):e;var n={email:["support.request.status.email.icon.title"],phone:["support.request.status.phone.icon.title"],forums:["support.request.status.forums.icon.title"],web:["support.request.status.web.icon.title"],twitter:["support.request.status.request.twitter.incoming.icon.title"],facebook:["support.request.status.request.facebook.incoming.icon.title"],chat:["support.request.status.chat.icon.title"],feedbackwidget:["support.request.status.feedbackwidget.icon.title"],2:["support.request.status.request.sent.icon.title","ogmrequest"],3:["support.request.status.req.receive.icon.title","icmrequest"],6:["support.request.status.request.drafted.icon.title","ogmrequest"],7:["support.request.status.request.drafted.icon.title","icmrequest"],9:["support.request.status.req.receive.icon.title","icmrequest"],11:["support.request.status.req.receive.icon.title","icmforumrequest"],12:["support.request.status.request.sent.icon.title","ogmforumrequest"],13:["support.request.status.request.sent.icon.title","ogmforumrequest"],14:["support.request.status.req.receive.icon.title","icmforumrequest"],15:["support.request.status.request.forward.icon.title","fwdrequest"],17:["support.request.status.req.receive.icon.title","incomingCTI"],18:["support.request.status.request.sent.icon.title","outgoingCTI"],19:["support.request.status.request.twitter.incoming.icon.title","NewTwiticm"],20:["support.request.status.request.twitter.response.icon.title","NewTwiticm"],21:["support.request.status.request.twitter.outgoing.icon.title","NewTwitogn"],22:["support.request.status.request.facebook.incoming.icon.title","NewFbookIcm"],23:["support.request.status.request.facebook.response.icon.title","NewFbookIcm"],24:["support.request.status.request.facebook.outgoing.icon.title","NewFbookogn"],25:["support.request.status.chat.icon.title","chat"],26:["support.request.status.offlinechat.icon.title","offlinechat"],32:["support.request.status.req.receive.icon.title","incomingCTI"],33:["support.request.status.request.sent.icon.title","outgoingCTI"],34:["support.survey.listview.feedback.received"],43:["support.request.history.new.facebook.directMessage.received","NewFbookIcm"],44:["support.request.history.new.facebook.directMessage.received","NewFbookIcm"],45:["support.request.history.new.facebook.directMessage.sent","NewFbookogn"]};return t=["","undefined","0","1","5"].includes(t)||!n.hasOwnProperty(t)?e:t,n.hasOwnProperty(t)?n[t][0]:""}}).call(this,n(68))},1318:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Status.direct.message.title":"$1 has sent a Direct Message in $2","Status.direct.message.title.min":"$1 has sent a Direct Message","Request.merged":"$2 has merged $1 in $3","Request.reassigned.with.account.min":"$5 reassigned a $1 from $2 | $3 to $4","Request.bug.added":"$2 added a $1 in $3","Request.restore.title.with.account":"$1 received from $2 | $3 in $4","Request.pickedup.without.account":"$3 self-assigned a $1 from $2 in $4","Request.updated.without.account":"$3 updated a $1 from $2 in $4","Task.update.min":"$2 updated a $1","Request.merged.min":"$2 has merged $1","Request.ownerupdate.without.account.min":"$1 from $2 was assigned to $3","Comment.updated.min":"$1 updated a comment","ACS.errortitle":"Error","ACS.errormsg":"Action cannot be performed as $1 has been deleted.","Task.completed":"$1 completed a $2 in $3","Request.add.without.account.min":"$1 from $2 was assigned to $3","Request.ownerupdate.with.account":"$1 from $2 | $3 was assigned to $4 in $5","User.mentions.comment":"$1 has mentioned you in a comment","Request.bug.reopened.min":"$2 re-opened a $1","Request.split.to.with.account.and.with.owner":"Spawned $1 from $2 | $3 was assigned to $4 in $5","Request.closed.without.account":"$2 from $3 was closed in $4","Request.response.received.with.account.min":"New Response received from $1 | $2","Request.updated.with.account":"$4 updated a $1 from $2 | $3 in $5","Task.update":"$2 updated a $1 in $3","Unassigned.Request.added.without.account":"New $1 received from $2 in $3","Request.closed.with.account.min":"$2 from $3 | $4 was closed","Request.reassigned.without.account":"$4 reassigned a $1 from $2 to $3 in $5","Request.pickedup.with.account.min":"$4 self-assigned a $1 from $2 | $3","Request.add.with.account":"$1 from $2 | $3 was assigned to $4 in $5","Comment.updated":"$1 updated a comment in $2","Request.split.to.without.account.and.without.owner":"$1 from $2 was spawned in $3","Request.resolution.deleted":"$1 has deleted a Resolution in $2","Task.add.min":"$3 assigned a new $1 to $2","Request.split.to.without.account.and.without.owner.min":"$1 from $2 was spawned","Request.response.sent.with.account":"$3 replied to $1 | $2 in $4","Request.split.to.with.account.and.with.owner.min":"Spawned $1 from $2 | $3 was assigned to $4","Comment.added.min":"$1 posted a comment","Request.response.received.without.account.min":"New Response received from $1","Request.restore.title.without.account":"$1 received from $2 in $3","Request.reopened.without.account.min":"$1 reopened a $2 from $3","Request.reopened.with.account":"$1 reopened a $2 from $3 | $4 in $5","Task.restore.title.min":"$2 was assigned with a $1","Task.reopened":"$2 re-opened a $1 in $3","Request.bug.closed.min":"$2 closed a $1","Request.response.received.without.account":"New Response received from $1 in $2","Request.resolution.added.min":"$1 has added a Resolution","Unassigned.Request.added.without.account.min":"New $1 received from $2","Request.resolution.deleted.min":"$1 has deleted a Resolution","Request.pickedup.without.account.min":"$3 self-assigned a $1 from $2 ","Request.pickedup.with.account":"$4 self-assigned a $1 from $2 | $3 in $5","Request.split.to.with.account.and.without.owner":"$1 from $2 | $3 was spawned in $4","Request.split.to.without.account.and.with.owner":"Spawned $1 from $2 was assigned to $3 in $4","Request.moved.min":"$4 moved a $1 from $3 to $2","Task.add":"$3 assigned a new $1 to $2 in $4","Survey.added.with.account":"$2 | $3 left a $4 rating for a $1 in $5","Request.split.to.without.account.and.with.owner.min":"Spawned $1 from $2 was assigned to $3","Request.closed.without.account.min":"$2 from $3 was closed","Request.updated.without.account.min":"$3 updated a $1 from $2","Survey.added.without.account.min":"$2 left a $3 rating for a $1","Comment.added":"$1 posted a comment in $2","Request.forwarded.min":"$2 forwarded a $1","Request.closed.with.account":"$2 from $3 | $4 was closed in $5","Unassigned.Request.added.with.account.min":"New $1 received from $2 | $3","Task.pickedup.min":"$2 self-assigned a $1","Status.update.message":"$1 has added a Status in $2","Status.update.message.min":"$1 has added a Status","Request.reopened.with.account.min":"$1 reopened a $2 from $3 | $4","Task.pickedup":"$2 self-assigned a $1 in $3","Request.reassigned.without.account.min":"$4 reassigned a $1 from $2 to $3","Request.resolution.added":"$1 has added a Resolution in $2","Task.owner.reassigned.min":"$3 reassigned a $1 to $2","Request.split.to.with.account.and.without.owner.min":"$1 from $2 | $3 was spawned","Request.response.received.with.account":"New Response received from $1 | $2 in $3","Survey.added.with.account.min":"$2 | $3 left a $4 rating for a $1","Request.restore.title.with.account.min":"$1 received from $2 | $3","Unassigned.Request.added.with.account":"New $1 received from $2 | $3 in $4","Request.resolution.modified.min":"Resolution updated by $1","Request.bug.reopened":"$2 re-opened a $1 in $3","Request.moved":"$4 moved a $1 from $3 to $2","Request.bug.closed":"$2 closed a $1 in $3","Task.reopened.min":"$2 re-opened a $1","Request.restore.title.without.account.min":"$1 received from $2","Request.splitted.min":"$3 has split a $1 from $2","Request.response.sent.with.account.min":"$3 replied to $1 | $2","Request.response.sent.without.account":"$2 replied to $1 in $3","Task.completed.min":"$1 completed a $2","Request.add.without.account":"$1 from $2 was assigned to $3 in $4","Request.ownerupdate.without.account":"$1 from $2 was assigned to $3 in $4","Request.updated.with.account.min":"$4 updated a $1 from $2 | $3","Task.owner.reassigned":"$3 reassigned a $1 to $2 in $4","Request.ownerupdate.with.account.min":"$1 from $2 | $3 was assigned to $4","Request.forwarded":"$2 forwarded a $1 in $3","Task.restore.title":"$2 was assigned with a $1 in $3","Request.resolution.modified":"Resolution updated by $1 in $2","Request.reassigned.with.account":"$5 reassigned a $1 from $2 | $3 to $4 in $6","Request.bug.added.min":"$2 added a $1","Request.response.sent.without.account.min":"$2 replied to $1","Survey.added.without.account":"$2 left a $3 rating for a $1 in $4","Request.splitted":"$3 has split a $1 from $2 in $4","Request.add.with.account.min":"$1 from $2 | $3 was assigned to $4","Request.reopened.without.account":"$1 reopened a $2 from $3 in $4"}},1319:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={LABEL_REQUEST:"LABEL_REQUEST",LABEL_REQUESTS:"LABEL_REQUESTS",LABEL_TASK:"LABEL_TASK",USER_NAME:"USER_NAME",ACTION_OWNER:"ACTION_OWNER",COMMENTED_BY:"COMMENTED_BY",RECORD_OWNER:"RECORD_OWNER",FROM_DEPARTMENT:"FROM_DEPARTMENT",TO_DEPARTMENT:"TO_DEPARTMENT",CONTACTS:"CONTACTS",ACCOUNTS:"ACCOUNTS",BUG_URL:"BUG_URL",DEPARTMENT:"DEPARTMENT",SURVEY_GOOD:"Good",SURVEY_OK:"OK",SURVEY_BAD:"Bad",COMMENTRANGE:"50"}},1399:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return f});var r=n(20),i=n.n(r),a=n(5),o=n.n(a),s=n(2),u=n.n(s),c=n(17),d=n(3),l=n(7),p=d.m.QUEUE_INFO;function m(e){return{type:"UPDATE_WMS_QUEUE_TICKETS",data:e}}function f(e,t,n,r){try{var i=e.operations||{},a=e.svCount,s=Object(c.r)(t);!function(e,t,n){var r=e.meta;if(r){var i=Object(l.normalize)(r,Object(l.schema)(d.L.TICKET_L,{mapping:{contact:Object(l.schema)(d.L.CONTACT_L,{mapping:{account:Object(l.schema)(d.L.ACCOUNT_L)}})}}));n({type:"WMS_META_SUCCESS",data:i,moduleName:d.L.TICKET_L})}}(e,0,n),i.delete&&i.delete[s]&&h(e,t,n),i.add&&i.add[s]&&O(e,t,n),i.update&&i.update[s]&&b(e,t,n,r),i.generalChanges&&function(e,t,n,r){var i=e.meta,a=e.operations||{},s=Object(c.r)(t),d=Object(c.db)(t),l=a.generalChanges,p=Object(c.B)(t),m=r().queue[s][p],f=$(i.id,m);if(-1!==l.indexOf(s)&&f){var g=u()({},e),b={meta:g.meta,module:g.module,operations:{delete:o()({},s,[d])},isGeneralChanges:!1};h(b,r(),n);var I={meta:g.meta,module:g.module,operations:{add:o()({},s,[d])},isGeneralChanges:!0};O(I,r(),n)}}(e,t,n,r),a&&a[s]&&g(e,t,n),i.update&&i.update[s]&&b(e,t,n,r),a&&a[s]&&g(e,t,n),n({type:"WMS_TICKET_META_SUCCESS",data:Object(l.normalize)(e.meta,Object(l.schema)(d.L.TICKET_L,{mapping:{contact:Object(l.schema)(d.L.CONTACT_L,{mapping:{account:Object(l.schema)(d.L.ACCOUNT_L)}})}}))})}catch(e){console.log("ticketQueue wms update exception ====> ",e)}}function g(e,t,n){var r=Object(c.r)(t);n({type:"WMS_TICKETS_STARREDVIEW_COUNT_SUCCESS",data:{deptId:r,count:e.svCount[r],moduleName:d.L.TICKET_L}})}function b(e,t,n,r){e.meta;var i=e.operations||{},a=Object(c.r)(t),s=Object(c.db)(t);if(-1!==i.update[a].indexOf(s)){var d=u()({},e);h({meta:d.meta,module:d.module,operations:{delete:o()({},a,[s])}},r(),n),O({meta:d.meta,module:d.module,operations:{add:o()({},a,[s])}},r(),n)}}function O(e,t,n){var r=e.meta,i=e.operations||{},a=e.isGeneralChanges,o=Object(c.B)(t),s=Object(c.r)(t),u=Object(c.db)(t),l=i.add?i.add[s]:[];t.queue[s][o];if(-1!==l.indexOf(u)||a){var m=function(e,t,n){var r="",i=Object(c.r)(t),a=t.queue[i][n],o=a.selectedSlots,s=p.OTHER_TICKETS,u=t.module.ticket;if(n===d.L.Q_STATUS){var l=e.status;r=-1===o.indexOf(l)?s:l}else if(n===d.L.Q_DUE)r=function(e,t){var n=e?parseInt(e):void 0,r=d.m[d.L.Q_DUE];if(t.splice(t.indexOf(r.API_NO_DUE),1),t[t.indexOf(r.API_OVER_DUE)]=r.OVER_DUE,void 0===n||""===n)return r.API_NO_DUE;var i="";return t.some(function(e,r){if(e=parseInt(e),n<=e||n===e||r+1==t.length&&n>=e)return i=e,!0}),i===r.OVER_DUE?r.API_OVER_DUE:i}(e.due,a.selectedSlots.slice());else if(n===d.L.Q_CRM)r=e.contact.crmType;else if(n===d.L.Q_PRIORITY){var m=e.priority;r=-1===o.indexOf(m)?s:m}var f=a.slotsInfo[r],g=function(e,t,n){var r=e.tickets,i=t.dueDate,a=t.customerResponseTime,o=""!==i,s=(e.noMoreData,I(i,a));if(0===r.length)return 0;var u=-1;return r.some(function(e,t){var r=n[e];if(r){var i=r.dueDate,c=r.customerResponseTime;if(o){if(""===i)return u=t,!0;var d=I(i,c);if(d&&d>s)return u=t,!0}else if(""===i&&c<a)return u=t,!0}}),u}(f,e,u),b=f.tickets.slice();(-1!==g||b.length<10)&&b.splice(g,0,e.id);return{slotName:r,slotTickets:b}}(r,t,o);n({type:"WMS_QUEUE_ADD_SUCCESS",data:{id:r.id,viewId:u,deptId:s,slotTickets:m.slotTickets,slotName:m.slotName,queueName:o,moduleName:d.L.TICKET_L}})}}function h(e,t,n){var r=e.meta,i=e.operations||{},a=e.isGeneralChanges,o=Object(c.B)(t),s=Object(c.r)(t),u=Object(c.db)(t),l=i.delete?i.delete[s]:[],p=t.queue[s][o];(-1!==l.indexOf(u)||a)&&n({type:"WMS_QUEUE_DELETE_SUCCESS",data:{queueName:o,slotName:$(r.id,p),id:r.id,viewId:u,deptId:s,moduleName:d.L.TICKET_L}})}function $(e,t){var n="",r=t.slotsInfo;return i()(r).some(function(t,i){for(var a=r[t].tickets,o=0;o<a.length;o++)if(a[o]===e)return n=t,!0}),n}function I(e,t){var n=new Date(e).getTime(),r=new Date(t).getTime(),i=""+((n=n>p.DEFAULT_MIN_DUEDATE?n:p.DEFAULT_MIN_DUEDATE)-p.MIN_DUEDATE),a=""+(r=r?p.MAX_CUST_RESP_TIME-r/1e3:0);return a=(a=0===a?p.DEFAULT_CUST_RESP_TIME_STRING:a).padStart(10,"0"),i.concat(a)}},1456:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"f",function(){return O}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return $}),n.d(t,"e",function(){return I}),n.d(t,"a",function(){return y});var r=n(5),i=n.n(r),a=n(2),o=n.n(a),s=n(15),u=n(6),c=n(46),d=n(17),l=n(24),p=n(8),m=n(7),f=n(3);function g(){return{types:Object(u.m)("FEEDS_VIEWS_KEY"),callAPI:function(e){var t=Object(d.r)(e),n="";return n="allDepartment"==t?"departmentId=0":Object(c.a)(e),Object(s.a)("/api/v1/feed/viewKey?"+n,!1,{orgId:e.currentOrgId}).get().then(function(e){return{deptId:t,feedsViewKey:e}})}}}function b(e){return function(t,n){var r=Object(d.r)(n());return t({type:"UPDATE_FEED_VIEW",data:{view:e,deptId:r}})}}function O(e,t){return function(n,r){var i=Object(d.r)(r()),a=Object(m.normalize)(t,Object(m.schema)(f.L.FEEDS_L,{id:"fdk"}));return n({type:"FEEDS_SUCCESS",data:a=o()({},a,{viewKey:e,noData:t.noData,deptId:i,renderType:t.rendertype})})}}function h(e){return{types:Object(u.m)("POST_STATUS_MESSAGE"),callAPI:function(t){return Object(s.a)("/api/v1/feed/userStatus",!1,{orgId:t.currentOrgId}).post("",e).then(function(e){return{res:e,entities:{},result:[]}})}}}function $(e){return function(t,n){var r=e.getAdditionalProperty("data")||{},i=p.f.getI18NValue("support.unable.to.process.your.request"),a=r.message||"InternalError";"Unknown_Module"===a||"InternalError"===a||"Unknown_Type"===a?i=p.f.getI18NValue("support.unable.to.process.your.request"):"Unauthorized"===a?i=p.f.getI18NValue("crm.security.error"):"Record_Deleted"===a?i=p.f.getI18NValue("crm.record.not.accessible.message"):"CommentEmpty"===a&&(i=p.f.getI18NValue("crm.field.empty.check",[p.f.getI18NValue("tabs.request.comment")])),t(Object(l.Q)({type:"alert",message:i}))}}function I(e,t,n){return function(r){return r({type:"REMOVE_FEED",data:{viewkey:e,fdk:t,deptId:n}})}}function y(e,t,n){return function(e,r){var a=r().module.feeds[t].comments.filter(function(e){return e.cfdk!=n});e({type:"REMOVE_FEED_COMMENT_DELETED_SUCCESS",data:{entities:{feeds:i()({},t,{comments:a})}}})}}},1495:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return l});var r=n(5),i=n.n(r),a=n(2),o=n.n(a),s=n(17),u=n(3),c=n(7);function d(e){return{type:"CLEAR_WMS_LIST_SUCCESS",data:e}}function l(e,t,n,r){try{var a=e.operations||{},d=e.svCount,l=Object(s.r)(t);!function(e,t,n){var r=e.meta;if(r){var i=Object(c.normalize)(r,Object(c.schema)(u.L.TICKET_L,{mapping:{contact:Object(c.schema)(u.L.CONTACT_L,{mapping:{account:Object(c.schema)(u.L.ACCOUNT_L)}})}}));n({type:"WMS_META_SUCCESS",data:i,moduleName:u.L.TICKET_L})}}(e,0,n),a.delete&&a.delete[l]&&p(e,t,n),a.add&&a.add[l]&&m(e,t,n),a.update&&a.update[l]&&function(e,t,n,r){e.meta;var a=e.operations||{},u=Object(s.r)(t),c=Object(s.db)(t);if(-1!==a.update[u].indexOf(c)){var d=o()({},e),l={meta:d.meta,module:d.module,operations:{delete:i()({},u,[c])}};p(l,r(),n);var f={meta:d.meta,module:d.module,operations:{add:i()({},u,[c])}};m(f,r(),n)}}(e,t,n,r),a.generalChanges&&function(e,t,n,r){var a=e.meta,u=e.operations||{},c=Object(s.r)(t),d=Object(s.db)(t),l=u.generalChanges,f=-1!==r().departmentSpecificState[c].ticketList.viewUIState[d].list.indexOf(a.id);if(-1!==l.indexOf(c)&&f){var g=o()({},e),b={meta:g.meta,module:g.module,operations:{delete:i()({},c,[d])},isGeneralChanges:!0};p(b,r(),n);var O={meta:g.meta,module:g.module,operations:{add:i()({},c,[d])},isGeneralChanges:!0};m(O,r(),n)}}(e,t,n,r),d&&d[l]&&function(e,t,n){var r=Object(s.r)(t),i=e.svCount[r];n({type:"WMS_TICKETS_STARREDVIEW_COUNT_SUCCESS",data:{deptId:r,count:i,moduleName:u.L.TICKET_L}})}(e,t,n)}catch(e){console.log("ticketList wms update exception ====> ",e)}}function p(e,t,n){var r=e.meta,i=e.operations||{},a=e.isGeneralChanges,o=Object(s.r)(t),c=Object(s.db)(t);(-1!==(i.delete?i.delete[o]:[]).indexOf(c)||a)&&n({type:"WMS_LIST_DELETE_SUCCESS",data:{id:r.id,viewId:c,deptId:o,moduleName:u.L.TICKET_L}})}function m(e,t,n){var r=e.meta,i=e.operations||{},a=e.isGeneralChanges,o=Object(s.r)(t),c=i.add?i.add[o]:[],d=Object(s.db)(t);if(-1!==c.indexOf(d)||a){var l=function(e,t,n){var r=Object(s.r)(t),i=Object(s.db)(t),a=t.module.ticket,o=t.departmentSpecificState[r].ticketList.viewUIState[i],c=o.preference,d=o.list,l=e.meta,p=c.sortBy,m=-1,f=l.ticketNumber,g=l.createdTime,b=new Date(g).getTime(),O=l.customerResponseTime,h=new Date(O).getTime();d.some(function(e,t){var n=a[e];if(p===u.r.SORT_TICKETNUMBER){var r=n.ticketNumber;if(parseInt(r)<parseInt(f))return m=t,!0}else if(p===u.r.SORT_RECENTTHREAD){var i=n.customerResponseTime,o=new Date(i).getTime();if(o<h)return m=t,!0}else if(p===u.r.SORT_CREATEDTIME){var s=n.createdTime,c=new Date(s).getTime();if(c<b)return m=t,!0}else if(p===u.r.SORT_DUEDATE){n.dueDate;return!0}});var $=d.slice();-1!==m&&$.splice(m,0,l.id);return $}(e,t);n({type:"WMS_LIST_ADD_SUCCESS",data:{id:r.id,viewId:d,deptId:o,ticketList:l,moduleName:u.L.TICKET_L}})}}},1931:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return O});var r=n(5),i=n.n(r),a=n(47),o=n.n(a),s=n(23),u=n.n(s),c=n(1456),d=n(253),l=n(1319),p=n(1266),m=n(6),f=n(8),g=n(17);function b(e,t,n,r){var i=e(),a=Object(g.r)(i),o=i.departmentSpecificState[a];o.feedsKeys[o.selectedFeedView]==n&&t(Object(c.f)(n,r))}function O(t,n){e.Support={},["Request","Task","Call","Event","StatusMessage","Game","Badge"].forEach(function(e,r){Support[e]={render:function(e,r,i,a){i.rendertype=e,i.viewkey=r,b(t,n,r,i)},invokeAction:function(e,t,n,r,i){},handleActionError:function(e,t,r,i){n(Object(c.c)(i))},handleAction:function(r,i,a,o){if("Request"===e&&"close"===i){var s=t(),u=Object(g.r)(s),d=s.departmentSpecificState[u],l=d.selectedFeedView,p=d.feedsKeys[l];"openRequestsFeeds"===l&&n(Object(c.e)(p,a,u))}},renderNotification:function(e,r,i,a){r.rendertype="push",r.viewkey=e,b(t,n,e,r)},renderComments:function(e,r,i,a,s,c){var d=t().module.feeds[r];d.comments=[].concat(u()(new o.a([].concat(u()(a),u()(d.comments))))),d.cmore=i,d.displayingCmt=!0,b(t,n,e,d)},renderMore:function(e,t){},updatePoll:function(e,t){},handleDelete:function(e,r,i,a){var o=t(),s=Object(g.r)(o);n("comment"==e?Object(c.a)(r,i,a,s):Object(c.e)(r,i,s))}}}),Support._View={init:function(e){},nodata:function(e){b(t,n,e,{noData:!0})},initNotification:function(e){},initShowMore:function(e){},completed:function(e,t){},completedShowMore:function(e,t){},renderTimeline:function(e,t,n,r,i,a){},_checkAndFetchMoreFeeds:function(e,t){}},Support.Activity=function(e,n){try{var r,a=e.getType(),o=t(),s=o.routing.paramMap,u=s.orgName,c=s.deptName,d=o.moduleMeta,l=(r={type:a,skey:e.getSkey(),latitle:e.getLATitle(),lamintitle:e.getLATitle(".min"),laplaintitle:e.getLATitle(void 0,!0),laminplaintitle:e.getLATitle(".min",!0),plaincont:e.getContent(),fdk:e.getFDK(),rendertype:"",latype:e.getLAType(),zgid:e.getAdditionalProperty("zgid"),time:e.getTime(),actionowner:e.getAOwner().split(":")[0],owner:e.getAOwner(),prd:e.getPrd()},i()(r,"fdk",e.getFDK()),i()(r,"title",e.getTitle()),i()(r,"department",e.getAdditionalProperty("Department")),i()(r,"photourl",e.getAdditionalProperty("photoUrl")),i()(r,"name",e.getAdditionalProperty("fullName")),i()(r,"email",e.getAdditionalProperty("email")),i()(r,"mintitle",e.getTitle(".min")),i()(r,"minplaintitle",e.getTitle(".min",!0)),i()(r,"plaintitle",e.getTitle(void 0,!0)),i()(r,"type",e.getType()),i()(r,"aowner",e.getAOwner().split(":")[0]),i()(r,"laowner",e.getLAOwner()?e.getLAOwner().split(":")[0]:""),i()(r,"cmore",e.getCMore()),i()(r,"cmdcount",parseInt(e.getTotalComments())||0),i()(r,"comments",e.getComments()),i()(r,"info",e.getAdditionalProperty("info")||e.getAdditionalProperty("niceurl")||""),i()(r,"prd",e.getPrd()),i()(r,"fdk",e.getFDK()),i()(r,"title",e.getTitle()),i()(r,"department",e.getAdditionalProperty("Department")),i()(r,"mintitle",e.getTitle(".min")),i()(r,"minplaintitle",e.getTitle(".min",!0)),i()(r,"plaintitle",e.getTitle(void 0,!0)),i()(r,"type",e.getType()),i()(r,"aowner",e.getAOwner().split(":")[0]),i()(r,"laowner",e.getLAOwner()?e.getLAOwner().split(":")[0]:""),i()(r,"cmore",e.getCMore()),i()(r,"cmdcount",parseInt(e.getTotalComments())||0),i()(r,"comments",e.getComments()),i()(r,"info",e.getAdditionalProperty("info")||e.getAdditionalProperty("niceurl")||""),i()(r,"activityType","Tasks"),r);if(void 0!==e._jobj.ap_Activity_Type&&(l.activityType=e._jobj.ap_Activity_Type),"Request"==a){l.isClosed="true"==e.getAdditionalProperty("Is_Closed"),l.isOnHold="true"==e.getAdditionalProperty("Is_OnHold"),l.recordId=e.getAdditionalProperty("SeCaseId"),l.seid=e.getAdditionalProperty("CaseId"),l.recordOwner=e.getAdditionalProperty("Owner"),l.threadcount=e.getAdditionalProperty("Thread_Count"),l.requestid=e.getAdditionalProperty("Request_Id"),l.blueprintApplied=e.getAdditionalProperty("blueprintApplied");var m="/agent/"+u+"/"+c+"/"+d.tickets.sanitizedName+"/details/"+l.seid;n?l.zgid==o.currentOrgId?l.cont="<a href="+m+' target="_blank" rel="noopener noreferrer">#'+e.getContent()+"</a>":l.cont="<span>#"+e.getContent()+"</span>":l.cont="<a href="+m+' onclick="return false">#'+e.getContent()+"</a>",l.channel=e.getAdditionalProperty("Channel"),l.threadStatus=parseInt(e.getAdditionalProperty("Thread_Status")),l.threadObj={channel:e.getAdditionalProperty("threadChannel"),status:e.getAdditionalProperty("threadDraftStatus"),isIncoming:e.getAdditionalProperty("threadIncoming"),isForward:e.getAdditionalProperty("threadForward")}}else if("Task"==e.getType()){l.isCompleted="true"==e.getAdditionalProperty("Is_Completed"),l.recordId=e.getAdditionalProperty("SecSeid"),l.seid=e.getAdditionalProperty("Seid");var f=e.getAdditionalProperty("CaseId");m="/agent/"+u+"/"+c+"/"+d.tasks.sanitizedName+"/details/"+f;n?l.zgid==o.currentOrgId?l.cont="<a href="+m+' target="_blank">'+e.getContent()+"</a>":l.cont="<span>"+e.getContent()+"</span>":l.cont="<a href="+m+' onclick="return false">'+e.getContent()+"</a>"}else l.recordId=e.getAdditionalProperty("recordId")||"status_msg_"+e.getFDK(),l.cont=Object(p.e)(e.getContent(),e.getAdditionalProperty("mentions"),!0,o);if(l.duedate="","Request"==a&&!l.isClosed||"Task"==a&&!l.isCompleted){var g=e.getAdditionalProperty("Priority")||"";g="-None-"===g?"":g,l.priority=g,l.duedate=e.getAdditionalProperty("Due_Date")}return l.onHoldTime="","Request"==a&&l.isOnHold&&(l.onholdtime=e.getAdditionalProperty("OnHold_Time")),l}catch(e){}},Support.Comment=function(e){var n=t(),r={},i=e.getPostedBy();e.getAdditionalProperty("actualCommenterZuid")&&(i=e.getAdditionalProperty("actualCommenterZuid")),e.getAdditionalProperty("Bug_Commenter_Name")?i=e.getAdditionalProperty("Bug_Commenter")+":user":e.getAdditionalProperty("Bug Commenter Name")&&(i=e.getAdditionalProperty("Bug Commenter")+":user"),e.getAdditionalProperty("attachDetails")&&(r.attachments=JSON.parse(e.getAdditionalProperty("attachDetails")));var a=e.getAdditionalProperty("lastName");return r.commentedby=a?Object(m.t)(e.getAdditionalProperty("firstName"),a):e._cmt.title.iprops[0].props.COMMENTED_BY,r.userType=a?e.getAdditionalProperty("usertype"):i.split(":")[1]||"user",r.photourl=a?e.getAdditionalProperty("photoUrl"):null,r.cmtcont=Object(p.e)(e.getContent(),e.getAdditionalProperty("mentions"),!0,n),r.cmtcontwithnormaldv=e.getContent(),r.cmtoriginalcont=e.getContent(),r.cfdk=e.getCFDK(),r.is_public=e.getAdditionalProperty("is_public"),void 0!==r.is_public&&"string"==typeof r.is_public&&(r.is_public="true"===r.is_public),r.cmdtime=e.getAt(),e.getAdditionalProperty("Bug_Commenter_Name")?r.commentedby=Object(m.k)(e.getAdditionalProperty("Bug_Commenter_Name")):e.getAdditionalProperty("Bug Commenter Name")&&(r.commentedby=Object(m.k)(e.getAdditionalProperty("Bug Commenter Name"))),r},Support.I18NString={getString:function(e,n){var r=t(),i=r.routing.paramMap,a=i.orgName,o=i.deptName,s=r.moduleMeta;switch(e){case l.a.LABEL_REQUEST:return n.default||r.moduleMeta.tickets.singularLabel;case l.a.LABEL_REQUESTS:return n.default||r.moduleMeta.tickets.pluralLabel;case l.a.LABEL_TASK:return n.default||r.moduleMeta.tasks.singularLabel;case l.a.CONTACTS:var u=n.conid,c=n.contact;return"<a id="+u+" href="+("/agent/"+a+"/"+o+"/"+s.contacts.sanitizedName+"/details/"+u)+' class="clrblu" onclick="return false">'+c+"</a>";case l.a.ACCOUNTS:var d=n.accid,p=n.account;return"<a id="+d+" href="+("/agent/"+a+"/"+o+"/"+s.accounts.sanitizedName+"/details/"+d)+' class="clrblu" onclick="return false">'+p+"</a>";case l.a.USER_NAME:case l.a.RECORD_OWNER:case l.a.ACTION_OWNER:if(null!=n.uid&&"null"!=n.uid){if(n.lastName){var f=Object(m.t)(n.firstName,n.lastName);return"<a href="+Object(m.o)(n.uid,r)+' class="clrblu">'+f+"</a>"}return}if(null!=n.teamid&&"null"!=n.teamid)return n.teamname?'<a href="javascript:;" class="clrblu">'+n.teamname+"</a>":void 0;break;case l.a.COMMENTED_BY:return'<a class="clrblu">'+n.COMMENTED_BY+"</a>";case l.a.BUG_URL:return n.Bug_URL?"<a href="+n.Bug_URL+' target="_new" class="clrblu">Bug</a>':"Bug";case l.a.FROM_DEPARTMENT:case l.a.TO_DEPARTMENT:case l.a.DEPARTMENT:return n.default||n.DEPNAME;case l.a.SURVEY_GOOD:return'"GOOD"';case l.a.SURVEY_OK:return'"OK"';case l.a.SURVEY_BAD:return'"BAD"'}}},Support.Uns={newNtfn:[],handleBadge:function(e,r,i){if(n(Object(d.m)(e.UNS)),"feed"==t().notificationPopup.type){(e=Object(p.a)(i,t)).ISNEW=!0,e.isRead=!1;var a=i.getSublist()||[];a.length>0&&(a=a.map(function(e){return Object(p.d)(e,t)})),e.subList=a,n(Object(d.a)(e))}},handleDesktopNotification:function(e){var t=e.getActionOwner();null==t&&(t="");var n=e.getInfo(void 0,!0);if(null!=n&&""!=n){n=n.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),AcsDesktopNotification.show("https://contacts.localzoho.com/file?t=user&fs=thumb&ID=10521559",f.f.getI18NValue("support.label.service.name"),n,10)}},renderNotificationList:function(e,r,i,a,o){for(var s=[],u=0;u<r.length;u++)if("Ticket"!=r[u].getProperty("type")){var c=Object(p.a)(r[u],t);c.isRead=c.ISNEW,c.ISNEW=!1;var l=r[u].getSublist()||[];l.length>0&&(l=l.map(function(e){return Object(p.d)(e,t)})),c.subList=l,s.push(c)}n(Object(d.j)(s,o))}},Support.onAcsConnect=function(){}}}).call(this,n(68))},372:function(e,t,n){"use strict";n.r(t);var r=n(24),i=n(17),a=n(8),o=function(){},s=void 0,u=void 0;o.setMetaInfo=function(e,t){s=e,u=t},o.getSubscribedList=function(){if(c.isPubSubConnected)return PubSubApi.getSubscribedList()},o.isSubscribed=function(e){if(c.isPubSubConnected)return PubSubApi.isSubscribed(e)},o.subscribe=function(e,t){var n=o.generatePskey(e,t,c.COLLISIONKEY);if(c.isPubSubConnected){var r=o.isSubscribed(n);n.indexOf(c.COLLISIONKEY)>-1&&!r&&c.retryCount<3&&void 0===c.keysWithSubscribeCallInitiated[n]&&(c.keysWithSubscribeCallInitiated[n]=1,o.getSubscriptionParamsAndSubscribe(n,c.retryCount,e,t,c.COLLISIONKEY))}},o.generatePskey=function(e,t,n,r){if(n==c.COLLISIONKEY)return o.getPskey(e,t,n)},o.getSubscriptionParamsAndSubscribe=function(e,t,n,c,d){o.parsePskey(e,n,c,d);var l="action=getSubscriptionParams&entityId="+c+"&pskeyText="+d+"&userdepid="+Object(i.r)(s()),p=Object(i.O)(s());u(Object(r.r)("/support/"+p+"/PubSub.do",l)).then(function(t){var n=t.data.data;if(0,null!=n&&"success"==n.status){var i=n.subscriptionParams;PubSubApi.subscribe(e,i.psuri,i.configuration,"",i.authtype,i.authid)}else u(Object(r.Q)({type:"alert",message:a.f.getI18NValue("support.label.collision.detection.error")}))})},o.getPskey=function(e,t,n,r){if(n===c.COLLISIONKEY){var a=e+"_"+t+"_"+n;return Object(i.vb)(s())&&(a+=c.DOMAINMAPPED),a}},o.parsePskey=function(e,t,n,r){var i=e.split("_");if(3===i.length&&e.indexOf(c.COLLISIONKEY)>-1){t=i[0],n=i[1];return(r=i[2]).endsWith(c.DOMAINMAPPED)&&(r=r.substring(0,r.length-c.DOMAINMAPPED.length)),o.getPskey(t,n,r)}},o.unSubscribe=function(e){c.isPubSubConnected&&(e.indexOf(c.COLLISIONKEY)>-1&&void 0===c.keysWithUnsubscribeCallInitiated[e]&&o.isSubscribed(e)&&(PubSubApi.unSubscribe(e),c.keysWithUnsubscribeCallInitiated[e]=1))};var c=function(){};c.COLLISIONKEY="collisionKey",c.retryCount=0,c.keysWithSubscribeCallInitiated={},c.DOMAINMAPPED="DM",c.currCaseId="",c.prevCaseId="",c.keysWithUnsubscribeCallInitiated={},c.keysWithSubscribeCallInitiated={},c.userLeft=function(e){var t=o.getSubscribedList(),n="";for(var r in t)(n=t[r]).indexOf(e+"_collisionKey")>-1&&o.unSubscribe(n)},c.clearCollisionTempStorage=function(){c.retryCount=0};var d=n(1495),l=n(1399),p=n(6),m=n(3),f=n(7),g=n(114),b=n(956);var O=n(102),h=["metaData","starredViewCount"],$=[];function I(e,t,n){var a=n.module,o=n.type,s=(n.zgid,e()),u=s.moduleMeta.tickets.apiKey;-1!==h.indexOf(o)?-1!==["metaData","starredViewCount"].indexOf(o)&&a===u?Object(i.Hb)(s)?Object(d.b)(n,s,t,e):Object(i.Bb)(s)?Object(l.b)(n,s,t,e):function(e){return 2==e.routing.urls.detailView.match&&"tickets"==e.moduleMapper[e.routing.paramMap.moduleName]}(s)&&function(e,t,n,a){var o=e.meta,s=e.dvMeta,u=e.actionBy,c=e.modifiedFields,d=t.myInfo.id;if(o){var l=Object(f.normalize)(o,Object(f.schema)(m.L.TICKET_L,{mapping:{contact:Object(f.schema)(m.L.CONTACT_L,{mapping:{account:Object(f.schema)(m.L.ACCOUNT_L)}}),product:Object(f.schema)(m.L.PRODUCT_L)}}));n({type:"WMS_META_SUCCESS",data:l,moduleName:m.L.TICKET_L}),-1!=c.indexOf("assigneeId")&&(t.module.agent[o.assigneeId]||n(Object(b.b)(o.assigneeId,o.departmentId)))}if(!Object(p.F)(s)&&d!=u){var O={};s.depName?O={mode:"switchDep",newDep:s.depName,oldDep:t.routing.paramMap.deptName,actionBy:u}:"TRASH"==s.eventType?O={mode:"trash",actionBy:u,ticketId:o.id}:"SPAM_DELETE"==s.eventType&&(O={mode:"spamDelete",actionBy:u,ticketId:o.id}),n(g.f.showConfirmBox(O)).then(function(e,t){console.log("then")},function(){var e=t.routing.paramMap,a=e.orgName,o=e.deptName,s=Object(i.eb)(t);n(Object(r.K)({pathname:"/"+a+"/"+o+"/"+t.moduleMeta.tickets.sanitizedName+"/list/"+s}))})}}(n,s,t):"hqPage"===o&&console.log("HQ Page WMS handling..."):"mailSendingFailure"==o?t({type:"ADD_EMAIL_FAILURELIST",data:{newItem:n.metadata,deptId:n.depId}}):-1!==$.indexOf(o)&&console.log("allPageType"),O.a.handleWmsMessage(n)}var y=n(1266),v=n(22),E=n(1931),T=function(){},S=void 0,C=void 0;T.setMetaInfo=function(e,t){S=e,C=t},T.serverup=function(){Object(E.a)(S,C),Object(y.c)(C,v.Nb),PubSubApi.init()},T.handleCustomMessage=function(e){console.log("wmsMessage==>",e),I(S,C,e)};var A=n(113),w=function(){},N=void 0,_=void 0;function R(e,t){var n=N(),r=null,i=n.moduleMeta.tickets.singularLabel.toLowerCase();(n.collisionNotificationList[e]||[]).forEach(function(e){e.actionBy==t&&"replying"==e.mode&&(r=e.notificationId)}),_(r?Object(g.g)(e,r):Object(g.h)(e,{message:a.f.getI18NValue("support.label.collision.detection.agent.view.notify",[i]),actionBy:t,showNotification:!1,mode:"userIn"})),_(Object(g.n)(e,t))}function j(e){var t=o.parsePskey(e);if(t.split("_")[2]===c.COLLISIONKEY){var n=t.split("_")[0],r=t.split("_")[1],i=N(),a=i.routing.paramMap.moduleId;return n==i.currentOrgId&&r==a}return!1}function L(e,t,n){e.Collaboration=T,e.CollisionUtil=c,e.PubSubImpl=w,T.setMetaInfo(t,n),w.setMetaInfo(t,n),o.setMetaInfo(t,n)}function P(e,t){if(2==e.routing.urls.detailView.match&&"tickets"==e.moduleMapper[e.routing.paramMap.moduleName]||e.ticketUIState.ticketId){var n=e.routing.paramMap.moduleId;c.prevCaseId=c.currCaseId,c.currCaseId=n,""!=c.prevCaseId&&c.prevCaseId!=c.currCaseId?(c.userLeft(c.prevCaseId),c.prevCaseId=""):(c.currUserId=e.myInfo.id,o.subscribe(e.currentOrgId,n))}else c.userLeft(c.currCaseId),c.currCaseId=""}w.setMetaInfo=function(e,t){N=e,_=t},w.onConnect=function(){c.isPubSubConnected=!0,P(N())},w.handleUserIn=function(e,t){console.log("userIn")},w.handleSubscribe=function(e){},w.handleUnSubscribe=function(e){o.parsePskey(e).split("_")[2]===c.COLLISIONKEY&&(delete c.keysWithUnsubscribeCallInitiated[e],delete c.keysWithSubscribeCallInitiated[e],c.clearCollisionTempStorage())},w.handleUserList=function(e,t){if(j(e)){var n=o.parsePskey(e).split("_")[1];_(Object(A.e)(n)).then(function(e){var t=e.data.collisionData.collidingUsers;(void 0===t?[]:t).forEach(function(e){var t=e.userAction,r=e.agentId;"replying"==t&&r!=c.agentId&&_(Object(g.h)(n,{message:a.f.getI18NValue("support.label.collision.detection.agent.reply"),actionBy:r,showNotification:!0,mode:"replying"}))})})}},w.handleMessage=function(e,t){if(j(e)){var n=N(),i=o.parsePskey(e).split("_")[1];console.log("msg",t);var s=t.eventType,u=t.actionBy,d=t.userType,l=t.msgType,p=t.commentId,m=t.threadId,f=n.moduleMeta.tickets.singularLabel.toLowerCase();if("commentAdded"==s){u!=c.currUserId&&_("customer"==d?Object(r.Q)({type:"success",message:a.f.getI18NValue("support.label.collision.detection.customer.comment.add")}):Object(g.h)(i,{message:a.f.getI18NValue("support.label.collision.detection.comment.add"),actionBy:u,showNotification:!0}));var b=b(p,i);b||_(Object(g.a)(i,p))}else if("commentDeleted"==s){u!=c.currUserId&&_("customer"==d?Object(r.Q)({type:"success",message:a.f.getI18NValue("support.label.collision.detection.customer.comment.delete")}):Object(g.h)(i,{message:a.f.getI18NValue("support.label.collision.detection.comment.delete"),actionBy:u,showNotification:!1}));var O=O(p,i);O&&_(Object(g.c)(i,p))}else"commentUpdated"==s?(u!=c.currUserId&&"customer"==d&&_(Object(r.Q)({type:"success",message:a.f.getI18NValue("support.label.collision.detection.customer.comment.edit")})),_(Object(g.j)(i,p))):"draftUpdated"==s&&u!=c.currUserId?_(Object(g.k)(i,m)):"replied"!=s&&"draftSaved"!=s&&"agentForwardedReply"!=s&&"feedbackAdded"!=s||u==c.currUserId?"draftDiscarded"==s&&u!=c.currUserId?(_(Object(g.d)(i,m)),_(Object(g.h)(i,{message:a.f.getI18NValue("support.label.collision.detection.agent.discarddraft"),actionBy:u,showNotification:!1}))):"ticketCollision"==l&&(console.log("eventType",s),"chatCreated"==s||"leftChat"==s||"joinedChat"==s||"membersAddedToChat"==s||"groupChatCreated"==s?_(Object(g.i)(t)):"replying"==s&&u!=c.currUserId?(_(Object(g.h)(i,{message:a.f.getI18NValue("support.label.collision.detection.agent.reply"),actionBy:u,showNotification:!0,mode:"replying"})),_(Object(g.p)(i,u))):"userIn"==s&&u!=c.currUserId?(_(Object(g.h)(i,{message:a.f.getI18NValue("support.label.collision.detection.agent.view.notify",[f]),actionBy:u,showNotification:!0,mode:"userIn"})),_(Object(g.m)(t))):"userOut"==s&&u!=c.currUserId?(_(Object(g.h)(i,{message:a.f.getI18NValue("support.label.collision.detection.agent.left.notify",[f]),actionBy:u,showNotification:!0,mode:"userOut"})),_(Object(g.o)(i,u))):"viewing"==s&&u!=c.currUserId?R(i,u):"idle"==s&&u!=c.currUserId&&_(Object(g.l)(i,u))):("feedbackAdded"==s?_(Object(r.Q)({type:"success",message:a.f.getI18NValue("support.label.collision.detection.feedback")})):"customer"==d&&_(Object(r.Q)({type:"success",message:a.f.getI18NValue("support.label.collision.detection.customer.replied")})),_(Object(g.b)(i,m)),"draftSaved"==s?_(Object(g.h)(i,{message:a.f.getI18NValue("support.label.collision.detection.agent.savedraft"),actionBy:u,showNotification:!1})):"replied"==s&&(R(i,u),_(Object(g.h)(i,{message:a.f.getI18NValue("support.label.collision.detection.agent.replied",[f]),actionBy:u,showNotification:!0,action:"replied"}))))}},n.d(t,"setCollaboration",function(){return L}),n.d(t,"wmsHandleAfterDispatch",function(){return P})},541:function(e,t,n){"use strict";n.r(t),n.d(t,"renderWms",function(){return f});var r=n(0),i=n.n(r),a=n(57),o=n.n(a),s=n(26),u=(n(364),n(365),n(258),n(366),n(367),n(368),n(369),n(370),n(8)),c=n(229),d=n(197),l=n(257),p=n(165),m=Object(l.a)();function f(){o.a.render(i.a.createElement(s.Provider,{store:m},i.a.createElement(u.a,{i18n:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i18n}),timeZone:function(e){return e.myInfo.timeZone}},i.a.createElement(d.a,null))),document.getElementById("wmsstatusbar"))}Object(p.b)(m,{currentOrg:currentOrg,currentDepartment:currentDepartment,userInfo:userInfo,myProfile:myProfile,modules:modules,licenseType:licenseType,lastAccess:lastAccess,lastAccessQueueViewInfo:lastAccessQueueViewInfo}),setTimeout(function(){o.a.render(i.a.createElement(s.Provider,{store:m},i.a.createElement(u.a,{direction:document.getElementsByTagName("html")[0].dir,i18n:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i18n}),permission:function(e){return e.module.profile[e.myInfo.profileId].permissions},timeZone:function(e){return e.myInfo.timeZone},license:function(e){return e.license},user:function(e){return e.myInfo}},i.a.createElement(c.a,null))),document.getElementById("react"))},1)},591:function(e,t,n){"use strict";n.r(t),n.d(t,"registerWMS",function(){return i}),n.d(t,"wmsUIReady",function(){return a}),n.d(t,"renderWMS",function(){return o});n(0),n(57);var r=n(541);function i(e){var t=e.isSilent,n=e.email,r=e.zuid,i=e.baseDomain,a=e.isDomainMappedPortal;if("undefined"!=typeof WebMessanger){var o=WMSSessionConfig.CHAT|WMSSessionConfig.CHAT_PRESENCE|WMSSessionConfig.PRESENCE_PERSONAL|WMSSessionConfig.CROSS_PRD;WebMessanger.setConfig(o),a&&"zoho.com"!==i&&"localzoho.com"!==i&&(WebMessanger.useSameDomain(),WebMessanger.enableTokenPairAuth()),WebMessanger.setNoDomainChange(),WebMessanger.enableGlobalSearch(),WebMessanger.registerZuid("ZS",r,n,t)}}function a(){WebMessanger.disableWMSStatus(),WebMessanger.disableToggleUI(),Object(r.renderWms)()}function o(){console.log("renderWMS",document.getElementById("wms"))}},956:function(e,t,n){"use strict";n.d(t,"i",function(){return p}),n.d(t,"g",function(){return m}),n.d(t,"b",function(){return f}),n.d(t,"j",function(){return g}),n.d(t,"h",function(){return b}),n.d(t,"c",function(){return O}),n.d(t,"e",function(){return h}),n.d(t,"a",function(){return $}),n.d(t,"k",function(){return y}),n.d(t,"d",function(){return E}),n.d(t,"f",function(){return T}),n.d(t,"l",function(){return S});n(20);var r=n(2),i=n.n(r),a=n(15),o=n(6),s=n(7),u=n(17),c=n(46),d=n(3),l=n(39);function p(e){return{types:Object(o.m)("AGENTS_COUNT"),callAPI:function(t){var n=Object(u.r)(t);return Object(a.a)("/api/v1/agentsTicketsCount?"+Object(c.a)(t)+"&agentIds="+e,!1,{orgId:t.currentOrgId}).get().then(function(e){return 204!==e.responseStatus?(e.data=e.data.map(function(e){return i()({},e,{id:e.agentId})}),{countData:e.data,deptId:n}):{}})}}}function m(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{types:Object(o.m)(d.L.AGENT),callAPI:function(o){return Object(a.a)("/api/v1/agents?"+(e&&"allDepartment"!==e?"departmentId="+e:"")+"&from="+t+"&limit="+n+"&status=ACTIVE&isConfirmed="+r,!1,{orgId:o.currentOrgId}).get().then(function(t){if(204!==t.responseStatus){var r=t.data.length<n,a=Object(s.normalize)(t.data,Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)));return i()(a,{noMoreData:r,depId:e})}return{entities:{noMoreData:!0},result:[]}})}}}function f(e,t){return{types:Object(o.m)(d.L.AGENT),callAPI:function(n){return Object(a.a)("/api/v1/agents/"+e,!1,{orgId:n.currentOrgId}).get().then(function(e){var n=Object(s.normalize)(e,Object(s.schema)(d.L.AGENT_L));return i()(n,{depId:t})})}}}function g(e,t,n){return{types:Object(o.m)("AGENT_SEARCH"),callAPI:function(r){return Object(a.a)("/api/v1/agents?searchStr="+e+"&from="+t+"&limit="+n,!1,{orgId:r.currentOrgId}).get().then(function(e){if(204!==e.responseStatus){var r=e.data.length<n,a=Object(s.normalize)(e.data,Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)));return i()(a,{noMoreData:r})}return 1===t?{entities:{noMoreData:!0,isEmpty:!0},result:[]}:{entities:{noMoreData:!0},result:[]}})}}}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.u,l=arguments[4];return{types:Object(o.m)(d.L.AGENT),callAPI:function(o){var p={activeAgents:"status=ACTIVE",deActiveAgents:"status=DISABLED",notConfirmedAgents:"isConfirmed=false",allAgents:"",activeConfirmedAgents:"status=ACTIVE&isConfirmed=true",activeConfirmedNonLightAgents:"status=ACTIVE&isConfirmed=true&rolePermissionType=${NON_LIGHT}"}[e.replace("Search","")]||"",m=l||Object(u.r)(o),f=l?"&departmentId="+l:Object(c.a)(o,!0),g="/api/v1/agents?"+(p?p+"&":"")+"from="+t+"&limit="+(2*r>200?200:2*r)+(n?"&searchStr=*"+n+"*":"")+f;return Object(a.a)(encodeURI(g),!1,{orgId:o.currentOrgId}).get().then(function(a){return i()({},Object(s.normalize)(204!==a.responseStatus?a.data:[],Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L))),{deptId:m,from:t,limit:r,isNext:!!a.data&&a.data.length>r,searchStr:n,agentType:e})},function(e){throw e})}}}function O(e){return{types:Object(o.m)("AGENT"),shouldCallAPI:function(){return e.length>=1},callAPI:function(t){return Object(a.a)("/api/v1/agentsByIds?agentIds="+e.join(),!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(s.normalize)(204!==e.responseStatus?e.data:[],Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)))})}}}function h(e){return{types:Object(o.m)("TEAM_AGENT"),callAPI:function(t){return Object(a.a)("/api/v1/teams/"+e+"/members",!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(s.normalize)(e.members,Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)))})}}}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n="";return t.map(function(t){void 0!==e[t]&&(n+="&"+t+"="+e[t])}),n}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2];return void 0!==e[t]?e[t]:n}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=I(e,"searchType","string"),n=e.searchStr;return n&&(n="string*"==t?n+"*":"*string*"==t?"*"+n+"*":n),n}function v(e){var t=e.isConfirmed,n=e.status;switch(n){case l.a:return l.a;case l.d:return l.d;case l.c:return l.c;default:if(void 0!==t&&!t)return l.l;if(void 0===n)return l.b}}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.from=I(e,"from","1"),e.limit=I(e,"limit","100"),e.searchStr=y(e);var t=e.from>1?l.k:l.j;return{types:Object(o.m)(t),callAPI:function(t){var n="/api/v1/agents?orgId="+t.currentOrgId;return n+=$(e,["from","limit","status","isConfirmed","searchStr","departmentId","departmentIds","profileIds","roleIds"]),Object(a.a)(n).get().then(function(t){return i()(Object(s.normalize)(void 0!==t.data?t.data:[],Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L))),{status:v(e)})})}}}function T(e,t,n){var r={status:e,isConfirmed:t,includeLightAgent:n};return r.includeLightAgent=I(r,"includeLightAgent",!0),{types:Object(o.m)(l.i),callAPI:function(e){var t="/api/v1/agents/count?orgId="+e.currentOrgId;return t+=$(r,["status","isConfirmed","includeLightAgent"]),Object(a.a)(t).get().then(function(e){return i()({},e,{status:v(r)})})}}}function S(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:l.m,data:{isEnabled:e}}}}}]);