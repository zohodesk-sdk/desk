(window.deskappJsonp=window.deskappJsonp||[]).push([[141],{1004:function(e,t,a){"use strict";(function(e){var n=a(11),o=a.n(n),i=a(2),r=a.n(i),s=a(12),l=a.n(s),c=a(9),d=a.n(c),u=a(10),m=a.n(u),p=a(13),h=a.n(p),f=a(14),g=a.n(f),v=a(0),b=a.n(v),_=(a(1),a(16)),y=a(1012),E=a(997),C=a(1013),I=a.n(C),A=(a(1014),function(t){function a(e){d()(this,a);var t=h()(this,(a.__proto__||l()(a)).call(this,e));t.state={isEditorLoad:!1};return E.a.apply(t,["editorCallback","handleUpload","handleChange","focusCallback","handleInlineUpload","processPastedFile","handleDropUpload","blurCallback"]),t}return g()(a,t),m()(a,[{key:"componentDidMount",value:function(){var t=this.props,a=t.id,n=t.value,o=t.editorMode,i=void 0===o?"":o,s=t.editorOptions,l=void 0===s?{}:s,c=t.needEditorFocus,d=void 0===c||c,u=t.mode;if(a&&e.ZohoDeskEditor){var m={id:a,content:n,callback:this.editorCallback,imageuploadcallback:this.handleInlineUpload,processPastedFile:this.processPastedFile,handleInlineDropImage:this.handleDropUpload,contentChanged:this.handleChange,focusCallback:this.focusCallback,lineHeight:"Normal",needEditorFocus:d,blurCallback:this.blurCallback,mode:u};m=r()(m,l),ZohoDeskEditor_Init.init(i),ZohoDeskEditor.create&&ZohoDeskEditor.create(m)}}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.id,n=t.chageEditorContent;t.value;e.isEmptyContent&&editor[a]&&editor[a].setContent(""),e.chageEditorContent!=n&&e.chageEditorContent&&void 0!==n&&editor[a].setContent(e.value)}},{key:"componentWillUnmount",value:function(){var t=this.props.id;e.editor&&e.editor[t]&&delete e.editor[t]}},{key:"focusCallback",value:function(){var e=this.props.onFocus;e&&e()}},{key:"handleChange",value:function(){var e=this.props,t=e.onChange,a=e.id,n=editor[a]?editor[a]:{},o=n.getContent?n.getContent():"";Object(y.a)(n)||(o=""),o="plaintext"===n.mode?Object(y.b)(o):o,t&&t(o.trim(),a)}},{key:"editorCallback",value:function(t){var a=this.props.editorCallback;this.setState({isEditorLoad:!0});var n=this.props.id;e.editor=e.editor||{},editor[n]||(editor[n]=t),a&&a(t)}},{key:"handleInlineUpload",value:function(e,t,a,n,o){this.handleUpload(e).then(function(e){var a={};a[0]={url:e,desc:o},t(a,n)},function(){a(n)})}},{key:"handleDropUpload",value:function(e,t,a){this.handleUpload(e).then(function(e){t(e)},function(){a()})}},{key:"blurCallback",value:function(){var e=this.props.blurCallback;e&&e()}},{key:"processPastedFile",value:function(e,t,a,n){var o=void 0;"blob"===t?o=e:(o=new Blob([e.split(",")[1]],{type:"image/png"})).name="zohokb_"+(new Date).getTime()+Math.floor(1e3*Math.random()+1);this.handleUpload(o).then(function(e){a(e)},function(){n()})}},{key:"handleUpload",value:function(e){var t=this.props.onUpload;try{var a=new FormData;return a.append("file",e),t(a).then(function(e){var t=e.data||{},a=t.data,n=t.orgId,o=a||{},i=o.id,r=o.href;if(i)return r+"?orgId="+n;throw{}},function(e){throw e})}catch(e){return o.a.reject()}}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.dataId,n=this.state.isEditorLoad;return b.a.createElement(_.Container,{className:I.a.editDraft,dataId:a},!n&&b.a.createElement("div",{className:I.a.stencillist9},b.a.createElement("div",{className:I.a.stencilLoading}),b.a.createElement("div",{className:I.a.stencilLoading}),b.a.createElement("div",{className:I.a.stencilLoading}),b.a.createElement("div",{className:I.a.stencilLoading}),b.a.createElement("div",{className:I.a.stencilLoading}),b.a.createElement("div",{className:I.a.stencilLoading})),b.a.createElement(_.Box,{flexible:!0,id:t,dataId:a}))}}]),a}(v.Component));t.a=A}).call(this,a(68))},1007:function(e,t,a){"use strict";var n,o=a(5),i=a.n(o),r=a(12),s=a.n(r),l=a(9),c=a.n(l),d=a(10),u=a.n(d),m=a(13),p=a.n(m),h=a(14),f=a.n(h),g=a(0),v=a.n(g),b=a(1),_=a.n(b),y=a(1042),E=a.n(y),C=a(157),I=a.n(C),A=a(30),k=a(80),S=a.n(k),N=a(72),x=a.n(N),D=a(1026),O=a.n(D),w=a(361),T=a.n(w),P=function(e){function t(e){c()(this,t);var a=p()(this,(t.__proto__||s()(t)).call(this,e));return a.handleSelect=a.handleSelect.bind(a),a.togglePopup=a.togglePopup.bind(a),a}return f()(t,e),u()(t,[{key:"handleSelect",value:function(e,t,a,n){if(void 0!==this.props.onSelect){var o=this.props;(0,o.onSelect)(e,o.entity)}this.props.togglePopup(n)}},{key:"togglePopup",value:function(e){var t=this.props,a=t.togglePopup,n=t.boxPosition;e.stopPropagation(),a(e,n)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.isPopupOpen,n=t.onPopupChange;e.isPopupOpen!==a&&n&&n(a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.theme,n=void 0===a?"white":a,o=t.objValues,i=t.Icnsize,r=t.IcnName,s=(t.removeClose,t.listStyle,t.arrowPosition),l=t.position,c=t.right,d=(t.isScroll,t.widgets),u=void 0===d?[]:d,m=t.onWidgetScroll,p=t.onWidgetSelect,h=t.selectedWidgetId,f=t.arrowRight,g=t.arrowLeft,b=t.size,_=t.left,y=t.isPopupOpen,C=t.isPopupReady,k=t.getTargetRef,S=t.getContainerRef;return i=i||"medium",v.a.createElement("span",{className:I.a.posrel,ref:k,onClick:this.togglePopup},v.a.createElement("span",{className:E.a.defaultSize+" "+I.a.posrel+" "+E.a[n]},v.a.createElement("span",null,v.a.createElement(A.TopbandFontIcon,{name:r,size:i}))),y?v.a.createElement("span",{className:E.a.dropDivPosition},v.a.createElement(x.a,{isAnimate:!0,right:c,left:_,isActive:C,size:b,arrowRight:f,arrowLeft:g,boxPosition:l,getRef:S,arrowPosition:s},o.map(function(t,a){return v.a.createElement(T.a,{autoHover:!0,value:t.name,iconName:t.iconName||null,iconClass:t.iconClass,iconSize:t.size,key:a,id:t.name,onClick:e.handleSelect,dataId:"Delete"===t.name?"delete":"Edit"===t.name?"edit":t.name})}),o.length&&u.length?v.a.createElement(O.a,null):null,u.length?v.a.createElement("div",{className:E.a.widgetList,onScroll:m},u.map(function(e){var t=e.name,a=e.sanitisedName+"_"+e.installationId;return h!=a?v.a.createElement(T.a,{autoHover:!0,value:decodeURIComponent(t),iconName:null,key:a,id:a,onClick:function(){p(a,e)}}):null})):null)):null)}}]),t}(g.Component);P.defaultProps={IcnName:"more1",size:"small"},P.propTypes=(n={IcnName:_.a.string,Icnsize:_.a.string,arrowLeft:_.a.string,arrowPosition:_.a.string,arrowRight:_.a.string,boxPosition:_.a.string,entity:_.a.object,getContainerRef:_.a.func},i()(n,"getContainerRef",_.a.func),i()(n,"getTargetRef",_.a.func),i()(n,"isPopupOpen",_.a.bool),i()(n,"isPopupReady",_.a.bool),i()(n,"isScroll",_.a.bool),i()(n,"left",_.a.string),i()(n,"listStyle",_.a.string),i()(n,"objValues",_.a.array),i()(n,"onPopupChange",_.a.func),i()(n,"onSelect",_.a.func),i()(n,"onWidgetScroll",_.a.func),i()(n,"onWidgetSelect",_.a.func),i()(n,"position",_.a.string),i()(n,"removeClose",_.a.func),i()(n,"right",_.a.string),i()(n,"selectedWidgetId",_.a.string),i()(n,"size",_.a.string),i()(n,"theme",_.a.string),i()(n,"togglePopup",_.a.func),i()(n,"widgets",_.a.array),n),t.a=S()(P)},1012:function(e,t,a){"use strict";function n(e){var t=e&&e.getContent&&e.getContent()||"";return!(""==t||!t.length||"<div><br></div>"==t||!("plaintext"===e.mode||e.doc.body.innerText.trim().length||e.doc.getElementsByTagName("img").length||e.doc.getElementsByTagName("iframe").length))}function o(e){return 1==/<|>|&|"|'|\\/g.test(e)&&(e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/\\/g,"&#x5c;")).replace(/'/g,"&#39;")),e}a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o})},1013:function(e,t,a){e.exports={icon:"TextEditor-module__icon",small:"TextEditor-module__small",threeDotIcon:"TextEditor-module__threeDotIcon",editDraft:"TextEditor-module__editDraft",New_Editor_MultiTools:"TextEditor-module__New_Editor_MultiTools",cardDetail:"TextEditor-module__cardDetail",stencilLoading:"TextEditor-module__stencilLoading",stencillist9:"TextEditor-module__stencillist9",Stencils__placeHolderShimmer:"TextEditor-module__Stencils__placeHolderShimmer"}},1014:function(e,t,a){(function(e){e.ZohoDeskEditor_Init=function(){},ZohoDeskEditor_Init.init=function(e){ZohoDeskEditor_Init.version="v1.8.9",ZohoDeskEditor_Init.inlineQuotes=!0,ZohoDeskEditor_Init.csrfCookieVal="",ZohoDeskEditor_Init.csrfParamVal="",ZohoDeskEditor_Init.defaultFontSize="16",ZohoDeskEditor_Init.defaultFontFamily="ProximaNovaRegular, Arial, Helvetica, sans-serif",ZohoDeskEditor_Init.dropDownTopPadding=11,ZohoDeskEditor_Init.dropDownLeftPadding=5,ZohoDeskEditor_Init.slidebarClass="KB_Editor_DropDown_Slidebar";var t=navigator.userAgent.toLowerCase();ZohoDeskEditor_Init.is_ie=-1!==t.indexOf("ie"),ZohoDeskEditor_Init.is_safari=-1!==t.indexOf("safari"),ZohoDeskEditor_Init.is_opera=-1!==t.indexOf("opera"),ZohoDeskEditor_Init.is_mac=-1!==t.indexOf("mac"),ZohoDeskEditor_Init.loading=!0,ZohoDeskEditor_Init.changedTools=["fontfamily"],ZohoDeskEditor_Init.spellcheckURL="lt.zoho.com",ZohoDeskEditor_Init.useProxy=!0,ZohoDeskEditor_Init.useSameDomain=!0,ZohoDeskEditor_Init.domain=document.domain,ZohoDeskEditor_Init.contextVal="support",ZohoDeskEditor_Init.spellcheckProxyUrl="/"+ZohoDeskEditor_Init.contextVal+"/ze",ZohoDeskEditor_Init.tabKeyHandling=!0;var a=window.location.protocol,n="",o="com",i="",r=".zohostatic.";"US".indexOf("SKY")>-1&&(r=".skydeskstatic.",o="jp"),"US".indexOf("RO")>-1&&(i="-ro"),["LOC","DEV"].indexOf("US")>-1&&(n="local"),ZohoDeskEditor_Init.jsurl=a+"//"+n+"localjs"+i+r+o+"/zde/"+ZohoDeskEditor_Init.version+"/js/",ZohoDeskEditor_Init.cssurl=a+"//"+n+"localcss"+i+r+o+"/zde/"+ZohoDeskEditor_Init.version+"/css/",ZohoDeskEditor_Init.imgurl=a+"//"+n+"localimg"+i+r+o+"/zde/"+ZohoDeskEditor_Init.version+"/images/","CommentEditor"==e||"replyComments"==e?(ZohoDeskEditor_Init.toolbarOrder=[["bold","Bold (Ctrl+B)","#KBEditortools_txtbold","KBEditortools-txtbold"],["italic","Italic (Ctrl+I)","#KBEditortools_txtitalic","KBEditortools-txtitalic"],["undterline","Underline (Ctrl+U)","#KBEditortools_txtunderline","KBEditortools-txtunderline"],["forecolor","Font color","#KBEditortools_clrpick","KBEditortools-clrpick"],["backcolor","Background color","#KBEditortools_bgclr","KBEditortools-bgclr"],["listoptions","Lists","#KBEditortools_list_round","KBEditortools-list-round"],["removeFormat","Clear formatting","#KBEditortools_clr","KBEditortools-clr"],["link","Insert link","#KBEditortools_insertlink","KBEditortools-insertlink"],["table","Insert table","#KBEditortools_inserttable","KBEditortools-inserttable"]],"replyComments"==e&&(ZohoDeskEditor_Init.toolbarOrder=ZohoDeskEditor_Init.toolbarOrder.slice(0,5))):ZohoDeskEditor_Init.toolbarOrder=[["bold","Bold (Ctrl+B)","#KBEditortools_txtbold","KBEditortools-txtbold"],["italic","Italic (Ctrl+I)","#KBEditortools_txtitalic","KBEditortools-txtitalic"],["underline","Underline (Ctrl+U)","#KBEditortools_txtunderline","KBEditortools-txtunderline"],["forecolor","Font color","#KBEditortools_clrpick","KBEditortools-clrpick"],["backcolor","Background color","#KBEditortools_bgclr","KBEditortools-bgclr"],["heading","Headings","#KBEditortools_block_down_arrow","KB_Editor_Bdr_div Text_Type"],["fontSize","Font size","#KBEditortools_block_down_arrow","KB_Editor_Bdr_div TextSize_Type"],["alignoptions","Align","#KBEditortools_align_left","KBEditortools-align-left"],["listoptions","Lists","#KBEditortools_list_round","KBEditortools-list-round"],["indentoptions","Indent","#KBEditortools_increaseindent","KBEditortools-increaseindent"],["attach","Insert image","#KBEditortools_insertimage","KBEditortools-insertimage"],["removeFormat","Clear formatting","#KBEditortools_clr","KBEditortools-clr"],["articlelink","Insert article as link","#KBEditortools_linkarticle","KBEditortools-linkarticle"],["insertoptions","Insert options","#KBEditortools_block_down_arrow","KB_Editor_Bdr_div Insert_Type"],["editorexpand","Normal view","#KBEditortools_expand","KBEditortools-expand"],["styletext","Text Style","#KBEditortools_txtbgclr","KBEditortools-txtbgclr"],["plaintext","Plain text","#KBEditortools_arrow","KB_Editor_PlainText KB_Editor_FullScreen"]],ZohoDeskEditor_Init.heading=[{htm:"Heading 1",datAttr:"h1"},{htm:"Heading 2",datAttr:"h2"},{htm:"Heading 3",datAttr:"h3"},{htm:"Normal",datAttr:"p"}],ZohoDeskEditor_Init.insertoptions=[{htm:"Insert link",datAttr:"link",iconClass:"KBEditortools-insertlink",svgId:"#KBEditortools_insertlink"},{htm:"Remove link",datAttr:"unlink",iconClass:"KBEditortools-removelink",svgId:"#KBEditortools_removelink"},{htm:"Insert HTML",datAttr:"object",iconClass:"KBEditortools-embed2",svgId:"#KBEditortools_embed_2"},{htm:"Edit HTML",datAttr:"edithtml",iconClass:"KBEditortools-embed2",svgId:"#KBEditortools_embed_2"},{htm:"Insert table",datAttr:"table",iconClass:"KBEditortools-inserttable",svgId:"#KBEditortools_inserttable"},{htm:"Insert horizontal rule",datAttr:"inserthorizontalrule",iconClass:"KBEditortools-hr",svgId:"#KBEditortools_hr"},{htm:"Insert code",datAttr:"code",iconClass:"KBEditortools-code",svgId:"#KBEditortools_code"}],ZohoDeskEditor_Init.align=[{htm:"Align left",datAttr:"justifyleft",iconClass:"KBEditortools-align-left",svgId:"#KBEditortools_align_left"},{htm:"Align right",datAttr:"justifyright",iconClass:"KBEditortools-align-right",svgId:"#KBEditortools_align_right"},{htm:"Align justify",datAttr:"justifyfull",iconClass:"KBEditortools-align-justify",svgId:"#KBEditortools_align_justify"},{htm:"Align center",datAttr:"justifycenter",iconClass:"KBEditortools-align-center",svgId:"#KBEditortools_align_center"}],ZohoDeskEditor_Init.list=[{htm:"Bullets",datAttr:"insertunorderedlist",iconClass:"KBEditortools-list-round",svgId:"#KBEditortools_list_round"},{htm:"Numbering",datAttr:"insertorderedlist",iconClass:"KBEditortools-list-number",svgId:"#KBEditortools_list_number"}],ZohoDeskEditor_Init.indent=[{htm:"Increase indent",datAttr:"indent",iconClass:"KBEditortools-increaseindent",svgId:"#KBEditortools_increaseindent"},{htm:"Decrease indent",datAttr:"outdent",iconClass:"KBEditortools-decreaseindent",svgId:"#KBEditortools_decreaseindent"}],ZohoDeskEditor_Init.others=[{htm:"Check spelling",datAttr:"spellcheck"},{htm:"Plain text mode",datAttr:"switchmode"}],ZohoDeskEditor_Init.attachDrop=[{clk:function(e){e.uploadImage("load"),ZohoDeskEditor_Init.needEditorStats&&e.updateCount("image")},htm:"Upload",iconClass:"KBEditortools-upload",svgId:"#KBEditortools_upload"},{clk:function(e){callZDOCSAttachViewer(docsObj,"inline")},htm:"Gallery",iconClass:"KBEditortools-image",svgId:"#KBEditortools_image"},{clk:function(e){e.uploadImage("url"),ZohoDeskEditor_Init.needEditorStats&&e.updateCount("image")},htm:"URL",iconClass:"KBEditortools-sphere",svgId:"#KBEditortools_sphere"}],ZohoDeskEditor_Init.fontSize=[{htm:"8",datAttr:"1"},{htm:"10",datAttr:"2"},{htm:"12",datAttr:"3"},{htm:"14",datAttr:"4"},{htm:"18",datAttr:"5"},{htm:"24",datAttr:"6"},{htm:"36",datAttr:"7"}];var s=function(e){ZohoDeskEditor_Init.toolbarOrder.splice(e,0,["fontfamily","Font","#KBEditortools_Icon_Font","KBEditortools_Icon_Font"]),ZohoDeskEditor_Init.fontfamily=[{htm:"ProximaNova",ff:"ProximaNovaRegular, Arial, Helvetica"},{htm:"Arial",ff:"Arial, Helvetica, sans-serif"},{htm:"Helvetica",ff:"undefined"},{htm:"Verdana",ff:"verdana"},{htm:"Wide",ff:'"arial black"'},{htm:"Courier New",ff:'"courier new", courier, monospace'},{htm:"Comic Sans MS",ff:'"comic sans ms"'},{htm:"Garamond",ff:"garamond, serif"},{htm:"Georgia",ff:"georgia, times new roman, times, serif"},{htm:"Narrow",ff:'"arial narrow", sans-serif'},{htm:"Serif",ff:"serif, times new roman"},{htm:"Tahoma",ff:"tahoma, arial, helvetica, sans-serif"},{htm:"Times New Roman",ff:'"times new roman", times, serif'},{htm:"Trebuchet",ff:'"trebuchet ms", arial, helvetica, sans-serif'},{htm:"Calibri",ff:"Calibri, Verdana, Arial, sans-serif"}]};if("TicketReply"===e){for(var l=0,c=(d=[5,11,12,12,12]).length;l<c;l++)ZohoDeskEditor_Init.toolbarOrder.splice(d[l],1);ZohoDeskEditor_Init.toolbarOrder.unshift(["template","Template","#TemplateIcon","TemplateIcon"]),ZohoDeskEditor_Init.toolbarOrder.unshift(["snippet","","#SnippetIcon","SnippetIcon"]),ZohoDeskEditor_Init.defaultFontSize=10,ZohoDeskEditor_Init.defaultFontFamily="Arial, Helvetica, sans-serif",ZohoDeskEditor_Init.attachDrop.splice(1,1),ZohoDeskEditor_Init.dropDownTopPadding=2,ZohoDeskEditor_Init.dropDownLeftPadding=0,s(5),ZohoDeskEditor_Init.toolbarOrder.splice(3,0,["strikethrough","Strikethrough","#KBEditortools_strike","KBEditortools_strike"]),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheck","Spell Check","#KBEditortools_spellcheck","KBEditortools_spellcheck"]),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheckoptions","Spell Check Languages","#KBEditortools_block_down_arrow","KBEditortools-Block-down-arrow"]),ZohoDeskEditor_Init.insertoptions.push({htm:"Insert quote",datAttr:"quote",iconClass:"KBEditortools-quote",svgId:"#KBEditortools_quote"}),ZohoDeskEditor_Init.tabKeyHandling=!1,ZohoDeskEditor_Init.toolbarOrder.push(["moreoptions","More","#KBEditortools_more1","Kbeditor_more_icon"]),ZohoDeskEditor_Init.moreoptions=[{htm:"Plain Text",datAttr:"plaintext"}]}if("Snippets"===e){var d;for(l=0,c=(d=[5,8,8,8,8,9,10]).length;l<c;l++)ZohoDeskEditor_Init.toolbarOrder.splice(d[l],1);ZohoDeskEditor_Init.defaultFontSize=12,ZohoDeskEditor_Init.toolbarOrder.push(["moreoptions","More","#KBEditortools_more1","Kbeditor_more_icon"]),s(5),ZohoDeskEditor_Init.moreoptions=[{htm:"Increase Indent",datAttr:"indent",iconClass:"KBEditortools-increaseindent",svgId:"#KBEditortools_increaseindent"},{htm:"Decrease Indent",datAttr:"outdent",iconClass:"KBEditortools-decreaseindent",svgId:"#KBEditortools_decreaseindent"},{htm:"Plain Text",datAttr:"plaintext"}]}"TicketForm"===e&&(ZohoDeskEditor_Init.attachDrop.splice(1,1),ZohoDeskEditor_Init.insertoptions.push({htm:"Insert quote",datAttr:"quote",iconClass:"KBEditortools-quote",svgId:"#KBEditortools_quote"}),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheck","Spell Check","#KBEditortools_spellcheck","KBEditortools_spellcheck"]),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheckoptions","Spell Check Languages","#KBEditortools_block_down_arrow","KBEditortools-Block-down-arrow"]),ZohoDeskEditor_Init.toolbarOrder.splice(12,1),ZohoDeskEditor_Init.toolbarOrder.splice(13,1),ZohoDeskEditor_Init.toolbarOrder.splice(3,0,["strikethrough","Strikethrough","#KBEditortools_strike","KBEditortools_strike"]),ZohoDeskEditor_Init.defaultFontFamily="Arial, Helvetica, sans-serif",s(6))}}).call(this,a(68))},1019:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1027),b=a.n(v),_=a(30),y=a(16),E=a(174),C=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.constructPreviewData=a.constructPreviewData.bind(a),a}return m()(t,e),l()(t,[{key:"openNewTab",value:function(e){window.open(e)}},{key:"constructImgURL",value:function(e){var t=this.props.orgId,a=e.indexOf("/api"),n=e.slice(a,e.length);return n+="?orgId="+t+"&inline=true"}},{key:"constructPreviewData",value:function(e){var t=this.props,a=t.oldAttachments,n=t.newAttachments,o=t.showAttachmentViewer,i=a.length?a.concat(n):n;Object(E.a)(e,i,function(e){o(e)})}},{key:"constructAttachItem",value:function(e,t){var a=e.id,n=e.isPreview,o=e.viewUrl,i=e.href,r=e.name,s=e.size,l=e.percentComplete,c=void 0===l?"0":l,d=this.props,u=d.deleleUpload,m=d.removeAttachment,p=(d.isPeekView,o||(n?i:this.constructImgURL(i))),f=Object(E.j)(r),g=Object(E.e)(s),v=Object(E.c)(r);return h.a.createElement("div",{className:b.a.upload+" "+b.a.mr12+" "+(n?b.a.preview:"")},n?h.a.createElement("div",{className:b.a.loader,style:{width:c+"%"}}):null,f?h.a.createElement("img",{onClick:!n&&this.constructPreviewData.bind(this,a),src:p,className:b.a.uploadimage}):h.a.createElement("div",{className:b.a.attachInfo,onClick:this.openNewTab.bind(this,p)},h.a.createElement(_.CommonFontIcon,{name:v,size:"14"}),h.a.createElement("span",{className:b.a.attachsize},g)),n?null:h.a.createElement("span",{className:b.a.uploadclose,onClick:n?null:"new"==t?u.bind(this,a):m.bind(this,a),"data-id":"deleteUpload"},h.a.createElement(_.TopbandFontIcon,{name:"close",size:"12",color:"pure"})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.oldAttachments,n=t.newAttachments,o=t.from,i=t.isPeekView,r=b.a.attachList;return"leftPanel"==o?r=r+" "+b.a.w75:"replyEdtior"==o&&(r=i?r+" "+b.a.peekReplyAttach:r+" "+b.a.replyAttach),a&&a.length||n&&n.length?h.a.createElement(y.Container,{alignBox:"row",scroll:"horizontal",className:r},a&&a.length?a.map(function(t,a){return h.a.createElement(y.Box,{key:a},e.constructAttachItem(t,"old"))}):null,n&&n.length?n.map(function(t,a){return h.a.createElement(y.Box,{key:a,dataId:"attachmentItem_"+(a+1)},e.constructAttachItem(t,"new"))}):null):null}}]),t}(h.a.Component);t.a=C,C.propTypes={data:g.a.object,deleleUpload:g.a.func,from:g.a.string,isPeekView:g.a.bool,newAttachments:g.a.array,oldAttachments:g.a.array,orgId:g.a.string,removeAttachment:g.a.func,showAttachmentViewer:g.a.func}},1021:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(244),b=a(250),_=a(73),y=a.n(_),E=a(245),C=a(247),I=a(1063),A=a.n(I),k=a(359),S=a.n(k),N=a(3),x=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.documentKeyupHandler=a.documentKeyupHandler.bind(a),a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.documentKeyupHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.documentKeyupHandler)}},{key:"documentKeyupHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.preventDefault();var t=this.props,a=t.onSubmitClick,n=t.onCancelClick,o=t.isActive;27===e.keyCode&&o?n():13===e.keyCode&&o&&a()}},{key:"render",value:function(){var e=this.props,t=e.isActive,a=e.palette,n=e.size,o=e.type,i=e.title,r=e.message,s=e.confirmationMessage,l=e.submitText,c=e.cancelText,d=e.onSubmitClick,u=e.onCancelClick,m=e.children;return h.a.createElement(S.a,{portalId:N.v},h.a.createElement(v.a,{isShow:t,size:n},h.a.createElement(b.a,{title:i,palette:a,iconType:o}),h.a.createElement(E.a,{alignBox:"row",className:A.a.section},h.a.createElement("div",{className:A.a.innerSection},m||h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{dangerouslySetInnerHTML:{__html:r}}),s&&h.a.createElement("div",{className:A.a.text},s))),h.a.createElement("div",{className:A.a.footer},h.a.createElement(C.a,null,h.a.createElement("div",{className:A.a.footerInnerSpacing},h.a.createElement(y.a,{text:l,palette:"primary"==a?"primaryFilled":"dangerFilled",onClick:d}),c&&h.a.createElement("span",{className:A.a.buttonGap},h.a.createElement(y.a,{text:c,palette:"secondary",onClick:u}))))))))}}]),t}(p.Component);t.a=x,x.propTypes={alertData:g.a.object,isActive:g.a.bool,onCancelClick:g.a.func,onSubmitClick:g.a.func,palette:g.a.oneOf(["default","primary","danger"]),size:g.a.oneOf(["small","medium"]),type:g.a.oneOf(["delete","alert","remoteAssist","splitTicket"])},x.defaultProps={isActive:!1,type:"alert",palette:"danger",size:"small"}},1023:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1046),b=a.n(v),_=a(152),y=function(e){function t(e){return r()(this,t),d()(this,(t.__proto__||o()(t)).call(this,e))}return m()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.iconName,a=e.iconClass,n=e.iconSize,o=e.palette,i=e.size,r=e.onClick,s=e.iconColor,l=e.title;return h.a.createElement("span",{className:b.a.container,onClick:r,"data-id":"addreqNowbutton","data-title":l},h.a.createElement(_.a,{name:t,iconClass:a,iconSize:n,palette:o,size:i,iconColor:s}))}}]),t}(h.a.Component);t.a=y,y.defaultProps={size:"xmedium",iconName:"plus",palette:"secondary",iconSize:"16",iconColor:"primary"},y.propTypes={iconClass:g.a.string,iconColor:g.a.string,iconName:g.a.string,iconSize:g.a.string,onClick:g.a.func,palette:g.a.string,size:g.a.string,title:g.a.string}},1026:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=r(a(0)),i=r(a(360));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),n(t,[{key:"render",value:function(){return o.default.createElement("div",{className:i.default.separator})}}]),t}();t.default=s},1027:function(e,t,a){e.exports={upload:"UploadList-module__upload common-module__cboth",uploadimage:"UploadList-module__uploadimage",loader:"UploadList-module__loader",uploadclose:"UploadList-module__uploadclose",attachsize:"UploadList-module__attachsize common-module__dotted common-module__oflow common-module__ellipsis",attachInfo:"UploadList-module__attachInfo",attachList:"UploadList-module__attachList",mr12:"UploadList-module__mr12",w75:"UploadList-module__w75",preview:"UploadList-module__preview",replyAttach:"UploadList-module__replyAttach",peekReplyAttach:"UploadList-module__peekReplyAttach"}},1028:function(e,t,a){"use strict";a.d(t,"c",function(){return o}),a.d(t,"a",function(){return i}),a.d(t,"b",function(){return r}),a.d(t,"f",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"e",function(){return c});var n=a(6);function o(e,t){var a=editor[e];a&&t&&a.insertHTML(t)}function i(e){var t=editor[e];if(null!=t){var a=t.getContent();return"<br>"==(a=a.trim())?"":("plaintext"==t.mode&&(a=function(e){void 0!==e&&(e=(e=encodeHTML(e)).replace(/\n/g,"<br/>"));return e}(a)),a)}return""}function r(e,t,a,n){var o={content:"",isSnippetExist:!1,triggerWord:""},i="";if(e.modify){var r=e.getRangeAt(0);e.collapseToStart(),e.modify("move","backward","word"),e.modify("extend","forward","word");var s=e.toString().toLowerCase().trim(),l=n.filter(function(e){return e.snippetWord.toLowerCase()==s.toLowerCase()});null!=(i=l.length?l[0].expandedContent:"")&&""!=i&&i.length>0?(o.isSnippetExist=!0,o.content=i,o.triggerWord=s.toLowerCase(),r.setStart(e.anchorNode,e.anchorOffset),r.setEnd(e.focusNode,e.focusOffset)):(o.content="&nbsp;&nbsp;&nbsp;&nbsp;",o.triggerWord=s.toLowerCase()),e.removeAllRanges(),e.addRange(r)}else o=function(e,t,a,n){var o="",i=e.getRangeAt(0);i.collapse(!0),i.setStart(e.anchorNode,0),o=i.toString();var r=i.cloneRange(),s=e.anchorNode.textContent,l=/\s+/,c=s.split(l).filter(Boolean),d=o.split(l).filter(Boolean),u="",m="",p={content:"",isSnippetExist:!1,triggerWord:""},h=d[d.length-1];if(""!=h&&void 0!==h){u=c[d.length-1],parseInt(u.length);var f=u.toLowerCase(),g=n.filter(function(e){var t=e.snippetWord;return t.toLowerCase()==f.toLowerCase()});m=g.length?g[0].expandedContent:""}if(null!=m&&""!=m&&null!=m){var v=parseInt(u.length-h.length),b=parseInt(o.length);v>0&&(b+=v);var _=parseInt(o.length+v-u.length),y=o.length-o.replace(/\s+$/g,"").length;(_-=y)<0&&(_=0),r.setStart(e.anchorNode,_),r.setEnd(e.focusNode,b),p.isSnippetExist=!0}else m=o;return p.content=m,p.triggerWord=u.toLowerCase(),e.removeAllRanges(),e.addRange(r),p}(e,0,0,n);return o}function s(e,t,a,o,i){for(var r={"${Cases.Contact Name}":Object(n.e)(a.firstName,a.lastName),"${Cases.Email}":a.email||"","${Cases.Phone}":t.phone||"","${Cases.Subject}":t.subject,"${Cases.Description}":t.description||"","${Cases.Request Id}":t.ticketNumber,"${Cases.Account Name}":o?o.accountName:"","${Cases.First Name}":a.firstName||"","${Cases.Last Name}":a.lastName||"","${Cases.CUSTOMER_PORTAL_LINK}":"10","${User.Support Rep Name}":Object(n.e)(i.firstName,i.lastName),"${User.Email}":i.emailId||"","${User.Phone}":i.phone||"","${User.First Name}":i.firstName||"","${User.Last Name}":i.lastName||"","${User.Mobile}":i.mobile||""},s=e.match(/(\$\{\w+\.[\w\s]+\})/g)||[],l=0;l<s.length;l++)e=e.replace(s[l],r[s[l]]);return e}function l(e){if(void 0===e)return!0;var t=e.getContent()||"";return""==t||"<div><br></div>"==t||!e.doc.body.textContent.trim().length}function c(e){return e.replace(/(<iframe.+?<\/iframe>)/g,function(e){var t=e.match(/(htt.+?")/)[0];return'<div><br></div><a href="'+(t=t.substring(0,t.length-1))+'" target="_blank">'+t+"</a>"})}},1042:function(e,t,a){e.exports={defaultSize:"MorePopup-module__defaultSize common-module__offSelection",black:"MorePopup-module__black",white:"MorePopup-module__white",iconCustom:"MorePopup-module__iconCustom",mr10:"MorePopup-module__mr10",dropDivPosition:"MorePopup-module__dropDivPosition",dropdownPosition:"MorePopup-module__dropdownPosition",secondaryIcon:"MorePopup-module__secondaryIcon",widgetList:"MorePopup-module__widgetList"}},1046:function(e,t,a){e.exports={container:"PlusIcon-module__container common-module__dinblk"}},1053:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1080),b=a.n(v),_=a(64),y=a.n(_),E=a(56),C=a.n(E),I=function(e){function t(e){return r()(this,t),d()(this,(t.__proto__||o()(t)).call(this,e))}return m()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.src,a=e.name,n=e.size,o=e.iconClass,i=e.iconName,r=e.iconSize,s=e.iconColor,l=e.borderPalette,c=e.onClick,d=e.title,u=e.iconTitle,m=e.onIconClick,p=e.showOnHover?b.a.hover:"";return h.a.createElement("div",{className:b.a.container+" "+p},h.a.createElement(y.a,{src:t,name:a,title:d,size:n,onClick:c}),i&&h.a.createElement("span",{className:b.a.thread+" "+b.a["border_"+l],"data-title":u,onClick:m},h.a.createElement("span",{className:b.a.icon},h.a.createElement(C.a,{name:i,size:r,color:s,className:o}))))}}]),t}(h.a.Component);t.a=I,I.defaultProps={size:"medium",iconSize:"6",borderPalette:"default"},I.propTypes={borderPalette:g.a.oneOfType([g.a.string,g.a.bool]),iconClass:g.a.string,iconColor:g.a.oneOfType([g.a.string,g.a.bool]),iconName:g.a.oneOfType([g.a.string,g.a.bool]),iconSize:g.a.oneOfType([g.a.string,g.a.bool]),iconTitle:g.a.string,name:g.a.string,onClick:g.a.func,onIconClick:g.a.func,showOnHover:g.a.bool,size:g.a.string,src:g.a.string,title:g.a.string}},1063:function(e,t,a){e.exports={section:"AlertLookupPortal-module__section",innerSection:"AlertLookupPortal-module__innerSection",footerInnerSpacing:"AlertLookupPortal-module__footerInnerSpacing",footer:"AlertLookupPortal-module__footer",buttonGap:"AlertLookupPortal-module__buttonGap",text:"AlertLookupPortal-module__text",extraSmall:"AlertLookupPortal-module__extraSmall"}},1080:function(e,t,a){e.exports={container:"AvatarThread-module__container common-module__dInflex",thread:"AvatarThread-module__thread common-module__rounded",icon:"AvatarThread-module__icon common-module__middleBoth common-module__middle",border_primary:"AvatarThread-module__border_primary",border_success:"AvatarThread-module__border_success",border_danger:"AvatarThread-module__border_danger",hover:"AvatarThread-module__hover"}},1081:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(71),o=a.n(n),i=a(6),r={storage:{},isStorageSupported:function(){try{var e=window.localStorage;return e.setItem("test","1"),e.removeItem("test"),!0}catch(e){return!1}},storeItemIntoStorage:function(e,t){try{this.isStorageSupported()?Object(i.J)(t)?localStorage.setItem(e,o()(t)):localStorage.setItem(e,t):this.storage[e]=t}catch(e){if(22==e.code)try{for(var a=localStorage.length,n=new Date,r=0;r<a;r++){var s=localStorage.key(r),l=this.getItemFromStorage(s)||{};l&&l.time&&n>l.expireTime&&this.removeItem(s)}storeData()}catch(e){alert("Local Storage Limit exceeded")}}},getItemFromStorage:function(e){if(!this.isStorageSupported())return this.storage[e];try{return JSON.parse(localStorage.getItem(e))}catch(t){return localStorage.getItem(e)}},deleteItemFromStorage:function(e){this.isStorageSupported()?localStorage.removeItem(e):this.storage[e]=void 0},getAllItemFromStorage:function(){if(this.isStorageSupported()){for(var e={},t=0;t<localStorage.length;t++){var a=localStorage.key(t),n=this.getItemFromStorage(a);e[a]=n}return e}return this.storage},setItem:function(e,t,a){-1==(a=null==a||null==a?10800:a)&&(a=86400);var n=new Date,o={value:t,expireTime:new Date(n.setSeconds(n.getSeconds()+a))};this.storeItemIntoStorage(e,o)},getItem:function(e){var t=this.getItemFromStorage(e)||{};if(t&&t.expireTime&&new Date>=new Date(t.expireTime))return void this.removeItem(e);return t.value},removeItem:function(e){this.deleteItemFromStorage(e)}}},1082:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(72),b=a.n(v),_=a(361),y=a.n(_),E=a(8),C=a(1097),I=a.n(C),A=function(e){function t(){return r()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.boxPosition,a=e.bottom,n=e.left,o=e.onAttchClick,i=e.openCloudAttach,r=e.labelName;return h.a.createElement(b.a,{size:"small",boxPosition:t,isActive:!0,bottom:a,left:n},h.a.createElement("label",{htmlFor:r},h.a.createElement(y.a,{autoHover:!0,value:E.f.getI18NValue("support.create.form.label.attachment.mycomputer"),iconName:"emptyfle",dataId:"fileAttach"}),h.a.createElement("input",{className:I.a.fileCont,type:"file",multiple:"multiple",id:r,onChange:o})),h.a.createElement(y.a,{autoHover:!0,value:E.f.getI18NValue("support.create.form.label.attachment.cloud"),iconName:"cloudicn",onClick:i,dataId:"cloudAttach"}))}}]),t}(p.Component);t.a=A,A.propTypes={bottom:g.a.string,boxPosition:g.a.string,labelName:g.a.string,left:g.a.string,onAttchClick:g.a.func,openCloudAttach:g.a.func}},1083:function(e,t,a){"use strict";function n(e){e=(e=o(e))?e.trim():e;return/^[\w]([\w\-\.\+\'\&]*)@([\w\-\.]*)(\.[a-zA-Z]{2,22}(\.[a-zA-Z]{2}){0,2})$/.test(e)}function o(e){var t=e;return-1!==t.indexOf(">")&&-1!==t.indexOf("<")&&(t=t.substring(t.indexOf("<")+1,t.indexOf(">"))),t}function i(e,t){var a=e.trim();if(-1!==a.indexOf(">")&&a.indexOf("<")>0){var n=a;a=a.substring(0,a.indexOf("<")),t||(a=a.replace(/"/g,"")),""==a&&(a=n.substring(n.lastIndexOf("<")+1,n.lastIndexOf(">")))}else a=a.replace(/<|>/g,"");return a}function r(e){var t=0,a=0,o=0,r=(e=e.trim()).indexOf("@",o);if(-1!==r)if(-1!==(o=e.indexOf(",",r))?(a=e.substring(t,o),t=o+1):(a=e.substring(t,e.length),-1),","===a||" "===a)-1;else{if(-1!=a.indexOf(",")){var l=i(a,!0);if(","===l.charAt(l.length-1))return!1;if(!(-1!==l.indexOf('"')&&l.lastIndexOf('"')>0||-1!==l.indexOf("'")&&l.lastIndexOf("'")>0)&&-1!=l.indexOf(",")&&","!=l.substring(0,1))return!1;var c=l.substring(l.indexOf('"')+1,l.lastIndexOf('"'));if(""==c&&(c=l.substring(l.indexOf("'")+1,l.lastIndexOf("'"))),""!=c&&-1==c.indexOf(","))return!1}var d=s(a);if(!n(d=d.trim()))return!1}else if(-1,o<=e.length)return!1;return!0}function s(e){return-1===e.indexOf("<")?e:e.substring(e.lastIndexOf("<")+1,e.lastIndexOf(">"))}function l(e,t){var a=!1,n=-1;if(e.length)for(var o=0;o<e.length;o++){s(e[o])==s(t)&&(a=!0,n=o)}return{isDuplicate:a,index:n}}function c(e){for(var t=[],a=e.indexOf("@"),n=void 0;-1!==a;)-1===(n=e.indexOf(",",a))&&(n=e.length),t.push(e.substring(0,n)),a=(e=e.substring(n+1,e.length)).indexOf("@");return-1===a&&""!==e&&t.push(e),t}a.d(t,"f",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"a",function(){return i}),a.d(t,"e",function(){return r}),a.d(t,"c",function(){return l}),a.d(t,"d",function(){return c})},1097:function(e,t,a){e.exports={fileCont:"UploadPopup__fileCont"}},1107:function(e,t,a){"use strict";(function(e){var n=a(2),o=a.n(n),i=a(12),r=a.n(i),s=a(9),l=a.n(s),c=a(10),d=a.n(c),u=a(13),m=a.n(u),p=a(14),h=a.n(p),f=a(0),g=a.n(f),v=a(1),b=a.n(v),_=a(1122),y=a.n(_),E=(a(1007),a(1053)),C=a(1019),I=a(1123),A=a(8),k=a(174),S=a(6),N=a(1081),x=a(1028),D=a(30),O=a(16),w=a(1004),T=a(1082),P=function(t){function a(e){l()(this,a);var t=m()(this,(a.__proto__||r()(a)).call(this,e)),n=t.props,o=n.value,i=n.attachments;return t.state={content:o||"",oldAttachments:i||[],newAttachments:[],isAttachmentUploading:!1,isDragOver:!1,mode:"private",showTools:N.a.getItem("showCommentTools"),isAttachmentModified:!1,isLoading:!1},t._isMounted=!1,t.uploadAttach=t.uploadAttach.bind(t),t.deleleUpload=t.deleleUpload.bind(t),t.removeAttachment=t.removeAttachment.bind(t),t.updateComment=t.updateComment.bind(t),t.clearComment=t.clearComment.bind(t),t.toggleComment=t.toggleComment.bind(t),t.dragEnter=t.dragEnter.bind(t),t.dragLeave=t.dragLeave.bind(t),t.attachDrop=t.attachDrop.bind(t),t.changeMode=t.changeMode.bind(t),t.toggleTools=t.toggleTools.bind(t),t.commentCallback=t.commentCallback.bind(t),t.checkCommentChanged=t.checkCommentChanged.bind(t),t.addComment=t.addComment.bind(t),t.dragAttach=t.dragAttach.bind(t),t.addCloudAttch=t.addCloudAttch.bind(t),t.openCloudAttach=t.openCloudAttach.bind(t),t.closeCloudAttach=t.closeCloudAttach.bind(t),t.closeComment=t.closeComment.bind(t),t}return h()(a,t),d()(a,[{key:"componentWillReceiveProps",value:function(e){e.oldAttachments==this.props.oldAttachments&&e.value==this.props.value&&e.newAttachments==this.props.newAttachments||this.setState({content:e.value||"",oldAttachments:e.oldAttachments||[],newAttachments:e.newAttachments||[]})}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"addComment",value:function(){var e=this,t=this.state,a=t.mode,n=t.isCommentAdding,o=this.props,i=o.attachmentIds,r=o.hasAttachments,s=void 0===r||r,l=o.hasPrivacyMode,c=void 0===l||l;if(!n){var d=editor["Comment_"+this.props.id],u=d.mentionsList,m=d.mentionsHandler("val");if(this.isValid(d)){var p="public"==a,h=this.props,f=h.revertIsCommentChanged,g=h.addComment;h.isCommentChanged&&f&&f(),this.setState({isCommentAdding:!0});var v={content:m};s&&(v.attachmentIds=i),c&&(v.isPublic=p),this.setState({isLoading:!0}),g(v,u,function(){e._isMounted&&(e.setState({oldAttachments:[],newAttachments:[],isAttachmentModified:!1,isCommentAdding:!1,mode:"private"}),e.props.setAttachmentIds([]),e.clearComment()),e.setState({isLoading:!1})},function(){e.setState({isLoading:!1})})}}}},{key:"updateComment",value:function(){var e=this,t=this.props,a=t.id,n=t.value,o=t.revertIsCommentChanged,i=t.isCommentChanged,r=t.updateComment,s=t.attachmentIds,l=editor["Comment_"+a],c=l.mentionsList,d=l.mentionsHandler("val");i&&o&&o(),this.setState({isAttachmentModified:!1}),this.isValid(l)&&(this.setState({isLoading:!0}),r(a,d,s,n,c,function(){e.setState({isLoading:!1})}))}},{key:"isValid",value:function(t){var a=this.state.isAttachmentUploading,n=this.props.attachmentIds,o=!0,i=t.getContent();return a?(o=!1,this.props.showMessage({type:"alert",message:A.f.getI18NValue("support.attachment.upload.process")})):Object(x.d)(t)&&!n.length?(o=!1,this.props.showConfirmBox({type:"alert",submitText:A.f.getI18NValue("crm.button.ok"),title:A.f.getI18NValue("support.history.operation.label.wfalert"),message:A.f.getI18NValue("support.contact.comment.empty"),isActive:!0,palette:"danger"}).then(function(){deleteComment(id,commentId,e)}).catch(function(){})):i.length>32e3&&(o=!1,this.props.showMessage({type:"alert",message:A.f.getI18NValue("support.comment.limit.exceeded")})),o}},{key:"addCloudAttch",value:function(e,t,a){var n=this,i=this.state,r=i.newAttachments,s=i.oldAttachments.length+r.length+a,l={index:s,href:null,isPreview:!0};this.setState(function(e){var t=o()({},e);return t.newAttachments.push(l),t}),this.props.uploadCloudAttachment(e,s,function(e,t){var a=n.state.newAttachments.map(function(a){return a.index===t?o()({},a,{percentComplete:e}):a});n.setState({newAttachments:a})}).then(function(e){var t=e.data,a=n.state.newAttachments.map(function(e){return e.index===t.data.index?t.data:e});n.setState({newAttachments:a});var o=n.props,i=o.attachmentIds,r=o.setAttachmentIds;i.push(t.data.id),r(i);var s=n.props,l=s.isCommentChanged,c=s.setIsCommentChanged;!l&&c&&c(),n.setState({isAttachmentModified:!0})},function(){n.setState(function(e){var t=o()({},e);return t.newAttachments=t.newAttachments.filter(function(e){return s!==e.index}),t})})}},{key:"uploadAttach",value:function(e){var t=this,a=this.state,n=a.newAttachments,i=a.oldAttachments.length+n.length,r=e.target?e.target.files:e,s=r.length,l=Object(k.n)(r,i),c=l.inValidArray,d=l.validArray,u=this.props.showMessage;if(l.isCountExceeds)u({type:"alert",message:A.f.getI18NValue("support.attachments.count.exceeds",[10])});else{if(c.length)for(var m=0;m<c.length;m++){var p=c[m];p.isUnSupported&&u({type:"alert",message:A.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted")}),p.isFileNameSizeInvalid&&u({type:"alert",message:A.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation")}),p.isEmpty&&u({type:"alert",message:A.f.getI18NValue("support.request.empty.attachment.message")}),p.isAttachSizeExceeded&&u({type:"alert",message:A.f.getI18NValue("support.feedback.uploaded.file.exceeds.20mb")})}d.length&&function(){var e=0;t.setState({isAttachmentUploading:!0});for(var a=function(a){var n=d[a],r=new FormData;r.append("file",n);var l=i+a,u=Object(k.f)(n,l);t.setState(function(e){var t=o()({},e);return t.newAttachments.push(u),t}),t.props.uploadAttach(r,l,function(e,a){var n=t.state.newAttachments.map(function(t){return t.index===a?o()({},t,{percentComplete:e}):t});t.setState({newAttachments:n})}).then(function(a){if(a){var n=a.data;e+=1;var o=t.state.newAttachments.map(function(e){return e.index===n.data.index?n.data:e});t.setState({newAttachments:o});var i=t.props,r=i.attachmentIds,l=i.setAttachmentIds;r.push(n.data.id),l(r);var d=t.props,u=d.isCommentChanged,m=d.setIsCommentChanged;!u&&m&&m(),t.setState({isAttachmentModified:!0}),e+c.length==s&&t.setState({isAttachmentUploading:!1})}}).catch(function(e){t.setState(function(t){var a=o()({},t);return a.newAttachments=a.newAttachments.filter(function(t){return e.attachIndex!==t.index}),a})})},n=0;n<d.length;n++)a(n)}()}e.target&&(e.target.value="")}},{key:"deleleUpload",value:function(e){var t=this;this.props.deleleUpload(e).then(function(){t.setState(function(a){var n=o()({},a);n.newAttachments=n.newAttachments.filter(function(t){return e!==t.id});var i=t.props,r=i.isCommentChanged,s=i.setIsCommentChanged,l=i.revertIsCommentChanged;return n.newAttachments.length?(!r&&s&&s(),t.setState({isAttachmentModified:!0})):(r&&l&&l(),t.setState({isAttachmentModified:!1},function(){return[t.checkCommentChanged()]})),n});var a=t.props,n=a.attachmentIds;(0,a.setAttachmentIds)(n.filter(function(t){return e!==t}))})}},{key:"removeAttachment",value:function(e){var t=this;this.setState(function(a){var n=o()({},a);n.oldAttachments=n.oldAttachments.filter(function(t){return e!==t.id});var i=t.props,r=i.isCommentChanged,s=i.setIsCommentChanged;return!r&&s&&s(),t.setState({isAttachmentModified:!0}),n});var a=this.props,n=a.attachmentIds;(0,a.setAttachmentIds)(n.filter(function(t){return e!==t}))}},{key:"clearComment",value:function(){this.setState({content:""});var e=editor["Comment_"+this.props.id];e.setContent(""),Object(S.N)(e.doc)}},{key:"toggleComment",value:function(){if(""==this.state.content)this.props.toggleComment();else{var e=this.props,t=e.revertIsCommentChanged;e.isCommentChanged&&t&&t(),this.setState({isAttachmentModified:!1}),this.clearComment()}}},{key:"dragEnter",value:function(){this.setState({isDragOver:!0})}},{key:"dragLeave",value:function(){this.setState({isDragOver:!1})}},{key:"attachDrop",value:function(e){var t=e.nativeEvent.dataTransfer;Object(k.h)(t,e)&&(e.preventDefault(),this.uploadAttach(t.files),this.setState({isDragOver:!1})),e.stopPropagation(),this.setState({isDragOver:!1})}},{key:"dragAttach",value:function(e){this.uploadAttach(e)}},{key:"changeMode",value:function(e){this.setState({mode:e})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"toggleTools",value:function(){var e=this;this.setState({showTools:!this.state.showTools},function(){e.state.showTools?N.a.setItem("showCommentTools",!0):N.a.setItem("showCommentTools",!1)})}},{key:"commentCallback",value:function(e){var t=this,a=this.props.mention,n=(void 0===a?[]:a).map(function(e){var t=e.type,a=e.name,n=e.zuid,o=e.id,i=e.firstName,r=e.lastName,s=e.photoURL,l=Object(S.e)(i,r);return"AGENT"==t?{avatar:s,id:n,name:l,type:"user",value:l}:{id:o,name:a,type:"team",value:a}});e.mentionsHandler("setMentions",n),ZohoDeskEditor._addEvent(e.doc,"keyup",function(){setTimeout(function(){t.checkCommentChanged(e)},1)})}},{key:"checkCommentChanged",value:function(e){e=e||editor["Comment_"+this.props.id];var t=this.props,a=t.value,n=t.type,o=t.isCommentChanged,i=t.setIsCommentChanged,r=t.revertIsCommentChanged,s=this.state.isAttachmentModified,l=e.getContent()||"";"edit"==n?a==l?!s&&o&&r&&r():!o&&i&&i():Object(x.d)(e)?(this.setState({content:""}),!s&&o&&r&&r()):(this.setState({content:l}),!o&&i&&i())}},{key:"openCloudAttach",value:function(){this.setState({isCLoudOpen:!0}),this.props.openCloudAttach()}},{key:"closeCloudAttach",value:function(){this.setState({isCLoudOpen:!1})}},{key:"closeComment",value:function(){var e=this.props,t=e.id,a=e.closeComment;a(t)}},{key:"render",value:function(){A.f.getI18NValue("support.create.form.label.attachment.mycomputer"),A.f.getI18NValue("support.create.form.label.attachment.cloud");var e=this.props,t=e.type,a=e.orgId,n=e.id,o=e.from,i=e.showAttachmentViewer,r=e.photoURL,s=e.name,l=e.borderStyle,c=(e.value,e.revertIsCommentChanged),d=e.isCommentChanged,u=e.editorMode,m=void 0===u?"CommentEditor":u,p=e.isFromBlueprint,h=e.hasPrivacyMode,f=void 0===h||h,v=e.hasAttachments,b=void 0===v||v,_=e.isCloudAttchOpen,k=e.CloudAttachmentIframe,S=e.havePublicComment,N=e.needAttachment,x=e.getAutofillContacts,P=this.state,B=P.content,F=void 0===B?"":B,R=P.oldAttachments,V=P.newAttachments,M=P.isDragOver,L=P.mode,j=P.showTools,z=P.isCLoudOpen,K=P.isLoading,U={handleAutoFill:!0,needEditorFocus:"feeds"!=o&&!p,skipScrollOnEnter:!0,resizeOptions:{minHeight:80,maxHeight:225},defaultfontfamily:"'ProximaNovaRegular',Arial,Helvetica,sans-serif",defaultfontsize:"14px",padding:"0",lineHeight:"22px",needInlineAttachHandling:!1,getAutofillContacts:x,handleInlineDropImage:this.dragAttach},H="public"==L,Z=y.a.postbox;return"leftPanel"==o&&(Z=Z+" "+y.a.minW319),Z="bottom"==l?Z+" "+y.a.defaultborder:Z+" "+y.a.fullborder,g.a.createElement("div",{className:Z+" "+(p?y.a.bluePrintLayar:""),onDragEnter:this.dragEnter,onDragOver:this.dragEnter,onDragLeave:this.dragLeave,onDrop:this.attachDrop},M&&g.a.createElement("div",{className:y.a.attachOver},A.f.getI18NValue("support.request.attachment.drop.files")),g.a.createElement("div",{className:y.a.postHeader},p?null:g.a.createElement("span",{className:y.a.postAvatar},g.a.createElement(E.a,{src:r,name:s,size:"xsmall",iconName:"conversation"==t&&"zdeskCommentfilled",borderPalette:"conversation"==t&&"primary",iconColor:"conversation"==t&&"primary",iconSize:"conversation"==t&&"8"})),g.a.createElement("div",{className:y.a.commentBox+" commentArea "+(j?"":"hideTools")+" "+("leftPanel"==o?"leftCommentArea":"")},g.a.createElement(w.a,{id:"Comment_"+n,value:F,editorCallback:this.commentCallback,editorMode:m,editorOptions:U})),b?g.a.createElement("div",{className:y.a.attachHolder+" "+(j?y.a.attachHolderVisi:"")},g.a.createElement(C.a,{oldAttachments:R,newAttachments:V,orgId:a,deleleUpload:this.deleleUpload,removeAttachment:this.removeAttachment,from:o,showAttachmentViewer:i})):null),g.a.createElement(O.Container,{alignBox:"row",className:"leftPanel"==o?y.a.leftFooter+" "+y.a.postFooter:y.a.postFooter},g.a.createElement(O.Box,{className:y.a.commentOptions},g.a.createElement("span",{className:y.a.listIcon},b&&N?g.a.createElement("span",{className:y.a.attachParent+" "+("edit"==t?y.a.bdrNone+" "+y.a.attchIcn:"leftPanel"==o?y.a.bdrNone+" "+y.a.mt0+" "+y.a.attchIcn:y.a.attchIcn),"data-id":"AttachIcon"},g.a.createElement("label",{className:y.a.fileCont,htmlFor:"commentAttach"},g.a.createElement("input",{className:y.a.fileAttch,type:"file",onChange:this.uploadAttach,multiple:"multiple",id:"commentAttach"})),g.a.createElement(D.TopbandFontIcon,{name:"attachment5",size:"14"}),"leftPanel"==o?g.a.createElement("div",{className:y.a.attchPopup},g.a.createElement(T.a,{labelName:"commentAttachLabel",boxPosition:"bottomRight",onAttchClick:this.uploadAttach,openCloudAttach:this.openCloudAttach})):null):null,b&&"leftPanel"!=o&&N?g.a.createElement("span",{className:y.a.iconCloud,onClick:this.openCloudAttach},g.a.createElement(D.TopbandFontIcon,{name:"cloudIcon",size:"12"})):null,g.a.createElement("span",{"data-title":A.f.getI18NValue("support.label.comments.format"),className:y.a.iconAttach,onClick:this.toggleTools},"A"))),p?null:g.a.createElement(I.a,{revertIsCommentChanged:c,isCommentChanged:d,closeComment:this.closeComment,updateComment:this.updateComment,toggleComment:this.toggleComment,clearComment:this.clearComment,type:t,from:o,isPublic:H,changeMode:this.changeMode,content:F,addComment:this.addComment,hasPrivacyMode:f,havePublicComment:S,isLoading:K}),_&&z&&k?g.a.createElement(k,{addCloudAttch:this.addCloudAttch,totalLen:R.length+V.length,closeIframe:this.closeCloudAttach}):null))}}]),a}(g.a.Component);t.a=P,P.propTypes={CloudAttachmentIframe:b.a.node,addComment:b.a.func,attachmentIds:b.a.func,attachments:b.a.object,borderStyle:b.a.string,closeComment:b.a.func,deleleUpload:b.a.func,editorMode:b.a.string,from:b.a.string,getAutofillContacts:b.a.func,hasAttachments:b.a.bool,hasPrivacyMode:b.a.bool,havePublicComment:b.a.bool,id:b.a.string,isCloudAttchOpen:b.a.bool,isCommentChanged:b.a.bool,isFromBlueprint:b.a.bool,mention:b.a.array,name:b.a.string,needAttachment:b.a.bool,newAttachments:b.a.object,oldAttachments:b.a.object,openCloudAttach:b.a.func,orgId:b.a.string,page:b.a.string,photoURL:b.a.string,revertIsCommentChanged:b.a.func,setAttachmentIds:b.a.func,setIsCommentChanged:b.a.func,showAttachmentViewer:b.a.func,showConfirmBox:b.a.func,showMessage:b.a.func,toggleComment:b.a.func,type:b.a.string,updateComment:b.a.func,uploadAttach:b.a.func,uploadCloudAttachment:b.a.func,value:b.a.string},P.defaultProps={borderStyle:"bottom",isFromBlueprint:!1,needAttachment:!0}}).call(this,a(530)(e))},1122:function(e,t,a){e.exports={defaultborder:"CommentBox-module__defaultborder",fullborder:"CommentBox-module__fullborder",postHeader:"CommentBox-module__postHeader",commentBox:"CommentBox-module__commentBox",attachOver:"CommentBox-module__attachOver",postAvatar:"CommentBox-module__postAvatar",fileCont:"CommentBox-module__fileCont",postFooter:"CommentBox-module__postFooter",leftFooter:"CommentBox-module__leftFooter common-module__alignBetween",mt0:"CommentBox-module__mt0",postSubmit:"CommentBox-module__postSubmit",radioDiv:"CommentBox-module__radioDiv",radiobtn:"CommentBox-module__radiobtn",bdrNone:"CommentBox-module__bdrNone",minW319:"CommentBox-module__minW319",minW259:"CommentBox-module__minW259",attchIcn:"CommentBox-module__attchIcn",commentOptions:"CommentBox-module__commentOptions common-module__flexgrow",listIcon:"CommentBox-module__listIcon common-module__dflex",iconCloud:"CommentBox-module__iconCloud",iconAttach:"CommentBox-module__iconAttach",sentButton:"CommentBox-module__sentButton",clearButton:"CommentBox-module__clearButton",attachHolderVisi:"CommentBox-module__attachHolderVisi",attachHolder:"CommentBox-module__attachHolder",bluePrintLayar:"CommentBox-module__bluePrintLayar",fileAttch:"CommentBox-module__fileAttch",attchPopup:"CommentBox-module__attchPopup",attachParent:"CommentBox-module__attachParent",postbox:"CommentBox-module__postbox"}},1123:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1124),b=a.n(v),_=a(30),y=a(239),E=a.n(y),C=a(8),I=a(16),A=a(73),k=a.n(A),S=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.state={isPopupOpen:!1},a.togglePopup=a.togglePopup.bind(a),a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this;this._mount=!0,window.addEventListener("click",function(){e._mount&&e.setState({isPopupOpen:!1})})}},{key:"componentWillUnmount",value:function(){this._mount=!1}},{key:"togglePopup",value:function(e){this.setState(function(e){return{isPopupOpen:!e.isPopupOpen}}),e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,a=t.revertIsCommentChanged,n=t.isCommentChanged,o=t.closeComment,i=t.toggleComment,r=t.clearComment,s=t.type,l=t.from,c=t.content,d=void 0===c?"":c,u=t.isPublic,m=t.changeMode,p=t.addComment,f=t.updateComment,g=t.hasPrivacyMode,v=t.havePublicComment,y=t.isLoading,A=this.state.isPopupOpen,S="large";"leftPanel"==l&&(S="medium");var N=""==d&&"conversation"!=s;return h.a.createElement(I.Box,{className:b.a.postSubmit},h.a.createElement("span",{className:b.a.sentButton},"edit"==s?h.a.createElement(k.a,{text:C.f.getI18NValue("support.button.save"),palette:"primaryFilled",size:"medium",onClick:f,status:y?"loading":"none"}):v&&g?h.a.createElement("span",{className:b.a.commentButton},g?h.a.createElement("div",{className:b.a[S]+" "+(y?"":b.a.isActive)},y?h.a.createElement(k.a,{status:"loading",palette:"primaryFilled",size:"medium",className:b.a.loading}):h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:b.a.content,onClick:p},h.a.createElement("p",{className:b.a.actionType},C.f.getI18NValue("tabs.request.comment")),h.a.createElement("p",{className:b.a.subtitle},u?C.f.getI18NValue("support.request.public"):C.f.getI18NValue("support.department.type.internal"))),h.a.createElement("span",{className:b.a.arrow,onClick:function(t){t.stopPropagation&&t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation(),e.togglePopup(t)}},h.a.createElement(_.TopbandFontIcon,{name:"blockDownArrow",size:"6"})))):h.a.createElement(k.a,{text:C.f.getI18NValue("tabs.request.comment"),palette:"primaryFilled",size:"medium",onClick:p,status:y?"loading":"none"}),h.a.createElement("div",{className:b.a.buttonAction+" "+(A?b.a.active:"")+" "+("leftPanel"==l?b.a.commentLeftPopup:" "),onClick:function(e){e.stopPropagation&&e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}},h.a.createElement("div",{className:b.a.switchAction,onClick:function(){m(u?"private":"public")}},h.a.createElement("p",null,h.a.createElement("span",{className:b.a.actionNotify},C.f.getI18NValue("support.request.public")),h.a.createElement("span",{className:b.a.switchbox},h.a.createElement(E.a,{id:"commentPrivate",name:"commentPrivate",size:"small",checked:u,onChange:function(){m(u?"private":"public")}}))),h.a.createElement("p",{className:b.a.actionSubtitle},C.f.getI18NValue("support.solutions.comments.display.in.customer.self.service.portal"))))):h.a.createElement(k.a,{text:C.f.getI18NValue("tabs.request.comment"),palette:"primaryFilled",size:"medium",onClick:p,status:y?"loading":"none"})),h.a.createElement("span",{className:b.a.clearButton},h.a.createElement(k.a,{text:"edit"==s||"task"==l||"conversation"==s&&""==d?C.f.getI18NValue("support.label.cancel"):C.f.getI18NValue("support.request.clear"),palette:"secondary",size:"medium",disabled:N,onClick:function(){"edit"==s||"task"==l?(n&&a&&a(),o()):"conversation"==s?i():r()}})))}}]),t}(h.a.Component);t.a=S,S.propTypes={addComment:g.a.func,changeMode:g.a.func,clearComment:g.a.func,closeComment:g.a.func,content:g.a.string,from:g.a.string,hasPrivacyMode:g.a.bool,havePublicComment:g.a.bool,isCommentChanged:g.a.bool,isLoading:g.a.bool,isPublic:g.a.bool,module:g.a.string,revertIsCommentChanged:g.a.func,toggleComment:g.a.func,type:g.a.string,updateComment:g.a.func}},1124:function(e,t,a){e.exports={commentButton:"CommentActionButton-module__commentButton common-module__dflex",commentAction:"CommentActionButton-module__commentAction common-module__dtable",isActive:"CommentActionButton-module__isActive",large:"CommentActionButton-module__large CommentActionButton-module__commentAction common-module__dtable",medium:"CommentActionButton-module__medium CommentActionButton-module__commentAction common-module__dtable",loading:"CommentActionButton-module__loading",peekLeftClearBtn:"CommentActionButton-module__peekLeftClearBtn",arrow:"CommentActionButton-module__arrow",content:"CommentActionButton-module__content common-module__tcenter common-module__pointer",actionType:"CommentActionButton-module__actionType common-module__semibold common-module__ftsmooth",subtitle:"CommentActionButton-module__subtitle common-module__oflow",buttonAction:"CommentActionButton-module__buttonAction common-module__vishidden",active:"CommentActionButton-module__active common-module__visible",actionSubtitle:"CommentActionButton-module__actionSubtitle",switchAction:"CommentActionButton-module__switchAction",actionNotify:"CommentActionButton-module__actionNotify",switchbox:"CommentActionButton-module__switchbox",peekLeftPopup:"CommentActionButton-module__peekLeftPopup",commentLeftPopup:"CommentActionButton-module__commentLeftPopup",pl30:"CommentActionButton-module__pl30",sentButton:"CommentActionButton-module__sentButton",postSubmit:"CommentActionButton-module__postSubmit common-module__dflex"}},1162:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1021),b=a(8),_=function(e){function t(){return r()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.deleteDraft,a=e.closeAlert;return h.a.createElement(v.a,{isActive:!0,title:b.f.getI18NValue("support.request.alert.discard.draft.header"),message:b.f.getI18NValue("crm.confirm.discard.draft"),submitText:b.f.getI18NValue("support.yes"),cancelText:b.f.getI18NValue("support.label.cancel"),onSubmitClick:t,onCancelClick:a})}}]),t}(p.Component);t.a=_,_.propTypes={deleteDraft:g.a.func,moduleMeta:g.a.object}},1168:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1197),b=a.n(v),_=a(8),y=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.state={playingIndex:1},a.play=a.play.bind(a),a.playNext=a.playNext.bind(a),a.pauseOthers=a.pauseOthers.bind(a),a}return m()(t,e),l()(t,[{key:"play",value:function(e){this.setState({playingIndex:e}),this.pauseOthers(e)}},{key:"playNext",value:function(e){var t=e+1;this.setState({playingIndex:t});var a=document.getElementById("audio"+t);a&&a.play()}},{key:"pauseOthers",value:function(e){Array.prototype.slice.call(document.getElementsByTagName("audio")).forEach(function(t,a){e!=a+1&&t.pause()})}},{key:"render",value:function(){var e=this,t=this.state.playingIndex,a=this.props.thread,n=JSON.parse(a.content),o=n.voicemailurl,i=n.recordingurl,r=n.voicemailduration,s=n.recordingduration,l=void 0,c=void 0,d=void 0,u=[],m=0;if(o.startsWith("https://")||i.startsWith("https://"))o.startsWith("https://")?(l=o,c=r,d=_.f.getI18NValue("support.twi.msg.voicemessage")):(l=i,c=s,d=_.f.getI18NValue("support.twi.msg.callrecording"));else{m=(u=JSON.parse(n.recordingurl)).length,l=u[0].url,l=m>2?l:l+u[1].rid;var p=s%3600,f=Math.floor(p/60),g=p%60,v=Math.ceil(g);c=Math.floor(s/3600)+":"+f+":"+v+" (H:M:S)",d=_.f.getI18NValue("support.twi.msg.callrecording")}return h.a.createElement("div",{className:b.a.audioDiv},h.a.createElement("div",{className:b.a.audioHead},h.a.createElement("span",{className:b.a.audioTitle},d),h.a.createElement("span",{className:b.a.audioDur},"( ",_.f.getI18NValue("crm.activities.call.duration"),":",h.a.createElement("span",null,c)," )"),m>2?h.a.createElement("span",null,_.f.getI18NValue("support.label.playing")," ",h.a.createElement("span",null,t),"/",m-1," ",_.f.getI18NValue("support.label.recording")):null),h.a.createElement("div",{className:b.a.audioSource},m>2?u.map(function(t,a){var n=u[a].rid;return n?h.a.createElement("audio",{controls:!0,id:"audio"+a,src:l+n,key:a,className:b.a.audio,onPlay:function(){e.play(a)},onEnded:function(){e.playNext(a)},style:{display:"block"}}):null}):h.a.createElement("audio",{controls:!0,src:l,className:b.a.audio})))}}]),t}(h.a.Component);t.a=y,y.propTypes={thread:g.a.object}},1191:function(e,t,a){"use strict";a.d(t,"d",function(){return c}),a.d(t,"c",function(){return d}),a.d(t,"a",function(){return u}),a.d(t,"b",function(){return m});var n=a(2),o=a.n(n),i=a(15),r=a(3),s=a(6),l=a(7);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.W;return a=a.trim(),{types:Object(s.m)(r.L.TICKET_TEMPLATE),shouldCallAPI:function(o){if(n)return!0;var i=o.ticketTemplate,r=i.deptId,s=i.searchStr,l=i.from;return e!==r||a!==s||t!==l},callAPI:function(n){var s=n.currentOrgId,d=2*c>100?100:2*c;return Object(i.a)(r.w+"ticketTemplates?from="+t+"&limit="+d+"&departmentId="+e+(a?"&templateName="+a:""),!1,{orgId:s}).get().then(function(n){var i=Object(l.normalize)(204!==n.responseStatus?n.data:[],Object(l.arrayOf)(Object(l.schema)(r.L.TICKET_TEMPLATE_L)));return o()({},i,{from:t,limit:c,isNextData:!!n.data&&n.data.length>c,searchStr:a,deptId:e})})},payload:{from:t}}}function d(e){return{types:Object(s.m)("TICKET_TEMPLATE_DETAIL"),callAPI:function(t){var a=t.currentOrgId;return Object(i.a)(r.w+"ticketTemplates/"+e,!1,{orgId:a}).get().then(function(e){return Object(l.normalize)(e,Object(l.schema)(r.L.TICKET_TEMPLATE_L))},function(e){throw e})}}}function u(e,t,a,n,o){var l="departmentId="+e+"&module="+t+"&from="+a+"&limit="+n;return""!=o&&o&&(l+="&searchStr=*"+o+"*"),{types:Object(s.m)("EMAIL_TEMPLATE_LIST"),callAPI:function(e){return Object(i.a)(r.w+"templates?"+l,!1,{orgId:e.currentOrgId}).get().then(function(e){return e})}}}function m(e,t){return{types:Object(s.m)("TEMPLATESFOLDERSLIST"),callAPI:function(a){return Object(i.a)("/api/v1/templates/"+e+"/render?entityId="+t,!1,{orgId:a.currentOrgId}).post("").then(function(e){return{res:e,entity:{},result:[]}})}}}},1197:function(e,t,a){e.exports={audioDiv:"AudioMessage-module__audioDiv",audioHead:"AudioMessage-module__audioHead",audioTitle:"AudioMessage-module__audioTitle",audioDur:"AudioMessage-module__audioDur",audioSource:"AudioMessage-module__audioSource",audio:"AudioMessage-module__audio"}},1200:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1201),b=a.n(v),_=a(64),y=a.n(_),E=a(72),C=a.n(E),I=a(16),A=a(6),k=a(8),S=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.getScrollContainerRef=a.getScrollContainerRef.bind(a),a.getSelectedItemRef=a.getSelectedItemRef.bind(a),a.onScroll=a.onScroll.bind(a),a.isFetching=!1,a}return m()(t,e),l()(t,[{key:"getScrollContainerRef",value:function(e){this.scrollContainerRef=e}},{key:"getSelectedItemRef",value:function(e){this.selectItemRef=e}},{key:"componentDidUpdate",value:function(){var e=this.props.selectSearchIndex,t=this.scrollContainerRef,a=this.selectItemRef;if(a&&t){var n=a.offsetTop-t.scrollTop,o=a.offsetHeight,i=t.offsetHeight;(n<0||o+n>i)&&(t.scrollTop=0==e?0:t.scrollTop+n)}}},{key:"onScroll",value:function(e){var t=this;if(this.props.fetchData&&!this.isFetching){var a=e.currentTarget;a.scrollHeight<=a.scrollTop+a.offsetHeight&&(this.isFetching=!0,this.props.fetchData().then(function(){t.isFetching=!1},function(){t.isFetching=!1}))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.orgName,o=(t.selectEmail,t.type),i=t.selectSearchIndex,r=(t.addTag,t.needFixed),s=t.needAvatar,l=t.onSelect;return h.a.createElement(C.a,{onScroll:this.onScroll,isArrow:!1,boxPosition:"bottomCenter",isActive:!0,className:""+(r?b.a.resetDropbox:"")},h.a.createElement("div",{ref:this.getScrollContainerRef,className:s?b.a.agentSearch:b.a.tagsSearch},a.length?a.map(function(t,a){t.id;var r=t.name,c=t.email,d=t.isNew,u=t.firstName,m=t.lastName,p=t.photoURL,f=t.newLabel,g=s&&p?p+"?portalname="+n:null;s&&Object(A.g)(u,m);return r=s?Object(A.e)(u,m):r,h.a.createElement(I.Container,{alignBox:"row",align:"vertical",className:b.a.asItem+" "+(i==a?b.a.selectIem:""),onMouseDown:function(){l(t,o)},eleRef:a==i?e.getSelectedItemRef:null,key:a},s?h.a.createElement(I.Box,{className:b.a.imgCont},h.a.createElement(y.a,{src:g,name:r,size:"medium"})):null,h.a.createElement(I.Box,{flexible:!0},h.a.createElement("div",{className:b.a.ashead},d?h.a.createElement("span",{className:b.a.newTag},f):null,r),c?h.a.createElement("div",{className:b.a.asemail},c):null))}):h.a.createElement("div",{className:b.a.searchDiv},k.f.getI18NValue("support.label.searching"))))}}]),t}(h.a.Component);t.a=S,S.propTypes={addTag:g.a.func,data:g.a.array,fetchData:g.a.oneOfType([g.a.func,g.a.bool]),isPopupOpen:g.a.bool,needAvatar:g.a.bool,orgName:g.a.string,placeholder:g.a.string,removeClose:g.a.func,selectEmail:g.a.func,selectSearchIndex:g.a.number,theme:g.a.string,togglePopup:g.a.func,type:g.a.string},S.defaultProps={data:[],needAvatar:!0}},1201:function(e,t,a){e.exports={searchDrop:"SearchResults-module__searchDrop",resetDropbox:"SearchResults-module__resetDropbox",agentSearch:"SearchResults-module__agentSearch SearchResults-module__searchDrop",tagsSearch:"SearchResults-module__tagsSearch SearchResults-module__searchDrop",asItem:"SearchResults-module__asItem",ashead:"SearchResults-module__ashead common-module__semibold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis",newTag:"SearchResults-module__newTag",selectIem:"SearchResults-module__selectIem",searchDiv:"SearchResults-module__searchDiv",imgCont:"SearchResults-module__imgCont",asemail:"SearchResults-module__asemail common-module__dotted common-module__oflow common-module__ellipsis",defaultSize:"SearchResults-module__defaultSize",black:"SearchResults-module__black",white:"SearchResults-module__white",iconCustom:"SearchResults-module__iconCustom"}},1222:function(e,t,a){"use strict";a.d(t,"e",function(){return f}),a.d(t,"h",function(){return g}),a.d(t,"k",function(){return v}),a.d(t,"a",function(){return b}),a.d(t,"i",function(){return _}),a.d(t,"d",function(){return y}),a.d(t,"g",function(){return E}),a.d(t,"f",function(){return C}),a.d(t,"b",function(){return I}),a.d(t,"c",function(){return A}),a.d(t,"j",function(){return k});var n=a(20),o=a.n(n),i=a(23),r=a.n(i),s=a(2),l=a.n(s),c=a(5),d=a.n(c),u=a(15),m=a(6),p=(a(46),a(3)),h=a(7);function f(e,t){return{types:Object(m.m)("SAVEDRAFT"),callAPI:function(a,n){return Object(u.a)("/api/v1/tickets/"+e+"/draftReply",!1,{orgId:a.currentOrgId}).post("",t).then(function(t){var a=n(),o=t.id,i=d()({},o,t),s=l()({},i,a.module.thread),c=a.module.ticket[e].thread||[],u=a.module.ticket[e].conversationIds||[],m=[o].concat(r()(c)),p=[{id:o,type:"thread"}].concat(r()(u));return{data:t,entities:{thread:s,ticket:d()({},e,{thread:m,conversationIds:p})}}})}}}function g(e,t){return{types:Object(m.m)("SEND_FOR_REVIEW"),callAPI:function(a,n){return Object(u.a)("/api/v1/tickets/"+e+"/threads/"+t+"/sendForReview",!1,{orgId:a.currentOrgId}).post("").then(function(e){return e})}}}function v(e,t,a){return{types:Object(m.m)("UPDATEDRAFT"),callAPI:function(n,o){return Object(u.a)("/api/v1/tickets/"+e+"/draftReply/"+t,!1,{orgId:n.currentOrgId}).patch("",a).then(function(a){var n=o(),i=n.module.ticket[e].conversationIds||[],r=n.module.ticket[e].thread||[];if(i.length){for(var s=0,l=0;l<=i.length;l++)if(i[l].id==t){s=l;break}i.splice(0,0,i.splice(s,1)[0])}else{var c=r.indexOf(t);r.splice(0,0,r.splice(c,1)[0])}return{data:a,entities:{thread:d()({},t,a),ticket:d()({},e,{conversationIds:i,thread:r})}}})}}}function b(e,t,a){return{types:Object(m.m)("TICKET_THREAD_DELETE"),callAPI:function(n,o){return Object(u.a)(e,!1,{orgId:n.currentOrgId}).del().then(function(e){return{ticketId:t,threadId:a}})}}}function _(e,t,a){var n=a?"?isPrivate=true":"";return{types:Object(m.m)("SENDREPLY"),callAPI:function(a,o){return Object(u.a)("/api/v1/tickets/"+e+"/sendReply"+n,!1,{orgId:a.currentOrgId}).post("",t).then(function(t){var a=o(),n=t.id,i=d()({},n,t),s=l()({},i,a.module.thread),c=a.module.ticket[e].thread||[],u=a.module.ticket[e].conversationIds||[],m=[n].concat(r()(c)),p=[{id:n,type:"thread"}].concat(r()(u));return{data:t,entities:{thread:s,ticket:d()({},e,{thread:m,conversationIds:p})}}})}}}function y(e,t,a){return{types:Object(m.m)("RESEND_THREAD"),callAPI:function(n,o){return Object(u.a)(e,!1,{orgId:n.currentOrgId}).post().then(function(e){var n=o(),i=n.module.ticket[a].conversationIds||[],r=n.module.ticket[a].thread||[];if(i.length){for(var s=0,l=0;l<=i.length;l++)if(i[l].id==t){s=l;break}i.splice(0,0,i.splice(s,1)[0])}else{var c=r.indexOf(t);r.splice(0,0,r.splice(c,1)[0])}return{data:e,entities:{thread:d()({},t,e),ticket:d()({},a,{thread:r,conversationIds:i})}}})}}}function E(e,t,a,n){return e=n?e+"&isPrivate=true":e,{types:Object(m.m)("SENDDRAFT"),callAPI:function(n,o){return Object(u.a)(e,!1,{orgId:n.currentOrgId}).post().then(function(e){var n=o(),i=n.module.ticket[t].conversationIds||[],r=n.module.ticket[t].thread||[];if(i.length){for(var s=0,l=0;l<=i.length;l++)if(i[l].id==a){s=l;break}i.splice(0,0,i.splice(s,1)[0])}else{var c=r.indexOf(a);r.splice(0,0,r.splice(c,1)[0])}return{data:e,entities:{thread:d()({},a,e),ticket:d()({},t,{conversationIds:i,thread:r})}}})}}}function C(e){return{types:Object(m.m)("SEARCHCONTACT"),callAPI:function(t,a){return Object(u.a)("/api/v1/contacts/search?limit=10&email="+e+"*",!1,{orgId:t.currentOrgId}).get().then(function(e){return 204==e.responseStatus?{list:[]}:l()(Object(h.normalize)(e.data,Object(h.arrayOf)(Object(h.schema)(p.L.CONTACT_L))),{list:e.data})})}}}function I(e){return{types:Object(m.m)("FROMEMAILADDRESS"),shouldCallAPI:function(t){return!t.departmentSpecificState[e]||!t.departmentSpecificState[e].fromEmailAddress.length},callAPI:function(t){return Object(u.a)("/api/v1/mailReplyAddress?departmentId="+e+"&isActive=true",!1,{orgId:t.currentOrgId}).get().then(function(t){return 204!=t.responseStatus?{entities:{},result:[],address:t.data,deptId:e}:{res:t,entity:{},result:[]}})}}}function A(e){return{types:Object(m.m)("MAIL_CONFIGURATIONS"),shouldCallAPI:function(t){return!o()(t.departmentSpecificState[e].mailConfigurations).length},callAPI:function(t){return Object(u.a)("/api/v1/departments/"+e+"/mailConfigurations",!1,{orgId:t.currentOrgId}).get().then(function(t){return{res:t,deptId:e,entity:{},result:[]}})}}}function k(e){return function(t,a){var n=a(),o=n.module.ticket[e],i=o.thread,r=void 0===i?[]:i,s=o.conversationIds,l=o.threadCount,c=o.commentCount;l=r.length;var u=r[0];if(s){for(var m=0;m<s.length;m++)if("thread"==s[m].type){u=s[m].id;break}l=s.length-parseInt(c)}var p={recentThreadId:u,recentThread:u?n.module.thread[u]:null,threadCount:l};return t({type:"SET_RECENT_THREAD_DATA_SUCCESS",data:{entities:{ticket:d()({},e,p)}}})}}},1233:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1234),b=a.n(v),_=a(16),y=a(239),E=a.n(y),C=a(8),I=a(73),A=a.n(I),k=function(e){function t(){return r()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.closeTicket,a=e.reOpenTicket,n=e.isSpam,o=e.isClosed,i=e.isOnHold,r=e.notSpam,s=e.moduleName,l=e.haveCloseTicketPermission,c=e.isCancel,d=e.onClick,u=e.isCloserNotificationEnable,m=e.toggleCloserNotification,p=!1;l||o||i||(p=!0);var f=u?C.f.getI18NValue("support.survey.lable.last.notification.disable",[s]):C.f.getI18NValue("support.survey.lable.last.notification.enable",[s]);return h.a.createElement(_.Container,{alignBox:"row",align:"vertical",className:b.a.container},c||n||p||o||i?null:h.a.createElement(_.Box,{className:b.a.switch,"data-title":f},h.a.createElement(E.a,{id:"notification",checked:u,onChange:m})),h.a.createElement(_.Box,{flexible:!0},n?h.a.createElement(A.a,{className:b.a.spamButton,onClick:r,needAppearance:!1},C.f.getI18NValue("support.not.spam")):p?c?h.a.createElement(A.a,{className:b.a.cancelButton,onClick:d,needAppearance:!1},C.f.getI18NValue("support.label.cancel")):null:h.a.createElement(A.a,{className:b.a.blueBtn,onClick:o||i?a:t,dataId:"reopen-ticket",needAppearance:!1},o||i?C.f.getI18NValue("support.label.reopen.req",[s]):C.f.getI18NValue("support.common.set.close.entity",[s]))))}}]),t}(h.a.Component);t.a=k,k.propTypes={closeTicket:g.a.func,haveCloseTicketPermission:g.a.bool,isCancel:g.a.bool,isClosed:g.a.bool,isCloserNotificationEnable:g.a.bool,isOnHold:g.a.bool,isSpam:g.a.bool,moduleName:g.a.string,notSpam:g.a.func,onClick:g.a.func,reOpenTicket:g.a.func,toggleCloserNotification:g.a.func}},1234:function(e,t,a){e.exports={button:"TicketCloseButton-module__button common-module__dotted common-module__oflow common-module__ellipsis common-module__semibold common-module__ftsmooth",blueBtn:"TicketCloseButton-module__blueBtn common-module__dotted common-module__oflow common-module__ellipsis common-module__semibold common-module__ftsmooth",spamButton:"TicketCloseButton-module__spamButton TicketCloseButton-module__button common-module__dotted common-module__oflow common-module__ellipsis common-module__semibold common-module__ftsmooth",cancelButton:"TicketCloseButton-module__cancelButton TicketCloseButton-module__button common-module__dotted common-module__oflow common-module__ellipsis common-module__semibold common-module__ftsmooth",container:"TicketCloseButton-module__container",switch:"TicketCloseButton-module__switch"}},1235:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1236),b=a.n(v),_=a(52),y=a(64),E=a.n(y),C=a(73),I=a.n(C),A=a(8),k=a(6),S=a(359),N=a.n(S),x=a(3),D=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.documentKeyupHandler=a.documentKeyupHandler.bind(a),a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.documentKeyupHandler)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.documentKeyupHandler)}},{key:"documentKeyupHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.preventDefault();var t=this.props,a=t.replyConfirm,n=t.closeAlert;27===e.keyCode?n():13===e.keyCode&&a()}},{key:"render",value:function(){var e=this.props,t=e.agents,a=e.replyingUsers,n=e.replyConfirm,o=e.closeAlert,i=e.isFromReplyEditor;return h.a.createElement(N.a,{portalId:x.v},h.a.createElement(_.a,{align:"both",isActive:!0,animationName:"fadeIn"},h.a.createElement("div",{className:b.a.popup},h.a.createElement("div",{className:b.a.header},a.map(function(e,a){var n=t[e.agentId];return h.a.createElement("span",{key:a,className:b.a.user},h.a.createElement(E.a,{size:"large",src:n.photoURL,name:n.name||Object(k.e)(n.firstName,n.lastName)}))}),h.a.createElement("p",{className:b.a.information},a.map(function(e,n){var o=t[e.agentId];return n+=1,h.a.createElement("span",{className:b.a.name,key:n},h.a.createElement("span",null,o.name||Object(k.e)(o.firstName,o.lastName)),n===a.length-1?a.length>1?h.a.createElement("span",{className:b.a.name},A.f.getI18NValue("and")):null:n!==a.length?h.a.createElement("span",null,","):null)}),h.a.createElement("span",null," ",i?A.f.getI18NValue("support.label.collision.detection.newagent.replying"):a.length>1?A.f.getI18NValue("support.label.collision.detection.agent.replying",[A.f.getI18NValue("are")]):A.f.getI18NValue("support.label.collision.detection.agent.replying",[A.f.getI18NValue("is")])))),h.a.createElement("div",{className:b.a.footer},h.a.createElement("div",{className:b.a.footerTitle},A.f.getI18NValue("support.label.collision.detection.agent.reply.question")),h.a.createElement("div",null,h.a.createElement(I.a,{text:A.f.getI18NValue("support.yes"),size:"Medium",palette:"primaryFilled",onClick:n}),h.a.createElement("span",{className:b.a.lastButton},h.a.createElement(I.a,{text:A.f.getI18NValue("support.no"),size:"Medium",palette:"secondary",onClick:o})))))))}}]),t}(h.a.Component);t.a=D,D.propTypes={agents:g.a.object,closeAlert:g.a.func,isFromReplyEditor:g.a.bool,replyConfirm:g.a.func,replyingUsers:g.a.array}},1236:function(e,t,a){e.exports={popup:"CollisionReplyAlert-module__popup",header:"CollisionReplyAlert-module__header",information:"CollisionReplyAlert-module__information",name:"CollisionReplyAlert-module__name common-module__semibold common-module__ftsmooth",user:"CollisionReplyAlert-module__user",footer:"CollisionReplyAlert-module__footer",footerTitle:"CollisionReplyAlert-module__footerTitle",lastButton:"CollisionReplyAlert-module__lastButton"}},1281:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(26),g=a(1),v=a.n(g),b=a(1282),_=a.n(b),y=a(235),E=a.n(y),C=a(73),I=a.n(C),A=a(1007),k=a(1162),S=a(30),N=a(8),x=a(24),D=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e)),n=a.props,i=(n.channel,n.replyThread),s=n.replyMode;return a.state={content:"twitter"==s?"@"+i.twitterProfile+" ":a.props.content,tweetLen:"twitterDm"==s?8e3:280,mode:"twitterDm"==s?"twitterDm":"tweet"},a.handleChange=a.handleChange.bind(a),a.sendDraft=a.sendDraft.bind(a),a.saveDraft=a.saveDraft.bind(a),a.updateDraft=a.updateDraft.bind(a),a.sendReply=a.sendReply.bind(a),a.constructSwtichOptions=a.constructSwtichOptions.bind(a),a.deleteDraftConfirmation=a.deleteDraftConfirmation.bind(a),a.deleteDraft=a.deleteDraft.bind(a),a.closeAlert=a.closeAlert.bind(a),a}return m()(t,e),l()(t,[{key:"handleChange",value:function(e){var t=this.props,a=t.channel,n=t.replyMode,o=t.setReplyData;this.setState({content:e});var i="";"TWITTER"==a?(i=280-e.length,this.setState({tweetLen:i})):(i=8e3-e.length,this.setState({tweetLen:i})),o&&o("content",e),""!=i&&(i<0?(o&&o("isMaxLimit",!0),o&&o("maxCount","twitterDm"==n?8e3:280)):o&&o("isMaxLimit",!1))}},{key:"sendDraft",value:function(){var e=this.props,t=e.showMessage,a=e.hideMessage,n=e.sendDraft,o=this.state.content;""!=o&&o?(a(),n()):t({type:"alert",message:N.f.getI18NValue("support.social.reply.empty")})}},{key:"sendReply",value:function(){if("twitterDm"!=this.state.mode){var e=this.props,t=e.showMessage,a=e.hideMessage,n=e.sendReply,o=e.channel,i=this.state,r=i.content,s=i.tweetLen;""!=r&&r?"TWITTER"==o&&s<0?t({type:"alert",message:N.f.getI18NValue("support.social.twitter.reply.limit")}):(a(),n({channel:o="FACEBOOK_DM"==o?"FACEBOOK":o,content:r})):t({type:"alert",message:N.f.getI18NValue("support.social.reply.empty")})}}},{key:"saveDraft",value:function(){var e=this.props,t=e.showMessage,a=e.hideMessage,n=e.saveDraft,o=e.closeEdtior,i=this.state.content;""!=i&&i?(a(),n({channel:"FACEBOOK",content:i},function(e){o()})):t({type:"alert",message:N.f.getI18NValue("support.social.reply.empty")})}},{key:"updateDraft",value:function(){var e=this.props,t=e.showMessage,a=e.hideMessage,n=e.updateDraft,o=e.closeEdtior,i=this.state.content;""!=i&&i?(a(),n({channel:"FACEBOOK",content:i},function(e){o()})):t({type:"alert",message:N.f.getI18NValue("support.social.reply.empty")})}},{key:"constructSwtichOptions",value:function(e){return"FACEBOOK"==e||"FACEBOOK_DM"==e?[{name:N.f.getI18NValue("crm.label.email"),iconName:"chEmail1",size:"11"},{name:N.f.getI18NValue("support.social.facebook.name"),iconName:"chFacebook",size:"14"}]:[{name:N.f.getI18NValue("crm.label.email"),iconName:"chEmail1",size:"12"},{name:N.f.getI18NValue("support.social.common.tweet"),iconName:"chTwitter",size:"16"},{name:N.f.getI18NValue("support.social.common.direct.message"),iconName:"bubble",size:"16"}]}},{key:"deleteDraftConfirmation",value:function(){this.setState({alertMode:"deleteDraft"})}},{key:"deleteDraft",value:function(){this.props.deleteDraft(),this.closeAlert()}},{key:"closeAlert",value:function(){this.setState({alertMode:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.content,n=t.tweetLen,o=t.mode,i=t.alertMode,r=this.props,s=r.closeEdtior,l=r.isDraft,c=r.channel,d=r.openEditor,u=r.threadId,m=r.replyThread,p=r.haveMailSendPermission,f=r.isFromBlueprint,g=r.haveForWardPermissionOnly;return h.a.createElement("div",null,h.a.createElement("div",{className:_.a.fbContnet+" "+(f?_.a.bluePrintLayar:"")},h.a.createElement("div",{className:_.a.socialIcn},h.a.createElement("div",{className:_.a.chIcon},"twitterDm"==o?h.a.createElement(S.CommunityFontIcon,{name:"bubble",size:"17"}):h.a.createElement(S.TicketsFontIcon,{name:"FACEBOOK"==c||"FACEBOOK_DM"==c?"chFacebook":"chTwitter",size:"16"})),g?null:h.a.createElement(A.a,{Icnsize:"8",IcnName:"blockDownArrow",icnStatus:!0,arrowPosition:"topLeft",left:"-53",objValues:this.constructSwtichOptions(c),listStyle:"alpha",boxPosition:"bottomRight",onSelect:function(t){t==N.f.getI18NValue("crm.label.email")?d(u,a,m,"replyall"):t==N.f.getI18NValue("support.social.common.direct.message")?(e.setState({mode:"twitterDm",content:"",tweetLen:8e3}),f&&d("","","","twitterDm")):t==N.f.getI18NValue("support.social.common.tweet")&&(e.setState({mode:"tweet",content:"@"+m.twitterProfile+" ",tweetLen:280}),f&&d("","","","tweet"))}})),h.a.createElement("div",{className:_.a.txtArea},h.a.createElement(E.a,{size:f?"xlarge":"medium",placeholder:N.f.getI18NValue("support.request.type.facebook.comment"),text:a,needBorder:!1,onChange:this.handleChange})),"TWITTER"==c&&f?h.a.createElement("span",{className:_.a.tweetLen+" "+(n<0?_.a.limitExcited:null)},n):null),f?null:h.a.createElement("div",{className:_.a.footer},h.a.createElement("div",{className:_.a.optionsCont},p?h.a.createElement(I.a,{text:"twitterDm"==o?N.f.getI18NValue("support.social.send.dm"):"FACEBOOK"==c?N.f.getI18NValue("support.social.post.comment"):"FACEBOOK_DM"==c?N.f.getI18NValue("support.social.replymessage"):N.f.getI18NValue("support.social.post.tweet"),palette:"primaryFilled",size:"medium",onClick:l?this.sendDraft:this.sendReply}):null,"FACEBOOK"==c?h.a.createElement(I.a,{text:N.f.getI18NValue("support.common.request.mail.save.draft"),palette:p?"secondary":"primaryFilled",size:"medium",onClick:l?this.updateDraft:this.saveDraft}):null,l&&"FACEBOOK"==c?h.a.createElement(I.a,{text:N.f.getI18NValue("support.common.request.mail.discard.draft"),palette:"secondary",size:"medium",onClick:this.deleteDraftConfirmation}):null,h.a.createElement(I.a,{text:N.f.getI18NValue("support.label.cancel"),palette:"secondary",size:"medium",onClick:s}),"TWITTER"==c?h.a.createElement("span",{className:_.a.tweetLen+" "+(n<0?_.a.limitExcited:null)},n):null)),"deleteDraft"==i?h.a.createElement(k.a,{closeAlert:this.closeAlert,deleteDraft:this.deleteDraft}):null)}}]),t}(p.Component);D.propTypes={channel:v.a.string,closeEdtior:v.a.func,content:v.a.string,deleteDraft:v.a.func,haveForWardPermissionOnly:v.a.bool,haveMailSendPermission:v.a.bool,hideMessage:v.a.func,isDraft:v.a.bool,isFromBlueprint:v.a.bool,openEditor:v.a.func,replyMode:v.a.string,replyThread:v.a.object,saveDraft:v.a.func,sendDraft:v.a.func,sendReply:v.a.func,setReplyData:v.a.func,showMessage:v.a.func,threadId:v.a.string,updateDraft:v.a.func},t.a=Object(f.connect)(function(e,t){return{id:e.routing.paramMap.moduleId}},{showMessage:x.Q,hideMessage:x.w})(D)},1282:function(e,t,a){e.exports={footer:"SocialReply-module__footer",optionsCont:"SocialReply-module__optionsCont",fbContnet:"SocialReply-module__fbContnet",socialIcn:"SocialReply-module__socialIcn",socialEditor:"SocialReply-module__socialEditor",icons:"SocialReply-module__icons",downArrow:"SocialReply-module__downArrow",txtArea:"SocialReply-module__txtArea",chIcon:"SocialReply-module__chIcon",tweetLen:"SocialReply-module__tweetLen",limitExcited:"SocialReply-module__limitExcited",bluePrintLayar:"SocialReply-module__bluePrintLayar"}},1283:function(e,t,a){e.exports={container:"Composebox-module__container",scrollBox:"Composebox-module__scrollBox",composeRow:"Composebox-module__composeRow",rightContainer:"Composebox-module__rightContainer",composeFlabel:"Composebox-module__composeFlabel common-module__dotted common-module__oflow common-module__ellipsis",selectLitetheme:"Composebox-module__selectLitetheme",emptyErr:"Composebox-module__emptyErr common-module__dblk",replyIcns:"Composebox-module__replyIcns common-module__posrel",textVal:"Composebox-module__textVal common-module__dotted common-module__oflow common-module__ellipsis",icnMore:"Composebox-module__icnMore",moreAction:"Composebox-module__moreAction",recipientstheme:"Composebox-module__recipientstheme",recipient:"Composebox-module__recipient",demomore:"Composebox-module__demomore",fromAddress:"Composebox-module__fromAddress",fromAlert:"Composebox-module__fromAlert",soloDraft:"Composebox-module__soloDraft",visHidden:"Composebox-module__visHidden common-module__vishidden"}},1284:function(e,t,a){e.exports={rlyedr:"TokenList-module__rlyedr",rlymailtxt:"TokenList-module__rlymailtxt common-module__dotted common-module__oflow common-module__ellipsis",rlyact:"TokenList-module__rlyact",rlyclo:"TokenList-module__rlyclo",item:"TokenList-module__item",placeholder:"TokenList-module__placeholder",inputCont:"TokenList-module__inputCont",sel:"TokenList-module__sel",invalide:"TokenList-module__invalide",invalideInput:"TokenList-module__invalideInput"}},1285:function(e,t,a){e.exports={alertDiv:"FromAddressEmpty-module__alertDiv common-module__dotted common-module__oflow common-module__ellipsis",icnExclatn:"FromAddressEmpty-module__icnExclatn",alertText:"FromAddressEmpty-module__alertText",refreshText:"FromAddressEmpty-module__refreshText"}},1286:function(e,t,a){e.exports={mainContainer:"ReplyFooter-module__mainContainer common-module__posrel",shadow:"ReplyFooter-module__shadow common-module__posab common-module__w100",bluePrintLayar:"ReplyFooter-module__bluePrintLayar",btmDiv:"ReplyFooter-module__btmDiv",uploadImg:"ReplyFooter-module__uploadImg",sendBtn:"ReplyFooter-module__sendBtn",actionBtn:"ReplyFooter-module__actionBtn",attchIcn:"ReplyFooter-module__attchIcn",attchPopup:"ReplyFooter-module__attchPopup",replyBottom:"ReplyFooter-module__replyBottom",fileCont:"ReplyFooter-module__fileCont"}},1287:function(e,t,a){e.exports={ticketButton:"SendButton-module__ticketButton",ticketAction:"SendButton-module__ticketAction common-module__dtable",haveMore:"SendButton-module__haveMore",arrow:"SendButton-module__arrow",content:"SendButton-module__content common-module__pointer",actionType:"SendButton-module__actionType common-module__semibold common-module__ftsmooth",subtitle:"SendButton-module__subtitle common-module__oflow",buttonAction:"SendButton-module__buttonAction common-module__vishidden",active:"SendButton-module__active common-module__visible",secondarybutton:"SendButton-module__secondarybutton common-module__semibold common-module__ftsmooth",actionSubtitle:"SendButton-module__actionSubtitle",switchAction:"SendButton-module__switchAction",actionNotify:"SendButton-module__actionNotify",switchbox:"SendButton-module__switchbox",pl30:"SendButton-module__pl30"}},1288:function(e,t,a){e.exports={mainContainer:"ForumFooter-module__mainContainer common-module__cboth",shadow:"ForumFooter-module__shadow common-module__w100",forumDiv:"ForumFooter-module__forumDiv common-module__flexgrow",buttonGroup:"ForumFooter-module__buttonGroup",postButton:"ForumFooter-module__postButton",forumStatus:"ForumFooter-module__forumStatus",forumstatusText:"ForumFooter-module__forumstatusText common-module__bold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis common-module__offSelection",container:"ForumFooter-module__container common-module__cboth",statusSel:"ForumFooter-module__statusSel",dropDown:"ForumFooter-module__dropDown",dropList:"ForumFooter-module__dropList common-module__semibold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis common-module__offSelection"}},1289:function(e,t,a){e.exports={list:"SnippetActionPopup-module__list",icon:"SnippetActionPopup-module__icon",popup:"SnippetActionPopup-module__popup"}},1290:function(e,t,a){e.exports={replyArea:"ReplyEditor-module__replyArea"}},1291:function(e,t,a){e.exports={listCont:"EmailTemplatePopup-module__listCont",title:"EmailTemplatePopup-module__title common-module__semibold common-module__ftsmooth",list:"EmailTemplatePopup-module__list common-module__dotted common-module__oflow common-module__ellipsis",footer:"EmailTemplatePopup-module__footer",footerOption:"EmailTemplatePopup-module__footerOption common-module__dotted common-module__oflow common-module__ellipsis",updateIcon:"EmailTemplatePopup-module__updateIcon",emptyTxt:"EmailTemplatePopup-module__emptyTxt",emtyIcon:"EmailTemplatePopup-module__emtyIcon",viewpopsearch:"EmailTemplatePopup-module__viewpopsearch",popup:"EmailTemplatePopup-module__popup",seperate:"EmailTemplatePopup-module__seperate"}},1336:function(e,t,a){"use strict";var n=a(5),o=a.n(n),i=a(2),r=a.n(i),s=a(23),l=a.n(s),c=a(12),d=a.n(c),u=a(9),m=a.n(u),p=a(10),h=a.n(p),f=a(13),g=a.n(f),v=a(14),b=a.n(v),_=a(0),y=a.n(_),E=a(1),C=a.n(E),I=a(26),A=a(533),k=a.n(A),S=a(16),N=a(1004),x=a(153),D=function(e){function t(){return m()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return b()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.isRender,a=e.isSymbol;return y.a.createElement(x.a,{viewBox:"0 0 32 32",name:"PlusIcon",isRender:t,isSymbol:a},y.a.createElement("g",null,y.a.createElement("path",{style:{fill:"#767d89"},d:"M16,2.7c0.4,0,0.7,0.1,0.9,0.4s0.4,0.6,0.4,0.9v10.7H28c0.4,0,0.7,0.1,0.9,0.4c0.3,0.3,0.4,0.6,0.4,0.9 c0,0.4-0.1,0.7-0.4,0.9c-0.3,0.3-0.6,0.4-0.9,0.4H17.3V28c0,0.4-0.1,0.7-0.4,0.9c-0.3,0.3-0.6,0.4-0.9,0.4c-0.4,0-0.7-0.1-0.9-0.4 c-0.3-0.3-0.4-0.6-0.4-0.9V17.3H4c-0.4,0-0.7-0.1-0.9-0.4S2.7,16.4,2.7,16s0.1-0.7,0.4-0.9c0.3-0.3,0.6-0.4,0.9-0.4h10.7V4 c0-0.4,0.1-0.7,0.4-0.9C15.3,2.8,15.6,2.7,16,2.7z"})))}}]),t}(y.a.Component),O=D;D.propTypes={isRender:C.a.bool,isSymbol:C.a.bool},D.defaultProps={isRender:!0,isSymbol:!1};var w=function(e){function t(){return m()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return b()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.isRender,a=e.isSymbol;return y.a.createElement(x.a,{viewBox:"0 0 31 32",name:"SnippetIcon",isRender:t,isSymbol:a},y.a.createElement("g",null,y.a.createElement("path",{d:"M14.4,8.2L15.6,9L16,8.4l-1-0.7l2.5-3.7L11.5,0L8.9,3.8L7.9,3L7.6,3.6l1.2,0.8c-2.3,3-5.9,0.8-6,0.7L2.3,4.9L0,23.8 l16.6-9.3l-0.4-0.3C15.9,13.9,12.6,11.5,14.4,8.2L14.4,8.2z M1.5,22l5.2-7.7c0.3,0.1,0.6,0.2,0.9,0.2c1.2,0,2.1-0.9,2.2-2.1 c0-1.2-0.9-2.1-2.1-2.2c-1.2,0-2.1,0.9-2.2,2.1c0,0.6,0.2,1.2,0.7,1.6L1,21.6L2.8,6c1.2,0.6,4.4,1.7,6.5-1.1l4.5,3 c-1.8,3,0.4,5.6,1.4,6.5L1.5,22L1.5,22z M6.7,13.6c-0.7-0.4-0.8-1.3-0.4-2s1.3-0.8,2-0.4c0.7,0.4,0.8,1.3,0.4,2 c-0.2,0.3-0.5,0.5-0.9,0.6C7.5,13.9,7.1,13.8,6.7,13.6L6.7,13.6z"}),y.a.createElement("path",{style:{fill:"#03A3FE"},d:"M30.9,25c-4.9,0.7-5.4,1.2-5.9,6.7c-0.6-5.4-1.1-6-6.1-6.5c4.9-0.7,5.4-1.2,5.9-6.7 C25.4,23.9,25.9,24.5,30.9,25z M30.3,8.2c-4.5,0.6-4.9,1.1-5.5,6.3c-0.5-5.3-0.9-5.8-5.4-6.4c4.5-0.6,4.9-1.1,5.5-6.3 C25.4,7.1,25.8,7.6,30.3,8.2z M16.2,25.7c-4.5,0.6-4.9,1.1-5.5,6.3c-0.5-5.3-0.9-5.8-5.4-6.4c4.5-0.6,4.9-1.1,5.5-6.3 C11.3,24.6,11.7,25.1,16.2,25.7z"})))}}]),t}(y.a.Component),T=w;w.propTypes={isRender:C.a.bool,isSymbol:C.a.bool},w.defaultProps={isRender:!0,isSymbol:!1};var P=function(e){function t(){return m()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return b()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.isRender,a=e.isSymbol;return y.a.createElement(x.a,{viewBox:"0 0 32 32",name:"TemplateIcon",isRender:t,isSymbol:a},y.a.createElement("g",null,y.a.createElement("path",{d:"M3.6,27.7h5.9v2.8c0,0.8,0.7,1.5,1.5,1.5h17.4c0.8,0,1.5-0.7,1.5-1.5V5.9c0-0.8-0.7-1.5-1.5-1.5h-5.9V1.5 C22.5,0.7,21.8,0,21,0L3.6,0C2.8,0,2.1,0.7,2.1,1.5v24.6C2.1,27,2.8,27.7,3.6,27.7z M28.4,5.7c0.1,0,0.2,0.1,0.2,0.2v24.6 c0,0.1-0.1,0.2-0.2,0.2H11c-0.1,0-0.2-0.1-0.2-0.2V5.9c0-0.1,0.1-0.2,0.2-0.2C11,5.7,28.4,5.7,28.4,5.7z M9.5,16.6v3.1V16.6z M9.5,12v3.3V12z M9.5,7.6v3.2V7.6z M9.5,21v5.3H3.6c-0.1,0-0.2-0.1-0.2-0.2V1.5c0-0.1,0.1-0.2,0.2-0.2H21c0.1,0,0.2,0.1,0.2,0.2 v2.7L11,4.3c-0.8,0-1.5,0.7-1.5,1.5v0.1L9.5,21z M26.9,25.5c0,0.4-0.3,0.7-0.7,0.7H15.7c-0.4,0-0.7-0.3-0.7-0.7s0.3-0.7,0.7-0.7 h10.6C26.6,24.8,26.9,25.1,26.9,25.5z M12.8,21c0-0.4,0.3-0.7,0.7-0.7h12.8c0.4,0,0.7,0.3,0.7,0.7s-0.3,0.7-0.7,0.7H13.4 C13.1,21.7,12.8,21.4,12.8,21L12.8,21z M12.8,16.5c0-0.4,0.3-0.7,0.7-0.7h12.8c0.4,0,0.7,0.3,0.7,0.7s-0.3,0.7-0.7,0.7H13.4 C13.1,17.1,12.8,16.8,12.8,16.5L12.8,16.5z M12.8,12c0-0.4,0.3-0.7,0.7-0.7h12.8c0.4,0,0.7,0.3,0.7,0.7s-0.3,0.7-0.7,0.7H13.4 C13.1,12.6,12.8,12.4,12.8,12L12.8,12z"})))}}]),t}(y.a.Component),B=P;P.propTypes={isRender:C.a.bool,isSymbol:C.a.bool},P.defaultProps={isRender:!0,isSymbol:!1};var F=a(1283),R=a.n(F),V=a(30),M=a(1007),L=a(99),j=a.n(L),z=a(1200),K=a(6),U=a(1284),H=a.n(U),Z=a(1083),q=a(8),W=function(e){function t(e){m()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={value:"",editedValue:a.props.editedValue||"",selectedIndex:null,errordiv:"",errorIndex:null,editedIndex:a.props.editedIndex||null,selectSearchIndex:-1},a.formatEmailAddress=a.formatEmailAddress.bind(a),a.removeEmail=a.removeEmail.bind(a),a.selectEmail=a.selectEmail.bind(a),a.handleSearchIndex=a.handleSearchIndex.bind(a),a.resetSearchData=a.resetSearchData.bind(a),a}return b()(t,e),h()(t,[{key:"componentWillReceiveProps",value:function(e){e.editedValue==this.props.editedValue&&e.editedIndex==this.props.editedIndex||this.setState({editedValue:e.editedValue,editedIndex:e.editedIndex})}},{key:"handleChange",value:function(e,t){"edit"==e?this.setState({editedValue:t}):this.setState({value:t}),t.length>2?this.props.searchContact(this.props.mode,t):this.resetSearchData()}},{key:"removeEmail",value:function(e){var t=this,a=this.props,n=a.removeEmail,o=a.mode,i=this.state.selectedIndex;null==i&&e?this.setState({selectedIndex:e-1}):(n(i,o,"",function(){t.formInput&&t.formInput.focus()}),this.setState({selectedIndex:e-1}))}},{key:"formatEmailAddress",value:function(e,t){var a=this;this.setState({selectedIndex:null});var n=this.props,o=n.mode,i=n.formatEmailAddress,r=n.emailArr,s=n.searchMode,l=n.searchData,c=this.state,d=c.selectSearchIndex,u=c.selectedIndex,m=t.keyCode,p=t.key,h="string"==typeof t?t:t.target.value;if(38==m||40==m)s==o&&"noData"!=l&&this.handleSearchIndex(m);else if(s==o&&"noData"!=l&&13==m&&-1!=d)this.handleSearchIndex(m);else if(8==m&&""==h)this.removeEmail(r.length);else if(13==m&&null!=u)this.props.editEmail(this.state.selectedIndex,this.props.emailArr[this.state.selectedIndex],o,function(){a.editInput.focus(),a.editInput.select()});else{if(this.setState({selectedIndex:null}),""==h)return;(13==m||188==m&&","==p||"focusout"==e)&&(this.resetSearchData(),188==m&&(h=h.substring(0,h.indexOf(","))),i(h,o,function(e){"isValide"==e.type?a.setState({value:""},function(){a.formInput&&a.formInput.focus()}):"isInValide"==e.type?(a.setState({errordiv:"form"}),setTimeout(function(){a.setState({errordiv:""})},2e3)):"duplicate"==e.type&&(a.setState({errorIndex:e.index},function(){a.formInput&&a.formInput.focus()}),setTimeout(function(){a.setState({errorIndex:null})},2e3))}))}}},{key:"changeEmailAddress",value:function(e,t,a){var n=this,o=this.props,i=o.mode,r=o.changeEmailAddress,s=o.removeEmail,l=o.searchMode,c=o.searchData,d=a.key,u=a.keyCode,m="string"==typeof a?a:a.target.value;38==u||40==u?l==i&&"noData"!=c&&this.handleSearchIndex(u):l==i&&"noData"!=c&&13==u&&-1!=this.state.selectSearchIndex?this.handleSearchIndex(u):8==u&&""==m?s(e,i,"edit",function(){n.formInput&&n.formInput.focus()}):(13==u||188==u&&","==d||"focusout"==t)&&(this.resetSearchData(),188==u&&(m=m.substring(0,m.indexOf(","))),r(m,e,i,function(e){"isValide"==e.type?n.setState({value:""},function(){n.formInput&&n.formInput.focus()}):"isInValide"==e.type?(n.setState({errordiv:"edit"}),setTimeout(function(){n.setState({errordiv:""})},2e3)):"duplicate"==e.type&&(n.setState({errorIndex:e.index},function(){n.editInput.focus()}),setTimeout(function(){n.setState({errorIndex:null})},2e3))}))}},{key:"editEmail",value:function(e,t,a){var n=this;this.state.selectedIndex==e?this.props.editEmail(e,t,a,function(){n.editInput.focus(),n.editInput.select()}):this.setState({selectedIndex:e})}},{key:"selectEmail",value:function(e,t){e.firstName,e.lastName;var a=e.email,n=Object(K.e)(e.firstName,e.lastName)+"<"+a+">";"edit"==t?(this.setState({editedValue:n,errordiv:""}),this.changeEmailAddress(this.state.editedIndex,"focusout",n)):(this.setState({value:n,errordiv:""}),this.formatEmailAddress("focusout",n)),this.resetSearchData()}},{key:"resetSearchData",value:function(){this.setState({selectSearchIndex:-1}),this.props.closeSearchPopup()}},{key:"handleSearchIndex",value:function(e){var t=this.props.searchData;if(13==e){var a=this.state,n=a.selectSearchIndex,o=a.editedIndex;if(n>-1){var i=t[n],r=i.email,s=i.firstName,l=i.lastName,c=Object(K.e)(s,l)+"<"+r+">";null==o?(this.setState({value:c,errordiv:""}),this.formatEmailAddress("focusout",c)):(this.setState({editedValue:c,errordiv:""}),this.changeEmailAddress(o,"focusout",c)),this.resetSearchData()}}else 40==e?this.setState(function(e){return{selectSearchIndex:e.selectSearchIndex==t.length-1?0:e.selectSearchIndex+1}}):this.setState(function(e){return{selectSearchIndex:e.selectSearchIndex<=0?t.length-1:e.selectSearchIndex-1}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.emailArr,n=t.mode,o=t.removeEmail,i=t.editedMode,r=t.searchMode,s=t.searchData,l=t.orgName,c=this.state,d=c.value,u=c.editedValue,m=c.selectedIndex,p=c.errordiv,h=c.errorIndex,f=c.editedIndex,g=c.selectSearchIndex;return y.a.createElement(S.Container,{wrap:!0,alignBox:"row"},a.map(function(t,a){var c=Object(Z.a)(t),d=Object(Z.e)(t);return f==a&&n==i?y.a.createElement(S.Box,{shrink:!0,className:H.a.item},y.a.createElement(j.a,{value:u,dataId:"toAddress_"+e.props.orgName,placeHolder:"Enter the Recipients Email Address",className:"edit"==p?H.a.placeholder+" "+H.a.invalideInput:H.a.placeholder,needAppearance:!1,onChange:e.handleChange.bind(e,"edit"),onKeyUp:e.changeEmailAddress.bind(e,a,""),onBlur:e.changeEmailAddress.bind(e,a,"focusout"),inputRef:function(t){e.editInput=t}}),r==n&&"noData"!=s?y.a.createElement("span",null,y.a.createElement(z.a,{data:s,orgName:l,onSelect:e.selectEmail,type:"edit",selectSearchIndex:g,needFixed:!0})):null):y.a.createElement(S.Box,{className:m==a?H.a.item+" "+H.a.sel:d?H.a.item:H.a.item+" "+H.a.invalide,key:a,id:m},y.a.createElement("div",{className:H.a.rlyedr,onClick:e.editEmail.bind(e,a,t,n)},y.a.createElement("span",{className:H.a.rlyact},y.a.createElement("span",{className:H.a.rlyclo,onClick:o.bind(e,a,n,"",function(){e.formInput&&e.formInput.focus()})},y.a.createElement(V.TopbandFontIcon,{name:"close",size:"17"})),y.a.createElement("span",{className:h==a?H.a.rlymailtxt+" "+H.a.invalideInput:H.a.rlymailtxt},c))))}),n!=i&&y.a.createElement(S.Box,{flexible:!0,className:H.a.item+" "+H.a.inputCont},y.a.createElement(j.a,{type:"text",value:d,placeHolder:q.f.getI18NValue("support.email.placeholder"),className:"form"==p?H.a.placeholder+" "+H.a.invalideInput:H.a.placeholder,needAppearance:!1,onChange:this.handleChange.bind(this,""),onKeyUp:this.formatEmailAddress.bind(this,""),onBlur:this.formatEmailAddress.bind(this,"focusout"),inputRef:function(t){e.formInput=t}}),r==n&&"noData"!=s?y.a.createElement(z.a,{data:s,orgName:l,onSelect:this.selectEmail,type:"form",selectSearchIndex:g,needFixed:!0}):null))}}]),t}(y.a.Component),G=W;W.propTypes={changeEmailAddress:C.a.func,closeSearchPopup:C.a.func,editEmail:C.a.func,editedIndex:C.a.string,editedMode:C.a.string,editedValue:C.a.string,emailArr:C.a.array,formatEmailAddress:C.a.func,mode:C.a.string,orgName:C.a.string,removeEmail:C.a.func,searchContact:C.a.func,searchData:C.a.array,searchMode:C.a.string};var Y=a(1285),$=a.n(Y),J=function(e){function t(e){m()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={mode:"Configure"},a._mount=!1,a.refreshAdrress=a.refreshAdrress.bind(a),a.openConfigurePage=a.openConfigurePage.bind(a),a}return b()(t,e),h()(t,[{key:"refreshAdrress",value:function(){var e=this;this.props.getFromEmailAddress(function(){e._mount&&e.setState({mode:"Configure"})})}},{key:"openConfigurePage",value:function(){this.setState({mode:"refresh"}),this.props.openConfigurePage()}},{key:"componentDidMount",value:function(){this._mount=!0}},{key:"componentWillUnmount",value:function(){this._mount=!1}},{key:"render",value:function(){var e=this.state.mode;return y.a.createElement("div",null,"Configure"==e?y.a.createElement("div",{className:$.a.alertDiv,onClick:this.openConfigurePage},y.a.createElement("span",{className:$.a.icnExclatn},y.a.createElement(V.CommonFontIcon,{name:"exclamationThincircle",size:"14"})),y.a.createElement("span",{className:$.a.alertText},q.f.getI18NValue("support.email.fromaddress.click"))):y.a.createElement("div",{className:$.a.refreshText,onClick:this.refreshAdrress},q.f.getI18NValue("crm.button.refresh")))}}]),t}(y.a.Component),Q=J;J.propTypes={getFromEmailAddress:C.a.func,openConfigurePage:C.a.func};var X=a(949),ee=a.n(X),te=function(e){function t(e){m()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e)),n=a.props,o=n.toAddress,i=void 0===o?[]:o,r=n.ccAddress,s=void 0===r?[]:r,l=n.bccAddress,c=void 0===l?[]:l;return a.state={toArray:i,ccArray:s,bccArray:c,editedMode:"",editedIndex:null,editedValue:"",isCcVisible:!!s.length,isBccVisible:!!c.length,moreData:0},a.formatEmailAddress=a.formatEmailAddress.bind(a),a.removeEmail=a.removeEmail.bind(a),a.editEmail=a.editEmail.bind(a),a.changeEmailAddress=a.changeEmailAddress.bind(a),a.showCc=a.showCc.bind(a),a.showBcc=a.showBcc.bind(a),a.constructRecipients=a.constructRecipients.bind(a),a.createRecipientCount=a.createRecipientCount.bind(a),a.hideRecipients=a.hideRecipients.bind(a),a.replyActions=a.replyActions.bind(a),a.handleFromAdressChange=a.handleFromAdressChange.bind(a),a}return b()(t,e),h()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=t.toArray,n=t.ccArray,o=t.bccArray,i=t.isCcVisible,r=t.isBccVisible;e.toAddress==a&&e.ccAddress==n&&e.bccAddress==o||(this.setState({toArray:e.toAddress,ccArray:e.ccAddress,bccArray:e.bccAddress}),i||this.setState({isCcVisible:!!e.ccAddress.length}),r||this.setState({isBccVisible:!!e.bccAddress.length})),e.mode!=this.props.mode&&"forward"==e.mode&&this.setState({isCcVisible:!1}),e.isEditorFocus!=this.props.isEditorFocus&&e.isEditorFocus&&this.setState({isCcVisible:!1,isBccVisible:!1})}},{key:"formatEmailAddress",value:function(e,t,a){for(var n=Object(Z.d)(e),o=0;o<n.length;o++){var i=n[o].trim();if(Object(Z.e)(i)){var r=this.props.addEmail;if("to"==t){var s=Object(Z.c)(this.state.toArray,i);s.isDuplicate?a&&a({type:"duplicate",index:s.index}):(r(i,t),a&&a({type:"isValide"}))}else if("bcc"==t){var l=Object(Z.c)(this.state.bccArray,i);l.isDuplicate?a&&a({type:"duplicate",index:l.index}):(r(i,t),a&&a({type:"isValide"}))}else if("cc"==t){var c=Object(Z.c)(this.state.ccArray,i);c.isDuplicate?a&&a({type:"duplicate",index:c.index}):(r(i,t),a&&a({type:"isValide"}))}}else a&&a({type:"isInValide"})}}},{key:"changeEmailAddress",value:function(e,t,a,n){if(Object(Z.e)(e)){var o=this.props.changeEmail,i=!1;if("to"==a){var r=Object(Z.c)(this.state.toArray,e);r.isDuplicate&&r.index!=t?n&&n({type:"duplicate",index:r.index}):(o(e,t,a),i=!0,n&&n({type:"isValide"}))}else if("bcc"==a){var s=Object(Z.c)(this.state.bccArray,e);s.isDuplicate&&s.index!=t?n&&n({type:"duplicate",index:s.index}):(o(e,t,a),i=!0,n&&n({type:"isValide"}))}else if("cc"==a){var l=Object(Z.c)(this.state.ccArray,e);l.isDuplicate&&l.index!=t?n&&n({type:"duplicate",index:l.index}):(o(e,t,a),i=!0,n&&n({type:"isValide"}))}i&&this.setState({editedMode:"",editedIndex:null,editedValue:""})}else n&&n({type:"isInValide"})}},{key:"editEmail",value:function(e,t,a,n){this.setState({editedIndex:e,editedValue:t,editedMode:a},function(){n&&n()})}},{key:"removeEmail",value:function(e,t,a,n){var o=this.props.removeEmail;"to"==t?o(e,t,function(){n&&n()}):"bcc"==t?o(e,t,function(){n&&n()}):"cc"==t&&o(e,t,function(){n&&n()}),"edit"==a&&this.setState({editedMode:"",editedIndex:null,editedValue:""},function(){n&&n()})}},{key:"showBcc",value:function(){this.setState({isBccVisible:!0})}},{key:"showCc",value:function(){this.setState({isCcVisible:!0})}},{key:"constructSwtichOptions",value:function(e,t){var a=[];if("FACEBOOK"==t||"FACEBOOK_DM"==t)a=[{name:q.f.getI18NValue("crm.label.email"),iconName:"chEmail1",size:"11"},{name:q.f.getI18NValue("support.social.facebook.name"),iconName:"chFacebook",size:"14"}];else if("TWITTER"==t||"TWITTER_DM"==t)a=[{name:q.f.getI18NValue("crm.label.email"),iconName:"chEmail1",size:"11"},{name:q.f.getI18NValue("support.social.common.tweet"),iconName:"chTwitter",size:"16"},{name:q.f.getI18NValue("support.social.common.direct.message"),iconName:"bubble",size:"16"}];else for(var n=[{label:q.f.getI18NValue("support.common.request.mail.replyall"),key:"replyall"},{label:q.f.getI18NValue("support.common.request.mail.reply"),key:"reply"},{label:q.f.getI18NValue("support.common.request.mail.forward"),key:"forward"}],o=0;o<n.length;o++){var i=n[o],r=i.label,s=i.key;e!=s&&a.push({name:r,iconName:s,size:"13"})}return a}},{key:"constructRecipients",value:function(e,t){for(var a=[],n=e.length-t,o=0;o<n;o++){var i=Object(Z.a)(e[o]);a.push(y.a.createElement("span",{className:R.a.recipient,key:o},o==n-1?i:i+","))}return a}},{key:"createRecipientCount",value:function(){var e=this.state,t=e.toArray,a=e.ccArray,n=e.bccArray,o=t.concat(a,n).length;if(o&&this.recipientsCont){for(var i=this.recipientsCont.offsetWidth,r=this.recipientsCont.children,s=0,l=0,c=0;c<r.length;c++)if(i<=(s+=r[c].offsetWidth)){l=o-c;break}this.setState({moreData:l})}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isRecipientsVisible,a=e.inValideArr;t&&!(void 0===a?[]:a).length&&this.createRecipientCount()}},{key:"componentDidUpdate",value:function(e){var t=e.ccAddress,a=void 0===t?[]:t,n=e.bccAddress,o=void 0===n?[]:n,i=e.toAddress,r=void 0===i?[]:i,s=e.isRecipientsVisible;this.props.isRecipientsVisible!=s&&this.props.isRecipientsVisible&&!this.props.inValideArr.length&&this.createRecipientCount(),r.length==this.props.toAddress.length&&a.length==this.props.ccAddress.length&&o.length==this.props.bccAddress.length||!this.props.isRecipientsVisible||this.createRecipientCount()}},{key:"hideRecipients",value:function(){this.setState({moreData:0}),this.props.hideRecipients()}},{key:"replyActions",value:function(e){var t=this.props,a=t.threadId,n=t.content,o=t.thread,i="";e==q.f.getI18NValue("support.common.request.mail.replyall")?i="replyall":e==q.f.getI18NValue("support.common.request.mail.reply")?i="reply":e==q.f.getI18NValue("support.common.request.mail.forward")?i="forward":e==q.f.getI18NValue("crm.label.email")?i="replyall":e==q.f.getI18NValue("support.social.facebook.name")&&"FACEBOOK_DM"==o.channel?i="facebookDm":e==q.f.getI18NValue("support.social.facebook.name")?i="facebook":e==q.f.getI18NValue("support.social.common.tweet")?i="twitter":e==q.f.getI18NValue("support.social.common.direct.message")&&(i="twitterDm"),this.props.openEditor(a,n,o,i)}},{key:"handleFromAdressChange",value:function(e){this.setState({selectedFromAddress:e});var t=this.props.fromEmailAddress.filter(function(t){return t.id==e});this.props.changeFromEmailAddress(t[0].address)}},{key:"constructDraftObj",value:function(){var e=this.props,t=e.isDraft,a=e.draftText,n=e.saveDraft,o=e.updateDraft,i=e.deleteDraft,r=e.isCustomChannel,s=e.isFromBlueprint,l=e.thread,c=e.mode,d=e.haveForWardPermissionOnly,u=e.haveMailSendPermission;return y.a.createElement(y.a.Fragment,null,t?y.a.createElement("div",{className:R.a.moreAction+" "+(s?R.a.visHidden:"")},y.a.createElement("span",{onClick:o},a),y.a.createElement("span",{className:R.a.icnMore},y.a.createElement(M.a,{IcnName:"down1",Icnsize:"8",icnStatus:!0,listStyle:"alpha",arrowRight:"24",objValues:[{name:q.f.getI18NValue("support.common.request.mail.discard.draft"),iconName:"draftDelete",size:"13"}],onSelect:i}))):y.a.createElement(y.a.Fragment,null,!r&&!s||s&&("FACEBOOK"==l.channel||"TWITTER"==l.channel||"TWITTER_DM"==l.channel||"FACEBOOK_DM"==l.channel)?y.a.createElement("span",{className:R.a.moreAction},y.a.createElement(V.TicketsFontIcon,{name:"FACEBOOK"==l.channel||"TWITTER"==l.channel||"TWITTER_DM"==l.channel||"FACEBOOK_DM"==l.channel?"chEmail1":c,size:"12"}),d?null:y.a.createElement("span",{className:R.a.icnMore},y.a.createElement(M.a,{IcnName:"blockDownArrow",Icnsize:"8",icnStatus:!0,listStyle:"alpha",arrowLeft:"55",size:"xmini",objValues:this.constructSwtichOptions(c,l.channel),onSelect:this.replyActions}))):null,u&&!s?y.a.createElement("span",{className:R.a.moreAction},y.a.createElement("span",{onClick:n},a)):null))}},{key:"render",value:function(){var e=this,t=this.props,a=(t.mode,t.draftText,t.isDraft,t.saveDraft,t.updateDraft,t.fromEmailAddress),n=(t.deleteDraft,t.searchContact),o=t.searchMode,i=t.searchData,r=t.orgName,s=t.closeSearchPopup,l=t.isRecipientsVisible,c=(t.threadId,t.content,t.thread,t.inValideArr),d=void 0===c?[]:c,u=(t.isPeekView,t.getFromEmailAddress),m=t.openConfigurePage,p=t.haveMailSendPermission,h=t.mailConfigurations,f=t.myInfo,g=(t.isFromBlueprint,t.haveForWardPermissionOnly,t.isFromAddressFetching),v=t.isToEmpty,b=t.isCustomChannel,_=this.state,E=_.toArray,C=_.editedIndex,I=_.editedValue,A=_.editedMode,k=_.isCcVisible,N=_.isBccVisible,x=_.ccArray,D=_.bccArray,O=_.moreData,w=_.selectedFromAddress,T=h.agentNameInTicketReply,P=Object(K.e)(f.firstName,f.lastName),B=E.concat(x,D),F=[];return a.map(function(e){var t=T?P:e.displayName;F.push({id:e.id,name:'"'+t+'"<'+e.address+">"})}),w||F[0]&&(w=F[0].id),b?p?y.a.createElement(S.Container,{className:R.a.soloDraft,alignBox:"row"},y.a.createElement(S.Box,{flexible:!0}),this.constructDraftObj()):null:y.a.createElement(S.Container,{className:R.a.container},y.a.createElement(S.Box,{className:R.a.composeRow},y.a.createElement(S.Container,{align:"vertical",alignBox:"row",className:R.a.subRow},y.a.createElement(S.Box,{className:R.a.composeFlabel},q.f.getI18NValue("label.request.from")),y.a.createElement(S.Box,{className:R.a.fromAddress,flexible:!0,shrink:!0},F.length||g?y.a.createElement(ee.a,{emptyMessage:q.f.getI18NValue("support.label.no.match.found"),needBorder:!1,needLocalSearch:!0,needSearch:!0,onChange:this.handleFromAdressChange,options:F,selectedValue:w||" ",textField:"name",valueField:"id"}):y.a.createElement("div",{className:R.a.fromAlert},y.a.createElement(Q,{getFromEmailAddress:u,openConfigurePage:m}))),y.a.createElement(S.Box,{className:R.a.rightContainer},y.a.createElement("div",{className:R.a.actionCont},this.constructDraftObj())))),l&&B.length&&!d.length?y.a.createElement(S.Box,{onClick:this.hideRecipients},y.a.createElement(S.Container,{align:"vertical",alignBox:"row",className:R.a.subRow},y.a.createElement(S.Box,{className:R.a.composeFlabel},q.f.getI18NValue("support.request.history.wfalert.recipients")),y.a.createElement(S.Box,{className:R.a.recipientstheme,eleRef:function(t){e.recipientsCont=t},flexible:!0,shrink:!0},this.constructRecipients(B,O),O?y.a.createElement("span",{className:R.a.demomore},O," ",q.f.getI18NValue("crm.login.more")):null))):y.a.createElement(S.Box,{className:R.a.scrollBox,dataId:"autoId_23"},y.a.createElement(S.Container,{alignBox:"row"},y.a.createElement(S.Box,{flexible:!0},y.a.createElement("div",{className:R.a.composeRow},y.a.createElement(S.Container,{alignBox:"row",align:"vertical",className:R.a.subRow},y.a.createElement(S.Box,{className:R.a.composeFlabel},q.f.getI18NValue("crm.label.to.email")),y.a.createElement(S.Box,{className:R.a.selectLitetheme,flexible:!0},y.a.createElement(G,{changeEmailAddress:this.changeEmailAddress,closeSearchPopup:s,editedIndex:C,editedMode:A,editedValue:I,editEmail:this.editEmail,emailArr:E,formatEmailAddress:this.formatEmailAddress,mode:"to",orgName:r,removeEmail:this.removeEmail,searchContact:n,searchData:i,searchMode:o}),v?y.a.createElement("div",{className:R.a.emptyErr},q.f.getI18NValue("support.common.email.validation.message")):null))),k||x.length?y.a.createElement("div",{className:R.a.composeRow},y.a.createElement(S.Container,{alignBox:"row",align:"vertical",className:R.a.subRow},y.a.createElement(S.Box,{className:R.a.composeFlabel},q.f.getI18NValue("crm.label.cc.email")),y.a.createElement(S.Box,{className:R.a.selectLitetheme,flexible:!0},y.a.createElement(G,{changeEmailAddress:this.changeEmailAddress,closeSearchPopup:s,editedIndex:C,editedMode:A,editedValue:I,editEmail:this.editEmail,emailArr:x,formatEmailAddress:this.formatEmailAddress,mode:"cc",orgName:r,removeEmail:this.removeEmail,searchContact:n,searchData:i,searchMode:o})))):null,N||D.length?y.a.createElement("div",{className:R.a.composeRow},y.a.createElement(S.Container,{alignBox:"row",align:"vertical",className:R.a.subRow},y.a.createElement(S.Box,{className:R.a.composeFlabel},q.f.getI18NValue("crm.label.bcc.email")),y.a.createElement(S.Box,{className:R.a.selectLitetheme,flexible:!0},y.a.createElement(G,{changeEmailAddress:this.changeEmailAddress,closeSearchPopup:s,editedIndex:C,editedMode:A,editedValue:I,editEmail:this.editEmail,emailArr:D,formatEmailAddress:this.formatEmailAddress,mode:"bcc",orgName:r,removeEmail:this.removeEmail,searchContact:n,searchData:i,searchMode:o})))):null),y.a.createElement(S.Box,{className:R.a.rightContainer},l?null:y.a.createElement("div",{className:R.a.replyIcns},k||x.length?null:y.a.createElement("span",{className:R.a.textVal,onClick:this.showCc},q.f.getI18NValue("crm.label.cc.email")),N||D.length?null:y.a.createElement("span",{className:R.a.textVal,onClick:this.showBcc},q.f.getI18NValue("crm.label.bcc.email")))))))}}]),t}(y.a.Component),ae=te;te.propTypes={addEmail:C.a.func,bccAddress:C.a.array,ccAddress:C.a.array,changeEmail:C.a.func,changeFromEmailAddress:C.a.func,closeSearchPopup:C.a.func,content:C.a.string,deleteDraft:C.a.func,draftText:C.a.string,fromEmailAddress:C.a.any,getFromEmailAddress:C.a.func,haveForWardPermissionOnly:C.a.bool,haveMailSendPermission:C.a.bool,hideRecipients:C.a.func,iconName:C.a.string,inValideArr:C.a.array,isDraft:C.a.bool,isEditorFocus:C.a.bool,isFromAddressFetching:C.a.bool,isFromBlueprint:C.a.bool,isPeekView:C.a.bool,isRecipientsVisible:C.a.bool,isToEmpty:C.a.bool,mailConfigurations:C.a.object,mode:C.a.string,myInfo:C.a.object,openConfigurePage:C.a.func,openEditor:C.a.func,orgName:C.a.string,removeEmail:C.a.func,saveDraft:C.a.func,searchContact:C.a.func,searchData:C.a.array,searchMode:C.a.string,thread:C.a.any,threadId:C.a.string,toAddress:C.a.array,updateDraft:C.a.func};var ne=a(1286),oe=a.n(ne),ie=a(1287),re=a.n(ie),se=a(239),le=a.n(se),ce=function(e){function t(e){m()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={isPopupOpen:!1},a.togglePopup=a.togglePopup.bind(a),a.onActionClick=a.onActionClick.bind(a),a}return b()(t,e),h()(t,[{key:"togglePopup",value:function(e){this.setState(function(e){return{isPopupOpen:!e.isPopupOpen}}),e.stopPropagation()}},{key:"onActionClick",value:function(){var e=this.props,t=e.isDraft,a=e.sendDraft,n=e.sendReply;t?a():n()}},{key:"render",value:function(){var e=this.props,t=e.sendAndClose,a=(e.isDraft,e.isPrivateThread),n=e.isPrivateButtonEnable,o=e.togglePrivateSwitch,i=e.isStatusLocked,r=(e.havePrivateThreadConfig,e.haveForWardPermissionOnly,e.isSharedTicket),s=e.haveVisibilityChangePer,l=this.state.isPopupOpen?re.a.active:"",c=n?q.f.getI18NValue("support.request.thread.display.not.helpcenter"):q.f.getI18NValue("support.request.thread.display.helpcenter"),d=s||!i&&!r;return y.a.createElement(S.Container,{className:re.a.ticketButton,isCover:!1},y.a.createElement("div",{className:re.a.ticketAction},y.a.createElement("div",{className:re.a.content+" "+(d?re.a.haveMore:""),onClick:this.onActionClick,"data-id":"replySendBtn"},y.a.createElement("p",{className:re.a.actionType},q.f.getI18NValue("crm.button.send")),a?y.a.createElement("p",{className:re.a.subtitle},q.f.getI18NValue("support.request.private.thread")):null),d?y.a.createElement("span",{className:re.a.arrow,onClick:this.togglePopup},y.a.createElement(V.TopbandFontIcon,{name:"blockDownArrow",size:"8"})):null),y.a.createElement("div",{className:re.a.buttonAction+" "+l},s?y.a.createElement("div",{className:re.a.switchAction},y.a.createElement("p",null,y.a.createElement("span",{className:re.a.actionNotify},q.f.getI18NValue("support.department.type.internal")),y.a.createElement("span",{className:re.a.switchbox},y.a.createElement(le.a,{id:"private",name:"private",size:"small",checked:n,onChange:o}))),y.a.createElement("p",{className:re.a.actionSubtitle},c)):null,i||r?null:y.a.createElement("div",{"data-id":"sendOption"},y.a.createElement("span",{className:re.a.secondarybutton,onClick:t},q.f.getI18NValue("support.request.send.and.close")))))}}]),t}(y.a.Component),de=ce;ce.propTypes={haveForWardPermissionOnly:C.a.bool,havePrivateThreadConfig:C.a.bool,haveVisibilityChangePer:C.a.bool,isDraft:C.a.bool,isPrivateButtonEnable:C.a.bool,isPrivateThread:C.a.bool,isSharedTicket:C.a.bool,isStatusLocked:C.a.bool,sendAndClose:C.a.func,sendDraft:C.a.func,sendReply:C.a.func,togglePrivateSwitch:C.a.func};var ue=a(1019),me=a(1233),pe=a(1082),he=a(73),fe=a.n(he),ge=function(e){function t(){return m()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return b()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.closeEdtior,a=e.orgId,n=e.showAttachmentViewer,o=e.openCloudAttach,i=e.closeCloudAttach,r=e.deleleUpload,s=e.uploadAttach,l=e.removeAttachment,c=e.oldAttachments,d=e.newAttachments,u=e.sendDraft,m=e.isDraft,p=e.sendReply,h=e.sendAndClose,f=e.isPrivateThread,g=e.isPrivateButtonEnable,v=e.togglePrivateSwitch,b=e.isPeekView,_=e.haveMailSendPermission,E=e.isStatusLocked,C=e.havePrivateThreadConfig,I=e.isFromBlueprint,A=e.sendForReview,k=e.CloudAttachmentIframe,N=e.isCloudAttchOpen,x=e.addCloudAttch,D=e.haveForWardPermissionOnly,O=e.isSharedTicket,w=e.haveVisibilityChangePer,T=e.isCustomChannel,P=e.acceptsAttachments,B=e.appName,F=e.deleteDraft,R=e.sendCusomChannelReply,M=!0;return T&&!P&&(M=!1),y.a.createElement(S.Container,{alignBox:"row",align:"vertical",className:oe.a.mainContainer+" "+(I?oe.a.bluePrintLayar:"")},y.a.createElement("div",{className:oe.a.shadow}),y.a.createElement(S.Container,{alignBox:"row",dataId:"editorContainer",className:oe.a.replyBottom,isCover:!1},M?y.a.createElement(S.Box,{className:oe.a.btmDiv},y.a.createElement(S.Container,{className:oe.a.attchIcn,align:"vertical",alignBox:"row"},y.a.createElement("label",{htmlFor:"replyAttach"},y.a.createElement(V.TopbandFontIcon,{name:"attachment5",size:"16"}),y.a.createElement("input",{className:oe.a.fileCont,type:"file",onChange:s,multiple:"multiple",id:"replyAttach"})),y.a.createElement("div",{className:oe.a.attchPopup},y.a.createElement(pe.a,{label:"replyAttachLabel",boxPosition:"topRight",bottom:35,left:5,onAttchClick:s,openCloudAttach:o})))):null,y.a.createElement(S.Box,{shrink:!0,flexible:!0,className:oe.a.uploadImg},y.a.createElement(ue.a,{oldAttachments:c,newAttachments:d,deleleUpload:r,removeAttachment:l,showAttachmentViewer:n,orgId:a,from:"replyEdtior",isPeekView:b})),I?null:y.a.createElement(S.Box,{dataId:"send-options"},y.a.createElement(S.Container,{align:"vertical",alignBox:"row",isCover:!1},_?T?y.a.createElement(y.a.Fragment,null,y.a.createElement(fe.a,{palette:"primaryFilled",text:q.f.getI18NValue("support.common.request.channel.integ.sendvia",[B]),onClick:R,className:oe.a.actionBtn}),m?y.a.createElement(fe.a,{palette:"secondary",text:q.f.getI18NValue("support.common.request.mail.discard.draft",[B]),className:oe.a.actionBtn,onClick:F}):null):y.a.createElement("span",{className:oe.a.sendBtn},y.a.createElement(de,{sendDraft:u,sendReply:p,sendAndClose:h,isDraft:m,isPrivateThread:f,isPrivateButtonEnable:g,togglePrivateSwitch:v,haveMailSendPermission:_,isStatusLocked:E,havePrivateThreadConfig:C,haveForWardPermissionOnly:D,isSharedTicket:O,haveVisibilityChangePer:w})):y.a.createElement(fe.a,{palette:"primaryFilled",text:q.f.getI18NValue("support.common.save.and.send.for.review"),onClick:A,className:oe.a.actionBtn}),y.a.createElement(S.Box,null,y.a.createElement(me.a,{isCancel:!0,onClick:t}))))),N&&k?y.a.createElement(k,{addCloudAttch:x,totalLen:c.length+d.length,closeIframe:i}):null)}}]),t}(y.a.Component),ve=ge;ge.propTypes={CloudAttachmentIframe:C.a.node,addCloudAttch:C.a.func,closeCloudAttach:C.a.func,closeEdtior:C.a.func,deleleUpload:C.a.func,deleteDraft:C.a.func,haveForWardPermissionOnly:C.a.bool,haveMailSendPermission:C.a.bool,havePrivateThreadConfig:C.a.bool,haveVisibilityChangePer:C.a.bool,isCloudAttchOpen:C.a.bool,isCustomChannel:C.a.bool,isDraft:C.a.bool,isFromBlueprint:C.a.bool,isPeekView:C.a.bool,isPrivateButtonEnable:C.a.bool,isPrivateThread:C.a.bool,isSharedTicket:C.a.bool,isStatusLocked:C.a.bool,newAttachments:C.a.array,oldAttachments:C.a.array,openCloudAttach:C.a.func,orgId:C.a.string,removeAttachment:C.a.func,sendAndClose:C.a.func,sendDraft:C.a.func,sendForReview:C.a.func,sendReply:C.a.func,showAttachmentViewer:C.a.func,togglePrivateSwitch:C.a.func,uploadAttach:C.a.func};var be=a(1288),_e=a.n(be),ye=a(72),Ee=a.n(ye),Ce=function(e){function t(e){m()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={draftId:null,statusOpen:!1},a._mount=a.saveDraft=a.saveDraft.bind(a),a.sendReply=a.sendReply.bind(a),a.togglePopup=a.togglePopup.bind(a),a}return b()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this;this._mount=!0,window.addEventListener("click",function(){e._mount&&e.setState({statusOpen:!1})})}},{key:"componentWillUnmount",value:function(){this._mount=!1}},{key:"togglePopup",value:function(){this.setState(function(e){return{statusOpen:!e.statusOpen}})}},{key:"onSelect",value:function(e){var t=this.props,a=t.ticketId;(0,t.changeForumStatus)(t.channelRelatedInfo.topicId,e,a),this.togglePopup()}},{key:"sendReply",value:function(){var e=this.props,t=e.isDraft,a=e.editorId,n=e.sendReply,o=e.sendDraft,i=e.updateDraft,r=e.channelRelatedInfo,s=e.showMessage;if(""==r.forumStatus)s({type:"alert",message:q.f.getI18NValue("support.community.tickettopic.selectstatus")});else{var l=this.state.draftId,c={channel:"FORUMS",content:l?editor[l].getContent():editor[a].getContent()};t?i(function(){o()}):n(c)}}},{key:"saveDraft",value:function(){var e=this,t=this.props,a=t.isDraft,n=t.editorId,o=t.saveDraft,i=t.updateDraft,r=this.state.draftId,s=r?editor[r].getContent():editor[n].getContent();a?i({channel:"FORUMS",content:s},function(){}):o(function(){e.setState({draftId:n})})}},{key:"render",value:function(){var e=this,t=this.state.statusOpen,a=this.props,n=a.closeEdtior,o=a.isDraft,i=a.channelRelatedInfo,r=a.deleteDraft,s=i.topicType,l=i.forumStatus,c=Object(K.s)(s),d=q.f.getI18NValue("support.forum.setstatus"),u=!1;return c.forEach(function(e){l==e.value&&(d=e.label,u=!0)}),y.a.createElement(S.Container,{alignBox:"row",className:_e.a.mainContainer},y.a.createElement("div",{className:_e.a.shadow}),y.a.createElement(S.Box,{className:_e.a.forumDiv},"QUESTION"==s||"IDEA"==s||"PROBLEM"==s?y.a.createElement("div",{className:_e.a.forumStatus},y.a.createElement(Ee.a,{isAnimate:!0,isArrow:!1,isRadius:!1,size:"default",boxPosition:"topCenter",isActive:t},c.map(function(t,a){var n=t.label,o=t.value,i=n==d;return y.a.createElement("div",{className:_e.a.dropList+" "+(i?_e.a.selected:""),key:a,onClick:e.onSelect.bind(e,o)},n)})),y.a.createElement("div",{className:_e.a.container+" "+(u?_e.a.statusSel:"")},y.a.createElement("span",{className:_e.a.forumstatusText},d),y.a.createElement("span",{className:_e.a.dropDown,onClick:function(t){t.stopPropagation&&t.stopPropagation(),e.togglePopup()}},y.a.createElement(V.TopbandFontIcon,{name:"blockDownArrow",size:"8"})))):null),y.a.createElement(S.Box,null,y.a.createElement("span",{className:_e.a.postButton},y.a.createElement(fe.a,{text:q.f.getI18NValue("support.forums.posttoforums"),palette:"primaryFilled",size:"medium",onClick:this.sendReply})),y.a.createElement("span",{className:_e.a.postButton},y.a.createElement(fe.a,{text:q.f.getI18NValue("support.common.request.mail.save.draft"),palette:"secondary",size:"medium",onClick:this.saveDraft}),o?y.a.createElement("span",{className:_e.a.postButton},y.a.createElement(fe.a,{text:q.f.getI18NValue("support.common.request.mail.discard.draft"),palette:"secondary",size:"medium",onClick:r})):null),y.a.createElement("span",{className:_e.a.postButton},y.a.createElement(fe.a,{text:q.f.getI18NValue("support.label.cancel"),palette:"secondary",size:"medium",onClick:n}))))}}]),t}(y.a.Component),Ie=Ce;Ce.propTypes={changeForumStatus:C.a.func,channelRelatedInfo:C.a.object,closeEdtior:C.a.func,deleteDraft:C.a.func,editorId:C.a.string,isDraft:C.a.bool,saveDraft:C.a.func,sendDraft:C.a.func,sendReply:C.a.func,showMessage:C.a.func,ticketId:C.a.string,updateDraft:C.a.func};var Ae=a(1289),ke=a.n(Ae),Se=function(e){function t(){return m()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return b()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.openSnippet;return y.a.createElement("div",{className:ke.a.popup,onMouseUp:function(e){e.stopPropagation&&e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}},y.a.createElement(Ee.a,{isAnimate:!0,size:"small",isActive:!0,boxPosition:"bottomRight",isArrow:!0,arrowLeft:"15"},y.a.createElement(S.Container,{alignBox:"row",className:ke.a.list,onClick:e.bind(this,"list")},y.a.createElement(S.Box,{className:ke.a.icon},y.a.createElement(T,null)),y.a.createElement(S.Box,{flexible:!0},q.f.getI18NValue("support.solution.addedit.snippet"))),y.a.createElement(S.Container,{alignBox:"row",className:ke.a.list,onClick:e.bind(this,"form")},y.a.createElement(S.Box,{className:ke.a.icon},y.a.createElement(O,null)),y.a.createElement(S.Box,{flexible:!0},q.f.getI18NValue("support.module.add",[q.f.getI18NValue("support.solution.addedit.snippet")])))))}}]),t}(y.a.Component),Ne=Se;Se.propTypes={openSnippet:C.a.func};var xe,De=a(1168),Oe=a(1162),we=a(131),Te=a(17),Pe=a(242),Be=a(1222),Fe=a(1191),Re=a(74),Ve=a(24),Me=a(113),Le=a(256),je=a(174),ze=a(1028),Ke=(a(1290),a(87)),Ue=a(28),He=a(1235),Ze=a(22),qe=a(20),We=a.n(qe),Ge=a(1291),Ye=a.n(Ge),$e=a(65),Je=a(458),Qe=function(e){function t(e){return m()(this,t),g()(this,(t.__proto__||d()(t)).call(this,e))}return b()(t,e),h()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.from,n=t.limit,o=t.isFetching,i=t.searchStr,r=t.handleSearch,s=t.templeData,l=t.insertEmailTemplateData,c=t.noMoreData,d=t.fetchData,u=t.handleRefresh,m=We()(s),p=m.length;return y.a.createElement("div",{className:Ye.a.popup,onClick:function(e){e.stopPropagation&&e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}},y.a.createElement(Ee.a,{isAnimate:!0,size:"xxlarge",boxPosition:"bottomRight",isActive:!0,arrowLeft:"55"},y.a.createElement($e.Card,{from:a,limit:n,noMoreData:c,fetchData:d,noNeedUpScroll:!0},y.a.createElement($e.CardHeader,{className:Ye.a.viewpopsearch},y.a.createElement(j.a,{placeHolder:q.f.getI18NValue("crm.label.search"),value:i,onChange:r})),y.a.createElement($e.CardContent,{className:Ye.a.listCont},p?m.map(function(t,a){var n=s[t],o=n.list,i=void 0===o?[]:o,r=n.name;return i.length?y.a.createElement("div",{key:a},y.a.createElement("div",{className:Ye.a.title},r),i.map(function(t,a){var n=t.templateId,o=t.templateName;return y.a.createElement("div",{className:Ye.a.list,"data-title":o,onClick:l.bind(e,n),key:a},o)}),p!=a+1?y.a.createElement("div",{className:Ye.a.seperate}):null):null}):o?y.a.createElement(Je.a,null):y.a.createElement("div",{className:Ye.a.emptyTxt},y.a.createElement("div",{className:Ye.a.emtyIcon},y.a.createElement(V.CommonFontIcon,{name:"exclamationThincircle",size:"30"})),q.f.getI18NValue("support.module.empty.message",[q.f.getI18NValue("support.request.template")]))),y.a.createElement($e.CardFooter,{className:Ye.a.footer},y.a.createElement("span",{className:Ye.a.footerOption,onClick:u},y.a.createElement("span",{className:Ye.a.updateIcon},y.a.createElement(V.TopbandFontIcon,{name:"update",size:"16"})),q.f.getI18NValue("crm.button.refresh")),y.a.createElement("span",{className:Ye.a.footerOption},y.a.createElement("span",{className:Ye.a.updateIcon},"+"),q.f.getI18NValue("crm.button.create.new.email.template"))))))}}]),t}(_.Component),Xe=Qe;Qe.propTypes=(xe={fetchData:C.a.func,from:C.a.string,handleRefresh:C.a.func,handleSearch:C.a.func},o()(xe,"handleSearch",C.a.func),o()(xe,"insertEmailTemplateData",C.a.func),o()(xe,"isFetching",C.a.bool),o()(xe,"limit",C.a.string),o()(xe,"noMoreData",C.a.bool),o()(xe,"searchStr",C.a.string),o()(xe,"templeData",C.a.object),xe);var et=function(e){function t(e){m()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={from:0,limit:50,searchStr:"",templeData:{},templatesList:[]},a.getEmailTemplates=a.getEmailTemplates.bind(a),a.fetchData=a.fetchData.bind(a),a.handleSearch=Object(we.a)(a.handleSearch.bind(a),100,!0),a.handleRefresh=a.handleRefresh.bind(a),a}return b()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.getEmailTemplates(0)}},{key:"getEmailTemplates",value:function(e){var t=this,a=this.state,n=a.limit,o=a.searchStr,i=a.templatesList,r=this.props,s=r.deptId,l=r.getEmailTemplates;return this.setState({isFetching:!0,from:e}),l(s,"tickets",e,n,o).then(function(e){var a=!e.data.length||e.data.length<n,o=e.data.length?i.concat(e.data):i;t.setState({isFetching:!1,noMoreData:a,templatesList:o}),t.constructTemplateData(o)},function(){t.setState({isFetching:!1,noMoreData:!0})})}},{key:"constructTemplateData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.length&&e.forEach(function(e){var a=e.folder,n=a.folderId,o=a.folderName,i=(t[n]||{}).list,s=(void 0===i?[]:i).concat([e]),l=r()({},t[n],{list:s,name:o});t[n]=l}),this.setState({templeData:t})}},{key:"handleSearch",value:function(e){var t=this;this.setState({searchStr:e,noMoreData:!1,templatesList:[]},function(){t.getEmailTemplates(0)})}},{key:"fetchData",value:function(e){return this.getEmailTemplates(e)}},{key:"handleRefresh",value:function(){this.handleSearch("")}},{key:"render",value:function(){var e=this.state,t=e.from,a=e.limit,n=e.templeData,o=e.searchStr,i=e.isFetching,r=e.noMoreData,s=this.props.insertEmailTemplateData;return y.a.createElement(Xe,{from:t,limit:a,noMoreData:r,fetchData:this.fetchData,isFetching:i,templeData:n,searchStr:o,insertEmailTemplateData:s,handleSearch:this.handleSearch,handleRefresh:this.handleRefresh})}}]),t}(_.Component);et.propTypes={deptId:C.a.string,getEmailTemplates:C.a.func,insertEmailTemplateData:C.a.func};var tt,at=Object(I.connect)(function(e,t){return{}},{getEmailTemplates:Fe.a})(et),nt=function(e){function t(e){m()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.state={newAttachments:[],isAttachmentUploading:!1,draftText:q.f.getI18NValue("support.common.request.mail.save.draft"),selectedFromAddress:"",searchMode:"",searchData:[],isRecipientsVisible:!0,isPrivateButtonEnable:!0,isTemplateOpen:!1,isSnippetActionOpen:!1},a.draftTimeLimit=6e4,a.constructEditorData=a.constructEditorData.bind(a),a.constructFromAddress=a.constructFromAddress.bind(a),a.saveDraft=a.saveDraft.bind(a),a.sendForReview=a.sendForReview.bind(a),a.updateDraft=a.updateDraft.bind(a),a.uploadAttach=a.uploadAttach.bind(a),a.deleleUpload=a.deleleUpload.bind(a),a.removeAttachment=a.removeAttachment.bind(a),a.addEmail=a.addEmail.bind(a),a.changeEmail=a.changeEmail.bind(a),a.removeEmail=a.removeEmail.bind(a),a.getEmailObj=a.getEmailObj.bind(a),a.changeFromEmailAddress=a.changeFromEmailAddress.bind(a),a.sendDraft=a.sendDraft.bind(a),a.searchContact=Object(we.a)(a.searchContact.bind(a),100,!0),a.closeSearchPopup=a.closeSearchPopup.bind(a),a.hideRecipients=a.hideRecipients.bind(a),a.editorFocus=a.editorFocus.bind(a),a.editorCallback=a.editorCallback.bind(a),a.sendReply=a.sendReply.bind(a),a.sendAndClose=a.sendAndClose.bind(a),a.togglePrivateSwitch=a.togglePrivateSwitch.bind(a),a.checkIsPrivateThread=a.checkIsPrivateThread.bind(a),a.bindKeyDown=a.bindKeyDown.bind(a),a.insertEmailTemplateData=a.insertEmailTemplateData.bind(a),a.openSnippet=a.openSnippet.bind(a),a.getFromEmailAddress=a.getFromEmailAddress.bind(a),a.hidePopup=a.hidePopup.bind(a),a.createDraftTimer=a.createDraftTimer.bind(a),a.addCloudAttch=a.addCloudAttch.bind(a),a.openCloudAttach=a.openCloudAttach.bind(a),a.closeCloudAttach=a.closeCloudAttach.bind(a),a.constructReplyHeader=a.constructReplyHeader.bind(a),a.blurCallback=a.blurCallback.bind(a),a.deleteDraftConfirmation=a.deleteDraftConfirmation.bind(a),a.deleteDraft=a.deleteDraft.bind(a),a.closeAlert=a.closeAlert.bind(a),a.sendCusomChannelReply=a.sendCusomChannelReply.bind(a),a}return b()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.constructEditorData(),this.constructFromAddress(),document.addEventListener("click",this.hidePopup),this.setDefaultFromAddress()}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.state,o=n.toAddress,i=n.ccAddress,r=n.bccAddress;n.noNeedCheckCollision;t.toAddress==o&&t.ccAddress==i&&t.bccAddress==r||this.checkIsPrivateThread(),e.replyMode!=this.props.replyMode&&this.setState({ccAddress:[]},function(){a.constructEditorData(function(){a.constructCcAddress()})}),this.props.fromAddress!=e.fromAddress&&this.props.fromAddress.length&&this.setDefaultFromAddress(),e.replyingUsers.length!=this.props.replyingUsers.length&&this.props.replyingUsers.length&&this.setState({alertMode:"collisionReply"})}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.state.replyMode;e.replyMode!=a&&this.setState({chageEditorContent:!0},function(){setTimeout(function(){t.setState({chageEditorContent:!1})},100)})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hidePopup)}},{key:"setDefaultFromAddress",value:function(){var e=this.props.fromAddress;if(e.length){var t=e[0].address;this.setState({selectedFromAddress:t});var a=this.props.setReplyData;a&&a("fromEmailAddress",t)}}},{key:"constructEditorData",value:function(e){var t=this.props,a=t.solutionAttachments,n=void 0===a?[]:a,o=t.havePrivateThreadConfig,i=t.replyThread,r=t.replyMode,s=t.contactEmail,l=t.setReplyData,c=(t.fromAddress,i.attachments),d=void 0===c?[]:c,u=i.author,m=void 0===u?{}:u,p=i.fromEmailAddress,h=i.direction,f=i.to,g=void 0===f?[]:f,v=i.cc,b=void 0===v?[]:v,_=i.bcc,y=void 0===_?[]:_,E=i.status,C=i.channel,I=i.visibility;d=n.length?n:d;var A=[];if(((d="editDraft"==r||"forward"==r?d:[]).length||n.length)&&("editDraft"==r||"forward"==r))for(var k=0;k<d.length;k++)A.push(d[k].id);var S=m.email&&"FEEDBACK"!=C?[m.email]:p?[p]:[];"out"==h&&(S=g.length?Object(Z.d)(g):[]),S="forward"!=r?S:[];for(var N=b.length&&"forward"!=r?Object(Z.d)(b):[],x=y.length&&"editDraft"==r?Object(Z.d)(y):[],D=S.concat(N,x),O=[],w=0;w<S.length;w++)Object(Z.e)(S[w])||O.push(w);var T="forward"==r,P=void 0,B=!0;T?(P=!0,B=!1):o?P=-1==D.indexOf(s):(P="private"==I,B=!1),l&&l("toAddress",S),l&&l("ccAddress",N),l&&l("bccAddress",x),l&&l("isPrivateThread",P),this.setState({attachmentIds:A,oldAttachments:d,isDraft:"DRAFT"==E,toAddress:S,ccAddress:N,bccAddress:x,replyMode:r,isPrivateThread:P,inValideArr:O,isRecipientsVisible:S.length,isForwardReply:T,haveVisibilityChangePer:B},function(){e&&e()})}},{key:"constructFromAddress",value:function(){var e=this,t=this.props,a=t.replyThread,n=(t.deptId,t.haveForWardPermissionOnly,t.channelRelatedInfo);"FORUMS"==a.channel&&!n.isTopicDeleted||(this.setState({isFromAddressFetching:!0}),this.getFromEmailAddress().then(function(t){var a=function(){e.setState({isFromAddressFetching:!1}),e.constructCcAddress()};t&&t.data.res&&204==t.data.res.responseStatus?e.getFromEmailAddress(!0).then(a):a()}))}},{key:"getFromEmailAddress",value:function(e){var t=this.props,a=t.getFromEmailAddress,n=t.deptId;return a(n=e?"allDepartment":n)}},{key:"constructCcAddress",value:function(){var e=this.props,t=e.haveForWardPermissionOnly,a=e.setReplyData,n=e.mailConfigurations,o=(e.secondaryContacts,e.contacts,e.fromAddress),i=e.replyMode;if(n.autoCCToMailbox&&!t&&"forward"!=i){var r=this.state.ccAddress;if(-1==r.indexOf(o[0].address)){var s=[].concat(l()(r),[o[0].address],l()(this.constructSecondaryContactEmails()));this.setState({ccAddress:s}),a&&a("ccAddress",s)}}}},{key:"constructSecondaryContactEmails",value:function(){var e=this.props,t=e.secondaryContacts,a=void 0===t?[]:t,n=e.contacts,o=[];a.length&&Object(K.h)(a,n).forEach(function(e){var t=e.firstName,a=e.lastName,n=e.email,i=Object(K.e)(t,a);o.push(i+"<"+n+">")});return o}},{key:"hidePopup",value:function(){this.setState({isTemplateOpen:!1,isSnippetActionOpen:!1})}},{key:"checkIsPrivateThread",value:function(){var e=this.state,t=e.toAddress,a=void 0===t?[]:t,n=e.ccAddress,o=void 0===n?[]:n,i=e.bccAddress,r=void 0===i?[]:i,s=e.isForwardReply,l=e.isPrivateButtonEnable,c=this.props,d=c.havePrivateThreadConfig,u=c.contactEmail,m=c.replyThread,p=void 0===m?{}:m,h=c.setReplyData,f=a.concat(o,r),g=!0,v=!0;if(s)g=!0,v=!1;else if(d)if(l)for(var b=0;b<f.length;b++){if(Object(Z.b)(f[b])==u){g=!1,v=!1;break}v=!0}else g=!1;else g="private"==p.visibility,v=!1;this.setState({isPrivateThread:g,haveVisibilityChangePer:v}),h&&h("isPrivateThread",g)}},{key:"addEmail",value:function(e,t){var a=this,n=this.props.setReplyData;if("to"==t){var o=[].concat(l()(this.state.toAddress),[e]);this.setState({toAddress:o},function(){a.checkEmailValide()}),n&&n("toAddress",o)}else if("cc"==t){var i=[].concat(l()(this.state.ccAddress),[e]);this.setState({ccAddress:i},function(){a.checkEmailValide()}),n&&n("ccAddress",i)}else if("bcc"==t){var r=[].concat(l()(this.state.bccAddress),[e]);this.setState({bccAddress:r},function(){a.checkEmailValide()}),n&&n("bccAddress",r)}}},{key:"checkEmailValide",value:function(){var e=this.state,t=e.toAddress,a=e.ccAddress,n=e.bccAddress,o=this.props.contact.email;if(o&&this.props.haveForWardPermissionOnly){var i=!0;if(t.forEach(function(e){Object(Z.b)(e)==o&&(i=!1)}),i&&a.forEach(function(e){Object(Z.b)(e)==o&&(i=!1)}),i&&n.forEach(function(e){Object(Z.b)(e)==o&&(i=!1)}),!i){var r=this.props,s=r.showMessage,l=r.moduleMeta;return s({type:"alert",message:q.f.getI18NValue("support.ticketshare.reply.error",[l.tickets.singularLabel])}),!1}return!0}return!0}},{key:"changeEmail",value:function(e,t,a){var n=this.props.setReplyData;if("to"==a){var o=this.state.inValideArr.filter(function(e){return e!==t});this.setState(function(a){var i=a.toAddress.slice();return i[t]=e,n&&n("toAddress",i),{toAddress:i,inValideArr:o}})}else"cc"==a?this.setState(function(a){var o=a.ccAddress.slice();return o[t]=e,n&&n("ccAddress",o),{ccAddress:o}}):"bcc"==a&&this.setState(function(a){var o=a.bccAddress.slice();return o[t]=e,n&&n("bccAddress",o),{bccAddress:o}})}},{key:"removeEmail",value:function(e,t,a){var n=this.props.setReplyData;if("to"==t){var o=this.state,i=o.toAddress,r=o.inValideArr.filter(function(t){return t!==e});i=[].concat(l()(i.slice(0,e)),l()(i.slice(e+1))),n&&n("toAddress",i),this.setState({toAddress:i,inValideArr:r},function(){a&&a()})}else if("cc"==t){var s=this.state.ccAddress;s=[].concat(l()(s.slice(0,e)),l()(s.slice(e+1))),this.setState({ccAddress:s},function(){a&&a()}),n&&n("ccAddress",s)}else if("bcc"==t){var c=this.state.bccAddress;c=[].concat(l()(c.slice(0,e)),l()(c.slice(e+1))),this.setState({bccAddress:c},function(){a&&a()}),n&&n("bccAddress",c)}}},{key:"openCloudAttach",value:function(){this.setState({isCLoudOpen:!0}),this.props.openCloudAttach()}},{key:"closeCloudAttach",value:function(){this.setState({isCLoudOpen:!1})}},{key:"addCloudAttch",value:function(e,t,a){var n=this,o=this.state,i=o.newAttachments,s=o.oldAttachments.length+i.length+a,l={index:s,href:null,isPreview:!0};this.setState(function(e){var t=r()({},e);return t.newAttachments.push(l),t}),this.props.uploadCloudAttachment(e,s,function(e,t){var a=n.state.newAttachments.map(function(a){return a.index===t?r()({},a,{percentComplete:e}):a});n.setState({newAttachments:a})}).then(function(e){var t=e.data,a=n.state.newAttachments.map(function(e){return e.index===t.data.index?t.data:e});n.setState({newAttachments:a}),n.setState(function(e){var a=r()({},e);a.attachmentIds.push(t.data.id);var o=n.props.setReplyData;return o&&o("replyAttachmentIds",a.attachmentIds),a}),n.state.isDraft?n.updateDraft():n.saveDraft()},function(){n.setState(function(e){var t=r()({},e);return t.newAttachments=t.newAttachments.filter(function(e){return s!==e.index}),t})})}},{key:"uploadAttach",value:function(e){var t=this,a=this.state,n=a.newAttachments,o=a.oldAttachments.length+n.length,i=e.target?e.target.files:e,s=i.length,l=Object(je.n)(i,o),c=l.inValidArray,d=l.validArray,u=this.props.showMessage;if(l.isCountExceeds)u({type:"alert",message:q.f.getI18NValue("support.attachments.count.exceeds",[10])});else{if(c)for(var m=0;m<c.length;m++){var p=c[m];p.isUnSupported&&u({type:"alert",message:q.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted")}),p.isFileNameSizeInvalid&&u({type:"alert",message:q.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation")}),p.isEmpty&&u({type:"alert",message:q.f.getI18NValue("support.request.empty.attachment.message")}),p.isAttachSizeExceeded&&u({type:"alert",message:q.f.getI18NValue("support.feedback.uploaded.file.exceeds.20mb")})}d&&function(){var e=0;t.setState({isAttachmentUploading:!0});for(var a=function(a){var n=d[a],i=new FormData;i.append("file",n);var l=o+a,u=Object(je.f)(n,l);t.setState(function(e){var t=r()({},e);return t.newAttachments.push(u),t}),t.props.uploadAttach(i,l,function(e,a){var n=t.state.newAttachments.map(function(t){return t.index===a?r()({},t,{percentComplete:e}):t});t.setState({newAttachments:n})}).then(function(a){var n=a.data;e+=1;var o=t.state.newAttachments.map(function(e){return e.index===n.data.index?n.data:e});t.setState({newAttachments:o}),t.setState(function(e){var a=r()({},e);a.attachmentIds.push(n.data.id);var o=t.props.setReplyData;return o&&o("replyAttachmentIds",a.attachmentIds),a}),e+c.length==s&&(t.state.isDraft?t.updateDraft():t.saveDraft(),t.setState({isAttachmentUploading:!1}))},function(){t.setState(function(e){var t=r()({},e);return t.newAttachments=t.newAttachments.filter(function(e){return l!==e.index}),t})})},n=0;n<d.length;n++)a(n)}()}e.target&&(e.target.value="")}},{key:"deleleUpload",value:function(e){var t=this;this.props.deleleUpload(e).then(function(){t.setState(function(a){var n=r()({},a);n.newAttachments=n.newAttachments.filter(function(t){return e!==t.id}),n.attachmentIds=n.attachmentIds.filter(function(t){return e!==t});var o=t.props.setReplyData;return o&&o("replyAttachmentIds",n.attachmentIds),n})})}},{key:"removeAttachment",value:function(e){var t=this;this.setState(function(a){var n=r()({},a);n.oldAttachments=n.oldAttachments.filter(function(t){return e!==t.id}),n.attachmentIds=n.attachmentIds.filter(function(t){return e!==t});var o=t.props.setReplyData;return o&&o("replyAttachmentIds",n.attachmentIds),n})}},{key:"getEmailObj",value:function(){var e=this.state,t=e.toAddress,a=e.ccAddress,n=e.bccAddress,o="",i="",r="";if(t.length)for(var s=0;s<t.length;s++)o+=0==s?t[s]:","+t[s];if(a.length)for(var l=0;l<a.length;l++)i+=0==l?a[l]:","+a[l];if(n.length)for(var c=0;c<n.length;c++)r+=0==c?n[c]:","+n[c];return{toArr:o,ccArr:i,bccArr:r}}},{key:"saveDraft",value:function(){var e=this;if(this.props.haveMailSendPermission&&this.checkEmailValide()){if(this.state.inValideArr.length)return void this.setState({isToEmpty:!0});this.setState({draftText:"Saving draft...",isToEmpty:!1});var t=this.props,a=(t.ticketId,t.editorId),n=t.saveDraft,o=t.revertIsEditorChanged,i=t.isEditorChanged,r=t.isCustomChannel,s=t.channelInfo,l=this.state,c=l.attachmentIds,d=l.selectedFromAddress,u=editor[a].getContent(),m=this.getEmailObj(),p={channel:"EMAIL",attachmentIds:c,to:m.toArr,cc:m.ccArr,bcc:m.bccArr,fromEmailAddress:d,contentType:"html",content:u};if(r){var h="html",f=s.code;s.replyConfig.contentTypes.includes("text/html")||(h="plaintext"),p={content:u,channel:f,contentType:h,attachmentIds:c}}n(p,function(t){i&&o();var n=q.f.userDateFormat(new Date(t.data.createdTime),{},"lateby","left",!1,function(){return"hh:mm A"});e.setState({draftText:"Saved @ "+n,isDraft:!0,draftId:a})})}}},{key:"sendForReview",value:function(){if(this.checkEmailValide()){var e=this.props,t=(e.ticketId,e.editorId),a=e.saveDraft,n=e.sendForReview,o=e.revertIsEditorChanged,i=e.isEditorChanged,r=e.replyThread,s=e.updateDraft,l=e.isCustomChannel,c=e.channelInfo,d=this.state,u=d.attachmentIds,m=d.selectedFromAddress,p=editor[t].getContent(),h=this.getEmailObj(),f={channel:"EMAIL",attachmentIds:u,to:h.toArr,cc:h.ccArr,bcc:h.bccArr,fromEmailAddress:m,contentType:"html",content:p};if(l){var g="html",v=c.code;c.replyConfig.contentTypes.includes("text/html")||(g="plaintext"),f={content:p,channel:v,contentType:g}}"DRAFT"==r.status?s(f,function(e){i&&o(),n()}):a(f,function(e){i&&o(),n()})}}},{key:"updateDraft",value:function(){var e=this;if(this.props.haveMailSendPermission&&this.checkEmailValide()){this.setState({draftText:q.f.getI18NValue("support.common.request.mail.saving.draft")+"...\n        "});var t=this.props,a=(t.ticketId,t.editorId),n=t.updateDraft,o=t.revertIsEditorChanged,i=t.isEditorChanged,r=t.isCustomChannel,s=t.channelInfo,l=this.state,c=l.attachmentIds,d=l.selectedFromAddress,u=l.draftId,m=u?editor[u].getContent():editor[a].getContent(),p=this.getEmailObj(),h={channel:"EMAIL",attachmentIds:c,to:p.toArr,cc:p.ccArr,bcc:p.bccArr,fromEmailAddress:d,contentType:"html",content:m};if(r){var f="html",g=s.code;s.replyConfig.contentTypes.includes("text/html")||(f="plaintext"),h={content:m,channel:g,contentType:f,attachmentIds:c}}n(h,function(t){i&&o();var n=q.f.userDateFormat(new Date(t.data.createdTime),{},"lateby","left",!1,function(){return"hh:mm A"});e.setState({draftText:q.f.getI18NValue("support.social.saved")+" @ "+n,isDraft:!0,draftId:u||a})})}}},{key:"changeFromEmailAddress",value:function(e){var t=this.props,a=t.haveForWardPermissionOnly;if((t.mailConfigurations||{}).autoCCToMailbox&&!a){var n=this.state,o=n.ccAddress,i=n.selectedFromAddress,r=o.indexOf(i);r>-1?-1==o.indexOf(e)&&(o[r]=e):o.push(e),this.setState({ccAddress:o});var s=this.props.setReplyData;s&&s("ccAddress",o)}this.setState({selectedFromAddress:e});var l=this.props.setReplyData;l&&l("fromEmailAddress",e)}},{key:"sendDraft",value:function(e){if(this.props.haveMailSendPermission&&this.checkEmailValide()){if(!this.state.toAddress.length)return void this.setState({isToEmpty:!0});this.setState({isToEmpty:!1});var t=this.props,a=t.editorId,n=t.updateDraft,o=t.sendDraft,i=t.revertIsEditorChanged,r=t.isEditorChanged,s=this.state,l=s.attachmentIds,c=s.selectedFromAddress,d=s.draftId,u=s.isPrivateThread,m=s.isPrivateButtonEnable,p=d?editor[d].getContent():editor[a].getContent(),h=this.getEmailObj(),f={channel:"EMAIL",attachmentIds:l,to:h.toArr,cc:h.ccArr,bcc:h.bccArr,fromEmailAddress:c,contentType:"html",content:p},g=u&&m;n(f,function(t){o(g,function(){r&&i(),"function"==typeof e&&e()})})}}},{key:"sendReply",value:function(e,t){if(this.props.haveMailSendPermission&&this.checkEmailValide()){if(!this.state.toAddress.length||this.state.inValideArr.length)return void this.setState({isToEmpty:!0});this.setState({isToEmpty:!1});var a=this.props,n=a.editorId,o=(a.updateDraft,a.sendReply),i=a.replyMode,r=a.revertIsEditorChanged,s=a.isEditorChanged,l=this.state,c=l.attachmentIds,d=l.selectedFromAddress,u=l.isPrivateThread,m=l.isPrivateButtonEnable,p=editor[n].getContent(),h=this.getEmailObj();o({channel:"EMAIL",attachmentIds:c,to:h.toArr,cc:h.ccArr,bcc:h.bccArr,fromEmailAddress:d,contentType:"html",content:p,isForward:"forward"==i},u&&m,e,function(){s&&r(),"function"==typeof t&&t()})}}},{key:"sendAndClose",value:function(){var e=this.props,t=e.isDraftThread,a=e.closeTicket,n=e.haveEditPermission;t?this.sendDraft(function(){n&&a()}):this.sendReply(!0,function(){n&&a()})}},{key:"sendCusomChannelReply",value:function(){var e=this.props,t=e.editorId,a=e.sendReply,n=(e.revertIsEditorChanged,e.isEditorChanged,e.channelInfo),o=this.state.attachmentIds,i=editor[t].getContent(),r=(this.getEmailObj(),"html"),s=n.code;n.replyConfig.contentTypes.includes("text/html")||(r="plaintext"),a({content:i,channel:s,contentType:r,attachmentIds:o})}},{key:"searchContact",value:function(e,t){var a=this;this.setState({searchMode:e}),this.props.searchContact(t).then(function(e){e.data.list.length?a.setState({searchData:e.data.list}):a.setState({searchData:"noData"})})}},{key:"closeSearchPopup",value:function(){this.setState({searchMode:"",searchData:[]})}},{key:"hideRecipients",value:function(){this.setState({isRecipientsVisible:!1})}},{key:"blurCallback",value:function(){this.setState({isEditorFocus:!1})}},{key:"editorFocus",value:function(){var e=this.state.toAddress,t=void 0===e?[]:e;this.setState({isTemplateOpen:!1,isSnippetActionOpen:!1}),t.length?this.setState({isRecipientsVisible:!0}):this.setState({isRecipientsVisible:!1}),this.setState({isEditorFocus:!0})}},{key:"editorCallback",value:function(e){var t=this,a=this.props,n=a.ticketId,o=a.publishUserAction,i=(a.editorId,a.getSnippetList),r=(a.ticket,a.isPeekView,a.isCustomChannel),s=a.channelInfo;r&&(s.replyConfig.contentTypes.includes("text/html")||e.toolbardiv.querySelectorAll(".KB_Editor_Richtext,.ze_plain")[0].remove());var l=this.state.toAddress;(void 0===l?[]:l).length?this.setState({isRecipientsVisible:!0}):this.setState({isRecipientsVisible:!1}),o(n,"reply",WebMessanger.getRawSid&&WebMessanger.getRawSid()),i(),this.bindKeyDown();var c=document.getElementsByClassName("TemplateIcon")[0],d=document.getElementsByClassName("SnippetIcon")[0];c.addEventListener("mouseup",function(e){e.stopPropagation(),t.setState({isTemplateOpen:!0,isSnippetActionOpen:!1})}),d.addEventListener("mouseup",function(e){e.stopPropagation(),t.setState({isSnippetActionOpen:!0,isTemplateOpen:!1})})}},{key:"bindKeyDown",value:function(){var e=this,t=this.props.editorId,a=editor[t];a.doc.onkeydown=function(t){var n=t.keyCode,o=t.shiftKey,i=t.altKey,r=t.ctrlKey,s=t.metaKey;if(9===n){t.preventDefault(),t.stopPropagation();for(var l=e.props,c=l.snippetData,d=l.snippets,u=l.ticket,m=l.contact,p=l.account,h=l.agent,f=c.snippetIds,g=[],v=0;v<f.length;v++){d[f[v]]&&g.push(d[f[v]])}var b=Object(ze.b)(a._getSelection(),a.doc,a,g).content;b=Object(ze.f)(b,u,m,p,h),a.insertHTML(b)}if(!(o||i||r||s||9==n||20==n||33==n||34==n||37==n||38==n||39==n||40==n)){e.setState({contentModified:!0},function(){e.createDraftTimer()});var _=e.props,y=_.isEditorChanged,E=_.setIsEditorChanged;!y&&E()}}}},{key:"createDraftTimer",value:function(){var e=this;setTimeout(function(){e.state.contentModified&&(e.state.isDraft?e.updateDraft():e.saveDraft(),e.setState({contentModified:!1}))},this.draftTimeLimit)}},{key:"togglePrivateSwitch",value:function(){var e=this;this.setState(function(e){return{isPrivateButtonEnable:!e.isPrivateButtonEnable}},function(){e.checkIsPrivateThread()})}},{key:"insertEmailTemplateData",value:function(e){var t=this,a=this.props,n=a.getTemplateContent,o=(a.editorId,a.ticketId),i=a.isEditorChanged,r=a.setIsEditorChanged;n(e,o).then(function(e){var a=e.data.res.body;new RegExp("<(\"[^\"]*\"|'[^']*'|[^'\">])*>").test(a)||(a=a.replace(/\n/g,"<br/>")),Object(ze.c)(t.props.editorId,a),t.setState({contentModified:!0},function(){t.createDraftTimer()}),!i&&r(),t.setState({isTemplateOpen:!1})})}},{key:"openSnippet",value:function(e){this.setState({isSnippetActionOpen:!1});var t=this.props,a=t.openSnippet;a(e,t.editorId)}},{key:"constructReplyHeader",value:function(){var e=this.props,t=e.replyThread,a=e.replyMode,n=e.ticket,o=e.ticketId,i=e.editorId,r=e.myInfo,s=e.isCustomChannel,l=t.author,c=t.to,d=t.cc,u=t.from,m=q.f.userDateFormat(new Date(t.createdTime),{},"lateby","left",!1,function(){return"DDD, DD MMM YYYY HH:mm:ss"}),p=-Ke.a[r.timeZone];p=((p=parseInt(p))<0?"+":"-")+Object(Ue.g)(parseInt(Math.abs(p/60)),2)+Object(Ue.g)(Math.abs(p%60),2);var h="";if(o!=i){var f=s?u:'"'+l.name+'" < '+l.email+" > ";h="forward"==a?"<div>\n          <div>============ "+q.f.getI18NValue("support.mail.header.forwarded.message")+" ============<br></div>\n          <div>"+q.f.getI18NValue("support.request.from.emailid")+":  "+Object(K.k)(f)+"<br></div>\n          <div>"+q.f.getI18NValue("crm.label.to.email")+": "+Object(K.k)(c)+"<br></div>\n          <div>"+q.f.getI18NValue("crm.label.cc.email")+": "+Object(K.k)(d)+"<br></div>\n          <div>"+q.f.getI18NValue("crm.events.date")+": "+m+" "+p+" <br></div>\n          <div>"+q.f.getI18NValue("crm.label.subject")+": "+Object(K.k)(n.subject)+"</div>\n          <div>============ "+q.f.getI18NValue("support.mail.header.forwarded.message")+" ============<br></div>\n        </div><br>":"<div>---- "+q.f.getI18NValue("support.on")+" "+m+" "+p+" <b> "+Object(K.k)(f)+" </b> "+q.f.getI18NValue("suppot.mail.header.wrote")+" ---- <br></div><br>"}return h}},{key:"deleteDraftConfirmation",value:function(){this.setState({alertMode:"deleteDraft"})}},{key:"deleteDraft",value:function(){this.props.deleteDraft(),this.closeAlert()}},{key:"closeAlert",value:function(){this.setState({alertMode:null})}},{key:"render",value:function(){var e=this.props,t=e.editorId,a=e.replyContent,n=e.replyThread,o=e.replyMode,i=e.orgName,r=e.orgId,s=e.showAttachmentViewer,l=e.closeEdtior,c=e.openEditor,d=e.signatureObj,u=void 0===d?{}:d,m=e.linkHolder,p=e.solutionContent,h=e.saveDraft,f=e.updateDraft,g=e.isDraftThread,v=e.sendReply,b=e.sendDraft,_=e.replyingUsers,E=e.agents,C=e.ticketId,I=e.isPeekView,A=e.haveMailSendPermission,x=e.channelRelatedInfo,D=e.mailConfigurations,w=e.myInfo,P=e.isStatusLocked,F=e.havePrivateThreadConfig,R=e.isFromBlueprint,V=e.isCloudAttchOpen,M=e.haveForWardPermissionOnly,L=e.isSharedTicket,j=e.uploadAttach,z=e.fromAddress,U=e.isCustomChannel,H=e.channelInfo,Z=e.changeForumStatus,q=e.showMessage,W=e.deptId,G=this.state,Y=G.newAttachments,$=G.oldAttachments,J=G.draftText,Q=G.toAddress,X=G.ccAddress,ee=G.bccAddress,te=G.searchMode,ne=G.searchData,oe=G.isRecipientsVisible,ie=G.isPrivateThread,re=G.haveVisibilityChangePer,se=G.isPrivateButtonEnable,le=G.inValideArr,ce=G.isTemplateOpen,de=G.isSnippetActionOpen,ue=G.isCLoudOpen,me=G.chageEditorContent,pe=G.isEditorFocus,he=G.isFromAddressFetching,fe=G.isToEmpty,ge=G.alertMode,be=n&&"DRAFT"==n.status,_e="forum"==o&&!x.isTopicDeleted,ye=H.replyConfig,Ee=H.appName,Ce=!0,Ae=!0,ke=void 0;if(U){ye.contentTypes;var Se=ye.includeQuotedMessage,xe=ye.acceptsAttachments;ye.contentTypes.includes("text/html")||(ke="plaintext"),Ae=Se,Ce=xe}var we=a;if(""!=we&&"<html><body><div></div></body></html>"!=we&&!be){"TWILIO"==n.channel&&Object(K.G)(n.content)&&(we=k.a.renderToStaticMarkup(y.a.createElement(De.a,{thread:n})));var Te=this.constructReplyHeader();we=Ae?'<br><blockquote style="border-left: 1px dotted #e5e5e5;margin-left:5px;padding-left: 5px;">'+Te+"<div>"+we+"</div></blockquote>":""}return _e?we="":(be||(u.isActive&&u.signature&&!be&&(we="<br>"+u.signature+we),m&&"forward"!=o&&Ae&&(we="<div><br></div><div><br></div>"+m+"<div><br></div>"+we+"<div><br></div>")),"string"==typeof p&&(we=p+we)),y.a.createElement(S.Container,null,y.a.createElement(O,{isRender:!1,isSymbol:!0}),y.a.createElement(T,{isRender:!1,isSymbol:!0}),y.a.createElement(B,{isRender:!1,isSymbol:!0}),_e?null:y.a.createElement(S.Box,null,y.a.createElement(ae,{mode:o,saveDraft:this.saveDraft,updateDraft:this.updateDraft,toAddress:Q,bccAddress:ee,ccAddress:X,isDraft:be,draftText:J,addEmail:this.addEmail,changeEmail:this.changeEmail,removeEmail:this.removeEmail,fromEmailAddress:z,isFromAddressFetching:he,changeFromEmailAddress:this.changeFromEmailAddress,deleteDraft:this.deleteDraftConfirmation,searchContact:this.searchContact,openEditor:c,threadId:t,content:a,thread:n,searchMode:te,searchData:ne,orgName:i,closeSearchPopup:this.closeSearchPopup,isRecipientsVisible:oe,hideRecipients:this.hideRecipients,inValideArr:le,isPeekView:I,getFromEmailAddress:this.getFromEmailAddress,openConfigurePage:function(){},haveMailSendPermission:A,mailConfigurations:D,myInfo:w,isFromBlueprint:R,haveForWardPermissionOnly:M,isEditorFocus:pe,isToEmpty:fe,isCustomChannel:U})),ce||de?y.a.createElement(S.Box,null,ce?y.a.createElement(at,{deptId:W,insertEmailTemplateData:this.insertEmailTemplateData}):de?y.a.createElement(Ne,{openSnippet:this.openSnippet}):null):null,y.a.createElement(S.Box,{flexible:!0,className:"replyArea"},y.a.createElement(N.a,{id:t,value:we,onFocus:this.editorFocus,editorCallback:this.editorCallback,editorMode:"TicketReply",onUpload:j,chageEditorContent:me,blurCallback:this.blurCallback,mode:ke})),y.a.createElement(S.Box,null,_e?R?null:y.a.createElement(Ie,{ticketId:C,changeForumStatus:Z,showMessage:q,closeEdtior:l,sendDraft:b,editorId:t,saveDraft:h,deleteDraft:this.deleteDraftConfirmation,updateDraft:f,isDraft:g,sendReply:v,channelRelatedInfo:x,haveMailSendPermission:A}):y.a.createElement(ve,{isFromBlueprint:R,closeEdtior:l,uploadAttach:this.uploadAttach,deleleUpload:this.deleleUpload,showAttachmentViewer:s,openCloudAttach:this.openCloudAttach,closeCloudAttach:this.closeCloudAttach,orgId:r,newAttachments:Y,oldAttachments:$,removeAttachment:this.removeAttachment,sendDraft:this.sendDraft,isDraft:be,sendReply:this.sendReply,sendAndClose:this.sendAndClose,isPrivateThread:ie,haveVisibilityChangePer:re,isPrivateButtonEnable:se,togglePrivateSwitch:this.togglePrivateSwitch,isPeekView:I,haveMailSendPermission:A,isStatusLocked:P,havePrivateThreadConfig:F,sendForReview:this.sendForReview,isCloudAttchOpen:V&&ue,CloudAttachmentIframe:Ze.s,addCloudAttch:this.addCloudAttch,haveForWardPermissionOnly:M,isSharedTicket:L,isCustomChannel:U,acceptsAttachments:Ce,appName:Ee,deleteDraft:this.deleteDraftConfirmation,sendCusomChannelReply:this.sendCusomChannelReply})),"deleteDraft"==ge?y.a.createElement(Oe.a,{closeAlert:this.closeAlert,deleteDraft:this.deleteDraft}):"collisionReply"==ge&&_.length?y.a.createElement(He.a,{agents:E,replyingUsers:_,replyConfirm:this.closeAlert,closeAlert:l,isFromReplyEditor:!0}):null)}}]),t}(_.Component);nt.defaultProps={isFromBlueprint:!1},nt.propTypes=(tt={account:C.a.object,agent:C.a.object,agents:C.a.object,changeForumStatus:C.a.func},o()(tt,"changeForumStatus",C.a.func),o()(tt,"channelInfo",C.a.object),o()(tt,"channelRelatedInfo",C.a.object),o()(tt,"closeEdtior",C.a.func),o()(tt,"closeTicket",C.a.func),o()(tt,"contact",C.a.object),o()(tt,"contactEmail",C.a.string),o()(tt,"contacts",C.a.object),o()(tt,"deleleUpload",C.a.func),o()(tt,"deleteDraft",C.a.func),o()(tt,"deptId",C.a.string),o()(tt,"downloadAttachment",C.a.func),o()(tt,"editorId",C.a.string),o()(tt,"fromAddress",C.a.array),o()(tt,"getFromEmailAddress",C.a.func),o()(tt,"getSnippetList",C.a.func),o()(tt,"getTemplateContent",C.a.func),o()(tt,"haveEditPermission",C.a.bool),o()(tt,"haveForWardPermissionOnly",C.a.bool),o()(tt,"haveMailSendPermission",C.a.bool),o()(tt,"havePrivateThreadConfig",C.a.bool),o()(tt,"isCloudAttchOpen",C.a.bool),o()(tt,"isCustomChannel",C.a.bool),o()(tt,"isDraft",C.a.bool),o()(tt,"isDraftThread",C.a.bool),o()(tt,"isEditorChanged",C.a.func),o()(tt,"isFromBlueprint",C.a.bool),o()(tt,"isPeekView",C.a.bool),o()(tt,"isSharedTicket",C.a.bool),o()(tt,"isStatusLocked",C.a.bool),o()(tt,"linkHolder",C.a.string),o()(tt,"mailConfigurations",C.a.object),o()(tt,"moduleMeta",C.a.object),o()(tt,"myInfo",C.a.object),o()(tt,"openCloudAttach",C.a.func),o()(tt,"openEditor",C.a.func),o()(tt,"openSnippet",C.a.func),o()(tt,"orgId",C.a.number),o()(tt,"orgName",C.a.string),o()(tt,"publishUserAction",C.a.func),o()(tt,"replyMode",C.a.string),o()(tt,"replyThread",C.a.object),o()(tt,"replyingUsers",C.a.array),o()(tt,"revertIsEditorChanged",C.a.func),o()(tt,"saveDraft",C.a.func),o()(tt,"searchContact",C.a.func),o()(tt,"secondaryContacts",C.a.array),o()(tt,"sendDraft",C.a.func),o()(tt,"sendForReview",C.a.func),o()(tt,"sendReply",C.a.func),o()(tt,"setIsEditorChanged",C.a.func),o()(tt,"setReplyData",C.a.func),o()(tt,"showAttachmentViewer",C.a.func),o()(tt,"showMessage",C.a.func),o()(tt,"signatureObj",C.a.object),o()(tt,"snippetData",C.a.object),o()(tt,"snippets",C.a.object),o()(tt,"solutionAttachments",C.a.array),o()(tt,"solutionContent",C.a.string),o()(tt,"ticket",C.a.object),o()(tt,"ticketId",C.a.string),o()(tt,"updateDraft",C.a.func),o()(tt,"uploadAttach",C.a.func),o()(tt,"uploadCloudAttachment",C.a.func),tt);t.a=Object(I.connect)(function(e,t){var a=e.module.ticket[t.ticketId],n=e.module.contact[a.contactId],o=e.myInfo.id,i=e.ticketUIState.isEditorChanged,r=void 0!==i&&i,s=a.departmentId,l=e.departmentSpecificState[s],c=l&&l.fromEmailAddress.length?l.fromEmailAddress:e.departmentSpecificState.allDepartment?e.departmentSpecificState.allDepartment.fromEmailAddress:[],d=e.myPreferences,u=d.signatureObj,m=d.linkHolder,p=[],h=(e.collidingData[t.ticketId]||{}).collidingUsers,f=void 0===h?[]:h;if(f.length)for(var g=0;g<f.length;g++)"replying"==f[g].userAction&&f[g].agentId!=o&&p.push(f[g]);return{orgName:e.routing.paramMap.orgName,orgId:Object(Te.N)(e),signatureObj:u,linkHolder:m,collidingData:e.collidingData[t.ticketId],agents:e.module.agent,snippetData:e.snippetData,snippets:e.module.snippet,contact:n,agent:e.module.agent[o],ticket:a,account:e.module.account[n.accountId],isEditorChanged:r,deptId:s,fromAddress:c,mailConfigurations:l.mailConfigurations,havePrivateThreadConfig:l.mailConfigurations.privateThreadConfig,myInfo:e.myInfo,isCloudAttchOpen:e.isCloudAttchOpen,moduleMeta:e.moduleMeta,contacts:e.module.contact,secondaryContacts:a.secondaryContacts,replyingUsers:p}},{downloadAttachment:Pe.e,uploadAttach:Pe.k,deleleUpload:Pe.d,showAttachmentViewer:Pe.i,openCloudAttach:Pe.h,getFromEmailAddress:Be.b,searchContact:Be.f,publishUserAction:Me.h,openSnippet:Le.f,getSnippetList:Le.d,getTemplateContent:Fe.b,setIsEditorChanged:Re.t,revertIsEditorChanged:Re.r,showMessage:Ve.Q,uploadCloudAttachment:Pe.l,changeForumStatus:Re.a})(nt)},1375:function(e,t,a){"use strict";var n,o=a(5),i=a.n(o),r=a(12),s=a.n(r),l=a(9),c=a.n(l),d=a(10),u=a.n(d),m=a(13),p=a.n(m),h=a(14),f=a.n(h),g=a(0),v=a.n(g),b=a(1),_=a.n(b),y=a(1376),E=a.n(y),C=a(152),I=a(43),A=a.n(I),k=a(1007),S=a(174),N=a(8),x=function(e){function t(e){c()(this,t);var a=p()(this,(t.__proto__||s()(t)).call(this,e));return a.onMoreClick=a.onMoreClick.bind(a),a}return f()(t,e),u()(t,[{key:"getMoreActionList",value:function(e){var t=this.props,a=t.haveEditPermission,n=t.isFromBlueprint,o=t.hasPrivacyMode,i={name:N.f.getI18NValue("support.label.download"),iconName:"inbox",size:"14"},r=[];if(a||n){if(o){var s=e?{name:N.f.getI18NValue("support.request.markas.private"),iconName:"invisibleNew",size:"20"}:{name:N.f.getI18NValue("support.request.markas.public"),iconName:"visibleNew",size:"20"};r.push(s)}var l={name:N.f.getI18NValue("support.permission.delete.comment"),iconName:"delete2",size:"14"};n?r.push(l):(r.push(i),r.push(l))}else r.push(i);return r}},{key:"onMoreClick",value:function(e,t){var a=this.props,n=a.deleteClick,o=a.updateClick,i=a.orgId;e==N.f.getI18NValue("support.permission.delete.comment")?n([t.id]):e==N.f.getI18NValue("support.request.markas.private")?o(t.id,!1):e==N.f.getI18NValue("support.request.markas.public")?o(t.id,!0):e==N.f.getI18NValue("support.label.download")&&Object(S.b)(t.href,i)}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.showAttachmentViewer,o=t.orgId,i=t.isPeekView,r=t.isFromBlueprint,s=(t.hasPrivacyMode,v.a.createElement(A.a,{name:"more",size:"20"})),l=null;return v.a.createElement("div",{className:E.a.prlb20},a.map(function(t,c){var d=t.isPublic,u=t.size,m=t.creatorId,p=t.href,h=t.id,f=t.name,g=t.createdTime,b=N.f.userDateFormat(new Date(g),{},"lateby","left",!1,function(){return"DD MMM YYYY"}),_=N.f.userDateFormat(new Date(g),{},"lateby","left",!1,function(){return"hh:mm A"});b!=l?l=b:b=null;var y=Object(S.j)(f,g);return v.a.createElement("div",{className:E.a.tickethistoryCont+" "+(r?E.a.bluePrintList:""),key:h},v.a.createElement("div",{className:E.a.subDiv,onClick:r?null:y?S.a.bind(e,h,a,function(e){n(e)}):S.l.bind(e,p,o),"data-id":"AttachmentViewer"},v.a.createElement("span",{className:E.a.avtDiv},v.a.createElement(C.a,{name:Object(S.c)(f),iconSize:"16",iconClass:"mtminus3",size:"xmedium"})),v.a.createElement("div",{className:i?E.a.peektickHisContent:E.a.tickHisContent,"data-id":"AttachDiv"},r?null:v.a.createElement("div",null,b&&v.a.createElement("div",{className:E.a.dateFont},b),v.a.createElement("div",{className:E.a.timeFont},_)),v.a.createElement("div",null,v.a.createElement("div",{className:E.a.histContent}," ",f," ")),v.a.createElement("span",null,v.a.createElement("span",{className:E.a.ticketListdiv},r?null:[v.a.createElement("span",{className:E.a.ticketHistorylist,key:"name"},m),v.a.createElement("span",{className:E.a.dot,key:"dot"},".")],v.a.createElement("span",{className:E.a.ticketHistorylist},Object(S.e)(u)),d&&v.a.createElement("span",null,v.a.createElement("span",{className:E.a.dot},"."),v.a.createElement("span",{className:E.a.ticketHistorylist},N.f.getI18NValue("support.request.public"))))))),v.a.createElement("span",{className:E.a.attchMoreicon},v.a.createElement(k.a,{objValues:e.getMoreActionList(d),moreIcon:s,listStyle:"alpha",onSelect:e.onMoreClick,entity:t})))}))}}]),t}(v.a.Component);t.a=x,x.defaultProps={isFromBlueprint:!1},x.propTypes=(n={data:_.a.array,deleteClick:_.a.func,hasPrivacyMode:_.a.bool},i()(n,"hasPrivacyMode",_.a.bool),i()(n,"haveEditPermission",_.a.bool),i()(n,"isFromBlueprint",_.a.bool),i()(n,"isPeekView",_.a.bool),i()(n,"orgId",_.a.string),i()(n,"showAttachmentViewer",_.a.func),i()(n,"updateClick",_.a.func),n)},1376:function(e,t,a){e.exports={tickethistoryCont:"AttachmentList-module__tickethistoryCont",avtDiv:"AttachmentList-module__avtDiv common-module__rounded",dateFont:"AttachmentList-module__dateFont",timeFont:"AttachmentList-module__timeFont",histContent:"AttachmentList-module__histContent common-module__semibold common-module__ftsmooth",tickHisContent:"AttachmentList-module__tickHisContent",ticketHistorylist:"AttachmentList-module__ticketHistorylist",ticketListdiv:"AttachmentList-module__ticketListdiv",dot:"AttachmentList-module__dot",subDiv:"AttachmentList-module__subDiv",attchMoreicon:"AttachmentList-module__attchMoreicon",prlb20:"AttachmentList-module__prlb20",peektickHisContent:"AttachmentList-module__peektickHisContent AttachmentList-module__tickHisContent",bluePrintList:"AttachmentList-module__bluePrintList"}},1379:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(1),g=a.n(f),v=a(1380),b=a.n(v),_=a(64),y=a.n(_),E=a(235),C=a.n(E),I=a(73),A=a.n(I),k=a(947),S=a.n(k),N=a(8),x=a(16),D=a(6),O=function(e){function t(e){r()(this,t);var a=d()(this,(t.__proto__||o()(t)).call(this,e));return a.handleChange=a.handleChange.bind(a),a.toggleNotifyContact=a.toggleNotifyContact.bind(a),a}return m()(t,e),l()(t,[{key:"handleChange",value:function(e){this.props.onContentChange(e)}},{key:"toggleNotifyContact",value:function(e){this.props.toggleNotifyContact(e)}},{key:"render",value:function(){var e=this.props,t=e.mode,a=e.myInfo,n=e.isPeekView,o=e.moduleMeta,i=(e.resolution,e.clearContent),r=e.closeResolution,s=e.content,l=e.isNotifyContact,c=e.updateResolution,d=e.isFromBlueprint,u=Object(D.e)(a.firstName,a.lastName);return h.a.createElement("div",{className:b.a.postbox},h.a.createElement("div",{className:b.a.postHeader},d?null:h.a.createElement("span",{className:b.a.postAvatar},h.a.createElement(y.a,{src:a.photoURL,size:"xsmall",name:u})),h.a.createElement("div",{className:d?"":b.a.commentBox},h.a.createElement(C.a,{size:"medium",text:s,placeHolder:N.f.getI18NValue("support.request.actions.resolution.add"),needBorder:!1,onChange:this.handleChange}))),h.a.createElement(x.Container,{alignBox:"row",className:n?b.a.peekPostfooter:b.a.postFooter+" "+(d?b.a.bluePrintFooter:"")},h.a.createElement(x.Box,{className:b.a.postFleft},h.a.createElement(S.a,{id:"notify",labelPalette:"primary",checked:l,text:N.f.getI18NValue("support.resolution.notify"),onChange:this.toggleNotifyContact})),d?null:h.a.createElement(x.Box,{className:b.a.postSubmit},h.a.createElement(A.a,{text:N.f.getI18NValue("support.button.save"),palette:"primaryFilled",size:"medium",onClick:c}),h.a.createElement(A.a,{text:N.f.getI18NValue("support.button.save.as.solution",[o.kbCategory.singularLabel]),palette:"primaryFilled",size:"medium"}),h.a.createElement(A.a,{text:"edit"==t?N.f.getI18NValue("support.label.cancel"):N.f.getI18NValue("support.request.clear"),size:"medium",palette:"secondary",onClick:"edit"==t?r:i,disabled:"edit"!=t&&!s}))))}}]),t}(h.a.Component);t.a=O,O.defaultProps={isFromBlueprint:!1},O.propTypes={clearContent:g.a.func,closeResolution:g.a.func,content:g.a.string,isFromBlueprint:g.a.bool,isNotifyContact:g.a.func,isPeekView:g.a.bool,mode:g.a.string,moduleMeta:g.a.object,myInfo:g.a.object,onContentChange:g.a.func,resolution:g.a.object,toggleNotifyContact:g.a.func,updateResolution:g.a.func}},1380:function(e,t,a){e.exports={postbox:"ResolutionForm-module__postbox common-module__cboth",postHeader:"ResolutionForm-module__postHeader",commentBox:"ResolutionForm-module__commentBox",postAvatar:"ResolutionForm-module__postAvatar",postFooter:"ResolutionForm-module__postFooter",postSubmit:"ResolutionForm-module__postSubmit",postFleft:"ResolutionForm-module__postFleft common-module__flexgrow",peekPostfooter:"ResolutionForm-module__peekPostfooter ResolutionForm-module__postFooter",bluePrintFooter:"ResolutionForm-module__bluePrintFooter"}},1381:function(e,t,a){"use strict";var n=a(2),o=a.n(n),i=a(12),r=a.n(i),s=a(9),l=a.n(s),c=a(10),d=a.n(c),u=a(13),m=a.n(u),p=a(14),h=a.n(p),f=a(0),g=a.n(f),v=a(1),b=a.n(v),_=a(1382),y=a.n(_),E=a(73),C=a.n(E),I=a(203),A=a.n(I),k=a(99),S=a.n(k),N=a(235),x=a.n(N),D=a(8),O=function(e){function t(e){l()(this,t);var a=m()(this,(t.__proto__||r()(t)).call(this,e));return a.state={},a.onApproverChange=a.onApproverChange.bind(a),a.addApproval=a.addApproval.bind(a),a}return h()(t,e),d()(t,[{key:"onApproverChange",value:function(e){var t=this.props.onApproverChange;t(e)}},{key:"addApproval",value:function(){var e=this.props,t=e.subject,a=e.description,n=e.selectedAgents,i=e.createApproval;if(""===t||!n.length)return""===t?this.setState({isSubjectEmpty:!0}):this.setState({isSubjectEmpty:!1}),void(n.length?this.setState({isSelectedAgentsEmpty:!1}):this.setState({isSelectedAgentsEmpty:!0}));this.setState({isSubjectEmpty:!1,isSelectedAgentsEmpty:!1});var r={subject:t,approverIds:n};a&&(r=o()(r,{description:a})),i(r)}},{key:"render",value:function(){var e=this.props,t=e.closeForm,a=e.agentsList,n=e.getAgents,o=e.isPeekView,i=e.autoFetch,r=e.isFromBlueprint,s=e.onSubjectChange,l=e.onDescriptionChange,c=e.selectedAgents,d=e.subject,u=e.description,m=this.state,p=m.isSubjectEmpty,h=m.isSelectedAgentsEmpty;return g.a.createElement("div",{className:y.a.addApprove+" "+(r?y.a.bluePrintLayar:"")},g.a.createElement("div",{className:o?y.a.peekapproveForm:y.a.approveForm,"data-id":"approveForm"},g.a.createElement("div",{className:y.a.listForm},g.a.createElement("div",{className:y.a.formTitle},D.f.getI18NValue("support.label.select.approver")),g.a.createElement("div",{className:y.a.formInput},g.a.createElement(A.a,{valueField:"id",textField:"name",selectedOptions:c,options:a,onChange:this.onApproverChange,getNextOptions:n,isNextOptions:i,noMoreOptionsMessage:D.f.getI18NValue("support.label.no.match.found"),emptyMessage:h?D.f.getI18NValue("support.label.empty.approver"):null}))),g.a.createElement("div",{className:y.a.listForm},g.a.createElement("div",{className:y.a.formTitle},D.f.getI18NValue("support.feedback.label.subject")),g.a.createElement("div",{className:y.a.formInput},g.a.createElement(S.a,{onChange:s,value:d,errorMsg:p?D.f.getI18NValue("crm.field.empty.check",[D.f.getI18NValue("support.feedback.label.subject")]):null}))),g.a.createElement("div",{className:y.a.listForm},g.a.createElement("div",null,D.f.getI18NValue("support.feedback.label.description")),g.a.createElement("div",{className:y.a.formInput},g.a.createElement(x.a,{text:u,animated:!0,resize:"vertical",onChange:l}))),r?null:g.a.createElement("div",{className:y.a.buttonDiv},g.a.createElement("span",null,g.a.createElement(C.a,{text:D.f.getI18NValue("request.actions.submit.for.approval"),palette:"primaryFilled",size:"medium",onClick:this.addApproval})),g.a.createElement("span",{className:y.a.cancelBtn},g.a.createElement(C.a,{text:D.f.getI18NValue("support.label.cancel"),palette:"secondary",size:"medium",onClick:t})))))}}]),t}(g.a.Component);t.a=O,O.defaultProps={isFromBlueprint:!1},O.propTypes={agentsList:b.a.oneOfType([b.a.object,b.a.array]),autoFetch:b.a.bool,closeForm:b.a.func,createApproval:b.a.func,description:b.a.string,getAgents:b.a.oneOfType([b.a.func,b.a.bool]),isFromBlueprint:b.a.bool,isPeekView:b.a.bool,onApproverChange:b.a.func,onDescriptionChange:b.a.func,onSubjectChange:b.a.func,selectedAgents:b.a.array,subject:b.a.string}},1382:function(e,t,a){e.exports={addApprove:"ApprovalsForm-module__addApprove",approveForm:"ApprovalsForm-module__approveForm",peekapproveForm:"ApprovalsForm-module__peekapproveForm ApprovalsForm-module__approveForm",formTitle:"ApprovalsForm-module__formTitle",formInput:"ApprovalsForm-module__formInput",listForm:"ApprovalsForm-module__listForm",buttonDiv:"ApprovalsForm-module__buttonDiv",cancelBtn:"ApprovalsForm-module__cancelBtn",bluePrintLayar:"ApprovalsForm-module__bluePrintLayar"}},1478:function(e,t,a){e.exports={titleName:"FormFields-module__titleName",subtabList:"FormFields-module__subtabList",customField:"FormFields-module__customField",headingName:"FormFields-module__headingName common-module__semibold common-module__ftsmooth",subHeading:"FormFields-module__subHeading",contentDiv:"FormFields-module__contentDiv",notesArea:"FormFields-module__notesArea",checkBox:"FormFields-module__checkBox",invalidBox:"FormFields-module__invalidBox"}},173:function(e,t,a){e.exports={container:"Loading-module__container",dot:"Loading-module__dot",bounce:"Loading-module__bounce"}},174:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"e",function(){return l}),a.d(t,"d",function(){return c}),a.d(t,"j",function(){return d}),a.d(t,"n",function(){return u}),a.d(t,"o",function(){return m}),a.d(t,"k",function(){return p}),a.d(t,"i",function(){return h}),a.d(t,"g",function(){return g}),a.d(t,"h",function(){return v}),a.d(t,"a",function(){return b}),a.d(t,"l",function(){return y}),a.d(t,"b",function(){return E}),a.d(t,"m",function(){return C}),a.d(t,"f",function(){return I});var n=a(11),o=a.n(n),i=a(177),r=a(8);function s(e){var t=c(e),a=Object(i.a)().toLowerCase()||"",n=navigator.platform.toLowerCase()||"";switch(t){case"jpeg":case"jpg":case"png":case"gif":case"bmp":case"tiff":case"tif":case"ico":return"filePicture";case"txt":case"rtf":return"fileText2";case"pdf":return"filePdf";case"html":case"htm":case"xhtml":return-1!==a.indexOf("chrome")||-1!==a.indexOf("safari")?"chrome":-1!==a.indexOf("ie")||-1!==a.indexOf("edge")?"ie":"firefox";case"ppt":case"pps":case"odp":case"sxi":case"pptx":return"ppt";case"rar":case"jar":case"zip":return"zip3";case"doc":case"docx":case"sxw":case"odt":return-1!==n.indexOf("mac")||-1!==n.indexOf("linux")?"fileOpenoffice":"fileWord";case"xml":return"xml";case"xls":case"xlsx":case"sxc":case"ods":case"csv":case"tsv":return"fileExcel";case"ics":return"ics";case"exe":return"exe";case"sh":case"bin":return"sh2";case"css":return"css52";case"mp3":case"wav":case"wma":case"aac":case"m4r":case"ogg":return"fileMusic";case"mp4":case"mkv":case"mov":case"mpeg":case"flv":case"avi":case"webm":return"fileVideo";default:return"unknown"}}function l(e){return(e=parseInt(e))<1e3?e+" Bytes":e<1e6?(e/1e3).toFixed(1)+" KB":e>=1e6?(e/1e6).toFixed(1)+" MB":void 0}function c(e){return e&&e.indexOf(".")?e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase():""}function d(e){var t=c(e);return-1!=="jpeg|jpg|png|gif|bmp|ico".indexOf(t)}function u(e,t){var a={inValidArray:[],validArray:[]};if(t+e.length>10)return a.isCountExceeds=!0,a;for(var n=0;n<e.length;n++){var o=e[n],i=o.name,r=o.size;p(i)?a.inValidArray.push({isUnSupported:!0}):h(i)?a.inValidArray.push({isFileNameSizeInvalid:!0}):0===o.size?a.inValidArray.push({isEmpty:!0}):f(r)?a.inValidArray.push({isAttachSizeExceeded:!0}):a.validArray.push(o)}return a}function m(e,t,a){if(t+e.length>10)alert(r.f.getI18NValue("support.attachments.count.exceeds",[10]));else for(var n=0;n<e.length;n++){var o=e[n],i=o.name,s=o.size;if(p(i))alert(r.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted"));else if(h(i))alert(r.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation"));else if(0!==o.size)if(f(s))alert(r.f.getI18NValue("support.feedback.uploaded.file.exceeds.20mb"));else{var l=new FormData;l.append("file",o),a&&a(l)}else alert(r.f.getI18NValue("support.request.empty.attachment.message"))}}function p(e){var t=e.split(".").pop().toLowerCase();return-1!==["ade","adp","bat","chm","cmd","com","cpl","exe","hta","ins","isp","jar","lib","lnk","mde","msc","msp","mst","pif","scr","sct","shb","sys","vb","vbe","vxd","wsc","wsf","wsh","jse","vbs"].indexOf(t)}function h(e){return e.length>100}function f(e){return e>20971520}function g(e){var t=0;return e.forEach(function(e){t+=parseInt(e.size)}),t}function v(e,t){return!(!(null!==e.types||e.files&&e.files.length>0)||t.fromPaste||!(e.files&&e.files.length>0||(e.types.indexOf?-1!==e.types.indexOf("Files"):e.types.contains("application/x-moz-file"))||"Files"===e.types[0]))}function b(e,t,a){var n={};n.previewData=t.filter(function(e){return!e.isPreview&&d(e.name)}),n.previewData.filter(function(t,a){t.id===e&&(n.selectedIndex=a)}),a&&a(n)}function _(e,t,a){var n=e.indexOf("/api"),o=e;return n>-1&&(o=e.slice(n,e.length),o+="?orgId="+t+(a?"&inline=true":"")),o}function y(e,t){window.open(_(e,t,!0))}function E(e,t){window.location.href=_(e,t,!1)}function C(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=e.length,c=[],d=[],u=0;if(n&&l>n-a){var m=r.f.getI18NValue("support.attachments.count.exceeds",[n]);return o.a.resolve({isError:!0,errorI18N:m})}for(var f=0;f<l;f++){var g=e[f],v=g||{},b=v.size,_=void 0===b?0:b,y=v.name,E=void 0===y?"":y;if(u+=_,p(E)){var C=r.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted");c.push({errorI18N:C,fileName:E,errorType:"fileType"})}else if(h(E)){var I=r.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation");c.push({errorI18N:I,fileName:E,errorType:"fileNameSize"})}else if(0===_){var A=r.f.getI18NValue("support.request.empty.attachment.message");c.push({errorI18N:A,fileName:E,errorType:"emptyFile"})}else d.push(g)}if(!d.length){if(1===c.length){var k=c[0].errorI18N;return o.a.resolve({isError:!0,errorI18N:k})}var S=r.f.getI18NValue("support.unable.to.process.your.request");return o.a.resolve({isError:!0,errorI18N:S})}if(0===u){var N=r.f.getI18NValue("support.request.empty.attachment.message");return o.a.resolve({isError:!0,errorI18N:N})}if(u+s>1024*i*1024){var x=r.f.getI18NValue("support.attachments.size.limit.exceeds",[i]);return o.a.resolve({isError:!0,errorI18N:x})}for(var D=[],O=[],w=[],T=function(e){var a=d[e];if(t){var n=new FormData;n.append("file",a);var o=t(n).then(function(e){var t=(e.data||{}).data,a=void 0===t?{}:t,n=a.id;n&&(D.push(a),O.push(n))},function(e){var t=a.name,n=r.f.getI18NValue("support.unable.to.process.your.request");throw c.push({errorI18N:n,fileName:t,errorType:"apiError"}),e});w.push(o)}},P=0;P<d.length;P++)T(P);var B={uploadFiles:D,inValidFiles:c,isError:!1,uploadFileIds:O};return o.a.all(w).then(function(){return B},function(){return D.length?B:{isError:!0,errorI18N:r.f.getI18NValue("support.unable.to.process.your.request")}})}function I(e,t){var a=e.name;return{index:t,isPreview:!0,size:e.size,name:a,href:URL.createObjectURL(e)}}},1769:function(e,t,a){e.exports={errMsg:"TransitionActions-module__errMsg",errCont:"TransitionActions-module__errCont",moreCont:"TransitionActions-module__moreCont",mode:"TransitionActions-module__mode",switchAction:"TransitionActions-module__switchAction",actionNotify:"TransitionActions-module__actionNotify",actionSubtitle:"TransitionActions-module__actionSubtitle",replyCont:"TransitionActions-module__replyCont",html:"TransitionActions-module__html"}},1770:function(e,t,a){e.exports={container:"AttachmentHeader-module__container",attachicn:"AttachmentHeader-module__attachicn",plsIcon:"AttachmentHeader-module__plsIcon",fileCont:"AttachmentHeader-module__fileCont",label:"AttachmentHeader-module__label"}},1771:function(e,t,a){e.exports={defaultSize:"AttachPopup-module__defaultSize common-module__pointer",moreclose:"AttachPopup-module__moreclose",popupDiv:"AttachPopup-module__popupDiv"}},458:function(e,t,a){"use strict";var n=a(12),o=a.n(n),i=a(9),r=a.n(i),s=a(10),l=a.n(s),c=a(13),d=a.n(c),u=a(14),m=a.n(u),p=a(0),h=a.n(p),f=a(173),g=a.n(f),v=a(16),b=function(e){function t(){return r()(this,t),d()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),l()(t,[{key:"render",value:function(){return h.a.createElement(v.Container,{alignBox:"row",align:"both",className:g.a.container},h.a.createElement(v.Box,{className:g.a.dot}),h.a.createElement(v.Box,{className:g.a.dot}),h.a.createElement(v.Box,{className:g.a.dot}),h.a.createElement(v.Box,{className:g.a.dot}),h.a.createElement(v.Box,{className:g.a.dot}),h.a.createElement(v.Box,{className:g.a.dot}))}}]),t}(h.a.Component);t.a=b},624:function(e,t,a){"use strict";a.r(t);var n=a(5),o=a.n(n),i=a(11),r=a.n(i),s=a(12),l=a.n(s),c=a(9),d=a.n(c),u=a(10),m=a.n(u),p=a(13),h=a.n(p),f=a(14),g=a.n(f),v=a(0),b=a.n(v),_=a(1),y=a.n(_),E=a(26),C=a(956),I=a(74),A=a(24),k=a(8),S=a(204),N=a(6),x=a(3),D=a(1478),O=a.n(D),w=a(1769),T=a.n(w),P=a(30),B=a(1379),F=a(1770),R=a.n(F),V=a(1771),M=a.n(V),L=a(80),j=a.n(L),z=a(1023),K=a(72),U=a.n(K),H=a(361),Z=a.n(H),q=function(e){function t(e){d()(this,t);var a=h()(this,(t.__proto__||l()(t)).call(this,e));return a.handleSelect=a.handleSelect.bind(a),a}return g()(t,e),m()(t,[{key:"handleSelect",value:function(e){this.props.togglePopup(e)}},{key:"render",value:function(){var e=this.props,t=e.theme,a=void 0===t?"white":t,n=e.removeClose,o=e.openPopupOnly,i=e.className;return b.a.createElement("span",{className:M.a.popupDiv,onMouseOver:o},b.a.createElement("span",{className:M.a.defaultSize+" "+M.a[a]},b.a.createElement(z.a,{channelIcon:"tpAdd",iconClass:"mtminus2",channelSize:"17",palette:"primary",size:"xmedium"})),b.a.createElement("span",{className:M.a.moreclose+" "+i,onClick:n,onMouseOver:o},b.a.createElement(U.a,{isActive:this.props.isPopupOpen,size:"small"},b.a.createElement("div",null,[{name:"Browse Files",iconName:"emptyfle",size:"size13"},{name:"Attach from Cloud",iconName:"cloudicn",size:"size13"}].map(function(e,t){return b.a.createElement(Z.a,{value:e.name,key:"attachment-"+t,iconName:e.iconName,autoHover:!0,iconSize:e.size})})))))}}]),t}(v.Component);q.propTypes={className:y.a.string,isPopupOpen:y.a.bool,objValues:y.a.array,openPopupOnly:y.a.func,position:y.a.string,removeClose:y.a.func,theme:y.a.string,togglePopup:y.a.func};var W=j()(q),G=function(e){function t(e){return d()(this,t),h()(this,(t.__proto__||l()(t)).call(this,e))}return g()(t,e),m()(t,[{key:"render",value:function(){var e=this.props.createAttachment;return b.a.createElement("div",{className:R.a.container},b.a.createElement("div",{className:R.a.attachicn},b.a.createElement("span",{className:R.a.plsIcon},b.a.createElement("span",{className:R.a.fileCont},b.a.createElement("input",{type:"file",onChange:e,multiple:"multiple"})),b.a.createElement(W,{icnSize:"17",AtchIcnColor:"primary",plusIcn:"tpAdd",BodrColor:"primary"}))),b.a.createElement("div",{className:R.a.label},k.f.getI18NValue("support.blueprint.label.add.attachment")))}}]),t}(v.Component),Y=G;G.propTypes={createAttachment:y.a.func};var $,J=a(1375),Q=a(1381),X=a(1107),ee=(a(17),a(131)),te=a(242),ae=function(e){function t(e){d()(this,t);var a=h()(this,(t.__proto__||l()(t)).call(this,e));return a.state={from:0,limit:25},a.getAutofillContacts=Object(ee.a)(a.getAutofillContacts.bind(a),100,!0),a.getMentions=a.getMentions.bind(a),a.uploadAttach=a.uploadAttach.bind(a),a.deleleUpload=a.deleleUpload.bind(a),a.handleError=a.handleError.bind(a),a}return g()(t,e),m()(t,[{key:"getAutofillContacts",value:function(e,t,a){var n=this,o=this.props,i=o.deptId,r=o.teamsList,s=o.getTeamsList;r.length?this.getMentions(e,t,a):s(i).then(function(){n.getMentions(e,t,a)})}},{key:"getMentions",value:function(e,t,a){var n=this,o=this.props,i=o.deptId,r=o.getAgentsList,s=o.searchAgents,l=this.state,c=l.from,d=l.limit;d=(c=(t-1)*d)+d,e.length>1?s(e,c,d).then(function(e){console.log("res",e)}):(this.invokeMentionsCallback(t,a),r(i,c,d).then(function(){n.invokeMentionsCallback(t,a)}))}},{key:"invokeMentionsCallback",value:function(e,t){var a=this.props,n=a.agentsObject,o=a.teamsObject,i=a.agentsList,r=a.teamsList,s=i?i.map(function(e){return n[e]}):[],l=r.map(function(e){return o[e]}),c=25*(e-1),d=c+25,u=s.concat(l).map(function(e){var t={};return t.name=e.name,t.value=e.name,t.id=e.zuid||e.id,t.avatar=e.photoURL||"https://contacts.localzoho.com/file?t=user&fs=thumb&ID=53746212&exp=600",e.name?e.subTeams?(t.type="team",t.team=Object(N.u)(t.name)):(t.type="user",t.name=e.name,t.value=e.name):(t.name=Object(N.e)(e.firstName,e.lastName),t.type="user",t.value=t.name),t});u.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}),u=u.slice(c,d);var m={};m.results=u,m.isMore=u.length>0,t(m)}},{key:"uploadAttach",value:function(e,t,a){var n=this;return this.props.uploadAttach(e,t,function(e,t){a(Percentage,t)}).then(function(e){return e},function(e){throw n.handleError(),{attachIndex:t,err:e}})}},{key:"deleleUpload",value:function(e){var t=this;return this.props.deleleUpload(e).catch(function(){t.handleError()})}},{key:"handleError",value:function(){this.props.showMessage({type:"alert",message:k.f.getI18NValue("support.unable.to.process.your.request")})}},{key:"render",value:function(){var e=this.props,t=e.orgId,a=e.showAttachmentViewer,n=(e.uploadAttach,e.deleleUpload,e.showConfirmBox),o=e.showMessage,i=(e.myInfo,e.attachmentIds),r=e.setAttachmentIds;return b.a.createElement(X.a,{id:"bluePrintComment",isFromBlueprint:!0,attachmentIds:i,setAttachmentIds:r,getAutofillContacts:this.getAutofillContacts,showConfirmBox:n,showMessage:o,orgId:t,uploadAttach:this.uploadAttach,deleleUpload:this.deleleUpload,showAttachmentViewer:a})}}]),t}(b.a.Component);ae.propTypes=($={agentsList:_.PropTypes.array,agentsObject:_.PropTypes.object,attachmentIds:_.PropTypes.array,deleleUpload:_.PropTypes.func},o()($,"deleleUpload",_.PropTypes.func),o()($,"deptId",_.PropTypes.string),o()($,"getAgentsList",_.PropTypes.func),o()($,"getTeamsList",_.PropTypes.func),o()($,"myInfo",_.PropTypes.object),o()($,"orgId",_.PropTypes.number),o()($,"searchAgents",_.PropTypes.func),o()($,"setAttachmentIds",_.PropTypes.func),o()($,"showAttachmentViewer",_.PropTypes.func),o()($,"showAttachmentViewer",_.PropTypes.func),o()($,"showConfirmBox",_.PropTypes.func),o()($,"showMessage",_.PropTypes.func),o()($,"teamsList",_.PropTypes.array),o()($,"teamsObject",_.PropTypes.object),o()($,"uploadAttach",_.PropTypes.func),$);var ne,oe,ie=Object(E.connect)(function(e,t){var a=e.departmentSpecificState[t.deptId];return{teamsList:a?a.teamsList:[],agentsList:e.activeAgents[t.deptId],agentsObject:e.module.agent,teamsObject:e.module.teams,orgId:e.currentOrgId}},{getTeamsList:A.u,getAgentsList:C.g,searchAgents:C.j,showConfirmBox:A.a.showConfirmBox,showMessage:A.Q,uploadAttach:te.k,deleleUpload:te.d,showAttachmentViewer:te.i})(ae),re=a(1336),se=a(1281),le=a(151),ce=a.n(le),de=function(e){function t(e){d()(this,t);var a=h()(this,(t.__proto__||l()(t)).call(this,e));return a.state={isPopupOpen:!1,contentLen:""},a.togglePopup=a.togglePopup.bind(a),a.changeMode=a.changeMode.bind(a),a}return g()(t,e),m()(t,[{key:"togglePopup",value:function(){this.setState(function(e){return{isPopupOpen:!e.isPopupOpen}})}},{key:"changeMode",value:function(){var e=this.props,t=e.commentMode,a=e.actionType,n=e.changeCommentMode,o=e.isPublicEnable,i=e.changeReplyMode;"COMMENT"==a?n("private"==t?"public":"private"):"REPLY"==a&&i(!o);this.setState({isPopupOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.actionType,n=t.myInfo,o=t.moduleMeta,i=t.resolution,r=t.isNotifyContact,s=t.onResolutionChange,l=t.toggleNotifyContact,c=t.errorFields,d=void 0===c?{}:c,u=t.createAttachment,m=t.updateAttachment,p=t.deleteAttachment,h=t.attachments,f=t.approvalSubject,g=t.approvalDescription,v=t.approvalSelectedAgents,_=t.onApprovalSubjectChange,y=t.onApprovalDescriptionChange,E=t.onApprovalApproverChange,C=t.agentsList,I=t.isEditorLoaded,A=t.commentAttachmentIds,S=t.setCommentAttachmentIds,N=t.deptId,x=t.commentMode,D=t.setReplyData,w=t.isPrivateThread,F=t.isPublicEnable,R=t.ticketId,V=t.contactEmail,M=t.replyContent,L=t.replyThread,j=void 0===L?{}:L,z=t.replyMode,K=t.getFieldRef,H=this.state,Z=H.isPopupOpen,q=(H.contentLen,!1);return"FACEBOOK"!=j.channel&&"TWITTER"!=j.channel&&"TWITTER_DM"!=j.channel&&"FACEBOOK_DM"!=j.channel||"replyall"==z||(q=!0,z=z||("FACEBOOK"==j.channel?"facebook":"FACEBOOK_DM"==j.channel?"facebookDm":"TWITTER_DM"==j.channel?"twitterDm":"twitter")),b.a.createElement("div",{className:O.a.subtabList},b.a.createElement("div",{className:O.a.headerDiv},b.a.createElement("span",{className:O.a.headingName},k.f.getI18NValue("COMMENT"==a?"tabs.request.comment":"APPROVAL"==a?"tabs.request.approval":"REPLY"==a?"support.common.request.mail.replyall":"ATTACHMENT"==a?"support.history.operation.label.attachment":"RESOLUTION"==a?"tabs.request.resolution":"")),"COMMENT"!=a&&"REPLY"!=a||q?null:b.a.createElement("div",{className:T.a.moreCont,onClick:function(t){t.stopPropagation&&t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation(),w&&e.togglePopup()}},b.a.createElement("div",{className:O.a.subHeading},b.a.createElement("span",{className:T.a.mode},"COMMENT"==a?"private"==x?k.f.getI18NValue("support.label.private"):k.f.getI18NValue("support.request.public"):"REPLY"==a?w&&!F?k.f.getI18NValue("support.request.private.thread"):k.f.getI18NValue("support.request.public.thread"):""),w?b.a.createElement(P.TopbandFontIcon,{name:"blockDownArrow",size:"7"}):null,w?b.a.createElement(U.a,{size:"medium",isArrow:!1,boxPosition:"bottomRight",isActive:Z},b.a.createElement("div",{className:T.a.switchAction,onClick:this.changeMode},b.a.createElement("p",null,b.a.createElement("span",{className:T.a.actionNotify},"COMMENT"==a?"private"==x?k.f.getI18NValue("support.request.public"):k.f.getI18NValue("support.label.private"):"REPLY"==a?w&&!F?k.f.getI18NValue("support.request.public"):k.f.getI18NValue("support.label.private"):"")),b.a.createElement("p",{className:T.a.actionSubtitle},"COMMENT"==a?"private"==x?k.f.getI18NValue("support.request.thread.display.helpcenter"):k.f.getI18NValue("support.request.thread.display.not.helpcenter"):"REPLY"==a?w&&!F?k.f.getI18NValue("support.request.thread.display.helpcenter"):k.f.getI18NValue("support.request.thread.display.not.helpcenter"):""))):null)),b.a.createElement("div",{className:O.a.contentDiv+" "+(d[a]?T.a.errCont:"")+" "+("REPLY"!=a||q?"":T.a.replyCont+" bluePrint"),ref:K},"RESOLUTION"==a?b.a.createElement(B.a,{isFromBlueprint:!0,content:i,isNotifyContact:r,myInfo:n,moduleMeta:o,onContentChange:s,toggleNotifyContact:l}):"ATTACHMENT"==a?b.a.createElement("div",null,b.a.createElement(Y,{createAttachment:u}),b.a.createElement(J.a,{isFromBlueprint:!0,data:h,updateClick:m,deleteClick:p})):"APPROVAL"==a?b.a.createElement(Q.a,{isFromBlueprint:!0,agentsList:C,subject:f,description:g,selectedAgents:v,onSubjectChange:_,onDescriptionChange:y,onApproverChange:E}):"COMMENT"==a?I?b.a.createElement(ie,{attachmentIds:A,setAttachmentIds:S,deptId:N}):null:"REPLY"==a&&I?q?b.a.createElement(se.a,{isFromBlueprint:!0,content:"",isDraft:!1,channel:j.channel,replyMode:z,threadId:j.id,replyThread:j,haveMailSendPermission:!0,setReplyData:D,openEditor:function(e,t,a,n){D("replyMode",n)}}):b.a.createElement(re.a,{isFromBlueprint:!0,isDraftThread:!1,ticketId:R,editorId:"bluePrintReply",replyContent:M,replyThread:j,replyMode:z,solutionContent:"",contactEmail:V,isPeekView:!1,haveEditPermission:!0,haveMailSendPermission:!0,channelRelatedInfo:{},isStatusLocked:!0,setReplyData:D,openEditor:function(e,t,a,n){D("replyMode",n)}}):null,d[a]?b.a.createElement("div",{className:T.a.errMsg},b.a.createElement(ce.a,{text:d[a],id:a,size:"medium",palette:"mandatory"})):null)))}}]),t}(v.Component),ue=de;de.propTypes=(ne={actionType:y.a.string,agentsList:y.a.array,approvalDescription:y.a.string},o()(ne,"approvalDescription",y.a.string),o()(ne,"approvalSelectedAgents",y.a.array),o()(ne,"approvalSelectedAgents",y.a.array),o()(ne,"approvalSubject",y.a.string),o()(ne,"approvalSubject",y.a.string),o()(ne,"attachments",y.a.array),o()(ne,"attachments",y.a.array),o()(ne,"changeCommentMode",y.a.func),o()(ne,"changeReplyMode",y.a.func),o()(ne,"commentAttachmentIds",y.a.array),o()(ne,"commentMode",y.a.string),o()(ne,"contactEmail",y.a.string),o()(ne,"createAttachment",y.a.func),o()(ne,"deleteAttachment",y.a.func),o()(ne,"deptId",y.a.string),o()(ne,"errorFields",y.a.object),o()(ne,"getFieldRef",y.a.func),o()(ne,"isEditorLoaded",y.a.bool),o()(ne,"isNotifyContact",y.a.bool),o()(ne,"isPrivateThread",y.a.bool),o()(ne,"isPublicEnable",y.a.bool),o()(ne,"isPublicEnable",y.a.bool),o()(ne,"moduleMeta",y.a.object),o()(ne,"myInfo",y.a.object),o()(ne,"onApprovalApproverChange",y.a.func),o()(ne,"onApprovalDescriptionChange",y.a.func),o()(ne,"onApprovalDescriptionChange",y.a.func),o()(ne,"onApprovalSubjectChange",y.a.func),o()(ne,"onApprovalSubjectChange",y.a.func),o()(ne,"onResolutionChange",y.a.func),o()(ne,"replyContent",y.a.string),o()(ne,"replyMode",y.a.string),o()(ne,"replyThread",y.a.object),o()(ne,"resolution",y.a.string),o()(ne,"setCommentAttachmentIds",y.a.func),o()(ne,"setReplyData",y.a.func),o()(ne,"ticketId",y.a.string),o()(ne,"toggleNotifyContact",y.a.func),o()(ne,"updateAttachment",y.a.func),ne);var me=function(e){function t(e){d()(this,t);var a=h()(this,(t.__proto__||l()(t)).call(this,e));return a.state={from:0},a.getAgents=a.getAgents.bind(a),a}return g()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.actionType,n=t.ticketId,o=t.getThread,i=t.setReplyData;if("COMMENT"==a||"REPLY"==a){var s=[],l=Object(S.a)(x.j,"js","ZohoDeskEditor");s.push(l);var c=this.getReplyThread(),d=r.a.resolve(),u="";c&&!c.content&&"REPLY"==a&&(d=o(n,c.id).then(function(e){return c=e.data.entities.thread[c.id],u=c.content,e})),s.push(d),r.a.all(s).then(function(){i("channel",c&&c.channel),i("threadId",c&&c.id),e.setState({isEditorLoaded:!0,replyContent:u,replyThread:c})})}"APPROVAL"==a&&this.getAgents(this.state.from)}},{key:"getAgents",value:function(e){var t=this.props,a=t.departmentId;(0,t.getAgentsList)(a,e,50)}},{key:"getReplyThread",value:function(){for(var e=this.props,t=e.conversationIds,a=e.threadIds,n=e.threads,o=t||(a||[]),i=void 0,r=0;r<o.length;r++){var s=o[r].id?o[r].id:o[r];if(n[s]&&"DRAFT"!=n[s].status&&"FAILED"!=n[s].status){i=n[s];break}}return i}},{key:"render",value:function(){var e=this.props,t=e.actionType,a=e.myInfo,n=e.moduleMeta,o=e.resolution,i=e.isNotifyContact,r=e.onResolutionChange,s=e.toggleNotifyContact,l=e.createAttachment,c=e.updateAttachment,d=e.deleteAttachment,u=e.attachments,m=e.approvalSubject,p=e.approvalDescription,h=e.approvalSelectedAgents,f=e.onApprovalSubjectChange,g=e.onApprovalDescriptionChange,v=e.onApprovalApproverChange,_=e.agentIds,y=void 0===_?[]:_,E=e.agents,C=e.commentAttachmentIds,I=e.setCommentAttachmentIds,A=e.departmentId,k=e.commentMode,S=e.changeCommentMode,x=e.setReplyData,D=e.isPrivateThread,O=e.changeReplyMode,w=e.isPublicEnable,T=e.ticketId,P=e.contactEmail,B=e.replyMode,F=e.errorFields,R=e.getFieldRef,V=this.state,M=V.isEditorLoaded,L=V.replyContent,j=void 0===L?"":L,z=V.replyThread,K=[];return y.map(function(e){var t=E[e],a=t.isConfirmed,n=t.id,o=t.firstName,i=t.lastName,r=t.photoURL;a&&K.push({id:n,name:Object(N.t)(o,i),photoURL:r})}),b.a.createElement(ue,{actionType:t,myInfo:a,moduleMeta:n,resolution:o,isNotifyContact:i,onResolutionChange:r,toggleNotifyContact:s,createAttachment:l,updateAttachment:c,deleteAttachment:d,attachments:u,approvalSubject:m,approvalDescription:p,approvalSelectedAgents:h,onApprovalSubjectChange:f,onApprovalDescriptionChange:g,onApprovalApproverChange:v,agentsList:K,isEditorLoaded:M,commentAttachmentIds:C,setCommentAttachmentIds:I,deptId:A,commentMode:k,changeCommentMode:S,setReplyData:x,isPrivateThread:D,isPublicEnable:w,changeReplyMode:O,ticketId:T,contactEmail:P,replyContent:j,replyThread:z,replyMode:B,errorFields:F,getFieldRef:R})}}]),t}(v.Component);me.propTypes=(oe={actionType:y.a.string,agentIds:y.a.array,agents:y.a.object,approvalDescription:y.a.string,approvalSelectedAgents:y.a.array,approvalSubject:y.a.string,attachments:y.a.array,changeCommentMode:y.a.func,changeReplyMode:y.a.func,commentAttachmentIds:y.a.array,commentMode:y.a.string,contactEmail:y.a.string,conversationIds:y.a.array,createAttachment:y.a.func,deleteAttachment:y.a.func,departmentId:y.a.string},o()(oe,"departmentId",y.a.string),o()(oe,"errorFields",y.a.object),o()(oe,"getAgentsList",y.a.func),o()(oe,"getFieldRef",y.a.func),o()(oe,"getThread",y.a.func),o()(oe,"isNotifyContact",y.a.bool),o()(oe,"isPrivateThread",y.a.bool),o()(oe,"isPublicEnable",y.a.bool),o()(oe,"moduleMeta",y.a.object),o()(oe,"myInfo",y.a.object),o()(oe,"onApprovalApproverChange",y.a.func),o()(oe,"onApprovalDescriptionChange",y.a.func),o()(oe,"onApprovalSubjectChange",y.a.func),o()(oe,"onResolutionChange",y.a.func),o()(oe,"replyMode",y.a.string),o()(oe,"resolution",y.a.string),o()(oe,"setCommentAttachmentIds",y.a.func),o()(oe,"setReplyData",y.a.func),o()(oe,"threadIds",y.a.array),o()(oe,"threads",y.a.object),o()(oe,"ticket",y.a.object),o()(oe,"ticketId",y.a.string),o()(oe,"toggleNotifyContact",y.a.func),o()(oe,"updateAttachment",y.a.func),oe);t.default=Object(E.connect)(function(e,t){var a=e.routing.paramMap.moduleId||e.ticketUIState.ticketId,n=e.module.ticket[a],o=n.departmentId,i=n.contactId,r=n.thread,s=n.conversationIds;return{ticketId:a,departmentId:o,myInfo:e.myInfo,moduleMeta:e.moduleMeta,agentIds:e.activeAgents[o],agents:e.module.agent,contactEmail:e.module.contact[i].email,threads:e.module.thread,threadIds:r,conversationIds:s}},{getAgentsList:C.g,getThread:I.j})(me)},947:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=l(a(0)),i=l(a(1)),r=l(a(953)),s=l(a(151));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onChange=a.onChange.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),n(t,[{key:"onChange",value:function(e){var t=this.props,a=t.onChange,n=t.checked;a&&a(!n,e)}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.name,n=e.checked,i=e.disabled,l=e.palette,c=e.text,d=e.labelPalette,u=e.active,m=e.labelSize,p=e.getRef,h=e.dataId,f=u?r.default[l+"_active"]:"",g=i?r.default.disabled:r.default.pointer;return o.default.createElement("span",{className:r.default.container+" "+g+" "+(c?r.default.layout:r.default.basic)+" "},o.default.createElement("input",{type:"checkbox",className:r.default.input+" "+(n?r.default.checked:""),name:a,checked:n,disabled:i,ref:p}),o.default.createElement("label",{className:r.default["label_"+l]+" "+f+" "+(c?r.default.layoutshrink:""),onClick:this.onChange,"data-id":h},o.default.createElement("span",null)),c&&o.default.createElement("span",{className:r.default.text},o.default.createElement(s.default,{text:c,palette:d,id:t,size:m,type:"title",clipped:!0,onClick:this.onChange})))}}]),t}();t.default=c,c.defaultProps={active:!1,checked:!1,disabled:!1,labelPalette:"default",labelSize:"medium",palette:"primary"},c.propTypes={active:i.default.bool,checked:i.default.bool,dataId:i.default.string,disabled:i.default.bool,getRef:i.default.func,id:i.default.string.isRequired,labelPalette:i.default.oneOf(["default","primary","secondary","danger","mandatory"]),labelSize:i.default.oneOf(["small","medium","large"]),name:i.default.string,onChange:i.default.func,palette:i.default.oneOf(["primary","danger"]),text:i.default.string},c.propTypesDescription={disabled:" ",checked:" ",active:" ",labelPalette:" ",labelSize:" ",getRef:" ",palette:" ",onChange:" ",text:" "}},949:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectComponent=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=_(o),r=_(a(1)),s=_(a(80)),l=_(a(72)),c=_(a(234)),d=_(a(99)),u=a(202),m=_(u),p=_(a(236)),h=_(a(237)),f=_(a(957)),g=_(a(63)),v=a(358),b=a(201);function _(e){return e&&e.__esModule?e:{default:e}}var y=[],E=t.SelectComponent=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.getFilterSuggestions=(0,v.makeGetMultiSelectFilterSuggestions)(),a.formatOptions=(0,v.makeFormatOptions)(),a.getSelectedValue=(0,v.makeGetSelectedValueText)(),a.selectedFormatOptions={};var n=e.selectedValue,o=e.searchDebounceTime,i=void 0===o?500:o,r=e.isDefaultSelectValue,s=a.handleFormatOptions(a.props),l=s.allOptions,c=s.normalizedAllOptions,d=s.optionsOrder,u=s.normalizedFormatOptions,m=a.getSelectedValue({optionsOrder:d,selectedValue:n,normalizedFormatOptions:u,selectedFormatOptions:a.selectedFormatOptions,isDefaultSelectValue:r}),p=m.selected,h=m.hoverIndex,f=m.selectedValueDetails,g=m.selectedId;m.isSelfValueChanged;return a.state={selected:p,options:l,optionsNormalize:c,hoverIndex:h,searchStr:"",isFetchingOptions:!1,selectedId:g,selectedValueIndex:h},a.optionsOrder=d,a._isMounted=!1,a.normalizedFormatOptions=u,a.allSelectedOptions=f,a.handleChange=a.handleChange.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleSearch=a.handleSearch.bind(a),a.handleFilterSuggestions=a.handleFilterSuggestions.bind(a),a.handleMouseEnter=a.handleMouseEnter.bind(a),a.handleFetchOptions=a.handleFetchOptions.bind(a),a.handleGetNextOptions=a.handleGetNextOptions.bind(a),a.handleScroll=a.handleScroll.bind(a),a.handleSearchOptions=(0,b.debounce)(a.handleSearchOptions.bind(a),i),a.suggestionContainerRef=a.suggestionContainerRef.bind(a),a.suggestionItemRef=a.suggestionItemRef.bind(a),a.searchInputRef=a.searchInputRef.bind(a),a.valueInputRef=a.valueInputRef.bind(a),a.togglePopup=a.togglePopup.bind(a),a.handleSelectFocus=a.handleSelectFocus.bind(a),a.handleFormatOptions=a.handleFormatOptions.bind(a),a.handlePopupClose=a.handlePopupClose.bind(a),a.handleClearSearch=a.handleClearSearch.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),n(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectedValue,a=e.isDefaultSelectValue,n=this.state.hoverIndex,o=this.handleFormatOptions(e),i=o.allOptions,r=o.normalizedAllOptions,s=o.optionsOrder,l=o.normalizedFormatOptions,c=this.selectedFormatOptions,d=this.getSelectedValue({optionsOrder:s,selectedValue:t,normalizedFormatOptions:l,selectedFormatOptions:c,isDefaultSelectValue:a}),u=d.selected,m=d.hoverIndex,p=d.selectedValueDetails,h=d.selectedId;d.isSelfValueChanged,this.props.selectedValue;this.selectedFormatOptions=Object.assign(c,p),this.normalizedFormatOptions=l,this.optionsOrder=s,this.setState({options:i,optionsNormalize:r,selected:u,hoverIndex:n||m,selectedId:h,selectedValueIndex:m})}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.suggestionContainer,n=this.optionsOrder,o=this.isSelectWithAvatarComponent,i=this.state,r=i.hoverIndex,s=i.searchStr,l=i.selectedValueIndex,c=this.props,d=c.needLocalSearch,u=c.onDropBoxClose,m=c.onDropBoxOpen,p=c.needSearch,h=c.onSearch,f=c.isPopupOpen,g=this["suggestion_"+((0,b.getIsEmptyValue)(n[r])?"":n[r])];f&&(0,b.scrollTo)(a,g),e.isPopupOpen!==f&&(f?(m&&this.handleFetchOptions(m,s),setTimeout(function(){t.searchInput&&t.searchInput.focus()},10)):(p&&this.valueInput&&this.valueInput.focus(),u&&u(),h&&h(""),this.setState({searchStr:o?s:"",hoverIndex:l})));var v=this.props,_=v.isNextOptions,y=v.getNextOptions,E=(f?this.handleFilterSuggestions():[]).length;f&&E<=5&&_&&y&&!d&&this.handleFetchOptions(y,s)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleFormatOptions",value:function(e){var t=e.options,a=e.valueField,n=e.textField;return this.formatOptions({options:t,valueField:a,textField:n})}},{key:"handleChange",value:function(e,t,a,n){n&&n.preventDefault&&n.preventDefault();var o=this.props,i=o.onChange,r=o.isReadOnly,s=this.state.optionsNormalize;!r&&i&&i(e,s[e]),this.valueInput&&this.valueInput.focus(),this.handlePopupClose(n)}},{key:"handleKeyDown",value:function(e){var t=this.props,a=t.onChange,n=t.isPopupOpen,o=this.state,i=o.hoverIndex,r=o.optionsNormalize,s=this.handleFilterSuggestions(),l=e.keyCode;if(n&&(38===l||40===l)&&e.preventDefault&&e.preventDefault(),38===l&&n&&s.length)0===i||(i-=1),this.setState({hoverIndex:i});else if(40===l&&n&&s.length)i===s.length-1||(i===s.length-3&&this.handleGetNextOptions(),i+=1),this.setState({hoverIndex:i});else if(13===l){var c=(s[i]||{}).id;n&&!(0,b.getIsEmptyValue)(c)&&a&&a(c,r[c]),n?!(0,b.getIsEmptyValue)(c)&&this.togglePopup(e):this.togglePopup(e)}}},{key:"handleSearchOptions",value:function(){var e=this.props.onSearch,t=this.state.searchStr;t&&this.handleFetchOptions(e,t)}},{key:"handleSearch",value:function(e){var t=this,a=this.state.searchStr,n=void 0===a?"":a,o=this.props.onSearch,i=n.toLowerCase().replace(/\s+/g,"")!==e.toLowerCase().replace(/\s+/g,"");this.setState({searchStr:e,hoverIndex:0},function(){e?i&&o&&t.handleSearchOptions():o&&t.handleFetchOptions(o,"")})}},{key:"handleMouseEnter",value:function(e){var t=this.state.hoverIndex,a=this.optionsOrder.indexOf(e);t!==a&&this.setState({hoverIndex:a})}},{key:"handleFilterSuggestions",value:function(){var e=this.props,t=e.needLocalSearch,a=e.excludeOptions,n=void 0===a?y:a,o=e.needSearch,i=this.state,r=i.options,s=void 0===r?y:r,l=i.searchStr;return o&&l&&l.trim().length||n&&n.length?this.getFilterSuggestions({options:s,selectedOptions:n,searchStr:l,needSearch:t}).suggestions:s}},{key:"handleScroll",value:function(e){e.target.scrollTop+e.target.offsetHeight>e.target.scrollHeight-1&&this.handleGetNextOptions()}},{key:"handleFetchOptions",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.state.isFetchingOptions,o=void 0!==n&&n,i=this._isMounted;if(!o&&e){this.setState({isFetchingOptions:!0});try{return e(a).then(function(){i&&t.setState({isFetchingOptions:!1})},function(){i&&t.setState({isFetchingOptions:!1})})}catch(e){i&&this.setState({isFetchingOptions:!1})}}}},{key:"handleGetNextOptions",value:function(){var e=this.props,t=e.isNextOptions,a=e.getNextOptions,n=this.state.searchStr;t&&a&&this.handleFetchOptions(a,n)}},{key:"togglePopup",value:function(e){var t=this.props,a=t.togglePopup,n=t.isReadOnly,o=t.defaultDropBoxPosition;!n&&a(e,o?o+"Center":null)}},{key:"handlePopupClose",value:function(e){(0,this.props.closePopupOnly)(e)}},{key:"suggestionContainerRef",value:function(e){this.suggestionContainer=e}},{key:"suggestionItemRef",value:function(e,t,a){this["suggestion_"+a]=e}},{key:"searchInputRef",value:function(e){this.searchInput=e}},{key:"valueInputRef",value:function(e){var t=this.props.getRef;this.valueInput=e,t&&t(e)}},{key:"handleSelectFocus",value:function(e){var t=(e||{}).target;t&&t.setSelectionRange(t,0)}},{key:"handleClearSearch",value:function(){var e=this;this.handleSearch(""),setTimeout(function(){e.searchInput&&e.searchInput.focus()},1)}},{key:"render",value:function(){var e=this.props,t=e.needSearch,a=e.dropBoxSize,n=e.emptyMessage,o=e.searchEmptyMessage,r=e.needBorder,s=e.needSelectDownIcon,v=e.position,b=e.defaultDropBoxPosition,_=e.getTargetRef,y=e.getContainerRef,E=e.isPopupOpen,C=e.removeClose,I=e.isPopupReady,A=e.animationStyle,k=e.textBoxSize,S=e.textBoxVariant,N=e.searchBoxSize,x=e.searchBoxPlaceHolder,D=e.maxLength,O=e.isDisabled,w=e.title,T=e.size,P=e.placeHolder,B=e.className,F=e.portalId,R=e.isReadOnly,V=e.dataId,M=this.state,L=M.hoverIndex,j=M.selected,z=M.searchStr,K=M.isFetchingOptions,U=M.selectedId,H=M.options,Z=this.handleFilterSuggestions();return i.default.createElement("div",{className:f.default.container+" "+f.default["box_"+T]+" ","data-title":O?w:""},i.default.createElement("div",{className:""+(B||""),onClick:O||R?null:this.togglePopup,ref:_},s?i.default.createElement(c.default,{isDisabled:O,iconRotated:E,inputRef:this.valueInputRef,maxLength:D,needBorder:r,onFocus:this.handleSelectFocus,onKeyDown:this.handleKeyDown,placeHolder:P,isReadOnly:!0,size:k,value:j,variant:S,needReadOnlyStyle:!!R,dataId:V,isClickable:!R&&!O,className:R||O?"":f.default.input,needEffect:!R},i.default.createElement("div",{className:f.default.arrowIcon,"data-id":V+"_downIcon"},i.default.createElement(g.default,{name:"blockDownArrow",size:"8"}))):i.default.createElement(d.default,{disabled:O,inputRef:this.valueInputRef,maxLength:D,needBorder:r,onFocus:this.handleSelectFocus,onKeyDown:this.handleKeyDown,placeHolder:P,readOnly:!0,size:k,value:j,variant:S,needReadOnlyStyle:!!R,dataId:V,isClickable:!R&&!O})),R||O||!E?null:i.default.createElement(l.default,{animationStyle:A,boxPosition:v||b+"Center",getRef:y,isActive:I,isAnimate:!0,isArrow:!1,onClick:C,portalId:F,dataIdContainer:V+"_suggestions"},i.default.createElement(m.default,{className:f.default.box,onScroll:this.handleScroll},t?i.default.createElement(u.CardHeader,null,i.default.createElement("div",{className:f.default.search+" "+f.default[T]},i.default.createElement(c.default,{inputRef:this.searchInputRef,maxLength:D,onChange:this.handleSearch,onKeyDown:this.handleKeyDown,placeHolder:x,size:N,value:z,onClear:this.handleClearSearch,dataIdSearchBox:V+"_searchBox"}))):null,i.default.createElement(u.CardContent,{className:a?f.default[a]:"",eleRef:this.suggestionContainerRef,dataId:V+"_Options"},Z.length?i.default.createElement(p.default,{activeId:U,suggestions:Z,getRef:this.suggestionItemRef,hoverOption:L,onClick:this.handleChange,onMouseEnter:this.handleMouseEnter}):i.default.createElement(h.default,{emptyMessage:n,isLoading:K,options:H,searchEmptyMessage:o,searchString:z,suggestions:Z,dataIdLoading:V+"_loading",dataIdSrchEmptyMsg:V+"_srchEmptyMsg",dataIdNoOptnsMsg:V+"_noOptnsMsg"})))))}}]),t}();E.propTypes={animationStyle:r.default.string,className:r.default.string,closePopupOnly:r.default.func,dataId:r.default.string,defaultDropBoxPosition:r.default.oneOf(["bottom","top","left","right"]),dropBoxSize:r.default.oneOf(["small","medium","large"]),emptyMessage:r.default.string,excludeOptions:r.default.array,getContainerRef:r.default.func,getNextOptions:r.default.func,getRef:r.default.func,getTargetRef:r.default.func,isDefaultSelectValue:r.default.bool,isDisabled:r.default.bool,isNextOptions:r.default.bool,isPopupOpen:r.default.bool,isPopupReady:r.default.bool,isReadOnly:r.default.bool,maxLength:r.default.string,needBorder:r.default.bool,needLocalSearch:r.default.bool,needSearch:r.default.bool,needSelectDownIcon:r.default.bool,onChange:r.default.func.isRequired,onDropBoxClose:r.default.func,onDropBoxOpen:r.default.func,onSearch:r.default.func,options:r.default.oneOfType([r.default.arrayOf(r.default.oneOfType([r.default.string,r.default.number])),r.default.arrayOf(r.default.shape({id:r.default.oneOfType([r.default.string,r.default.number]),text:r.default.oneOfType([r.default.string,r.default.number])}))]).isRequired,placeHolder:r.default.string,portalId:r.default.string,position:r.default.string,removeClose:r.default.func,searchBoxPlaceHolder:r.default.string,searchBoxSize:r.default.string,searchDebounceTime:r.default.number,searchEmptyMessage:r.default.string,selectedValue:r.default.oneOfType([r.default.oneOfType([r.default.string,r.default.number]),r.default.shape({id:r.default.oneOfType([r.default.string,r.default.number]),text:r.default.oneOfType([r.default.string,r.default.number])})]),size:r.default.oneOf(["small","medium"]),textBoxSize:r.default.string,textBoxVariant:r.default.string,textField:r.default.string,title:r.default.string,togglePopup:r.default.func,valueField:r.default.string},E.propTypesDescription={size:" ",title:" ",isDisabled:" ",maxLength:" ",searchBoxSize:" ",searchBoxPlaceHolder:" ",textBoxSize:" ",textBoxVariant:" ",options:" ",selectedValue:" ",onChange:" ",emptyMessage:" ",needSearch:" ",valueField:" ",textField:" "},E.defaultProps={animationStyle:"bounce",defaultDropBoxPosition:"bottom",dropBoxSize:"small",isDefaultSelectValue:!0,isDisabled:!1,isReadOnly:!1,needBorder:!0,needLocalSearch:!0,needSearch:!1,needSelectDownIcon:!0,placeHolder:"",searchBoxPlaceHolder:"Search",searchBoxSize:"medium",size:"medium",dataId:"selectComponent",textBoxSize:"medium",textBoxVariant:"default",textField:"text",valueField:"id"},E.displayName="Select";var C=(0,s.default)(E);C.propTypes=E.propTypes,C.defaultProps=E.defaultProps,t.default=C},953:function(e,t,a){e.exports={container:"CheckBox-module__container common-module__offSelection",layout:"CheckBox-module__layout common-module__dflex common-module__flexrow common-module__alignVertical",basic:"CheckBox-module__basic",input:"CheckBox-module__input",label:"CheckBox-module__label",disabled:"CheckBox-module__disabled common-module__disabled",pointer:"CheckBox-module__pointer",layoutshrink:"CheckBox-module__layoutshrink common-module__flexshrink",text:"CheckBox-module__text common-module__flexgrow",checked:"CheckBox-module__checked",tick:"CheckBox-module__tick",label_primary:"CheckBox-module__label_primary CheckBox-module__label",label_danger:"CheckBox-module__label_danger CheckBox-module__label",primary_active:"CheckBox-module__primary_active",danger_active:"CheckBox-module__danger_active"}},956:function(e,t,a){"use strict";a.d(t,"i",function(){return m}),a.d(t,"g",function(){return p}),a.d(t,"b",function(){return h}),a.d(t,"j",function(){return f}),a.d(t,"h",function(){return g}),a.d(t,"c",function(){return v}),a.d(t,"e",function(){return b}),a.d(t,"a",function(){return _}),a.d(t,"k",function(){return E}),a.d(t,"d",function(){return I}),a.d(t,"f",function(){return A}),a.d(t,"l",function(){return k});a(20);var n=a(2),o=a.n(n),i=a(15),r=a(6),s=a(7),l=a(17),c=a(46),d=a(3),u=a(39);function m(e){return{types:Object(r.m)("AGENTS_COUNT"),callAPI:function(t){var a=Object(l.r)(t);return Object(i.a)("/api/v1/agentsTicketsCount?"+Object(c.a)(t)+"&agentIds="+e,!1,{orgId:t.currentOrgId}).get().then(function(e){return 204!==e.responseStatus?(e.data=e.data.map(function(e){return o()({},e,{id:e.agentId})}),{countData:e.data,deptId:a}):{}})}}}function p(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{types:Object(r.m)(d.L.AGENT),callAPI:function(r){return Object(i.a)("/api/v1/agents?"+(e&&"allDepartment"!==e?"departmentId="+e:"")+"&from="+t+"&limit="+a+"&status=ACTIVE&isConfirmed="+n,!1,{orgId:r.currentOrgId}).get().then(function(t){if(204!==t.responseStatus){var n=t.data.length<a,i=Object(s.normalize)(t.data,Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)));return o()(i,{noMoreData:n,depId:e})}return{entities:{noMoreData:!0},result:[]}})}}}function h(e,t){return{types:Object(r.m)(d.L.AGENT),callAPI:function(a){return Object(i.a)("/api/v1/agents/"+e,!1,{orgId:a.currentOrgId}).get().then(function(e){var a=Object(s.normalize)(e,Object(s.schema)(d.L.AGENT_L));return o()(a,{depId:t})})}}}function f(e,t,a){return{types:Object(r.m)("AGENT_SEARCH"),callAPI:function(n){return Object(i.a)("/api/v1/agents?searchStr="+e+"&from="+t+"&limit="+a,!1,{orgId:n.currentOrgId}).get().then(function(e){if(204!==e.responseStatus){var n=e.data.length<a,i=Object(s.normalize)(e.data,Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)));return o()(i,{noMoreData:n})}return 1===t?{entities:{noMoreData:!0,isEmpty:!0},result:[]}:{entities:{noMoreData:!0},result:[]}})}}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],a=arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.u,u=arguments[4];return{types:Object(r.m)(d.L.AGENT),callAPI:function(r){var m={activeAgents:"status=ACTIVE",deActiveAgents:"status=DISABLED",notConfirmedAgents:"isConfirmed=false",allAgents:"",activeConfirmedAgents:"status=ACTIVE&isConfirmed=true",activeConfirmedNonLightAgents:"status=ACTIVE&isConfirmed=true&rolePermissionType=${NON_LIGHT}"}[e.replace("Search","")]||"",p=u||Object(l.r)(r),h=u?"&departmentId="+u:Object(c.a)(r,!0),f="/api/v1/agents?"+(m?m+"&":"")+"from="+t+"&limit="+(2*n>200?200:2*n)+(a?"&searchStr=*"+a+"*":"")+h;return Object(i.a)(encodeURI(f),!1,{orgId:r.currentOrgId}).get().then(function(i){return o()({},Object(s.normalize)(204!==i.responseStatus?i.data:[],Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L))),{deptId:p,from:t,limit:n,isNext:!!i.data&&i.data.length>n,searchStr:a,agentType:e})},function(e){throw e})}}}function v(e){return{types:Object(r.m)("AGENT"),shouldCallAPI:function(){return e.length>=1},callAPI:function(t){return Object(i.a)("/api/v1/agentsByIds?agentIds="+e.join(),!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(s.normalize)(204!==e.responseStatus?e.data:[],Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)))})}}}function b(e){return{types:Object(r.m)("TEAM_AGENT"),callAPI:function(t){return Object(i.a)("/api/v1/teams/"+e+"/members",!1,{orgId:t.currentOrgId}).get().then(function(e){return Object(s.normalize)(e.members,Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L)))})}}}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a="";return t.map(function(t){void 0!==e[t]&&(a+="&"+t+"="+e[t])}),a}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a=arguments[2];return void 0!==e[t]?e[t]:a}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=y(e,"searchType","string"),a=e.searchStr;return a&&(a="string*"==t?a+"*":"*string*"==t?"*"+a+"*":a),a}function C(e){var t=e.isConfirmed,a=e.status;switch(a){case u.a:return u.a;case u.d:return u.d;case u.c:return u.c;default:if(void 0!==t&&!t)return u.l;if(void 0===a)return u.b}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.from=y(e,"from","1"),e.limit=y(e,"limit","100"),e.searchStr=E(e);var t=e.from>1?u.k:u.j;return{types:Object(r.m)(t),callAPI:function(t){var a="/api/v1/agents?orgId="+t.currentOrgId;return a+=_(e,["from","limit","status","isConfirmed","searchStr","departmentId","departmentIds","profileIds","roleIds"]),Object(i.a)(a).get().then(function(t){return o()(Object(s.normalize)(void 0!==t.data?t.data:[],Object(s.arrayOf)(Object(s.schema)(d.L.AGENT_L))),{status:C(e)})})}}}function A(e,t,a){var n={status:e,isConfirmed:t,includeLightAgent:a};return n.includeLightAgent=y(n,"includeLightAgent",!0),{types:Object(r.m)(u.i),callAPI:function(e){var t="/api/v1/agents/count?orgId="+e.currentOrgId;return t+=_(n,["status","isConfirmed","includeLightAgent"]),Object(i.a)(t).get().then(function(e){return o()({},e,{status:C(n)})})}}}function k(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:u.m,data:{isEnabled:e}}}},957:function(e,t,a){e.exports={input:"Select-module__input",small:"Select-module__small",medium:"Select-module__medium",large:"Select-module__large",emptyState:"Select-module__emptyState common-module__semibold common-module__ftsmooth",box_small:"Select-module__box_small",box_medium:"Select-module__box_medium",hide:"Select-module__hide common-module__vishidden",container:"Select-module__container",arrowIcon:"Select-module__arrowIcon",box:"Select-module__box",search:"Select-module__search"}},997:function(e,t,a){"use strict";function n(){for(var e=this,t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];a.forEach(function(t){e[t]=e[t].bind(e)})}a.d(t,"a",function(){return n})}}]);