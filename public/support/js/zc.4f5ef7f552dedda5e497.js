(window.deskappJsonp=window.deskappJsonp||[]).push([[145],{1303:function(t,e){t.exports=function(t){function e(t){"undefined"!=typeof console&&(console.error||console.log)("[Script Loader]",t)}try{"undefined"!=typeof execScript&&"undefined"!=typeof attachEvent&&"undefined"==typeof addEventListener?execScript(t):"undefined"!=typeof eval?eval.call(null,t):e("EvalError: No eval function available")}catch(t){e(t)}}},1624:function(t,e){t.exports='!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})}(this,function(t){"use strict";function n(t){return function(n,e){return Ws(t(n),e)}}function e(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=ol?10:o>=ul?5:o>=al?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ol?10:o>=ul?5:o>=al?2:1)}function r(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=ol?i*=10:o>=ul?i*=5:o>=al&&(i*=2),n<t?-i:i}function i(){}function o(t,n){var e=new i;if(t instanceof i)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,o=-1,u=t.length;if(null==n)for(;++o<u;)e.set(o,t[o]);else for(;++o<u;)e.set(n(r=t[o],o,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}function u(){}function a(t,n){var e=new u;if(t instanceof u)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}function c(t){return"translate("+(t+.5)+",0)"}function s(t){return"translate(0,"+(t+.5)+")"}function l(t){return function(n){return+t(n)}}function f(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}function h(){return!this.__axis}function p(t,n){function e(e){var c=null==i?n.ticks?n.ticks.apply(n,r):n.domain():i,s=null==o?n.tickFormat?n.tickFormat.apply(n,r):ml:o,y=Math.max(u,0)+p,_=n.range(),m=+_[0]+.5,x=+_[_.length-1]+.5,w=(n.bandwidth?f:l)(n.copy()),M=e.selection?e.selection():e,b=M.selectAll(".domain").data([null]),E=M.selectAll(".tick").data(c,n).order(),S=E.exit(),k=E.enter().append("g").attr("class","tick"),T=E.select("line"),A=E.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),E=E.merge(k),T=T.merge(k.append("line").attr("stroke","#000").attr(g+"2",v*u)),A=A.merge(k.append("text").attr("fill","#000").attr(g,v*y).attr("dy",t===xl?"0em":t===Ml?"0.71em":"0.32em")),e!==M&&(b=b.transition(e),E=E.transition(e),T=T.transition(e),A=A.transition(e),S=S.transition(e).attr("opacity",El).attr("transform",function(t){return isFinite(t=w(t))?d(t):this.getAttribute("transform")}),k.attr("opacity",El).attr("transform",function(t){var n=this.parentNode.__axis;return d(n&&isFinite(n=n(t))?n:w(t))})),S.remove(),b.attr("d",t===bl||t==wl?"M"+v*a+","+m+"H0.5V"+x+"H"+v*a:"M"+m+","+v*a+"V0.5H"+x+"V"+v*a),E.attr("opacity",1).attr("transform",function(t){return d(w(t))}),T.attr(g+"2",v*u),A.attr(g,v*y).text(s),M.filter(h).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===wl?"start":t===bl?"end":"middle"),M.each(function(){this.__axis=w})}var r=[],i=null,o=null,u=6,a=6,p=3,v=t===xl||t===bl?-1:1,g=t===bl||t===wl?"x":"y",d=t===xl||t===Ml?c:s;return e.scale=function(t){return arguments.length?(n=t,e):n},e.ticks=function(){return r=_l.call(arguments),e},e.tickArguments=function(t){return arguments.length?(r=null==t?[]:_l.call(t),e):r.slice()},e.tickValues=function(t){return arguments.length?(i=null==t?null:_l.call(t),e):i&&i.slice()},e.tickFormat=function(t){return arguments.length?(o=t,e):o},e.tickSize=function(t){return arguments.length?(u=a=+t,e):u},e.tickSizeInner=function(t){return arguments.length?(u=+t,e):u},e.tickSizeOuter=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(p=+t,e):p},e}function v(t){return p(xl,t)}function g(t){return p(wl,t)}function d(t){return p(Ml,t)}function y(t){return p(bl,t)}function _(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new m(r)}function m(t){this._=t}function x(t,n){return t.trim().split(/^|\\s+/).map(function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}function w(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function M(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Sl,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}function b(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===kl&&n.documentElement.namespaceURI===kl?n.createElement(t):n.createElementNS(e,t)}}function E(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function S(){return new k}function k(){this._="@"+(++Nl).toString(36)}function T(t,n,e){return t=A(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function A(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function C(t){return t.trim().split(/^|\\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}function N(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function P(t,n,e){var r=Ll.hasOwnProperty(t.type)?T:A;return function(i,o,u){var a,c=this.__on,s=r(n,o,u);if(c)for(var l=0,f=c.length;l<f;++l)if((a=c[l]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=s,a.capture=e),void(a.value=n);this.addEventListener(t.type,s,e),a={type:t.type,name:t.name,value:n,listener:s,capture:e},c?c.push(a):this.__on=[a]}}function z(n,e,r,i){var o=t.event;n.sourceEvent=t.event,t.event=n;try{return e.apply(r,i)}finally{t.event=o}}function D(){}function F(){return[]}function L(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function U(t,n,e,r,i,o){for(var u,a=0,c=n.length,s=o.length;a<s;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new L(t,o[a]);for(;a<c;++a)(u=n[a])&&(i[a]=u)}function q(t,n,e,r,i,o,u){var a,c,s,l={},f=n.length,h=o.length,p=new Array(f);for(a=0;a<f;++a)(c=n[a])&&(p[a]=s=$l+u.call(c,c.__data__,a,n),s in l?i[a]=c:l[s]=c);for(a=0;a<h;++a)s=$l+u.call(t,o[a],a,o),(c=l[s])?(r[a]=c,c.__data__=o[a],l[s]=null):e[a]=new L(t,o[a]);for(a=0;a<f;++a)(c=n[a])&&l[p[a]]===c&&(i[a]=c)}function R(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Y(t){return function(){this.removeAttribute(t)}}function I(t){return function(){this.removeAttributeNS(t.space,t.local)}}function O(t,n){return function(){this.setAttribute(t,n)}}function j(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function H(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function B(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function X(t){return function(){this.style.removeProperty(t)}}function G(t,n,e){return function(){this.style.setProperty(t,n,e)}}function V(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function $(t,n){return t.style.getPropertyValue(n)||cf(t).getComputedStyle(t,null).getPropertyValue(n)}function W(t){return function(){delete this[t]}}function Z(t,n){return function(){this[t]=n}}function Q(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function J(t){return t.trim().split(/^|\\s+/)}function K(t){return t.classList||new tt(t)}function tt(t){this._node=t,this._names=J(t.getAttribute("class")||"")}function nt(t,n){for(var e=K(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function et(t,n){for(var e=K(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function rt(t){return function(){nt(this,t)}}function it(t){return function(){et(this,t)}}function ot(t,n){return function(){(n.apply(this,arguments)?nt:et)(this,t)}}function ut(){this.textContent=""}function at(t){return function(){this.textContent=t}}function ct(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function st(){this.innerHTML=""}function lt(t){return function(){this.innerHTML=t}}function ft(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function ht(){this.nextSibling&&this.parentNode.appendChild(this)}function pt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vt(){return null}function gt(){var t=this.parentNode;t&&t.removeChild(this)}function dt(t,n,e){var r=cf(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function yt(t,n){return function(){return dt(this,t,n)}}function _t(t,n){return function(){return dt(this,t,n.apply(this,arguments))}}function mt(t,n){this._groups=t,this._parents=n}function xt(){return new mt([[document.documentElement]],wf)}function wt(){t.event.stopImmediatePropagation()}function Mt(t,n){var e=t.document.documentElement,r=Mf(t).on("dragstart.drag",null);n&&(r.on("click.drag",kf,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function bt(t,n,e,r,i,o,u,a,c,s){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=u,this.dx=a,this.dy=c,this._=s}function Et(){return!t.event.button}function St(){return this.parentNode}function kt(n){return null==n?{x:t.event.x,y:t.event.y}:n}function Tt(){return"ontouchstart"in this}function At(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Ct(){}function Nt(t){var n;return t=(t+"").trim().toLowerCase(),(n=Ff.exec(t))?(n=parseInt(n[1],16),new Lt(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1)):(n=Lf.exec(t))?Pt(parseInt(n[1],16)):(n=Uf.exec(t))?new Lt(n[1],n[2],n[3],1):(n=qf.exec(t))?new Lt(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Rf.exec(t))?zt(n[1],n[2],n[3],n[4]):(n=Yf.exec(t))?zt(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=If.exec(t))?Ut(n[1],n[2]/100,n[3]/100,1):(n=Of.exec(t))?Ut(n[1],n[2]/100,n[3]/100,n[4]):jf.hasOwnProperty(t)?Pt(jf[t]):"transparent"===t?new Lt(NaN,NaN,NaN,0):null}function Pt(t){return new Lt(t>>16&255,t>>8&255,255&t,1)}function zt(t,n,e,r){return r<=0&&(t=n=e=NaN),new Lt(t,n,e,r)}function Dt(t){return t instanceof Ct||(t=Nt(t)),t?(t=t.rgb(),new Lt(t.r,t.g,t.b,t.opacity)):new Lt}function Ft(t,n,e,r){return 1===arguments.length?Dt(t):new Lt(t,n,e,null==r?1:r)}function Lt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Ut(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Yt(t,n,e,r)}function qt(t){if(t instanceof Yt)return new Yt(t.h,t.s,t.l,t.opacity);if(t instanceof Ct||(t=Nt(t)),!t)return new Yt;if(t instanceof Yt)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,c=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=c<.5?o+i:2-o-i,u*=60):a=c>0&&c<1?0:u,new Yt(u,a,c,t.opacity)}function Rt(t,n,e,r){return 1===arguments.length?qt(t):new Yt(t,n,e,null==r?1:r)}function Yt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function It(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Ot(t){if(t instanceof Ht)return new Ht(t.l,t.a,t.b,t.opacity);if(t instanceof Zt){var n=t.h*Hf;return new Ht(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof Lt||(t=Dt(t));var e=Vt(t.r),r=Vt(t.g),i=Vt(t.b),o=Bt((.4124564*e+.3575761*r+.1804375*i)/Xf),u=Bt((.2126729*e+.7151522*r+.072175*i)/Gf);return new Ht(116*u-16,500*(o-u),200*(u-Bt((.0193339*e+.119192*r+.9503041*i)/Vf)),t.opacity)}function jt(t,n,e,r){return 1===arguments.length?Ot(t):new Ht(t,n,e,null==r?1:r)}function Ht(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Bt(t){return t>Qf?Math.pow(t,1/3):t/Zf+$f}function Xt(t){return t>Wf?t*t*t:Zf*(t-$f)}function Gt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Vt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $t(t){if(t instanceof Zt)return new Zt(t.h,t.c,t.l,t.opacity);t instanceof Ht||(t=Ot(t));var n=Math.atan2(t.b,t.a)*Bf;return new Zt(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Wt(t,n,e,r){return 1===arguments.length?$t(t):new Zt(t,n,e,null==r?1:r)}function Zt(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Qt(t){if(t instanceof Kt)return new Kt(t.h,t.s,t.l,t.opacity);t instanceof Lt||(t=Dt(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(oh*r+rh*n-ih*e)/(oh+rh-ih),o=r-i,u=(eh*(e-i)-th*o)/nh,a=Math.sqrt(u*u+o*o)/(eh*i*(1-i)),c=a?Math.atan2(u,o)*Bf-120:NaN;return new Kt(c<0?c+360:c,a,i,t.opacity)}function Jt(t,n,e,r){return 1===arguments.length?Qt(t):new Kt(t,n,e,null==r?1:r)}function Kt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function tn(t,n,e,r,i){var o=t*t,u=o*t;return((1-3*t+3*o-u)*n+(4-6*o+3*u)*e+(1+3*t+3*o-3*u)*r+u*i)/6}function nn(t,n){return function(e){return t+e*n}}function en(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function rn(t,n){var e=n-t;return e?nn(t,e>180||e<-180?e-360*Math.round(e/360):e):vh(isNaN(t)?n:t)}function on(t){return 1==(t=+t)?un:function(n,e){return e-n?en(n,e,t):vh(isNaN(n)?e:n)}}function un(t,n){var e=n-t;return e?nn(t,e):vh(isNaN(t)?n:t)}function an(t){return function(n){var e,r,i=n.length,o=new Array(i),u=new Array(i),a=new Array(i);for(e=0;e<i;++e)r=Ft(n[e]),o[e]=r.r||0,u[e]=r.g||0,a[e]=r.b||0;return o=t(o),u=t(u),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=u(t),r.b=a(t),r+""}}}function cn(t){return function(){return t}}function sn(t){return function(n){return t(n)+""}}function ln(t){return"none"===t?Ah:(uh||(uh=document.createElement("DIV"),ah=document.documentElement,ch=document.defaultView),uh.style.transform=t,t=ch.getComputedStyle(ah.appendChild(uh),null).getPropertyValue("transform"),ah.removeChild(uh),t=t.slice(7,-1).split(","),Ch(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function fn(t){return null==t?Ah:(sh||(sh=document.createElementNS("http://www.w3.org/2000/svg","g")),sh.setAttribute("transform",t),(t=sh.transform.baseVal.consolidate())?(t=t.matrix,Ch(t.a,t.b,t.c,t.d,t.e,t.f)):Ah)}function hn(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,u,a){if(t!==i||r!==o){var c=u.push("translate(",null,n,null,e);a.push({i:c-4,x:xh(t,i)},{i:c-2,x:xh(r,o)})}else(i||o)&&u.push("translate("+i+n+o+e)}function u(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:xh(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}function a(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:xh(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}function c(t,n,e,r,o,u){if(t!==e||n!==r){var a=o.push(i(o)+"scale(",null,",",null,")");u.push({i:a-4,x:xh(t,e)},{i:a-2,x:xh(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}return function(n,e){var r=[],i=[];return n=t(n),e=t(e),o(n.translateX,n.translateY,e.translateX,e.translateY,r,i),u(n.rotate,e.rotate,r,i),a(n.skewX,e.skewX,r,i),c(n.scaleX,n.scaleY,e.scaleX,e.scaleY,r,i),n=e=null,function(t){for(var n,e=-1,o=i.length;++e<o;)r[(n=i[e]).i]=n.x(t);return r.join("")}}}function pn(t){return((t=Math.exp(t))+1/t)/2}function vn(t){return((t=Math.exp(t))-1/t)/2}function gn(t){return((t=Math.exp(2*t))-1)/(t+1)}function dn(t){return function(n,e){var r=t((n=Rt(n)).h,(e=Rt(e)).h),i=un(n.s,e.s),o=un(n.l,e.l),u=un(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=u(t),n+""}}}function yn(t,n){var e=un((t=jt(t)).l,(n=jt(n)).l),r=un(t.a,n.a),i=un(t.b,n.b),o=un(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}}function _n(t){return function(n,e){var r=t((n=Wt(n)).h,(e=Wt(e)).h),i=un(n.c,e.c),o=un(n.l,e.l),u=un(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=u(t),n+""}}}function mn(t){return function n(e){function r(n,r){var i=t((n=Jt(n)).h,(r=Jt(r)).h),o=un(n.s,r.s),u=un(n.l,r.l),a=un(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=u(Math.pow(t,e)),n.opacity=a(t),n+""}}return e=+e,r.gamma=n,r}(1)}function xn(){return Gh||(Wh(wn),Gh=$h.now()+Vh)}function wn(){Gh=0}function Mn(){this._call=this._time=this._next=null}function bn(t,n,e){var r=new Mn;return r.restart(t,n,e),r}function En(){xn(),++Oh;for(var t,n=lh;n;)(t=Gh-n._time)>=0&&n._call.call(null,t),n=n._next;--Oh}function Sn(){Gh=(Xh=$h.now())+Vh,Oh=jh=0;try{En()}finally{Oh=0,Tn(),Gh=0}}function kn(){var t=$h.now(),n=t-Xh;n>Bh&&(Vh-=n,Xh=t)}function Tn(){for(var t,n,e=lh,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:lh=n);fh=t,An(r)}function An(t){if(!Oh){jh&&(jh=clearTimeout(jh));t-Gh>24?(t<1/0&&(jh=setTimeout(Sn,t-$h.now()-Vh)),Hh&&(Hh=clearInterval(Hh))):(Hh||(Xh=$h.now(),Hh=setInterval(kn,Bh)),Oh=1,Wh(Sn))}}function Cn(t,n){var e=Pn(t,n);if(e.state>tp)throw new Error("too late; already scheduled");return e}function Nn(t,n){var e=Pn(t,n);if(e.state>ep)throw new Error("too late; already started");return e}function Pn(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function zn(t,n,e){function r(t){e.state=np,e.timer.restart(i,e.delay,e.time),e.delay<=t&&i(t-e.delay)}function i(r){var s,l,f,h;if(e.state!==np)return u();for(s in c)if(h=c[s],h.name===e.name){if(h.state===rp)return Zh(i);h.state===ip?(h.state=up,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete c[s]):+s<n&&(h.state=up,h.timer.stop(),delete c[s])}if(Zh(function(){e.state===rp&&(e.state=ip,e.timer.restart(o,e.delay,e.time),o(r))}),e.state=ep,e.on.call("start",t,t.__data__,e.index,e.group),e.state===ep){for(e.state=rp,a=new Array(f=e.tween.length),s=0,l=-1;s<f;++s)(h=e.tween[s].value.call(t,t.__data__,e.index,e.group))&&(a[++l]=h);a.length=l+1}}function o(n){for(var r=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=op,1),i=-1,o=a.length;++i<o;)a[i].call(null,r);e.state===op&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){e.state=up,e.timer.stop(),delete c[n];for(var r in c)return;delete t.__transition}var a,c=t.__transition;c[n]=e,e.timer=bn(r,0,e.time)}function Dn(t,n){var e,r;return function(){var i=Nn(this,t),o=i.tween;if(o!==e){r=e=o;for(var u=0,a=r.length;u<a;++u)if(r[u].name===n){r=r.slice(),r.splice(u,1);break}}i.tween=r}}function Fn(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Nn(this,t),u=o.tween;if(u!==r){i=(r=u).slice();for(var a={name:n,value:e},c=0,s=i.length;c<s;++c)if(i[c].name===n){i[c]=a;break}c===s&&i.push(a)}o.tween=i}}function Ln(t,n,e){var r=t._id;return t.each(function(){var t=Nn(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return Pn(t,r).value[n]}}function Un(t){return function(){this.removeAttribute(t)}}function qn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rn(t,n,e){var r,i;return function(){var o=this.getAttribute(t);return o===e?null:o===r?i:i=n(r=o,e)}}function Yn(t,n,e){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===e?null:o===r?i:i=n(r=o,e)}}function In(t,n,e){var r,i,o;return function(){var u,a=e(this);return null==a?void this.removeAttribute(t):(u=this.getAttribute(t),u===a?null:u===r&&a===i?o:o=n(r=u,i=a))}}function On(t,n,e){var r,i,o;return function(){var u,a=e(this);return null==a?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),u===a?null:u===r&&a===i?o:o=n(r=u,i=a))}}function jn(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttributeNS(t.space,t.local,r(n))}}return e._value=n,e}function Hn(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttribute(t,r(n))}}return e._value=n,e}function Bn(t,n){return function(){Cn(this,t).delay=+n.apply(this,arguments)}}function Xn(t,n){return n=+n,function(){Cn(this,t).delay=n}}function Gn(t,n){return function(){Nn(this,t).duration=+n.apply(this,arguments)}}function Vn(t,n){return n=+n,function(){Nn(this,t).duration=n}}function $n(t,n){if("function"!=typeof n)throw new Error;return function(){Nn(this,t).ease=n}}function Wn(t){return(t+"").trim().split(/^|\\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}function Zn(t,n,e){var r,i,o=Wn(n)?Cn:Nn;return function(){var u=o(this,t),a=u.on;a!==r&&(i=(r=a).copy()).on(n,e),u.on=i}}function Qn(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Jn(t,n){var e,r,i;return function(){var o=$(this,t),u=(this.style.removeProperty(t),$(this,t));return o===u?null:o===e&&u===r?i:i=n(e=o,r=u)}}function Kn(t){return function(){this.style.removeProperty(t)}}function te(t,n,e){var r,i;return function(){var o=$(this,t);return o===e?null:o===r?i:i=n(r=o,e)}}function ne(t,n,e){var r,i,o;return function(){var u=$(this,t),a=e(this);return null==a&&(this.style.removeProperty(t),a=$(this,t)),u===a?null:u===r&&a===i?o:o=n(r=u,i=a)}}function ee(t,n,e){function r(){var r=this,i=n.apply(r,arguments);return i&&function(n){r.style.setProperty(t,i(n),e)}}return r._value=n,r}function re(t){return function(){this.textContent=t}}function ie(t){return function(){var n=t(this);this.textContent=null==n?"":n}}function oe(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function ue(t){return xt().transition(t)}function ae(){return++Cp}function ce(t){return+t}function se(t){return t*t}function le(t){return t*(2-t)}function fe(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function he(t){return t*t*t}function pe(t){return--t*t*t+1}function ve(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function ge(t){return 1-Math.cos(t*Lp)}function de(t){return Math.sin(t*Lp)}function ye(t){return(1-Math.cos(Fp*t))/2}function _e(t){return Math.pow(2,10*t-10)}function me(t){return 1-Math.pow(2,-10*t)}function xe(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function we(t){return 1-Math.sqrt(1-t*t)}function Me(t){return Math.sqrt(1- --t*t)}function be(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function Ee(t){return 1-Se(1-t)}function Se(t){return(t=+t)<Up?Xp*t*t:t<Rp?Xp*(t-=qp)*t+Yp:t<Op?Xp*(t-=Ip)*t+jp:Xp*(t-=Hp)*t+Bp}function ke(t){return((t*=2)<=1?1-Se(1-t):Se(t-1)+1)/2}function Te(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return Kp.time=xn(),Kp;return e}function Ae(){t.event.stopImmediatePropagation()}function Ce(t){return{type:t}}function Ne(){return!t.event.button}function Pe(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ze(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function De(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Fe(t){var n=t.__brush;return n?n.dim.output(n.selection):null}function Le(){return qe(lv)}function Ue(){return qe(fv)}function qe(n){function e(t){var e=t.property("__brush",a).selectAll(".overlay").data([Ce("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",pv.overlay).merge(e).each(function(){var t=ze(this).extent;Mf(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Ce("selection")]).enter().append("rect").attr("class","selection").attr("cursor",pv.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(n.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return pv[t.type]}),t.each(r).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",u)}function r(){var t=Mf(this),n=ze(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?n[1][0]-h/2:n[0][0]-h/2}).attr("y",function(t){return"s"===t.type[0]?n[1][1]-h/2:n[0][1]-h/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+h:h}).attr("height",function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+h:h})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function i(t,n){return t.__brush.emitter||new o(t,n)}function o(t,n){this.that=t,this.args=n,this.state=t.__brush,this.active=0}function u(){function e(){var t=Yl(E);!U||M||b||(Math.abs(t[0]-R[0])>Math.abs(t[1]-R[1])?b=!0:M=!0),R=t,w=!0,ov(),o()}function o(){var t;switch(m=R[0]-q[0],x=R[1]-q[1],k){case av:case uv:T&&(m=Math.max(z-f,Math.min(F-g,m)),h=f+m,d=g+m),A&&(x=Math.max(D-p,Math.min(L-y,x)),v=p+x,_=y+x);break;case cv:T<0?(m=Math.max(z-f,Math.min(F-f,m)),h=f+m,d=g):T>0&&(m=Math.max(z-g,Math.min(F-g,m)),h=f,d=g+m),A<0?(x=Math.max(D-p,Math.min(L-p,x)),v=p+x,_=y):A>0&&(x=Math.max(D-y,Math.min(L-y,x)),v=p,_=y+x);break;case sv:T&&(h=Math.max(z,Math.min(F,f-m*T)),d=Math.max(z,Math.min(F,g+m*T))),A&&(v=Math.max(D,Math.min(L,p-x*A)),_=Math.max(D,Math.min(L,y+x*A)))}d<h&&(T*=-1,t=f,f=g,g=t,t=h,h=d,d=t,S in vv&&O.attr("cursor",pv[S=vv[S]])),_<v&&(A*=-1,t=p,p=y,y=t,t=v,v=_,_=t,S in gv&&O.attr("cursor",pv[S=gv[S]])),C.selection&&(P=C.selection),M&&(h=P[0][0],d=P[1][0]),b&&(v=P[0][1],_=P[1][1]),P[0][0]===h&&P[0][1]===v&&P[1][0]===d&&P[1][1]===_||(C.selection=[[h,v],[d,_]],r.call(E),Y.brush())}function u(){if(Ae(),t.event.touches){if(t.event.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500),I.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Mt(t.event.view,w),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);I.attr("pointer-events","all"),O.attr("cursor",pv.overlay),C.selection&&(P=C.selection),De(P)&&(C.selection=null,r.call(E)),Y.end()}function a(){switch(t.event.keyCode){case 16:U=T&&A;break;case 18:k===cv&&(T&&(g=d-m*T,f=h+m*T),A&&(y=_-x*A,p=v+x*A),k=sv,o());break;case 32:k!==cv&&k!==sv||(T<0?g=d-m:T>0&&(f=h-m),A<0?y=_-x:A>0&&(p=v-x),k=av,O.attr("cursor",pv.selection),o());break;default:return}ov()}function s(){switch(t.event.keyCode){case 16:U&&(M=b=U=!1,o());break;case 18:k===sv&&(T<0?g=d:T>0&&(f=h),A<0?y=_:A>0&&(p=v),k=cv,o());break;case 32:k===av&&(t.event.altKey?(T&&(g=d-m*T,f=h+m*T),A&&(y=_-x*A,p=v+x*A),k=sv):(T<0?g=d:T>0&&(f=h),A<0?y=_:A>0&&(p=v),k=cv),O.attr("cursor",pv[S]),o());break;default:return}ov()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return ov()}else if(c)return;if(l.apply(this,arguments)){var f,h,p,v,g,d,y,_,m,x,w,M,b,E=this,S=t.event.target.__data__.type,k="selection"===(t.event.metaKey?S="overlay":S)?uv:t.event.altKey?sv:cv,T=n===fv?null:dv[S],A=n===lv?null:yv[S],C=ze(E),N=C.extent,P=C.selection,z=N[0][0],D=N[0][1],F=N[1][0],L=N[1][1],U=T&&A&&t.event.shiftKey,q=Yl(E),R=q,Y=i(E,arguments).beforestart();"overlay"===S?C.selection=P=[[f=n===fv?z:q[0],p=n===lv?D:q[1]],[g=n===fv?F:f,y=n===lv?L:p]]:(f=P[0][0],p=P[0][1],g=P[1][0],y=P[1][1]),h=f,v=p,d=g,_=y;var I=Mf(E).attr("pointer-events","none"),O=I.selectAll(".overlay").attr("cursor",pv[S]);if(t.event.touches)I.on("touchmove.brush",e,!0).on("touchend.brush touchcancel.brush",u,!0);else{var j=Mf(t.event.view).on("keydown.brush",a,!0).on("keyup.brush",s,!0).on("mousemove.brush",e,!0).on("mouseup.brush",u,!0);Tf(t.event.view)}Ae(),cp(E),r.call(E),Y.start()}}function a(){var t=this.__brush||{selection:null};return t.extent=s.apply(this,arguments),t.dim=n,t}var c,s=Pe,l=Ne,f=_(e,"start","brush","end"),h=6;return e.move=function(t,e){t.selection?t.on("start.brush",function(){i(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){i(this,arguments).end()}).tween("brush",function(){function t(t){u.selection=1===t&&De(s)?null:l(t),r.call(o),a.brush()}var o=this,u=o.__brush,a=i(o,arguments),c=u.selection,s=n.input("function"==typeof e?e.apply(this,arguments):e,u.extent),l=Sh(c,s);return c&&s?t:t(1)}):t.each(function(){var t=this,o=arguments,u=t.__brush,a=n.input("function"==typeof e?e.apply(t,o):e,u.extent),c=i(t,o).beforestart();cp(t),u.selection=null==a||De(a)?null:a,r.call(t),c.start().brush().end()})},o.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){z(new iv(e,t,n.output(this.state.selection)),f.apply,f,[t,this.that,this.args])}},e.extent=function(t){return arguments.length?(s="function"==typeof t?t:rv([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):s},e.filter=function(t){return arguments.length?(l="function"==typeof t?t:rv(!!t),e):l},e.handleSize=function(t){return arguments.length?(h=+t,e):h},e.on=function(){var t=f.on.apply(f,arguments);return t===f?e:t},e}function Re(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function Ye(t,n){var e=Re(t);return function(r,i){return n(e(r),i,t)}}function Ie(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}function Oe(t){return function(n,e){t(null==n?e:null)}}function je(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function He(t,n){return function(e){return t(e.responseText,n)}}function Be(t){return new Xe(t)}function Xe(t){if(!(n=Hv.exec(t)))throw new Error("invalid format: "+t);var n,e=n[1]||" ",r=n[2]||">",i=n[3]||"-",o=n[4]||"",u=!!n[5],a=n[6]&&+n[6],c=!!n[7],s=n[8]&&+n[8].slice(1),l=n[9]||"";"n"===l?(c=!0,l="g"):jv[l]||(l=""),(u||"0"===e&&"="===r)&&(u=!0,e="0",r="="),this.fill=e,this.align=r,this.sign=i,this.symbol=o,this.zero=u,this.width=a,this.comma=c,this.precision=s,this.type=l}function Ge(n){return Bv=Vv(n),t.format=Bv.format,t.formatPrefix=Bv.formatPrefix,Bv}function Ve(t,n){return t.parent===n.parent?1:2}function $e(t){return t.reduce(We,0)/t.length}function We(t,n){return t+n.x}function Ze(t){return 1+t.reduce(Qe,0)}function Qe(t,n){return Math.max(t,n.y)}function Je(t){for(var n;n=t.children;)t=n[0];return t}function Ke(t){for(var n;n=t.children;)t=n[n.length-1];return t}function tr(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function nr(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function er(t,n){var e,r,i,o,u,a=new ar(t),c=+t.value&&(a.value=t.value),s=[a];for(null==n&&(n=ir);e=s.pop();)if(c&&(e.value=+e.data.value),(i=n(e.data))&&(u=i.length))for(e.children=new Array(u),o=u-1;o>=0;--o)s.push(r=e.children[o]=new ar(i[o])),r.parent=e,r.depth=e.depth+1;return a.eachBefore(ur)}function rr(){return er(this).eachBefore(or)}function ir(t){return t.children}function or(t){t.data=t.data.data}function ur(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function ar(t){this.data=t,this.depth=this.height=0,this.parent=null}function cr(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}function sr(t,n){var e,r;if(hr(n,t))return[n];for(e=0;e<t.length;++e)if(lr(n,t[e])&&hr(gr(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(lr(gr(t[e],t[r]),n)&&lr(gr(t[e],n),t[r])&&lr(gr(t[r],n),t[e])&&hr(dr(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function lr(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function fr(t,n){\nvar e=t.r-n.r+1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function hr(t,n){for(var e=0;e<n.length;++e)if(!fr(t,n[e]))return!1;return!0}function pr(t){switch(t.length){case 1:return vr(t[0]);case 2:return gr(t[0],t[1]);case 3:return dr(t[0],t[1],t[2])}}function vr(t){return{x:t.x,y:t.y,r:t.r}}function gr(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,u=n.y,a=n.r,c=o-e,s=u-r,l=a-i,f=Math.sqrt(c*c+s*s);return{x:(e+o+c/f*l)/2,y:(r+u+s/f*l)/2,r:(f+i+a)/2}}function dr(t,n,e){var r=t.x,i=t.y,o=t.r,u=n.x,a=n.y,c=n.r,s=e.x,l=e.y,f=e.r,h=r-u,p=r-s,v=i-a,g=i-l,d=c-o,y=f-o,_=r*r+i*i-o*o,m=_-u*u-a*a+c*c,x=_-s*s-l*l+f*f,w=p*v-h*g,M=(v*x-g*m)/(2*w)-r,b=(g*d-v*y)/w,E=(p*m-h*x)/(2*w)-i,S=(h*y-p*d)/w,k=b*b+S*S-1,T=2*(o+M*b+E*S),A=M*M+E*E-o*o,C=-(k?(T+Math.sqrt(T*T-4*k*A))/(2*k):A/T);return{x:r+M+b*C,y:i+E+S*C,r:C}}function yr(t,n,e){var r=t.x,i=t.y,o=n.r+e.r,u=t.r+e.r,a=n.x-r,c=n.y-i,s=a*a+c*c;if(s){var l=.5+((u*=u)-(o*=o))/(2*s),f=Math.sqrt(Math.max(0,2*o*(u+s)-(u-=s)*u-o*o))/(2*s);e.x=r+l*a+f*c,e.y=i+l*c-f*a}else e.x=r+u,e.y=i}function _r(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return i*i-1e-6>e*e+r*r}function mr(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function xr(t){this._=t,this.next=null,this.previous=null}function wr(t){if(!(i=t.length))return 0;var n,e,r,i,o,u,a,c,s,l,f;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;yr(e,n,r=t[2]),n=new xr(n),e=new xr(e),r=new xr(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(a=3;a<i;++a){yr(n._,e._,r=t[a]),r=new xr(r),c=e.next,s=n.previous,l=e._.r,f=n._.r;do{if(l<=f){if(_r(c._,r._)){e=c,n.next=e,e.previous=n,--a;continue t}l+=c._.r,c=c.next}else{if(_r(s._,r._)){n=s,n.next=e,e.previous=n,--a;continue t}f+=s._.r,s=s.previous}}while(c!==s.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,o=mr(n);(r=r.next)!==e;)(u=mr(r))<o&&(n=r,o=u);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=lg(n),a=0;a<i;++a)n=t[a],n.x-=r.x,n.y-=r.y;return r.r}function Mr(t){return null==t?null:br(t)}function br(t){if("function"!=typeof t)throw new Error;return t}function Er(){return 0}function Sr(t){return Math.sqrt(t.value)}function kr(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Tr(t,n){return function(e){if(r=e.children){var r,i,o,u=r.length,a=t(e)*n||0;if(a)for(i=0;i<u;++i)r[i].r+=a;if(o=wr(r),a)for(i=0;i<u;++i)r[i].r-=a;e.r=o+a}}}function Ar(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function Cr(t){return t.id}function Nr(t){return t.parentId}function Pr(t,n){return t.parent===n.parent?1:2}function zr(t){var n=t.children;return n?n[0]:t.t}function Dr(t){var n=t.children;return n?n[n.length-1]:t.t}function Fr(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Lr(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)n=i[o],n.z+=e,n.m+=e,e+=n.s+(r+=n.c)}function Ur(t,n,e){return t.a.parent===n.parent?t.a:e}function qr(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function Rr(t){for(var n,e,r,i,o,u=new qr(t,0),a=[u];n=a.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)a.push(e=n.children[i]=new qr(r[i],i)),e.parent=n;return(u.parent=new qr(null,0)).children=[u],u}function Yr(t,n,e,r,i,o){for(var u,a,c,s,l,f,h,p,v,g,d,y=[],_=n.children,m=0,x=0,w=_.length,M=n.value;m<w;){c=i-e,s=o-r;do{l=_[x++].value}while(!l&&x<w);for(f=h=l,g=Math.max(s/c,c/s)/(M*t),d=l*l*g,v=Math.max(h/d,d/f);x<w;++x){if(l+=a=_[x].value,a<f&&(f=a),a>h&&(h=a),d=l*l*g,(p=Math.max(h/d,d/f))>v){l-=a;break}v=p}y.push(u={value:l,dice:c<s,children:_.slice(m,x)}),u.dice?gg(u,e,r,i,M?r+=s*l/M:o):Mg(u,e,r,M?e+=c*l/M:i,o),M-=l,m=x}return y}function Ir(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Or(){return new Ir}function jr(t){function n(n){var o=n+"",u=e.get(o);if(!u){if(i!==Lg)return i;e.set(o,u=r.push(n))}return t[(u-1)%t.length]}var e=o(),r=[],i=Lg;return t=null==t?[]:Fg.call(t),n.domain=function(t){if(!arguments.length)return r.slice();r=[],e=o();for(var i,u,a=-1,c=t.length;++a<c;)e.has(u=(i=t[a])+"")||e.set(u,r.push(i));return n},n.range=function(e){return arguments.length?(t=Fg.call(e),n):t.slice()},n.unknown=function(t){return arguments.length?(i=t,n):i},n.copy=function(){return jr().domain(r).range(t).unknown(i)},n}function Hr(){function t(){var t=i().length,r=u[1]<u[0],f=u[r-0],h=u[1-r];n=(h-f)/Math.max(1,t-c+2*s),a&&(n=Math.floor(n)),f+=(h-f-n*(t-c))*l,e=n*(1-c),a&&(f=Math.round(f),e=Math.round(e));var p=il(t).map(function(t){return f+n*t});return o(r?p.reverse():p)}var n,e,r=jr().unknown(void 0),i=r.domain,o=r.range,u=[0,1],a=!1,c=0,s=0,l=.5;return delete r.unknown,r.domain=function(n){return arguments.length?(i(n),t()):i()},r.range=function(n){return arguments.length?(u=[+n[0],+n[1]],t()):u.slice()},r.rangeRound=function(n){return u=[+n[0],+n[1]],a=!0,t()},r.bandwidth=function(){return e},r.step=function(){return n},r.round=function(n){return arguments.length?(a=!!n,t()):a},r.padding=function(n){return arguments.length?(c=s=Math.max(0,Math.min(1,n)),t()):c},r.paddingInner=function(n){return arguments.length?(c=Math.max(0,Math.min(1,n)),t()):c},r.paddingOuter=function(n){return arguments.length?(s=Math.max(0,Math.min(1,n)),t()):s},r.align=function(n){return arguments.length?(l=Math.max(0,Math.min(1,n)),t()):l},r.copy=function(){return Hr().domain(i()).range(u).round(a).paddingInner(c).paddingOuter(s).align(l)},t()}function Br(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Br(n())},t}function Xr(){return Br(Hr().paddingInner(1))}function Gr(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:Ug(n)}function Vr(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=n?0:t>=e?1:r(t)}}}function $r(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=0?n:t>=1?e:r(t)}}}function Wr(t,n,e,r){var i=t[0],o=t[1],u=n[0],a=n[1];return o<i?(i=e(o,i),u=r(a,u)):(i=e(i,o),u=r(u,a)),function(t){return u(i(t))}}function Zr(t,n,e,r){var i=Math.min(t.length,n.length)-1,o=new Array(i),u=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<i;)o[a]=e(t[a],t[a+1]),u[a]=r(n[a],n[a+1]);return function(n){var e=Js(t,n,1,i)-1;return u[e](o[e](n))}}function Qr(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Jr(t,n){function e(){return i=Math.min(a.length,c.length)>2?Zr:Wr,o=u=null,r}function r(n){return(o||(o=i(a,c,l?Vr(t):t,s)))(+n)}var i,o,u,a=Rg,c=Rg,s=Sh,l=!1;return r.invert=function(t){return(u||(u=i(c,a,Gr,l?$r(n):n)))(+t)},r.domain=function(t){return arguments.length?(a=Dg.call(t,qg),e()):a.slice()},r.range=function(t){return arguments.length?(c=Fg.call(t),e()):c.slice()},r.rangeRound=function(t){return c=Fg.call(t),s=kh,e()},r.clamp=function(t){return arguments.length?(l=!!t,e()):l},r.interpolate=function(t){return arguments.length?(s=t,e()):s},e()}function Kr(t){var n=t.domain;return t.ticks=function(t){var e=n();return cl(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){return Yg(n(),t,e)},t.nice=function(r){null==r&&(r=10);var i,o=n(),u=0,a=o.length-1,c=o[u],s=o[a];return s<c&&(i=c,c=s,s=i,i=u,u=a,a=i),i=e(c,s,r),i>0?(c=Math.floor(c/i)*i,s=Math.ceil(s/i)*i,i=e(c,s,r)):i<0&&(c=Math.ceil(c*i)/i,s=Math.floor(s*i)/i,i=e(c,s,r)),i>0?(o[u]=Math.floor(c/i)*i,o[a]=Math.ceil(s/i)*i,n(o)):i<0&&(o[u]=Math.ceil(c*i)/i,o[a]=Math.floor(s*i)/i,n(o)),t},t}function ti(){var t=Jr(Gr,xh);return t.copy=function(){return Qr(t,ti())},Kr(t)}function ni(){function t(){var t=0,o=Math.max(1,r.length);for(i=new Array(o-1);++t<o;)i[t-1]=sl(e,t/o);return n}function n(t){if(!isNaN(t=+t))return r[Js(i,t)]}var e=[],r=[],i=[];return n.invertExtent=function(t){var n=r.indexOf(t);return n<0?[NaN,NaN]:[n>0?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]},n.domain=function(n){if(!arguments.length)return e.slice();e=[];for(var r,i=0,o=n.length;i<o;++i)null==(r=n[i])||isNaN(r=+r)||e.push(r);return e.sort(Ws),t()},n.range=function(n){return arguments.length?(r=Fg.call(n),t()):r.slice()},n.quantiles=function(){return i.slice()},n.copy=function(){return ni().domain(e).range(r)},n}function ei(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var u,a=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return a;do{a.push(u=new Date(+e)),n(e,o),t(e)}while(u<e&&e<r);return a},i.filter=function(e){return ei(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););})},e&&(i.count=function(n,r){return Og.setTime(+n),jg.setTime(+r),t(Og),t(jg),Math.floor(e(Og,jg))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}function ri(t){return ei(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Xg)/Gg})}function ii(t){return ei(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/Gg})}function oi(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ui(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ai(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function ci(t){function n(t,n){return function(e){var r,i,o,u=[],a=-1,c=0,s=t.length;for(e instanceof Date||(e=new Date(+e));++a<s;)37===t.charCodeAt(a)&&(u.push(t.slice(c,a)),null!=(i=Bd[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),u.push(r),c=a+1);return u.push(t.slice(c,a)),u.join("")}}function e(t,n){return function(e){var i,o,u=ai(1900),a=r(u,t,e+="",0);if(a!=e.length)return null;if("Q"in u)return new Date(u.Q);if("p"in u&&(u.H=u.H%12+12*u.p),"V"in u){if(u.V<1||u.V>53)return null;"w"in u||(u.w=1),"Z"in u?(i=ui(ai(u.y)),o=i.getUTCDay(),i=o>4||0===o?kd.ceil(i):kd(i),i=bd.offset(i,7*(u.V-1)),u.y=i.getUTCFullYear(),u.m=i.getUTCMonth(),u.d=i.getUTCDate()+(u.w+6)%7):(i=n(ai(u.y)),o=i.getDay(),i=o>4||0===o?ed.ceil(i):ed(i),i=Kg.offset(i,7*(u.V-1)),u.y=i.getFullYear(),u.m=i.getMonth(),u.d=i.getDate()+(u.w+6)%7)}else("W"in u||"U"in u)&&("w"in u||(u.w="u"in u?u.u%7:"W"in u?1:0),o="Z"in u?ui(ai(u.y)).getUTCDay():n(ai(u.y)).getDay(),u.m=0,u.d="W"in u?(u.w+6)%7+7*u.W-(o+5)%7:u.w+7*u.U-(o+6)%7);return"Z"in u?(u.H+=u.Z/100|0,u.M+=u.Z%100,ui(u)):n(u)}}function r(t,n,e,r){for(var i,o,u=0,a=n.length,c=e.length;u<a;){if(r>=c)return-1;if(37===(i=n.charCodeAt(u++))){if(i=n.charAt(u++),!(o=j[i in Bd?n.charAt(u++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function i(t,n,e){var r=N.exec(n.slice(e));return r?(t.p=P[r[0].toLowerCase()],e+r[0].length):-1}function o(t,n,e){var r=F.exec(n.slice(e));return r?(t.w=L[r[0].toLowerCase()],e+r[0].length):-1}function u(t,n,e){var r=z.exec(n.slice(e));return r?(t.w=D[r[0].toLowerCase()],e+r[0].length):-1}function a(t,n,e){var r=R.exec(n.slice(e));return r?(t.m=Y[r[0].toLowerCase()],e+r[0].length):-1}function c(t,n,e){var r=U.exec(n.slice(e));return r?(t.m=q[r[0].toLowerCase()],e+r[0].length):-1}function s(t,n,e){return r(t,M,n,e)}function l(t,n,e){return r(t,b,n,e)}function f(t,n,e){return r(t,E,n,e)}function h(t){return T[t.getDay()]}function p(t){return k[t.getDay()]}function v(t){return C[t.getMonth()]}function g(t){return A[t.getMonth()]}function d(t){return S[+(t.getHours()>=12)]}function y(t){return T[t.getUTCDay()]}function _(t){return k[t.getUTCDay()]}function m(t){return C[t.getUTCMonth()]}function x(t){return A[t.getUTCMonth()]}function w(t){return S[+(t.getUTCHours()>=12)]}var M=t.dateTime,b=t.date,E=t.time,S=t.periods,k=t.days,T=t.shortDays,A=t.months,C=t.shortMonths,N=fi(S),P=hi(S),z=fi(k),D=hi(k),F=fi(T),L=hi(T),U=fi(A),q=hi(A),R=fi(C),Y=hi(C),I={a:h,A:p,b:v,B:g,c:null,d:zi,e:zi,f:qi,H:Di,I:Fi,j:Li,L:Ui,m:Ri,M:Yi,p:d,Q:po,s:vo,S:Ii,u:Oi,U:ji,V:Hi,w:Bi,W:Xi,x:null,X:null,y:Gi,Y:Vi,Z:$i,"%":ho},O={a:y,A:_,b:m,B:x,c:null,d:Wi,e:Wi,f:to,H:Zi,I:Qi,j:Ji,L:Ki,m:no,M:eo,p:w,Q:po,s:vo,S:ro,u:io,U:oo,V:uo,w:ao,W:co,x:null,X:null,y:so,Y:lo,Z:fo,"%":ho},j={a:o,A:u,b:a,B:c,c:s,d:Mi,e:Mi,f:Ai,H:Ei,I:Ei,j:bi,L:Ti,m:wi,M:Si,p:i,Q:Ni,s:Pi,S:ki,u:vi,U:gi,V:di,w:pi,W:yi,x:l,X:f,y:mi,Y:_i,Z:xi,"%":Ci};return I.x=n(b,I),I.X=n(E,I),I.c=n(M,I),O.x=n(b,O),O.X=n(E,O),O.c=n(M,O),{format:function(t){var e=n(t+="",I);return e.toString=function(){return t},e},parse:function(t){var n=e(t+="",oi);return n.toString=function(){return t},n},utcFormat:function(t){var e=n(t+="",O);return e.toString=function(){return t},e},utcParse:function(t){var n=e(t,ui);return n.toString=function(){return t},n}}}function si(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function li(t){return t.replace(Vd,"\\\\$&")}function fi(t){return new RegExp("^(?:"+t.map(li).join("|")+")","i")}function hi(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function pi(t,n,e){var r=Xd.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function vi(t,n,e){var r=Xd.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function gi(t,n,e){var r=Xd.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function di(t,n,e){var r=Xd.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function yi(t,n,e){var r=Xd.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function _i(t,n,e){var r=Xd.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function mi(t,n,e){var r=Xd.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function xi(t,n,e){var r=/^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function wi(t,n,e){var r=Xd.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Mi(t,n,e){var r=Xd.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function bi(t,n,e){var r=Xd.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function Ei(t,n,e){var r=Xd.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function Si(t,n,e){var r=Xd.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function ki(t,n,e){var r=Xd.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function Ti(t,n,e){var r=Xd.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function Ai(t,n,e){var r=Xd.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Ci(t,n,e){var r=Gd.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function Ni(t,n,e){var r=Xd.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function Pi(t,n,e){var r=Xd.exec(n.slice(e));return r?(t.Q=1e3*+r[0],e+r[0].length):-1}function zi(t,n){return si(t.getDate(),n,2)}function Di(t,n){return si(t.getHours(),n,2)}function Fi(t,n){return si(t.getHours()%12||12,n,2)}function Li(t,n){return si(1+Kg.count(yd(t),t),n,3)}function Ui(t,n){return si(t.getMilliseconds(),n,3)}function qi(t,n){return Ui(t,n)+"000"}function Ri(t,n){return si(t.getMonth()+1,n,2)}function Yi(t,n){return si(t.getMinutes(),n,2)}function Ii(t,n){return si(t.getSeconds(),n,2)}function Oi(t){var n=t.getDay();return 0===n?7:n}function ji(t,n){return si(nd.count(yd(t),t),n,2)}function Hi(t,n){var e=t.getDay();return t=e>=4||0===e?od(t):od.ceil(t),si(od.count(yd(t),t)+(4===yd(t).getDay()),n,2)}function Bi(t){return t.getDay()}function Xi(t,n){return si(ed.count(yd(t),t),n,2)}function Gi(t,n){return si(t.getFullYear()%100,n,2)}function Vi(t,n){return si(t.getFullYear()%1e4,n,4)}function $i(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+si(n/60|0,"0",2)+si(n%60,"0",2)}function Wi(t,n){return si(t.getUTCDate(),n,2)}function Zi(t,n){return si(t.getUTCHours(),n,2)}function Qi(t,n){return si(t.getUTCHours()%12||12,n,2)}function Ji(t,n){return si(1+bd.count(Od(t),t),n,3)}function Ki(t,n){return si(t.getUTCMilliseconds(),n,3)}function to(t,n){return Ki(t,n)+"000"}function no(t,n){return si(t.getUTCMonth()+1,n,2)}function eo(t,n){return si(t.getUTCMinutes(),n,2)}function ro(t,n){return si(t.getUTCSeconds(),n,2)}function io(t){var n=t.getUTCDay();return 0===n?7:n}function oo(t,n){return si(Sd.count(Od(t),t),n,2)}function uo(t,n){var e=t.getUTCDay();return t=e>=4||0===e?Cd(t):Cd.ceil(t),si(Cd.count(Od(t),t)+(4===Od(t).getUTCDay()),n,2)}function ao(t){return t.getUTCDay()}function co(t,n){return si(kd.count(Od(t),t),n,2)}function so(t,n){return si(t.getUTCFullYear()%100,n,2)}function lo(t,n){return si(t.getUTCFullYear()%1e4,n,4)}function fo(){return"+0000"}function ho(){return"%"}function po(t){return+t}function vo(t){return Math.floor(+t/1e3)}function go(n){return jd=ci(n),t.timeFormat=jd.format,t.timeParse=jd.parse,t.utcFormat=jd.utcFormat,t.utcParse=jd.utcParse,jd}function yo(t){return t.toISOString()}function _o(t){var n=new Date(t);return isNaN(n)?null:n}function mo(t){return new Date(t)}function xo(t){return t instanceof Date?+t:+new Date(+t)}function wo(t,n,e,i,o,u,a,c,s){function l(r){return(a(r)<r?g:u(r)<r?d:o(r)<r?y:i(r)<r?_:n(r)<r?e(r)<r?m:x:t(r)<r?w:M)(r)}function f(n,e,i,o){if(null==n&&(n=10),"number"==typeof n){var u=Math.abs(i-e)/n,a=Zs(function(t){return t[2]}).right(b,u);a===b.length?(o=r(e/ey,i/ey,n),n=t):a?(a=b[u/b[a-1][2]<b[a][2]/u?a-1:a],o=a[1],n=a[0]):(o=Math.max(r(e,i,n),1),n=c)}return null==o?n:n.every(o)}var h=Jr(Gr,xh),p=h.invert,v=h.domain,g=s(".%L"),d=s(":%S"),y=s("%I:%M"),_=s("%I %p"),m=s("%a %d"),x=s("%b %d"),w=s("%B"),M=s("%Y"),b=[[a,1,Zd],[a,5,5*Zd],[a,15,15*Zd],[a,30,30*Zd],[u,1,Qd],[u,5,5*Qd],[u,15,15*Qd],[u,30,30*Qd],[o,1,Jd],[o,3,3*Jd],[o,6,6*Jd],[o,12,12*Jd],[i,1,Kd],[i,2,2*Kd],[e,1,ty],[n,1,ny],[n,3,3*ny],[t,1,ey]];return h.invert=function(t){return new Date(p(t))},h.domain=function(t){return arguments.length?v(Dg.call(t,xo)):v().map(mo)},h.ticks=function(t,n){var e,r=v(),i=r[0],o=r[r.length-1],u=o<i;return u&&(e=i,i=o,o=e),e=f(t,i,o,n),e=e?e.range(i,o+1):[],u?e.reverse():e},h.tickFormat=function(t,n){return null==n?l:s(n)},h.nice=function(t,n){var e=v();return(t=f(t,e[0],e[e.length-1],n))?v(Ig(e,t)):h},h.copy=function(){return Qr(h,wo(t,n,e,i,o,u,a,c,s))},h}function Mo(t,n){return t.each(function(){var t=n.apply(this,arguments),e=Mf(this);for(var r in t)e.attr(r,t[r])})}function bo(t,n){for(var e in n)t.attr(e,n[e]);return t}function Eo(t,n,e){return t.each(function(){var t=n.apply(this,arguments),r=Mf(this);for(var i in t)r.style(i,t[i],e)})}function So(t,n,e){for(var r in n)t.style(r,n[r],e);return t}function ko(t,n){return t.each(function(){var t=n.apply(this,arguments),e=Mf(this);for(var r in t)e.property(r,t[r])})}function To(t,n){for(var e in n)t.property(e,n[e]);return t}function Ao(t,n){return t.each(function(){var e=n.apply(this,arguments),r=Mf(this).transition(t);for(var i in e)r.attr(i,e[i])})}function Co(t,n){for(var e in n)t.attr(e,n[e]);return t}function No(t,n,e){return t.each(function(){var r=n.apply(this,arguments),i=Mf(this).transition(t);for(var o in r)i.style(o,r[o],e)})}function Po(t,n,e){for(var r in n)t.style(r,n[r],e);return t}function zo(t){return t>1?0:t<-1?xy:Math.acos(t)}function Do(t){return t>=1?wy:t<=-1?-wy:Math.asin(t)}function Fo(t){return t.innerRadius}function Lo(t){return t.outerRadius}function Uo(t){return t.startAngle}function qo(t){return t.endAngle}function Ro(t){return t&&t.padAngle}function Yo(t,n,e,r,i,o,u,a){var c=e-t,s=r-n,l=u-i,f=a-o,h=(l*(n-o)-f*(t-i))/(f*c-l*s);return[t+h*c,n+h*s]}function Io(t,n,e,r,i,o,u){var a=t-e,c=n-r,s=(u?o:-o)/_y(a*a+c*c),l=s*c,f=-s*a,h=t+l,p=n+f,v=e+l,g=r+f,d=(h+v)/2,y=(p+g)/2,_=v-h,m=g-p,x=_*_+m*m,w=i-o,M=h*g-v*p,b=(m<0?-1:1)*_y(gy(0,w*w*x-M*M)),E=(M*m-_*b)/x,S=(-M*_-m*b)/x,k=(M*m+_*b)/x,T=(-M*_+m*b)/x,A=E-d,C=S-y,N=k-d,P=T-y;return A*A+C*C>N*N+P*P&&(E=k,S=T),{cx:E,cy:S,x01:-l,y01:-f,x11:E*(i/w-1),y11:S*(i/w-1)}}function Oo(t){this._context=t}function jo(t){return t[0]}function Ho(t){return t[1]}function Bo(t){this._curve=t}function Xo(t){function n(n){return new Bo(t(n))}return n._curve=t,n}function Go(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(Xo(t)):n()._curve},t}function Vo(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function $o(t){this._context=t}function Wo(t,n){this._basis=new $o(t),this._beta=n}function Zo(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Qo(t,n){this._context=t,this._k=(1-n)/6}function Jo(t,n){this._context=t,this._k=(1-n)/6}function Ko(t,n){this._context=t,this._k=(1-n)/6}function tu(t,n,e){var r=t._x1,i=t._y1,o=t._x2,u=t._y2;if(t._l01_a>my){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>my){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-n*t._l12_2a)/l,u=(u*s+t._y1*t._l23_2a-e*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,u,t._x2,t._y2)}function nu(t,n){this._context=t,this._alpha=n}function eu(t,n){this._context=t,this._alpha=n}function ru(t,n){this._context=t,this._alpha=n}function iu(t){this._context=t}function ou(t){return t<0?-1:1}function uu(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),u=(e-t._y1)/(i||r<0&&-0),a=(o*i+u*r)/(r+i);return(ou(o)+ou(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(a))||0}function au(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function cu(t,n,e){var r=t._x0,i=t._y0,o=t._x1,u=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*n,o-a,u-a*e,o,u)}function su(t){this._context=t}function lu(t){this._context=new fu(t)}function fu(t){this._context=t}function hu(t){return new su(t)}function pu(t){return new lu(t)}function vu(t,n){this._context=t,this._t=n}function gu(t){return new vu(t,0)}function du(t){return new vu(t,1)}function yu(t,n){return t[n]}function _u(t,n,e){this.target=t,this.type=n,this.transform=e}function mu(t,n,e){this.k=t,this.x=n,this.y=e}function xu(t){return t.__zoom||Hy}function wu(){t.event.stopImmediatePropagation()}function Mu(){return!t.event.button}function bu(){var t,n,e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,t=e.width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function Eu(){return this.__zoom||Hy}function Su(){return-t.event.deltaY*(t.event.deltaMode?120:1)/500}function ku(){return"ontouchstart"in this}function Tu(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],u=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}function Au(t,n){return t[0]-n[0]||t[1]-n[1]}function Cu(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;++i){for(;r>1&&$y(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function Nu(){this.reset()}function Pu(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}function zu(t){return t>1?0:t<-1?z_:Math.acos(t)}function Du(t){return t>1?D_:t<-1?-D_:Math.asin(t)}function Fu(t){return(t=G_(t/2))*t}function Lu(){}function Uu(t,n){t&&Q_.hasOwnProperty(t.type)&&Q_[t.type](t,n)}function qu(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Ru(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)qu(t[e],n,1);n.polygonEnd()}function Yu(){nm.point=Ou}function Iu(){ju(Ky,t_)}function Ou(t,n){nm.point=ju,Ky=t,t_=n,t*=q_,n*=q_,n_=t,e_=O_(n=n/2+F_),r_=G_(n)}function ju(t,n){t*=q_,n*=q_,n=n/2+F_;var e=t-n_,r=e>=0?1:-1,i=r*e,o=O_(n),u=G_(n),a=r_*u,c=e_*o+a*O_(i),s=a*r*G_(i);K_.add(I_(s,c)),n_=t,e_=o,r_=u}function Hu(t){return[I_(t[1],t[0]),Du(t[2])]}function Bu(t){var n=t[0],e=t[1],r=O_(e);return[r*O_(n),r*G_(n),G_(e)]}function Xu(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Gu(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Vu(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function $u(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Wu(t){var n=$_(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Zu(t,n){h_.push(p_=[i_=t,u_=t]),n<o_&&(o_=n),n>a_&&(a_=n)}function Qu(t,n){var e=Bu([t*q_,n*q_]);if(f_){var r=Gu(f_,e),i=[r[1],-r[0],0],o=Gu(i,r);Wu(o),o=Hu(o);var u,a=t-c_,c=a>0?1:-1,s=o[0]*U_*c,l=R_(a)>180;l^(c*c_<s&&s<c*t)?(u=o[1]*U_)>a_&&(a_=u):(s=(s+360)%360-180,l^(c*c_<s&&s<c*t)?(u=-o[1]*U_)<o_&&(o_=u):(n<o_&&(o_=n),n>a_&&(a_=n))),l?t<c_?ra(i_,t)>ra(i_,u_)&&(u_=t):ra(t,u_)>ra(i_,u_)&&(i_=t):u_>=i_?(t<i_&&(i_=t),t>u_&&(u_=t)):t>c_?ra(i_,t)>ra(i_,u_)&&(u_=t):ra(t,u_)>ra(i_,u_)&&(i_=t)}else h_.push(p_=[i_=t,u_=t]);n<o_&&(o_=n),n>a_&&(a_=n),f_=e,c_=t}function Ju(){im.point=Qu}function Ku(){p_[0]=i_,p_[1]=u_,im.point=Zu,f_=null}function ta(t,n){if(f_){var e=t-c_;rm.add(R_(e)>180?e+(e>0?360:-360):e)}else s_=t,l_=n;nm.point(t,n),Qu(t,n)}function na(){nm.lineStart()}function ea(){ta(s_,l_),nm.lineEnd(),R_(rm)>P_&&(i_=-(u_=180)),p_[0]=i_,p_[1]=u_,f_=null}function ra(t,n){return(n-=t)<0?n+360:n}function ia(t,n){return t[0]-n[0]}function oa(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function ua(t,n){t*=q_,n*=q_;var e=O_(n);aa(e*O_(t),e*G_(t),G_(n))}function aa(t,n,e){++v_,d_+=(t-d_)/v_,y_+=(n-y_)/v_,__+=(e-__)/v_}function ca(){um.point=sa}function sa(t,n){t*=q_,n*=q_;var e=O_(n);T_=e*O_(t),A_=e*G_(t),C_=G_(n),um.point=la,aa(T_,A_,C_)}function la(t,n){t*=q_,n*=q_;var e=O_(n),r=e*O_(t),i=e*G_(t),o=G_(n),u=I_($_((u=A_*o-C_*i)*u+(u=C_*r-T_*o)*u+(u=T_*i-A_*r)*u),T_*r+A_*i+C_*o);g_+=u,m_+=u*(T_+(T_=r)),x_+=u*(A_+(A_=i)),w_+=u*(C_+(C_=o)),aa(T_,A_,C_)}function fa(){um.point=ua}function ha(){um.point=va}function pa(){ga(S_,k_),um.point=ua}function va(t,n){S_=t,k_=n,t*=q_,n*=q_,um.point=ga;var e=O_(n);T_=e*O_(t),A_=e*G_(t),C_=G_(n),aa(T_,A_,C_)}function ga(t,n){t*=q_,n*=q_;var e=O_(n),r=e*O_(t),i=e*G_(t),o=G_(n),u=A_*o-C_*i,a=C_*r-T_*o,c=T_*i-A_*r,s=$_(u*u+a*a+c*c),l=Du(s),f=s&&-l/s;M_+=f*u,b_+=f*a,E_+=f*c,g_+=l,m_+=l*(T_+(T_=r)),x_+=l*(A_+(A_=i)),w_+=l*(C_+(C_=o)),aa(T_,A_,C_)}function da(t,n){return[t>z_?t-L_:t<-z_?t+L_:t,n]}function ya(t,n,e){return(t%=L_)?n||e?sm(ma(t),xa(n,e)):ma(t):n||e?xa(n,e):da}function _a(t){return function(n,e){return n+=t,[n>z_?n-L_:n<-z_?n+L_:n,e]}}function ma(t){var n=_a(t);return n.invert=_a(-t),n}function xa(t,n){function e(t,n){var e=O_(n),a=O_(t)*e,c=G_(t)*e,s=G_(n),l=s*r+a*i;return[I_(c*o-l*u,a*r-s*i),Du(l*o+c*u)]}var r=O_(t),i=G_(t),o=O_(n),u=G_(n);return e.invert=function(t,n){var e=O_(n),a=O_(t)*e,c=G_(t)*e,s=G_(n),l=s*o-c*u;return[I_(c*o+s*u,a*r+l*i),Du(l*r-a*i)]},e}function wa(t,n,e,r,i,o){if(e){var u=O_(n),a=G_(n),c=r*e;null==i?(i=n+r*L_,o=n-c/2):(i=Ma(u,i),o=Ma(u,o),(r>0?i<o:i>o)&&(i+=r*L_));for(var s,l=i;r>0?l>o:l<o;l-=c)s=Hu([u,-a*O_(l),-a*G_(l)]),t.point(s[0],s[1])}}function Ma(t,n){n=Bu(n),n[0]-=t,Wu(n);var e=zu(-n[1]);return((-n[2]<0?-e:e)+L_-P_)%L_}function ba(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Ea(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function Sa(t){return t.length>1}function ka(t,n){return((t=t.x)[0]<0?t[1]-D_-P_:D_-t[1])-((n=n.x)[0]<0?n[1]-D_-P_:D_-n[1])}function Ta(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,u){var a=o>0?z_:-z_,c=R_(o-e);R_(c-z_)<P_?(t.point(e,r=(r+u)/2>0?D_:-D_),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),n=0):i!==a&&c>=z_&&(R_(e-i)<P_&&(e-=i*P_),R_(o-a)<P_&&(o-=a*P_),r=Aa(e,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),n=0),t.point(e=o,r=u),i=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}function Aa(t,n,e,r){var i,o,u=G_(t-e);return R_(u)>P_?Y_((G_(n)*(o=O_(r))*G_(e)-G_(r)*(i=O_(n))*G_(t))/(i*o*u)):(n+r)/2}function Ca(t,n,e,r){var i;if(null==t)i=e*D_,r.point(-z_,i),r.point(0,i),r.point(z_,i),r.point(z_,0),r.point(z_,-i),r.point(0,-i),r.point(-z_,-i),r.point(-z_,0),r.point(-z_,i);else if(R_(t[0]-n[0])>P_){var o=t[0]<n[0]?z_:-z_;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Na(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,a,s){var l=0,f=0;if(null==i||(l=u(i,a))!==(f=u(o,a))||c(i,o)<0^a>0)do{s.point(0===l||3===l?t:e,l>1?r:n)}while((l=(l+a+4)%4)!==f);else s.point(o[0],o[1])}function u(r,i){return R_(r[0]-t)<P_?i>0?0:3:R_(r[0]-e)<P_?i>0?2:1:R_(r[1]-n)<P_?i>0?1:0:i>0?3:2}function a(t,n){return c(t.x,n.x)}function c(t,n){var e=u(t,1),r=u(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function c(t,n){i(t,n)&&k.point(t,n)}function s(){for(var n=0,e=0,i=d.length;e<i;++e)for(var o,u,a=d[e],c=1,s=a.length,l=a[0],f=l[0],h=l[1];c<s;++c)o=f,u=h,l=a[c],f=l[0],h=l[1],u<=r?h>r&&(f-o)*(r-u)>(h-u)*(t-o)&&++n:h<=r&&(f-o)*(r-u)<(h-u)*(t-o)&&--n;return n}function l(){k=T,g=[],d=[],S=!0}function f(){var t=s(),n=S&&t,e=(g=fl(g)).length;(n||e)&&(u.polygonStart(),n&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),e&&Sm(g,a,t,o,u),u.polygonEnd()),k=u,g=d=y=null}function h(){A.point=v,d&&d.push(y=[]),E=!0,b=!1,w=M=NaN}function p(){g&&(v(_,m),x&&b&&T.rejoin(),g.push(T.result())),A.point=c,b&&k.lineEnd()}function v(o,u){var a=i(o,u);if(d&&y.push([o,u]),E)_=o,m=u,x=a,E=!1,a&&(k.lineStart(),k.point(o,u));else if(a&&b)k.point(o,u);else{var c=[w=Math.max(Dm,Math.min(zm,w)),M=Math.max(Dm,Math.min(zm,M))],s=[o=Math.max(Dm,Math.min(zm,o)),u=Math.max(Dm,Math.min(zm,u))];Pm(c,s,t,n,e,r)?(b||(k.lineStart(),k.point(c[0],c[1])),k.point(s[0],s[1]),a||k.lineEnd(),S=!1):a&&(k.lineStart(),k.point(o,u),S=!1)}w=o,M=u,b=a}var g,d,y,_,m,x,w,M,b,E,S,k=u,T=bm(),A={point:c,lineStart:h,lineEnd:p,polygonStart:l,polygonEnd:f};return A}}function Pa(){Um.point=Da,Um.lineEnd=za}function za(){Um.point=Um.lineEnd=Lu}function Da(t,n){t*=q_,n*=q_,lm=t,fm=G_(n),hm=O_(n),Um.point=Fa}function Fa(t,n){t*=q_,n*=q_;var e=G_(n),r=O_(n),i=R_(t-lm),o=O_(i),u=G_(i),a=r*u,c=hm*e-fm*r*o,s=fm*e+hm*r*o;Lm.add(I_($_(a*a+c*c),s)),lm=t,fm=e,hm=r}function La(t,n){return!(!t||!jm.hasOwnProperty(t.type))&&jm[t.type](t,n)}function Ua(t,n){return 0===Im(t,n)}function qa(t,n){var e=Im(t[0],t[1]);return Im(t[0],n)+Im(n,t[1])<=e+P_}function Ra(t,n){return!!Tm(t.map(Ya),Ia(n))}function Ya(t){return t=t.map(Ia),t.pop(),t}function Ia(t){return[t[0]*q_,t[1]*q_]}function Oa(t,n,e){var r=il(t,n-P_,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function ja(t,n,e){var r=il(t,n-P_,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function Ha(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return il(j_(o/d)*d,i,d).map(h).concat(il(j_(s/y)*y,c,y).map(p)).concat(il(j_(r/v)*v,e,v).filter(function(t){return R_(t%d)>P_}).map(l)).concat(il(j_(a/g)*g,u,g).filter(function(t){return R_(t%y)>P_}).map(f))}var e,r,i,o,u,a,c,s,l,f,h,p,v=10,g=v,d=90,y=360,_=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(c).slice(1),h(i).reverse().slice(1),p(s).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.extentMajor(n).extentMinor(n):t.extentMinor()},t.extentMajor=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],s=+n[0][1],c=+n[1][1],o>i&&(n=o,o=i,i=n),s>c&&(n=s,s=c,c=n),t.precision(_)):[[o,s],[i,c]]},t.extentMinor=function(n){\nreturn arguments.length?(r=+n[0][0],e=+n[1][0],a=+n[0][1],u=+n[1][1],r>e&&(n=r,r=e,e=n),a>u&&(n=a,a=u,u=n),t.precision(_)):[[r,a],[e,u]]},t.step=function(n){return arguments.length?t.stepMajor(n).stepMinor(n):t.stepMinor()},t.stepMajor=function(n){return arguments.length?(d=+n[0],y=+n[1],t):[d,y]},t.stepMinor=function(n){return arguments.length?(v=+n[0],g=+n[1],t):[v,g]},t.precision=function(n){return arguments.length?(_=+n,l=Oa(a,u,90),f=ja(r,e,_),h=Oa(s,c,90),p=ja(o,i,_),t):_},t.extentMajor([[-180,-90+P_],[180,90-P_]]).extentMinor([[-180,-80-P_],[180,80+P_]])}function Ba(){return Ha()()}function Xa(){$m.point=Ga}function Ga(t,n){$m.point=Va,pm=gm=t,vm=dm=n}function Va(t,n){Vm.add(dm*t-gm*n),gm=t,dm=n}function $a(){Va(pm,vm)}function Wa(t,n){t<Wm&&(Wm=t),t>Qm&&(Qm=t),n<Zm&&(Zm=n),n>Jm&&(Jm=n)}function Za(t,n){tx+=t,nx+=n,++ex}function Qa(){sx.point=Ja}function Ja(t,n){sx.point=Ka,Za(mm=t,xm=n)}function Ka(t,n){var e=t-mm,r=n-xm,i=$_(e*e+r*r);rx+=i*(mm+t)/2,ix+=i*(xm+n)/2,ox+=i,Za(mm=t,xm=n)}function tc(){sx.point=Za}function nc(){sx.point=rc}function ec(){ic(ym,_m)}function rc(t,n){sx.point=ic,Za(ym=mm=t,_m=xm=n)}function ic(t,n){var e=t-mm,r=n-xm,i=$_(e*e+r*r);rx+=i*(mm+t)/2,ix+=i*(xm+n)/2,ox+=i,i=xm*t-mm*n,ux+=i*(mm+t),ax+=i*(xm+n),cx+=3*i,Za(mm=t,xm=n)}function oc(t){this._context=t}function uc(t,n){dx.point=ac,fx=px=t,hx=vx=n}function ac(t,n){px-=t,vx-=n,gx.add($_(px*px+vx*vx)),px=t,vx=n}function cc(){this._string=[]}function sc(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function lc(t){return function(n){var e=new fc;for(var r in t)e[r]=t[r];return e.stream=n,e}}function fc(){}function hc(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),J_(e,t.stream(Km)),n(Km.result()),null!=r&&t.clipExtent(r),t}function pc(t,n,e){return hc(t,function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),u=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,a=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([u,a])},e)}function vc(t,n,e){return pc(t,[[0,0],n],e)}function gc(t,n,e){return hc(t,function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,u=-i*e[0][1];t.scale(150*i).translate([o,u])},e)}function dc(t,n,e){return hc(t,function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],u=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,u])},e)}function yc(t){return lc({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function _c(t,n){function e(r,i,o,u,a,c,s,l,f,h,p,v,g,d){var y=s-r,_=l-i,m=y*y+_*_;if(m>4*n&&g--){var x=u+h,w=a+p,M=c+v,b=$_(x*x+w*w+M*M),E=Du(M/=b),S=R_(R_(M)-1)<P_||R_(o-f)<P_?(o+f)/2:I_(w,x),k=t(S,E),T=k[0],A=k[1],C=T-r,N=A-i,P=_*C-y*N;(P*P/m>n||R_((y*C+_*N)/m-.5)>.3||u*h+a*p+c*v<xx)&&(e(r,i,o,u,a,c,T,A,S,x/=b,w/=b,M,g,d),d.point(T,A),e(T,A,S,x,w,M,s,l,f,h,p,v,g,d))}}return function(n){function r(e,r){e=t(e,r),n.point(e[0],e[1])}function i(){y=NaN,M.point=o,n.lineStart()}function o(r,i){var o=Bu([r,i]),u=t(r,i);e(y,_,d,m,x,w,y=u[0],_=u[1],d=r,m=o[0],x=o[1],w=o[2],mx,n),n.point(y,_)}function u(){M.point=r,n.lineEnd()}function a(){i(),M.point=c,M.lineEnd=s}function c(t,n){o(l=t,n),f=y,h=_,p=m,v=x,g=w,M.point=o}function s(){e(y,_,d,m,x,w,f,h,l,p,v,g,mx,n),M.lineEnd=u,u()}var l,f,h,p,v,g,d,y,_,m,x,w,M={point:r,lineStart:i,lineEnd:u,polygonStart:function(){n.polygonStart(),M.lineStart=a},polygonEnd:function(){n.polygonEnd(),M.lineStart=i}};return M}}function mc(t){return lc({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}function xc(t,n,e){function r(r,i){return[n+t*r,e-t*i]}return r.invert=function(r,i){return[(r-n)/t,(e-i)/t]},r}function wc(t,n,e,r){function i(t,r){return[a*t-c*r+n,e-c*t-a*r]}var o=O_(r),u=G_(r),a=o*t,c=u*t,s=o/t,l=u/t,f=(u*e-o*n)/t,h=(u*n+o*e)/t;return i.invert=function(t,n){return[s*t-l*n+f,h-l*t-s*n]},i}function Mc(t){return bc(function(){return t})()}function bc(t){function n(t){return h(t[0]*q_,t[1]*q_)}function e(t){return(t=h.invert(t[0],t[1]))&&[t[0]*U_,t[1]*U_]}function r(){var t=wc(g,0,0,b).apply(null,o(_,m)),n=(b?wc:xc)(g,d-t[0],y-t[1],b);return u=ya(x,w,M),f=sm(o,n),h=sm(u,f),l=wx(f,A),i()}function i(){return p=v=null,n}var o,u,a,c,s,l,f,h,p,v,g=150,d=480,y=250,_=0,m=0,x=0,w=0,M=0,b=0,E=null,S=Cm,k=null,T=Xm,A=.5;return n.stream=function(t){return p&&v===t?p:p=Mx(mc(u)(S(l(T(v=t)))))},n.preclip=function(t){return arguments.length?(S=t,E=void 0,i()):S},n.postclip=function(t){return arguments.length?(T=t,k=a=c=s=null,i()):T},n.clipAngle=function(t){return arguments.length?(S=+t?Nm(E=t*q_):(E=null,Cm),i()):E*U_},n.clipExtent=function(t){return arguments.length?(T=null==t?(k=a=c=s=null,Xm):Na(k=+t[0][0],a=+t[0][1],c=+t[1][0],s=+t[1][1]),i()):null==k?null:[[k,a],[c,s]]},n.scale=function(t){return arguments.length?(g=+t,r()):g},n.translate=function(t){return arguments.length?(d=+t[0],y=+t[1],r()):[d,y]},n.center=function(t){return arguments.length?(_=t[0]%360*q_,m=t[1]%360*q_,r()):[_*U_,m*U_]},n.rotate=function(t){return arguments.length?(x=t[0]%360*q_,w=t[1]%360*q_,M=t.length>2?t[2]%360*q_:0,r()):[x*U_,w*U_,M*U_]},n.angle=function(t){return arguments.length?(b=t%360*q_,r()):b*U_},n.precision=function(t){return arguments.length?(l=wx(f,A=t*t),i()):$_(A)},n.fitExtent=function(t,e){return pc(n,t,e)},n.fitSize=function(t,e){return vc(n,t,e)},n.fitWidth=function(t,e){return gc(n,t,e)},n.fitHeight=function(t,e){return dc(n,t,e)},function(){return o=t.apply(this,arguments),n.invert=o.invert&&e,r()}}function Ec(t){var n=0,e=z_/3,r=bc(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*q_,e=t[1]*q_):[n*U_,e*U_]},i}function Sc(t){function n(t,n){return[t*e,G_(n)/e]}var e=O_(t);return n.invert=function(t,n){return[t/e,Du(n*e)]},n}function kc(t,n){function e(t,n){var e=$_(o-2*i*G_(n))/i;return[e*G_(t*=i),u-e*O_(t)]}var r=G_(t),i=(r+G_(n))/2;if(R_(i)<P_)return Sc(t);var o=1+r*(2*i-r),u=$_(o)/i;return e.invert=function(t,n){var e=u-n;return[I_(t,R_(e))/i*V_(e),Du((o-(t*t+e*e)*i*i)/(2*i))]},e}function Tc(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}function Ac(t){return function(n,e){var r=O_(n),i=O_(e),o=t(r*i);return[o*i*G_(n),o*G_(e)]}}function Cc(t){return function(n,e){var r=$_(n*n+e*e),i=t(r),o=G_(i),u=O_(i);return[I_(n*o,r*u),Du(r&&e*o/r)]}}function Nc(t,n){return[t,B_(W_((D_+n)/2))]}function Pc(t){function n(){var n=z_*a(),u=o(wm(o.rotate()).invert([0,0]));return s(null==l?[[u[0]-n,u[1]-n],[u[0]+n,u[1]+n]]:t===Nc?[[Math.max(u[0]-n,l),e],[Math.min(u[0]+n,r),i]]:[[l,Math.max(u[1]-n,e)],[r,Math.min(u[1]+n,i)]])}var e,r,i,o=Mc(t),u=o.center,a=o.scale,c=o.translate,s=o.clipExtent,l=null;return o.scale=function(t){return arguments.length?(a(t),n()):a()},o.translate=function(t){return arguments.length?(c(t),n()):c()},o.center=function(t){return arguments.length?(u(t),n()):u()},o.clipExtent=function(t){return arguments.length?(null==t?l=e=r=i=null:(l=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),n()):null==l?null:[[l,e],[r,i]]},n()}function zc(t){return W_((D_+t)/2)}function Dc(t,n){function e(t,n){o>0?n<-D_+P_&&(n=-D_+P_):n>D_-P_&&(n=D_-P_);var e=o/X_(zc(n),i);return[e*G_(i*t),o-e*O_(i*t)]}var r=O_(t),i=t===n?G_(t):B_(r/O_(n))/B_(zc(n)/zc(t)),o=r*X_(zc(t),i)/i;return i?(e.invert=function(t,n){var e=o-n,r=V_(i)*$_(t*t+e*e);return[I_(t,R_(e))/i*V_(e),2*Y_(X_(o/r,1/i))-D_]},e):Nc}function Fc(t,n){return[t,n]}function Lc(t,n){function e(t,n){var e=o-n,r=i*t;return[e*G_(r),o-e*O_(r)]}var r=O_(t),i=t===n?G_(t):(r-O_(n))/(n-t),o=r/i+t;return R_(i)<P_?Fc:(e.invert=function(t,n){var e=o-n;return[I_(t,R_(e))/i*V_(e),o-V_(i)*$_(t*t+e*e)]},e)}function Uc(t,n){var e=Du(Rx*G_(n)),r=e*e,i=r*r*r;return[t*O_(e)/(Rx*(Fx+3*Lx*r+i*(7*Ux+9*qx*r))),e*(Fx+Lx*r+i*(Ux+qx*r))]}function qc(t,n){var e=O_(n),r=O_(t)*e;return[e*G_(t)/r,G_(n)/r]}function Rc(t,n,e,r){return 1===t&&1===n&&0===e&&0===r?Xm:lc({point:function(i,o){this.stream.point(i*t+e,o*n+r)}})}function Yc(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function Ic(t,n){return[O_(n)*G_(t),G_(n)]}function Oc(t,n){var e=O_(n),r=1+O_(t)*e;return[e*G_(t)/r,G_(n)/r]}function jc(t,n){return[B_(W_((D_+n)/2)),-t]}function Hc(t){return t?t/Math.sin(t):1}function Bc(t){return t>1?aw:t<-1?-aw:Math.asin(t)}function Xc(t){return t>1?0:t<-1?uw:Math.acos(t)}function Gc(t){return t>0?Math.sqrt(t):0}function Vc(t){return(Zx(t)-Zx(-t))/2}function $c(t){return(Zx(t)+Zx(-t))/2}function Wc(t){return Jx(t+Gc(t*t+1))}function Zc(t){return Jx(t+Gc(t*t-1))}function Qc(t){function n(t,n){var e=Wx(t),i=Wx(n),o=ew(n),u=i*e,a=-((1-u?Jx((1+u)/2)/(1-u):-.5)+r/(1+u));return[a*i*ew(t),a*o]}var e=rw(t/2),r=2*Jx(Wx(t/2))/(e*e);return n.invert=function(n,e){var i,o=Gc(n*n+e*e),u=-t/2,a=50;if(!o)return[0,0];do{var c=u/2,s=Wx(c),l=ew(c),f=rw(c),h=Jx(1/s);u-=i=(2/f*h-r*f-o)/(-h/(l*l)+1-r/(2*s*s))}while(Gx(i)>iw&&--a>0);var p=ew(u);return[$x(n*p,o*Wx(u)),Bc(e*p/o)]},n}function Jc(t,n){var e=Wx(n),r=Hc(Xc(e*Wx(t/=2)));return[2*e*ew(t)*r,ew(n)*r]}function Kc(t){function n(t,n){var a=Wx(n),c=Wx(t/=2);return[(1+a)*ew(t),(i*n>-$x(c,o)-.001?0:10*-i)+u+ew(n)*r-(1+a)*e*c]}var e=ew(t),r=Wx(t),i=t>=0?1:-1,o=rw(i*t),u=(1+e-r)/2;return n.invert=function(t,n){var a=0,c=0,s=50;do{var l=Wx(a),f=ew(a),h=Wx(c),p=ew(c),v=1+h,g=v*f-t,d=u+p*r-v*e*l-n,y=v*l/2,_=-f*p,m=e*v*f/2,x=r*h+e*l*p,w=_*m-x*y,M=(d*_-g*x)/w/2,b=(g*m-d*y)/w;a-=M,c-=b}while((Gx(M)>iw||Gx(b)>iw)&&--s>0);return i*c>-$x(Wx(a),o)-.001?[2*a,c]:null},n}function ts(t,n){var e=rw(n/2),r=Gc(1-e*e),i=1+r*Wx(t/=2),o=ew(t)*r/i,u=e/i,a=o*o,c=u*u;return[4/3*o*(3+a-3*c),4/3*u*(3+3*a-c)]}function ns(t,n){function e(e,r){var i=kx(e/n,r);return i[0]*=t,i}return arguments.length<2&&(n=t),1===n?kx:n===1/0?es:(e.invert=function(e,r){var i=kx.invert(e/t,r);return i[0]*=n,i},e)}function es(t,n){return[t*Wx(n)/Wx(n/=2),2*ew(n)]}function rs(t,n){var e,r=t*ew(n),i=30;do{n-=e=(n+ew(n)-r)/(1+Wx(n))}while(Gx(e)>iw&&--i>0);return n/2}function is(t,n,e){function r(r,i){return[t*r*Wx(i=rs(e,i)),n*ew(i)]}return r.invert=function(r,i){return i=Bc(i/n),[r/(t*Wx(i)),Bc((2*i+ew(2*i))/e)]},r}function os(t,n){return[t*Wx(n),n]}function us(t,n,e,r,i,o){var u,a=Wx(o);if(Gx(t)>1||Gx(o)>1)u=Xc(e*i+n*r*a);else{var c=ew(t/2),s=ew(o/2);u=2*Bc(Gc(c*c+n*r*s*s))}return Gx(u)>iw?[u,$x(r*ew(o),n*i-e*r*a)]:[0,0]}function as(t,n,e){return Xc((t*t+n*n-e*e)/(2*t*n))}function cs(t){return t-2*uw*Qx((t+uw)/(2*uw))}function ss(t,n,e){function r(t,n){var e,r=ew(n),i=Wx(n),u=new Array(3);for(e=0;e<3;++e){var a=o[e];if(u[e]=us(n-a[1],a[3],a[2],i,r,t-a[0]),!u[e][0])return a.point;u[e][1]=cs(u[e][1]-a.v[1])}var c=f.slice();for(e=0;e<3;++e){var h=2==e?0:e+1,p=as(o[e].v[0],u[e][0],u[h][0]);u[e][1]<0&&(p=-p),e?1==e?(p=s-p,c[0]-=u[e][0]*Wx(p),c[1]-=u[e][0]*ew(p)):(p=l-p,c[0]+=u[e][0]*Wx(p),c[1]+=u[e][0]*ew(p)):(c[0]+=u[e][0]*Wx(p),c[1]-=u[e][0]*ew(p))}return c[0]/=3,c[1]/=3,c}for(var i,o=[[t[0],t[1],ew(t[1]),Wx(t[1])],[n[0],n[1],ew(n[1]),Wx(n[1])],[e[0],e[1],ew(e[1]),Wx(e[1])]],u=o[2],a=0;a<3;++a,u=i)i=o[a],u.v=us(i[1]-u[1],u[3],u[2],i[3],i[2],i[0]-u[0]),u.point=[0,0];var c=as(o[0].v[0],o[2].v[0],o[1].v[0]),s=as(o[0].v[0],o[1].v[0],o[2].v[0]),l=uw-c;o[2].point[1]=0,o[0].point[0]=-(o[1].point[0]=o[0].v[0]/2);var f=[o[2].point[0]=o[0].point[0]+o[2].v[0]*Wx(c),2*(o[0].point[1]=o[1].point[1]=o[2].v[0]*ew(c))];return r}function ls(t){return t[0]*=pw,t[1]*=pw,t}function fs(){return hs([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function hs(t,n,e){var r=am({type:"MultiPoint",coordinates:[t,n,e]}),i=[-r[0],-r[1]],o=wm(i),u=Mc(ss(ls(o(t)),ls(o(n)),ls(o(e)))).rotate(i),a=u.center;return delete u.rotate,u.center=function(t){return arguments.length?a(o(t)):o.invert(a())},u.clipAngle(90)}function ps(t,n){var e=Gc(1-ew(n));return[2/lw*t*e,lw*(1-e)]}function vs(t){function n(t,n){return[t*e,(1+e)*rw(n/2)]}var e=Wx(t);return n.invert=function(t,n){return[t/e,2*Vx(n/(1+e))]},n}function gs(t,n){var e=Gc(uw*(4+uw));return[2/e*t*(1+Gc(1-4*n*n/(uw*uw))),4/e*n]}function ds(t,n){var e=(2+aw)*ew(n);n/=2;for(var r=0,i=1/0;r<10&&Gx(i)>iw;r++){var o=Wx(n);n-=i=(n+ew(n)*(o+2)-e)/(2*o*(1+o))}return[2/Gc(uw*(4+uw))*t*(1+Wx(n)),2*Gc(uw/(4+uw))*ew(n)]}function ys(t,n){return[t*(1+Wx(n))/Gc(2+uw),2*n/Gc(2+uw)]}function _s(t,n){for(var e=(1+aw)*ew(n),r=0,i=1/0;r<10&&Gx(i)>iw;r++)n-=i=(n+ew(n)-e)/(1+Wx(n));return e=Gc(2+uw),[t*(1+Wx(n))/e,2*n/e]}function ms(t,n){var e=rw(n/2);return[t*Ew*Gc(1-e*e),(1+Ew)*e]}function xs(t,n){var e=t*t,r=n*n;return[t*(1-.162388*r)*(.87-952426e-9*e*e),n*(1+r/12)]}function ws(t,n){return[3/fw*t*Gc(uw*uw/3-n*n),n]}function Ms(t,n){return[t,1.25*Jx(rw(cw+.4*n))]}function bs(t,n){var e=ps(t,n);return[e[0]*Yw,e[1]]}function Es(t,n){return{type:"FeatureCollection",features:t.features.map(function(t){return Ss(t,n)})}}function Ss(t,n){return{type:"Feature",id:t.id,properties:t.properties,geometry:Ts(t.geometry,n)}}function ks(t,n){return{type:"GeometryCollection",geometries:t.geometries.map(function(t){return Ts(t,n)})}}function Ts(t,n){if(!t)return null;if("GeometryCollection"===t.type)return ks(t,n);var e;switch(t.type){case"Point":case"MultiPoint":e=Gw;break;case"LineString":case"MultiLineString":e=Vw;break;case"Polygon":case"MultiPolygon":case"Sphere":e=$w;break;default:return null}return J_(t,n(e)),e.result()}function As(t,n){var e,r=tw(18,36*Gx(n)/uw),i=Qx(r),o=r-i,u=(e=Zw[i])[0],a=e[1],c=(e=Zw[++i])[0],s=e[1],l=(e=Zw[tw(19,++i)])[0],f=e[1];return[t*(c+o*(l-u)/2+o*o*(l-2*c+u)/2),(n>0?aw:-aw)*(s+o*(f-a)/2+o*o*(f-2*s+a)/2)]}function Cs(t){function n(n,e){var r=Wx(e),i=(t-1)/(t-r*Wx(n));return[i*r*ew(n),i*ew(e)]}return n.invert=function(n,e){var r=n*n+e*e,i=Gc(r),o=(t-Gc(1-r*(t+1)/(t-1)))/((t-1)/i+i/(t-1));return[$x(n*o,i*Gc(1-o*o)),i?Bc(e*o/i):0]},n}function Ns(t,n){function e(n,e){var u=r(n,e),a=u[1],c=a*o/(t-1)+i;return[u[0]*i/c,a/c]}var r=Cs(t);if(!n)return r;var i=Wx(n),o=ew(n);return e.invert=function(n,e){var u=(t-1)/(t-1-e*o);return r.invert(u*n,u*e*i)},e}function Ps(t){return t.length>0}function zs(t){return Math.floor(t*Kw)/Kw}function Ds(t){return t===iM||t===uM?[0,t]:[tM,zs(t)]}function Fs(t){var n=t[0],e=t[1],r=!1;return n<=nM?(n=tM,r=!0):n>=rM&&(n=eM,r=!0),e<=oM?(e=iM,r=!0):e>=aM&&(e=uM,r=!0),r?[n,e]:t}function Ls(t){return t.map(Fs)}function Us(t,n,e){for(var r=0,i=t.length;r<i;++r){var o=t[r].slice();e.push({index:-1,polygon:n,ring:o});for(var u=0,a=o.length;u<a;++u){var c=o[u],s=c[0],l=c[1];if(s<=nM||s>=rM||l<=oM||l>=aM){o[u]=Fs(c);for(var f=u+1;f<a;++f){var h=o[f],p=h[0],v=h[1];if(p>nM&&p<rM&&v>oM&&v<aM)break}if(f===u+1)continue;if(u){var g={index:-1,polygon:n,ring:o.slice(0,u+1)};g.ring[g.ring.length-1]=Ds(l),e[e.length-1]=g}else e.pop();if(f>=a)break;e.push({index:-1,polygon:n,ring:o=o.slice(f-1)}),o[0]=Ds(o[0][1]),u=-1,a=o.length}}}}function qs(t){var n,e,r,i,o,u,a=t.length,c={},s={};for(n=0;n<a;++n)e=t[n],r=e.ring[0],o=e.ring[e.ring.length-1],r[0]!==o[0]||r[1]!==o[1]?(e.index=n,c[r]=s[o]=e):(e.polygon.push(e.ring),t[n]=null);for(n=0;n<a;++n)if(e=t[n]){if(r=e.ring[0],o=e.ring[e.ring.length-1],i=s[r],u=c[o],delete c[r],delete s[o],r[0]===o[0]&&r[1]===o[1]){e.polygon.push(e.ring);continue}i?(delete s[r],delete c[i.ring[0]],i.ring.pop(),t[i.index]=null,e={index:-1,polygon:i.polygon,ring:i.ring.concat(e.ring)},i===u?e.polygon.push(e.ring):(e.index=a++,t.push(c[e.ring[0]]=s[e.ring[e.ring.length-1]]=e))):u?(delete c[o],delete s[u.ring[u.ring.length-1]],e.ring.pop(),e={index:a++,polygon:u.polygon,ring:e.ring.concat(u.ring)},t[u.index]=null,t.push(c[e.ring[0]]=s[e.ring[e.ring.length-1]]=e)):(e.ring.push(e.ring[0]),e.polygon.push(e.ring))}}function Rs(t){var n={type:"Feature",geometry:Ys(t.geometry)};return null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),null!=t.properties&&(n.properties=t.properties),n}function Ys(t){if(null==t)return t;var n,e,r,i;switch(t.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:t.geometries.map(Ys)};break;case"Point":n={type:"Point",coordinates:Fs(t.coordinates)};break;case"MultiPoint":case"LineString":n={type:t.type,coordinates:Ls(t.coordinates)};break;case"MultiLineString":n={type:"MultiLineString",coordinates:t.coordinates.map(Ls)};break;case"Polygon":var o=[];Us(t.coordinates,o,e=[]),qs(e),n={type:"Polygon",coordinates:o};break;case"MultiPolygon":e=[],r=-1,i=t.coordinates.length;for(var u=new Array(i);++r<i;)Us(t.coordinates[r],u[r]=[],e);qs(e),n={type:"MultiPolygon",coordinates:u.filter(Ps)};break;default:return t}return null!=t.bbox&&(n.bbox=t.bbox),n}function Is(t,n){return[t*Gc(1-3*n*n/(uw*uw)),n]}function Os(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function js(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Hs(t,n){var e=n.id,r=n.bbox,i=null==n.properties?{}:n.properties,o=Bs(t,n);return null==e&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:e,properties:i,geometry:o}:{type:"Feature",id:e,bbox:r,properties:i,geometry:o}}function Bs(t,n){function e(t,n){n.length&&n.pop();for(var e=s[t<0?~t:t],r=0,i=e.length;r<i;++r)n.push(c(e[r],r));t<0&&CM(n,i)}function r(t){return c(t)}function i(t){for(var n=[],r=0,i=t.length;r<i;++r)e(t[r],n);return n.length<2&&n.push(n[0]),n}function o(t){for(var n=i(t);n.length<4;)n.push(n[0]);return n}function u(t){return t.map(o)}function a(t){var n,e=t.type;switch(e){case"GeometryCollection":return{type:e,geometries:t.geometries.map(a)};case"Point":n=r(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(r);break;case"LineString":n=i(t.arcs);break;case"MultiLineString":n=t.arcs.map(i);break;case"Polygon":n=u(t.arcs);break;case"MultiPolygon":n=t.arcs.map(u);break;default:return null}return{type:e,coordinates:n}}var c=TM(t.transform),s=t.arcs;return a(n)}function Xs(t,n,e){var r,i,o;if(arguments.length>1)r=Gs(t,n,e);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:PM(t,r)}}function Gs(t,n,e){function r(t){var n=t<0?~t:t;(l[n]||(l[n]=[])).push({i:t,g:c})}function i(t){t.forEach(r)}function o(t){t.forEach(i)}function u(t){t.forEach(o)}function a(t){switch(c=t,t.type){case"GeometryCollection":t.geometries.forEach(a);break;case"LineString":i(t.arcs);break;case"MultiLineString":case"Polygon":o(t.arcs);break;case"MultiPolygon":u(t.arcs)}}var c,s=[],l=[];return a(n),l.forEach(null==e?function(t){s.push(t[0].i)}:function(t){e(t[0].g,t[t.length-1].g)&&s.push(t[0].i)}),s}function Vs(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[0]*i[1]-n[1]*i[0];return Math.abs(o)}function $s(t,n){function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}function r(t){t.forEach(function(n){n.forEach(function(n){(o[n=n<0?~n:n]||(o[n]=[])).push(t)})}),u.push(t)}function i(n){return Vs(Bs(t,{type:"Polygon",arcs:[n]}).coordinates[0])}var o={},u=[],a=[];return n.forEach(e),u.forEach(function(t){if(!t._){var n=[],e=[t];for(t._=1,a.push(n);t=e.pop();)n.push(t),t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].forEach(function(t){t._||(t._=1,e.push(t))})})})}}),u.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:a.map(function(n){var e,r=[];if(n.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].length<2&&r.push(t)})})}),r=PM(t,r),(e=r.length)>1)for(var u,a,c=1,s=i(r[0]);c<e;++c)(u=i(r[c]))>s&&(a=r[0],r[0]=r[c],r[c]=a,s=u);return r})}}var Ws=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},Zs=function(t){return 1===t.length&&(t=n(t)),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}},Qs=Zs(Ws),Js=Qs.right,Ks=Qs.left,tl=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},nl=function(t){return null===t?NaN:+t},el=function(t,n){var e,r,i,o=t.length,u=-1;if(null==n){for(;++u<o;)if(null!=(e=t[u])&&e>=e)for(r=i=e;++u<o;)null!=(e=t[u])&&(r>e&&(r=e),i<e&&(i=e))}else for(;++u<o;)if(null!=(e=n(t[u],u,t))&&e>=e)for(r=i=e;++u<o;)null!=(e=n(t[u],u,t))&&(r>e&&(r=e),i<e&&(i=e));return[r,i]},rl=Array.prototype,il=(rl.slice,rl.map,function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}),ol=Math.sqrt(50),ul=Math.sqrt(10),al=Math.sqrt(2),cl=function(t,n,r){var i,o,u,a,c=-1;if(n=+n,t=+t,r=+r,t===n&&r>0)return[t];if((i=n<t)&&(o=t,t=n,n=o),0===(a=e(t,n,r))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),n=Math.floor(n/a),u=new Array(o=Math.ceil(n-t+1));++c<o;)u[c]=(t+c)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),u=new Array(o=Math.ceil(t-n+1));++c<o;)u[c]=(t-c)/a;return i&&u.reverse(),u},sl=function(t,n,e){if(null==e&&(e=nl),r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,o=Math.floor(i),u=+e(t[o],o,t);return u+(+e(t[o+1],o+1,t)-u)*(i-o)}},ll=function(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&e>r&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&e>r&&(r=e);return r},fl=function(t){for(var n,e,r,i=t.length,o=-1,u=0;++o<i;)u+=t[o].length;for(e=new Array(u);--i>=0;)for(r=t[i],n=r.length;--n>=0;)e[--u]=r[n];return e},hl=function(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&r>e&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&r>e&&(r=e);return r},pl=function(t,n){if(e=t.length){var e,r,i=0,o=0,u=t[o];for(null==n&&(n=Ws);++i<e;)(n(r=t[i],u)<0||0!==n(u,u))&&(u=r,o=i);return 0===n(u,u)?o:void 0}},vl=function(t,n){var e,r=t.length,i=-1,o=0;if(null==n)for(;++i<r;)(e=+t[i])&&(o+=e);else for(;++i<r;)(e=+n(t[i],i,t))&&(o+=e);return o};i.prototype=o.prototype={constructor:i,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,n){return this["$"+t]=n,this},remove:function(t){var n="$"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)"$"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)"$"===n[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var n in this)"$"===n[0]&&t(this[n],n.slice(1),this)}};var gl=o.prototype;u.prototype=a.prototype={constructor:u,has:gl.has,add:function(t){return t+="",this["$"+t]=t,this},remove:gl.remove,clear:gl.clear,values:gl.keys,size:gl.size,empty:gl.empty,each:gl.each};var dl=function(t){var n=[];for(var e in t)n.push(e);return n},yl=function(t){var n=[];for(var e in t)n.push(t[e]);return n},_l=Array.prototype.slice,ml=function(t){return t},xl=1,wl=2,Ml=3,bl=4,El=1e-6,Sl={value:function(){}};m.prototype=_.prototype={constructor:m,on:function(t,n){var e,r=this._,i=x(t+"",r),o=-1,u=i.length;{if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<u;)if(e=(t=i[o]).type)r[e]=M(r[e],t.name,n);else if(null==n)for(e in r)r[e]=M(r[e],t.name,null);return this}for(;++o<u;)if((e=(t=i[o]).type)&&(e=w(r[e],t.name)))return e}},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new m(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,e=r.length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var kl="http://www.w3.org/1999/xhtml",Tl={svg:"http://www.w3.org/2000/svg",xhtml:kl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Al=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Tl.hasOwnProperty(n)?{space:Tl[n],local:t}:t},Cl=function(t){var n=Al(t);return(n.local?E:b)(n)},Nl=0;k.prototype=S.prototype={constructor:k,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Pl=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var zl=document.documentElement;if(!zl.matches){var Dl=zl.webkitMatchesSelector||zl.msMatchesSelector||zl.mozMatchesSelector||zl.oMatchesSelector;Pl=function(t){return function(){return Dl.call(this,t)}}}}var Fl=Pl,Ll={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(Ll={mouseenter:"mouseover",mouseleave:"mouseout"})}var Ul=function(t,n,e){var r,i,o=C(t+""),u=o.length;{if(!(arguments.length<2)){for(a=n?P:N,null==e&&(e=!1),r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var c,s=0,l=a.length;s<l;++s)for(r=0,c=a[s];r<u;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}},ql=function(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e},Rl=function(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]},Yl=function(t){var n=ql();return n.changedTouches&&(n=n.changedTouches[0]),Rl(t,n)},Il=function(t){return null==t?D:function(){return this.querySelector(t)}},Ol=function(t){"function"!=typeof t&&(t=Il(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],c=a.length,s=r[i]=new Array(c),l=0;l<c;++l)(o=a[l])&&(u=t.call(o,o.__data__,l,a))&&("__data__"in o&&(u.__data__=o.__data__),s[l]=u);return new mt(r,this._parents)},jl=function(t){return null==t?F:function(){return this.querySelectorAll(t)}},Hl=function(t){"function"!=typeof t&&(t=jl(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],c=a.length,s=0;s<c;++s)(u=a[s])&&(r.push(t.call(u,u.__data__,s,a)),i.push(u));return new mt(r,i)},Bl=function(t){"function"!=typeof t&&(t=Fl(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&c.push(o);return new mt(r,this._parents)},Xl=function(t){return new Array(t.length)},Gl=function(){return new mt(this._enter||this._groups.map(Xl),this._parents)};L.prototype={constructor:L,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Vl=function(t){return function(){return t}},$l="$",Wl=function(t,n){if(!t)return p=new Array(this.size()),s=-1,this.each(function(t){p[++s]=t}),p;var e=n?q:U,r=this._parents,i=this._groups;"function"!=typeof t&&(t=Vl(t));for(var o=i.length,u=new Array(o),a=new Array(o),c=new Array(o),s=0;s<o;++s){var l=r[s],f=i[s],h=f.length,p=t.call(l,l&&l.__data__,s,r),v=p.length,g=a[s]=new Array(v),d=u[s]=new Array(v);e(l,f,g,d,c[s]=new Array(h),p,n);for(var y,_,m=0,x=0;m<v;++m)if(y=g[m]){for(m>=x&&(x=m+1);!(_=d[x])&&++x<v;);y._next=_||null}}return u=new mt(u,r),u._enter=a,u._exit=c,u},Zl=function(){return new mt(this._exit||this._groups.map(Xl),this._parents)},Ql=function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=n[a],l=e[a],f=s.length,h=u[a]=new Array(f),p=0;p<f;++p)(c=s[p]||l[p])&&(h[p]=c);for(;a<r;++a)u[a]=n[a];return new mt(u,this._parents)},Jl=function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},Kl=function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=R);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u,a=e[o],c=a.length,s=i[o]=new Array(c),l=0;l<c;++l)(u=a[l])&&(s[l]=u);s.sort(n)}return new mt(i,this._parents).order()},tf=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nf=function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},ef=function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},rf=function(){var t=0;return this.each(function(){++t}),t},of=function(){return!this.node()},uf=function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},af=function(t,n){var e=Al(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?I:Y:"function"==typeof n?e.local?B:H:e.local?j:O)(e,n))},cf=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},sf=function(t,n,e){return arguments.length>1?this.each((null==n?X:"function"==typeof n?V:G)(t,n,null==e?"":e)):$(this.node(),t)},lf=function(t,n){return arguments.length>1?this.each((null==n?W:"function"==typeof n?Q:Z)(t,n)):this.node()[t]};tt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ff=function(t,n){var e=J(t+"");if(arguments.length<2){for(var r=K(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?ot:n?rt:it)(e,n))},hf=function(t){return arguments.length?this.each(null==t?ut:("function"==typeof t?ct:at)(t)):this.node().textContent},pf=function(t){return arguments.length?this.each(null==t?st:("function"==typeof t?ft:lt)(t)):this.node().innerHTML},vf=function(){return this.each(ht)},gf=function(){return this.each(pt)},df=function(t){var n="function"==typeof t?t:Cl(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},yf=function(t,n){var e="function"==typeof t?t:Cl(t),r=null==n?vt:"function"==typeof n?n:Il(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},_f=function(){return this.each(gt)},mf=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},xf=function(t,n){return this.each(("function"==typeof n?_t:yt)(t,n))},wf=[null];mt.prototype=xt.prototype={constructor:mt,select:Ol,selectAll:Hl,filter:Bl,data:Wl,enter:Gl,exit:Zl,merge:Ql,order:Jl,sort:Kl,call:tf,nodes:nf,node:ef,size:rf,empty:of,each:uf,attr:af,style:sf,property:lf,classed:ff,text:hf,html:pf,raise:vf,lower:gf,append:df,insert:yf,remove:_f,datum:mf,on:Ul,dispatch:xf};var Mf=function(t){return"string"==typeof t?new mt([[document.querySelector(t)]],[document.documentElement]):new mt([[t]],wf)},bf=function(t){return"string"==typeof t?new mt([document.querySelectorAll(t)],[document.documentElement]):new mt([null==t?[]:t],wf)},Ef=function(t,n,e){arguments.length<3&&(e=n,n=ql().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return Rl(t,r);return null},Sf=function(t,n){null==n&&(n=ql().touches)\n;for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=Rl(t,n[e]);return i},kf=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},Tf=function(t){var n=t.document.documentElement,e=Mf(t).on("dragstart.drag",kf,!0);"onselectstart"in n?e.on("selectstart.drag",kf,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")},Af=function(t){return function(){return t}};bt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Cf=function(){function n(t){t.on("mousedown.drag",e).filter(d).on("touchstart.drag",o).on("touchmove.drag",u).on("touchend.drag touchcancel.drag",a).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(){if(!h&&p.apply(this,arguments)){var n=c("mouse",v.apply(this,arguments),Yl,this,arguments);n&&(Mf(t.event.view).on("mousemove.drag",r,!0).on("mouseup.drag",i,!0),Tf(t.event.view),wt(),f=!1,s=t.event.clientX,l=t.event.clientY,n("start"))}}function r(){if(kf(),!f){var n=t.event.clientX-s,e=t.event.clientY-l;f=n*n+e*e>w}y.mouse("drag")}function i(){Mf(t.event.view).on("mousemove.drag mouseup.drag",null),Mt(t.event.view,f),kf(),y.mouse("end")}function o(){if(p.apply(this,arguments)){var n,e,r=t.event.changedTouches,i=v.apply(this,arguments),o=r.length;for(n=0;n<o;++n)(e=c(r[n].identifier,i,Ef,this,arguments))&&(wt(),e("start"))}}function u(){var n,e,r=t.event.changedTouches,i=r.length;for(n=0;n<i;++n)(e=y[r[n].identifier])&&(kf(),e("drag"))}function a(){var n,e,r=t.event.changedTouches,i=r.length;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),n=0;n<i;++n)(e=y[r[n].identifier])&&(wt(),e("end"))}function c(e,r,i,o,u){var a,c,s,l=i(r,e),f=m.copy();if(z(new bt(n,"beforestart",a,e,x,l[0],l[1],0,0,f),function(){return null!=(t.event.subject=a=g.apply(o,u))&&(c=a.x-l[0]||0,s=a.y-l[1]||0,!0)}))return function t(h){var p,v=l;switch(h){case"start":y[e]=t,p=x++;break;case"end":delete y[e],--x;case"drag":l=i(r,e),p=x}z(new bt(n,h,a,e,p,l[0]+c,l[1]+s,l[0]-v[0],l[1]-v[1],f),f.apply,f,[h,o,u])}}var s,l,f,h,p=Et,v=St,g=kt,d=Tt,y={},m=_("start","drag","end"),x=0,w=0;return n.filter=function(t){return arguments.length?(p="function"==typeof t?t:Af(!!t),n):p},n.container=function(t){return arguments.length?(v="function"==typeof t?t:Af(t),n):v},n.subject=function(t){return arguments.length?(g="function"==typeof t?t:Af(t),n):g},n.touchable=function(t){return arguments.length?(d="function"==typeof t?t:Af(!!t),n):d},n.on=function(){var t=m.on.apply(m,arguments);return t===m?n:t},n.clickDistance=function(t){return arguments.length?(w=(t=+t)*t,n):Math.sqrt(w)},n},Nf=function(t,n,e){t.prototype=n.prototype=e,e.constructor=t},Pf="\\\\s*([+-]?\\\\d+)\\\\s*",zf="\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*",Df="\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*",Ff=/^#([0-9a-f]{3})$/,Lf=/^#([0-9a-f]{6})$/,Uf=new RegExp("^rgb\\\\("+[Pf,Pf,Pf]+"\\\\)$"),qf=new RegExp("^rgb\\\\("+[Df,Df,Df]+"\\\\)$"),Rf=new RegExp("^rgba\\\\("+[Pf,Pf,Pf,zf]+"\\\\)$"),Yf=new RegExp("^rgba\\\\("+[Df,Df,Df,zf]+"\\\\)$"),If=new RegExp("^hsl\\\\("+[zf,Df,Df]+"\\\\)$"),Of=new RegExp("^hsla\\\\("+[zf,Df,Df,zf]+"\\\\)$"),jf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nf(Ct,Nt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Nf(Lt,Ft,At(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Nf(Yt,Rt,At(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Yt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Yt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Lt(It(t>=240?t-240:t+120,i,r),It(t,i,r),It(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Hf=Math.PI/180,Bf=180/Math.PI,Xf=.95047,Gf=1,Vf=1.08883,$f=4/29,Wf=6/29,Zf=3*Wf*Wf,Qf=Wf*Wf*Wf;Nf(Ht,jt,At(Ct,{brighter:function(t){return new Ht(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Ht(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return t=Gf*Xt(t),n=Xf*Xt(n),e=Vf*Xt(e),new Lt(Gt(3.2404542*n-1.5371385*t-.4985314*e),Gt(-.969266*n+1.8760108*t+.041556*e),Gt(.0556434*n-.2040259*t+1.0572252*e),this.opacity)}})),Nf(Zt,Wt,At(Ct,{brighter:function(t){return new Zt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Zt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ot(this).rgb()}}));var Jf=-.14861,Kf=1.78277,th=-.29227,nh=-.90649,eh=1.97294,rh=eh*nh,ih=eh*Kf,oh=Kf*th-nh*Jf;Nf(Kt,Jt,At(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Kt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Kt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Hf,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new Lt(255*(n+e*(Jf*r+Kf*i)),255*(n+e*(th*r+nh*i)),255*(n+e*(eh*r)),this.opacity)}}));var uh,ah,ch,sh,lh,fh,hh=function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],u=r>0?t[r-1]:2*i-o,a=r<n-1?t[r+2]:2*o-i;return tn((e-r/n)*n,u,i,o,a)}},ph=function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],u=t[(r+1)%n],a=t[(r+2)%n];return tn((e-r/n)*n,i,o,u,a)}},vh=function(t){return function(){return t}},gh=function t(n){function e(t,n){var e=r((t=Ft(t)).r,(n=Ft(n)).r),i=r(t.g,n.g),o=r(t.b,n.b),u=un(t.opacity,n.opacity);return function(n){return t.r=e(n),t.g=i(n),t.b=o(n),t.opacity=u(n),t+""}}var r=on(n);return e.gamma=t,e}(1),dh=an(hh),yh=an(ph),_h=function(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),u=new Array(r);for(e=0;e<i;++e)o[e]=Sh(t[e],n[e]);for(;e<r;++e)u[e]=n[e];return function(t){for(e=0;e<i;++e)u[e]=o[e](t);return u}},mh=function(t,n){var e=new Date;return t=+t,n-=t,function(r){return e.setTime(t+n*r),e}},xh=function(t,n){return t=+t,n-=t,function(e){return t+n*e}},wh=function(t,n){var e,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={});for(e in n)e in t?r[e]=Sh(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}},Mh=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,bh=new RegExp(Mh.source,"g"),Eh=function(t,n){var e,r,i,o=Mh.lastIndex=bh.lastIndex=0,u=-1,a=[],c=[];for(t+="",n+="";(e=Mh.exec(t))&&(r=bh.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,c.push({i:u,x:xh(e,r)})),o=bh.lastIndex;return o<n.length&&(i=n.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?c[0]?sn(c[0].x):cn(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)a[(e=c[r]).i]=e.x(t);return a.join("")})},Sh=function(t,n){var e,r=typeof n;return null==n||"boolean"===r?vh(n):("number"===r?xh:"string"===r?(e=Nt(n))?(n=e,gh):Eh:n instanceof Nt?gh:n instanceof Date?mh:Array.isArray(n)?_h:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?wh:xh)(t,n)},kh=function(t,n){return t=+t,n-=t,function(e){return Math.round(t+n*e)}},Th=180/Math.PI,Ah={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ch=function(t,n,e,r,i,o){var u,a,c;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,c/=a),t*r<n*e&&(t=-t,n=-n,c=-c,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Th,skewX:Math.atan(c)*Th,scaleX:u,scaleY:a}},Nh=hn(ln,"px, ","px)","deg)"),Ph=hn(fn,", ",")",")"),zh=Math.SQRT2,Dh=function(t,n){var e,r,i=t[0],o=t[1],u=t[2],a=n[0],c=n[1],s=n[2],l=a-i,f=c-o,h=l*l+f*f;if(h<1e-12)r=Math.log(s/u)/zh,e=function(t){return[i+t*l,o+t*f,u*Math.exp(zh*t*r)]};else{var p=Math.sqrt(h),v=(s*s-u*u+4*h)/(2*u*2*p),g=(s*s-u*u-4*h)/(2*s*2*p),d=Math.log(Math.sqrt(v*v+1)-v),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-d)/zh,e=function(t){var n=t*r,e=pn(d),a=u/(2*p)*(e*gn(zh*n+d)-vn(d));return[i+a*l,o+a*f,u*e/pn(zh*n+d)]}}return e.duration=1e3*r,e},Fh=dn(rn),Lh=dn(un),Uh=_n(rn),qh=_n(un),Rh=mn(rn),Yh=mn(un),Ih=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},Oh=0,jh=0,Hh=0,Bh=1e3,Xh=0,Gh=0,Vh=0,$h="object"==typeof performance&&performance.now?performance:Date,Wh="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};Mn.prototype=bn.prototype={constructor:Mn,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?xn():+e)+(null==n?0:+n),this._next||fh===this||(fh?fh._next=this:lh=this,fh=this),this._call=t,this._time=e,An()},stop:function(){this._call&&(this._call=null,this._time=1/0,An())}};var Zh=function(t,n,e){var r=new Mn;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r},Qh=function(t,n,e){var r=new Mn,i=n;return null==n?(r.restart(t,n,e),r):(n=+n,e=null==e?xn():+e,r.restart(function o(u){u+=i,r.restart(o,i+=n,e),t(u)},n,e),r)},Jh=_("start","end","interrupt"),Kh=[],tp=0,np=1,ep=2,rp=3,ip=4,op=5,up=6,ap=function(t,n,e,r,i,o){var u=t.__transition;if(u){if(e in u)return}else t.__transition={};zn(t,e,{name:n,index:r,group:i,on:Jh,tween:Kh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:tp})},cp=function(t,n){var e,r,i,o=t.__transition,u=!0;if(o){n=null==n?null:n+"";for(i in o)(e=o[i]).name===n?(r=e.state>ep&&e.state<op,e.state=up,e.timer.stop(),r&&e.on.call("interrupt",t,t.__data__,e.index,e.group),delete o[i]):u=!1;u&&delete t.__transition}},sp=function(t){return this.each(function(){cp(this,t)})},lp=function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Pn(this.node(),e).tween,o=0,u=i.length;o<u;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?Dn:Fn)(e,t,n))},fp=function(t,n){var e;return("number"==typeof n?xh:n instanceof Nt?gh:(e=Nt(n))?(n=e,gh):Eh)(t,n)},hp=function(t,n){var e=Al(t),r="transform"===e?Ph:fp;return this.attrTween(t,"function"==typeof n?(e.local?On:In)(e,r,Ln(this,"attr."+t,n)):null==n?(e.local?qn:Un)(e):(e.local?Yn:Rn)(e,r,n+""))},pp=function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=Al(t);return this.tween(e,(r.local?jn:Hn)(r,n))},vp=function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?Bn:Xn)(n,t)):Pn(this.node(),n).delay},gp=function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?Gn:Vn)(n,t)):Pn(this.node(),n).duration},dp=function(t){var n=this._id;return arguments.length?this.each($n(n,t)):Pn(this.node(),n).ease},yp=function(t){"function"!=typeof t&&(t=Fl(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&c.push(o);return new oe(r,this._parents,this._name,this._id)},_p=function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=n[a],l=e[a],f=s.length,h=u[a]=new Array(f),p=0;p<f;++p)(c=s[p]||l[p])&&(h[p]=c);for(;a<r;++a)u[a]=n[a];return new oe(u,this._parents,this._name,this._id)},mp=function(t,n){var e=this._id;return arguments.length<2?Pn(this.node(),e).on.on(t):this.each(Zn(e,t,n))},xp=function(){return this.on("end.remove",Qn(this._id))},wp=function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Il(t));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var a,c,s=r[u],l=s.length,f=o[u]=new Array(l),h=0;h<l;++h)(a=s[h])&&(c=t.call(a,a.__data__,h,s))&&("__data__"in a&&(c.__data__=a.__data__),f[h]=c,ap(f[h],n,e,h,f,Pn(a,e)));return new oe(o,this._parents,n,e)},Mp=function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=jl(t));for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var c,s=r[a],l=s.length,f=0;f<l;++f)if(c=s[f]){for(var h,p=t.call(c,c.__data__,f,s),v=Pn(c,e),g=0,d=p.length;g<d;++g)(h=p[g])&&ap(h,n,e,g,p,v);o.push(p),u.push(c)}return new oe(o,u,n,e)},bp=xt.prototype.constructor,Ep=function(){return new bp(this._groups,this._parents)},Sp=function(t,n,e){var r="transform"==(t+="")?Nh:fp;return null==n?this.styleTween(t,Jn(t,r)).on("end.style."+t,Kn(t)):this.styleTween(t,"function"==typeof n?ne(t,r,Ln(this,"style."+t,n)):te(t,r,n+""),e)},kp=function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,ee(t,n,null==e?"":e))},Tp=function(t){return this.tween("text","function"==typeof t?ie(Ln(this,"text",t)):re(null==t?"":t+""))},Ap=function(){for(var t=this._name,n=this._id,e=ae(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],c=a.length,s=0;s<c;++s)if(u=a[s]){var l=Pn(u,n);ap(u,t,e,s,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new oe(r,this._parents,t,e)},Cp=0,Np=xt.prototype;oe.prototype=ue.prototype={constructor:oe,select:wp,selectAll:Mp,filter:yp,merge:_p,selection:Ep,transition:Ap,call:Np.call,nodes:Np.nodes,node:Np.node,size:Np.size,empty:Np.empty,each:Np.each,on:mp,attr:hp,attrTween:pp,style:Sp,styleTween:kp,text:Tp,remove:xp,tween:lp,delay:vp,duration:gp,ease:dp};var Pp=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),zp=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),Dp=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),Fp=Math.PI,Lp=Fp/2,Up=4/11,qp=6/11,Rp=8/11,Yp=.75,Ip=9/11,Op=10/11,jp=.9375,Hp=21/22,Bp=63/64,Xp=1/Up/Up,Gp=function t(n){function e(t){return t*t*((n+1)*t-n)}return n=+n,e.overshoot=t,e}(1.70158),Vp=function t(n){function e(t){return--t*t*((n+1)*t+n)+1}return n=+n,e.overshoot=t,e}(1.70158),$p=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(1.70158),Wp=2*Math.PI,Zp=function t(n,e){function r(t){return n*Math.pow(2,10*--t)*Math.sin((i-t)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=Wp);return r.amplitude=function(n){return t(n,e*Wp)},r.period=function(e){return t(n,e)},r}(1,.3),Qp=function t(n,e){function r(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=Wp);return r.amplitude=function(n){return t(n,e*Wp)},r.period=function(e){return t(n,e)},r}(1,.3),Jp=function t(n,e){function r(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((i-t)/e):2-n*Math.pow(2,-10*t)*Math.sin((i+t)/e))/2}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=Wp);return r.amplitude=function(n){return t(n,e*Wp)},r.period=function(e){return t(n,e)},r}(1,.3),Kp={time:null,delay:0,duration:250,ease:ve},tv=function(t){var n,e;t instanceof oe?(n=t._id,t=t._name):(n=ae(),(e=Kp).time=xn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],c=a.length,s=0;s<c;++s)(u=a[s])&&ap(u,t,n,s,a,e||Te(u,n));return new oe(r,this._parents,t,n)};xt.prototype.interrupt=sp,xt.prototype.transition=tv;var nv=[null],ev=function(t,n){var e,r,i=t.__transition;if(i){n=null==n?null:n+"";for(r in i)if((e=i[r]).state>np&&e.name===n)return new oe([[t]],nv,n,+r)}return null},rv=function(t){return function(){return t}},iv=function(t,n,e){this.target=t,this.type=n,this.selection=e},ov=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},uv={name:"drag"},av={name:"space"},cv={name:"handle"},sv={name:"center"},lv={name:"x",handles:["e","w"].map(Ce),input:function(t,n){return t&&[[t[0],n[0][1]],[t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},fv={name:"y",handles:["n","s"].map(Ce),input:function(t,n){return t&&[[n[0][0],t[0]],[n[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},hv={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Ce),input:function(t){return t},output:function(t){return t}},pv={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},vv={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},gv={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},dv={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yv={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},_v=function(){return qe(hv)},mv={},xv={},wv=34,Mv=10,bv=13,Ev=function(t){function n(t,n){var r,i,o=e(t,function(t,e){if(r)return r(t,e-1);i=t,r=n?Ye(t,n):Re(t)});return o.columns=i||[],o}function e(t,n){function e(){if(s)return xv;if(l)return l=!1,mv;var n,e,r=u;if(t.charCodeAt(r)===wv){for(;u++<o&&t.charCodeAt(u)!==wv||t.charCodeAt(++u)===wv;);return(n=u)>=o?s=!0:(e=t.charCodeAt(u++))===Mv?l=!0:e===bv&&(l=!0,t.charCodeAt(u)===Mv&&++u),t.slice(r+1,n-1).replace(/""/g,\'"\')}for(;u<o;){if((e=t.charCodeAt(n=u++))===Mv)l=!0;else if(e===bv)l=!0,t.charCodeAt(u)===Mv&&++u;else if(e!==c)continue;return t.slice(r,n)}return s=!0,t.slice(r,o)}var r,i=[],o=t.length,u=0,a=0,s=o<=0,l=!1;for(t.charCodeAt(o-1)===Mv&&--o,t.charCodeAt(o-1)===bv&&--o;(r=e())!==xv;){for(var f=[];r!==mv&&r!==xv;)f.push(r),r=e();n&&null==(f=n(f,a++))||i.push(f)}return i}function r(n,e){return null==e&&(e=Ie(n)),[e.map(u).join(t)].concat(n.map(function(n){return e.map(function(t){return u(n[t])}).join(t)})).join("\\n")}function i(t){return t.map(o).join("\\n")}function o(n){return n.map(u).join(t)}function u(t){return null==t?"":a.test(t+="")?\'"\'+t.replace(/"/g,\'""\')+\'"\':t}var a=new RegExp(\'["\'+t+"\\n\\r]"),c=t.charCodeAt(0);return{parse:n,parseRows:e,format:r,formatRows:i}},Sv=Ev(","),kv=Sv.parse,Tv=Sv.parseRows,Av=Ev("\\t"),Cv=Av.parse,Nv=function(t,n){function e(t){var n,e=l.status;if(!e&&je(l)||e>=200&&e<300||304===e){if(u)try{n=u.call(r,l)}catch(t){return void c.call("error",r,t)}else n=l;c.call("load",r,n)}else c.call("error",r,t)}var r,i,u,a,c=_("beforesend","progress","load","error"),s=o(),l=new XMLHttpRequest,f=null,h=null,p=0;if("undefined"==typeof XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\\/\\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=e:l.onreadystatechange=function(t){l.readyState>3&&e(t)},l.onprogress=function(t){c.call("progress",r,t)},r={header:function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?s.get(t):(null==n?s.remove(t):s.set(t,n+""),r)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",r):i},responseType:function(t){return arguments.length?(a=t,r):a},timeout:function(t){return arguments.length?(p=+t,r):p},user:function(t){return arguments.length<1?f:(f=null==t?null:t+"",r)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",r)},response:function(t){return u=t,r},get:function(t,n){return r.send("GET",t,n)},post:function(t,n){return r.send("POST",t,n)},send:function(n,e,o){return l.open(n,t,!0,f,h),null==i||s.has("accept")||s.set("accept",i+",*/*"),l.setRequestHeader&&s.each(function(t,n){l.setRequestHeader(n,t)}),null!=i&&l.overrideMimeType&&l.overrideMimeType(i),null!=a&&(l.responseType=a),p>0&&(l.timeout=p),null==o&&"function"==typeof e&&(o=e,e=null),null!=o&&1===o.length&&(o=Oe(o)),null!=o&&r.on("error",o).on("load",function(t){o(null,t)}),c.call("beforesend",r,l),l.send(null==e?null:e),r},abort:function(){return l.abort(),r},on:function(){var t=c.on.apply(c,arguments);return t===c?r:t}},null!=n){if("function"!=typeof n)throw new Error("invalid callback: "+n);return r.get(n)}return r},Pv=function(t,n){return function(e,r){var i=Nv(e).mimeType(t).response(n);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}};Pv("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)});var zv=Pv("application/json",function(t){return JSON.parse(t.responseText)});Pv("text/plain",function(t){return t.responseText}),Pv("application/xml",function(t){var n=t.responseXML;if(!n)throw new Error("parse error");return n});var Dv=function(t,n){return function(e,r,i){arguments.length<3&&(i=r,r=null);var o=Nv(e).mimeType(t);return o.row=function(t){return arguments.length?o.response(He(n,r=t)):r},o.row(r),i?o.get(i):o}};Dv("text/csv",kv),Dv("text/tab-separated-values",Cv);var Fv,Lv=function(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]},Uv=function(t){return t=Lv(Math.abs(t)),t?t[1]:NaN},qv=function(t,n){return function(e,r){for(var i=e.length,o=[],u=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(e.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[u=(u+1)%t.length];return o.reverse().join(n)}},Rv=function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}},Yv=function(t,n){t=t.toPrecision(n);t:for(var e,r=t.length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=e=i;break;case"0":0===o&&(o=i),e=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t},Iv=function(t,n){var e=Lv(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Fv=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Lv(t,Math.max(0,n+o-1))[0]},Ov=function(t,n){var e=Lv(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},jv={"":Yv,"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return Ov(100*t,n)},r:Ov,s:Iv,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Hv=/^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;Be.prototype=Xe.prototype,Xe.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Bv,Xv=function(t){return t},Gv=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],Vv=function(t){function n(t){function n(t){var n,i,a,l=d,x=y;if("c"===g)x=_(t)+x,t="";else{t=+t;var w=t<0;if(t=_(Math.abs(t),v),w&&0==+t&&(w=!1),l=(w?"("===s?s:"-":"-"===s||"("===s?"":s)+l,x=x+("s"===g?Gv[8+Fv/3]:"")+(w&&"("===s?")":""),m)for(n=-1,i=t.length;++n<i;)if(48>(a=t.charCodeAt(n))||a>57){x=(46===a?o+t.slice(n+1):t.slice(n))+x,t=t.slice(0,n);break}}p&&!f&&(t=r(t,1/0));var M=l.length+t.length+x.length,b=M<h?new Array(h-M+1).join(e):"";switch(p&&f&&(t=r(b+t,b.length?h-x.length:1/0),b=""),c){case"<":t=l+t+x+b;break;case"=":t=l+b+t+x;break;case"^":t=b.slice(0,M=b.length>>1)+l+t+x+b.slice(M);break;default:t=b+l+t+x}return u(t)}t=Be(t);var e=t.fill,c=t.align,s=t.sign,l=t.symbol,f=t.zero,h=t.width,p=t.comma,v=t.precision,g=t.type,d="$"===l?i[0]:"#"===l&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",y="$"===l?i[1]:/[%p]/.test(g)?a:"",_=jv[g],m=!g||/[defgprs%]/.test(g);return v=null==v?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),n.toString=function(){return t+""},n}function e(t,e){var r=n((t=Be(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Uv(e)/3))),o=Math.pow(10,-i),u=Gv[8+i/3];return function(t){return r(o*t)+u}}var r=t.grouping&&t.thousands?qv(t.grouping,t.thousands):Xv,i=t.currency,o=t.decimal,u=t.numerals?Rv(t.numerals):Xv,a=t.percent||"%";return{format:n,formatPrefix:e}};Ge({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var $v=function(t){return Math.max(0,-Uv(Math.abs(t)))},Wv=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Uv(n)/3)))-Uv(Math.abs(t)))},Zv=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Uv(n)-Uv(t))+1},Qv=function(){function t(t){var o,u=0;t.eachAfter(function(t){var e=t.children;e?(t.x=$e(e),t.y=Ze(e)):(t.x=o?u+=n(t,o):0,t.y=0,o=t)});var a=Je(t),c=Ke(t),s=a.x-n(a,c)/2,l=c.x+n(c,a)/2;return t.eachAfter(i?function(n){n.x=(n.x-t.x)*e,n.y=(t.y-n.y)*r}:function(n){n.x=(n.x-s)/(l-s)*e,n.y=(1-(t.y?n.y/t.y:1))*r})}var n=Ve,e=1,r=1,i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(n){return arguments.length?(i=!1,e=+n[0],r=+n[1],t):i?null:[e,r]},t.nodeSize=function(n){return arguments.length?(i=!0,e=+n[0],r=+n[1],t):i?[e,r]:null},t},Jv=function(){return this.eachAfter(tr)},Kv=function(t){var n,e,r,i,o=this,u=[o];do{for(n=u.reverse(),u=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;r<i;++r)u.push(e[r])}while(u.length);return this},tg=function(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;e>=0;--e)i.push(n[e]);return this},ng=function(t){for(var n,e,r,i=this,o=[i],u=[];i=o.pop();)if(u.push(i),n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e]);for(;i=u.pop();)t(i);return this},eg=function(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})},rg=function(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})},ig=function(t){for(var n=this,e=nr(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},og=function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},ug=function(){var t=[];return this.each(function(n){t.push(n)}),t},ag=function(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t},cg=function(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n};ar.prototype=er.prototype={constructor:ar,count:Jv,each:Kv,eachAfter:ng,eachBefore:tg,sum:eg,sort:rg,path:ig,ancestors:og,descendants:ug,leaves:ag,links:cg,copy:rr};var sg=Array.prototype.slice,lg=function(t){for(var n,e,r=0,i=(t=cr(sg.call(t))).length,o=[];r<i;)n=t[r],e&&fr(e,n)?++r:(e=pr(o=sr(o,n)),r=0);return e},fg=function(t){return wr(t),t},hg=function(t){return function(){return t}},pg=function(){function t(t){return t.x=e/2,t.y=r/2,n?t.eachBefore(kr(n)).eachAfter(Tr(i,.5)).eachBefore(Ar(1)):t.eachBefore(kr(Sr)).eachAfter(Tr(Er,1)).eachAfter(Tr(i,t.r/Math.min(e,r))).eachBefore(Ar(Math.min(e,r)/(2*t.r))),t}var n=null,e=1,r=1,i=Er;return t.radius=function(e){return arguments.length?(n=Mr(e),t):n},t.size=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.padding=function(n){return arguments.length?(i="function"==typeof n?n:hg(+n),t):i},t},vg=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},gg=function(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(r-n)/t.value;++a<c;)o=u[a],o.y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*s},dg=function(){function t(t){var u=t.height+1;return t.x0=t.y0=i,t.x1=e,t.y1=r/u,t.eachBefore(n(r,u)),o&&t.eachBefore(vg),t}function n(t,n){return function(e){e.children&&gg(e,e.x0,t*(e.depth+1)/n,e.x1,t*(e.depth+2)/n);var r=e.x0,o=e.y0,u=e.x1-i,a=e.y1-i;u<r&&(r=u=(r+u)/2),a<o&&(o=a=(o+a)/2),e.x0=r,e.y0=o,e.x1=u,e.y1=a}}var e=1,r=1,i=0,o=!1;return t.round=function(n){return arguments.length?(o=!!n,t):o},t.size=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.padding=function(n){return arguments.length?(i=+n,t):i},t},yg="$",_g={depth:-1},mg={},xg=function(){function t(t){var r,i,o,u,a,c,s,l=t.length,f=new Array(l),h={};for(i=0;i<l;++i)r=t[i],a=f[i]=new ar(r),null!=(c=n(r,i,t))&&(c+="")&&(s=yg+(a.id=c),h[s]=s in h?mg:a);for(i=0;i<l;++i)if(a=f[i],null!=(c=e(t[i],i,t))&&(c+="")){if(!(u=h[yg+c]))throw new Error("missing: "+c);if(u===mg)throw new Error("ambiguous: "+c);u.children?u.children.push(a):u.children=[a],a.parent=u}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=_g,o.eachBefore(function(t){t.depth=t.parent.depth+1,--l}).eachBefore(ur),o.parent=null,l>0)throw new Error("cycle");return o}var n=Cr,e=Nr;return t.id=function(e){return arguments.length?(n=br(e),t):n},t.parentId=function(n){return arguments.length?(e=br(n),t):e},t};qr.prototype=Object.create(ar.prototype);var wg=function(){function t(t){var r=Rr(t);if(r.eachAfter(n),r.parent.m=-r.z,r.eachBefore(e),c)t.eachBefore(i);else{var s=t,l=t,f=t;t.eachBefore(function(t){t.x<s.x&&(s=t),t.x>l.x&&(l=t),t.depth>f.depth&&(f=t)});var h=s===l?1:o(s,l)/2,p=h-s.x,v=u/(l.x+h+p),g=a/(f.depth||1);t.eachBefore(function(t){t.x=(t.x+p)*v,t.y=t.depth*g})}return t}function n(t){\nvar n=t.children,e=t.parent.children,i=t.i?e[t.i-1]:null;if(n){Lr(t);var u=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-u):t.z=u}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||e[0])}function e(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,n,e){if(n){for(var r,i=t,u=t,a=n,c=i.parent.children[0],s=i.m,l=u.m,f=a.m,h=c.m;a=Dr(a),i=zr(i),a&&i;)c=zr(c),u=Dr(u),u.a=t,r=a.z+f-i.z-s+o(a._,i._),r>0&&(Fr(Ur(a,t,e),t,r),s+=r,l+=r),f+=a.m,s+=i.m,h+=c.m,l+=u.m;a&&!Dr(u)&&(u.t=a,u.m+=f-l),i&&!zr(c)&&(c.t=i,c.m+=s-h,e=t)}return e}function i(t){t.x*=u,t.y=t.depth*a}var o=Pr,u=1,a=1,c=null;return t.separation=function(n){return arguments.length?(o=n,t):o},t.size=function(n){return arguments.length?(c=!1,u=+n[0],a=+n[1],t):c?null:[u,a]},t.nodeSize=function(n){return arguments.length?(c=!0,u=+n[0],a=+n[1],t):c?[u,a]:null},t},Mg=function(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(i-e)/t.value;++a<c;)o=u[a],o.x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*s},bg=(1+Math.sqrt(5))/2,Eg=function t(n){function e(t,e,r,i,o){Yr(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(bg),Sg=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(n),u=[0],r&&t.eachBefore(vg),t}function n(t){var n=u[t.depth],r=t.x0+n,i=t.y0+n,o=t.x1-n,h=t.y1-n;o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=h,t.children&&(n=u[t.depth+1]=a(t)/2,r+=f(t)-n,i+=c(t)-n,o-=s(t)-n,h-=l(t)-n,o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),e(t,r,i,o,h))}var e=Eg,r=!1,i=1,o=1,u=[0],a=Er,c=Er,s=Er,l=Er,f=Er;return t.round=function(n){return arguments.length?(r=!!n,t):r},t.size=function(n){return arguments.length?(i=+n[0],o=+n[1],t):[i,o]},t.tile=function(n){return arguments.length?(e=br(n),t):e},t.padding=function(n){return arguments.length?t.paddingInner(n).paddingOuter(n):t.paddingInner()},t.paddingInner=function(n){return arguments.length?(a="function"==typeof n?n:hg(+n),t):a},t.paddingOuter=function(n){return arguments.length?t.paddingTop(n).paddingRight(n).paddingBottom(n).paddingLeft(n):t.paddingTop()},t.paddingTop=function(n){return arguments.length?(c="function"==typeof n?n:hg(+n),t):c},t.paddingRight=function(n){return arguments.length?(s="function"==typeof n?n:hg(+n),t):s},t.paddingBottom=function(n){return arguments.length?(l="function"==typeof n?n:hg(+n),t):l},t.paddingLeft=function(n){return arguments.length?(f="function"==typeof n?n:hg(+n),t):f},t},kg=function(t,n,e,r,i){function o(t,n,e,r,i,u,a){if(t>=n-1){var s=c[t];return s.x0=r,s.y0=i,s.x1=u,s.y1=a,void 0}for(var f=l[t],h=e/2+f,p=t+1,v=n-1;p<v;){var g=p+v>>>1;l[g]<h?p=g+1:v=g}h-l[p-1]<l[p]-h&&t+1<p&&--p;var d=l[p]-f,y=e-d;if(u-r>a-i){var _=(r*y+u*d)/e;o(t,p,d,r,i,_,a),o(p,n,y,_,i,u,a)}else{var m=(i*y+a*d)/e;o(t,p,d,r,i,u,m),o(p,n,y,r,m,u,a)}}var u,a,c=t.children,s=c.length,l=new Array(s+1);for(l[0]=a=u=0;u<s;++u)l[u+1]=a+=c[u].value;o(0,s,t.value,n,e,r,i)},Tg=function(t,n,e,r,i){(1&t.depth?Mg:gg)(t,n,e,r,i)},Ag=function t(n){function e(t,e,r,i,o){if((u=t._squarify)&&u.ratio===n)for(var u,a,c,s,l,f=-1,h=u.length,p=t.value;++f<h;){for(a=u[f],c=a.children,s=a.value=0,l=c.length;s<l;++s)a.value+=c[s].value;a.dice?gg(a,e,r,i,r+=(o-r)*a.value/p):Mg(a,e,r,e+=(i-e)*a.value/p,o),p-=a.value}else t._squarify=u=Yr(n,t,e,r,i,o),u.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(bg),Cg=Math.PI,Ng=2*Cg,Pg=Ng-1e-6;Ir.prototype=Or.prototype={constructor:Ir,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,u=this._y1,a=e-t,c=r-n,s=o-t,l=u-n,f=s*s+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>1e-6)if(Math.abs(l*a-c*s)>1e-6&&i){var h=e-o,p=r-u,v=a*a+c*c,g=h*h+p*p,d=Math.sqrt(v),y=Math.sqrt(f),_=i*Math.tan((Cg-Math.acos((v+f-g)/(2*d*y)))/2),m=_/y,x=_/d;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*s)+","+(n+m*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>s*p)+","+(this._x1=t+x*a)+","+(this._y1=n+x*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,o){t=+t,n=+n,e=+e;var u=e*Math.cos(r),a=e*Math.sin(r),c=t+u,s=n+a,l=1^o,f=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+s:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+c+","+s),e&&(f<0&&(f=f%Ng+Ng),f>Pg?this._+="A"+e+","+e+",0,1,"+l+","+(t-u)+","+(n-a)+"A"+e+","+e+",0,1,"+l+","+(this._x1=c)+","+(this._y1=s):f>1e-6&&(this._+="A"+e+","+e+",0,"+ +(f>=Cg)+","+l+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};var zg=Array.prototype,Dg=zg.map,Fg=zg.slice,Lg={name:"implicit"},Ug=function(t){return function(){return t}},qg=function(t){return+t},Rg=[0,1],Yg=function(n,e,i){var o,u=n[0],a=n[n.length-1],c=r(u,a,null==e?10:e);switch(i=Be(null==i?",f":i),i.type){case"s":var s=Math.max(Math.abs(u),Math.abs(a));return null!=i.precision||isNaN(o=Wv(c,s))||(i.precision=o),t.formatPrefix(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=Zv(c,Math.max(Math.abs(u),Math.abs(a))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=$v(c))||(i.precision=o-2*("%"===i.type))}return t.format(i)},Ig=function(t,n){t=t.slice();var e,r=0,i=t.length-1,o=t[r],u=t[i];return u<o&&(e=r,r=i,i=e,e=o,o=u,u=e),t[r]=n.floor(o),t[i]=n.ceil(u),t},Og=new Date,jg=new Date,Hg=ei(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});Hg.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ei(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):Hg:null};var Bg=Hg.range,Xg=6e4,Gg=6048e5,Vg=ei(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),$g=Vg.range,Wg=ei(function(t){t.setTime(Math.floor(t/Xg)*Xg)},function(t,n){t.setTime(+t+n*Xg)},function(t,n){return(n-t)/Xg},function(t){return t.getMinutes()}),Zg=Wg.range,Qg=ei(function(t){var n=t.getTimezoneOffset()*Xg%36e5;n<0&&(n+=36e5),t.setTime(36e5*Math.floor((+t-n)/36e5)+n)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()}),Jg=Qg.range,Kg=ei(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Xg)/864e5},function(t){return t.getDate()-1}),td=Kg.range,nd=ri(0),ed=ri(1),rd=ri(2),id=ri(3),od=ri(4),ud=ri(5),ad=ri(6),cd=nd.range,sd=ed.range,ld=rd.range,fd=id.range,hd=od.range,pd=ud.range,vd=ad.range,gd=ei(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),dd=gd.range,yd=ei(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});yd.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ei(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)}):null};var _d=yd.range,md=ei(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*Xg)},function(t,n){return(n-t)/Xg},function(t){return t.getUTCMinutes()}),xd=md.range,wd=ei(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()}),Md=wd.range,bd=ei(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1}),Ed=bd.range,Sd=ii(0),kd=ii(1),Td=ii(2),Ad=ii(3),Cd=ii(4),Nd=ii(5),Pd=ii(6),zd=Sd.range,Dd=kd.range,Fd=Td.range,Ld=Ad.range,Ud=Cd.range,qd=Nd.range,Rd=Pd.range,Yd=ei(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Id=Yd.range,Od=ei(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Od.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ei(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)}):null};var jd,Hd=Od.range,Bd={"-":"",_:" ",0:"0"},Xd=/^\\s*\\d+/,Gd=/^%/,Vd=/[\\\\^$*+?|[\\]().{}]/g;go({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var $d=Date.prototype.toISOString?yo:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Wd=+new Date("2000-01-01T00:00:00.000Z")?_o:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),Zd=1e3,Qd=60*Zd,Jd=60*Qd,Kd=24*Jd,ty=7*Kd,ny=30*Kd,ey=365*Kd,ry=function(){return wo(yd,gd,nd,Kg,Qg,Wg,Vg,Hg,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},iy=function(){return wo(Od,Yd,Sd,bd,wd,md,Vg,Hg,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},oy=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})};oy("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),oy("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),oy("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),oy("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Yh(Jt(300,.5,0),Jt(-240,.5,1));var uy=(Yh(Jt(-100,.75,.35),Jt(80,1.5,.8)),Yh(Jt(260,.75,.35),Jt(80,1.5,.8)),Jt(),function(t){return("function"==typeof t?Mo:bo)(this,t)}),ay=function(t,n){return("function"==typeof t?Eo:So)(this,t,null==n?"":n)},cy=function(t){return("function"==typeof t?ko:To)(this,t)},sy=function(t){return("function"==typeof t?Ao:Co)(this,t)},ly=function(t,n){return("function"==typeof t?No:Po)(this,t,null==n?"":n)};xt.prototype.attrs=uy,xt.prototype.styles=ay,xt.prototype.properties=cy,ue.prototype.attrs=sy,ue.prototype.styles=ly;var fy=function(t){return function(){return t}},hy=Math.abs,py=Math.atan2,vy=Math.cos,gy=Math.max,dy=Math.min,yy=Math.sin,_y=Math.sqrt,my=1e-12,xy=Math.PI,wy=xy/2,My=2*xy,by=function(){function t(){var t,s,l=+n.apply(this,arguments),f=+e.apply(this,arguments),h=o.apply(this,arguments)-wy,p=u.apply(this,arguments)-wy,v=hy(p-h),g=p>h;if(c||(c=t=Or()),f<l&&(s=f,f=l,l=s),f>my)if(v>My-my)c.moveTo(f*vy(h),f*yy(h)),c.arc(0,0,f,h,p,!g),l>my&&(c.moveTo(l*vy(p),l*yy(p)),c.arc(0,0,l,p,h,g));else{var d,y,_=h,m=p,x=h,w=p,M=v,b=v,E=a.apply(this,arguments)/2,S=E>my&&(i?+i.apply(this,arguments):_y(l*l+f*f)),k=dy(hy(f-l)/2,+r.apply(this,arguments)),T=k,A=k;if(S>my){var C=Do(S/l*yy(E)),N=Do(S/f*yy(E));(M-=2*C)>my?(C*=g?1:-1,x+=C,w-=C):(M=0,x=w=(h+p)/2),(b-=2*N)>my?(N*=g?1:-1,_+=N,m-=N):(b=0,_=m=(h+p)/2)}var P=f*vy(_),z=f*yy(_),D=l*vy(w),F=l*yy(w);if(k>my){var L=f*vy(m),U=f*yy(m),q=l*vy(x),R=l*yy(x);if(v<xy){var Y=M>my?Yo(P,z,q,R,L,U,D,F):[D,F],I=P-Y[0],O=z-Y[1],j=L-Y[0],H=U-Y[1],B=1/yy(zo((I*j+O*H)/(_y(I*I+O*O)*_y(j*j+H*H)))/2),X=_y(Y[0]*Y[0]+Y[1]*Y[1]);T=dy(k,(l-X)/(B-1)),A=dy(k,(f-X)/(B+1))}}b>my?A>my?(d=Io(q,R,P,z,f,A,g),y=Io(L,U,D,F,f,A,g),c.moveTo(d.cx+d.x01,d.cy+d.y01),A<k?c.arc(d.cx,d.cy,A,py(d.y01,d.x01),py(y.y01,y.x01),!g):(c.arc(d.cx,d.cy,A,py(d.y01,d.x01),py(d.y11,d.x11),!g),c.arc(0,0,f,py(d.cy+d.y11,d.cx+d.x11),py(y.cy+y.y11,y.cx+y.x11),!g),c.arc(y.cx,y.cy,A,py(y.y11,y.x11),py(y.y01,y.x01),!g))):(c.moveTo(P,z),c.arc(0,0,f,_,m,!g)):c.moveTo(P,z),l>my&&M>my?T>my?(d=Io(D,F,L,U,l,-T,g),y=Io(P,z,q,R,l,-T,g),c.lineTo(d.cx+d.x01,d.cy+d.y01),T<k?c.arc(d.cx,d.cy,T,py(d.y01,d.x01),py(y.y01,y.x01),!g):(c.arc(d.cx,d.cy,T,py(d.y01,d.x01),py(d.y11,d.x11),!g),c.arc(0,0,l,py(d.cy+d.y11,d.cx+d.x11),py(y.cy+y.y11,y.cx+y.x11),g),c.arc(y.cx,y.cy,T,py(y.y11,y.x11),py(y.y01,y.x01),!g))):c.arc(0,0,l,w,x,g):c.lineTo(D,F)}else c.moveTo(0,0);if(c.closePath(),t)return c=null,t+""||null}var n=Fo,e=Lo,r=fy(0),i=null,o=Uo,u=qo,a=Ro,c=null;return t.centroid=function(){var t=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-xy/2;return[vy(r)*t,yy(r)*t]},t.innerRadius=function(e){return arguments.length?(n="function"==typeof e?e:fy(+e),t):n},t.outerRadius=function(n){return arguments.length?(e="function"==typeof n?n:fy(+n),t):e},t.cornerRadius=function(n){return arguments.length?(r="function"==typeof n?n:fy(+n),t):r},t.padRadius=function(n){return arguments.length?(i=null==n?null:"function"==typeof n?n:fy(+n),t):i},t.startAngle=function(n){return arguments.length?(o="function"==typeof n?n:fy(+n),t):o},t.endAngle=function(n){return arguments.length?(u="function"==typeof n?n:fy(+n),t):u},t.padAngle=function(n){return arguments.length?(a="function"==typeof n?n:fy(+n),t):a},t.context=function(n){return arguments.length?(c=null==n?null:n,t):c},t};Oo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var Ey=function(t){return new Oo(t)},Sy=function(){function t(t){var a,c,s,l=t.length,f=!1;for(null==i&&(u=o(s=Or())),a=0;a<=l;++a)!(a<l&&r(c=t[a],a,t))===f&&((f=!f)?u.lineStart():u.lineEnd()),f&&u.point(+n(c,a,t),+e(c,a,t));if(s)return u=null,s+""||null}var n=jo,e=Ho,r=fy(!0),i=null,o=Ey,u=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:fy(+e),t):n},t.y=function(n){return arguments.length?(e="function"==typeof n?n:fy(+n),t):e},t.defined=function(n){return arguments.length?(r="function"==typeof n?n:fy(!!n),t):r},t.curve=function(n){return arguments.length?(o=n,null!=i&&(u=o(i)),t):o},t.context=function(n){return arguments.length?(null==n?i=u=null:u=o(i=n),t):i},t},ky=function(){function t(t){var n,l,f,h,p,v=t.length,g=!1,d=new Array(v),y=new Array(v);for(null==a&&(s=c(p=Or())),n=0;n<=v;++n){if(!(n<v&&u(h=t[n],n,t))===g)if(g=!g)l=n,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=n-1;f>=l;--f)s.point(d[f],y[f]);s.lineEnd(),s.areaEnd()}g&&(d[n]=+e(h,n,t),y[n]=+i(h,n,t),s.point(r?+r(h,n,t):d[n],o?+o(h,n,t):y[n]))}if(p)return s=null,p+""||null}function n(){return Sy().defined(u).curve(c).context(a)}var e=jo,r=null,i=fy(0),o=Ho,u=fy(!0),a=null,c=Ey,s=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:fy(+n),r=null,t):e},t.x0=function(n){return arguments.length?(e="function"==typeof n?n:fy(+n),t):e},t.x1=function(n){return arguments.length?(r=null==n?null:"function"==typeof n?n:fy(+n),t):r},t.y=function(n){return arguments.length?(i="function"==typeof n?n:fy(+n),o=null,t):i},t.y0=function(n){return arguments.length?(i="function"==typeof n?n:fy(+n),t):i},t.y1=function(n){return arguments.length?(o=null==n?null:"function"==typeof n?n:fy(+n),t):o},t.lineX0=t.lineY0=function(){return n().x(e).y(i)},t.lineY1=function(){return n().x(e).y(o)},t.lineX1=function(){return n().x(r).y(i)},t.defined=function(n){return arguments.length?(u="function"==typeof n?n:fy(!!n),t):u},t.curve=function(n){return arguments.length?(c=n,null!=a&&(s=c(a)),t):c},t.context=function(n){return arguments.length?(null==n?a=s=null:s=c(a=n),t):a},t},Ty=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},Ay=function(t){return t},Cy=function(){function t(t){var a,c,s,l,f,h=t.length,p=0,v=new Array(h),g=new Array(h),d=+i.apply(this,arguments),y=Math.min(My,Math.max(-My,o.apply(this,arguments)-d)),_=Math.min(Math.abs(y)/h,u.apply(this,arguments)),m=_*(y<0?-1:1);for(a=0;a<h;++a)(f=g[v[a]=a]=+n(t[a],a,t))>0&&(p+=f);for(null!=e?v.sort(function(t,n){return e(g[t],g[n])}):null!=r&&v.sort(function(n,e){return r(t[n],t[e])}),a=0,s=p?(y-h*m)/p:0;a<h;++a,d=l)c=v[a],f=g[c],l=d+(f>0?f*s:0)+m,g[c]={data:t[c],index:a,value:f,startAngle:d,endAngle:l,padAngle:_};return g}var n=Ay,e=Ty,r=null,i=fy(0),o=fy(My),u=fy(0);return t.value=function(e){return arguments.length?(n="function"==typeof e?e:fy(+e),t):n},t.sortValues=function(n){return arguments.length?(e=n,r=null,t):e},t.sort=function(n){return arguments.length?(r=n,e=null,t):r},t.startAngle=function(n){return arguments.length?(i="function"==typeof n?n:fy(+n),t):i},t.endAngle=function(n){return arguments.length?(o="function"==typeof n?n:fy(+n),t):o},t.padAngle=function(n){return arguments.length?(u="function"==typeof n?n:fy(+n),t):u},t},Ny=Xo(Ey);Bo.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var Py=function(){return Go(Sy().curve(Ny))},zy=function(){var t=ky().curve(Ny),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Go(e())},delete t.lineX0,t.lineEndAngle=function(){return Go(r())},delete t.lineX1,t.lineInnerRadius=function(){return Go(i())},delete t.lineY0,t.lineOuterRadius=function(){return Go(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(Xo(t)):n()._curve},t},Dy=function(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]},Fy=Array.prototype.slice,Ly=function(){};$o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vo(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Wo.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],u=t[e]-i,a=n[e]-o,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*u),this._beta*n[c]+(1-this._beta)*(o+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}},function t(n){function e(t){return 1===n?new $o(t):new Wo(t,n)}return e.beta=function(n){return t(+n)},e}(.85),Qo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Zo(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Zo(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Uy=function t(n){function e(t){return new Qo(t,n)}return e.tension=function(n){return t(+n)},e}(0);Jo.prototype={areaStart:Ly,areaEnd:Ly,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Zo(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var qy=function t(n){function e(t){return new Jo(t,n)}return e.tension=function(n){return t(+n)},e}(0);Ko.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Zo(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return new Ko(t,n)}return e.tension=function(n){return t(+n)},e}(0),nu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:tu(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return n?new nu(t,n):new Qo(t,0)}return e.alpha=function(n){return t(+n)},e}(.5),eu.prototype={areaStart:Ly,areaEnd:Ly,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:tu(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return n?new eu(t,n):new Jo(t,0)}return e.alpha=function(n){return t(+n)},e}(.5),ru.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tu(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return n?new ru(t,n):new Ko(t,0)}return e.alpha=function(n){return t(+n)},e}(.5),iu.prototype={areaStart:Ly,areaEnd:Ly,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};var Ry=function(t){return new iu(t)};su.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cu(this,this._t0,au(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,t!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,cu(this,au(this,e=uu(this,t,n)),e);break;default:cu(this,this._t0,e=uu(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(lu.prototype=Object.create(su.prototype)).point=function(t,n){su.prototype.point.call(this,n,t)},fu.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},vu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}};var Yy=function(t,n){if((i=t.length)>1)for(var e,r,i,o=1,u=t[n[0]],a=u.length;o<i;++o)for(r=u,u=t[n[o]],e=0;e<a;++e)u[e][1]+=u[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]},Iy=function(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e},Oy=function(){function t(t){var o,u,a=n.apply(this,arguments),c=t.length,s=a.length,l=new Array(s);for(o=0;o<s;++o){for(var f,h=a[o],p=l[o]=new Array(c),v=0;v<c;++v)p[v]=f=[0,+i(t[v],h,v,t)],f.data=t[v];p.key=h}for(o=0,u=e(l);o<s;++o)l[u[o]].index=o;return r(l,u),l}var n=fy([]),e=Iy,r=Yy,i=yu;return t.keys=function(e){return arguments.length?(n="function"==typeof e?e:fy(Fy.call(e)),t):n},t.value=function(n){return arguments.length?(i="function"==typeof n?n:fy(+n),t):i},t.order=function(n){return arguments.length?(e=null==n?Iy:"function"==typeof n?n:fy(Fy.call(n)),t):e},t.offset=function(n){return arguments.length?(r=null==n?Yy:n,t):r},t},jy=function(t){return function(){return t}};mu.prototype={constructor:mu,scale:function(t){return 1===t?this:new mu(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new mu(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hy=new mu(1,0,0);xu.prototype=mu.prototype;var By=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},Xy=function(){function n(t){t.property("__zoom",Eu).on("wheel.zoom",c).on("mousedown.zoom",s).on("dblclick.zoom",l).filter(w).on("touchstart.zoom",f).on("touchmove.zoom",h).on("touchend.zoom touchcancel.zoom",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(t,n){return n=Math.max(M[0],Math.min(M[1],n)),n===t.k?t:new mu(n,t.x,t.y)}function r(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new mu(t.k,r,i)}function i(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function o(t,n,e){t.on("start.zoom",function(){u(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){u(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,o=u(t,r),a=y.apply(t,r),c=e||i(a),s=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),l=t.__zoom,f="function"==typeof n?n.apply(t,r):n,h=S(l.invert(c).concat(s/l.k),f.invert(c).concat(s/f.k));return function(t){if(1===t)t=f;else{var n=h(t),e=s/n[2];t=new mu(e,c[0]-n[0]*e,c[1]-n[1]*e)}o.zoom(null,t)}})}function u(t,n){for(var e,r=0,i=k.length;r<i;++r)if((e=k[r]).that===t)return e;return new a(t,n)}function a(t,n){this.that=t,this.args=n,this.index=-1,this.active=0,this.extent=y.apply(t,n)}function c(){function t(){n.wheel=null,n.end()}if(d.apply(this,arguments)){var n=u(this,arguments),i=this.__zoom,o=Math.max(M[0],Math.min(M[1],i.k*Math.pow(2,x.apply(this,arguments)))),a=Yl(this);if(n.wheel)n.mouse[0][0]===a[0]&&n.mouse[0][1]===a[1]||(n.mouse[1]=i.invert(n.mouse[0]=a)),clearTimeout(n.wheel);else{if(i.k===o)return;n.mouse=[a,i.invert(a)],cp(this),n.start()}By(),n.wheel=setTimeout(t,C),n.zoom("mouse",m(r(e(i,o),n.mouse[0],n.mouse[1]),n.extent,b))}}function s(){function n(){if(By(),!i.moved){var n=t.event.clientX-c,e=t.event.clientY-s;i.moved=n*n+e*e>N}i.zoom("mouse",m(r(i.that.__zoom,i.mouse[0]=Yl(i.that),i.mouse[1]),i.extent,b))}function e(){o.on("mousemove.zoom mouseup.zoom",null),Mt(t.event.view,i.moved),By(),i.end()}if(!g&&d.apply(this,arguments)){var i=u(this,arguments),o=Mf(t.event.view).on("mousemove.zoom",n,!0).on("mouseup.zoom",e,!0),a=Yl(this),c=t.event.clientX,s=t.event.clientY;Tf(t.event.view),wu(),i.mouse=[a,this.__zoom.invert(a)],cp(this),i.start()}}function l(){if(d.apply(this,arguments)){\nvar i=this.__zoom,u=Yl(this),a=i.invert(u),c=i.k*(t.event.shiftKey?.5:2),s=m(r(e(i,c),u,a),y.apply(this,arguments),b);By(),E>0?Mf(this).transition().duration(E).call(o,s,u):Mf(this).call(n.transform,s)}}function f(){if(d.apply(this,arguments)){var n,e,r,i,o=u(this,arguments),a=t.event.changedTouches,c=a.length;for(wu(),e=0;e<c;++e)r=a[e],i=Ef(this,a,r.identifier),i=[i,this.__zoom.invert(i),r.identifier],o.touch0?o.touch1||(o.touch1=i):(o.touch0=i,n=!0);if(v&&(v=clearTimeout(v),!o.touch1))return o.end(),void((i=Mf(this).on("dblclick.zoom"))&&i.apply(this,arguments));n&&(v=setTimeout(function(){v=null},A),cp(this),o.start())}}function h(){var n,i,o,a,c=u(this,arguments),s=t.event.changedTouches,l=s.length;for(By(),v&&(v=clearTimeout(v)),n=0;n<l;++n)i=s[n],o=Ef(this,s,i.identifier),c.touch0&&c.touch0[2]===i.identifier?c.touch0[0]=o:c.touch1&&c.touch1[2]===i.identifier&&(c.touch1[0]=o);if(i=c.that.__zoom,c.touch1){var f=c.touch0[0],h=c.touch0[1],p=c.touch1[0],g=c.touch1[1],d=(d=p[0]-f[0])*d+(d=p[1]-f[1])*d,y=(y=g[0]-h[0])*y+(y=g[1]-h[1])*y;i=e(i,Math.sqrt(d/y)),o=[(f[0]+p[0])/2,(f[1]+p[1])/2],a=[(h[0]+g[0])/2,(h[1]+g[1])/2]}else{if(!c.touch0)return;o=c.touch0[0],a=c.touch0[1]}c.zoom("touch",m(r(i,o,a),c.extent,b))}function p(){var n,e,r=u(this,arguments),i=t.event.changedTouches,o=i.length;for(wu(),g&&clearTimeout(g),g=setTimeout(function(){g=null},A),n=0;n<o;++n)e=i[n],r.touch0&&r.touch0[2]===e.identifier?delete r.touch0:r.touch1&&r.touch1[2]===e.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):r.end()}var v,g,d=Mu,y=bu,m=Tu,x=Su,w=ku,M=[0,1/0],b=[[-1/0,-1/0],[1/0,1/0]],E=250,S=Dh,k=[],T=_("start","zoom","end"),A=500,C=150,N=0;return n.transform=function(t,n){var e=t.selection?t.selection():t;e.property("__zoom",Eu),t!==e?o(t,n):e.interrupt().each(function(){u(this,arguments).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()})},n.scaleBy=function(t,e){n.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},n.scaleTo=function(t,o){n.transform(t,function(){var t=y.apply(this,arguments),n=this.__zoom,u=i(t),a=n.invert(u),c="function"==typeof o?o.apply(this,arguments):o;return m(r(e(n,c),u,a),t,b)})},n.translateBy=function(t,e,r){n.transform(t,function(){return m(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof r?r.apply(this,arguments):r),y.apply(this,arguments),b)})},n.translateTo=function(t,e,r){n.transform(t,function(){var t=y.apply(this,arguments),n=this.__zoom,o=i(t);return m(Hy.translate(o[0],o[1]).scale(n.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof r?-r.apply(this,arguments):-r),t,b)})},a.prototype={start:function(){return 1==++this.active&&(this.index=k.push(this)-1,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(k.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){z(new _u(n,t,this.that.__zoom),T.apply,T,[t,this.that,this.args])}},n.wheelDelta=function(t){return arguments.length?(x="function"==typeof t?t:jy(+t),n):x},n.filter=function(t){return arguments.length?(d="function"==typeof t?t:jy(!!t),n):d},n.touchable=function(t){return arguments.length?(w="function"==typeof t?t:jy(!!t),n):w},n.extent=function(t){return arguments.length?(y="function"==typeof t?t:jy([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):y},n.scaleExtent=function(t){return arguments.length?(M[0]=+t[0],M[1]=+t[1],n):[M[0],M[1]]},n.translateExtent=function(t){return arguments.length?(b[0][0]=+t[0][0],b[1][0]=+t[1][0],b[0][1]=+t[0][1],b[1][1]=+t[1][1],n):[[b[0][0],b[0][1]],[b[1][0],b[1][1]]]},n.constrain=function(t){return arguments.length?(m=t,n):m},n.duration=function(t){return arguments.length?(E=+t,n):E},n.interpolate=function(t){return arguments.length?(S=t,n):S},n.on=function(){var t=T.on.apply(T,arguments);return t===T?n:t},n.clickDistance=function(t){return arguments.length?(N=(t=+t)*t,n):Math.sqrt(N)},n},Gy=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},Vy=function(t){for(var n,e,r=-1,i=t.length,o=0,u=0,a=t[i-1],c=0;++r<i;)n=a,a=t[r],c+=e=n[0]*a[1]-a[0]*n[1],o+=(n[0]+a[0])*e,u+=(n[1]+a[1])*e;return c*=3,[o/c,u/c]},$y=function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])},Wy=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(Au),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=Cu(r),u=Cu(i),a=u[0]===o[0],c=u[u.length-1]===o[o.length-1],s=[];for(n=o.length-1;n>=0;--n)s.push(t[r[o[n]][2]]);for(n=+a;n<u.length-c;++n)s.push(t[r[u[n]][2]]);return s},Zy=function(t,n){for(var e,r,i=t.length,o=t[i-1],u=n[0],a=n[1],c=o[0],s=o[1],l=!1,f=0;f<i;++f)o=t[f],e=o[0],r=o[1],r>a!=s>a&&u<(c-e)*(a-r)/(s-r)+e&&(l=!l),c=e,s=r;return l},Qy=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],u=o[0],a=o[1],c=0;++r<i;)n=u,e=a,o=t[r],u=o[0],a=o[1],n-=u,e-=a,c+=Math.sqrt(n*n+e*e);return c},Jy=function(){return new Nu};Nu.prototype={constructor:Nu,reset:function(){this.s=this.t=0},add:function(t){Pu(N_,t,this.t),Pu(this,N_.s,this.s),this.s?this.t+=N_.t:this.s=N_.t},valueOf:function(){return this.s}};var Ky,t_,n_,e_,r_,i_,o_,u_,a_,c_,s_,l_,f_,h_,p_,v_,g_,d_,y_,__,m_,x_,w_,M_,b_,E_,S_,k_,T_,A_,C_,N_=new Nu,P_=1e-6,z_=Math.PI,D_=z_/2,F_=z_/4,L_=2*z_,U_=180/z_,q_=z_/180,R_=Math.abs,Y_=Math.atan,I_=Math.atan2,O_=Math.cos,j_=Math.ceil,H_=Math.exp,B_=Math.log,X_=Math.pow,G_=Math.sin,V_=Math.sign||function(t){return t>0?1:t<0?-1:0},$_=Math.sqrt,W_=Math.tan,Z_={Feature:function(t,n){Uu(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Uu(e[r].geometry,n)}},Q_={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){qu(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)qu(e[r],n,0)},Polygon:function(t,n){Ru(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Ru(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Uu(e[r],n)}},J_=function(t,n){t&&Z_.hasOwnProperty(t.type)?Z_[t.type](t,n):Uu(t,n)},K_=Jy(),tm=Jy(),nm={point:Lu,lineStart:Lu,lineEnd:Lu,polygonStart:function(){K_.reset(),nm.lineStart=Yu,nm.lineEnd=Iu},polygonEnd:function(){var t=+K_;tm.add(t<0?L_+t:t),this.lineStart=this.lineEnd=this.point=Lu},sphere:function(){tm.add(L_)}},em=function(t){return tm.reset(),J_(t,nm),2*tm},rm=Jy(),im={point:Zu,lineStart:Ju,lineEnd:Ku,polygonStart:function(){im.point=ta,im.lineStart=na,im.lineEnd=ea,rm.reset(),nm.polygonStart()},polygonEnd:function(){nm.polygonEnd(),im.point=Zu,im.lineStart=Ju,im.lineEnd=Ku,K_<0?(i_=-(u_=180),o_=-(a_=90)):rm>P_?a_=90:rm<-P_&&(o_=-90),p_[0]=i_,p_[1]=u_}},om=function(t){var n,e,r,i,o,u,a;if(a_=u_=-(i_=o_=1/0),h_=[],J_(t,im),e=h_.length){for(h_.sort(ia),n=1,r=h_[0],o=[r];n<e;++n)i=h_[n],oa(r,i[0])||oa(r,i[1])?(ra(r[0],i[1])>ra(r[0],r[1])&&(r[1]=i[1]),ra(i[0],r[1])>ra(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(u=-1/0,e=o.length-1,n=0,r=o[e];n<=e;r=i,++n)i=o[n],(a=ra(r[1],i[0]))>u&&(u=a,i_=i[0],u_=r[1])}return h_=p_=null,i_===1/0||o_===1/0?[[NaN,NaN],[NaN,NaN]]:[[i_,o_],[u_,a_]]},um={sphere:Lu,point:ua,lineStart:ca,lineEnd:fa,polygonStart:function(){um.lineStart=ha,um.lineEnd=pa},polygonEnd:function(){um.lineStart=ca,um.lineEnd=fa}},am=function(t){v_=g_=d_=y_=__=m_=x_=w_=M_=b_=E_=0,J_(t,um);var n=M_,e=b_,r=E_,i=n*n+e*e+r*r;return i<1e-12&&(n=m_,e=x_,r=w_,g_<P_&&(n=d_,e=y_,r=__),(i=n*n+e*e+r*r)<1e-12)?[NaN,NaN]:[I_(e,n)*U_,Du(r/$_(i))*U_]},cm=function(t){return function(){return t}},sm=function(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e};da.invert=da;var lm,fm,hm,pm,vm,gm,dm,ym,_m,mm,xm,wm=function(t){function n(n){return n=t(n[0]*q_,n[1]*q_),n[0]*=U_,n[1]*=U_,n}return t=ya(t[0]*q_,t[1]*q_,t.length>2?t[2]*q_:0),n.invert=function(n){return n=t.invert(n[0]*q_,n[1]*q_),n[0]*=U_,n[1]*=U_,n},n},Mm=function(){function t(t,n){e.push(t=r(t,n)),t[0]*=U_,t[1]*=U_}function n(){var t=i.apply(this,arguments),n=o.apply(this,arguments)*q_,c=u.apply(this,arguments)*q_;return e=[],r=ya(-t[0]*q_,-t[1]*q_,0).invert,wa(a,n,c,1),t={type:"Polygon",coordinates:[e]},e=r=null,t}var e,r,i=cm([0,0]),o=cm(90),u=cm(6),a={point:t};return n.center=function(t){return arguments.length?(i="function"==typeof t?t:cm([+t[0],+t[1]]),n):i},n.radius=function(t){return arguments.length?(o="function"==typeof t?t:cm(+t),n):o},n.precision=function(t){return arguments.length?(u="function"==typeof t?t:cm(+t),n):u},n},bm=function(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:Lu,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}},Em=function(t,n){return R_(t[0]-n[0])<P_&&R_(t[1]-n[1])<P_},Sm=function(t,n,e,r,i){var o,u,a=[],c=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],u=t[n];if(Em(r,u)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a.push(e=new ba(r,t,null,!0)),c.push(e.o=new ba(r,null,e,!1)),a.push(e=new ba(u,t,null,!1)),c.push(e.o=new ba(u,null,e,!0))}}),a.length){for(c.sort(n),Ea(a),Ea(c),o=0,u=c.length;o<u;++o)c[o].e=e=!e;for(var s,l,f=a[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,u=s.length;o<u;++o)i.point((l=s[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(s=h.p.z,o=s.length-1;o>=0;--o)i.point((l=s[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,s=h.z,p=!p}while(!h.v);i.lineEnd()}}},km=Jy(),Tm=function(t,n){var e=n[0],r=n[1],i=G_(r),o=[G_(e),-O_(e),0],u=0,a=0;km.reset(),1===i?r=D_+P_:-1===i&&(r=-D_-P_);for(var c=0,s=t.length;c<s;++c)if(f=(l=t[c]).length)for(var l,f,h=l[f-1],p=h[0],v=h[1]/2+F_,g=G_(v),d=O_(v),y=0;y<f;++y,p=m,g=w,d=M,h=_){var _=l[y],m=_[0],x=_[1]/2+F_,w=G_(x),M=O_(x),b=m-p,E=b>=0?1:-1,S=E*b,k=S>z_,T=g*w;if(km.add(I_(T*E*G_(S),d*M+T*O_(S))),u+=k?b+E*L_:b,k^p>=e^m>=e){var A=Gu(Bu(h),Bu(_));Wu(A);var C=Gu(o,A);Wu(C);var N=(k^b>=0?-1:1)*Du(C[2]);(r>N||r===N&&(A[0]||A[1]))&&(a+=k^b>=0?1:-1)}}return(u<-P_||u<P_&&km<-P_)^1&a},Am=function(t,n,e,r){return function(i){function o(n,e){t(n,e)&&i.point(n,e)}function u(t,n){g.point(t,n)}function a(){m.point=u,g.lineStart()}function c(){m.point=o,g.lineEnd()}function s(t,n){v.push([t,n]),y.point(t,n)}function l(){y.lineStart(),v=[]}function f(){s(v[0][0],v[0][1]),y.lineEnd();var t,n,e,r,o=y.clean(),u=d.result(),a=u.length;if(v.pop(),h.push(v),v=null,a)if(1&o){if(e=u[0],(n=e.length-1)>0){for(_||(i.polygonStart(),_=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else a>1&&2&o&&u.push(u.pop().concat(u.shift())),p.push(u.filter(Sa))}var h,p,v,g=n(i),d=bm(),y=n(d),_=!1,m={point:o,lineStart:a,lineEnd:c,polygonStart:function(){m.point=s,m.lineStart=l,m.lineEnd=f,p=[],h=[]},polygonEnd:function(){m.point=o,m.lineStart=a,m.lineEnd=c,p=fl(p);var t=Tm(h,r);p.length?(_||(i.polygonStart(),_=!0),Sm(p,ka,t,e,i)):t&&(_||(i.polygonStart(),_=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),_&&(i.polygonEnd(),_=!1),p=h=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};return m}},Cm=Am(function(){return!0},Ta,Ca,[-z_,-D_]),Nm=function(t){function n(n,e,r,i){wa(i,t,a,r,n,e)}function e(t,n){return O_(t)*O_(n)>u}function r(t){var n,r,u,a,l;return{lineStart:function(){a=u=!1,l=1},point:function(f,h){var p,v=[f,h],g=e(f,h),d=c?g?0:o(f,h):g?o(f+(f<0?z_:-z_),h):0;if(!n&&(a=u=g)&&t.lineStart(),g!==u&&(!(p=i(n,v))||Em(n,p)||Em(v,p))&&(v[0]+=P_,v[1]+=P_,g=e(v[0],v[1])),g!==u)l=0,g?(t.lineStart(),p=i(v,n),t.point(p[0],p[1])):(p=i(n,v),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(s&&n&&c^g){var y;d&r||!(y=i(v,n,!0))||(l=0,c?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||n&&Em(n,v)||t.point(v[0],v[1]),n=v,u=g,r=d},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return l|(a&&u)<<1}}}function i(t,n,e){var r=Bu(t),i=Bu(n),o=[1,0,0],a=Gu(r,i),c=Xu(a,a),s=a[0],l=c-s*s;if(!l)return!e&&t;var f=u*c/l,h=-u*s/l,p=Gu(o,a),v=$u(o,f);Vu(v,$u(a,h));var g=p,d=Xu(v,g),y=Xu(g,g),_=d*d-y*(Xu(v,v)-1);if(!(_<0)){var m=$_(_),x=$u(g,(-d-m)/y);if(Vu(x,v),x=Hu(x),!e)return x;var w,M=t[0],b=n[0],E=t[1],S=n[1];b<M&&(w=M,M=b,b=w);var k=b-M,T=R_(k-z_)<P_,A=T||k<P_;if(!T&&S<E&&(w=E,E=S,S=w),A?T?E+S>0^x[1]<(R_(x[0]-M)<P_?E:S):E<=x[1]&&x[1]<=S:k>z_^(M<=x[0]&&x[0]<=b)){var C=$u(g,(-d+m)/y);return Vu(C,v),[x,Hu(C)]}}}function o(n,e){var r=c?t:z_-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var u=O_(t),a=6*q_,c=u>0,s=R_(u)>P_;return Am(e,r,n,c?[0,-t]:[-z_,t-z_])},Pm=function(t,n,e,r,i,o){var u,a=t[0],c=t[1],s=n[0],l=n[1],f=0,h=1,p=s-a,v=l-c;if(u=e-a,p||!(u>0)){if(u/=p,p<0){if(u<f)return;u<h&&(h=u)}else if(p>0){if(u>h)return;u>f&&(f=u)}if(u=i-a,p||!(u<0)){if(u/=p,p<0){if(u>h)return;u>f&&(f=u)}else if(p>0){if(u<f)return;u<h&&(h=u)}if(u=r-c,v||!(u>0)){if(u/=v,v<0){if(u<f)return;u<h&&(h=u)}else if(v>0){if(u>h)return;u>f&&(f=u)}if(u=o-c,v||!(u<0)){if(u/=v,v<0){if(u>h)return;u>f&&(f=u)}else if(v>0){if(u<f)return;u<h&&(h=u)}return f>0&&(t[0]=a+f*p,t[1]=c+f*v),h<1&&(n[0]=a+h*p,n[1]=c+h*v),!0}}}}},zm=1e9,Dm=-zm,Fm=function(){var t,n,e,r=0,i=0,o=960,u=500;return e={stream:function(e){return t&&n===e?t:t=Na(r,i,o,u)(n=e)},extent:function(a){return arguments.length?(r=+a[0][0],i=+a[0][1],o=+a[1][0],u=+a[1][1],t=n=null,e):[[r,i],[o,u]]}}},Lm=Jy(),Um={sphere:Lu,point:Lu,lineStart:Pa,lineEnd:Lu,polygonStart:Lu,polygonEnd:Lu},qm=function(t){return Lm.reset(),J_(t,Um),+Lm},Rm=[null,null],Ym={type:"LineString",coordinates:Rm},Im=function(t,n){return Rm[0]=t,Rm[1]=n,qm(Ym)},Om={Feature:function(t,n){return La(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(La(e[r].geometry,n))return!0;return!1}},jm={Sphere:function(){return!0},Point:function(t,n){return Ua(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Ua(e[r],n))return!0;return!1},LineString:function(t,n){return qa(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(qa(e[r],n))return!0;return!1},Polygon:function(t,n){return Ra(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Ra(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(La(e[r],n))return!0;return!1}},Hm=function(t,n){return(t&&Om.hasOwnProperty(t.type)?Om[t.type]:La)(t,n)},Bm=function(t,n){var e=t[0]*q_,r=t[1]*q_,i=n[0]*q_,o=n[1]*q_,u=O_(r),a=G_(r),c=O_(o),s=G_(o),l=u*O_(e),f=u*G_(e),h=c*O_(i),p=c*G_(i),v=2*Du($_(Fu(o-r)+u*c*Fu(i-e))),g=G_(v),d=v?function(t){var n=G_(t*=v)/g,e=G_(v-t)/g,r=e*l+n*h,i=e*f+n*p,o=e*a+n*s;return[I_(i,r)*U_,I_(o,$_(r*r+i*i))*U_]}:function(){return[e*U_,r*U_]};return d.distance=v,d},Xm=function(t){return t},Gm=Jy(),Vm=Jy(),$m={point:Lu,lineStart:Lu,lineEnd:Lu,polygonStart:function(){$m.lineStart=Xa,$m.lineEnd=$a},polygonEnd:function(){$m.lineStart=$m.lineEnd=$m.point=Lu,Gm.add(R_(Vm)),Vm.reset()},result:function(){var t=Gm/2;return Gm.reset(),t}},Wm=1/0,Zm=Wm,Qm=-Wm,Jm=Qm,Km={point:Wa,lineStart:Lu,lineEnd:Lu,polygonStart:Lu,polygonEnd:Lu,result:function(){var t=[[Wm,Zm],[Qm,Jm]];return Qm=Jm=-(Zm=Wm=1/0),t}},tx=0,nx=0,ex=0,rx=0,ix=0,ox=0,ux=0,ax=0,cx=0,sx={point:Za,lineStart:Qa,lineEnd:tc,polygonStart:function(){sx.lineStart=nc,sx.lineEnd=ec},polygonEnd:function(){sx.point=Za,sx.lineStart=Qa,sx.lineEnd=tc},result:function(){var t=cx?[ux/cx,ax/cx]:ox?[rx/ox,ix/ox]:ex?[tx/ex,nx/ex]:[NaN,NaN];return tx=nx=ex=rx=ix=ox=ux=ax=cx=0,t}};oc.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,L_)}},result:Lu};var lx,fx,hx,px,vx,gx=Jy(),dx={point:Lu,lineStart:function(){dx.point=uc},lineEnd:function(){lx&&ac(fx,hx),dx.point=Lu},polygonStart:function(){lx=!0},polygonEnd:function(){lx=null},result:function(){var t=+gx;return gx.reset(),t}};cc.prototype={_radius:4.5,_circle:sc(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=sc(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var yx=function(t,n){function e(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),J_(t,r(i))),i.result()}var r,i,o=4.5;return e.area=function(t){return J_(t,r($m)),$m.result()},e.measure=function(t){return J_(t,r(dx)),dx.result()},e.bounds=function(t){return J_(t,r(Km)),Km.result()},e.centroid=function(t){return J_(t,r(sx)),sx.result()},e.projection=function(n){return arguments.length?(r=null==n?(t=null,Xm):(t=n).stream,e):t},e.context=function(t){return arguments.length?(i=null==t?(n=null,new cc):new oc(n=t),"function"!=typeof o&&i.pointRadius(o),e):n},e.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),e):o},e.projection(t).context(n)},_x=function(t){return{stream:lc(t)}};fc.prototype={constructor:fc,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var mx=16,xx=O_(30*q_),wx=function(t,n){return+n?_c(t,n):yc(t)},Mx=lc({point:function(t,n){this.stream.point(t*q_,n*q_)}}),bx=function(){return Ec(kc).scale(155.424).center([0,33.6442])},Ex=function(){return bx().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},Sx=function(){function t(t){var n=t[0],e=t[1];return a=null,i.point(n,e),a||(o.point(n,e),a)||(u.point(n,e),a)}function n(){return e=r=null,t}var e,r,i,o,u,a,c=Ex(),s=bx().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=bx().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,n){a=[t,n]}};return t.invert=function(t){var n=c.scale(),e=c.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:c).invert(t)},t.stream=function(t){return e&&r===t?e:e=Tc([c.stream(r=t),s.stream(t),l.stream(t)])},t.precision=function(t){return arguments.length?(c.precision(t),s.precision(t),l.precision(t),n()):c.precision()},t.scale=function(n){return arguments.length?(c.scale(n),s.scale(.35*n),l.scale(n),t.translate(c.translate())):c.scale()},t.translate=function(t){if(!arguments.length)return c.translate();var e=c.scale(),r=+t[0],a=+t[1];return i=c.translate(t).clipExtent([[r-.455*e,a-.238*e],[r+.455*e,a+.238*e]]).stream(f),o=s.translate([r-.307*e,a+.201*e]).clipExtent([[r-.425*e+P_,a+.12*e+P_],[r-.214*e-P_,a+.234*e-P_]]).stream(f),u=l.translate([r-.205*e,a+.212*e]).clipExtent([[r-.214*e+P_,a+.166*e+P_],[r-.115*e-P_,a+.234*e-P_]]).stream(f),n()},t.fitExtent=function(n,e){return pc(t,n,e)},t.fitSize=function(n,e){return vc(t,n,e)},t.fitWidth=function(n,e){return gc(t,n,e)},t.fitHeight=function(n,e){return dc(t,n,e)},t.scale(1070)},kx=Ac(function(t){return $_(2/(1+t))});kx.invert=Cc(function(t){return 2*Du(t/2)});var Tx=function(){return Mc(kx).scale(124.75).clipAngle(179.999)},Ax=Ac(function(t){return(t=zu(t))&&t/G_(t)});Ax.invert=Cc(function(t){return t});var Cx=function(){return Mc(Ax).scale(79.4188).clipAngle(179.999)};Nc.invert=function(t,n){return[t,2*Y_(H_(n))-D_]};var Nx=function(){return Pc(Nc).scale(961/L_)},Px=function(){return Ec(Dc).scale(109.5).parallels([30,30])};Fc.invert=Fc;var zx=function(){return Mc(Fc).scale(152.63)},Dx=function(){return Ec(Lc).scale(131.154).center([0,13.9389])},Fx=1.340264,Lx=-.081106,Ux=893e-6,qx=.003796,Rx=$_(3)/2;Uc.invert=function(t,n){for(var e,r,i,o=n,u=o*o,a=u*u*u,c=0;c<12&&(r=o*(Fx+Lx*u+a*(Ux+qx*u))-n,i=Fx+3*Lx*u+a*(7*Ux+9*qx*u),o-=e=r/i,u=o*o,a=u*u*u,!(R_(e)<1e-12));++c);return[Rx*t*(Fx+3*Lx*u+a*(7*Ux+9*qx*u))/O_(o),Du(G_(o)/Rx)]};var Yx=function(){return Mc(Uc).scale(177.158)};qc.invert=Cc(Y_);var Ix=function(){return Mc(qc).scale(144.049).clipAngle(60)},Ox=function(){function t(){return i=o=null,u}var n,e,r,i,o,u,a=1,c=0,s=0,l=1,f=1,h=Xm,p=null,v=Xm;return u={stream:function(t){return i&&o===t?i:i=h(v(o=t))},postclip:function(i){return arguments.length?(v=i,p=n=e=r=null,t()):v},clipExtent:function(i){return arguments.length?(v=null==i?(p=n=e=r=null,Xm):Na(p=+i[0][0],n=+i[0][1],e=+i[1][0],r=+i[1][1]),t()):null==p?null:[[p,n],[e,r]]},scale:function(n){return arguments.length?(h=Rc((a=+n)*l,a*f,c,s),t()):a},translate:function(n){return arguments.length?(h=Rc(a*l,a*f,c=+n[0],s=+n[1]),t()):[c,s]},reflectX:function(n){return arguments.length?(h=Rc(a*(l=n?-1:1),a*f,c,s),t()):l<0},reflectY:function(n){return arguments.length?(h=Rc(a*l,a*(f=n?-1:1),c,s),t()):f<0},fitExtent:function(t,n){return pc(u,t,n)},fitSize:function(t,n){return vc(u,t,n)},fitWidth:function(t,n){return gc(u,t,n)},fitHeight:function(t,n){return dc(u,t,n)}}};Yc.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,u=o*o;r-=e=(r*(1.007226+o*(.015085+u*(.028874*o-.044475-.005916*u)))-n)/(1.007226+o*(.045255+u*(.259866*o-.311325-.005916*11*u)))}while(R_(e)>P_&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var jx=function(){return Mc(Yc).scale(175.295)};Ic.invert=Cc(Du);var Hx=function(){return Mc(Ic).scale(249.5).clipAngle(90+P_)};Oc.invert=Cc(function(t){return 2*Y_(t)});var Bx=function(){return Mc(Oc).scale(250).clipAngle(142)};jc.invert=function(t,n){return[-n,2*Y_(H_(t))-D_]};var Xx=function(){var t=Pc(jc),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90]).scale(159.155)},Gx=Math.abs,Vx=Math.atan,$x=Math.atan2,Wx=Math.cos,Zx=Math.exp,Qx=Math.floor,Jx=Math.log,Kx=Math.max,tw=Math.min,nw=(Math.pow,Math.round,Math.sign||function(t){return t>0?1:t<0?-1:0}),ew=Math.sin,rw=Math.tan,iw=1e-6,ow=1e-12,uw=Math.PI,aw=uw/2,cw=uw/4,sw=(Math.SQRT1_2,Gc(2)),lw=Gc(uw),fw=2*uw,hw=180/uw,pw=uw/180,vw=function(){var t=aw,n=bc(Qc),e=n(t);return e.radius=function(e){return arguments.length?n(t=e*pw):t*hw},e.scale(179.976).clipAngle(147)};Jc.invert=function(t,n){if(!(t*t+4*n*n>uw*uw+iw)){var e=t,r=n,i=25;do{var o,u=ew(e),a=ew(e/2),c=Wx(e/2),s=ew(r),l=Wx(r),f=ew(2*r),h=s*s,p=l*l,v=a*a,g=1-p*c*c,d=g?Xc(l*c)*Gc(o=1/g):o=0,y=2*d*l*a-t,_=d*s-n,m=o*(p*v+d*l*c*h),x=o*(.5*u*f-2*d*s*a),w=.25*o*(f*a-d*s*p*u),M=o*(h*c+d*v*l),b=x*w-M*m;if(!b)break;var E=(_*x-y*M)/b,S=(y*w-_*m)/b;e-=E,r-=S}while((Gx(E)>iw||Gx(S)>iw)&&--i>0);return[e,r]}};var gw=function(){return Mc(Jc).scale(152.63)},dw=function(){var t=20*pw,n=t>=0?1:-1,e=rw(n*t),r=bc(Kc),i=r(t),o=i.stream;return i.parallel=function(i){return arguments.length?(e=rw((n=(t=i*pw)>=0?1:-1)*t),r(t)):t*hw},i.stream=function(r){var u=i.rotate(),a=o(r),c=(i.rotate([0,0]),o(r));return i.rotate(u),a.sphere=function(){c.polygonStart(),c.lineStart();for(var r=-180*n;n*r<180;r+=90*n)c.point(r,90*n);for(;n*(r-=t)>=-180;)c.point(r,n*-$x(Wx(r*pw/2),e)*hw);c.lineEnd(),c.polygonEnd()},a},i.scale(218.695).center([0,28.0974])};ts.invert=function(t,n){if(t*=3/8,n*=3/8,!t&&Gx(n)>1)return null;var e=t*t,r=n*n,i=1+e+r,o=Gc((i-Gc(i*i-4*n*n))/2),u=Bc(o)/3,a=o?Zc(Gx(n/o))/3:Wc(Gx(t))/3,c=Wx(u),s=$c(a),l=s*s-c*c;return[2*nw(t)*$x(Vc(a)*c,.25-l),2*nw(n)*$x(s*ew(u),.25+l)]};Gc(8),Jx(1+sw);es.invert=function(t,n){var e=2*Bc(n/2);return[t*Wx(e/2)/Wx(e),e]};var yw=function(){var t=2,n=bc(ns),e=n(t);return e.coefficient=function(e){return arguments.length?n(t=+e):t},e.scale(169.529)},_w=(is(sw/aw,sw,uw),function(t){var n=0,e=bc(t),r=e(n);return r.parallel=function(t){return arguments.length?e(n=t*pw):n*hw},r});os.invert=function(t,n){return[t/Wx(n),n]};is(1,4/uw,uw);ps.invert=function(t,n){var e=(e=n/lw-1)*e;return[e>0?t*Gc(uw/e)/2:0,Bc(1-e)]};var mw=function(){return _w(vs).scale(124.75)};gs.invert=function(t,n){var e=Gc(uw*(4+uw))/2;return[t*e/(1+Gc(1-n*n*(4+uw)/(4*uw))),n*e/2]};var xw=function(){return Mc(gs).scale(180.739)};ds.invert=function(t,n){var e=n*Gc((4+uw)/uw)/2,r=Bc(e),i=Wx(r);return[t/(2/Gc(uw*(4+uw))*(1+i)),Bc((r+e*(i+2))/(2+aw))]};var ww=function(){return Mc(ds).scale(180.739)};ys.invert=function(t,n){var e=Gc(2+uw),r=n*e/2;return[e*t/(1+Wx(r)),r]};var Mw=function(){return Mc(ys).scale(173.044)};_s.invert=function(t,n){var e=1+aw,r=Gc(e/2);return[2*t*r/(1+Wx(n*=r)),Bc((n+ew(n))/e)]};var bw=function(){return Mc(_s).scale(173.044)},Ew=Wx(35*pw);ms.invert=function(t,n){var e=n/(1+Ew);return[t&&t/(Ew*Gc(1-e*e)),2*Vx(e)]};var Sw=function(){return Mc(ms).scale(137.152)},kw=function(t,n,e,r,i,o,u,a){function c(c,s){if(!s)return[t*c/uw,0];var l=s*s,f=t+l*(n+l*(e+l*r)),h=s*(i-1+l*(o-a+l*u)),p=(f*f+h*h)/(2*h),v=c*Bc(f/p)/uw;return[p*ew(v),s*(1+l*a)+p*(1-Wx(v))]}return arguments.length<8&&(a=0),c.invert=function(c,s){var l,f,h=uw*c/t,p=s,v=50;do{var g=p*p,d=t+g*(n+g*(e+g*r)),y=p*(i-1+g*(o-a+g*u)),_=d*d+y*y,m=2*y,x=_/m,w=x*x,M=Bc(d/x)/uw,b=h*M,E=d*d,S=(2*n+g*(4*e+6*g*r))*p,k=i+g*(3*o+5*g*u),T=2*(d*S+y*(k-1)),A=2*(k-1),C=(T*m-_*A)/(m*m),N=Wx(b),P=ew(b),z=x*N,D=x*P,F=h/uw*(1/Gc(1-E/w))*(S*x-d*C)/w,L=D-c,U=p*(1+g*a)+x-z-s,q=C*P+z*F,R=z*M,Y=1+C-(C*N-D*F),I=D*M,O=q*I-Y*R;if(!O)break;h-=l=(U*q-L*Y)/O,p-=f=(L*I-U*R)/O}while((Gx(l)>iw||Gx(f)>iw)&&--v>0);return[h,p]},c},Tw=kw(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Aw=function(){return Mc(Tw).scale(149.995)},Cw=kw(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Nw=function(){return Mc(Cw).scale(153.93)},Pw=kw(5/6*uw,-.62636,-.0344,0,1.3493,-.05524,0,.045),zw=function(){return Mc(Pw).scale(130.945)};xs.invert=function(t,n){var e,r=t,i=n,o=50;do{var u=i*i;i-=e=(i*(1+u/12)-n)/(1+u/4)}while(Gx(e)>iw&&--o>0);o=50,t/=1-.162388*u;do{var a=(a=r*r)*a;r-=e=(r*(.87-952426e-9*a)-t)/(.87-.00476213*a)}while(Gx(e)>iw&&--o>0);return[r,i]};var Dw=function(){return Mc(xs).scale(131.747)},Fw=kw(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762),Lw=function(){return Mc(Fw).scale(131.087)};!function(t){function n(t,n){return[t*e,ew(n)/e]}var e=Wx(t);n.invert=function(t,n){return[t/e,Bc(n*e)]}}(0);ws.invert=function(t,n){return[fw/3*t/Gc(uw*uw/3-n*n),n]};var Uw=function(){return Mc(ws).scale(158.837)};Ms.invert=function(t,n){return[t,2.5*Vx(Zx(.8*n))-.625*uw]};var qw=function(){return Mc(Ms).scale(108.318)},Rw=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Yw=([[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(t){return t.map(function(t){return Rw[t]})}),2/Gc(3));bs.invert=function(t,n){return ps.invert(t/Yw,n)};var Iw=function(){},Ow=function(t){if((n=t.length)<4)return!1;for(var n,e=0,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r<=0},jw=function(t,n){for(var e=n[0],r=n[1],i=!1,o=0,u=t.length,a=u-1;o<u;a=o++){var c=t[o],s=c[0],l=c[1],f=t[a],h=f[0],p=f[1];l>r^p>r&&e<(h-s)*(r-l)/(p-l)+s&&(i=!i)}return i},Hw=function(t,n){var e,r=n.stream;if(!r)throw new Error("invalid projection");switch(t&&t.type){case"Feature":e=Ss;break;case"FeatureCollection":e=Es;break;default:e=Ts}return e(t,r)},Bw=[],Xw=[],Gw={point:function(t,n){Bw.push([t,n])},result:function(){var t=Bw.length?Bw.length<2?{type:"Point",coordinates:Bw[0]}:{type:"MultiPoint",coordinates:Bw}:null;return Bw=[],t}},Vw={lineStart:Iw,point:function(t,n){Bw.push([t,n])},lineEnd:function(){Bw.length&&(Xw.push(Bw),Bw=[])},result:function(){var t=Xw.length?Xw.length<2?{type:"LineString",coordinates:Xw[0]}:{type:"MultiLineString",coordinates:Xw}:null;return Xw=[],t}},$w={polygonStart:Iw,lineStart:Iw,point:function(t,n){Bw.push([t,n])},lineEnd:function(){var t=Bw.length;if(t){do{Bw.push(Bw[0].slice())}while(++t<4);Xw.push(Bw),Bw=[]}},polygonEnd:Iw,result:function(){if(!Xw.length)return null;var t=[],n=[];return Xw.forEach(function(e){Ow(e)?t.push([e]):n.push(e)}),n.forEach(function(n){var e=n[0];t.some(function(t){if(jw(t[0],e))return t.push(n),!0})||t.push([n])}),Xw=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}},Ww=function(t,n){function e(t){var e=t.length,r=2,i=new Array(e);for(i[0]=+t[0].toFixed(n),i[1]=+t[1].toFixed(n);r<e;)i[r]=t[r],++r;return i}function r(t){return t.map(e)}function i(t){return t.map(r)}function o(t){if(null==t)return t;var n;switch(t.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:t.geometries.map(o)};break;case"Point":n={type:"Point",coordinates:e(t.coordinates)};break;case"MultiPoint":case"LineString":n={type:t.type,coordinates:r(t.coordinates)};break;case"MultiLineString":case"Polygon":n={type:t.type,coordinates:i(t.coordinates)};break;case"MultiPolygon":n={type:"MultiPolygon",coordinates:t.coordinates.map(i)};break;default:return t}return null!=t.bbox&&(n.bbox=t.bbox),n}function u(t){var n={type:"Feature",properties:t.properties,geometry:o(t.geometry)};return null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),n}if(!(0<=(n=+n)&&n<=20))throw new Error("invalid digits");if(null!=t)switch(t.type){case"Feature":return u(t);case"FeatureCollection":var a={type:"FeatureCollection",features:t.features.map(u)};return null!=t.bbox&&(a.bbox=t.bbox),a;default:return o(t)}return t},Zw=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Zw.forEach(function(t){t[1]*=1.0144}),As.invert=function(t,n){var e=n/aw,r=90*e,i=tw(18,Gx(r/5)),o=Kx(0,Qx(i));do{var u=Zw[o][1],a=Zw[o+1][1],c=Zw[tw(19,o+2)][1],s=c-u,l=c-2*a+u,f=2*(Gx(e)-a)/s,h=l/s,p=f*(1-h*f*(1-2*h*f));if(p>=0||1===o){r=(n>=0?5:-5)*(p+i);var v,g=50;do{i=tw(18,Gx(r)/5),o=Qx(i),p=i-o,u=Zw[o][1],a=Zw[o+1][1],c=Zw[tw(19,o+2)][1],r-=(v=(n>=0?aw:-aw)*(a+p*(c-u)/2+p*p*(c-2*a+u)/2)-n)*hw}while(Gx(v)>ow&&--g>0);break}}while(--o>=0);var d=Zw[o][0],y=Zw[o+1][0],_=Zw[tw(19,o+2)][0];return[t/(y+p*(_-d)/2+p*p*(_-2*y+d)/2),r*pw]};var Qw=function(){return Mc(As).scale(152.63)},Jw=function(){var t=2,n=0,e=bc(Ns),r=e(t,n);return r.distance=function(r){return arguments.length?e(t=+r,n):t},r.tilt=function(r){return arguments.length?e(t,n=r*pw):n*hw},r.scale(432.147).clipAngle(Xc(1/t)*hw-1e-6)},Kw=1e4,tM=-180,nM=tM+1e-4,eM=180,rM=eM-1e-4,iM=-90,oM=iM+1e-4,uM=90,aM=uM-1e-4,cM=function(t){if(null==t)return t;switch(t.type){case"Feature":return Rs(t);case"FeatureCollection":var n={type:"FeatureCollection",features:t.features.map(Rs)};return null!=t.bbox&&(n.bbox=t.bbox),n;default:return Ys(t)}\n},sM=4*uw+3*Gc(3),lM=2*Gc(2*uw*Gc(3)/sM),fM=is(lM*Gc(3)/uw,lM,sM/6),hM=function(){return Mc(fM).scale(176.84)};Is.invert=function(t,n){return[t/Gc(1-3*n*n/(uw*uw)),n]};var pM=function(){return Mc(Is).scale(152.63)},vM=Math.acos,gM=Math.asin,dM=Math.atan2,yM=Math.cos,_M=Math.max,mM=Math.min,xM=Math.PI,wM=Math.sin,MM=Math.sqrt,bM=xM/180,EM=180/xM,SM=function(t){var n=t[0]/2*bM,e=wM(n),r=yM(n),i=t[1]/2*bM,o=wM(i),u=yM(i),a=t[2]/2*bM,c=wM(a),s=yM(a);return[r*u*s+e*o*c,e*u*s-r*o*c,r*o*s+e*u*c,r*u*c-e*o*s]};SM.cartesian=function(t){var n=t[0]*bM,e=t[1]*bM,r=yM(e);return[r*yM(n),r*wM(n),wM(e)]},SM.rotation=function(t){return[dM(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]))*EM,gM(_M(-1,mM(1,2*(t[0]*t[2]-t[3]*t[1]))))*EM,dM(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[2]*t[2]+t[3]*t[3]))*EM]},SM.delta=function(t,n,e){2==arguments.length&&(e=1);var r=Os(t,n),i=MM(js(r,r));if(!i)return[1,0,0,0];var o=e*vM(_M(-1,mM(1,js(t,n))))/2,u=wM(o);return[yM(o),r[2]/i*u,-r[1]/i*u,r[0]/i*u]},SM.multiply=function(t,n){return[t[0]*n[0]-t[1]*n[1]-t[2]*n[2]-t[3]*n[3],t[0]*n[1]+t[1]*n[0]+t[2]*n[3]-t[3]*n[2],t[0]*n[2]-t[1]*n[3]+t[2]*n[0]+t[3]*n[1],t[0]*n[3]+t[1]*n[2]-t[2]*n[1]+t[3]*n[0]]};var kM=function(t){return t},TM=function(t){if(null==t)return kM;var n,e,r=t.scale[0],i=t.scale[1],o=t.translate[0],u=t.translate[1];return function(t,a){a||(n=e=0);var c=2,s=t.length,l=new Array(s);for(l[0]=(n+=t[0])*r+o,l[1]=(e+=t[1])*i+u;c<s;)l[c]=t[c],++c;return l}},AM=function(t){function n(t){t=i(t),t[0]<o&&(o=t[0]),t[0]>a&&(a=t[0]),t[1]<u&&(u=t[1]),t[1]>c&&(c=t[1])}function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Point":n(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(n)}}var r,i=TM(t.transform),o=1/0,u=o,a=-o,c=-o;t.arcs.forEach(function(t){for(var n,e=-1,r=t.length;++e<r;)n=i(t[e],e),n[0]<o&&(o=n[0]),n[0]>a&&(a=n[0]),n[1]<u&&(u=n[1]),n[1]>c&&(c=n[1])});for(r in t.objects)e(t.objects[r]);return[o,u,a,c]},CM=function(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e},NM=function(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return Hs(t,n)})}:Hs(t,n)},PM=function(t,n){function e(n){var e,r=t.arcs[n<0?~n:n],i=r[0];return t.transform?(e=[0,0],r.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=r[r.length-1],n<0?[e,i]:[i,e]}function r(t,n){for(var e in t){var r=t[e];delete n[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),a.push(r)}}var i={},o={},u={},a=[],c=-1;return n.forEach(function(e,r){var i,o=t.arcs[e<0?~e:e];o.length<3&&!o[1][0]&&!o[1][1]&&(i=n[++c],n[c]=e,n[r]=i)}),n.forEach(function(t){var n,r,i=e(t),a=i[0],c=i[1];if(n=u[a])if(delete u[n.end],n.push(t),n.end=c,r=o[c]){delete o[r.start];var s=r===n?n:n.concat(r);o[s.start=n.start]=u[s.end=r.end]=s}else o[n.start]=u[n.end]=n;else if(n=o[c])if(delete o[n.start],n.unshift(t),n.start=a,r=u[a]){delete u[r.end];var l=r===n?n:r.concat(n);o[l.start=r.start]=u[l.end=n.end]=l}else o[n.start]=u[n.end]=n;else n=[t],o[n.start=a]=u[n.end=c]=n}),r(u,o),r(o,u),n.forEach(function(t){i[t<0?~t:t]||a.push([t])}),a},zM=function(t){return Bs(t,Xs.apply(this,arguments))},DM=function(t){return Bs(t,$s.apply(this,arguments))},FM=function(t,n){for(var e=0,r=t.length;e<r;){var i=e+r>>>1;t[i]<n?e=i+1:r=i}return e},LM=function(t){function n(t,n){t.forEach(function(t){t<0&&(t=~t);var e=i[t];e?e.push(n):i[t]=[n]})}function e(t,e){t.forEach(function(t){n(t,e)})}function r(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){r(t,n)}):t.type in u&&u[t.type](t.arcs,n)}var i={},o=t.map(function(){return[]}),u={LineString:n,MultiLineString:e,Polygon:e,MultiPolygon:function(t,n){t.forEach(function(t){e(t,n)})}};t.forEach(r);for(var a in i)for(var c=i[a],s=c.length,l=0;l<s;++l)for(var f=l+1;f<s;++f){var h,p=c[l],v=c[f];(h=o[p])[a=FM(h,v)]!==v&&h.splice(a,0,v),(h=o[v])[a=FM(h,p)]!==p&&h.splice(a,0,p)}return o},UM=function(t){if(null==t)return kM;var n,e,r=t.scale[0],i=t.scale[1],o=t.translate[0],u=t.translate[1];return function(t,a){a||(n=e=0);var c=2,s=t.length,l=new Array(s),f=Math.round((t[0]-o)/r),h=Math.round((t[1]-u)/i);for(l[0]=f-n,n=f,l[1]=h-e,e=h;c<s;)l[c]=t[c],++c;return l}},qM=function(t,n){function e(t){return h(t)}function r(t){var n;switch(t.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:t.geometries.map(r)};break;case"Point":n={type:"Point",coordinates:e(t.coordinates)};break;case"MultiPoint":n={type:"MultiPoint",coordinates:t.coordinates.map(e)};break;default:return t}return null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),null!=t.properties&&(n.properties=t.properties),n}function i(t){var n,e=0,r=1,i=t.length,o=new Array(i);for(o[0]=h(t[0],0);++e<i;)((n=h(t[e],e))[0]||n[1])&&(o[r++]=n);return 1===r&&(o[r++]=[0,0]),o.length=r,o}if(t.transform)throw new Error("already quantized");if(n&&n.scale)l=t.bbox;else{if(!((o=Math.floor(n))>=2))throw new Error("n must be 2");l=t.bbox||AM(t);var o,u=l[0],a=l[1],c=l[2],s=l[3];n={scale:[c-u?(c-u)/(o-1):1,s-a?(s-a)/(o-1):1],translate:[u,a]}}var l,f,h=UM(n),p=t.objects,v={};for(f in p)v[f]=r(p[f]);return{type:"Topology",bbox:l,transform:n,objects:v,arcs:t.arcs.map(i)}},RM=Object.freeze({bbox:AM,feature:NM,mesh:zM,meshArcs:Xs,merge:DM,mergeArcs:$s,neighbors:LM,quantize:qM,transform:TM,untransform:UM});t.topojson=RM,t.bisect=Js,t.bisectRight=Js,t.bisectLeft=Ks,t.ascending=Ws,t.bisector=Zs,t.descending=tl,t.extent=el,t.max=ll,t.min=hl,t.merge=fl,t.range=il,t.scan=pl,t.sum=vl,t.ticks=cl,t.tickIncrement=e,t.tickStep=r,t.set=a,t.map=o,t.keys=dl,t.values=yl,t.csvParse=kv,t.csvParseRows=Tv,t.request=Nv,t.json=zv,t.scaleBand=Hr,t.scalePoint=Xr,t.scaleLinear=ti,t.scaleOrdinal=jr,t.scaleQuantile=ni,t.scaleTime=ry,t.scaleUtc=iy,t.arc=by,t.area=ky,t.line=Sy,t.pie=Cy,t.areaRadial=zy,t.radialArea=zy,t.lineRadial=Py,t.radialLine=Py,t.pointRadial=Dy,t.curveLinear=Ey,t.curveLinearClosed=Ry,t.curveCardinal=Uy,t.curveCardinalClosed=qy,t.curveMonotoneX=hu,t.curveMonotoneY=pu,t.curveStepAfter=du,t.curveStepBefore=gu,t.stack=Oy,t.geoStitch=cM,t.geoProject=Hw,t.geoQuantize=Ww,t.geoAiry=vw,t.geoAitoff=gw,t.geoArmadillo=dw,t.geoMiller=qw,t.geoChamberlinAfrica=fs,t.geoCylindricalStereographic=mw,t.geoEckert3=xw,t.geoEckert4=ww,t.geoEckert5=Mw,t.geoEckert6=bw,t.geoFahey=Sw,t.geoGinzburg4=Aw,t.geoGinzburg5=Nw,t.geoGinzburg6=zw,t.geoGinzburg8=Dw,t.geoGinzburg9=Lw,t.geoHammer=yw,t.geoKavrayskiy7=Uw,t.geoRobinson=Qw,t.geoSatellite=Jw,t.geoWagner4=hM,t.geoWagner6=pM,t.versor=SM,t.axisTop=v,t.axisRight=g,t.axisBottom=d,t.axisLeft=y,t.brush=_v,t.brushX=Le,t.brushY=Ue,t.brushSelection=Fe,t.color=Nt,t.rgb=Ft,t.hsl=Rt,t.lab=jt,t.hcl=Wt,t.cubehelix=Jt,t.dispatch=_,t.drag=Cf,t.dragDisable=Tf,t.dragEnable=Mt,t.easeLinear=ce,t.easeQuad=fe,t.easeQuadIn=se,t.easeQuadOut=le,t.easeQuadInOut=fe,t.easeCubic=ve,t.easeCubicIn=he,t.easeCubicOut=pe,t.easeCubicInOut=ve,t.easePoly=Dp,t.easePolyIn=Pp,t.easePolyOut=zp,t.easePolyInOut=Dp,t.easeSin=ye,t.easeSinIn=ge,t.easeSinOut=de,t.easeSinInOut=ye,t.easeExp=xe,t.easeExpIn=_e,t.easeExpOut=me,t.easeExpInOut=xe,t.easeCircle=be,t.easeCircleIn=we,t.easeCircleOut=Me,t.easeCircleInOut=be,t.easeBounce=Se,t.easeBounceIn=Ee,t.easeBounceOut=Se,t.easeBounceInOut=ke,t.easeBack=$p,t.easeBackIn=Gp,t.easeBackOut=Vp,t.easeBackInOut=$p,t.easeElastic=Qp,t.easeElasticIn=Zp,t.easeElasticOut=Qp,t.easeElasticInOut=Jp,t.formatDefaultLocale=Ge,t.formatLocale=Vv,t.formatSpecifier=Be,t.precisionFixed=$v,t.precisionPrefix=Wv,t.precisionRound=Zv,t.cluster=Qv,t.hierarchy=er,t.pack=pg,t.packSiblings=fg,t.packEnclose=lg,t.partition=dg,t.stratify=xg,t.tree=wg,t.treemap=Sg,t.treemapBinary=kg,t.treemapDice=gg,t.treemapSlice=Mg,t.treemapSliceDice=Tg,t.treemapSquarify=Eg,t.treemapResquarify=Ag,t.interpolate=Sh,t.interpolateArray=_h,t.interpolateBasis=hh,t.interpolateBasisClosed=ph,t.interpolateDate=mh,t.interpolateNumber=xh,t.interpolateObject=wh,t.interpolateRound=kh,t.interpolateString=Eh,t.interpolateTransformCss=Nh,t.interpolateTransformSvg=Ph,t.interpolateZoom=Dh,t.interpolateRgb=gh,t.interpolateRgbBasis=dh,t.interpolateRgbBasisClosed=yh,t.interpolateHsl=Fh,t.interpolateHslLong=Lh,t.interpolateLab=yn,t.interpolateHcl=Uh,t.interpolateHclLong=qh,t.interpolateCubehelix=Rh,t.interpolateCubehelixLong=Yh,t.quantize=Ih,t.path=Or,t.creator=Cl,t.local=S,t.matcher=Fl,t.mouse=Yl,t.namespace=Al,t.namespaces=Tl,t.clientPoint=Rl,t.select=Mf,t.selectAll=bf,t.selection=xt,t.selector=Il,t.selectorAll=jl,t.style=$,t.touch=Ef,t.touches=Sf,t.window=cf,t.customEvent=z,t.timeInterval=ei,t.timeMillisecond=Hg,t.timeMilliseconds=Bg,t.utcMillisecond=Hg,t.utcMilliseconds=Bg,t.timeSecond=Vg,t.timeSeconds=$g;t.utcSecond=Vg,t.utcSeconds=$g,t.timeMinute=Wg,t.timeMinutes=Zg,t.timeHour=Qg,t.timeHours=Jg,t.timeDay=Kg,t.timeDays=td,t.timeWeek=nd,t.timeWeeks=cd,t.timeSunday=nd,t.timeSundays=cd,t.timeMonday=ed,t.timeMondays=sd,t.timeTuesday=rd,t.timeTuesdays=ld,t.timeWednesday=id,t.timeWednesdays=fd,t.timeThursday=od,t.timeThursdays=hd,t.timeFriday=ud,t.timeFridays=pd,t.timeSaturday=ad,t.timeSaturdays=vd,t.timeMonth=gd,t.timeMonths=dd,t.timeYear=yd,t.timeYears=_d,t.utcMinute=md,t.utcMinutes=xd,t.utcHour=wd,t.utcHours=Md,t.utcDay=bd,t.utcDays=Ed,t.utcWeek=Sd,t.utcWeeks=zd,t.utcSunday=Sd,t.utcSundays=zd,t.utcMonday=kd,t.utcMondays=Dd,t.utcTuesday=Td,t.utcTuesdays=Fd,t.utcWednesday=Ad,t.utcWednesdays=Ld,t.utcThursday=Cd,t.utcThursdays=Ud,t.utcFriday=Nd,t.utcFridays=qd,t.utcSaturday=Pd,t.utcSaturdays=Rd,t.utcMonth=Yd,t.utcMonths=Id,t.utcYear=Od,t.utcYears=Hd,t.timeFormatDefaultLocale=go,t.timeFormatLocale=ci,t.isoFormat=$d,t.isoParse=Wd,t.now=xn,t.timer=bn,t.timerFlush=En,t.timeout=Zh,t.interval=Qh,t.transition=ue,t.active=ev,t.interrupt=cp,t.zoom=Xy,t.zoomTransform=xu,t.zoomIdentity=Hy,t.polygonArea=Gy,t.polygonCentroid=Vy,t.polygonHull=Wy,t.polygonContains=Zy,t.polygonLength=Qy,t.geoArea=em,t.geoBounds=om,t.geoCentroid=am,t.geoCircle=Mm,t.geoClipAntimeridian=Cm,t.geoClipCircle=Nm,t.geoClipExtent=Fm,t.geoClipRectangle=Na,t.geoContains=Hm,t.geoDistance=Im,t.geoGraticule=Ha,t.geoGraticule10=Ba,t.geoInterpolate=Bm,t.geoLength=qm,t.geoPath=yx,t.geoAlbers=Ex,t.geoAlbersUsa=Sx,t.geoAzimuthalEqualArea=Tx,t.geoAzimuthalEqualAreaRaw=kx,t.geoAzimuthalEquidistant=Cx,t.geoAzimuthalEquidistantRaw=Ax,t.geoConicConformal=Px,t.geoConicConformalRaw=Dc,t.geoConicEqualArea=bx,t.geoConicEqualAreaRaw=kc,t.geoConicEquidistant=Dx,t.geoConicEquidistantRaw=Lc,t.geoEqualEarth=Yx,t.geoEqualEarthRaw=Uc,t.geoEquirectangular=zx,t.geoEquirectangularRaw=Fc,t.geoGnomonic=Ix,t.geoGnomonicRaw=qc,t.geoIdentity=Ox,t.geoProjection=Mc,t.geoProjectionMutator=bc,t.geoMercator=Nx,t.geoMercatorRaw=Nc,t.geoNaturalEarth1=jx,t.geoNaturalEarth1Raw=Yc,t.geoOrthographic=Hx,t.geoOrthographicRaw=Ic,t.geoStereographic=Bx,t.geoStereographicRaw=Oc,t.geoTransverseMercator=Xx,t.geoTransverseMercatorRaw=jc,t.geoRotation=wm,t.geoStream=J_,t.geoTransform=_x,Object.defineProperty(t,"__esModule",{value:!0})});'},1625:function(t,e){t.exports='!function(e){function t(e,t){return parseInt(e,t||10)}function a(e){return Array.isArray?Array.isArray(e):!!e&&e.constructor===Array}function r(e){return!!(e&&e.constructor&&e.call&&e.apply)}function n(e){return ut(e)?JSON.stringify(e):ol}function i(e,t){if(e.isD3Selection||(e=d3.select(e)),!Yt(e.node()))return nl.warn("No container"),null;var a=e.datum(t),r=null;return a.each(function(e){var t=Rl(this);r=new So.charts.get(t,e),r.showLoading(t)}),r}function o(e,t){if(a(e)&&a(t)){var r=e.map(function(e,a){return i(e,t[a])}),n=[],o=r.slice(),s=o.reverse();return l(s,n,r),r}}function l(e,t,a){var r=e.length,n=e[r-1];r||(a.chartRendered=!0),r>0&&1!=n.drawStarted&&Yt(n.container.node())&&(n.draw(),n.drawStarted=!0,s(e,t,a))}function s(e,t,a,r){var n=e.length,i=e[n-1];if(i.chartRendered||i.breakOnErr)t.push(e.pop()),l(e,t,a);else{null!=r&&clearTimeout(r);var r=setTimeout(function(){s(e,t,a,r)},10)}}function c(e,t){this.container=e,this.userdata=t,this.dataset={},this.dataObject={},this.canvasarea={},this.chartarea={},this.legendarea={},this.legend={component:null},this.renderer=[],this.svg=null,this.cache={},this.datalabels={moduleExists:So.labelRenderer},this.prepareLayout()}function d(e,t,a,r){for(var n,i=nt(arguments).slice(4),o=null,l=0,s=i.length;s+1>l&&(n=l===s?null:kd(e,i[l]),o=f(r,null,n,t,a),!jl(n));l++);return o}function u(e,t,a){dd.globalProp={},a.fontL1Size=d(e,dd.fontL1Size,a.fontL1Size,t,"canvas.fontSize"),a.fontL2Size=d(e,dd.fontL2Size,a.fontL2Size,t,"chart.fontSize","canvas.fontSize"),dd.globalProp.fontL1Color=null,dd.globalProp.fontL2Color=null,dd.globalProp.fontL1Family=null,dd.globalProp.fontL2Family=null,dd.globalProp.fontL1Style=null,dd.globalProp.fontL2Style=null,dd.globalProp.fontL1Weight=null,dd.globalProp.fontL2Weight=null,dd.globalProp.textShadow=null;var r=Od(kd(e,"chart.plot.animation"),{});return dd.globalProp.animation={},dd.globalProp.animation.enabled=r.enabled!==!1,dd.globalProp.animation.duration=r.duration||null,dd.globalProp.animation.easingType=r.easingType||null,dd.globalProp.datalabels={},a.datalabels=null==a.datalabels?{}:a.datalabels,dd.globalProp.datalabels.enabled=null,a.datalabels.fontSize=d(e,dd.fontL3Size,a.datalabels.fontSize,t,"chart.plot.datalabels.fontSize","chart.fontSize","canvas.fontSize"),dd.globalProp.datalabels.fontColor=null,dd.globalProp.datalabels.fontFamily=null,dd.globalProp.datalabels.fontStyle=null,dd.globalProp.datalabels.fontWeight=null,dd.globalProp.events={},dd.globalProp.events.mouseMove=null,dd.globalProp.events.mouseOut=null,dd.globalProp.events.click=null,dd.globalProp.events.doubleClick=null,a}function f(e,a,r,n,i){var o=hl(e.width,e.height),l=at(So,"fontProperties.ratio")&&So.fontProperties.ratio;"function"==typeof l&&(l=l(e)),a=null==a?l&&!isNaN(l)?l:.038:a;var s=sl(o*a);dd.minL1Size=So.fontProperties.minsize,dd.maxL1Size=So.fontProperties.maxsize;var c=dd.minL1Size,d=dd.maxL1Size;s=c>s?c:s>d?d:s,null!=r&&(a=t(r)*a/s,s=sl(o*a),s=c>s?c:s>d?d:s);var i=null==n?null==i?{}:i:n;return i.size=s,i.l1=function(){return i.size},i.l2=function(){return i.size-2},i.l3=function(){return i.size-3},i.l4=function(){return i.size-4},i.l5=function(){return i.size-5},i}function g(e){dd.patternSVG=e}function p(e){this.chart=e,this.originalSeries=e.seriesdata,this.initialize()}function v(e,t,a,r){var n,i=0,o=e.renderer[t].commonRendererProp().params,l=e.dataset,s=l.getX(a),c=l.getY(a,o.yaxiscolumnorder||0);e.userdata.seriesdata.stackGroup&&(i=Sr(t,e.userdata.seriesdata.stackGroup));var d=e.dataObject.groupedByStack.get(i).stackExtent.filter(function(e){return e[0]===s});return n=r===id||r===ad?d.reduce(function(e,t){return e+fl(t[1])},0):d[c<o.hasNegValue&&d[1]?1:0][1]}function m(e,t,a,r,n,i,o){r=+r;var l=e.systemConf.metadata.axes,s=l.y,c=-1,d=Zr(e.chartTypes[t].value),u=e.dataObject.isstacked(e.chartTypes[t].value);if(u&&!e.dataObject.isStackedPercentChart&&!e.dataObject.isPercentChart&&/(datalabels|tooltip)/.test(o))return v(e,t,n,i);if(null!=s&&(s[0]instanceof Array?s.forEach(function(e,t){c=-1==c&&e.indexOf(r)>-1?t:c}):c=s.indexOf(r)>-1?0:-1,-1!=c||d)){var h;if(d){var f=xu.getKey(n,t,e),g=e.subrenderer[a||0][f];h=g.total}else if(e.isAxisCategory||e.dataObject.isPolarAxisCategory){var p=e.axes.y.groups[c].scale;if(i!==nd&&p){var y=p.domain();h=y[1]}else{var y=ku(e,c);y=e.dataObject.isStackedPercentChart||u||e.dataObject.isPercentChart?y[c]:y,h=e.dataset.getY(n,c)<0?-y[0]:y[1]}}else if(e.isNonAxisMultiSeriesCategory){var m=e.renderer[0];if(i===ad)return m.total;if(m.extentY)return m.extentY[1];var x=m.getProcessedNode,b=x?x(n):n;h=b.parent.value}else if("legend"===o){var C=e.seriesdata[0],w=e.dataset.yidx(So.DataProcessor.helpers.getParsedYAxisOrder(C.yaxiscolumnorder));h=C.data[0].reduce(function(e,t){var a=t.disabled?0:fl(t[w]||0);return e+a},0)}else h=e.renderer[0].total;return h||0===h?h:null}return null}function x(e,t,r,n){var i=r.datatype,o=r[i],l="threshold",s=!1;return e.replace(el,function(e,r){var c="";return a(t[r])?(c=gn(o,t[r][0],i,n,l,s),c+=" - "+gn(o,t[r][1],i,n,l,s)):c=gn(o,t[r],i,n,l,s),c})}function b(e,t){var a=Jl(t.seriesExtermes[e]),r=0!=a.length?rs(a):a.enabled?[0,0]:null;return r}function C(e,t){var a=t.dataset,r=t.data,n=t.chartObj,i=t.processedseriesData,o=t.groupedDataByCombo,l=t.groupedDataBySplitAxes,s=t.categoriesStore,c=t.groupedByStack,d=n.dataObject,u=So.DataProcessor.helpers,h=0,f=t.isCombinationalChart||r.seriesdata.stackGroup?o.values():l,g=d.getDomain(t.getCategories("x"),!0),p=g.length,y=s.subseries,v=u.isCatNull(a,"x"),m=[],x=[],b=f.map(function(e,l){var s=o.keys()[l],d=s.split("_"),f=+d[0],b=ut(d[1])?+d[1]:l,C=t.isstacked(f)||t.isPercentChart,w=[],O=[];x[l]||(x[l]=[]);var S=Jl(e.map(function(e){var t=e.si,r=u.getParsedYAxisOrder(i[t].yaxiscolumnorder);if(C&&!Vr(f))for(var n=e.d.map(function(e){return e.groupByVal}),o=0;o<y.length;o++){var s=y[o],c=n.indexOf(s);if(0>c&&null!=s){var d=[];e.d.splice(o,0,d)}}var m=e.d.map(function(t){if(C&&!Vr(f)){for(var n=function(e){return a.getX(e)},o=t.map(n),s=0,c=p;c>s;s++){var d=g[s],y=o.indexOf(d);if(y>=0&&y!=s&&(t.splice(s,0,t[y]),t.splice(y+1,1),o=t.map(n)),"undefined"!=typeof o[s]&&v(o[s])&&t.splice(s,1),0>y){var m=[],b=u.getParsedYAxisOrder(i[e.si].yaxiscolumnorder);m.splice(a.xidx,0,d),m.splice(a.yidx(b),0,0),m.isDummy=!0,t.splice(s,0,m),o=t.map(n)}}p!=t.length&&t.splice(p,t.length-p)}return t.map(function(e){var t=a.getX(e),n=a.getY(e,r)||0,i=g.indexOf(t),o=0>n?O:w,s=o[i];return C?(s=ut(s)?s:h,e.y0=s,e.y=n,x[l][i]=s+n,o[i]=s+n):o[i]=ut(s)?(0>n?hl:ul)(s,n):n,e})});return m}));m[l]=rs(Jl([w,O,[0]]));var A=So.charttypenames.get(f);return C&&(n.datalabels.moduleExists&&(hi(r.chart.plot.plotoptions[A].datalabels.stackLabels,n)||fi(A,n))||al.test(r.metadata.axes.tooltip))&&(c.has(b)||c.set(b,{}),c.get(b).stackExtent=k(g,w,O)),S});return m=l.length>1?m:[rs(Jl(m))],(t.isStackedPercentChart||t.isPercentChart)&&(b.map(function(e,t){return e.map(function(e){return e.map(function(e){var r=g.indexOf(a.getX(e)),n=x[t][r]||0;return 1!=isNaN(n)&&null!=n&&0!=n&&(e.y0/=n/100,e.y/=n/100),e})})}),m[0][0]=0,m[0][1]=100),m}function k(e,t,a,r,n){var i=[];return e.forEach(r?function(e,o){t[o]>=0&&i.push([e,t[o],r[o]]),a[o]<0&&i.push([e,a[o],n[o]])}:function(e,r){t[r]>=0&&i.push([e,t[r]]),a[r]<0&&i.push([e,a[r]])}),i}function O(e){var t=e.systemConf,a=e.dataObject.totalnoofdatas,r=+t.canvas.intelligence.dataCount.datalabels;if(a>r)return!1;if(kd(t.chart,"plot.datalabels.show")===!0)return!0;for(var n=e.seriesdata,i=n.length;i--;){var o=t.chart.plot.plotoptions[e.chartTypes[i].name],l=o.datalabels;if(ut(n[i].plotoptions)&&(l=li(o,n[i].plotoptions)),ui(l,e))return!0}return!1}function S(e,t){var a=[],r=[];return e.data.forEach(function(e){var n=t.reduce(function(t,a){return t+e[a]},"");r.push(n),-1===a.indexOf(n)&&a.push(n)}),{distintGroupbyCat:a,allGroupbyCat:r}}function A(e,t){return t||(t=0),e.forEach(function(e){a(e[0])?t=A(e,t):t++}),t}function P(e,t,a){var r=ut(hd[e]),n=Od(hd[e],e,null);return ut(n)&&"solid"!==e?(t=r?Od(t,1):1,a&&(t*=a),n.split(",").map(function(e){return+e*t})):[]}function T(e,t){return e||(t&&/dot/g.test(t)?"round":null)}function E(e,t,a,r){var n=a.reduce(function(e,t){return t+e},0);e.attr("stroke-dasharray",a).attr("stroke-dashoffset",n).transition().duration(t).ease(Nl).attr("stroke-dashoffset",0).on("end",function(){r&&r.chartRendered&&E(e,t,a,r)})}function L(e){var t=e.systemConf,a=t.chart.effects.choice,r=vd[a];if(r){var n=t.chart.effects.options[a];"dropShadow"===a&&(n.blur=ul(0,n.blur));var i=fd.get(vd,a,n,{chartObj:e});return i}}function z(e,t,a,r){var n=e.type;if(n&&n!==Al){var i=e.options[n]||e.options,o=wd(i);return o.color=null!=a?a:o.color,o.opacity=null!=r?r:o.opacity,o.dimension=null!=t?t:o.dimension,o.type=n,o}}function D(e,t,a,r,n){var i=gd[e]?gd[e]:R(e);return i.bgClr_base=t,i.stroke_base=t,i.fillOpacity=i.fillOpacity||a,i.customStaticClr=n,r&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),i}function M(e,t){var a=t.map(function(t){var a=parseInt(t),r=e.width%a,n=parseInt(e.width/a)||1,i=r/n;return i+a});return a}function j(){So.addPattern("hatch","diagonal-line-right","5","1","null","white","1","1"),So.addPattern("hatchDash","square,diagonal-line-right","5,5","1","transparent,{{brighter}}","transparent,transparent","1","1","0,3"),So.addPattern("thinThickHatch","square,diagonal-line-right,diagonal-line-right","10,10,10","1,1,3","transparent,null,null","transparent","1","1","0,2.5,0"),So.addPattern("thickHatch","diagonal-line-right","5","3","null","white","1","1"),So.addPattern("thinHatch","diagonal-line-right","2","1","null","white","1","1"),So.addPattern("hatchLeft","diagonal-line-left","5","1","null","white","1","1"),So.addPattern("horizontalStripes","horizontal-line","5","1","null","white","1","1"),So.addPattern("thinHorizontalStripes","horizontal-line","2","1","null","white","1","1"),So.addPattern("verticalStripes","vertical-line","5","1","null","white","1","1"),So.addPattern("thinVerticalStripes","vertical-line","2","1","null","white","1","1"),So.addPattern("crossStripes","vertical-line,horizontal-line","5","1","null","white","1","1"),So.addPattern("tinyHatchfill","square,diagonal-line-right","5","1","transparent,{{brighter}}","null,transparent","1","1"),So.addPattern("hatchfill","square,diagonal-line-right","10","1","transparent,{{brighter}}","null,transparent","1","1"),So.addPattern("hatchDashfill","square,diagonal-line-right","5,5","1","transparent,{{brighter}}","null,transparent","1","1","0,3"),So.addPattern("hatchLeftfill","square,diagonal-line-left","5","1","transparent,{{brighter}}","null,transparent","1","1"),So.addPattern("horizontalStripesfill","square,horizontal-line","5","1","transparent,{{brighter}}","null,transparent","1","1"),So.addPattern("verticalStripesfill","square,vertical-line","5","1","transparent,{{brighter}}","null,transparent","1","1"),So.addPattern("crossStripesfill","square,square","5,5","1","transparent,{{brighter}}","null,transparent","1","1"),So.addPattern("checkerBoard","square,square,square","10,5,5","1","transparent","transparent,null,{{brighter}}","1","1","0,0,5"),So.addPattern("circle","circle","10","1","null","white","1","1"),So.addPattern("tinyCircle","circle","5","1","null","white","1","1"),So.addPattern("crossCircle","square,circle,circle","10,5,5","1","transparent,null,{{brighter}}","transparent","1","1","0,0,5"),So.addPattern("floatingCircle","square,circle","10,5","1","transparent,{{brighter}}","transparent","1","1","0,2.5"),So.addPattern("dot","square,circle","5,2.5","1","transparent,{{brighter}}","transparent,transparent","1","1","0,1.25"),So.addPattern("dotSquare","square,circle","10,2.5","1","null,{{brighter}}","transparent,transparent","1","1","0,3.75"),So.addPattern("circlefill","square,circle","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),So.addPattern("crossCirclefill","square,circle,circle","10,5,5","1","transparent,null,{{brighter}}","null,{{brighter}},null","1","1","0,0,5"),So.addPattern("floatingCirclefill","square,circle","10,5","1","transparent,{{brighter}}","null,transparent","1","1","0,2.5"),So.addPattern("dotfill","square,circle","5,2.5","1","transparent,{{brighter}}","null,transparent","1","1","0,1.25"),So.addPattern("square","square","5","1","null","white","1","1"),So.addPattern("squarefill","square","5","1","{{brighter}}","null","1","1"),So.addPattern("star","star","10","1","null","white","1","1"),So.addPattern("starfill","square,star","10,5","1","transparent,{{brighter}}","null,transparent","1","1"),So.addPattern("wave","waves","5","1","null","white","1","1"),So.addPattern("wavefill","square,waves","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),So.addPattern("cap","caps","5","1","null","white","1","1"),So.addPattern("capfill","square,caps","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),So.addPattern("nylon","nylon","5","1","null","white","1","1"),So.addPattern("nylonfill","square,nylon","10,10","1","transparent,{{brighter}}","null,transparent","1","1")}function R(e){return{ele:e}}function I(e,t,a,r,n){var i=n,o=t.bgClr||t.bgClr_base,l=it(e,o);t.ele=l.replace(/\\{\\{clr\\}\\}/g,o);var s,c=i.select("defs").append("pattern").attrs({patternUnits:r||"userSpaceOnUse",id:a,x:t.x||0,y:t.y||0}).html(t.ele);ud.FIREFOX?i.append("g").html(t.ele).each(function(){s=q(this)}).remove():s=q(c.node().firstChild);var d=s.width,u=s.height;return c.attrs({width:d,height:u}),{node:c,w:d,h:u,id:a}}function H(e,t,a,r){var n=r,i=e.bgClr||e.bgClr_base,o=e.stroke||e.stroke_base,l=/\\{\\{([a-z]+)\\}\\}/,s=(e.type||"").split(","),c=s.length,d=(e.size||"").split(","),u=(e.strokeWidth||"").split(","),h=i.split(","),f=o.split(","),g=(e.fillOpacity||"").split(","),p=(e.strokeOpacity||"").split(","),y=e.translate?e.translate.split(","):null;d=e.width?M(e,d):d;for(var v=n.select("defs").append("pattern").attrs({id:t,patternUnits:a||"userSpaceOnUse",width:d[0],height:d[0],x:e.x||0,y:e.y||0}),m=0;c>m;m++){var x=_(s[m])(d[m]||d[0]),b=ft(f[m]||f[0])?e.stroke_base:"static"==(f[m]||f[0])?e.customStaticClr:f[m]||f[0],C=ft(h[m]||h[0])?e.bgClr_base:"static"==(h[m]||h[0])?e.customStaticClr:h[m]||h[0],w=(d[m]||d[0])/2;if(b=l.test(b)?La(e.stroke_base,1,b.replace(l,"$1"),Kl):b,C=l.test(C)?La(e.bgClr_base,1,C.replace(l,"$1"),Kl):C,y){var k=y[m]||y[0];w+=parseFloat(k)}v.append("path").attrs({transform:"translate("+w+","+w+")",d:x,stroke:b,fill:C,"stroke-width":u[m]||u[0],"stroke-opacity":p[m]||p[0],"fill-opacity":g[m]||g[0]})}return{node:v,w:d[0],h:d[0],id:t}}function B(e,t){var a="<svg xmlns=\'http://www.w3.org/2000/svg\' xmlns:xlink=\'http://www.w3.org/1999/xlink\' width=\'"+e.w+"\' height=\'"+e.h+"\'>"+(new XMLSerializer).serializeToString(e.node.node())+"<path d=\'M-5,-5 L5,-5 L5,5 L-5,5 Z\' transform=\'translate("+e.w/2+","+e.h/2+")\' style=\'fill: url(#"+e.id+")\'></path> </svg>";return{url:ud.FIREFOX||t?"data:image/svg+xml;base64,"+sd(a):"data:image/svg+xml;utf8,"+a,width:e.w,height:e.h}}function F(e,t,a,r){"use strict";for(var n=V(e,t,a,r),i=0;i<n.offset.length;i++)e.append("stop").attr("offset",n.offset[i]).styles({"stop-color":n.color[i],"stop-opacity":n.opacity[i]})}function V(e,t,a,r){"use strict";var n=t.stopOffset,i=t.stopOpacity,o=t.stopColor,l=t.colorGamma||[1,0],s=t.spreadMethod,c="radial"==r?+t.radius:ul(fl((+t.x2||0)-(+t.x1||0)),fl((+t.y2||0)-(+t.y1||0)));if(n=n||["0%","100%"],o=("function"==typeof o?o(a):o)||n.map(function(e,t){return La(a,l[t]||0,"brighter",Kl)}),i=i||[1,1],("repeat"===s||"reflect"===s)&&(ud.IS_IOS||ud.SAFARI)){for(var d=[],u=[],h=[],f=0,g=0;100>f;){for(var p=0,y=n.length;y>p;p++){var v=hl(parseFloat(n[p])/100*c+f,100);d.push(v+"%"),h.push(g%2!=0?i[i.length-1-p]:i[p]),u.push(g%2!=0?o[o.length-1-p]:o[p])}f+=c,g+="reflect"===s?1:0}n=d,o=u,i=h}return{offset:n,color:o,opacity:i}}function N(e,t,a,r,n,i){var o,l,s,c,d=parseInt(r/10)*n,u=r%10,h=e,f=0==u?i-d+t:i-(d+n)+t,g=u*n+e,p=f,y=g,v=0==u?f:f+n,m=i+e,x=v;switch(a){case"top2Bottom":o=i+e,l=t,s=e,c=t;break;case"bottom2Top":o=i+e,l=i+t,s=e,c=i+t}var b=h+","+f+" "+g+","+p+" "+y+","+v+" "+m+","+x+" "+o+","+l+" "+s+","+c+" "+h+","+f;return b}function _(e){return function(t){switch(e){case"asterisk":return"M0 0 C"+t*-.25+" "+t*-.65+" "+.25*t+" "+t*-.65+" 0 0 C"+.5*t+" "+t*-.633+" "+.65*t+" "+t*-.117+" 0 0 C"+.583*t+" "+.083*t+" "+.583*t+" "+.65*t+" 0 0 C"+.25*t+" "+.65*t+" "+t*-.25+" "+.65*t+" 0 0 C"+t*-.617+" "+.65*t+" "+t*-.55+" "+.017*t+" 0 0 C"+t*-.483+" "+t*-.05+" "+t*-.583+" "+t*-.717+" 0 0 Z";case"bean":return"M0 "+.5*t+" A"+.25*t+" "+.5*t+" 0 0 1 0 "+.5*-t+" A"+.15*t+" "+.25*t+" 0 0 1 1 0 A"+.15*t+" "+.25*t+" 0 0 1 0 "+.5*t;case"butterfly":return"M0 "+.25*-t+" C0 "+.25*-t+" "+.85*t+" "+-t+" "+.3*t+" "+.25*t+" C"+.6*t+" "+.7*t+" 0 "+.4*t+" 0 "+.4*t+" M0 "+.25*-t+" C0 "+.25*-t+" "+.85*-t+" "+-t+" "+.3*-t+" "+.25*t+" C"+.6*-t+" "+.7*t+" 0 "+.4*t+" 0 "+.4*t+" M0 "+.25*-t+" L"+.1*t+" "+.55*-t+" M0 "+.25*-t+" L"+.1*-t+" "+.55*-t;case"clover":return"M"+.033*t+" "+t*-.033+" C"+t*-.133+" "+t*-.966+" "+1.066*t+" "+t*-.116+" "+.1*t+" "+.033*t+" C"+.933*t+" "+.233*t+" "+t*-.133+" "+.9*t+" "+.016*t+" "+.083*t+" C"+t*-.633+" "+.6*t+" "+t*-.6+" "+t*-.6+" "+.033*t+" "+t*-.033+" Z";case"cloverFour":return"M"+.05*-t+" "+.05*-t+" C"+.4*-t+" "+.6*-t+" "+.4*t+" "+.6*-t+" "+.05*t+" "+.05*-t+" C"+.6*t+" "+.4*-t+" "+.6*t+" "+.4*t+" "+.05*t+" "+.05*t+" C"+.4*t+" "+.6*t+" "+.4*-t+" "+.6*t+" "+.05*-t+" "+.05*t+" C"+.6*-t+" "+.4*t+" "+.6*-t+" "+.4*-t+" "+.05*-t+" "+.05*-t+" Z";case"cross":return"M"+-t/2+" "+.2*-t+" L"+.2*-t+" "+.2*-t+" L"+.2*-t+" "+-t/2+" L"+.2*t+" "+-t/2+" L"+.2*t+" "+.2*-t+" L"+t/2+" "+.2*-t+" L"+t/2+" "+.2*t+" L"+.2*t+" "+.2*t+" L"+.2*t+" "+t/2+" L"+.2*-t+" "+t/2+" L"+.2*-t+" "+.2*t+" L"+-t/2+" "+.2*t+" Z";case"diamond":return"M"+.4*-t+" 0 L0 "+-t/2+" L"+.4*t+" 0 L0 "+t/2+" Z";case"ellipse":return"M"+.5*-t+" 0 A"+.5*t+" "+.35*t+" 0 0 1 "+.5*t+" 0 A"+.5*t+" "+.35*t+" 0 0 1 "+.5*-t+" 0";case"gear":return"M"+t*-.088+" "+t*-.365+" L"+t*-.084+" "+t*-.471+" L"+.092*t+" "+t*-.471+" L"+.097*t+" "+t*-.369+" L"+.194*t+" "+t*-.317+" L"+.27*t+" "+t*-.386+" L"+.409*t+" "+t*-.263+" L"+.339*t+" "+t*-.189+" L"+.364*t+" "+t*-.088+" L"+.478*t+" "+t*-.088+" L"+.478*t+" "+.097*t+" L"+.369*t+" "+.097*t+" L"+.325*t+" "+.192*t+" L"+.394*t+" "+.265*t+" L"+.254*t+" "+.396*t+" L"+.197*t+" "+.325*t+" L"+.092*t+" "+.364*t+" L"+.092*t+" "+.476*t+" L"+t*-.084+" "+.476*t+" L"+t*-.084+" "+.364*t+" L"+t*-.185+" "+.32*t+" L"+t*-.263+" "+.394*t+" L"+t*-.388+" "+.26*t+" L"+t*-.317+" "+.192*t+" L"+t*-.354+" "+.097*t+" L"+t*-.473+" "+.097*t+" L"+t*-.473+" "+t*-.091+" L"+t*-.356+" "+t*-.091+" L"+t*-.317+" "+t*-.189+" L"+t*-.384+" "+t*-.258+" L"+t*-.267+" "+t*-.384+" L"+t*-.184+" "+t*-.312+" L"+t*-.088+" "+t*-.365+" Z";case"heart":return"M0 "+.2*-t+" C"+.65*t+" "+.65*-t+" "+.65*t+" "+.2*t+" 0 "+.45*t+" C"+.65*-t+" "+.2*t+" "+.65*-t+" "+.65*-t+" 0 "+.2*-t+"Z";case"star":return"M0 "+.5*-t+" L"+.122*t+" "+.12*-t+" L"+.5*t+" "+.12*-t+" L"+.197*t+" "+.12*t+" L"+.306*t+" "+.5*t+" L0 "+.274*t+" L"+.306*-t+" "+.5*t+" L"+.197*-t+" "+.12*t+" L"+.5*-t+" "+.12*-t+" L"+.122*-t+" "+.12*-t+" Z";case"malteseCross":return"M"+.3*-t+" "+.4*-t+" A"+.3*t+" "+.1*t+" 0 0 1 "+.3*t+" "+.4*-t+" L"+.2*t+" "+.2*-t+" L"+.4*t+" "+.3*-t+" A"+.1*t+" "+.3*t+" 0 0 1 "+.4*t+" "+.3*t+" L"+.2*t+" "+.2*t+" L"+.3*t+" "+.4*t+" A"+.3*t+" "+.1*t+" 0 0 1 "+.3*-t+" "+.4*t+" L"+.2*-t+" "+.2*t+" L"+.4*-t+" "+.3*t+" A"+.1*t+" "+.3*t+" 0 0 1 "+.4*-t+" "+.3*-t+" L"+.2*-t+" "+.2*-t+" Z";case"square":return"M"+.5*-t+" "+.5*-t+" L"+.5*t+" "+.5*-t+" "+.5*t+" "+.5*t+" "+.5*-t+" "+.5*t+" Z";case"triangle-up":return"M"+.5*-t+" "+.285*t+" L0 "+.43*-t+" "+.5*t+" "+.285*t+" Z";case"triangle-down":return"M0 "+.43*t+" "+.5*-t+" "+.285*-t+" "+.5*t+" "+.285*-t+" Z";case"triangle-right":return"M"+.5*-t+" "+.43*-t+" "+.285*t+" 0 "+.5*-t+" "+.43*t+" Z";case"triangle-left":return"M"+.5*t+" "+.43*t+" "+.285*-t+" 0 "+.5*t+" "+.43*-t+" Z";case"arrow":return"M"+.5*-t+" "+.2*t+" L0 "+.5*-t+" "+.5*t+" "+.2*t+" "+.25*t+" "+.2*t+" "+.25*t+" "+.5*t+" "+.25*-t+" "+.5*t+" "+.25*-t+" "+.2*t+" Z";case"rocket":return"M"+.5*-t+" "+.5*t+" L0 "+.5*-t+" "+.5*t+" "+.5*t+" 0 "+.25*t+" "+.5*-t+" "+.5*t+" Z";case"nylon":return"M"+-t/2+" "+-t/4+" L"+-t/4+" "+-t/4+" L"+-t/4+" "+-t/2+" M"+-t/4+" 0 L"+-t/4+" "+t/4+" L0 "+t/4+" M0 "+-t/4+" L"+t/4+" "+-t/4+" L"+t/4+" 0 M"+t/4+" "+t/2+" L"+t/4+" "+t/4+" L"+t/2+" "+t/4;case"waves":return"M"+-t+" 0 C"+7*-t/8+" "+-t/4+" "+5*-t/8+" "+-t/4+" "+-t/2+" 0 C"+3*-t/8+" "+-t/4+" "+-t/8+" "+-t/4+" 0 0 C"+t/8+" "+t/4+" "+3*t/8+" "+t/4+" "+t/2+" 0 C"+5*t/8+" "+-t/4+" "+7*t/8+" "+-t/4+" "+3*t/4+" 0";case"woven":return"M"+-t/4+" "+-t/4+" L"+t/4+" "+t/4+" M"+t/4+" "+-t/4+" L"+t/2+" "+-t/2+" M"+-t/4+" "+t/4+" L"+-t/2+" "+t/2+" M"+t/4+" "+3*t/4+" L"+3*t/4+" "+t/4;case"crosses":return"M "+-t/4+" "+-t/4+" L"+t/4+","+t/4+" M"+-t/4+","+t/4+" L"+t/4+","+-t/4;case"caps":return"M"+-t/4+" "+t/4+" L0 "+-t/4+" "+t/4+" "+t/4;case"hexagons":return"M"+-t/2+" 0 L"+-t/4+" 0 M"+t/2+" 0 L"+t/4+" "+-t/2+" L0 "+-t/2+" L"+-t/4+" 0 L0 "+t/2+" L"+t/4+" "+t/2+"Z";case"line":case"horizontal-line":return"M"+.5*-t+" 0 L"+.5*t+" 0";case"diagonal-line-right":return"M"+3*-t/4+" "+-t/4+" L"+-t/4+" "+3*-t/4+" M"+-t/2+" "+t/2+" L"+t/2+" "+-t/2+" M"+t/4+" "+3*t/4+" L"+3*t/4+" "+t/4;case"vertical-line":return"M0 "+-t/2+" L0 "+t/2;case"hexagon":return"M"+.433*t+" "+.25*t+" L"+0*t+" "+.5*t+" L"+t*-.433+" "+.25*t+" L"+t*-.433+" "+t*-.26+" L"+0*t+" "+t*-.5+" L"+.433*t+" "+t*-.26+" Z";case"diagonal-line-left":return"M"+3*-t/4+" "+-t/2+" L"+-t/4+" "+t/2+" M"+-t/4+" "+-t/2+" L"+t/4+" "+t/2+" M"+t/4+" "+-t/2+" L"+3*t/4+" "+t/2;case"oval":return"M"+-t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 0 "+-t/2+" A"+t/2+" "+t/2+" 0 0 1 "+-t/2+" 0";case"rect":var a=arguments[0],r=arguments[1]||0;return"M"+-a/2+" "+-r/2+" L"+a/2+" "+-r/2+" L"+a/2+" "+r/2+" L"+-a/2+" "+r/2+"Z";case"ninja":return"M"+t*-.267+" "+t*-.367+" L"+.167*t+" "+t*-.133+" L"+.433*t+" "+t*-.267+" L"+.2*t+" "+.167*t+" L"+.333*t+" "+.433*t+" L"+t*-.1+" "+.167*t+" L"+t*-.367+" "+.333*t+" L"+t*-.167+" "+t*-.1+" Z";default:return"M"+-t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 "+t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 "+-t/2+" 0"}}}function W(e,t,a,r,n){var i,o=r.color,l=10,s=r.strokeWidth,c=r.imageSize,d=r.transform,u=_(a.symbol||r.symbol),h=null!=a.imageUrl&&""!==a.imageUrl,f=lt(a.size,lt(s,1)),g=f*r.symbolSize.outer,p=f*r.symbolSize.inner,y=null!=d?"translate("+d[0]+","+d[1]+")":null,v=(null!=t?f:g)*(null!=c?c:l);if(null!=t){var m=n.getPatternSvg().select("defs");i=Qt(m,"marker",[1],"#","id",t),i.attrs({id:t,orient:0,viewBox:-f*l/2+" "+-f*l/2+" "+f*l+" "+f*l,markerUnits:"userSpaceOnUse",markerWidth:f*l,markerHeight:f*l})}else i=e;var x=Qt(i,"path",[1],".","class","outer");x.attrs({d:u(h?v:g*l),transform:y}).styles({fill:function(){if(h){var e={name:a.imageUrl,width:v,height:v,x:-v/2,y:-v/2};return"url("+tt()+"#"+fd.get(pd,"imageFill",e,{chartObj:n})+")"}return a.outerFillColor||o},"fill-opacity":a.outerFillOpacity,stroke:a.outerStrokeColor||o,"stroke-opacity":a.outerStrokeOpacity,"stroke-width":a.outerStrokeWidth,"stroke-dasharray":P(a.outerDashStyle,a.outerStrokeWidth),"stroke-linecap":T(a.outerLineCap,a.outerDashStyle)});var b=Qt(i,"path",h?[]:[1],".","class","inner");return b.attrs({d:u(p*l),transform:y}).styles({fill:a.innerFillColor||o,"fill-opacity":a.innerFillOpacity,stroke:a.innerStrokeColor||o,"stroke-opacity":a.innerStrokeOpacity,"stroke-width":a.innerStrokeWidth,"stroke-dasharray":P(a.innerDashStyle,a.innerStrokeWidth),"stroke-linecap":T(a.innerLineCap,a.innerDashStyle)}),i}function Y(e){var t={left:0,top:0,right:0,bottom:0};if(!e.isAxisCategory)return t;var a=e.systemConf.chart.axes.xaxis,r=e.systemConf.chart.axes.yaxis,n=null!=a.minRange&&""!==a.minRange,i=null!=a.maxRange&&""!==a.maxRange,o=r.some(function(e){return null!=e.minRange&&""!==e.minRange}),l=r.some(function(e){return null!=e.maxRange&&""!==e.maxRange});if(n&&i&&o&&l)return t;var s=e.axes.rotated,c=(e.dataset.seriesTypes,e.systemConf.chart.plot.plotoptions),d=e.canvasarea,u=Bl(e.seriesdata.map(function(t,a){var r=t.plotoptions,n=0,i=e.chartTypes[a].name,o=So.utils.getValueOfPlotOptions(r?r.marker:null,c[i].marker);if(/(area|arearange|line)/.test(i)&&o("enabled")&&xa(e,"marker")&&ma(e,"marker",hl(d.width,d.height))){var l=o("size");n=lt(l,lt(r?r.strokeWidth:c[i].strokeWidth,1))}else i===Rc&&(n=lt(o("size"),2));return 10*n}))/2;return{left:(s?o:n)?t.left:u,top:(s?i:l)?t.top:u,right:(s?l:i)?t.right:u,bottom:(s?n:o)?t.bottom:u}}function X(e,t,a){if(ud.IE&&t.enabled)return void U(e,t);var r={animation:El,opacity:El,transform:El};if(!t.enabled)return void e.styles(r);var n=ut(t.repeat)?t.repeat:"infinite",i=t.type||"twinkle",o=(t.duration||800)/1e3,l=("fade"===i?250:0)/1e3,s=t.easingType||"linear",c=Rl(Ut(a.container.node())).selectAll("div.__baseZC_Container__"),d=Qt(c,"style",[1]),u=d.node(),h="",f="ZC"+Z(t,"blink");switch(i){case"twinkle":h="\\n@keyframes "+f+" { 0% {transform: scale(1);}50% {transform: scale(0);}100% {transform: scale(1);} }\\n";break;case"fade":h="\\n@keyframes "+f+" { 0% {transform: scale(0);opacity: 1;}100% {transform: scale(1);opacity: 0;} }\\n",e.styles({transform:"scale(0)",opacity:1})}So[f]||(u.innerHTML+=h,So[f]=!0),e.style("animation",f+" "+o+"s "+s+" "+l+"s "+n).on("animationend",function(){d3.select(this).styles(r)})}function U(e,t,a){var r=ut(a)?a-1:t.repeat||1/0;if(!e.node()||!r)return void e.styles({transform:null,opacity:null});var n=(t.type||"twinkle")===Ks,i=(t.duration||800)/2,o=Vl(t.easingType),l=i,s=n?500:0,c=n?0:i,d=n?{transform:"scale(1)",opacity:0}:{transform:"scale(0)"},u=n?{transform:"scale(0)",opacity:1}:{transform:"scale(1)"};e.transition(),e.attrs(u).transition().delay(s).duration(l).ease(o).attrs(d).transition().duration(c).ease(o).attrs(u).on("end",function(){X(e,t,r)})}function G(e,t){e.attr("x",t.left).attr("y",t.top).attr("width",t.width).attr("height",t.height).style("fill-opacity",0).style("stroke",Pl)}function Z(e,t){if(null!=e&&e.constructor==Object){var a,r="";for(var i in e)e.hasOwnProperty(i)&&(a=e[i],a&&a.constructor===Object&&(a=n(a)),r+=null==a||""==a?"$$":a+"_");return r=t+r,r=r.replace(/[.-]/g,"_"),r=r.replace(/[`~!@#$%^&*( )|+\\-=?;:\'",.<>{}[\\]\\\\\\/\\s]/gi,"_")}return null!=t?t:void 0}function Q(e,t,a){var r=Kl(e),n=Yl().domain([-1,0,1]).range([Kl(r.h,r.s,.1),r,Kl(r.h,r.s,.9)]).interpolate(ms),i=Yl().domain(t).range(a);return function(e){return n(i(e))}}function q(e){return e&&Xt(e)?e.getBBox():{x:0,y:0,height:0,width:0}}function K(e){if(!So.dataEncoded||null==e)return e;var t=document.createElement("div");t.innerHTML=encodeURI(e);var a=t.textContent;return decodeURI(a)}function $(e){if(So.dataEncoded||null==e)return e;var t=document.createElement("div");t.textContent=K(e);var a=t.innerHTML;return a}function J(e){var t=/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)/g,a=/[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)?/gi,r=new RegExp(t),n=new RegExp(a);return e.match(r)||e.match(n)}function et(e){return e.slice(0)}function tt(){return Il("base").node()?location.href.split(location.search||location.hash||/[?#]/)[0]:""}function at(e,t,a){var r=t.replace(/\\[(\\w+)\\]/g,".$1");r=r.replace(/^\\./,"");var n=r.split("."),i=n.reduce(function(e,t){return ut(e)?e[t]:e},e);return a?i:ut(i)}function rt(e){return!ut(e)}function nt(e){return Array.prototype.slice.call(e)}function it(){var e=nt(arguments),t=e[0]===!0&&e.shift(),a=e.shift();if("string"==typeof a){var r=kd(window,a);a="function"==typeof r?r:a}return"function"==typeof a?t?a.apply(e[0],e.splice(1)):a.apply(void 0,e):a}function ot(e,t){for(var a,r=0,n=e.length;n>r&&(null==a||""===a);r++)e[r]&&(a=e[r][t]);return a}function lt(e,t){var a=null==e||""===e?t:e,r=JSON.parse(a);return a="number"==typeof r?parseFloat(r):"boolean"==typeof r?JSON.parse(r):r}function st(e,t,a,r,n,i){var o,l=hl(n,i),s=r*l/100,c=a*l/100;return o=e[t],o=null==o||""===o?null:c>o?c:o>s?s:parseFloat(o)}function ct(e,t){var a=t[0],r=t[1];return a>e||e>r?!1:!0}function ut(e){return void 0!==e&&null!==e}function ht(e){return e>0}function ft(e){return null==e||"null"==e}function gt(e){return e+"".toLocaleLowerCase()==="true"}function pt(e){return e+="",e.replace(/ /g,"px ")+"px"}function yt(e,t){if(!e||!t)return null;var a,r={};for(var n in e)if(e.hasOwnProperty(n)&&t.hasOwnProperty(n)){var i=e[n],o=t[n];if(!i||i.constructor!=Object&&i.constructor!=Array)i==o&&(r[n]=i,a=!0);else{var l=yt(i,o);null!=l&&(r[n]=l,a=!0)}}return a?r:null}function vt(e){var t=$l(e);return(299*t.r+587*t.g+114*t.b)/1e3<128}function mt(e){return vt(e)?"#f8f8f8":"#444444"}function xt(e){return null!=e&&e===e.window}function bt(e){return xt(e)?e:9===e.nodeType&&e.defaultView}function Ct(e){var t=e.getBoundingClientRect(),a=e&&e.ownerDocument,r=a.documentElement,n=bt(a);return{top:t.top+n.pageYOffset-r.clientTop,left:t.left+n.pageXOffset-r.clientLeft}}function wt(e){return e?e.split(",").reverse().join():e}function kt(){return ut(document.visibilityState)&&"visible"!==document.visibilityState}function Ot(e,t,a){var r=t.offsetHeight,n=Ct(e).top-Ct(t).top,i=n+e.offsetHeight;return n>=0&&r>=i||a&&(0>n&&i>0||n>0&&r>=n)}function St(e,t,a,r,n,i,o,l,s,c){var d="wrapOnSpace"==l||"wrapAll"==l;return e.map(function(e){var u;return u=t(a,e,n,r,i,null,null,o),u=d?br(u,l,s.horizontal,s.vertical,c):u})}function At(e){return e.slice(0).sort(function(e,t){return ut(e)||(e=""),ut(t)||(t=""),t.length-e.length})}function Pt(e){return null===e.offsetParent}function Tt(e,t){if("object"!=typeof e)return!1;if(a(e)||"number"==typeof e.length)Array.prototype.forEach.call(e,t);else for(var r in e)e.hasOwnProperty(r)&&t(e[r],r,e)}function Et(e){if(arguments[1]){for(var t=1,a=arguments.length;a>t;t++){var r=arguments[t];for(var n in r)!e[n]&&r.hasOwnProperty(n)&&(e[n]=r[n])}return e}}function Lt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);var a=e.prototype;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),Et(e.prototype,a)}function zt(e,t){var a=e.indexOf(t);return a>-1&&e.splice(a,1),e}function Dt(e,a,r){var n;return e.isD3Selection&&(e=e.node()),"width"===a?hl(e.offsetWidth,e.scrollWidth)-Dt(e,"padding-left")-Dt(e,"padding-right"):"height"===a?hl(e.offsetHeight,e.scrollHeight)-Dt(e,"padding-top")-Dt(e,"padding-bottom"):(n=window.getComputedStyle(e),n&&(n=n.getPropertyValue(a),Od(r,"opacity"!==a)&&(n=t(n))),n)}function Mt(e){return e instanceof HTMLElement}function jt(e){return a(e)?e:[e]}function Rt(e){var a,r,n,i;if(ut(e)){var o=e.toString().split(" "),l=So.DataProcessor.helpers.priorityBasedValue;a=t(l([o[0],0])),r=t(l([o[1],o[0],0])),n=t(l([o[2],o[0],0])),i=t(l([o[3],o[1],o[0],0]))}else a=0,r=0,n=0,i=0;return{top:a,right:r,bottom:n,left:i}}function It(e){var a={},r=null!=e?e.toString().split("/"):null,n=null!=r&&null!=r[0]?r[0].split(" "):[],i=null!=r&&null!=r[1]?r[1].split(" "):n,o=So.DataProcessor.helpers.priorityBasedValue;return a.tlx=t(o([n[0]])),a.tly=t(o([i[0],n[0]])),a.trx=t(o([n[1],n[0]])),a.trY=t(o([i[1],i[0],n[1],n[0]])),a.brx=t(o([n[2],n[0]])),a.bry=t(o([i[2],i[0],n[2],n[0]])),a.blx=t(o([n[3],n[1],n[0]])),a.bly=t(o([i[3],i[1],n[3],n[0]])),a}function Ht(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Bt(e){var t=e.canvas,a=Od(window.devicePixelRatio,1);return t.style.width=t.width+"px",t.style.height=t.height+"px",t.setAttribute("width",t.width*a),t.setAttribute("height",t.height*a),e.scale(a,a),e}function Ft(e,t){if(Array.prototype.find)return e.find(t);for(var a=e.length>>>0,r=0;a>r;){var n=e[r];if(t.call(t,n,r,e))return n;r++}return void 0}function Vt(e,t,a){e.splice(a,0,e.splice(t,1)[0])}function Nt(e){return e.getRootNode?e.getRootNode():null!=e.parentNode?Nt(e.parentNode):e}function _t(e){return Wt(Nt(e))}function Wt(e){return"#document-fragment"===e.nodeName&&"ShadowRoot"===e.constructor.name}function Yt(e){return _t(e)||document.body.contains(e)}function Xt(e){return Yt(e)&&d3.select(e).style("display")!==Al}function Ut(e){var t=Nt(e);\nif(Wt(t)){var a="_zc_fakeBody",r=t.querySelector("."+a);return r||(r=document.createElement("div"),r.className=a,t.appendChild(r)),r}return document.body}function Gt(e){return Nt(e).ZC_DOCUMENT_INDEX}function Zt(e){if(e.isD3Selection&&(e=e.node()),ut(e)&&Xt(e))return e.getBoundingClientRect();var t={};return t.x=t.y=t.width=t.height=t.top=t.left=t.right=t.bottom=0,t}function Qt(e,t,a,r,n,i,o,l){r=r||"",i=i||"";var s;s=e.selectAll(t+r+i).data(a,l);var c=s.enter().append(t).merge(s);return n&&c.attr(n,i),o&&c.styles(o),s.exit().remove(),c}function qt(e,t,a,r,n,i,o,l,s,c){if(null==t||!t.trim()||!e)return t;var d,u;s=s||e,l?(d=l.width,u=l.height):(d=r.right-r.left,u=r.bottom-r.top);var h=0;if("left"==n||"right"==n?(a.top+a.height-o.bottom>r.bottom&&(h+=(a.top+a.height-o.bottom-r.bottom)/a.height),a.top+o.top<r.top&&(h+=(r.top-(a.top+o.top))/a.height),u=a.height-ul(0,a.top+a.height-o.bottom-r.bottom)-ul(0,r.top-(a.top+o.top))):("bottom"==n||"top"==n)&&(a.left+a.width-o.right>r.right&&(h+=(a.left+a.width-o.right-r.right)/a.width),a.left+o.left<r.left&&(h+=(r.left-(a.left+o.left))/a.width),d=a.width-ul(0,a.left+a.width-o.right-r.right)-ul(0,r.left-(a.left+o.left))),h=parseFloat(h.toFixed(2)),h>0){var f=dl((1-h)*t.length);e.textContent=t.substring(0,f-1)+i;var g="tspan"==s.nodeName?vr:mr,p=g(s);c="tspan"==e.nodeName?!1:c,c===!1||p.width==a.width&&p.height==a.height||ra(e,s,t,d,u,p,i)}}function Kt(e,t,a,r){for(var n,i=e.split(/\\s+/).reverse(),o=[],l=[],s=r,t=t;n=i.pop();){o.push(n);var c=Ld.getTextWidth(o.join(" "));if(c>t){if(o.length>1&&(o.pop(),l.pop(),l.push(o.join(" "))),s>a)return l;s+=r,o=[n],l.push(n)}else l.pop(),l.push(o.join(" "))}return l}function $t(e){e.isD3Selection&&(e=e.node());var t=e.transform.baseVal.consolidate(),a=ut(t)?t.matrix:null;if(ut(a)){var r,n,i,o=a.a,l=a.b,s=a.c,c=a.d,d=a.e,u=a.f;return(r=pl(o*o+l*l))&&(o/=r,l/=r),(i=o*s+l*c)&&(s-=o*i,c-=l*i),(n=pl(s*s+c*c))&&(s/=n,c/=n,i/=n),l*s>o*c&&(o=-o,l=-l,i=-i,r=-r),{translate:[d,u],skew:[180*bl(l,o)/kl,180*Math.atan(i)/kl],rotate:180*bl(l,o)/kl,scale:[r,n]}}return{translate:[0,0],skew:[0,0],rotate:0,scale:[0,0]}}function Jt(e,t,a,r,n,i,o){var l,s,c,d;return l=i&&o?e-a:e,s=i&&o?e:e+a,c=i&&!o?t-r:t,d=i&&!o?t:t+r,n=ea(n,a,r),"M"+l+","+(d-n.bly)+"L"+l+","+(c+n.tly)+"A"+(n.tlx+","+n.tly+" 0 0 1 "+(l+n.tlx)+","+c)+"L"+(s-n.trx)+","+c+"A"+(n.trx+","+n.trY+" 0 0 1 "+s+","+(c+n.trY))+"L"+s+","+(d-n.bry)+"A"+(n.brx+","+n.bry+" 0 0 1 "+(s-n.brx)+","+d)+"L"+(l+n.blx)+","+d+"A"+(n.blx+","+n.bly+" 0 0 1 "+l+","+(d-n.bly))+"Z"}function ea(e,t,a,r){var n,i=Object.create(e),o=i.tlx+i.trx,l=i.trY+i.bry,s=i.brx+i.blx,c=i.tly+i.bly;return c>a&&(n=c/(c-a),i.tly=i.tly-i.tly/n,i.bly=i.bly-i.bly/n),o>t&&(n=o/(o-t),i.tlx=i.tlx-i.tlx/n,i.trx=i.trx-i.trx/n),l>a&&(n=l/(l-a),i.trY=i.trY-i.trY/n,i.bry=i.bry-i.bry/n),s>t&&(n=s/(s-t),i.brx=i.brx-i.brx/n,i.blx=i.blx-i.blx/n),r&&(i.tlx=i.tly=Math.min(i.tlx,i.tly),i.trx=i.trY=Math.min(i.trx,i.trY),i.blx=i.bly=Math.min(i.blx,i.bly),i.brx=i.bry=Math.min(i.brx,i.bry)),i}function ta(e,t,a){var r=So.utils.getVal(ot(t,"fontSize")),n=ot(t,"fontFamily"),i=ot(t,"fontWeight"),o=ot(t,"fontStyle"),l=ot(t,"textShadow"),s=ot(t,"fontColor"),c=ot(t,"textDecoration"),d=ot(t,"strokeColor"),u=ot(t,"fontOpacity"),h={"font-size":r+"px","font-family":n,"font-weight":i,"font-style":o,"text-shadow":l,"text-decoration":c,"fill-opacity":u};return ut(e)?(h[a?"color":"fill"]=s,a||!d||ud.IE||(h.stroke=d,h["stroke-width"]=ot(t,"strokeWidth")||3,h["paint-order"]="stroke"),e.styles(h),void 0):(h.color=s,h)}function aa(e,t){e.append("title").text(function(){return t||this.parentNode.textContent})}function ra(e,t,a,r,n,i,o){function l(r){var n="tspan"==e.nodeName?vr:mr;e.textContent=a.substring(0,s-c)+o,r&&(i=n(t))}var s=e.textContent.length-1,c=o.length;if(i.width>r||i.height>n)for(var d=0;s>=d;){if(l(!0),i.width<=r&&i.height<=n)return;s--}else for(var d=a.length;d>s;){if(i.width>=r||i.height>=n)return s--,void l(!1);s++}}function na(e){var t=e.match(/[a-z][^a-z]*/gi);return t.map(function(e){var t=e.match(/[a-z]/gi).pop(),a=e.match(/-?[0-9]\\d*(\\.\\d+)?/g);return a&&(a=a.map(function(e){return parseFloat(e)})),{"function":t,moves:a}})}function ia(e,t,r,n){var i=a(t)&&t.length>1,o=n?"html":"text",l=d3.select(e.node().parentNode);if(i){e.text(null);var s=e.attr("x")||0,c=e.attr("y")||0,d=e.attr("dy")?parseFloat(e.attr("dy")):.71,u=0,h=ut(r)&&ut(r.lineHeight)?r.lineHeight:d,f=ut(r)&&r.orient;h="top"==f?-(t.length-1+h):"left"==f||"right"==f?-(t.length-2+h)/2:h,t.forEach(function(t){if(n)oa(l,e,t);else{var a=e.append("tspan");a.attr("x",s).attr("y",c).attr("dy",function(){return u++ +h+"em"}),a[o](function(){return t})}})}else n?(e.text(null),oa(l,e,t)):e[o](t);return e}function oa(e,t,a){var r=/^<image.+<\\/image>/i,n=/^<tspan.+<\\/tspan>/i;if(r.test(a))Qt(e,"g",[1],".","class","image").html(a);else if(n.test(a)){var i=(new DOMParser).parseFromString(\'<svg xmlns="\'+d3.namespaces.svg+\'">\'+a+"</svg>","application/xml");t.node().appendChild(i.querySelector("tspan"))}else t.append("tspan").text(a)}function la(e){var t=e.selectAll("tspan").nodes();if(t&&t.length){var a=[];return t.forEach(function(e){a.push(e.textContent)}),a}return e.node().textContent}function sa(e){e.isD3Selection&&(e=e.node());for(var t=e.ownerSVGElement,a=[0,0];e!==t;){var r=$t(e).translate;a[0]+=r[0],a[1]+=r[1],e=e.parentNode}return a}function ca(e,t,a,r,n){r||(r=d3.select("body"));var i,o,l,s={".":"class","#":"id"};if(/^[.#]/.test(t)&&(l=t[0],o=t.slice(1),i=s[l]),n){var c=r.selectAll(e+t).data(a),d=c.enter().insert(e,n).merge(c);return c.exit().remove(),d.attr(i,o)}return Qt(r,e,a,l,i,o)}function da(e,t){var a=t.systemConf;return+So.utils.getVal(ot([e,a.chart.plot.datalabels,a.chart,a.canvas],"fontSize"))}function ua(e,t){var a=t.systemConf;return So.utils.getVal(ot([e,a.chart,a.canvas,dd],"fontFamily"))}function ha(e,t,a,r){function n(){return/(bar|bullet|gantt|waterfall)/.test(r)?300:/(line|area|arearange)/.test(r)?600:/(scatter|bubble$|funnel|pyramid|heatmap)/.test(r)?1e3:500}var i=t&&t.animation?Cd(e.animation,t.animation,!0):e.animation,o=a.systemConf.chart.plot.animation,l={},s=i.easingType||o.easingType||(/(scatter|bubble$|packedbubble|heatmap)/.test(r)?"cubic-in-out":null)||"linear";return l.enabled=kt()||a.isHiddenCoainer?!1:xa(a,"animation")?ot([i,o],"enabled"):!1,l.type=i.type,l.easingType=Vl(s),l.duration=l.enabled?lt(i.duration,+(o.duration||n())):0,l}function fa(e,t,a,r,n,i,o,l,s,c,d){function u(){if(p++,h)for(var n=0;y>n;n++)e[n]=a[p>n?n:ul(0,p-1)],t[n]=a[p>n?n:p];else e[p-1]=a[p-1],t[p]=a[p];if(y>p){var o=1==p&&h?(r.indexOf(f.getX(a[0]))-(p-1))*m:0,l=(h?r.indexOf(f.getX(a[p]))-r.indexOf(f.getX(a[p-1])):1)*m,v=h?null!=f.getY(a[p],g)&&null!=f.getY(a[ul(0,p-1)],g):null!=f.getY(a[p],g);v?c.attrs(s(e)).transition().delay(o).duration(l).ease(i).attrs(s(t)).on("end",d===Rc?function(e,t){t==y-1&&u()}:u):u()}}var h=n==sc,f=l.dataset,g=l.yaxiscolumnorder,p=h?0:-1,y=a.length,v=o,m=sl(v/(h?r.length-1:y));u()}function ga(e){var t=vs(0,kl);e.attrTween("transform",function(){var e=Rl(this).attr("transform");return function(a){return e+" matrix("+yl(t(a))+",0,0,1,0,0)"}})}function pa(e){var t=vs(0,1);e.styleTween("opacity",function(){return function(e){return t(e)}})}function ya(e){var t=vs(0,1);e.attrTween("transform",function(){var e=Rl(this).attr("transform")||"";return function(a){return e+" scale("+t(a)+")"}})}function va(e){e.interrupt()}function ma(e,t,a){var r=+e.systemConf.canvas.intelligence.dimension[t];return a>=r}function xa(e,t){var a=+e.systemConf.canvas.intelligence.dataCount[t];return a>=e.dataObject.totalnoofdatas}function ba(e,t){return t-=kl/2,[yl(t)*e,vl(t)*e]}function Ca(e){var e=e%(2*kl);return 0>e?e+2*kl:e}function wa(e,t,a,r,n){var i=0-(e.x-.5*n),o=e.width+n-i,l=0-(e.y-.5*n),s=e.height+n-l,c=r-i,d=r-o,u=r-l,h=r-s;return[t/2-c/2+d/2,a/2-u/2+h/2]}function ka(e,t,a){return"string"==typeof e&&e.indexOf("%")>-1?t*+e.replace(/%/g,"")*.01:lt(e,a)}function Oa(e){return Yl().range([0,1]).domain([kl>e?kl/2:3*kl/2,kl])(e)}function Sa(e,t,a){return e>t&&(t=e+((e=t)-t)),0>e&&0>t&&(e+=2*kl,t+=2*kl),0>e&&t>=0&&(0>a?t=2*kl:e=0),a=0>a?a+2*kl:a,a>=e&&t>=a}function Aa(e){return 180*e/kl}function Pa(e,t){var a=ut(e.bandWidth)||e.levelMarker&&ut(e.levelMarker.bandWidth),r=ut(e.maxBandWidth)||e.levelMarker&&ut(e.levelMarker.maxBandWidth),n=ul(0,ka(e.innerRadius,t,0));if(a||r){var i=ut(e.bandWidth)?ka(e.bandWidth,t,0):t-n,o=ut(e.levelMarker.bandWidth)?ka(e.levelMarker.bandWidth,t,0):t-n,l=lt(e.maxBandWidth,t),s=lt(e.levelMarker.maxBandWidth,t);return i=hl(i,l),o=hl(o,s),t-ul(i,o)}return n}function Ta(e){var t=e.match(tl);return t&&5===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):e}function Ea(e,t){var a=$l(e);return a.opacity=rt(t)?1:t,a.toString()}function La(e,t,a,r){if(e===Pl)return e;a=Od(a,"darker");var n=Od(r,d3.rgb)(e);return n[a](t).toString()}function za(e,t,a,r,n){var i=e.defsLocation,o=e.chartTypes[t].name,l=e.chartTypes[t].value,s=e.systemConf.chart.plot.plotoptions[o],c=e.seriesdata[t].plotoptions,d=c&&c.gradients?Cd(s.gradients,c.gradients,!0):s.gradients,u=e.patternPallete,h=e.imagePallete,f=h&&h.length,g=!r&&u&&u.length,p=n||e.plot.renderer.mode,y=Pd.getIndexScale(e),v=function(r,n,s,c,v,m,x,b,C){var w,k=n&&e.dataset.getClr(n);if(a=m||a,r=Math.max(r,0)||0,c)w=c;else if(w=Ra(e,r,n,t),r=Pd.getItemIndex(e,y,n,r),y&&(!ja(k,e)||rt(r))&&0===d3.rgb(w).opacity)return w;if("canvas"!=p||d.type||w instanceof Object||(w=uu.rgba(w,v)),g&&/(url|data)/.test(w))return w;if(ut(s)&&(w=La(w,s).toString()),h&&h.length&&ja(k,e)){var O={name:e.imagePallete[r%f],width:x&&x.width||e.patternImageSizes[r%f][0],height:x&&x.height||e.patternImageSizes[r%f][1],mode:p,context:x&&x.context},S="svg"==p||b?fd.get(pd,"imageFill",O,{returnSVGimage:b,chartObj:e}):fd.get(hu,"imageFill",O,{returnSVGimage:b,chartObj:e});return"canvas"==p?S:"url("+i+"#"+S+")"}if(g){var A=u[r%g],O=D(A,w,v,x,e.userdata.legend.customPatternColor),S="svg"==p||b?fd.get(pd,"svgPatternFill",O,{returnSVGimage:b,chartObj:e}):fd.get(hu,"canvasPatternFill",O,{returnSVGimage:b,chartObj:e});return b||"canvas"==p?S:"url("+i+"#"+S+")"}return Pd.isQuantileColorScale(e)&&ut(C)&&Fr(l)&&(d=Na(e,e.renderer[t].seriesdataAfterUpdate[C])),a&&d&&d.type?Da(d,a,w,p,v,o,b,e):w};return v.gradientOptions=d,v}function Da(e,t,a,r,n,i,o,l){var s,c=z(e,t,a,n),d={offset:i,chartObj:l};return s="svg"===r?fd.get(yd,"svgGradientFill",c,d):fd.get(fu,"canvasGradientFill",c,{offset:i,chartObj:l,returnSVGimage:o}),o||"canvas"===r?s:"url("+l.defsLocation+"#"+s+")"}function Ma(e,t,a){var r,n=e.defsLocation,i=e.chartTypes[t].value,o=e.chartTypes[t].name,l=Fr(i),s=i===So.charttype.line,c=e.seriesdata[t].plotoptions,d=e.systemConf.chart.plot.plotoptions[o],u=s&&c&&c.gradients?Cd(d.gradients,c.gradients,!0):d.gradients,h=Pd.isQuantileColorScale(e),f=e.plot.renderer.mode;return function(i,g,p,y,v,m){var x=h&&ut(m)&&(s||l&&!(c&&c.strokeColor||d.strokeColor)),b=s&&u.type;if(x&&(u=Na(e,e.renderer[t].seriesdataAfterUpdate[m])),a&&(x||b)){var C=p||Ia(e,t),w=z(u,a,C,v),k={offset:o,chartObj:e},O="svg"==f?fd.get(yd,"svgGradientFill",w,k):fd.get(fu,"canvasGradientFill",w,{offset:o,chartObj:e});return"canvas"==f?O||C:"url("+n+"#"+O+")"}if(p)r=p;else{i=Math.max(i,0)||0;var C=Ra(e,i,g,t);ut(y)&&(C=La(C,y).toString()),r=C}return"canvas"!=f||r instanceof Object||(r=uu.rgba(r,v)),r}}function ja(e,t,a,r,n){if(a||(a=t.axes.clr.scale),!a)return!0;r||(r=a.domain()),e===ol&&(e=null);var i=n||t.systemConf.legend.filter.range,o=!i||(t.dataset.getDataType("clr")===Ns?i.indexOf(e)>-1:e>=i[0]&&e<=i[1]),l=t.dataset.getDataType("clr")===Ns?r.indexOf(e)>-1:e>=r[0]&&e<=r[r.length-1];return l&&o&&null!==a(e)&&!(rt(t.systemConf.legend.colorBand.nullAs)&&null==e)}function Ra(e,t,a,r){var n=Ia(e,t),i=e.isAxisCategory&&ut(r)&&e.rendererConf&&e.rendererConf[r].params;return i&&i.categoryColorConfig?Hi(a,i.categoryColorConfig,n):i&&i.colorOverlay?Ha(e,i,a,n):a&&Pd.isQuantileColorScale(e)?Ba(e,a):a&&a.arcColor||n}function Ia(e,t){var a=e.imagePallete||e.seriesColor;return a[t%a.length]}function Ha(e,t,a,r){var n=t.yaxiscolumnorder,i=t.threshold,o=t.thresholdType,l=e.dataset,s="x"==o?l.getX(a):l.getY(a,n);return t.colorOverlay(i,i.color,s,r)}function Ba(e,t){var a=e.systemConf.legend.filter.track||{},r=lt(a.fillOpacity,1),n=a.fillColor||Pl,i=e.dataset.getClr(t),o=e.axes.clr.scale;if(ja(i,e,o))return i===ol&&(i=null),o(i);var l=d3.rgb(n);if(r=l.opacity*r,0===r)return Pl;var s=d3.scaleLinear().domain([0,1]).range([o(i),Ta(n)]).interpolate(d3.interpolateRgb);return s(r)}function Fa(e){var a=d3.rgb(e),r=t((a.r+a.g+a.b)/3);return"rgba("+r+","+r+","+r+","+a.opacity+")"}function Va(e,t){return e.multiColoring&&!t.legendarea.show}function Na(e,t){var a,r,n,i,o,l,s=e.axes.rotated,c=e.systemConf.chart.axes.xaxis.reversed,d=e.axes.x.scale,u=d.ordinalRange||d.range(),h="rgba(255,255,255,0)",f="discrete"===e.systemConf.legend.colorBand.colorModeOnPlot,g=Yl().domain([u[0],u[u.length-1]]).range([0,100]),p=[],y=[];t.forEach(function(t){if(i=g(d(e.dataset.getX(t))),o=Ba(e,t),l=o===Pl,l&&(o=h),f||!n&&!l||(ut(a)&&(y.push(hl(100,a+.1)+"%"),p.push(h)),y.push(ul(0,i-.1)+"%"),p.push(h)),f&&r)if(n)y.push(ul(0,i-.1)+"%"),p.push(r);else if(l)y.push(hl(100,a+.1)+"%"),p.push(o);else{var s=(i+a)/2;y.push(s+"%"),p.push(r),y.push(s+"%"),p.push(o)}y.push(i+"%"),p.push(o),a=i,r=o,n=l});var v={type:"linear",options:{linear:{x1:0,x2:0,y1:0,y2:0,stopColor:p,stopOffset:y}}},m=s?c?"y2":"y1":c?"x1":"x2";return v.options.linear[m]=100,v}function _a(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.y1>t.y2||t.y1>e.y2)}function Wa(e){return"translate("+(e+.5)+",0)"}function Ya(e){return"translate(0,"+(e+.5)+")"}function Xa(e){return function(t){return+e(t)}}function Ua(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(a){return+e(a)+t}}function Ga(){return!this.__axis}function Za(e,t,a){var r=[],n=t.chart,i=t.axis,o=i.ticks.tickValueObj,l=t.tickValues,s=t.tickFormat,c=t.tickSizeInner,d=t.tickSizeOuter,u=t.gridSize,h=t.tickPadding,f=t.rotation,g=t.orient,p=t.scale,y=o&&o.isInline,v=o&&o.inlineToPlot,m="top"===g||"left"===g?-1:1,x=v?-m:m,b=y?-m:m,C="left"===g||"right"===g?"x":"y",w="left"===g||"right"===g?"width":"height",k="top"===g||"bottom"===g?Wa:Ya,O=n.dataObject.isPolarAxisCategory?"H":"h",S=(a.label,a.ticklabel),A=S.events,E=a.tickmark,L=a.axisline,z=a.grid,D=t.renderGrid,M=t.renderTicklabel,j=null!=A&&0==lt(A.enabled,!0),R=j?"auto":A?A.cursor||"pointer":"pointer",I=n.systemConf.chart.plot.border,H=1e-6,B=null==l?p.ticks?p.ticks.apply(p,r):p.domain():l,F=null==s?p.tickFormat?p.tickFormat.apply(p,r):Ad:s,V=y&&!v?o.longTickSize[w]:Math.max(c,0)+h,N=y&&!v?o.axisgroup[w]:0,_=p.origRange?p.origRange:p.range(),W=+_[0]+.5,Y=+_[_.length-1]+.5,X=(p.bandwidth?Ua:Xa)(p.copy()),U=e.selection?e.selection():e,G=U.selectAll(".domain").data([null]),Z=U.selectAll(".tick").data(B,p).order(),Q=Z.exit(),q=Z.enter().append("g").attr("class","tick"),K=Z.select("line.minorTicks"),$=u&&z.show?Z.select("line.majorTicks"):Z.select("line.majorTicks").remove(),J=Z.select("text").attr("class","ticklabel");if(G=G.merge(G.enter().insert("path",".tick")).attr("class","domain").styles({stroke:L.show===!1||L.hideParent?"transparent":L.color||"#000","stroke-width":Od(L.strokeWidth,1),"stroke-dasharray":P(L.style,Od(L.strokeWidth,1))}),Z=Z.merge(q),K=K.merge(q.append("line")).attr(C+"1",m*N).attr(C+"2",m*N+b*c).attr("class","minorTicks").styles({fill:"none","shape-rendering":"crispedges","stroke-width":E.strokeWidth,stroke:E.color}),D&&u&&z.show){var et=Od(z.strokeWidth,1),tt=P(z.style,et),at=T(z.lineCap,z.style);$=$.merge(Z.append("line")).attr("stroke","#000").attr("class","majorTicks").attrs({x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2}).styles({fill:"none","shape-rendering":"crispedges","stroke-width":et,stroke:z.color,"stroke-dasharray":tt,"stroke-linecap":at})}var rt=[S,n.systemConf.chart,n.systemConf.canvas,dd],nt=So.utils.getVal(ot(rt,"fontSize")),it=ot(rt,"fontFamily"),st=ot(rt,"fontWeight"),dt=ot(rt,"fontStyle"),ht=ot(rt,"textShadow"),ft=ot(rt,"fontColor"),gt=ot(rt,"textDecoration"),pt=(ot(rt,"strokeColor"),gr(g,f,null,null,E.size,h,o));if(J=J.merge(q.append("text")),M&&(J.attr("class","ticklabel").style("font-size",nt+"px").style("font-family",it).style("font-weight",st).style("font-style",dt).style("text-shadow",ht).style("text-decoration",gt).style("fill",ft).style("text-anchor",pt.textAnchor).style("cursor",R).style(C,x*V).attr(C,x*V).attr("dy",function(e,t){return o&&"zigzag"==o.mode&&t%2&&pt.dy1?pt.dy1:pt.dy}).attr("transform","rotate("+pt.rotate[0]+" "+pt.rotate[1]+" "+pt.rotate[2]+")"),hr(J,g,pt,S,a,p,n),i.ticks.isHierarchialLevelType()&&J.call(fr,p,g)),Z.attr("transform",function(e){return k(X(e))}),e!==U&&(Z=Z.transition(e),K=K.transition(e),J=J.transition(e),Q=Q.transition(e).attr("opacity",H).attr("transform",function(e){return isFinite(e=X(e))?k(e):this.getAttribute("transform")}),q.attr("opacity",H).attr("transform",function(e){var t=this.parentNode.__axis;return k(X(t&&isFinite(t=t(e))?e:e))})),Q.remove(),G.attr("d","left"===g||"right"==g?"M"+m*(d+N)+","+W+O+"0.5V"+Y+"H"+m*(d+N):"M"+W+","+m*d+"V0.5H"+Y+"V"+m*d),Z.attr("opacity",1).attr("transform",function(e){return k(X(e))}),o&&o.isInline&&ut(I)&&I.show===!0){var yt="left"==g||"right"==g,vt=yt?1:0,mt=yt?nt*parseFloat(pt.dy):0,xt=yt?[0,n.plotarea.height]:[n.plotarea.left+.05*n.plotarea.left,n.plotarea.width+.05*n.plotarea.width];Z.style("display",function(){var e=$t(this).translate[vt];return ct(mt+e,xt)?"":"none"})}K.attr(C+"2",m*N+b*c),U.filter(Ga).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===g?"start":"left"===g?"end":"middle"),U.each(function(){this.__axis=X}),M&&(J.each(F),S.tooltip===!0&&J.each(function(){aa(d3.select(this),this.formattedVal)}))}function Qa(e,t){for(var a=t.systemConf.metadata,r=a.axes.y[e],n=1,i=r.length-1,o=a.columns[r[n-1]],l=o[o.datatype];i>=n;n++){var s=a.columns[r[n]],c=s[s.datatype];l=yt(l,c)}return l}function qa(e){switch(e){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top"}}function Ka(e){return{top:Od(e.marginTop,5),right:Od(e.marginRight,5),bottom:Od(e.marginBottom,5),left:Od(e.marginLeft,5)}}function $a(e,t,a){return a||(e=qa(e)),t[e]}function Ja(e,t){return"x"==e&&t||"y"==e&&!t}function er(e,t){return("bottom"==e||"top"==e)&&!t||("left"==e||"right"==e)&&t?"x":"y"}function tr(e,t,a){var r;return"x"==t?0==a?r=e.axes.x:(e.axes.x.levels[a-1]=e.axes.x.levels[a-1]||{},r=e.axes.x.levels[a-1]):"clr"===t?r=e.axes.clr:(e.axes.y.groups[a]=e.axes.y.groups[a]||{},r=e.axes.y.groups[a]),r}function ar(e,t,a,r){var n=e.axes.x.count>1&&"x"==t&&a>0;return"auto"==r&&!n}function rr(e,t,a){return"inner"==e.tickOrient?"x"==t&&a.ismultix?!1:!0:void 0}function nr(e,t){var r=e.systemConf.legend.colorBand.ranges,n=wd(r),i=e.dataset.getDataType("clr")===Ns;return a(n[0])||(n=n.map(function(e){return[e]})),i||t||n.sort(function(e,t){return is(e[0],t[0])}),n}function ir(e,t,a,r,n){var i="y"==a?r?e.x:e.y:r?e.y:e.x,o=r&&!n||!r&&n,l=Ql("y"==a?o?is:os:o?os:is),s=l.left(t,i,0,r&&n?t.length:t.length-1),c=r?i:t[s],d=r?t[s-1]:i,u=s>0&&c>d?s-1:s;return u}function or(e,t){return e/(1-t)}function lr(e,t,a,r,n){var i=So.scale.getOuterPadding(e,t,a,r),o=2*(hl(e[0],e[1])+n*i);return o}function sr(e){return e.ordinalRange?e.ordinalRange:(e.ordinalRange=e.domain().map(function(t){return e(t)}),e.ordinalRange)}function cr(e,t,a,r,n,i,o,l,s,c,d){function u(e){var a={};return v?"bottom"==t||"top"==t?(a.left=i(z)-fl(j-M),a.right=i(D)+(M+j)):"left"!=t&&"right"!=t||90!=r&&270!=r||(a.top=i(D)-M,a.bottom=i(z)+M):(a.top=a.left=0,a.right="bottom"==t||"top"==t?Ar(e,"width",m):0,a.bottom="bottom"==t||"top"==t?0:Ar(e,"height",m)),a}function h(e,t,a,r){var n={};return v?(n.left=n.right=0,n.top=n.bottom=0):(n.left="axislabel"==e?r*(a.width-(t.left+t.width)):r*t.left,n.right=r*(a.width-(t.left+t.width)),n.top=r*t.top,n.bottom=r*t.bottom),n}function f(e,l){if("none"!=n){var c=e,d=[c.childNodes[0]],u=d3.select(c).selectAll("tspan").nodes();if(u&&u.length&&(u.sort(function(e,t){return t.textContent.length-e.textContent.length}),d=u),d){if(v){y=y||o.selectAll("text.ticklabel").nodes().length;var h=fl(p.outerPaddingInPixel);"bottom"==t||"top"==t?I?B=R.horizontal:90!=r&&270!=r&&(B=0==l||l==y-1?2*h:2*fl(p.rangeBand)):"left"!=t&&"right"!=t||90!=r&&270!=r||(H=0==l||l==y-1?2*h:2*fl(p.rangeBand))}for(var f=0;f<d.length;f++){var g,m=u&&u.length?d[f]:c,x=m.textContent,b="tspan"==m.nodeName?vr:mr,C=b(m),w=C,k=-1,S={width:B,height:H},P=v?0:A;if(T&&"ticklabel"==s&&!a.actChartObj){var E="left"==t||"right"==t?B:Math.abs(i.discreteWidth(e.__data__))||B,L=hl(B,E);return void ra(m,m,m.textContent,L,H,C,O)}if("ticklabel"==s){if(B<C.width){k=(C.width-B)/C.width;var z=dl((1-k)*m.textContent.length);m.textContent=m.textContent.substring(0,z-2)+O,C=b(m)}if(H<C.height){k=(C.height-H)/C.height;var z=dl((1-k)*m.textContent.length);m.textContent=m.textContent.substring(0,z-2)+O,C=b(m)}}var D=o.selectAll(".domain").node().getBoundingClientRect(),M={left:C.left-D.left,right:C.left+C.width-D.left,top:C.top-D.top,bottom:C.top+C.height-D.top,width:C.width,height:C.height};if("left"!=t&&"right"!=t||0==r||180==r||360==r?"bottom"!=t&&"top"!=t||90==r||270==r||(M.left+ul(P,V.left)<F.left||M.right-ul(P,V.right)>F.right)&&(g=!0,qt(m,m.textContent,M,F,t,O,V,S,m)):(M.top+ul(P,V.top)<F.top||M.bottom-ul(P,V.bottom)>F.bottom)&&(g=!0,qt(m,m.textContent,M,F,t,O,V,S,m)),"ticklabel"==s&&!g){var C=b(m);(C.width!=w.width||C.height!=w.height)&&ra(m,c,x,S.width,S.height,C,O)}m.textContent==O&&(m.textContent=a.actChartObj?".":"")}}}}if("none"==n)return f;var g,p,y,v,m=a.plotarea,x=a.chartarea,b=a.canvasarea,C=a.actChartObj||a,w=er(t,C.axes.rotated),k="x"==w?C.systemConf.chart.axes.xaxis:C.systemConf.chart.axes.yaxis[d||0],O=null==n||"ellipsis"==n?"..":"",S=k.tickmark.align,A=So.utils.getVal(ot([c,C.systemConf.chart,C.systemConf.canvas,dd],"fontSize")),c="ticklabel"==s?c:{},P=tr(C,w,d||0).ticks,T=null!=i.discreteWidth,E=.5;if(null==e&&"ticklabel"==s){g=null==l.tickValues()?i.ticks?i.ticks.apply(i,[10]):i.domain():l.tickValues();var L=o.selectAll(".tick").data(g,i);e=L.selectAll("text.ticklabel")}if("ticklabel"==s&&l&&!T&&(P.isHierarchy()||"between"==S)){v=!0,g=g||l.tickValues(),p=So.scale.getRangeBand(i,g,0);var z=g[0],D=g[g.length-1];k.reversed&&(z=g[g.length-1],D=g[0]);var M=fl(p.outerPaddingInPixel),j=i.bandwidth?i.bandwidth()/2:0}var R=pr(c,x),I=ut(c.width)||ut(c.maxWidth),H=R.vertical,B=R.horizontal,F=u(C),V=h(s,m,b,E);return a.actChartObj||"axislabel"==s&&e.node()?f(e.node()):f}function dr(e,t,a,r,n){var i=wd(e.plotarea);i.chartId=e.id;var o=Qt(e.svg,"defs",[1]),l=Z(i,r+n),s=Qt(o,"clipPath",[1],"#","id",l),c=Qt(s,"rect",[1]),d="x"==r?e.systemConf.chart.axes.xaxis:e.systemConf.chart.axes.yaxis[n],u={},h=t.axisgroup,f=.5,g={left:f*e.plotarea.left,right:f*(e.canvasarea.width-(e.plotarea.left+e.plotarea.width)),top:f*e.plotarea.top,bottom:f*e.plotarea.bottom};switch(a){case"top":u.x=-g.left,u.y=-h.height-d.tickmark.size,u.height=h.height+e.plotarea.height+d.tickmark.size,u.width=h.width+g.left+g.right;break;case"right":u.x=-e.plotarea.width,u.y=-g.top,u.width=h.width+e.plotarea.width+(d.axisline.strokeWidth||1),u.height=h.height+g.top+g.bottom;break;case"bottom":u.x=-g.left,u.y=-e.plotarea.height,u.height=h.height+e.plotarea.height,u.width=h.width+g.left+g.right;break;case"left":u.x=-h.width,u.y=-g.top,u.width=h.width+e.plotarea.width+(d.axisline.strokeWidth||1),u.height=h.height+g.top+g.bottom}return c.attrs(u),l}function ur(e,t,a,r,n,i){function o(t,a,r,n,i,o){e.dataObject.hierarchical&&e.dataObject.hierarchical.categoryTree&&"x"===o&&it(Cr,d3.event,l(t,a,r,n),e,i)}function l(e,t,a,r){return e.data=e.data.map(function(e){return e.value=e.datatype===_s?mn(t,null,e.time).getTime():t,e.itemIndex=a,e.levelindex=r,e}),e}var s=a.events,c=null!=s&&0==lt(s.enabled,!0),d={mousemove:s?s.mousemove:null,mouseout:s?s.mouseout:null,click:s?s.click:null,dblclick:s?s.doubleclick:null},u={tap:s?s.tap:null,tapHold:s?s.taphold:null,tapHoldEnd:s?s.tapholdend:null,dbltap:s?s.doubletap:null};if(!c){var h={},f={};for(var g in d){var p=null;d[g]?(p="click"==g?function(t,a){o(r,t,a,i,!1,n),it(d[arguments.callee.eventtype],d3.event,l(r,t,a,i),e)}:function(t,a){it(d[arguments.callee.eventtype],d3.event,l(r,t,a,i),e)},p.eventtype=g):"click"==g&&(p=function(e,t){o(r,e,t,i,!0,n)}),h[g]=p}for(var g in u){var p=null;u[g]?(p="tap"==g?function(t,a){o(r,t,a,i,!1,n),it(u[arguments.callee.eventtype],d3.event,l(r,t,a,i),e)}:function(t,a){it(u[arguments.callee.eventtype],d3.event,l(r,t,a,i),e)},p.eventtype=g):"tap"==g&&(p=function(e,t){o(r,e,t,i,!1,n)}),f[g]=p}cn(t,h,f)}}function hr(e,t,a,r,n,i,o){var l=r.minmaxlabels||{},s=o.systemConf;if(l.show===!0){var c=n.reversed===!0,d=+So.utils.getVal(ot([l,r,s.chart,s.canvas,dd],"fontSize")),u=i.domain(),h=u.length-1,f=e.filter(function(e){return!(e-u[0]&&e-u[h])});"top"!==t&&"bottom"!==t||"middle"!==a.textAnchor?"left"!==t&&"right"!==t||!(o.plotarea.top<d/2||o.plotarea.bottom<d/2)||f.attr("dy",function(e){return e-u[c?h:0]?"0.9em":"-0.3em"}):f.style("text-anchor",function(e){return e-u[c?h:0]?"end":"start"}),ta(f,[l,r,s.chart,s.canvas,dd])}}function fr(e,t,a){e.nodes().forEach(function(e,r){var n="left"==a||"right"==a?1:0,i=[0,0],o=t.discreteWidth(r)/2;i[n]=i[n]+o,e.setAttribute("transform","translate("+i[0]+","+i[1]+")")})}function gr(e,a,r,n,i,o,l){var s={},c="0.71em",d="0.35em",u="0em",h="left"===e||"right"===e?"width":"height",o=null==o?n.tickPadding():o,f=l&&l.isInline,g=l&&l.inlineToPlot,p=f&&!g?l.longTickSize[h]:Math.max(i,0)+o,y="top"===e||"left"===e?-1:1,v=g?-y:y,m=f&&l.showGrid;switch(e){case"top":s.rotate=[a,0,v*p],a>=0&&45>a||a>315&&360>=a?(s.dy=f?c:u,s.dy1="-1em"):a>=45&&90>=a||a>=90&&135>=a||a>=225&&315>=a?s.dy=d:a>135&&225>a&&(s.dy=c),s.textAnchor="0"==a||180==t(a)||360==t(a)?"middle":t(a)<180?"end":"start";break;case"bottom":s.rotate=[a,0,v*p],a>=0&&45>a||a>315&&360>=a?(s.dy=f?u:c,s.dy1="1.71em"):a>=45&&90>=a||a>=90&&135>=a||a>=225&&315>=a?s.dy=d:a>135&&225>a&&(s.dy=u);var x="0"==a||180==t(a)||360==t(a)?"middle":t(a)<180?"start":"end";s.textAnchor=f?"start"==x?"end":"end"==x?"start":x:x;break;case"left":s.rotate=[a,v*p,0],a>=0&&45>a?s.dy=m?"-"+d:d:a>=45&&90>=a||a>=90&&135>=a?s.dy=c:(a>135&&225>a||a>=225&&315>=a||a>315&&360>=a)&&(s.dy=f?"1em":u);var x="90"==a||270==t(a)?"middle":a>90&&270>a?"start":"end";s.textAnchor=f?"start"==x?"end":"end"==x?"start":x:x;break;case"right":s.rotate=[a,v*p,0],a>=0&&45>a||a>135&&225>a?s.dy=m?"-"+d:d:a>=225&&315>=a||a>315&&360>=a?s.dy=c:(a>=90&&135>=a||a>=45&&90>=a)&&(s.dy=u),s.textAnchor=f?"end":"90"==a||270==t(a)?"middle":a>90&&270>a?"end":"start"}return s}function pr(e,t){return{vertical:ka(Od(e.height,e.maxHeight,So.axis.ticks.maxTickSizeRatio_Vert),t.height),horizontal:ka(Od(e.width,e.maxWidth,So.axis.ticks.maxTickSizeRatio_Hori),t.width)}}function yr(e){var t=null!=e?e.axisformat||e.format:null;return t&&"auto"===t.specifier}function vr(e){var t=document.createRange();t.selectNode(e);var a=t.getClientRects(),r=a[1]||a[0];return t.detach(),(ud.FIREFOX||ud.SAFARI)&&(r.width=2*r.width,r.height=2*r.height),r}function mr(e){return e.getBoundingClientRect()}function xr(e,t,r,n,i,o,l){var s,c,d=a(e),u=Ld.getTextHeight(e,t,r,o,l,i);return d?e.forEach(function(e,a){ut(n)&&n.length&&(t=n[a].fontSize||t,r=n[a].fontFamily||r);var i=Ld.getTextWidth(e,t,r,o,l);u=Ld.getTextHeight(e,t,r,o,l),s=ut(s)?ul(s,i):i,c=ut(c)?c+1.1*u:u}):(ut(n)&&(t=n.fontSize||t,r=n.fontFamily||r),s=Ld.getTextWidth(e,t,r,o,l),c=Ld.getTextHeight(e,t,r,o,l,i)),{width:s,height:c}}function br(e,t,a,r,n){return null==e?e:"wrapOnSpace"==t?e.split(" "):"wrapAll"==t?Kt(e,a,r,n):e}function Cr(e,t,r,n){t=t.data[0],r.cache.hierarchical||(r.cache.hierarchical={});var i=r.dataObject.hierarchical,o=t.itemIndex,l=r.cache.hierarchical,s=i.finalDepth-t.levelindex,c=i.getCategoriesByDepth(s),d=c[o],u=p.getAllChildren(d),h=Cr.getQuery(u[0],s);l.lastQuery=h,n&&Cr.applyDefaultStyles(r,h,l.query!==h),l.query===h?(a(l.data)&&Cr.setState(l.data,!1),l.data=l.query=l.active=l.depth=l.itemIndex=l.isLeaf=null):(a(l.data)&&Cr.setState(l.data,!1),Cr.setState(u,!0),l.query=h,l.data=u,l.active=!0,l.depth=s,l.itemIndex=o,l.isLeaf=d.leaf)}function wr(e,t,a){a&&(So.labelRenderer&&So.labelRenderer.drawLabelsFromQueue(t.labelQueue,t.labelArray,e),t.labelArray=[],t.labelQueue=[],t.notesArray=So.annotation?So.annotation.draw(e,t.notesArray):[])}function kr(e,t){var a=e.params,r=a.stacked,n=a.chartObj,i=a.yscale,o=So.DataProcessor.helpers,l=n.renderer[t].barDatasetIndex?n.renderer[t].barDatasetIndex():0,s=a.commonPlotOptions,c=o.getChartType(n.seriesdata[t].type||n.userdata.seriesdata.type,"string"),d="bullet"==c,u=n.dataObject.groupedByStack,h=n.seriesdata[t].plotoptions,f=h&&h.levelMarker?Cd(s.levelMarker,h.levelMarker,!0):s.levelMarker,g=s.levelMarker||{},p=n.barscale2.bandwidth()||0,y=p,v=+(s.bandWidth||null)||(d?p/3:p),m=+(g.bandWidth||p),x=+(g.maxBandWidth||p),b=+(s.maxBandWidth||p);y=hl(m,x,p),v=hl(v,b,p);var C=ul(0,(p-v)/2),w=ul(0,(p-y)/2),k=function(){return i.bandwidth?i.bandwidth()/2:0},O={stacked:r,categories:a.xscale.domain(),axisrotated:a.axisrotated,bandwidth1:n.barscale1,bandwidth2:n.barscale2,barDatasetIndex:l,padding:C,yscale:i,hasNegValue:a.hasNegValue,yaxiscolumnorder:a.yaxiscolumnorder,addRangeBand:k,barWidth:v,charttype:c,levelMarker:f,levelMarkerWidth:y,levelMarkerPadding:w,stackGroupIndex:n.userdata.seriesdata.stackGroup?Sr(t,u.keys(),function(e){var t=u.get(e);return t.map(function(e){return e.si})}):0};return n.renderer[t].commonOption=O,O}function Or(e,t,a,r){var n=function(e){return a.getX(e)},i=e.map(n);t.forEach(function(t,n){var o=t,l=i.indexOf(o);if(0>l){var s=[];s.splice(a.xidx,0,o),s.splice(a.yidx(r),0,0),s.isDummy=!0,s.y=0,s.y0=0,s.index=n,e.splice(n,0,s)}})}function Sr(e,t,a){return Bl(t,function(t,r){var n=a?a(t,r):t;return-1!=n.indexOf(e)?r:-1})}function Ar(e,t,a){a=a||e.plotarea;var r=e.systemConf.chart[t];return null==r||isNaN(r)?a[t]:ul(a[t],+r)}function Pr(){So.legutil.imagePallete.each(function(e,t){var a=e.map(function(e){return So.imageFilePath+e});So.legutil.imagePallete.set(t,a)})}function Tr(e){var t=e.hAlign,a=e.vAlign,r=e.layout,n=ut(e.x)&&ut(e.y);return"center"===t&&"center"===a&&(t="right"),ut(r)||(r=n?"vertical":"top"===a||"bottom"===a?"horizontal":"vertical"),{hAlign:t,vAlign:a,layout:r}}function Er(e,t,a){var r=t.systemConf.legend,n=t.legendarea.element.node(),i=Tr(r),o=0,l=0,s=function(e){return a===!1?0:+r[e]},c=jd.isContinousLegend(t),d=c?n.getBBox():n.getBoundingClientRect(),u=d.width,h=d.height,f=ut(r.x)&&ut(r.y);if(c||(d.x=0,d.y=0),f)return[r.x-d.x,r.y-d.y];switch(i.hAlign){case"left":o=e.left+s("marginLeft")-d.x;break;case"center":o=e.width/2-u/2-d.x;break;case"right":var g=c?e.left:0;o=g+e.width-u-s("marginRight")-d.x}switch(i.vAlign){case"top":l=e.top+s("marginTop")-d.y;break;case"center":l=e.top+e.height/2-h/2;break;case"bottom":l=e.top+e.height-h-s("marginBottom")-d.y}return[o,l]}function Lr(e){var t=Tr(e),a=e.vAlign,r=t.hAlign,n="horizontal"===t.layout,i=0,o=0;return n?"top"===a||"bottom"===a?(i=Bd,o=Id):"center"===a&&(i=Fd,o=Rd):"left"===r||"right"===r?(i=Hd,o=Rd):"center"===r&&(i=Bd,o=Vd),{width:i,height:o}}function zr(e,t,a,r){return e.bgClr_base=uu.rgba(t,a),e.stroke="transparent,white,white",fd.get(hu,"canvasPatternFill",e,{chartObj:r})}function Dr(e,t,a){if(ut(a)){var r=e.systemConf.legend.colorBand.ranges;return r&&r.length?Ia(e,a):e.axes.clr.scale((a[0]+a[1])/2)}return Ia(e,t)}function Mr(e,t,a,r,n,i){var o=_(n||"square")(10),l=jd.hexToRGB;return"<path d=\'"+o+"\' transform=\'translate("+e/2+","+t/2+") scale("+e/(10+2*lt(i.strokeWidth,1))+")\' style=\'stroke: "+l(a)+"; fill: "+l(r)+"; fill-opacity: "+i.fillOpacity+"; stroke-width: "+lt(i.strokeWidth,1)+"px; stroke-opacity: "+i.strokeOpacity+";\'></path>"}function jr(e,t,a){var r="<svg xmlns=\'http://www.w3.org/2000/svg\' xmlns:xlink=\'http://www.w3.org/1999/xlink\' width=\'"+t+"\' height=\'"+a+"\'>";\nreturn r+=e,r+=" </svg>",\'url("data:image/svg+xml;\'+(ud.IE?"base64":"utf8")+","+(ud.IE?sd(r):r)+\'")\'}function Rr(e){var t=e.systemConf.legend.colorBand,a=e.dataset.getDataType("clr"),r={fillColor:Pl},n={type:"lever",shadow:"0 0 2px rgba(0,0,0,0.2)",tooltip:{enabled:!(t.ranges&&t.ranges.length||a===Ns),padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)",fontSize:e.globalProp.fontL1Size.l5}};return{track:r,slider:Cd(jn(e),n,!0)}}function Ir(e,t,a,r,n){var i=t&&t[r]||n;ut(i)&&it(i,d3.event,e)}function Hr(e,t,a,r,n){var i=t.events,o=a.systemConf.chart.plot.events;ut(n)&&(i=t[n.type]&&t[n.type].events);var l=ut(e)&&ut(e.events)?So.utils.getValueOfPlotOptions(e.events,i)(r):null!=i?i[r]:null!=o?o[r]:null;return void 0===l&&o&&(l=o[r]),l}function Br(e){var t=e.patternPallete;return t&&t.length}function Fr(e){return e===So.charttype.area||e===So.charttype.stkdarea||e===So.charttype.arearange}function Vr(e){return e===So.charttype.bar||e===So.charttype.stkdbar||e===So.charttype.bullet||e===So.charttype.gantt||Ur(e)&&e!==So.charttype.geoheatmap||e===So.charttype.waterfall}function Nr(e){return-1!=So.chartcategory.dotPlot.indexOf(e)}function _r(e){return e===So.charttype.bubble||e===So.charttype.bubblepie}function Wr(e){return e===So.charttype.waterfall}function Yr(e){return Nr(e)||e===So.charttype.bubblepie}function Xr(e){return e===So.charttype.sunburst}function Ur(e){return e===So.charttype.heatmap||e===So.charttype.geoheatmap}function Gr(e){return-1!=So.chartcategory.piePlot.indexOf(e)}function Zr(e){return Gr(e)&&e!==So.charttype.pie}function Qr(e,t){var a=ys(e);return null!=t.touches&&!ud.ANDROID&&ud.uiwebview&&(a[0]+=window.pageXOffset,a[1]+=window.pageYOffset),a}function qr(e,t,a,r){var n=function(){return e.dataObject.getTransRectValue.apply(e.dataObject,nt(arguments))};return{x:n("x",t,a,0,r),y:n("y",t,a,0,r),width:n("width",t,a,0,r),height:n("height",t,a,0,r)}}function Kr(e,t,a,r,n){var i,o,l,s,c=e.dataset,d=e.systemConf.chart.plot.plotoptions.heatmap,u=d.symbol&&_(d.symbol),h=c.getX(t),f=c.getY(t,n),g=e.dataObject.hasZaxis?e.zscale(c.getZ(t)||e.zscale.domain()[0]):1,p=a.bandwidth(),y=r.bandwidth();return e.axes.rotated?(l=y*g,s=p*g,u&&(l=s=hl(l,s)),o=a(h)+(p-s)/2,i=r(f)+(y-l)/2):(l=p*g,s=y*g,u&&(l=s=hl(l,s)),i=a(h)+(p-l)/2,o=r(f)+(y-s)/2),{x:i,y:o,width:l,height:s}}function $r(e){var t=h=2*e.r;return{x:(e.x||0)-t/2,y:(e.y||0)-h/2,width:t,height:h}}function Jr(e){return e.systemConf.tooltip.crosshair.type!=Al}function en(e,t,a){if(Pd.isQuantileColorScale(e)){var r=e.chartTypes[0].value===So.charttype.pyramid?e.seriesdata[0].data[0]:El;t.style("pointer-events",function(t,n){var i=r?r[r.length-1-n]:t.data||t,o=e.dataset.getClr(i);return a||!ja(o,e)?Al:void 0})}}function tn(e,t,r,n,i,o,l,s,c,d,u,h){var f=null,g=i.plotarea,p=i.plotarea_approx;o=o||{},s&&Jr(i)?l?f={actLeft:r+g.left,actTop:t.y+g.top,top:t.y,left:d?g.width:t.x}:(f={top:0,actTop:g.top+n},d?(f.left=t.x,f.actLeft=t.x+g.left):(f.left=r,f.actLeft=g.left+r)):d?(f={left:t.x,top:t.y},l?(f.actLeft=r+g.left,f.actTop=t.y+g.top):(f.actLeft=t.x+g.left,f.actTop=n+g.top)):f={left:r,top:n,actLeft:g.left+r,actTop:g.top+n};var y=t.x-e.clientX,v=t.y-e.clientY;return f.dLeft=y+g.left,f.dTop=v+g.top,f.left-=y,f.top-=v,f.dLeft=y+g.left,f.dTop=v+g.top,f.helpers={seriesindex:o.seriesPos,subseriespos:a(o.subseriesindex)?o.subseriesindex[o.seriesPos]:o.subseriesindex,subseriesLength:a(o.subseriesLength)?o.subseriesLength[o.seriesPos]:o.subseriesLength,itempos:o.itemPos,itemposShared:o.itemPosShared,color:i.seriesColor,tooltipSharedInfo:c,tooltipShared:s,svgFillFunc:h||i.renderer[o.seriesPos]&&i.renderer[o.seriesPos].fillColorFunc,inheritColors:i.dataObject.isWaterfallEnabled},u&&(f.dLeft+=p.x,f.dTop+=p.y),f}function an(e,t){var a=e.userdata.metadata.columns,r=a.filter(function(e){return e.dataindex===t.dataindex});return r[0]}function rn(e,t,a){return Sd.pointInRectangle({x:e,y:t},a)}function nn(e,t,a){return pl((e-a.cx)*(e-a.cx)+(t-a.cy)*(t-a.cy))-(a.r||0)}function on(e,t){var a=null,r=e.systemConf.chart.plot.plotoptions[So.charttypenames.get(t)],n=Yr(t)||t===So.charttype.line,i=!n,o=r&&r.events&&r.events.triggerOffset;if(ut(o))a=o;else if(_r(t))if(3===arguments.length)a=arguments[2];else{var l=e.zscale.range()[1]/2,s=e.dataObject.isCombinationalChart?10:50;a=l+s}else a=i||e.systemConf.tooltip.sharedSeriesInfo?null:e.dataObject.isCombinationalChart&&n?10:50;return a}function ln(e){var t=e.eventHandler.trackerElement.node(),a=e.eventHandler.mousePos=Qr(t,d3.event),r=q(t),n=a[0]-r.x,i=a[1]-r.y;return{x:n,y:i}}function sn(e){var t=function(){e.style("display",Al);var t=document.elementFromPoint(d3.event.clientX,d3.event.clientY),a=Rl(t),r=t&&t.__on&&t.__on.filter(function(e){return e.type===d3.event.type})[0].value;return e.style("display",El),Rl(this).style("cursor",r?a.style("cursor"):El),r&&r.call(t,a.datum(),a.attr("index")||0),!1},a={mousemove:t,mouseout:t,click:t,dblclick:t},r={singletouchmove:t,touchend:t,tap:t,dbltap:t};cn(e,a,r)}function cn(e,t,a,r,n){r=r||{},n=r.namespace||n,ud.isMouseDevice&&t&&hn(e,n,t),ud.isTouchDevice&&a&&fn(e,n,a,r)}function dn(e,t,a){if(t=null!=t&&""!=t?"."+t:"",ud.isMouseDevice){if(""!==t)e.on(t,null);else for(var r in a)e.on(r,null);a=null}}function un(e){return e.changedTouches?e.changedTouches[0]:e}function hn(e,t,a){if(null!=e.node()){t="."+t;var r={};for(var n in a)r[n+t]=a[n],e.on(n+t,r[n+t]);a=r,e.on(a)}}function fn(e,t,a,r){function n(e,t,a,r){return Math.sqrt(Math.pow(a-e,2)+Math.pow(r-t,2))}function i(){d&&d3.event.preventDefault()}if(null!=e.node()){var o=r.touchleave,l=r.target,s=r.chartObj,c=s&&s.systemConf.chart.plot.events||{},d=r.preventDefault!==!1,u=!("plot"===l&&0==c.isFocusedTouchmove);t=null!=t?"."+t:"";var h,f,g,p,y,v=30,m=150,x=500,b=100,C=50,w=500,k={},O=0,S=0,A=x-m,P=null,T=!1,E=(a.touchmove,a.touchend),L=a.tap,z=a.dbltap,D=a.singletouchmove,M=a.doubletouchmove;"plot"===l&&Hr(null,s.systemConf.chart.plot.plotoptions[s.chartTypes[0].name],s,"taphold")?(p=a.tap,y=E):(p=a.taphold,y=a.tapholdend);var j="touchstart"+t,R="touchmove"+t,I="touchend"+t,H={};H[j]=function(){if(0!=c.enabled){var e=d3.event.touches;if(!(e.length>1)&&(k.time=new Date,k.location=Qr(this,d3.event),P=null,T=!1,f=!1,p)){var t=d3.event,a=arguments,r=this;g=setTimeout(function(){d3.event=t,s&&(s.zcEventType="taphold"),p.apply(r,a),f=!0},w)}}},H[R]=function(){if(0!=c.enabled){var e=d3.event.touches;if(p){var t=Qr(this,d3.event),a=null!=k.location?n(k.location[0],k.location[1],t[0],t[1]):null;if(a>v)clearTimeout(g);else if(f)return i(),!1}if(e.length>1)return void(2==e.length&&M&&(T=!0,M.apply(this,arguments),i()));var r=(new Date).getTime();if(P||(P=r),o&&null!=document.elementFromPoint){var l=0==O||r-O>C,d=e[0],y=document.elementFromPoint(d.pageX-window.pageXOffset,d.pageY-window.pageYOffset);if(!l||"svg"===y.localName||null!=y.id.match(/tooltip/gi))return void i();if(y!=this){if(h!=y){var m=h||this,x=d3.select(m),w=x.on(I),S=x.datum(),A=x.attr("id")||x.attr("class"),E=null!=A?A.match(/(\\d)+$/gi):null;E=null!=E&&null!=E[0]?parseInt(E[0]):null,null!=w&&null!=E&&w.call(m,S,E)}var x=d3.select(y),L=x.attr("class");s.chartTypes[0].value!==So.charttype.dial||"inner"!==L&&"outer"!==L||(x=Rl(y.parentNode));var z=x.on(R),S=x.datum(),A=x.attr("id")||x.attr("class"),E=null!=A?A.match(/(\\d)+$/gi):null;return E=null!=E&&null!=E[0]?parseInt(E[0]):null,void(null!=z&&null!=E&&(z.call(y,S,E),h=y,O=r))}}u&&P-k.time<b||D&&(s&&(s.zcEventType="touchmove"),D.apply(this,arguments),i())}},H[I]=function(){if(0!=c.enabled){var e=d3.event.touches;if(p&&(clearTimeout(g),f))return f=!1,i(),y&&y.apply(this,arguments),!1;if(!(e.length>1)){if(T&&M&&E)return T=!1,E.apply(this,arguments),void i();var t=new Date,a=Qr(this,d3.event),r=t-k.time,o=null!=k.location?n(k.location[0],k.location[1],a[0],a[1]):null,l=t-S;A>0&&A>=l&&l>0&&v>=o?(z&&(s&&(s.zcEventType="doubletap"),z.apply(this,arguments),i()),S=0):m>=r&&v>=o?L&&(s&&(s.zcEventType="tap"),L.apply(this,arguments),i()):E&&E.apply(this,arguments),S=t}}};for(var B in H)e.on(B,H[B])}}function gn(e,t,a,r,n,i,o,l){function s(t){a!==_s||d.customFormat?a===Ws&&("axis"===n||n===Qc||n===Zc&&r.dataObject.isHierarchy)&&"number"==typeof t&&An(t)>12&&(t=parseFloat(t.toFixed(12))):t=mn(t,d,e),l&&d.customFormat&&(e=wd(e),e.levelindex=l);var i="function"==typeof d?d(t,a,e):d.customFormat?it(d.customFormat,t,a,e,n,r):yn(d,t,e,a,l,n,r);return c(i)}function c(e){return 0!=i?K(e):$(e)}if(!a)return c(t);if(null==t)return e&&null!=e.nullformatting?c(it(e.nullformatting,t,a,e,n,r)):t;var d=e?e[n+"format"]||e.format:null;return d&&Object.keys(d).length||(d=pn(a,e)),t.constructor==Array?t.map(function(e){return s(e)}).join(ut(d.arraySeperator)?d.arraySeperator:o):s(t)}function pn(e,t){var a={};switch(e){case"time":t&&t.groupby?a={}:t&&t.subfunction?a=vn(t.subfunction,t.useUTC):a.specifier="YYYY";break;case"numeric":a.thousandSeperator=",";break;case"geo":break;case"percent":a.decimalPlaces=1,a.suffix="%",a.trailingZeros=!1}return a}function yn(e,r,n,i,o,l,s){var c;switch(i){case"time":var d,u=n&&n.useUTC===!0?Rs:js,h=e.specifier;if(ut(n)&&(d=a(n.groupby)?n.groupby:n.AUTO_GROUP_ORDER),a(h)||a(d))c=[],h=h||[null],ut(o)&&(h=ut(h)?[h[o]]:[null]),h=a(h)?h:[h],h.forEach(function(e,t){var a=bn(e),i=wn(u,a,n,o);c[t]=i?i(r):r}),l==Zc&&(c=c&&c.toString());else{var f=bn(h);if("auto"===e.specifier||null==f)c=r;else if(ru.test(f)){var g=wn(u,f,n,o);c=g(r)}else c=u(f)(r)}break;case"ordinal":var p=e.letterCase;r+="",c=p?"uppercase"===p?r.toUpperCase():"lowercase"===p?r.toLowerCase():r[0].toUpperCase()+r.substring(1).toLowerCase():r;break;case"geo":var y=e.mapBy,p=e.letterCase;if(c=r,y){var v=s.dataObject.userMapFeatures.get(r);v&&v.properties&&v.properties[y]&&(c=v.properties[y])}c=p?"uppercase"===p?c.toUpperCase():"lowercase"===p?c.toLowerCase():c[0].toUpperCase()+c.substring(1).toLowerCase():c;break;default:if("decimal"==e.type&&t(r)!=r)return"";r="decimal"==e.type||0===e.decimalPlaces?parseFloat(r):r;var m=e.currency,x=kn(e,null,r),b=!1;if(c=x(r),/(e|s)/gi.test(On(e))&&(ut(e.decimalPlaces)?c=c.replace(/[^a-z]+/i,function(){return kn(e,"."+e.decimalPlaces+"f")(arguments[0])}):b=!0),e.signEnabled===!1&&(c=c.substring(1,c.length)),!lt(e.trailingZeros,!0)||b){var C="";c=c.replace(/[a-z]+(\\+|-)*(\\d)*$/i,function(){return C=arguments[0],""}),c=c.replace(/\\.(\\d)*0*$/gi,function(){var e=arguments[0];return parseFloat(e)?"."+Pn(+e).toString().split(".")[1]:""})+C}c=Sn(e,c),null!=m&&(c=/(\\+|\\-)/.test(c[0])?c[0]+m+c.slice(1):m+c)}return(i==Ns||i==Ws||"geo"===i)&&(c=(null!=e.prefix?e.prefix:"")+c+(null!=e.suffix?e.suffix:"")),e.breakSpace&&(c=c.split(" ")),c}function vn(e,t){t=t===!0;var a=t?Rs:js;switch(e){case"YEAR":case"year":return a("%Y");case"MONTH":case"month":return a("%B");case"ABSDAY":return a("%a");case"DAY":case"day":return a("%e");case"WEEKDAY":return a("%A");case"WEEK":case"week":return a("Week %W");case"ABSHOUR":return a("%I");case"ABSSECOND":return a("%S");case"ABSMINUTE":case"MINUTE":return a("%M");case"MILLISEC":return a("%L");case"HOUR":return a("%H hrs");case"DATETIME":return a("%d %b %Y %H:%M:%S");case"DATE":return a("%x");case"TIME":return a("%X");case"TIMESTAMP":return a("%x %X hrs");case"ABSMONTH":return a("%b %Y");case"ABSWEEK":return a("W%U %Y");case"ABSQUARTER":return function(e){var r=t?e.getUTCFullYear():e.getFullYear();return a("Q"+Ln(e,t)+" "+r)};case"QUARTER":return function(e){return a("Q"+Ln(e,t))};case 100:return a("%d %b %Y %H:%M:%S %L");default:throw"UNKNOWN TYPE 111: "+e}}function mn(e,t,a){var r=a?a.inputformat:null,n=new Date(e.toString()),i="function"==typeof r?r:"function"==typeof window[r]?window[r]:null;if(!(e instanceof Date||null==r||!i&&"timestamp"==r.toLowerCase())){e=i||typeof e==String?e:e.toString();var o=Is,l=i?i(e,a):o(bn(r))(e);n=null==l?n:new Date(l)}return isNaN(n)&&(n=new Date(+e)),n}function xn(e,t,a,r,n){return e=e||{},n=(n&&e[n+"percentformat"]?n:"")+"percent",e[n+"format"]||(e.percentformat=pn("percent")),gn(e,t,a,r,n)}function bn(e){if(e)for(var t in Jd){var a=e.indexOf(t);a>=0&&"%"!==e[a-1]&&(e=e.replace(new RegExp(t,"g"),Jd[t]))}return e}function Cn(e,t,a){return function(t){for(var r,n=e(t),i=[],o=-1,l=0,s=n.length;++o<s;)36===n.charCodeAt(o)&&(i.push(n.slice(l,o)),r=n.charAt(++o),r=ut(tu[r])?tu[r](t,a):r,i.push(r),l=o+1);return i.push(n.slice(l,o)),i.join("")}}function wn(e,t,r,n){var i;if(t)i=Cn(e(t),t,r.useUTC);else if(r.groupby){var o=a(r.groupby)?r.groupby:r.AUTO_GROUP_ORDER,l=0!==n&&ut(n)?o[n-1]:r.subfunction;i=vn(l,r.useUTC)}return i}function kn(e,t,a){var r,n=ut(e.signEnabled)?"+":"",i=null!=e.zeroPadding&&e.zeroPadding.enabled?"0"+e.zeroPadding.digits:"",o=null!=e.thousandSeperator?",":"",l=On(e),s=/(e|s)/gi.test(l);r=null!=e.decimalPlaces&&e.decimalPlaces>=0?s?ud.IE?".20":"":"."+e.decimalPlaces:s?"":"."+An(a);var c=n+i+o+(t||r+l);return Ms(c)}function On(e){var t=(e.decimalPlaces,e.type);return eu[t]||"f"}function Sn(e,t){var a=e.thousandSeperator,r=e.decimalSeperator,n=t.split(/\\./);return(null!=a&&","!=a?n[0].replace(/,/g,a):n[0])+(n[1]?(null!=r?r:".")+n[1]:"")}function An(e){if(isNaN(e))return 0;if(e=+e,Math.floor(e)==e)return 0;var t=Pn(e);return t.toString().split(".")[1].length||0}function Pn(e){if(/\\d+\\.?\\d*e[+-]*\\d+/i.test(e)){var t="0",a=String(e).toLowerCase().split("e"),r=a.pop(),n=Math.abs(r),i=r/n,o=a[0].split(".");if(-1===i)e=t+"."+new Array(n).join(t)+o.join("");else{var l=o[1];l&&(n-=l.length),e=o.join("")+new Array(n+1).join(t)}}return e}function Tn(e){var t=cl(e/1e3),a=cl(t/60),r=cl(a/60),n=cl(r/24),i=cl(n/30.436854166666667),o=cl(n/365.24225);return{seconds:t,minute:a,hour:r,day:n,month:i,years:o}}function En(e){var t=Tn(e),a="YEAR";return a=t.years>1?"YEAR":t.month>1?"ABSMONTH":t.day>1?"ABSDAY":t.hour>1?"ABSHOUR":t.minute>1?"ABSMINUTE":"ABSSECOND",{subFunction:a}}function Ln(e,t){return cl((t?e.getUTCMonth():e.getMonth())/3)+1}function zn(e,t,a,r,n,i,o,l,s){function c(a,r,n){var i=r[n-1].moves[n-1?5:0],o=r[n].moves[0],l=r[n-1].moves[n-1?6:1],c=r[n].moves[1],d=(i+o)/2,f=(l+c)/2;if(t=r[n].moves[1],e=r[n].moves[0],ut(s)&&s){var g,p=s>0?1:-1,y=a===bc?i-o:o-i;g=(y-u)/2-s*p>0?s:(y-u)/2*p,d-=g}switch(a){case bc:return[[d-u/2,t],[d,t+h],[d+u/2,t]];case Cc:return[[d+u/2,t],[d,t-h],[d-u/2,t]];case mc:return[[e,f-u/2],[e-h,f],[e,f+u/2]];case xc:return[[e,f+u/2],[e+h,f],[e,f-u/2]]}}var d=l.enabled,u=l.width,h=l.height,f=Jt(e,t,a+2*i,r+2*i,n);if(d&&o){var g=o===bc?7:o===Cc?3:o===xc?5:1,p=na(f),y=c(o,p,g);Mn(p,g,y),f=Dn(p)}return f}function Dn(e){return e.reduce(function(e,t){return e+t.function.toUpperCase()+(t.moves&&t.moves.join(" ")||"")},"")}function Mn(e,t,a){a.forEach(function(a){e.splice(t,0,{"function":"l",moves:a})})}function jn(e){var t=e.systemConf.legend,a=t.colorBand.ranges,r=jd.getColorBandDimension(e),n=Tr(t),i="horizontal"===n.layout;return{line:{strokeColor:"grey",strokeWidth:2,height:r[i?1:0]+20},triangleUp:{size:15,fillColor:"#4C4C4C"},triangleDown:{size:15,fillColor:"#4C4C4C"},triangleUpDown:{size:15,fillColor:"#4C4C4C",padding:r[i?1:0]+15},box:{strokeWidth:1,strokeColor:"black",fillColor:"transparent",height:r[i?1:0],width:a&&a.length?r[i?0:1]/a.length:10},enlarge:{range:1.2,height:r[i?1:0],width:a&&a.length?r[i?0:1]/a.length:10},lever:{height:26,width:9,radius:2,stripeHeight:8,stripePadding:2,fillColor:"white",strokeColor:"#DADADA",stripeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},hollowCircle:{size:25,outerFillColor:"white",outerStrokeColor:"#DADADA",innerStrokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},circle:{size:25,outerStrokeColor:"white",outerStrokeWidth:2,innerFillColor:"white",shadow:"0 0 2px rgba(0,0,0,0.2)"},vernier:{height:26,width:9,fillColor:"white",strokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},pentagon:{size:8,bandWidth:3,fillColor:"white",strokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)",height:r[i?1:0]}}}function Rn(e,t){this.axes={},c.call(this,e,t),this.initialize()}function In(e){this.geoMap=e,this.initialize()}function Hn(e){this.geoMap=e,this.initialize()}function Bn(e,t,a,r,n,i){this.layer=e,this.utils=t,this.layerContainer=a,this.styles=r,this.geoMap=n,this.useMesh=i,this.initialize()}function Fn(e,t,a){this.series=e,this.geoMap=t,this.index=a,this.initialize()}function Vn(e){this.geoMap=e,this.initialize()}function Nn(e,t,a,r){this.text=e,this.latLong=t,this.styles=a,this.geoMap=r}function _n(e){this.geoMap=e,this.initialize()}function Wn(e,t){this.x=e,this.y=t}function Yn(e,t){this.longitude=e,this.latitude=t}function Xn(e){switch(e){case"bullet":e="bar";break;case"web":case"arearange":e="area";break;case"bubble":e="scatter"}return new du[e]}function Un(e,t,a,r,n,i){function o(e,t,a){return e.select("g."+t).attr("transform","translate("+a.x+","+a.y+")")}r=ut(r)?r:e.context;var l=e.svg.selectAll("g.xychart");o(l,"seriesholder",{x:e.plotarea.left,y:e.plotarea.top}),o(e.staticPaneSVG,"labelholder",{x:e.plotarea.left,y:e.plotarea.top}),a(r,t,n,i)}function Gn(e,t,a){var r=e.svg.node().parentNode,n=e.svg.node().parentNode.querySelector("canvas."+t),i=e.plotarea.width,o=e.plotarea.height;n||(n=document.createElement("canvas"),n.className=t,n.setAttribute("actual-width",i),n.setAttribute("actual-height",o),n.style.position="absolute",n.style.pointerEvents=Al,r.insertBefore(n,a||e.staticPaneSVG.node())),n.width=i,n.height=o,n.style.left=sl(e.plotarea.left)+"px",n.style.top=sl(e.plotarea.top)+"px",n.style.visibility="visible";var l=n.getContext("2d");return window.devicePixelRatio?(n.style.width=cl(i)+"px",n.style.height=cl(o)+"px",n.width=i*window.devicePixelRatio,n.height=o*window.devicePixelRatio,l.scale(window.devicePixelRatio,window.devicePixelRatio)):window.devicePixelRatio=1,l.clearRect(0,0,i,o),l}function Zn(e,t,a){var r=new Image;r.onload=function(){var e=Qn(r,t),n=document.createElement("canvas");n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(r,0,0,n.width,n.height);var i=t.context.createPattern(n,t.repeatMode||"repeat");a(t.context,i,e)},r.src=e}function Qn(e,t){var a=0,r=0,n=e.naturalWidth,i=e.naturalHeight,o=lt(t.width,50),l=lt(t.height,50);if("no-repeat"===t.repeatMode)if(i>n){var s=o-o*(n/i);a=s/2,o-=s}else{var s=l-l*(i/n);r=s/2,l-=s}return{x:a,y:r,width:o,height:l}}function qn(e){var t=fd.get(pd,"svgPatternFill",e,{returnSVGimage:!0,base64:!0});Zn(t.url,t)}function Kn(e){var t,a="zp"+Z(e,"canvasFill");if(So[a])t=So[a];else{var r=document.createElement("canvas"),n=e.bgClr||e.bgClr_base,i=e.stroke||e.stroke_base,o=/\\{\\{([a-z]+)\\}\\}/,l=e.type.split(","),s=l.length,c=e.size.split(","),d=e.strokeWidth.split(","),u=n.split(","),h=i.split(","),f=(e.fillOpacity||"").split(","),g=((e.strokeOpacity||"").split(","),e.translate?e.translate.split(","):null);c=e.width?M(e,c):c,r.width=c[0],r.height=c[0];for(var p=r.getContext("2d"),y=0;s>y;y++){var v=ft(h[y]||h[0])?e.stroke_base:"static"==(h[y]||h[0])?e.customStaticClr:h[y]||h[0],m=ft(u[y]||u[0])?e.bgClr_base:"static"==(u[y]||u[0])?e.customStaticClr:u[y]||u[0],x=(c[y]||c[0])/2;if(v=o.test(v)?La(e.stroke_base,1,v.replace(o,"$1"),Kl):v,m=o.test(m)?La(e.bgClr_base,1,m.replace(o,"$1"),Kl):m,g){var b=g[y]||g[0];x+=parseFloat(b)}if(p.save(),p.translate(x,x),p.beginPath(),p.lineWidth=d[y]||d[0],p.fillStyle=uu.rgba(m,f[y]||f[0]),p.strokeStyle=v,"circle"===l[y])p.arc(0,0,c[y]/2,0,2*kl,!1);else{var C=_(l[y])(c[y]||c[0]);uu.drawPath(p,C)}p.fill(),p.stroke(),p.closePath(),p.restore()}t=So[a]=r}return t}function $n(e){var t=-e.scrolledX||0,a=-e.scrolledY||0;return{left:t,top:a,right:Ar(e,"width"),bottom:Ar(e,"height")}}function Jn(e){if(e.dataObject.noofBarEnabledSeries){var t;if(e.seriesdata.some(function(a,r){return(t=So.labelRenderer.bar.getVAlign(e,r,Zc))===wc}),t===wc)return!0;var a=e.dataObject.groupedByStack;return a.keys().some(function(r){return(t=So.labelRenderer.bar.getVAlign(e,a.get(r).stackLabelIndex,Qc))===wc}),t===wc}}function ei(e,t,a,r,n){var i=r.length;return e||function(e,r){var o=t.reverseColor?i-1-r:(a.isAxisCategory||a.isNonAxisMultiSeriesCategory||a.dataObject.isPolarAxisCategory)&&!t.multiColoring?n:r;return Ra(a,o,e&&e.data?e.data:e,n)}}function ti(e,t){return Cd(t.systemConf.chart.plot.datalabels.boundBox,e.boundBox,!0)}function ai(e,t){return ot([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"show")===!0}function ri(e,t){return lt(ot([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"padding"),2)}function ni(e,t){return lt(ot([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"strokeWidth"),1)}function ii(e,t,a,r){var n=2*(a||0)+r;return ul(n-e-2*t,0)}function oi(e){e=e||{};var t=e.enabled===!0,a={};return a.enabled=t,a.width=t?ut(e.width)?+e.width:10:0,a.height=t?ut(e.height)?+e.height:4:0,a}function li(e,t,a,r){var n=t&&t.datalabels?Cd(e.datalabels,t.datalabels,!0):e.datalabels;return a&&pi(n,a,r),n}function si(e,t,r,n,i,o,l){var s=r.systemConf;return a(n)&&ut(o)&&(n=n[o]),ta(e,[{fontColor:ci(s,n,t,r,i,o,l)},t,s.chart.plot.datalabels,s.chart,s.canvas,dd])}function ci(e,t,a,r,n,i,o){var l=a.fontColor;if("function"==typeof l){var s=it(l,t,r);if(ut(s))return s}var c,d,u=kd(r.systemConf,"chart.plot.datalabels")||{},h=kd(r.systemConf,"map.labels")||{},f=r.isGeoMap?Od(u.fontColor,h.fontColor):u.fontColor,g=r.chartTypes[i||0],p=g.value,y=ut(e.legend.imagePallete),v=r.dataObject.isstacked(p),m=Vr(p)&&v&&o!==!0;if(ai(a,r)){var x=ti(a,r);d=x.fillColor||t}if(l===ol&&f===ol){if(d&&d!==Pl)return mt(d);if(n&&y)return"#444444";if(n&&So.chartcategory.innerLabels.indexOf(p)>-1||m||So.chartcategory.datalabelsInside.indexOf(p)>-1)return mt(t)}return c=y||(ut(l)||null!==f)&&null!==l?l:t,c||Od(f,e.chart.fontColor,e.canvas.fontColor,dd.fontColor)}function di(e,t){return!(e.x1<t.x1||e.y1<t.y1||e.x2>t.x2||e.y2>t.y2)}function ui(e,t){if(xa(t,Zc)){var a=t.systemConf.metadata.axes.label;return a&&ut(a[0])||ot([e,t.systemConf.chart.plot.datalabels],"show")===!0}return!1}function hi(e,t){return t.dataObject.noofBarEnabledSeries&&t.dataObject.isstacked()&&!t.dataObject.isStackedPercentChart&&e&&e.show}function fi(e,t){var a=t.systemConf.chart.plot.plotoptions[e].datalabels||{},r=at(t.userdata,"chart.plot.plotoptions."+e+".datalabels",!0)||{},n=r.showAs||a.showAs;return n===id||n===od||n===ld||al.test(n)}function gi(e,t,a,r,n,i){var o=+a[0],l=+a[1],s=t.plotarea,c={left:-r,right:-r,top:0,bottom:0},d="..",u=bc;n=n||{left:-o,top:-l,right:s.width-o,bottom:s.height-l},e.each(function(){var e=q(this),t={left:e.x+(i?i[0]:0),top:e.y+(i?i[1]:0),width:e.width,height:e.height};qt(this,this.textContent,t,n,u,d,c)})}function pi(e,t,a){var r,n,i,o,l,s,c=t.chartTypes[a].name,d=at(t.userdata,"chart.plot.plotoptions."+c+".datalabels",!0)||{};d.showAs&&(e.showAs=d.showAs||e.showAs),(r=d.innerLabel)?(o=e.innerLabel,o.showAs=r.showAs||o.showAs,(n=r.parentLabel)&&(l=e.innerLabel.parentLabel,l.showAs=n.showAs||l.showAs)):(i=d.stackLabels)&&(s=e.stackLabels,s.showAs=i.showAs||s.showAs)}function yi(e){return e.staticPaneSVG.select(".labelholder")}function vi(e,t,r,n,i,o,l){var s=e.seriesdata[o].yaxiscolumnorder||[0,0],c=e.chartTypes[o],d=So.DataProcessor.helpers,u=e.dataObject,h=e.systemConf.metadata.columns,f=e.isGeoMap;t=t||{stacked:!1,commonPlotOptions:e.systemConf.chart.plot.plotoptions[c.name],yaxiscolumnorder:d.getParsedYAxisOrder(s)};var g,p,y,m,x=e.dataset,b=t.yaxiscolumnorder,C=t.stacked,w=t.yscale,k=Zr(c.value),O=lt(t.commonPlotOptions.dataindex,3),S=e.renderer[0]&&e.renderer[0].getProcessedNode,A=e.systemConf.metadata.axes.label,P=A&&A[0],T=n===Zc&&ut(P),E=T?h[P]?"{{val("+P+")}}":P.toString():r.showAs,L=-1!=[$c,Jc,ed,id,od,ld,td].indexOf(E),z=-1!=[id,od,ld].indexOf(E),D="function"==typeof E||"function"==typeof window[E];if(L||D||(m=mi(E)),!T){var M=T?"label":E==$c?$c:E==ed&&ut(x.zidx)?ed:f?td:Jc;if(g=h[x.getColumnIdx(M,s)].datatype,p=x.getColumn(M,s)[g],y=z?xn:gn,k&&!D&&z){var j=h.filter(function(e){return e.dataindex===O})[0];j=ut(j)?j:x.getColumnIdx(M,s),g=j.datatype,p=j[g]}}var R=function(t,a){t=n==Qc?t[1]:t;var r=u.isHierarchy&&S&&S(t);if(L){var s=El;switch(E){case id:case od:case ld:var c=i,d=n==Qc?t:C||u.isPercentChart?t.y:k?t[O]:r&&r.children&&r.value||t.value||x.getY(t,b,l);if(!C||u.isStackedPercentChart||u.isPercentChart||n!=Zc){if("function"==typeof i)c=i(t,E);else if(!ut(c))if(E!==ld&&w)c=w.domain()[1];else{var h=ku(e,b);h=u.isPercentChart||u.isStackedPercentChart||C?h[b]:h,c=0>d&&d>=h[0]?-h[0]:h[1]}}else c=v(e,o,t,E);s=d/c*100||0;break;case $c:s=r&&r.children?ol:x.getActualX(t);break;case ed:ut(x.zidx)&&(s=x.getZ(t));break;case td:s=x.getGeo(t);break;default:s=n==Qc?t:u.isHierarchy?r&&r.children&&r.value||t.value||x.getY(t,b):x.getY(t,b,l)}return y(p,s,g,e,n)}return D?it(E,t,a,e):x.getCustomizedVal(e,m,o,El,El,t,n,El,"html"!==R.contentType)};return R.contentType=L||!D&&!a(E)&&-1==E.indexOf("<tspan")?"text":"html",R.multiLine="html"===R.contentType&&!D&&a(E)&&E.length>1,R.hasShowAsFunction=D,R}function mi(e){var t="";if(a(e))e.forEach(function(e,a){t+="<tspan class=\'zcTspan\'"+(a?" dy=\'1.1em\'":"")+">"+xi(e)+"</tspan>"});else{var r=e.indexOf("<tspan");t=-1!=r?"<tspan class=\'zcTspan\'>"+xi(e)+"</tspan>":e}return t}function xi(e){var t="",a=0,r=8,n={"<tspan":[],"</tspan>":[]};return e.replace(/<tspan|<\\/tspan>/g,function(){n[arguments[0]].push(arguments[1])}),n["<tspan"].forEach(function(i,o){a!=i&&(t+="<tspan>"+e.substring(a,i)+"</tspan>"),t+=e.substring(i,a=n["</tspan>"][o]+r)}),a!=e.length&&(t+="<tspan>"+e.substring(a,e.length)+"</tspan>"),t}function bi(e,t){e.selectAll("tspan.zcTspan").attr("x",t)}function Ci(e,t,a,r,n,i,o,l){var s=+a[0],c=+a[1],d=t.plotarea,u={left:-r,right:-r,top:0,bottom:0},h="..",f=bc;o=o||0,n=n||{left:-s+o,top:-c,right:d.width-s-o,bottom:d.height-c},e.each(function(){var e=this.childNodes,t=0,a=q(this),r=this.getComputedTextLength();a.x+r>n.right&&(r-=a.x+r-n.right+o),a.x<n.left&&(r-=n.left-a.x+o);for(var s=0;s<e.length;s++){for(var c=e[s],d=c.childNodes,g=c.getComputedTextLength(),p="",y=0;y<d.length;y++){var v=d[y].textContent;p+=v,i[t+y].textLength=v.length}if(g-r>1){var m=i[t].bbox,x={left:m.x+(l?l[0]:0),top:m.y+(l?l[1]:0),width:g,height:m.height};qt(d[0],p,x,n,f,h,u,null,null,!1);var b=d[0].innerHTML;".."===b&&(b="");for(var y=0,C=0;y<d.length;y++){var w=i[t+y].textLength;d[y].innerHTML=b.substring(C,C+w),C+=w}}t+=d.length-1}})}function wi(e,t){var a=e.selectAll(function(){return this.childNodes}),r=e.attr("text-anchor"),n=+e.attr("x"),i=+e.attr("y"),o=[],l=0;return a.each(function(){var e=d3.select(this),a=parseFloat(e.attr("dy")||0),s=this.childNodes,c=this.getComputedTextLength(),d="middle"===r?-c/2:"end"==r?-c:0;l+=a;for(var u=0;u<s.length;u++){var h=s[u].getComputedTextLength(),f={dy:l,dx:d+("middle"===r?h/2:0),bbox:{x:n+d,y:i+l*t,width:s[u].getComputedTextLength(),height:t},style:s[u].style,text:s[u].textContent};o.push(f),d+=h}}),o}function ki(e,t){return t=t||[],e.each(function(){var e=Rl(this).selectAll(function(){return this.children});if(e.size())e.each(function(){ki(Rl(this),t)});else{var a=q(this),r=this.nodeName;if(r===Xs){if(""===this.textContent)return;var n=Oi(this),i=vr(n),o=vr(this);a.x+=o.left-i.left,a.y+=o.top-i.top,a.width=o.width,a.height=o.height}t.push({node:this,nodeName:r,bb:a})}}),t}function Oi(e){return e.parentNode.nodeName!==Ys?Oi(e.parentNode):e.parentNode}function Si(e,t,a,r){for(var n=[],i=[],o=[],l=a-r,s=function(e,t){return e.dist-t.dist},c=function(e,t){return e[0].y1-t[0].y1},d=l,u=0;a>u;u++)e[u]||n.push(u);e.forEach(function(e){e.sort(s)}),e.forEach(function(e){e.forEach(function(e,t){0!=t&&(o[t]=o[t]||[],o[t].push(e))})}),o.forEach(function(e){e.sort(s)}),o.forEach(function(e){e.forEach(function(e){i.push([e])})}),i.forEach(function(e){l>0?l--:e[0].hide=!0}),i=i.slice(0,d),i.sort(c),i.forEach(function(a){var r=a[0],i=r.y2-r.y1,o=ul(cl((r.y1-t)/i),0);if(e[o]){for(var l,s=n[0],c=0,d=0;d<n.length;d++){var u=fl(t+n[d]*i-r.y1);null==l&&(l=u),l>u&&(l=u,s=n[d],c=d)}if(o>s){n.splice(c,1);var h=s;e.forEach(function(t,a){var n=t[0];a>s&&n.y1<r.y1&&(e[h]=t,h=a)}),e[h]=[r]}else{n.splice(c,1);for(var h=[r],f=o;s>=f;f++)if(e[f]){if(e[f][0].y1>r.y1){var g=e[f];e[f]=h,h=g}}else e[f]=h}}else e[o]=a}),e.forEach(function(r,n){var i=r[0],o=i.y2-i.y1,l=t+n*o-i.y1;i.translate=fl(l)<o&&a>n+1&&!e[n+1]&&0>l?0:l}),e.forEach(function(r,n){var i=r[0],o=i.y2-i.y1,l=t+n*o-i.y1;i.translate=fl(l)<o&&a>n+1&&(!e[n+1]||!e[n+1][0].translate)&&0>l?0:l})}function Ai(e,t,a,r){return e.forEach(function(e){var n=e.y2-e.y1,i=ul(0,cl((e.y1-r)/(e.y2-e.y1)));e.dist=e.y1<r?r-e.y1:e.y1-(r+i*n),a[i]||(a[i]=[],t++),a[i].push(e)}),t}function Pi(e,t,a,r,n,i,o,l,s){var c=5;if(!e.hide){null==t&&(t=cl((r-a)/(e.y2-e.y1)));var d=s?null==n?r-e.y2:i[n].y1-e.y2:null==n?e.y1-a:e.y1-i[n].y2;l+=null!=n&&_a(e,i[n])&&-c>d?fl(d):0,n=o,i.push(e),o++}return{prev:n,count:o,totalslot:t,need:l}}function Ti(e,t,a){var r=e.label||{},n=this,i=this.dataset,o=this.plotarea,l=this.systemConf,s=t.commonOption,c=t.commonRendererProp().params,d=c.axisrotated,u=c.yscale,h=c.xscale.bandwidth(),f=l.chart.axes.yaxis[0].orient||(this.axes.rotated?bc:mc),g=e.dataindex,p=e.enabled===!0&&r.enabled===!0&&ut(g),y=Qt(this.staticPaneSVG.selectAll("g.threshold"),"g",p?[1]:[],".","class","targetLabel");if(y.attr("transform","translate("+o.left+","+o.top+")"),p){var v=r.hAlign,m=r.vAlign,x=lt(r.padding,2),b="fixed"===r.position,C=10*lt(e.size,(s.levelMarkerWidth-2*lt(e.padding,s.padding/2))/10),w=("line"===e.symbol?lt(e.outerStrokeWidth,1):C)/2;d?(v=v||vc,m=m||(f===bc?Cc:bc)):(v=v||(f===mc?xc:mc),m=m||vc);var k=this.userdata.metadata.columns,O=k.filter(function(t){return t.dataindex===e.dataindex}),S=O.length?O[0]:k[i.getColumnIdx("y",0)],A=S.datatype,P=S[A],T={left:0,right:0,top:0,bottom:0};d?T.top=T.bottom=o.adjust:T.left=T.right=o.adjust,b||l.chart.axes.yaxis[0].show!==!0||(T[f]=0);var E=n.container.node().getBoundingClientRect(),L=E.left+n.plotarea.left,z=E.top+n.plotarea.top,D=$n(n),M=D.left-T.left,j=D.top-T.top,R=D.right+T.left+T.right,I=D.bottom+T.top+T.bottom;ta(y,[r,l.chart,l.canvas,dd]);var H=function(e){return i.getX(e)},B=Qt(y,"text",a,null,null,null,null,H);B.each(function(e){var t=e[g];if(ut(t)){var a,o,l,c,f=i.getX(e),p=ut(r.text)?i.getCustomizedVal(n,r.text,0,null,null,e,"targetLabel"):gn(P,t,A,n,"targetLabel"),y=0>t,k=y?-1:1,O=s.bandwidth1(f)+h/2,S=u(t);d?(a=S,o=O,m===bc?(o+=C/2,v===vc&&(l="1em",o=O+(b?h:C)/2)):m===vc?l="0.3em":m===Cc&&(o-=C/2,v===vc?(l="-0.3em",o=O-(b?h:C)/2):l="1em"),v===vc?(c="middle",o-=m===vc?0:m===Cc?x*k:-(x*k)):v===xc?(a+=(x+w)*k,c=y?"end":null):(a-=(x+w)*k,c=y?null:"end")):(a=O,o=S,v===xc?a+=(b?h:C)/2:v===vc?c="middle":v===mc&&(a-=(b?h:C)/2,c="end"),m===vc?(a+=v===vc?0:v===xc?x:-x,l="0.3em"):m===Cc?(o-=(x+w)*k,l="-0.3em"):(o+=(x+w)*k,l="1em")),Rl(this).attrs({transform:"translate("+a+","+o+")","text-anchor":c,dy:l}).text(p);var T=this.getBoundingClientRect(),E=T.left-L,D=E+T.width,H=T.top-z,B=H+T.height,F=a+(M>E?M-E:D>R?-(D-R):0),V=o+(j>H?j-H:B>I?-(B-I):0);F!=a&&(a=F),V!=o&&(o=V),Rl(this).attr("transform","translate("+a+","+o+")")}})}}function Ei(e,t){function a(t){var a=e.container.selectAll(".seriesholder"),i=$t(a).translate,o=r?i[0]:n.left-t,l=r?n.top-t:i[1];a.attr("transform","translate("+o+","+l+")"),e.container.selectAll(".labelholder").attr("transform","translate("+o+","+l+")"),e.container.selectAll(".eventgroup").attr("transform","translate("+(r?0:-t)+","+(r?-t:0)+")"),e.container.selectAll("rect.eventhandler").attr("transform","translate("+(r?0:t)+","+(r?t:0)+")"),e.drawPlotareaClippath();var s=r?{y:n.top-t,height:n.height+t}:{x:n.left-t,width:n.width+t};e.eventHandler.trackerElement.attrs(s).attr("clip-path",a.attr("clip-path")),Li(e);var c={name:"rect_highlight",id:e.id},d={chartObj:e};r?(c.x=-n.left,c.y=t,c.width=n.width+n.left,c.height=n.height):(c.x=t,c.y=n.top,c.width=n.width,c.height=n.height);var u=fd.get(xd,"rect",c,d);e.container.selectAll("#zcareahighlight").attr("clip-path","url(#"+u+")")}if(e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)){var r=e.dataObject.getAxisRotated(),n=e.plotarea,i=Ar(e,"width")-n.width,o=Ar(e,"height")-n.height,l=e.container.selectAll(".d3container").selectAll(".zohocharts_scroll"),s=+l.attr("scrollbarSize"),c={name:"rect_axis",id:e.id};\nif(r?(e.scrolledY=e.scrolledY||0,c.x=-n.left,c.y=0,c.width=n.width+n.left,c.height=n.height):(e.scrolledX=e.scrolledX||0,c.x=0,c.y=0,c.width=n.width,c.height=e.canvasarea.height),Li(e),l.styles({left:n.left+Sl,top:n.top+Sl,height:n.height+(r?0:s)+Sl,width:n.width+(r?s:0)+Sl}).on("scroll",function(){var t=d3.event.srcElement||d3.event.target,n=r?t.scrollTop:t.scrollLeft;e.scrolledY=r?n:0,e.scrolledX=r?0:n,d3.event.clientX=d3.event.clientX||0,d3.event.clientY=d3.event.clientY||0,e.eventHandler.mouseOut(),a(n)}),l.style(r?{"overflow-y":"auto","overflow-x":"hidden"}:{"overflow-x":"auto","overflow-y":"hidden"}),l.selectAll(".child").styles({height:n.height+(r?o:0)+Sl,width:n.width+(r?0:i)+Sl,"pointer-events":Al,margin:0,padding:0,"background-color":Pl}),"addorremoveseries"!==t){var d=l.node();d.scrollLeft=0,d.scrollTop=0}var u=e.eventHandler,h={target:"plot",chartObj:e},f={click:u.click,dblclick:u.doubleclick,contextmenu:u.contextMenu},g={mousemove:u.mouseMove,mouseout:u.mouseOut};cn(l,f,null,"chart"),cn(l,g,null,"chartmove");var p={tap:u.click,dbltap:u.doubleclick,singletouchmove:u.mouseMove,touchend:u.mouseOut};cn(l,{},p,h);var y=r?e.scrolledY:e.scrolledX;y&&"addorremoveseries"===t&&a(y)}}function Li(e){var t,a=e.dataObject.getAxisRotated(),r=e.plotarea,n=a?e.scrolledY:e.scrolledX;if(a)t={x:-r.left,y:n,width:r.width+r.left,height:r.height};else{var i=e.dataObject.hierarchical,o=0;if(i)for(var l=0;l<e.axes.x.count;l++){var s=tr(e,"x",l);o+=s.ticks.preCalcAxisLen}else o=e.axes.x.ticks.preCalcAxisLen;t={x:n,y:-r.height,width:r.width,height:o+e.plotarea.height}}t.name="rect_axis",t.id=e.id;var c={chartObj:e},d=fd.get(xd,"rect",t,c),u=e.container.selectAll("g.x-axis").selectAll(function(){return this.childNodes});return u.filter(function(){var e=d3.select(this),t=$t(e).translate,i=a?t[0]:r.left-n,o=a?r.top-n:t[1];e.attrs({transform:"translate("+i+","+o+")","clip-path":"url(#"+d+")"}),e.selectAll("g.axisgroup").attr("clip-path","")}),d}function zi(e,t,a,r,n){var i=n.chart,o=n.animationOptions.enabled,l=n.axisrotated,s=n.renderer,c=n.seriesindex,d=l?s.getParamValue("height",t[0],c,null,s.commonOption):s.getParamValue("width",t[0],c,null,s.commonOption),u=hl(d/10,1),h=Di(a),f={inner:0,outer:1},g=l?"triangle-left":"triangle-down",p=Qt(e,"g",r.enabled?[1]:[],".","class","zcmarkerPointers"),y=Qt(p,"g",h,".","class","markers",null,function(e,t){return a[t].y});y.each(function(){var e=Rl(this);e.attrs({transform:function(e){return"translate("+e[0]+","+e[1]+")"}}).style("opacity",0).transition().duration(o?n.animationOptions.duration:0).style("opacity",1),W(e,null,{size:u,symbol:g,outerFillOpacity:r.strokeOpacity,outerStrokeOpacity:r.strokeOpacity},{symbolSize:f,color:r.strokeColor||"black"},i)})}function Di(e){var t=e.map(function(t,a){return e[a][3]});return t}function Mi(e,t,a,r){var n,i=e.chartObj,o=e.xscale,l=e.yscale,s=e.stacked,c=e.datasetIndex,d=e.axisrotated,u=e.commonPlotOptions,h=e.yaxiscolumnorder,f=e.dataset,g=i.systemConf,p=i.dataObject,y=g.chart.axes.yaxis[h].reversed,v=i.seriesdata[c].plotoptions,m=So.utils.getValueOfPlotOptions(v,u),x=x=ud.FIREFOX&&1==t.length?"linearClosed":m("mode");if(p.isPolarAxisCategory)n=ss().defined(function(e){return!e.isDummy}).radius(function(e){var t=.1,a=s?l(e.y+e.y0):l(f.getY(e,h))+(null!=l.bandwidth?l.bandwidth()/2:0);return ul(a,l.range()[y&&!s?l.domain().length-1:0]+t)}).angle(function(e){return o(f.getX(e))}).curve(_l(x,d));else{var b=i.chartTypes[c],C=So.DataProcessor.helpers,w=C.isCatNull(f,"x"),k=C.isCatNull(f,"y",h);n=ls().defined(function(e){var t=!k(f.getY(e,h))&&!w(f.getX(e));return b.value===So.charttype.stkdarea?!0:!e.isDummy&&t}).x(function(e){var n=p.getXYvalue(d,s,o,l,h,e,"x",null,r);if(null!=a){var u=Math.abs(p.getXYvalue(d,s,i.renderer[c].oldXscale,l,h,t[0],"x",null,r)-p.getXYvalue(d,s,o,l,h,t[0],"x",null,r));n+=u}return n}).y(function(e){return i.dataObject.getXYvalue(d,s,o,l,h,e,"y",null,r)}).curve(_l(x,d,u.tension))}return n}function ji(e,t,a,r,n){var i,o=e.chartObj,l=e.xscale,s=e.yscale,c=e.stacked,d=e.datasetIndex,u=e.axisrotated,h=e.commonPlotOptions,f=e.hasNegValue,g=e.yaxiscolumnorder,p=e.dataset,y=o.systemConf,v=o.dataObject,m=y.chart.axes.yaxis[g].reversed,x=o.seriesdata[d].plotoptions,b=So.utils.getValueOfPlotOptions(x,h),C=b("mode");if(v.isPolarAxisCategory){var w=m&&!c?s.domain().length-1:0,k=function(e){var t;return t=c?0==e.y0?hl(s.range()[0],s(f),e.y0):s(e.y0):s(s.domain()[w])+(null!=s.bandwidth?s.bandwidth()/2:0),ul(t,s.range()[w])},O=function(e){if(e.isDummy)return k.apply(null,arguments);var t=c?s(e.y0+e.y):s(p.getY(e,g))+(null!=s.bandwidth?s.bandwidth()/2:0);return ul(t,s.range()[w])};i=ds().angle(function(e){return l(p.getX(e))}).outerRadius(O).innerRadius(k).curve(_l(C))}else{var S=o.chartTypes[d].name,A=S===Mc,P=A?1:null,T=So.DataProcessor.helpers,E=T.isCatNull(p,"x"),L=T.isCatNull(p,"y",g);i=cs().defined(function(e){return c?!E(p.getX(e)):!L(p.getY(e,g))&&!E(p.getX(e))}).curve(_l(C,u,h.tension)),u?i.x0(function(e,t){return c?0==d&&0==n&&0==t?ul(s.range()[0],s(f)):s(e.y0):A?v.getXYvalue(u,c,l,s,g,e,"x",null,0):null!=s.bandwidth?s.origRange[0]+s.bandwidth():ul(s.range()[0],s(f))}).x1(function(e){var n=v.getXYvalue(u,c,l,s,g,e,"x",null,P);return isNaN(n)&&null!=a&&(n=v.getXYvalue(u,c,l,s,g,r[r.length-1],"x",null,P)+t),n}).y(function(e){return v.getXYvalue(u,c,l,s,g,e,"y",null,P)}):i.x(function(e){var t=o.dataObject.getXYvalue(u,c,l,s,g,e,"x",null,P);if(null!=a){var n=Math.abs(o.dataObject.getXYvalue(u,c,o.renderer[d].oldXscale,s,g,r[0],"x",null,P)-o.dataObject.getXYvalue(u,c,l,s,g,r[0],"x",null,P));t+=n}return t}).y0(function(e,t){return c?0==d&&0==n&&0==t?hl(s.range()[0],s(f)):s(e.y0):A?v.getXYvalue(u,c,l,s,g,e,"y",null,0):null!=s.bandwidth?s.origRange[0]+s.bandwidth():hl(s.range()[0],s(f))}).y1(function(e){return v.getXYvalue(u,c,l,s,g,e,"y",null,P)})}return i}function Ri(e,t,a,r){e.attrTween("d",function(e){var n=d3.interpolate(r[0],r[1]),i=d3.interpolate(a[0],a[1]);return function(a){return t.outerRadius(n(a)),t.innerRadius(i(a)),t(e)}})}function Ii(e,t){var a=e&&e.cascadeCategories?Cd(t.cascadeCategories,e.cascadeCategories,!0):t.cascadeCategories,r=e&&e.risingCategories?Cd(t.risingCategories,e.risingCategories,!0):t.risingCategories,n=e&&e.fallingCategories?Cd(t.fallingCategories,e.fallingCategories,!0):t.fallingCategories;return{cascaded:a,rising:r,falling:n}}function Hi(e,t,a){return e.isCascaded?t.cascaded.color||a:e.isPositive?t.rising.color||a:t.falling.color||a}function Bi(e){var t,a=e.dataset,r=e.data,n=e.chartObj,i=n.dataObject,o=e.processedseriesData,l=o.length,s=(i.getCategories("x"),i.getCategories("x")),c=s.length,d=e.isstacked("waterfall"),u=lt(r.chart.plot.plotoptions.waterfall.cascadeCategories.dataindex,2),h=[];if(e.waterfall={},e.waterfall.comparator=[],d){for(var f,g=[],p=[],y=[],v=[],m=[],x=[],b=[],C=0,w=0,O=0;c>O;O++){var S=s[O];b[O]=m[O]=x[O]=C;for(var A=0;l>A;A++){var P=o[A],T=P.disabled,E=P.data,L=E.length,z=So.DataProcessor.helpers.getParsedYAxisOrder(P.yaxiscolumnorder),D=a.yidx(z);if(!T)for(var M=0;L>M;M++){var j=E[M],r=j[O],R=r[u],I=a.getActualX(r);I!==S&&(r=_i(S,0,a.xidx,a.yidx(z),O,j),R=!1);var H=a.getY(r,z);R?(0==A&&(b[O]=m[O]=x[O]=0),f=r.isCascaded=!0,g[A]=g[A]?g[A]:H,r[D]=r.y=H||g[A]):(f=!1,r.y=H,g[A]=g[A]?r.y+g[A]:r.y);var B=ht(r.y);r.y0=B?m[O]:x[O],B?(m[O]=r.y+m[O],y[O]=y[O]?y[O]+r.y:r.y,r.isPositive=!0):(x[O]=r.y+x[O],v[O]=v[O]?v[O]+r.y:r.y),r.index=O}}h.push(m[O],x[O]),w=(y[O]||0)+(v[O]||0),C=ht(w)?m[O]:x[O];var F=Fi(e,a.xidx,O,S,w,C,b,f);p[O]=F}e.processedStackedData=p;var V=i.groupedByStack;V.has(0)||V.set(0,{}),V.get(0).stackExtent=k(d3.range(s.length),y,v,m,x)}else o.forEach(function(r){var n=r.data,i=So.DataProcessor.helpers.getParsedYAxisOrder(r.yaxiscolumnorder),o=a.yidx(i);n.forEach(function(r){s.forEach(function(n,l){var s=n,c=r[l],d=c?a.getActualX(c).toString():null;if(d!==s.toString())return void _i(s,null,a.xidx,a.yidx(i),l,r);var f=c[u];if(f){var g=a.getY(c,i);c.y0=0,c.y=g||0==l?a.getY(c,i):t,t=c.y,c[o]=c.y,c.isCascaded=!0,c.isPositive=ht(c.y),e.waterfall.hasPositiveCascaded=e.waterfall.hasPositiveCascaded||c.isPositive,e.waterfall.hasNegativeCascaded=e.waterfall.hasNegativeCascaded||!c.isPositive}else c.y0=t||0,c.y=a.getY(c,i),t=c.y+c.y0,c.isPositive=ht(c.y);c.index=l,h.push(t)})})});var N=d3.extent(h);return N}function Fi(e,t,a,r,n,i,o,l){var s=[];return s[t]=r,s.y0=o[a],s.y=i-o[a],s.index=a,s.stackedValue=n,s.isPositive=ht(n),s.isCascaded=l,l&&(e.waterfall.hasPositiveCascaded=e.waterfall.hasPositiveCascaded||s.isPositive,e.waterfall.hasNegativeCascaded=e.waterfall.hasNegativeCascaded||!s.isPositive),s}function Vi(e,t,a,r,n){var i=ro(r,a);n=r.datalabels.hasFixedPosition?!1:n;var o=r.systemConf.chart.plot.datalabels.handleOverlapping,l=r.datalabels.isStackedLabels||r.datalabels.hasFixedPosition||!o,s=n?l?10:0:10;r.dataObject.waterfall.datalabelPadding=n?r.dataObject.rangeCorrections.datalabels.y0+s:s,e=Ni(e);var c,d=e[1]-e[0],u=r.axes.y.orient,h=r.plotarea["left"==u?"height":"width"],f=5,g=d/(h-f)*f;if(i){var p=ao(r),y=30;f+=p+y+s,c=d/(h-f)*f}return e[1]+=i?c:g,e[0]-=r.dataObject.waterfall.hasNegativeCascaded?g:0,e}function Ni(e){return e[1]<0&&(e[1]=0),e}function _i(e,t,a,r,n,i){var o=[];return o.splice(a,0,e),o.splice(r,0,0),o.isDummy=!0,o.index=n,o.y=t,o.y0=0,i.splice(n,0,o),o}function Wi(e,t,a){var r=a.chart,n=r.dataset,i=a.axisrotated,o=a.stacked,l=(a.xscale,a.yscale,a.yaxiscolumnorder),s=a.renderer,c=a.seriesindex,d=o?r.dataObject.processedStackedData:t,u=(r.systemConf.chart.axes.yaxis[l||0].reversed,r.systemConf.chart.axes.xaxis.reversed),h=a.plotoptions,f=a.commonPlotOptions,g=h&&h.connector?Cd(f.connector,h.connector,!0):f.connector,p=g.enabled?Xi(d,a):[],y=ls().x(function(e,t){var a=s.getParamValue("x",e,c,null,s.commonOption),r=s.getParamValue("width",e,c,null,s.commonOption),n=u?1==t:0==t;return Yi(a,r,e,"x",n,i)}).y(function(e,t){var a=s.getParamValue("y",e,c,null,s.commonOption),r=s.getParamValue("height",e,c,null,s.commonOption);return Yi(a,r,e,"y",0==t,i)}),v=Qt(e,"path",p,".","class","zcconnectorLine",null,function(e){return n.getX(e)});v.attr("d",function(e){return y(e)}).styles({fill:"none",stroke:g.strokeColor||"black","stroke-width":g.strokeWidth||1,"stroke-dasharray":P(g.dashStyle,g.strokeWidth||1),"stroke-opacity":0}).transition().duration(1e3).styles({"stroke-opacity":g.strokeOpacity||1})}function Yi(e,t,a,r,n,i){return"x"==r?i?n||a.isCascaded?a.isPositive?e+t:e:a.isPositive?e:e+t:n?e+t:e:i?n?e:e+t:n||a.isCascaded?a.isPositive?e:e+t:a.isPositive?e+t:e}function Xi(e,t){for(var a=t.chart,r=a.dataset,n=t.yaxiscolumnorder,i=(t.stacked,So.DataProcessor.helpers.isCatNull(r,"y",n)),o=Ui,l=e.length-1,s=[],c=0;l>c;c++){var d=e[c],u=e[c+1],h=o(d,n),f=o(u,n),g=i(h),p=i(f);if(g)s.push([]);else if(p){for(var y=c+2,v=e[y],m=v&&o(v,n),x=!i(m);l>y&&!x;)y++,v=e[y],m=v&&o(v,n),x=!i(m);x&&s.push([d,v])}else s.push([d,u])}return s}function Ui(e){return e.y}function Gi(e,t,a){var r=a.chart,n=t,i=Qi(n,a),o=a.plotoptions,l=a.commonPlotOptions,s=ha(l,o,r,"waterfall"),c=s.enabled,d=o&&o.comparisonLine?Cd(l.comparisonLine,o.comparisonLine,!0):l.comparisonLine;a.animationOptions=s;var u=ls().x(function(e){return e[0]}).y(function(e){return e[1]}),h=Qt(e,"g",d.enabled?[1]:[],".","class","zccomparisonLines"),f=Qt(h,"path",i,".","class","lines",null,function(e){return e.y});f.attr("d",function(e){return u(e)}).styles({fill:"none",stroke:d.strokeColor||"black","stroke-width":d.strokeWidth||1,"stroke-dasharray":P(d.dashStyle,d.strokeWidth||1),"stroke-opacity":0}).transition().duration(c?s.duration:0).styles({"stroke-opacity":d.strokeOpacity||1}),zi(e,t,i,d,a),Zi(e,i,d,a)}function Zi(e,t,a,r){var n=r.chart,i=n.systemConf,o=r.axisrotated,l=r.animationOptions.enabled,s=10,c=a.label||{},d=c.labelPos,u=So.utils.getVal(ot([c,i.chart,i.canvas,dd],"fontSize")),h="fixedTop"==d?o?n.plotarea.width:u:null,f={format:{decimalPlaces:"2",signEnabled:!0,suffix:"%"}},g=Qt(e,"g",a.enabled?[1]:[],".","class","zccomparisonLabels"),p=Qt(g,"text",t,".","class","labels",null,function(e){return e.y});p.attrs({x:function(e){return o?h||e[1][0]+s:e[0][0]+(e[2][0]-e[0][0])/2},y:function(e){return o?e[1][1]+(e[2][1]-e[1][1])/2:h||e[1][1]-10}}).text(function(e){return gn(f,e.y,Ws,n)}).styles({"text-anchor":o?"fixedTop"==d?"end":"start":"middle",opacity:0}).transition().duration(l?r.animationOptions.duration:0).styles({opacity:1}),ta(g,[c,i.chart,i.canvas,dd])}function Qi(e,t){var a=t.chart,r=t.renderer,n=a.dataset,i=t.seriesindex,o=t.yaxiscolumnorder,l=t.stacked,s=a.dataObject.processedStackedData,c=(So.DataProcessor.helpers.isCatNull(n,"y",o),e.length-1,t.axisrotated?r.getParamValue("height",e[0],i,null,r.commonOption):r.getParamValue("width",e[0],i,null,r.commonOption)),d=10*hl(c/10,1),u=t.chart.dataObject.stackedChart?t.chart.dataObject.groupedByStack.get(0).stackExtent:null,h=($i(e),0),f=[];return e.map(function(a,n){var o=e[n];if(o.isCascaded&&e[n+1]){var c=Ki(e,n+1,t);if(c){var g=c.maxPt,p=(to(o,"x",t,u),to(g,"x",t,u)),y=to(g,"y",t,u),v=to(o,"x",t,u),m=to(o,"y",t,u),x=to(o,"width",t,u),b=to(o,"height",t,u),C=0==o.index||o.index==e.length-1,w=c.point,k=to(w,"x",t,u),O=to(w,"y",t,u),S=to(w,"width",t,u),A=to(w,"height",t,u),P=0==w.index||w.index==e.length-1,T=qi({x:v,y:m,width:x,height:b,unshared:C},{x:k,y:O,width:S,height:A,unshared:P},{x:p,y:y},d,t);if(l){var E=s[o.index],L=s[w.index];T.y=(L.stackedValue-E.stackedValue)/ul(E.stackedValue,L.stackedValue)*100}else T.y=(w.y-o.y)/o.y*100;if(w.percent=T.y,0==h&&0!=n){{r.getParamValue("y",e[0],i,null,r.commonOption)}o.percent=(o.y-e[0].y)/o.y*100}f.push(T)}h++}}),f}function qi(e,t,a,r,n){var i,o,l,s,c=n.axisrotated,d=n.chart.dataObject.stacked,u=n.chart.dataObject.waterfall.datalabelPadding,h=30,f=ul(a.x,d?t.x:t.x+t.width),g=hl(a.y,t.y),p=e.unshared?e.width/2:e.width/2+e.width/4,y=t.unshared?t.width/2:t.width/4,v=e.unshared?e.height/2:e.height/4,m=t.unshared?t.height/2:t.height/2+t.height/4;c?(i=[e.x+e.width+u,e.y+v],o=[f+u+h,e.y+v],l=[f+u+h,t.y+m],s=[t.x+t.width+u,t.y+m]):(i=[e.x+p,e.y-u],o=[e.x+p,g-u-h],l=[t.x+y,g-u-h],s=[t.x+y,t.y-u]);var x=[i,o,l,s];return x}function Ki(e,t,a){var r=e[t],n=a.chart.dataObject.stackedChart?a.chart.dataObject.groupedByStack.get(0).stackExtent:null,i=0,o=r;if(r){for(;!r.isCascaded;){var l=Ji(r,n);if(l>i&&(o=r,i=l),r=e[++t],!r)return}return{point:r,maxPt:o}}}function $i(e){var t=e.filter(function(e){return e.isCascaded});return t}function Ji(e,t){return t?eo(e,t):e.y+e.y0}function eo(e,t){var a=e.index,r=t.filter(function(e){return e[0]==a}),n=r[0],i=n[1],o=n[2],l=ht(i)?o:o+fl(i);return l}function to(e,t,a,r){var n=a.renderer,i=a.axisrotated,o=a.seriesindex;if(r){if(i&&"width"==t)return 0;var l=eo(e,r);return i&&"x"==t||!i&&"y"==t?n.commonOption.yscale(l):n.getParamValue(t,e,o,null,n.commonOption)}return n.getParamValue(t,e,o,null,n.commonOption)}function ao(e){var t=e.systemConf.chart.plot.plotoptions.waterfall,a=e.axes.rotated,r=e.systemConf,n=0,i=10,o=Qt(e.staticPaneSVG.selectAll("g.labelholder"),"text",[1],".","class","dummyText");return e.seriesdata.forEach(function(e){if(e.plotoptions||!n){var i=e.plotoptions,l=i&&i.comparisonLine?Cd(t.comparisonLine,i.comparisonLine,!0):t.comparisonLine,s=l.label;o.text("800%").style("fill","none"),ta(o,[s,r.chart,r.canvas,dd]);var c=q(o.node());n=ul(a?c.width:c.height,n)}}),o.remove(),n+i}function ro(e,t){var a=e.dataObject.groupedDataBySplitAxes[t],r=e.systemConf.chart.plot.plotoptions.waterfall,n=a.some(function(t){var a=t.si,n=e.seriesdata[a].plotoptions,i=n&&n.comparisonLine?Cd(r.comparisonLine,n.comparisonLine,!0):r.comparisonLine;return i.enabled});return n}function no(e,t,a,r,n){var i=e[t.dataindex]||[];if(null!=i&&!(i instanceof Array))return null;if(!i.length)return null;if(n)n.constructor!=Array&&(t.color=[n]);else{t.color=[];var o=t.colorGamma||[.3,.9],l=[0,i.length-1],s=[+o[0],+o[1]],c=Q(r,l,s);t.color=i.map(function(e,t){return c(t)})}var d,u=i.filter(function(e){return 0>e});if(u.length>0){d=i.slice();var h=d.indexOf(0);h>-1&&d.splice(h,1);var f=t.color;d=d.sort(os);for(var g=[],p=0;p<d.length;p++){var y=i.indexOf(d[p]);g.push(f[y])}t.color=g,d.splice(d.length-u.length,0,0),i=d}t.values=i;var v=So.axis.threshold.overlay(a,"continous")(Pl,t,0,"y");return u.length>0&&(i=d),v}function io(e,t,a,r){var n=e.commonRendererProp().params,i=e.commonOption,o=n.chartObj,l=(o.plotarea,n.dataset),s=n.axisrotated,c=n.commonPlotOptions,d=i.yaxiscolumnorder,u=(n.color,c.dependency),h=u.enabled===!0,f=null,g=a.selectAll("g.dependencySeries").data(h?[t]:[]),p=g.enter().insert("g",":first-child").attr("class","dependencySeries").merge(g);if(p.exit().remove(),h&&ut(u.sourceIndex)&&ut(u.targetIndex)&&(f=co(t,+u.sourceIndex,+u.targetIndex)),f){var y=u.marker,v=u.link,m=ut(v.padding)?v.padding:1,x=ut(y.padding)?y.padding:m;x=hl(m,x);var b=Qt(p,"g",[1],".","class","links"),C=Qt(p,"g",[1],".","class","symbol"),w=Qt(b,"path",f,".","class","link");w.attr("d",function(t){var a=oo(t,u,e,r);return lo(a.type,a.end,a.start,m,x,n)(new Array(6))}).attr("stroke",function(e){var t=l.getY(e.source,d)[0],a=l.getY(e.target,d)[1],r=a>t;return r?v.errorStyle:v.strokeColor}).attr("stroke-width",v.strokeWidth).attr("fill","none");var k=u.marker.enabled===!0,O=Qt(C,"g",k?f:[],".","class","arrow");u.marker.enabled&&O.each(function(){var t,a=(y.symbol,{inner:.4,outer:.7}),n=Rl(this);n.attr("transform",function(a){var n,i,o=oo(a,u,e,r),l=o.type;return"SS"==l||"ES"==l?(n=s?o.start.x-x:o.start.x+o.start.width/2,i=s?o.start.y+o.start.height/2:o.start.y+o.start.height+x,t=s?"triangle-right":"triangle-up"):("EE"==l||"SE"==l)&&(n=s?o.start.x+o.start.width+x:o.start.x+o.start.width/2,i=s?o.start.y+o.start.height/2:o.start.y-x,t=s?"triangle-left":"triangle-down"),"translate("+n+","+i+")"}),W(n,null,y,{symbolSize:a,color:null,symbol:t},o)})}}function oo(e,t,a,r){return{start:uo(e.source,a,r),end:uo(e.target,a,r),type:t.link.type.toUpperCase()||"ES"}}function lo(e,t,a,r,n,i){e=e.toUpperCase();var o=i.chartObj,l=i.axisrotated,s=o.systemConf.chart.axes.xaxis.reversed,c=null,d=null,u=null,h=so(e,l,t,a,r);return ls().x(function(i,o){switch(o){case 0:case 1:case 2:if(u=t,0==o)"SS"==e||"SE"==e?c=l?u.x:u.x+u.width/2:("EE"==e||"ES"==e)&&(c=l?u.x+u.width:u.x+u.width/2);else if(1==o)"SS"==e||"SE"==e?c=l?u.x-r:c:("EE"==e||"ES"==e)&&(c=l?u.x+u.width+r:c);else{var f;"SS"==e?(f=t.x-a.x,f=0>f?0:f,c=l?u.x-f-r:c):"EE"==e?(f=t.x+t.width-(a.x+a.width),f=f>0?0:f,c=l?u.x+u.width+r-f:c):"SE"==e?l?(c=u.x-r,d=h?u.y+u.height:a.y):c=s?c-u.width:c+u.width:"ES"==e&&(l?(c=u.x+r+u.width,d=h?u.y+u.height:a.y):c=s?c-u.width:c+u.width)}break;default:l&&(d=null),u=a,3==o?(l&&h&&(d=t.y+t.height),"SS"==e||"EE"==e?c=l?c:u.x+u.width/2:"SE"==e?c=l?u.x+u.width+r:c:"ES"==e&&(c=l?u.x-r:c)):4==o?"SE"==e?c=l?u.x+u.width+r:u.x+u.width/2:"ES"==e&&(c=l?c:u.x+u.width/2):"SS"==e||"ES"==e?c=l?u.x-n:c:("EE"==e||"SE"==e)&&(c=l?u.x+u.width+n:c)}return c}).y(function(i,o){return l?(d||u.y)+u.height/2:(0==o?"SS"==e||"SE"==e?d=t.y+t.height:("EE"==e||"ES"==e)&&(d=t.y):1==o?"SS"==e||"SE"==e?d+=r:("EE"==e||"ES"==e)&&(d=t.y-r):2==o?"SS"==e?d=t.y+t.height<a.y+a.height?a.y+a.height+r:d:"EE"==e&&(d=t.y>a.y?a.y-r:d):3==o?"SE"==e?d=h?a.y-r:d:"ES"==e&&(d=h?a.y+a.height+r:d):4==o?d+=0:"SS"==e||"ES"==e?d=a.y+a.height+n:("EE"==e||"SE"==e)&&(d=a.y-n),d)}).curve(_l("linear"))}function so(e,t,a,r,n){var i=!1;switch(e){case"SS":case"EE":i=!0;break;case"SE":i=t?a.x>r.x+r.width:a.y+a.height<r.y;break;case"ES":i=t?a.x+a.width<r.x-2*n:a.y>r.y+r.height}return!i}function co(e,t,r){var n=[];return e.forEach(function(i){var o=i[t];e.forEach(function(e){e!==i&&ut(o)&&a(o)&&-1!==o.indexOf(e[r])&&n.push({source:i,target:e})})}),n.length?n:void 0}function uo(e,t,a){var r,n,i,o,l=t.commonOption;return i=t.getParamValue("x",e,a,null,l),o=t.getParamValue("y",e,a,null,l),r=t.getParamValue("width",e,a,null,l),n=t.getParamValue("height",e,a,null,l),{x:i,y:o,width:r,height:n}}function ho(e,t,a,r,n){var i,o,l,s,c=r.commonRendererProp().params,d=c.chartObj,u=c.yaxiscolumnorder,h=c.axisrotated,f=c.dataset,g=n&&n.yscale.range()[1],p=e[n.levelMarker.dataindex],y=f.getY(e,u),v=y[0],m=y[1],x=m-v,b=x*p/100,C=n.yscale(v+b),w=h?0:n.levelMarkerPadding,k=h?n.levelMarkerPadding:0;i=d.dataObject.getTransRectValue("x",e,t,a,n)+w;var O=n.yscale(null==n.hasNegValue?f.getY(e,n.yaxiscolumnorder,0):n.hasNegValue);return n.axisrotated?(o=r.getParamValue("y",e,t,a,n)+k,l=n.stacked?fl(n.yscale(e.y+e.y0)-n.yscale(e.y0))+n.addRangeBand(n.yscale):(fl(g-O-(g-C))||0)+n.addRangeBand(n.yscale),s=n.levelMarkerWidth||n.barWidth):(o=C,l=n.levelMarkerWidth||n.barWidth,s=n.stacked?fl(O-n.yscale(e.y+e.y0)-(O-n.yscale(e.y0)))+n.addRangeBand(n.yscale):fl(O-C)+n.addRangeBand(n.yscale)),{x:i,y:o,width:l,height:s}}function fo(e,t,a,r,n,i,o){var l=a.commonRendererProp().params,s=a.commonOption,c=l.chartObj,d=c.plotarea,u=l.dataset,h=l.axisrotated,f=l.color,g=s.levelMarkerWidth,p=s.charttype,y="bullet"==p,v="gantt"==p,m=y?l.xscale.bandwidth():g,x=a.bandwidth1(),b=lt(n.size,g-2*lt(n.padding,s.padding/2)),C=Qt(e,"g",[t],".","class","markers"+o,null,function(e){return[u.getX(e)]}),w=Od(n.strokeWidth,1);C.attrs({"class":"markers"+o,transform:"translate("+d.left+","+d.top+")","stroke-width":w,"stroke-dasharray":P(n.dashStyle,lt(n.outerStrokeWidth,1)),"stroke-linecap":T(n.lineCap,n.dashStyle),fill:n.color,stroke:n.color});var k=Qt(C,"g",t,null,null,null,null,function(e){return u.getX(e)});k.enter().append("g");var O="line"===n.symbol?{inner:0,outer:1}:{inner:.6,outer:1},S=n.size;k.each(function(e,t){var s=Rl(this),d=i?c.seriesColor[t%c.seriesColor.length]:f;s.attrs({transform:function(e,t){var i=0,s=0;if(v){var c=go(e,r,t,a);return 0===o?(i=c.x+c.width/2,s=c.y-10*n.size/2):(i=c.x+c.width/2,s=c.y+c.height+10*n.size/2),"translate("+(h?s:i)+","+(h?i:s)+")"}return i=x(u.getX(e))+m/2,s=l.yscale(e[n.dataindex]),null==e[n.dataindex]?null:"translate("+(h?s:i)+","+(h?i:s)+") rotate("+(h?90:0)+")"}}).style("display",function(e){return null==e[n.dataindex]&&y?"none":null}),n.size=ut(S)?y?hl(b,m/10):b:b/10,W(s,null,n,{symbolSize:O,color:v?d:null},c)}),n.size=S,v&&(a.markerProperties={subseriesIndex:r})}function go(e,t,a,r){var n,i,o,l,s=r.commonOption;return o=r.getParamValue(s.axisrotated?"y":"x",e,t,a,s),l=r.getParamValue(s.axisrotated?"x":"y",e,t,a,s),n=r.getParamValue(s.axisrotated?"height":"width",e,t,a,s),i=r.getParamValue(s.axisrotated?"width":"height",e,t,a,s),{x:o,y:l,width:n,height:i}}function po(e){return/(left|right)/.test(e)?"bottom":"left"}function yo(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function vo(e,t){var a=(e.data||e).slice(),r=a.splice(0,a.length);return null!=t&&r.push(t),r}function mo(e,t,a,r,n){"plot"==n?e.plotValues.push({data:t,text:a}):e[n+"Values"].push({id:t,text:a,x:r[0],y:r[1]})}function xo(e,t,a,r,n,i){return e+a>n&&(e-=e+a-n),t+r>i&&(t-=t+r-i),[e,t]}function bo(e,t,a){var r=e[a+"Values"];return r.indexOf(r.filter(function(e){return"plot"===a?n(e.data)==n(t):e.id==t})[0])}function Co(e,t){var a=wo();a.changedTouches&&(a=a.touches[t]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();n.x=a.clientX,n.y=a.clientY,n=n.matrixTransform(e.getScreenCTM().inverse());var i=[n.x,n.y];return ko(d3.event)&&!ud.ANDROID&&ud.uiwebview&&(i[0]+=window.pageXOffset,i[1]+=window.pageYOffset),i}var o=e.getBoundingClientRect();return[a.clientX-o.left-e.clientLeft,a.clientY-o.top-e.clientTop]}function wo(){for(var e,t=d3.event;e=t.sourceEvent;)t=e;return t}function ko(e){return e.touches}function Oo(e,t,a){Fn.call(this,e,t,a)}var So={};So.version="2.1",So.versionName="Ortelius",So.d3Version="4.12.0",So.model=function(){},So.axis=function(){},So.legend=function(){},So.renderer=function(){},So.dataset=function(){},So.scale=function(){},So.events=function(){},So.plot=function(){},So.plot.canvas=function(){},So.charttype={};var Ao=So.charttype.line=11,Po=So.charttype.pie=8,To=So.charttype.bar=9,Eo=So.charttype.stkdbar=10,Lo=So.charttype.scatter=12,zo=So.charttype.area=14,Do=So.charttype.stkdarea=15,Mo=So.charttype.bubble=20,jo=So.charttype.packedbubble=19,Ro=So.charttype.funnel=7,Io=So.charttype.web=16,Ho=So.charttype.sunburst=17,Bo=So.charttype.pyramid=13,Fo=So.charttype.dial=18,Vo=So.charttype.bullet=6,No=So.charttype.arearange=21,_o=So.charttype.bubblepie=5,Wo=So.charttype.gantt=24,Yo=So.charttype.treemap=4,Xo=So.charttype.heatmap=3,Uo=So.charttype.dotgrid=26,Go=So.charttype.waterfall=27,Zo=So.charttype.wordcloud=2,Qo=So.charttype.geoheatmap=30;So.charttypenames=d3.map(),So.charttypenames.set(So.charttype.line,"line"),So.charttypenames.set(So.charttype.pie,"pie"),So.charttypenames.set(So.charttype.bar,"bar"),So.charttypenames.set(So.charttype.stkdbar,"bar"),So.charttypenames.set(So.charttype.scatter,"scatter"),So.charttypenames.set(So.charttype.area,"area"),So.charttypenames.set(So.charttype.funnel,"funnel"),So.charttypenames.set(So.charttype.web,"web"),So.charttypenames.set(So.charttype.stkdarea,"area"),So.charttypenames.set(So.charttype.sunburst,"sunburst"),So.charttypenames.set(So.charttype.pyramid,"pyramid"),So.charttypenames.set(So.charttype.bubble,"bubble"),So.charttypenames.set(So.charttype.dial,"dial"),So.charttypenames.set(So.charttype.packedbubble,"packedbubble"),So.charttypenames.set(So.charttype.bullet,"bullet"),So.charttypenames.set(So.charttype.arearange,"arearange"),So.charttypenames.set(So.charttype.gantt,"gantt"),So.charttypenames.set(So.charttype.bubblepie,"bubblepie"),So.charttypenames.set(So.charttype.treemap,"treemap"),So.charttypenames.set(So.charttype.heatmap,"heatmap"),So.charttypenames.set(So.charttype.dotgrid,"dotgrid"),So.charttypenames.set(So.charttype.waterfall,"waterfall"),So.charttypenames.set(So.charttype.wordcloud,"wordcloud"),So.charttypenames.set(So.charttype.geoheatmap,"geoheatmap"),So.chartcategory={},So.chartcategory.axis=[Ao,zo,Lo,Do,To,Eo,Mo,Vo,No,_o,Wo,Xo,Go],So.chartcategory.nonaxis=[Po,Ro,Bo,Fo,Uo],So.chartcategory.nonaxismultiseries=[Io,Ho,jo,Yo,Zo],So.chartcategory.hierarchy=[jo,Ho,Yo],So.chartcategory.continous=[Ao,zo,Lo,Do,Mo,No,_o],So.chartcategory.discrete=[Po,To,Eo,Ho,Ro,Bo,Fo,Vo,Wo,Xo,Go],So.chartcategory.dotPlot=[Lo,Mo],So.chartcategory.piePlot=[Po,_o],So.chartcategory.zaxis=[Mo,_o,Xo,Qo],So.chartcategory.svgOnly=[Po,Ro,Bo,Fo,Ho,jo,_o,Wo,Go],So.chartcategory.innerLabels=[Po,Ro,Bo,Ho,_o],So.chartcategory.datalabelsInside=[jo,Xo,Yo,Qo],So.chartcategory.parentLabels=[Yo,Ho],So.rename=function(t){return null!=t&&""!=t&&"string"==typeof t?(e[t]=So,e.$ZC=null,delete e.$ZC,!0):!1},So.setLegendColorPallete=function(e,t){So.legutil.colorpallete.set(e,t)},So.getLegendColorPallete=function(e){return So.legutil.colorpallete.get(e)},So.setLegendPatternPallete=function(e,t){So.legutil.patternPallete.set(e,t)},So.getLegendPatternPallete=function(e){return So.legutil.patternPallete.get(e)},So.setLegendImagePallete=function(e,t){So.legutil.imagePallete.set(e,t)},So.getLegendImagePallete=function(e){return So.legutil.imagePallete.get(e)},So.setTheme=function(e,t){So[e]=t},So.getTheme=function(e){return So[e]};var qo={},Ko={},$o={},Jo={},el=/\\{\\{val\\((\\d+)\\)\\}\\}|\\{\\{col\\((\\d+)\\)\\}\\}|\\{\\{per\\((\\d+)\\)\\}\\}|\\{\\{splitper\\((\\d+)\\)\\}\\}|\\{\\{maxper\\((\\d+)\\)\\}\\}|\\{\\{geo\\(([a-z0-9\\-\\_]+)\\)\\}\\}|\\{\\{clr\\}\\}/gi,tl=/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/i,al=/\\{\\{per\\((\\d+)\\)\\}\\}|\\{\\{splitper\\((\\d+)\\)\\}\\}|\\{\\{maxper\\((\\d+)\\)\\}\\}/gi,rl=/(illuminate|moody|flip|boxShadow|invert|ridge)/,nl=window.console,il=document.createElement("canvas").getContext("2d");!function(){function e(e,t,a){return function(){var r=a.apply(t,arguments);return r===t?e:r}}d3.rebind=function(t,a){for(var r,n=1,i=arguments.length;++n<i;)t[r=arguments[n]]=e(t,a,a[r]);return t}}();var ol,ll=Math,sl=ll.round,cl=ll.floor,dl=ll.ceil,ul=ll.max,hl=ll.min,fl=ll.abs,gl=ll.pow,pl=ll.sqrt,yl=ll.cos,vl=ll.sin,ml=ll.log,xl=ll.tan,bl=ll.atan2,Cl=ll.LN10,wl=ll.random,kl=ll.PI,Ol=Number.MAX_SAFE_INTEGER||9007199254740991,Sl="px ",Al="none",Pl="transparent",Tl="pointer",El=null,Ll=[],zl=0,Dl=0,Ml=-9999,jl=function(e){return"number"==typeof e&&!isNaN(e)},il=document.createElement("canvas").getContext("2d"),Rl=d3.select,Il=d3.selectAll,Hl=d3.min,Bl=d3.max,Fl=function(){var e={top:d3.axisTop,bottom:d3.axisBottom,left:d3.axisLeft,right:d3.axisRight};return function(t,a){return e[t](a)}}(),Vl=function(){var e={linear:d3.easeLinear,quad:d3.easeQuad,"quad-in-out":d3.easeQuadInOut,"quad-in":d3.easeQuadIn,"quad-out":d3.easeQuadOut,cubic:d3.easeCubic,"cubic-in-out":d3.easeCubicInOut,"cubic-in":d3.easeCubicIn,"cubic-out":d3.easeCubicOut,sin:d3.easeSin,"sin-in-out":d3.easeSinInOut,"sin-in":d3.easeSinIn,"sin-out":d3.easeSinOut,exp:d3.easeExp,"exp-in-out":d3.easeExpInOut,"exp-in":d3.easeExpIn,"exp-out":d3.easeExpOut,circle:d3.easeCircle,"circle-in-out":d3.easeCircleInOut,"circle-in":d3.easeCircleIn,"circle-out":d3.easeCircleOut,elastic:d3.easeElastic,"elastic-in-out":d3.easeElasticInOut,"elastic-in":d3.easeElasticIn,"elastic-out":d3.easeElasticOut,back:d3.easeBack,"back-in-out":d3.easeBackInOut,"back-in":d3.easeBackIn,"back-out":d3.easeBackOut,bounce:d3.easeBounce,"bounce-in-out":d3.easeBounceInOut,"bounce-in":d3.easeBounceIn,"bounce-out":d3.easeBounceOut};return function(t){return e[t]||d3.easeLinear}}(),Nl=d3.easeLinear,_l=function(){var e={linear:d3.curveLinear,linearClosed:d3.curveLinearClosed,cardinal:d3.curveCardinal,cardinalClosed:d3.curveCardinalClosed,monotone:d3.curveMonotoneX,monotoneY:d3.curveMonotoneY,stepBefore:d3.curveStepBefore,stepAfter:d3.curveStepAfter,"linear-closed":d3.curveLinearClosed,"cardinal-closed":d3.curveCardinalClosed,"step-before":d3.curveStepBefore,"step-after":d3.curveStepAfter};return function(t,a,r){var n=e[t];return"monotone"==t&&a&&(n=e.monotoneY),ut(r)&&n.tension&&n.tension(r),n}}(),Wl=function(){var e="squarify",t={squarify:d3.treemapSquarify,slice:d3.treemapSlice,dice:d3.treemapDice,sliceDice:d3.treemapSliceDice,resquarify:d3.treemapResquarify};return function(a){return t[a]||t[e]}}(),Yl=(d3.rebind,function(){var e=d3.scaleLinear();return e.ticks=function(e){var t=this.domain();return d3.ticks(t[0],t[t.length-1],null==e?10:e)},e}),Xl=d3.scaleBand,Ul=d3.scaleTime,Gl=d3.scalePoint,Zl=d3.scaleOrdinal,Ql=d3.bisector,ql=d3.sum,Kl=d3.hsl,$l=function(){var e=d3.rgb.apply(this,arguments);return(isNaN(e.r)||isNaN(e.g)||isNaN(e.b))&&(e=d3.rgb(0,0,0,e.opacity)),e},Jl=d3.merge,es=d3.map,ts=d3.set,as=(d3.zoom,d3.drag),rs=d3.extent,ns=d3.dispatch,is=d3.ascending,os=d3.descending,ls=d3.line,ss=d3.radialLine,cs=d3.area,ds=d3.radialArea,us=d3.arc,hs=d3.pack,fs=d3.pie,gs=d3.partition,ps=d3.treemap,ys=(d3.transform,function(e){if(ud.FIREFOX){e=e.ownerSVGElement||e;for(var t,a=d3.event,r=e.getBoundingClientRect();t=a.sourceEvent;)a=t;return a.changedTouches&&(a=a.changedTouches[0]),[a.clientX-r.left-e.clientLeft,a.clientY-r.top-e.clientTop]}return d3.mouse.apply(this,arguments)}),vs=d3.interpolate,ms=d3.interpolateRgb,xs=d3.range,bs=d3.timeSunday,Cs=d3.timeMonday,ws=d3.timeTuesday,ks=d3.timeWednesday,Os=d3.timeThursday,Ss=d3.timeFriday,As=d3.timeSaturday,Ps=d3.timeSeconds,Ts=(d3.timeMinutes,d3.timeHours),Es=d3.timeDays,Ls=d3.timeWeeks,zs=d3.timeMonths,Ds=d3.timeYears,Ms=d3.format,js=d3.timeFormat,Rs=d3.utcFormat,Is=d3.timeParse,Hs=d3.xhr,Bs=(d3.json,d3.timer,d3.brushX),Fs=d3.brushY,Vs=d3.topojson,Ns=(d3.versor,"ordinal"),_s="time",Ws="numeric",Ys="text",Xs="tspan",Us="path",Gs="circle";RECT_ELEMENT="rect",LINE_ELEMENT="line",DIV_ELEMENT="div";var Zs="fadeAll",Qs="fadeOneByOne",qs="fadeRandom",Ks="fade",$s="sizing",Js="sizingRandom",ec="randomOut",tc="vertical",ac="verticalAll",rc="vertPathTween",nc="vertPathTweenAll",ic="horizontalAll",oc="horiPathTween",lc="strokeTween",sc="pointTween",cc="pointbypoint",dc="allseries",uc="onebyone",hc="fanonebyone",fc="fanAll",gc="fan",pc="wheel",yc="inner",vc="center",mc="left",xc="right",bc="bottom",Cc="top",wc="fixedTop",kc="vertical",Oc="horizontal",Sc="inner",Ac="outer",Pc="middle",Tc="bar",Ec="bullet",Lc="gantt",zc="waterfall",Dc="area",Mc="arearange",jc="line",Rc="scatter",Ic="bubble",Hc="bubblepie",Bc="pie",Fc="dial",Vc="funnel",Nc="pyramid",_c="web",Wc="heatmap",Yc="sunburst",Xc="packedbubble",Uc="treemap",Gc="wordcloud",Zc="datalabels",Qc="stackLabels",qc="innerLabel",Kc="parentLabels",$c="x",Jc="y",ed="z",td="geo",ad="per",rd="splitper",nd="maxper",id="percent",od="splitpercent",ld="maxpercent";\nSo.imageFilePath=window.location.protocol+"//"+window.location.hostname+"/src/images/",So.fontProperties={minsize:15,maxsize:40,ratio:.038},So.requireXDataSorting=!1,So.dataEncoded=!1;var sd=window.btoa||function(e){e=String(e);var t,a,r,n,i,o,l,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,d=[];if(/[^\\x00-\\xFF]/.test(e))throw Error("InvalidCharacterError");for(;c<e.length;)t=e.charCodeAt(c++),a=e.charCodeAt(c++),r=e.charCodeAt(c++),n=t>>2,i=(3&t)<<4|a>>4,o=(15&a)<<2|r>>6,l=63&r,c===e.length+2?(o=64,l=64):c===e.length+1&&(l=64),d.push(s.charAt(n),s.charAt(i),s.charAt(o),s.charAt(l));return d.join("")};!function(){var e=function(t,a){var r=t.nodeType;if(3==r)a.push(t.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"));else if(1==r){if(a.push("<",t.tagName),t.hasAttributes())for(var n=t.attributes,i=0,o=n.length;o>i;++i){var l=n.item(i);a.push(" ",l.name,"=\'",l.value,"\'")}if(t.hasChildNodes()){a.push(">");for(var s=t.childNodes,i=0,o=s.length;o>i;++i)e(s.item(i),a);a.push("</",t.tagName,">")}else a.push("/>")}else{if(8!=r)throw"Error serializing XML. Unhandled node of type: "+r;a.push("\x3c!--",t.nodeValue,"--\x3e")}};Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){for(var t=[],a=this.firstChild;a;)e(a,t),a=a.nextSibling;return t.join("")},set:function(e){for(;this.firstChild;)this.removeChild(this.firstChild);try{var t=new DOMParser;t.async=!1,sXML="<svg xmlns=\'http://www.w3.org/2000/svg\'>"+e+"</svg>";for(var a=t.parseFromString(sXML,"text/xml").documentElement,r=a.firstChild;r;)this.appendChild(this.ownerDocument.importNode(r,!0)),r=r.nextSibling}catch(n){throw new Error("Error parsing XML string")}}}),Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(e){this.innerHTML=e}})}(),function(){try{document.createElement("div").style.setProperty("opacity",0,"")}catch(e){var t=window.Element.prototype,a=t.setAttribute,r=t.setAttributeNS,n=window.CSSStyleDeclaration.prototype.setProperty;t.setAttribute=function(e,t){a.call(this,e,t+"")},t.setAttributeNS=function(e,t,a){r.call(this,e,t,a+"")},window.CSSStyleDeclaration.prototype.setProperty=function(e,t,a){n.call(this,e,t+"",a)}}}(),So.charts=function(e,t){var r=a(e)&&a(t);if(r)return o(e,t);var n=i(e,t);return n&&n.draw(),n},So.maps=function(e,t){return e.isD3Selection||(e=d3.select(e)),new Rn(e,t)},c.prototype.prepareLayout=function(){var e=this;Dl++,e.id="ZC_"+Dl,e.idNumeric=Dl;try{var t=this.userdata;e.createHelperElements(),e.handleHiddenContainer(),e.chartWidth=e.getChartDimension("width"),e.chartHeight=e.getChartDimension("height"),c.helpers.initializeChartHolders(e),e.setCanvasDimension(),e.chartTypes=So.DataProcessor.helpers.getAllChartTypes(t,"object"),e.chartFontProp={},e.globalProp=u(t,{width:e.canvasarea.width,height:e.canvasarea.height},e.chartFontProp),e.themeoptions=e.getThemeOptions(e.globalProp),t.metadata||So.setDefaultOptions("metadata",t),e.defsLocation=tt(),e.svg.append("defs")}catch(a){c.helpers.handleErrors(e,a)}};var cd={getPatternSvg:function(){var e=this,t=e.patternSVG;if(!ut(t)){var a=Ut(e.container.node());t=e.patternSVG=Rl(a).select("svg.svgPattern")}return t},getDocumentIndex:function(){var e=this;return ut(e.DOCUMENT_INDEX)||(e.DOCUMENT_INDEX=Gt(this.container.node())),e.DOCUMENT_INDEX},getBaseContainer:function(){var e=this,t=e.getDocumentIndex();return ut(e.BASE_HELPER_CONTAINER)||(e.BASE_HELPER_CONTAINER=Ll[t].BASE_HELPER_CONTAINER),e.BASE_HELPER_CONTAINER},createHelperElements:function(){var e=this,t=Ut(e.container.node()),a=Rl(t).select("svg.svgPattern");if(a.empty()){var r=Nt(t),n=Rl(t),i=Qt(n,"div",[1],".","class","__baseZC_Container__");i.styles({position:"absolute",left:Ml+Sl,top:Ml+Sl}),e.patternSVG=Qt(i,"svg",[1],".","class","svgPattern").attrs({version:"1.1",xmlns:d3.namespaces.svg}),Qt(e.patternSVG,"defs",[1]);var o=zl++;r.ZC_DOCUMENT_INDEX=o,Ll[o]={BASE_HELPER_CONTAINER:i,EFFECTS:{}}}else e.patternSVG=a},handleHiddenContainer:function(e){var t=this,a=t.container;if(e&&ut(t.originalContainer))t.originalContainer.node().appendChild(t.d3container.node()),t.container.remove(),t.container=t.originalContainer,delete t.isHiddenCoainer,delete t.originalContainer;else{var r=a.node();if(Pt(r)){var n=r.cloneNode(0),i=t.getBaseContainer();i.node().appendChild(n),n.style.setProperty("display","block","important"),t.isHiddenCoainer=!0,t.originalContainer=a,t.container=d3.select(n)}}},updateCanvasArea:function(){var e=this,t=e.systemConf;e.container.selectAll("div.d3container").styles({position:"relative",width:e.getChartDimension("width")+Sl,height:e.getChartDimension("height")+Sl});var a=e.chartParentElement=e.container.selectAll("div.canvas-component");a.styles({position:"relative",width:e.canvasarea.width+"px",height:e.canvasarea.height+"px"});var r=e.container.selectAll("div.canvas-property");r.styles({position:"absolute",width:e.canvasarea.width+"px",height:e.canvasarea.height+"px"}),e.updateCommonBBSProp(r,null,t.canvas,"canvas")},getThemeOptions:function(e){var t,a,r=this,n=So.charttypenames.values(),i=r.chartTypes.map(function(e){return e.name}),o=null;return r.userdata.canvas&&(o=r.userdata.canvas.theme),a=new So.defaultTheme(e),n.map(function(t){-1!==i.indexOf(t)&&So.setDefaultOptions(t,a.chart.plot.plotoptions,e)}),ut(So[o])?(t=new So[o](e),t=Cd(a,t,!0,!0)):t=a,t},getChartDimension:function(e){var t=this,a={width:960,height:400};return t.isHiddenCoainer||(a[e]=Dt(t.container,e,!0)),a[e]},setCanvasDimension:function(e,t){var a=this;e||t||(e=a.getChartDimension("width"),t=a.getChartDimension("height")),this.canvasarea={left:0,top:0,right:0,bottom:0,width:e,height:t}},setChartDimension:function(){var e=this,t=e.systemConf,a=t.canvas.border,r=a.show?st(a,"size",0,10,e.canvasarea.width,e.canvasarea.height):0;e.chartarea={left:e.canvasarea.left+r,top:e.canvasarea.top+r,right:e.canvasarea.right-r,bottom:e.canvasarea.bottom-r,width:e.canvasarea.width-2*r,height:e.canvasarea.height-2*r},e.plotarea=Object.create(e.chartarea)},applyChartProperties:function(){var e=this,t=e.systemConf,a=e.chartHeight,r=t.canvas.title,n=t.canvas.subtitle,i=t.credits||{},o=r.show&&ma(e,"title",a),l=n.show&&ma(e,"subtitle",a),s=i.enabled===!0&&ma(e,"credits",a);if(s){{So.setDefaultOptions("credits",e.systemConf,e.globalProp)}e.drawTitle(e.systemConf.credits,"credits")}o&&("bottom"===r.vAlign&&"bottom"===n.vAlign&&n.show?e.drawTitle(t.canvas.subtitle,"subtitle"):e.drawTitle(t.canvas.title,"title")),l&&("bottom"===n.vAlign&&"bottom"===r.vAlign&&r.show?e.drawTitle(t.canvas.title,"title"):e.drawTitle(t.canvas.subtitle,"subtitle")),e.plotarea=Object.create(e.chartarea),e.container.selectAll("g.plotareaBorder-property").selectAll("line","path").style("border","");var c=t.chart,d=parseFloat(c.marginLeft),u=parseFloat(c.marginRight),h=parseFloat(c.marginTop),f=parseFloat(c.marginBottom),g=d+u>e.plotarea.width?0:d,p=d+u>e.plotarea.width?0:u,y=h+f>e.plotarea.height?0:h,v=h+f>e.plotarea.height?0:f;e.plotarea.left+=g,e.plotarea.right+=p,e.plotarea.bottom+=v,e.plotarea.top+=y,e.plotarea.width=e.plotarea.width-g-p,e.plotarea.height=e.plotarea.height-v-y},drawTitle:function(e,t){var a=this,r=a.svg,n=a.systemConf,i=ut(e.x)&&ut(e.y),o=window.location,l={top:lt(e.marginTop,0),right:lt(e.marginRight,0),bottom:lt(e.marginBottom,0),left:lt(e.marginLeft,0)},s=r.selectAll("g.chart"+t),d=i?{x:e.x+l.left,y:e.y+l.top,dy:"1",textAnchor:"left"===e.hAlign?"start":"right"===e.hAlign?"end":"middle"}:c.helpers.align(e.hAlign,e.vAlign,a.chartarea,l),u=e.imageUrl,h=!ut(u),f=h?""===e.text?Al:"text":"image";if(f!==Al){var g=Qt(s,f,[e],".","class",t);if(ut(e.href)){var p=function(){var t=J(e.href);if(t){var a=e.target;"newtab"===a||"newwindow"===a?window.open(e.href,"popUpWindow","newwindow"===a?"status=yes":""):o.href=e.href}else nl.log("invalid URL for credits")},y={click:p},v={tap:p};cn(g,y,v)}if(h){var m=a.userdata.canvas?a.userdata.canvas.fontColor:null;g.attrs({x:d.x,y:d.y,dy:d.dy+"em","text-anchor":d.textAnchor}).styles({cursor:ut(e.href)?Tl:"auto",display:"block"}).text(K(e.text)),e.tooltip===!0&&aa(g),ta(g,[{fontColor:"subtitle"!==t||ut(e.fontColor)||ut(m)?e.fontColor||m:"#CCCCCC"},e,n.canvas,dd])}else g.attrs({x:d.x+("right"===e.hAlign?-e.imageWidth:0),y:d.y+("bottom"===e.vAlign?-e.imageHeight:0),width:e.imageWidth,height:e.imageHeight,"xlink:href":e.imageUrl}).styles({cursor:ut(e.href)?Tl:"auto",display:"block"});var x=q(g.node()),b={left:i?e.x+l.left:x.x,top:i?e.y+l.top:x.y,width:x.width,height:x.height},C={left:l.left,top:l.top,right:a.canvasarea.width-l.right,bottom:a.canvasarea.height};if(qt(g.node(),K(e.text),b,C,"bottom","..",{left:5,right:5,top:5,bottom:5}),!i){var w=x.height+l.bottom+l.top;"top"===e.vAlign&&(a.chartarea.top+=w,a.chartarea.height-=w),"bottom"===e.vAlign&&(a.chartarea.height-=w)}}s.selectAll(f===Al?"text,image":"image"===f?"text":"image").style("display",Al)},updateCommonBBSProp:function(e,a,r,n){var i,o=this,l=o.systemConf,s=r.border||{},c=r.background||{},d=r.shadow||{};e.styles({"background-color":c.color,opacity:c.alpha});var u=null,h=kd(c,"gradients.show")===!0;if(h){var f,g="";if(ut(c.gradients.useCSS)?f=c.gradients.useCSS:(ut(c.gradients.stopColor)&&c.gradients.stopColor.map(function(e,t){var a=ut(c.gradients.stopOffset)&&ut(c.gradients.stopOffset[t])?" "+c.gradients.stopOffset[t]:"";g+=0===t?e+" "+a:","+e+a}),"radial"===c.gradients.type?f="radial-gradient("+g+")":"linear"===c.gradients.type&&(f="linear-gradient("+g+")")),ud.WEBKIT)u="-webkit-"+f;else if(ud.FIREFOX)u="-moz-"+f;else if(ud.IE){u="-ms-"+f;var p=ut(c.gradients.stopColor)?"linear"===c.gradients.type?"progid:DXImageTransform.Microsoft.gradient(startColorstr="+(c.gradients.stopColor[0]||"black")+", endColorstr="+(c.gradients.stopColor[1]||"white")+")":"progid:DXImageTransform.Microsoft.Alpha(opacity=100, finishopacity=0, style=2)":null;e.style("filter",p)}}if(ut(c.imageUrl)&&(u="url("+c.imageUrl+")"),(1!==ud.IE||0!==ud.VERSION.indexOf("9."))&&e.styles({"background-image":u,"background-repeat":c.imageRepeat,opacity:c.alpha}),s.show===!0&&"canvas"===n){i="plotarea"===n?a:e;var y="canvas"===n?st(l.canvas.border,"size",0,10,o.canvasarea.width,o.canvasarea.height):st(l.chart.plot.border,"size",0,10,o.plotarea.width,o.plotarea.height);y=Od(y,2),i.styles({border:y+"px "+s.style+" "+s.color,"border-radius":t(s.radius)+"px"}),i.node().border={size:y,clr:s.color}}else i="plotarea"===n?a:e,"plotarea"!==n&&i.style("border","");if(d.show===!0){var v=d.x+"px "+d.y+"px "+d.blur+"px "+d.color;d.inset===!0&&(v+=" inset"),e.style("box-shadow",v)}else e.style("box-shadow","")},updatePlotareaProp:function(){var e=this,t=e.systemConf,a=e.container,r=a.selectAll("div.plotarea-property"),n=e.staticPaneSVG.selectAll("g.plotareaBorder-property"),i={position:"absolute",left:e.plotarea.left+"px",top:e.plotarea.top+"px",width:e.plotarea.width+"px",height:e.plotarea.height+"px","pointer-events":Al,"box-sizing":"border-box"};i[ud.prefix.css+"box-sizing"]="border-box",a.selectAll("div.plotarea-property").styles(i),n.attrs({transform:"translate("+e.plotarea.left+","+e.plotarea.top+")"}),e.updateCommonBBSProp(r,n,t.chart.plot,"plotarea")},drawPlotareaClippath:function(){var e=this,t=e.systemConf,a=at(t,"chart.zoom.x")||ut(e.scrolledX),r=at(t,"chart.zoom.y")||ut(e.scrolledY),n=e.dataObject.getAxisRotated(),i=Y(e),o=(n?r:a)?e.plotarea.left:-i.left+e.plotarea.left,l=(n?a:r)?e.plotarea.top:-i.top+e.plotarea.top,s=e.plotarea.width+((n?r:a)?0:i.left+i.right),c=e.plotarea.height+((n?a:r)?0:i.top+i.bottom),d={name:"rect",id:e.id,x:o,y:l,width:s,height:c},u={chartObj:e},h=fd.get(xd,"rect",d,u);e.wrap.selectAll("g.seriesClippathholder").attr("clip-path","url("+e.defsLocation+"#"+h+")"),e.staticPaneSVG.selectAll("g.labelClippathholder,g#zcscatterCliphighlight,g#zcareaCliphighlight,g#zcbarCliphighlight").attr("clip-path","url("+e.defsLocation+"#"+h+")")},getChartSeriesColor:function(){var e=this,t=e.systemConf,r=[],n=t.legend;if(n.colors)if(a(n.colors))r=n.colors;else{var i=[];for(var o in n.colors)n.colors.hasOwnProperty(o)&&i.push(n.colors[o]);r=i}else if(n.imagePallete){e.patternImageSizes=[];var l=So.legutil.imagePallete.get(n.imagePallete);e.imagePallete=l;var s="stripes"===n.imagePallete?null:50,c=Qt(e.getPatternSvg(),"image",[1],".","class","tempImage");l.map(function(t,a){c.attr("xlink:href",t);var r=q(c.node());e.patternImageSizes[a]=[s||r.width||3,s||r.height||3]}),c.remove()}else n.colorPallete&&(r="monochrome"===n.colorPallete.type?So.legutil.getMonochromeColorPallette(n.colorPallete.options.monochrome):So.legutil.colorpallete.get(n.colorPallete.options.multicolor)||So.legutil.colorpallete.get("flat-ui-colors"));if(n.patterns)e.patternPallete=n.patterns;else if(n.patternPallete){var d=So.legutil.patternPallete.get(n.patternPallete);!ut(d)&&a(n.patternPallete)&&n.patternPallete.length&&(d=n.patternPallete),e.patternPallete=d}ut(r)&&(e.seriesColor=r.slice(0,r.length),Pd.isQuantileColorScale(e)||e.seriesdata.map(function(t,a){ut(t.color)&&(e.seriesColor[a]=t.color)}))},resetdata:function(e){var t=this;t.chartWidth=t.getChartDimension("width"),t.chartHeight=t.getChartDimension("height"),t.setCanvasDimension(),t.chartTypes=So.DataProcessor.helpers.getAllChartTypes(e,"object"),t.processUserData(e,!0),t.setChartDimension(),t.globalProp=u(e,{width:t.canvasarea.width,height:t.canvasarea.height},t.chartFontProp),t.events={},t.dataObject&&(t.dataObject.formattedData={x:[],y:[]})},destroy:function(){var e=this;e.eventHandler&&(clearTimeout(e.eventHandler.mouseouttimer),clearTimeout(e.eventHandler.mousemovetimer),clearTimeout(e.eventHandler.tooltipElement.timeout),e.eventHandler.tooltipElement.destroy()),e.container.datum(null),e.d3container.remove(),e.destroying=!0},redraw:function(){var e=this,t=e.systemConf;e.updating=!0,e.svg.styles({width:e.getChartDimension("width")+Sl,height:e.getChartDimension("height")+Sl}),e.staticPaneSVG.styles({width:e.getChartDimension("width")+Sl,height:e.getChartDimension("height")+Sl}),e.resetdata(t),c.helpers.constructChartGroups(e),e.render(!0)},drawPlotBorder:function(){var e=this,t=e.systemConf.chart.plot.border,a=e.container.selectAll("g.plotareaBorder-property");if(ut(t)&&t.show===!0){var r=a.selectAll("path.plotBorderPath"),n=st(t,"size",0,10,e.plotarea.width,e.plotarea.height),i=Od(e.tickarea,{left:0,right:0,top:0,bottom:0}),o=-i.left||.5,l=-i.top||.5,s=e.plotarea.width+i.right+i.left,c=e.plotarea.height+i.bottom+i.top,d=It(t.radius),u=Jt(o,l,s,c,d,!1,!1);n=null==n||""===n?2:n,r.styles({"stroke-width":n,stroke:t.color,"stroke-dasharray":P(t.style,n),fill:Al,"pointer-events":Al}).attrs({d:u}),a.selectAll("line").style("stroke",Pl)}},handleNoData:function(e,t){var a=this,r=a.systemConf,n=Od(t,a.wrap.selectAll("g.nodatahandler"));if(ut(e.htmlEl)){var i=Qt(a.container.selectAll("div.canvas-component"),"div",[1],".","class","nodatahandler");i.style("position","absolute").html(e.htmlEl);var o=i.node();i.styles({left:Od(e.x,(a.chartWidth-o.offsetWidth)/2)+"px",top:Od(e.y,(a.chartHeight-o.offsetHeight)/2)+"px"})}else if(ut(e.imageUrl)){var l=Qt(n,"image",[1]);l.attrs({x:e.x||a.chartarea.width/2-50,y:e.y||a.chartarea.height/2-50,width:100,height:100,"xlink:href":e.imageUrl})}else if(ut(e.text)){var s=Qt(n,"text",[e],".","class","nodata");s.attrs({x:e.x||a.chartarea.width/2,y:e.y||a.chartarea.height/2,"text-anchor":"middle"}).text(K(e.text||"No Data")),ta(s,[e,r.canvas,dd])}},showLoading:function(){var e=this,t=e.systemConf,a=t.loader;if(a.enabled===!0&&a.type!==Al){var r=Qt(this.container.selectAll("div.d3container"),"div",[1],".","class","loading");r.style("position","absolute").html(c.helpers.getLoader(e,a)),ta(r,[a,t.chart,t.canvas,dd],!0);var n=r.node();r.styles({left:e.chartarea.width/2-n.offsetWidth/2+"px",top:e.chartarea.height/2-n.offsetHeight/2+"px"})}},hideLoading:function(){this.container.selectAll("div.loading").remove()},fixLegendPosition:function(){var e=this,t=e.legendarea,a=e.systemConf.legend;if(a.enabled===!0){var r=Er(e.plotarea,e,!1),n=jd.isContinousLegend(e);if("y"===t.adjust)if(n){var i=$t(t.element.node()).translate;t.element.attr("transform","translate("+i[0]+","+r[1]+")")}else t.element.style("top",r[1]+Sl)}}};Et(c.prototype,cd),c.helpers={initializeChartHolders:function(e){var t,a,r=e.container,n=r.selectAll("div.d3container");if(!n.empty()){var i=n.datum();i&&i.destroy&&i.destroy(),n.remove()}t=e.getChartDimension("width"),a=e.getChartDimension("height"),n=e.d3container=Qt(r,"div",[e],".","class","d3container");var o={width:t+"px",height:a+"px",position:"relative",left:"0px",top:"0px","box-sizing":"border-box","-moz-user-select":Al,"-webkit-user-select":Al,"-ms-user-select":Al,"user-select":Al};o[ud.prefix.css+"box-sizing"]="border-box",n.styles(o),Qt(n,"div",[1],".","class","canvas-property"),Qt(n,"div",[1],".","class","plotarea-property"),Qt(n,"div",[1],".","class","zcoverview");var l=Qt(n,"div",[1],".","class","canvas-component");l.style("-webkit-tap-highlight-color",Pl);var s=Qt(e.getBaseContainer(),"div",[1],"#","id","zctooltip"+e.idNumeric);s.node().isTooltipContainer=!0,e.tooltip={element:s},e.tooltip.element.styles({position:"fixed",display:"inline-block",visibility:"hidden","white-space":"nowrap","background-color":"white",border:"1px solid","-webkit-tap-highlight-color":Pl});var d=c.helpers.positionSVG(e);e.svg=Qt(l,"svg",[1],".","class","svgarea",d),e.staticPaneSVG=Qt(l,"svg",[e],".","class","static",d).style("pointer-events",Al),e.legendarea.element=l.append("div").attr("class","legendarea"),e.notes=l.append("div").attr("class","zcnotes")},removeChartHolders:function(e){var t=e.container;t.select("div.d3container").remove(),t.select("div.zc-staticPane").remove(),t.select("div.zc-chartPane").remove()},align:function(e,t,a,r){var n={};return"center"===e?(n.x=a.width/2+r.left,n.textAnchor="middle"):"left"===e?(n.x=a.left+r.left,n.textAnchor="start"):"right"===e&&(n.x=a.width+a.left-r.right,n.textAnchor="end"),"top"===t?(n.y=a.top+r.top,n.dy=1):"bottom"===t&&(n.y=a.height+a.top-r.bottom,n.dy=-.21),n},getLoader:function(e,t){var a=t.htmlEl,r=t.imageUrl,n=t.type,i=t.text,o=t.colors;if(a)return a;if(r)return"<img src="+r+" height="+t.imageHeight+" width="+t.imageWidth+">";var l="",s=null;if(n){var c=e.container.selectAll("div.loading");o=o&&o.length?o:null,s=Tu(c,{type:n,colors:o});var d=new XMLSerializer;l=d.serializeToString(s)}return i&&(l+="<p style=position:relative;display:inline-block>"+i+"</p>"),l},constructChartGroups:function(e){function t(e){return e?[1]:[]}var a=e.svg,r=e.systemConf,n=e.chartHeight,i=(e.chartWidth,r.canvas.title.show===!0&&ma(e,"title",n));Qt(a,"g",t(i),".","class","charttitle");var o=r.canvas.subtitle.show===!0&&ma(e,"subtitle",n);Qt(a,"g",t(o),".","class","chartsubtitle");var l=r.credits&&r.credits.enabled===!0&&ma(e,"credits",n);Qt(a,"g",t(l),".","class","chartcredits");var s=e.wrap=Qt(a,"g",[r],".","class","xychart");if(e.nochartdata)Qt(s,"g",[1],".","class","nodatahandler");else{Qt(s,"g",[0],".","class","nodatahandler");var d=Qt(s,"g",[e.seriesdata],".","class","chartgroup"),u=r.chart.axes.xaxis.show===!0;Qt(d,"g",t(u),".","class","x-axis"),Qt(d,"g",[e.seriesdata],".","class","y-axis"),Qt(d,"g",[e.seriesdata],".","class","threshold");var h=Qt(d,"g",[e.seriesdata],".","class","seriesClippathholder"),f=Qt(h,"g",[e.seriesdata],".","class","seriesholder");e.filterEffectsID=L(e),f.attr("filter",e.filterEffectsID?"url("+e.defsLocation+"#"+e.filterEffectsID+")":null);var g=Qt(e.staticPaneSVG,"g",[e.seriesdata],".","class","labelClippathholder"),p=!1;e.dataObject&&(p=e.dataObject&&e.dataObject.noofBarEnabledSeries&&!e.dataObject.isCombinationalChart||e.dataObject.isHierarchy),p||Qt(g,"g",[e.seriesdata],".","class","labelholder"),Qt(e.staticPaneSVG,"g",[e.seriesdata],".","class","threshold");var y=Qt(e.staticPaneSVG,"g",[1],".","class","plotareaBorder-property"),v=r.chart.plot.border.show===!0;if(Qt(y,"path",t(v),".","class","plotBorderPath"),Qt(e.staticPaneSVG,"g",[1],".","class","eventgroup"),p){g.raise();var m=Qt(g,"g",[e.seriesdata],".","class","labelholder");m.style("pointer-events",Al)}var x=Qt(f,"rect",[1],".","class","dummy-rect-filter");x.style("pointer-events",Al),c.helpers.createLegendArea(e)}},handleErrors:function(e,t){e.breakOnErr=!0,at(e.systemConf,"canvas.events")&&it(e.systemConf.canvas.events.onerror,d3.event,e,t)},positionSVG:function(e){return{width:e.getChartDimension("width")+Sl,height:e.getChartDimension("height")+Sl,position:"absolute",top:0,left:0}},createLegendArea:function(e){var t=jd.isContinousLegend(e),a=(e.staticPaneSVG,e.container.selectAll("div.canvas-component"),Qt(e.staticPaneSVG,"g",t?[1]:[],".","class","legendarea"));t&&(e.legendarea.element=a)}},function(e){"use strict";function t(e,t){this.container=e,this.userdata=t,this.dataObject=null,this.dataset=null,this.svg=null,this.seriesColor=[],this.axes={x:{levels:[]},y:{groups:[]}},this.subrenderer=[],this.ismultiy=null,this.plotarea_approx=null,this.nochartdata=!1,this.chartRendered=!1,this.plot={},this.events={},c.call(this,e,t),this.initialize()}e.charts.get=function(e,a){return new t(e,a)},Lt(t,c),t.helpers=c.helpers,t.prototype.initialize=function(){var e=this;try{e.processUserData(e.themeoptions),e.setChartDimension(),e.legendHighlight=new So.legendHighlight(e,e.svg),t.helpers.constructChartGroups(e)}catch(a){t.helpers.handleErrors(e,a)}},t.prototype.draw=function(){this.render(!1)},t.prototype.render=function(e){var a=this;try{a.updateCanvasArea();var r=a.systemConf;if(a.applyChartProperties(),a.nochartdata)a.hideLoading(a.container),a.handleNoData(r.noDataHandler),a.chartRendered=!0,Ir(a,r.canvas.events,"chart",e?"onreload":"onload");else{if(a.getChartSeriesColor(),a.isAxisCategory=a.dataObject.isAxisCategory,a.isNonAxisMultiSeriesCategory=a.dataObject.isNonAxisMultiSeriesCategory,a.xymultiRenderer=a.isAxisCategory,a.data,So.legend.render(a,e),iu.updatePlotarea4BlockTooltip(a),So.annotation&&So.annotation.addBlockAnnotations(a),at(a.systemConf.chart,"scroll")&&a.systemConf.chart.scroll.enabled&&(So.setDefaultOptions("scroll",a.systemConf.chart,a.globalProp),a.brush=new pu(a,"x")),a.isAxisCategory&&(a.systemConf.chart.width||a.systemConf.chart.height)&&Ei.initialize(a),Ir(a,r.chart.axes.events,null,"init"),a.drawPlotBorder(),a.isAxisCategory)So.axis.render(a,a.chartWidth,a.chartHeight,e);else if(a.dataObject.isPolarAxisCategory||a.dataObject.hasLevelMarker){var n=a.dataObject.hasLevelMarker?"y":"x";So.axis.polar.render(a,n)}if(a.zscale=a.dataObject.hasZaxis&&!a.dataObject.isHierarchy?So.scale.getScale(a,a.dataObject,a.plotarea,a.axes.x.orient,null,a.dataset,"z"):null,Ir(a,r.chart.axes.events,null,e?"onreload":"onload"),a.updatePlotareaProp(),a.plot.renderer)a.plot.renderer.draw(e);else{var i=a.plot.renderer=So.plot.render(a,e);i.draw(!1)}a.isAxisCategory&&a.drawThreshold(e),a.handleEvent(e),a.drawPlotareaClippath(),G(a.wrap.selectAll("rect.dummy-rect-filter"),{width:a.plotarea.width,height:a.plotarea.height})}}catch(o){t.helpers.handleErrors(a,o)}},t.prototype.processUserData=function(e,t){var a,r,n,i=this;i.systemConf=a=Cd(e,i.userdata,!0,!0),r=kd(a,"seriesdata")||{},i.seriesdata=n=r.chartdata,t||Ir(i,a.canvas.events,"chart","init"),i.nochartdata=!ut(n)||ut(n)&&n.length<1,i.nochartdata?i.seriesdata=null:(i.dataset=new So.dataset.get(a,i),i.preProcessor=new So.PreProcessor(i),i.dataObject=i.getDataObject(),i.dataset.setDataObj(i.dataObject),i.nochartdata=i.dataObject.totalnoofdatas<1,i.axes.rotated=i.dataObject.getAxisRotated(),i.axes.rotated?(i.axes.x.orient="left",i.axes.y.orient="bottom"):(i.axes.x.orient="bottom",i.axes.y.orient="left"),i.ismultiy=i.getAxesCount("y")>1,i.ismultix=i.getAxesCount("x")>1)},t.prototype.getDataObject=function(){var e,t=this;return e=So.chartcategory.hierarchy.indexOf(t.chartTypes[0].value)>-1?new So.hierarchymodel.get(t):new So.DataProcessor(t.systemConf,t.dataset,t),t.seriesdata=e.isHierarchy?wd(t.seriesdata):t.seriesdata,e},t.prototype.getAxesCount=function(e){var t=this,r=1,n=t.systemConf.metadata;if("x"===e){var i=t.dataset.getColumnIdx(e),o=n.columns[i].datatype,l=Od(n.columns[i][o],{}),s=l.subfunction;ut(t.dataObject.hierarchical)?r=t.dataObject.hierarchical.finalDepth+1:a(l.groupby)&&l.groupby.length?r=l.groupby.length+1:"AUTO"===l.groupby&&(r=So.HierarchicalTimeDataAdapter.getAutoGroupOrder(s).length+1),t.axes[e].count=r}else{var c=n.axes.y;r=t.axes[e].count=c.length}return r},t.prototype.drawThreshold=function(e){if(So.axis.threshold){var t=this;t.cache.thresholdCustomPoints=[],So.axis.threshold(t,e)}},t.prototype.handleEvent=function(e){var t=this,a=t.systemConf;if(e)t.eventHandler.updateParams(t);else{{var r=t.staticPaneSVG.selectAll("g.eventgroup").styles({"pointer-events":"visible"}),n=r.append("g").attr("id","zcareaCliphighlight"),i=(n.append("g").attr("id","zcareahighlight"),r.append("g").attr("id","zcbarCliphighlight"));i.append("g").attr("id","zcbarhighlight")}if(a.tooltip.crosshair){var o=Qt(r,"g",[1],".","class","crosshair");o.style("visibility","hidden"),Qt(o,"line",[1],".","class","x-crosshair"),Qt(o,"line",[1],".","class","y-crosshair")}{var l=r.append("g").attr("id","zcscatterCliphighlight");l.append("g").attr("id","zcscatterhighlight"),r.append("g").attr("class","zcplothighlight").styles({opacity:0,"pointer-events":Al})}t.dataObject.isHierarchy&&r.append("g").attr("id","zchierarchyhighlight").styles({opacity:0,fill:Al,"pointer-events":Al}),t.eventHandler=So.events.mouseevents(t,t.tooltip.element,a,t.plotarea,t.dataset,t.axes.x.scale,t.barscale1,t.barscale2,t.axes.y.groups,r,t.seriesColor,t.labelHighlighter),t.eventHandler.initializeListener()}(t.xymultiRenderer||t.dataObject.isPolarAxisCategory)&&G(t.eventHandler.trackerElement,t.plotarea),t.isAxisCategory&&(t.systemConf.chart.width||t.systemConf.chart.height)&&Ei(t)},t.prototype.addRemoveSeries=function(e,t,a,r){var n=this,i=n.systemConf;if(n.dataObject.formattedData={x:[],y:[]},n.dataObject.initialize("addorremoveseries"),Ir(n,i.chart.axes.events,null,"init"),n.isAxisCategory){var o=n.brush&&n.brush.extent;n.updateZscale(),r?n.axes.y.groups.forEach(function(e,t){n.updateScale([t,0],"y")}):n.updateScale(a,"y"),n.updateScale(0,"x",o),n.dataObject.hierarchical&&(n.axes.x.rangeScale=n.axes.x.scale.copy(),n.axes.x.rangeScale.outerPaddingPx=n.axes.x.scale.outerPaddingPx,n.dataObject.hierarchical.groupByDiscreteTime&&n.axes.x.rangeScale.domain(d3.range(n.axes.x.scale.domain().length)),n.dataObject.hierarchical.setRanges(n.axes.x.rangeScale),n.axes.x.levels.forEach(function(e,t){n.updateScale(a,"x",null,t+1)}),n.dataObject.hierarchical.categoryTree&&Cr.updateTickEventHandler(n,e.disabled)),n.drawThreshold(!0),n.drawPlotareaClippath(),n.updatePlotareaProp()}else n.dataObject.isPolarAxisCategory&&So.axis.polar.render(n,"x");Ir(n,i.chart.axes.events,null,"onreload"),n.events={},n.plot.renderer.draw(!0),(n.isAxisCategory||n.dataObject.isPolarAxisCategory)&&(G(n.eventHandler.trackerElement,n.plotarea),n.eventHandler.updateParams(n),(n.systemConf.chart.width||n.systemConf.chart.height)&&Ei(n,"addorremoveseries"))},t.prototype.pushDataPoint=function(e,t,r){var n=this,i=n.dataObject.isCombinationalChart,o=i?Ko.arrangeSeriesRenderingOrder(n.seriesdata):n.seriesdata;if(!Array.isArray(e)){var l=[],s=[];l.push(e),s.push(t),e=l,t=s}e.forEach(function(e,l){var s,c,d,u=o[e],h=i?u.seriesidx:e,f=n.seriesdata[h],g=n.renderer[h];if(d=a(r)?r[l]:r,f.data[0].push(t[l]),d){s=f.data[0][0];var p=f.data[0].shift();ut(g.shiftInfo())?(c=g.shiftInfo(),c.count++):(c={},c.count=0),c.point=s,c.shiftedData=p,g.shiftInfo(c)}else g.shiftInfo(null);n.ismultiy&&n.updateScale(f,"y")}),n.dataObject.initialize(),n.updateScale(null,"x"),n.ismultiy||n.updateScale(n.seriesdata[0],"y"),n.plot.renderer.draw(!0),n.drawThreshold(!0),n.eventHandler.updateParams(n)},t.prototype.popDataPoint=function(e){var t=this,a=t.seriesdata[e];a.data.forEach(function(e){e.pop()}),t.dataObject.initialize(),t.updateScale(a,"x"),t.updateScale(a,"y"),t.plot.renderer.draw(!0),t.drawThreshold(!0),t.eventHandler.updateParams(t)},t.prototype.zoomON=function(e){var t=this;t.changeZoomType(e);var a=t.zoom;a||t.eventHandler.initializeZoomListener()},t.prototype.zoomOFF=function(){var e=this,t=e.zoom;t&&t.reset(),e.changeZoomType(Al)},t.prototype.zoomX=function(e,t){var a=this;a.changeZoomType("x"),a.zoom||a.eventHandler.initializeZoomListener();var r=a.zoom;r.zoomed(null,e,t)},t.prototype.zoomY=function(e,t){var a=this;a.changeZoomType("y"),a.zoom||a.eventHandler.initializeZoomListener();var r=a.zoom;r.zoomed(null,e,null,t)},t.prototype.zoomXY=function(e,t,a){var r=this;r.changeZoomType("xy"),r.zoom||r.eventHandler.initializeZoomListener();var n=r.zoom;n.zoomed(null,e,t,a)},t.prototype.changeZoomType=function(e){var t=this,a=t.systemConf;a.chart.zoom||So.setDefaultOptions("zoom",a.chart,t.globalProp),a.chart.zoom.type=e},e.Chart=t}(So);var dd={};dd.fontFamily="\'Roboto\',\'Open Sans\',sans-serif",dd.fontColor="#616161",dd.fontStyle=null,dd.fontWeight=null,dd.fontL1Size=null,dd.fontL2Size=null,dd.fontL3Size=null,dd.DOMBorder="none";var ud=new function(){this.NETSCAPE=0,this.FIREFOX=0,this.OPERA=0,this.IE=0,this.SAFARI=0,this.MOZILA=0,this.CHROME=0,this.NONIE=1,this.WEBKIT=0;var e=navigator.userAgent.toLowerCase();this.OSX=-1!=e.indexOf("mac"),this.LINUX=-1!=e.indexOf("linux"),this.IPHONE=-1!=e.indexOf("iphone"),this.IPAD=-1!=e.indexOf("ipad"),this.ANDROID=-1!=e.indexOf("android"),this.IS_IOS=this.IPHONE||this.IPAD,this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,this.isMouseDevice=!(this.IS_IOS||this.ANDROID||-1!=e.indexOf("mobile")),this.uiwebview=this.IS_IOS&&!/safari/.test(e),this.PHANTOMJS=-1!==e.indexOf("phantomjs");var t="";this.detect=function(){var e=navigator.userAgent,a=e.length,r=navigator.vendor,n=window.opera,i="";n?(this.OPERA=1,t="o"):e.indexOf("Chrome")>-1?(this.CHROME=1,i="Chrome/",t="webkit"):e.indexOf("Firefox")>-1?(this.FIREFOX=1,i="Firefox/",t="moz"):e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1?(this.IE=1,i="MSIE ",t="ms"):r.indexOf("Apple")>-1?(this.SAFARI=1,i="Version/",t="webkit"):i="Unknown Browser",this.VERSION=e.substring(e.indexOf(i),a).match(/[0-9\\.]+/)[0]},this.detect(),this.NONIE=!this.IE,this.WEBKIT=this.SAFARI||this.CHROME,this.prefix={lowercase:t,css:t?"-"+t+"-":t,js:t?t[0].toUpperCase()+t.substr(1):t}};p.prototype={initialize:function(){var e=this;e.hierarchyLayout=!0,e.finalDepth=0,e.dataCount=0,e.categories=[],e.leafNodes=[],e.series=[],e.categoriesByDepth=[],e.globalChartType=e.originalSeries.type},setDepth:function(){function e(r,c,d,u){c>t.finalDepth&&(t.finalDepth=c),u=Od(u,""),r.forEach(function(r,h){ut(d)&&(r.parent=d),r.leaf?(r.index=t.dataCount++,a(r.data)&&r.data.forEach(function(e){e.index=r.index,e.level=u+h+"_"}),i.push(r),o.push(r[s])):(n[c]||(n[c]=[],l[c]=[]),l[c].push(r[s]),r.itemIndex=n[c].length,n[c].push(r),e(r.children,c+1,r,u+h+"_"))})}var t=this,r=t.categories,n=t.categoriesByDepth=[],i=t.leafNodes=[],o=t.leafCategories=[],l=t.categoriesList=[],s=t.dataType===_s||t.groupByDiscreteTime?"point":"value";e(r,0),l.reverse()},getCategories:function(){return this.categories},getCategoriesByDepth:function(e){return ut(e)||(e=0),e===this.finalDepth?this.leafNodes:e<this.finalDepth?this.categoriesByDepth[e]:void 0},getCategoriesByLevelIndices:function(e){var t=this,a=t.categories,r=e.length-1;return e.forEach(function(e,t){a=t===r?a[e]:a[e].children}),a},getParentByIndex:function(e,t){for(var a=this,r=a.leafNodes[e],n=null,i=a.finalDepth+1;i--;){if(r.depth===t){n=r;break}if(0===r.depth)break;r=r.parent}return n},setRanges:function(e){function t(t){r(t)?(t.rangeBand=i(t.children),m=e(d?t.children[0].index:t.children[0].point)-o(t.children[0],!0),t.range=[m,m+t.rangeBand]):(t.rangeBand=t.children.reduce(n,0),t.range=[t.children[0].range[0],t.rangeBand+t.children[0].range[0]]),b.push(t.rangeBand),C.push(t.range)}function r(e){return ut(e.children[0])&&e.children[0].leaf===!0}function n(e,t){return t.leaf?e+y+o(t,!0)+o(t):e+t.rangeBand}function i(t){if(c.categoryTree)return t.reduce(n,0);var a=t[0],r=t[t.length-1],i="point",l=y;\nif(c.groupByContinuousTime){if(l=0,ut(c.tickValues[a.index+1])){var s=c.tickValues[a.index],d=c.tickValues[a.index+1],u=e(d)-e(s);h=u/2}}else i="index";return e(r[i])-e(a[i])+o(a,!0)+o(r)+l}function o(e,t){return t&&e===l||!t&&e===s?f:h}var l,s,c=this,d=ut(e.bandwidth),u=c.finalDepth,h=0,f=0,g=c.leafNodes,p=sr(e);if(d){{var y=d&&e.bandwidth();e.range()}l=g[0],s=g[g.length-1],h=a(p)&&p.length>1?(p[1]-(p[0]+y))/2:0,f=e.outerPaddingPx,f=hl(f,h)}else{l=g[0],s=g[g.length-1];var v=So.scale.getContinuousRangeBand(e,c.leafCategories);h=v.rangeBand/2,f=v.outerPaddingInPixel}for(c.scaleList=[],c.rangeList=[];u--;){var m,x=c.getCategoriesByDepth(u),b=[],C=[];x.forEach(t),c.rangeList.push(C)}return c.scaleList}},p.getValuesByKey=function(e,t){var a=function(e){return e[t]};return e.map(a)},p.is3D=function(e){return a(e)&&a(e[0])},p.isArrayOfSeries=function(e){return p.is3D(e.data)&&ut(e.seriesname)},p.hasInnerSeries=function(e){return a(e.data)&&"object"==typeof e.data[0]&&ut(e.data[0].seriesname)},p.keysObject=function(e){var t={};return e&&e.length&&e.forEach(function(e){t[e.value]=e}),t},p.getValues=function(e){return ut(e)?e.map(function(e){return e.value}):null},p.getAllChildren=function(e,t){return t=Od(t,[]),e.children?(e.children.forEach(function(e){e.leaf?Array.prototype.push.apply(t,e.data):p.getAllChildren(e,t)}),t):e.data},So.HierarchicalDataAdapter=p,function(){"use strict";function e(e){p.call(this,e),this.dataType=Ns,this.categoryTree=!0,this.update(!0)}var t={update:function(e){e||this.initialize(),this.process(),this.setDepth()},process:function(){var e=this;e.originalSeries.forEach(this.searchHierarchy,this)},getSeries:function(e){return ut(e)?this.series[e]:this.series},searchHierarchy:function(e,t){function a(e,t,r){var n=p.keysObject(r);e.forEach(function(e){var o=p.hasInnerSeries(e),l=p.isArrayOfSeries(e),d=null;if(n[e.seriesname]?d=n[e.seriesname]:(d={value:l||o?Od(e.seriesname,""):"",depth:t,children:[]},c||r.push(d)),o)n[e.seriesname]||(n[e.seriesname]=d),a(e.data,t+1,n[e.seriesname].children),0===d.children.length&&zt(r,d);else{p.is3D(e.data)||(e.data=[e.data]);var h=p.keysObject(d.children);e.data.forEach(function(e){var a={value:e[s],depth:t+1,leaf:!0,data:[e]};c?e.seriesDisabled=!0:delete e.seriesDisabled,u(e[s])&&(h[e[s]]?h[e[s]].leaf?h[e[s]].data.push(e):h[e[s]].children&&!c&&h[e[s]].children.push(a):(c||d.children.push(a),h[e[s]]=a),i.data.push(e))}),0===d.children.length&&zt(r,d)}})}var r=this,n=r.chart,i=r.series[t],o=Od(n.dataset.getColumn("x"),{}),l=o.datatype,s=Od(o.dataindex,0),c=e.disabled,d=ut(o[l])&&ut(o[l].nullformatting),u=function(e){return d||ut(e)};r.series[t]||(i=r.series[t]=wd(e),i.data=[]),a(e.data,0,r.categories)}};Lt(e,p),Et(e.prototype,t),So.HierarchicalOrdinalDataAdapter=e}(),function(){function e(t,r,n,i,o){p.call(this,t),this.dataType=_s,this.chart=t,this.columnInfo=o,i?this.groupByDiscreteTime=!0:this.groupByContinuousTime=!0,a(n)?this.groupOrder=n.slice(0).reverse():"AUTO"===n&&(this.groupOrder=e.getAutoGroupOrder(o.time.subfunction)),this.groupByTime=!0,this.update(r)}function t(e){return c[e.getMonth()]}function r(e){return d[e.getDay()]}function n(e){var t=new Date(e.getFullYear(),0,1);return dl(((e-t)/864e5+t.getDay()+1)/7)}function i(e,t){var a=null;return e.reduce(function(e,r){return a=t.call(null,r),e[a]=e[a]||[],e[a].push(r),e},{})}function o(e,t){return e.map(function(e){return mn(e,null,t)})}function l(e){var a=function(e){return{YEAR:e.getFullYear(),QUARTER:Ln(e),MONTH:t(e),WEEK:n(e),DAY:r(e),timestamps:e.getTime(),data:e}};return e.map(a)}function s(e,t,a,r){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var o={depth:a};n.push(o),t?(o.leaf=!0,o.value=r?e[i].data.getTime():e[i].data,o.point=e[i].data.getTime()):(o.value=i,o.point=e[i][0].data,o.children=e[i])}return n}var c=["January","February","March","April","May","June","July","August","September","October","November","December"],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["YEAR","QUARTER","MONTH","WEEK","DAY"],h={YEAR:"YEAR",ABSQUARTER:"QUARTER",QUARTER:"QUARTER",MONTH:"MONTH",ABSMONTH:"MONTH",WEEK:"WEEK",ABSWEEK:"WEEK",ABSDAY:"DAY"},f={update:function(e){var t=this;t.groupByDiscreteTime&&(e=Od(t.chart.dataObject.findXCategories(),e)),t.dataCount=0,t.tickValues=o(e,t.columnInfo),t.process(),t.setDepth()},process:function(){function e(t,a,r){var n,l=a.shift();return t.forEach(function(t){l?(n=i(t.children,function(e){return e[l]}),t.children=s(n,!1,r,o),e(t.children,a.slice(0),r+1)):t.children=s(t.children,!0,r,o)}),t}var t=this,a=t.tickValues,r=0,n=Od(t.groupOrder,u),o=t.groupByDiscreteTime,c=l(a,r),d=n.slice(0),h=d.shift(),f=i(c,function(e){return e[h]}),g=0,p=s(f,!1,g,o);t.categories=e(p,d.slice(0),g+1)},getPossibleGroupBy:function(e,t){var a=e[0],r=e[e.length-1],n=a.getFullYear()===r.getFullYear(),i=t[0],o=e[e.length-1]-e[0],l=Tn(o);for(var s in l)if(l.hasOwnProperty(s)&&(l[s]>1||"YEAR"===s&&!n)){i=s;break}return i}};e.getAutoGroupOrder=function(e){var t=u.indexOf(h[e]);return u.slice(0,t)},Lt(e,p),Et(e.prototype,f),So.HierarchicalTimeDataAdapter=e}(),So.dataset.get=function(e,t){function r(e){var t,a=[];for(var r in l)if(l.hasOwnProperty(r)){var n="y"==r?Jl(l[r]):l[r];if(-1!=n.indexOf(e))return"y"==r&&l[r].map(function(t,r){var n=t.indexOf(e);-1!=n&&(a.push(r),a.push(n))}),t=r,{type:t,order:a}}}function n(){var e={},t=Object.keys(l).sort(function(e,t){return t.length>e.length?-1:t.length<e.length?1:0});return t.forEach(function(t){e[t]=l[t]}),e}var i=e.metadata,o=i.columns,l=i.axes,s=e.seriesdata.chartdata,c=So.DataProcessor.helpers,d=c.getParsedYAxisOrder;l=n();var u,h=o[l.clr]||{},f=o.map(function(e,t){return r(t)}),g={xidx:o[l.x].dataindex,yidx:function(e){var t=e instanceof Array?l.y[e[0]][e[1]||0]:l.y[e][0];return o[t].dataindex},zidx:(o[l.z]||{}).dataindex,tooltipidx:function(e){return null!=l.tooltip?o[e].dataindex:null},clridx:h.levelindex?null:h.dataindex};return g.setDataObj=function(e){u=e},g.getX=function(e){return ut(u)&&(u.hierarchical&&!u.hierarchical.groupByTime||u.isWaterfallEnabled)?e.index:this.getActualX(e)},g.getY=function(e,t,a){try{var r=this.yidx(t),n=void 0===e[r]?null:null==a?e[r]:e[r][a];return n}catch(i){}},g.getZ=function(e){return e[this.zidx]},g.getClr=function(e){return e[this.clridx]},g.getGroupByValues=function(e,t){return null==t||0==t.length?null:t.reduce(function(t,a){return ut(e[a])?t+e[a]:t},"")},g.getActualX=function(e){return e[this.xidx]},g.getDataType=function(e,t,a){if(a=a||g.seriesTypes.values().map(function(e){return+e}),"x"===e&&t>0)return"ordinalNonLinear";var r=null;if(null!=i.axes[e]){var n=this.getColumnIdx(e,t),l=o[n];r=l.datatype;var s="x"==e&&(u&&u.isPolarAxisCategory||-1!=a.indexOf(So.charttype.bar)||-1!=a.indexOf(So.charttype.stkdbar)||-1!=a.indexOf(So.charttype.bullet)||-1!=a.indexOf(So.charttype.gantt)||-1!=a.indexOf(So.charttype.web)),c=-1!=a.indexOf(So.charttype.heatmap)&&("x"===e||"y"===e);r=s||l.useDiscrete||c?Ns:r}return r},g.getColumnIdx=function(e,t){var a,r=i.axes[e];return"y"==e?a=t instanceof Array&&2==t.length?r[t[0]][t[1]]:r[t][0]:"tooltip"==e?a=r[t]:"x"==e&&t>0?(i.columns.filter(function(e,r){e.levelindex==t&&(a=r)}),a=a||r[0]):a=null==r?null:r[0],a},g.getColumn=function(e,t){var a=this.getColumnIdx(e,t);return o[a]},g.getColumnName=function(e,t){return(0!=t?K:$)(o[e].columnname)},g.getCustomizedVal=function(e,t,a,r,n,i,l,s,c,d){return rt(c)&&(c=!/(tooltip|legend)/.test(l)),t.toString().replace(el,function(){var t=arguments[0],u=arguments[1],h=arguments[2],f=arguments[3],p=arguments[4],y=arguments[5],v=u||h||f||p||y;if(-1!=t.indexOf("{{clr}}"))return s;if(null==o[v])return t;var m=l===Qc?i:g.getDataPoint(e,v,a,r,n,i);if(null==m)return"";var x=t.match(/[a-z]+/gi)[0];switch(x){case"col":return g.getColumnName(h,c);case"val":var b=g.getDataPointValue(e,m,u,a,!1,l,r,c,d);return[Zc,Qc,qc,Kc].indexOf(l)>-1&&(b=b||""),b;case ad:case rd:case nd:return g.getDataPointValue(e,m,f||p||y,a,x,l,r,c,d)}})},g.getYaxisColumnIndexBySeriesIndex=function(e,t){var r=s[t].yaxiscolumnorder||[0,0];return a(r)?l.y[r[0]][r[1]||0]:l.y[r][0]},g.getDataPoint=function(e,t,r,n,i,c){t=+t;var d=null,u=o[t]||{},h=f[t]&&f[t].type,g=r,p=!0;if("y"===h&&this.getYaxisColumnIndexBySeriesIndex(e,r)!==t)return d;if(e.dataObject.isHierarchy){var y=e.renderer[0].getProcessedNode,v=y?y(c):c;p=l.clr&&l.clr[0]===t&&1===v.depth||-1!==e.systemConf.metadata.axes.y[0].indexOf(t)||v.children&&(u.levelindex===v.depth-1||a(u.levelindex)&&-1!==u.levelindex.indexOf(v.depth-1))||!v.children&&(null==u.levelindex||null!=u.dataindex)}if(null!=g&&p){var m=e.renderer[e.isAxisCategory||e.dataObject.isPolarAxisCategory?g:0],x=null!=m&&null!=m.seriesdataAfterUpdate?m.seriesdataAfterUpdate[n]:s[g].data[n];d=c||x[i]}return d},g.getDataPointValue=function(e,t,r,n,i,c,u,h,f){null!=r&&(r=+r),rt(h)&&(h=!/(tooltip|legend)/.test(c));var p,y=o[r]||{},v=y.datatype,m=y.levelindex,x=y.dataindex,b=y[v];if(null!=t){if(e.dataObject.isHierarchy){var C=e.renderer[0],w=C&&C.getProcessedNode;p=w?w(t):t}if(null==l.clr&&"legend"!==c||r!=l.clr||e.dataObject.isHierarchy&&"legend"!==c&&null!=y.dataindex){if(e.dataObject.isHierarchy&&(m===p.depth-1||a(m)&&-1!==m.indexOf(p.depth-1))){var k=p.children||null==y.dataindex?t.seriesname:t[x];return gn(b,k,v,e,c,h)}if(null!=m&&e.dataObject.hierarchical){var O=e.dataObject.hierarchical.getParentByIndex(t.index,m-1);return O&&O.value?gn(b,O.value,v,e,c,h):""}var S,A=this.getColumnIdx("y",d(e.seriesdata[n].yaxiscolumnorder)),P=r==A?" - ":void 0,T=i?xn:gn;if(f){for(var E=0,L=0;f>L;L++)E+=g.getDataPointUnformattedValue(v,n,L,r,t,c,i,x);S=E}else S=g.getDataPointUnformattedValue(v,n,u,r,t,c,i,x);return""==S&&i?S:T(b,S,v,e,c,h,P)}if(ut(this.clridx)&&Pd.isQuantileColorScale(e)){if("legend"===c){var P="-";return gn(b,t,v,e,c,h,P)}return gn(b,this.getClr(t),v,e,c,h)}return gn(b,s[n].seriesname,v,e,c,h)}return null},g.getDataPointUnformattedValue=function(e,a,r,n,i,o,l,s){var c;if(t.dataObject.isHierarchy)var u=t.renderer[0],h=u&&u.getProcessedNode,f=h?h(i):i;if(l){var g=e==Ws?m(t,a,r,n,i,l,o):null;return null!=g?(c=(o==Qc?i:t.dataObject.isHierarchy&&f.children&&ut(f.value)?f.value:t.dataObject.isStackedPercentChart||t.dataObject.isPercentChart?i.y:i[s])/g*100,c=c||0):""}var p=this.getColumnIdx("y",d(t.seriesdata[a].yaxiscolumnorder));return c=t.dataObject.isHierarchy&&f.children&&n==p&&ut(f.value)?f.value:o==Qc?i:i[s]},g.getMetaInfoObj=function(e,t,a){function r(e,t){var a=wd(i[e]||{});return a.value=t,a.columnindex=e,a}var n=e.systemConf.metadata.axes,i=e.systemConf.metadata.columns,o=e.systemConf.seriesdata.chartdata,a=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?a:0,l=[],s=o[a].yaxiscolumnorder||[0,0],c=s instanceof Array?n.y[s[0]][s[1]||0]:n.y[s][0];if(t instanceof Array&&t.forEach(function(e,t){var a=i.indexOf(i.filter(function(e,a){return e.dataindex==t&&(g.yidx(s)!=t||g.yidx(s)==t&&c==a)})[0]);l.push(r(a,e))}),null!=n.clr){var d=n.clr instanceof Array?n.clr[0]:n.clr;l.push(r(d,o[a].seriesname))}return l},g.processMetaData=function(){function e(e,a){var r;if(a!==t){if(!ut(e.datatype)){var n=g.getDataByColumnIndex(e.dataindex);r=g.findDataType(n),e.datatype=r}ut(r)&&!ut(e[r])&&(e[r]={})}}var t=kd(i,"axes.clr");ut(t)&&(t=t[0]),o.forEach(e)},g.getDataByColumnIndex=function(e){var a=null,r=!1;return t.seriesdata.some(function(t){return t.data.some(function(t){return t.some(function(t){return ut(t)?(r=ut(t[e]),r&&(a=t[e]),r):void 0})})}),a},g.findDataType=function(e){return"number"==typeof e?e>31536e6?_s:Ws:Ns},g.processMetaData(),g},function(){function e(e,t,a){this.data=e,this.dataset=t,this.chartObj=a,this.values=[],this.minmaxY=[],this.groupedDataBySplitAxes=[],this.groupedDataByCombo=es(),this.stackeddata=[],this.stackedChart=null,this.allChartTypes=null,this.hasNegativeValue=[],this.baseline=[],this.xRange=null,this.yRange=[],this.domainCorrections={plotHeight:null,byDatalabels:{},forBubbles:{}},this.rangeCorrections={datalabels:{}},this.xaxisData=e.chart.axes.xaxis,this.yaxesData=e.chart.axes.yaxis,this.qualitativeRanges=null,this.groupedByStack=es(),this.ganttSeries_count=0,this.categoriesStore=null,this.plotBorder=null,this.globalChartType=null,this.hierarchical=a.preProcessor.hierarchical,this.processedseriesData=a.seriesdata,this.initialize()}var t=e.prototype;t.getSeriesData=function(){var e=this,t=this.chartObj;if(ut(e.hierarchical)&&e.hierarchical.categories){var a=e.hierarchical.getSeries();return t.seriesdata=a,a}return t.seriesdata},t.getMinMaxZ=function(){return rs(Jl(this.categoriesStore.z))},t.isBarEnabled=function(t){var a=e.helpers,r=a.getChartType(t.type||this.globalChartType,Ws);return!t.disabled&&Vr(r)},t.getAxisRotated=function(){var e=this.data.chart.axes;return e&&e.rotated===!0},t.containsNegativeData=function(e){return this.hasNegativeValue[e]},t.updateSeriesdatabyCategories=function(t,a,r,n,i){var o=this.dataset,l=e.helpers,s=l.isCatNull(o,"x"),c=l.isCatNull(o,"y",n),d=d3.set();return t=t.filter(function(e){var t=!0,l=o.getX(e);if(a&&(t=t&&!s(l)&&a.indexOf(l)>-1),r){var u=o.getY(e,n);t=t&&!c(u)&&r.indexOf(u)>-1}return a&&i&&t&&(d.has(l)?t=!1:d.add(l)),t})},t.getPlotBorder=function(){var e=this,t=e.data,a=e.plotBorder,r=t.chart.plot.border,n=0;return r.show===!0&&(a={},a.top=a.right=a.bottom=a.left=n),a},t.overBubbles=function(e,t,a){var r=this,n=r.domainCorrections,i=r.xaxisData,o=r.yaxesData,l=r.chartObj,s=t+(ut(a)?a:""),c=l.plotarea.height,d=r.chartObj;if(ut(n.forBubbles[s])&&n.plotHeight===c)return n.forBubbles[s];n.plotHeight=c;var u="x"===t,h=d.axes[t].orient,f=0,g=d.plotarea["left"===h?"height":"width"],p=[f,g],y=u?i:o[a],v=Yl().domain(e).range(p),m=r.updateMinMaxForBubble(p,v,t,a);return f=ut(y.minRange)?f:v.invert(m[0]),g=ut(y.maxRange)?g:v.invert(m[1]),n.forBubbles[s]=[e[0]-f,g-e[1]],n.forBubbles[s]},t.setGroupDataComboKey=function(e,t,a){var r=this,n=r.data,i=r.groupedByStack,o=r.groupedDataByCombo,l=0;if(e&&Vr(t)){if(n.seriesdata.stackGroup&&(l=Sr(a.si,n.seriesdata.stackGroup)),i.has(l)){var s=i.get(l);i.set(l,s.concat([a]))}else i.set(l,[a]);i.get(l).stackLabelIndex=a.si}var c=ut(l)?t+"_"+l:t;if(o.has(c)){var d=o.get(c);o.set(c,d.concat([a]))}else o.set(c,[a])},t.setExtremes=function(e,t,r,n,i,o){var l=this,s=l.dataset,c=l.categoriesStore.z;if(((r===Ws||r===_s)&&!t||i)&&!e.disabled&&a(e)){var d=Jl(e);if(i){var u=rs(d,function(e){return s.getZ(e)});c.push(u)}if(r===Ws||r===_s){var h;if(n==So.charttype.arearange||n==So.charttype.gantt){var f=Jl(d.map(function(e){return s.getY(e,o)}));h=rs(f)}else h=rs(d,function(e){return s.getY(e,o)});l.seriesExtermes[o].push(h)}}},t.initialize=function(t){var r,n=this,i=n.domainCorrections,o=(n.xaxisData,n.yaxesData),l=n.allChartTypes,s=n.data,c=n.chartObj,d=n.globalChartType=s.seriesdata&&s.seriesdata.type,u=s.metadata.axes.y.length,h=s.metadata,f=h.axes,g=s.chart.plot.plotoptions,p=n.isstacked(),y=n.groupedDataBySplitAxes=[],v=n.groupedByStack=es(),m=n.dataset,x=n.categoriesStore={},b=n.processedseriesData,C=e.helpers;n.hierarchical&&!n.hierarchical.groupByTime&&ut(t)&&n.hierarchical.update(),n.xRange=null,n.actual_yRange=n.actual_yRange||[],n.yRange=[],n.qualitativeRanges=null,n.groupedDataByCombo=es(),i.plotHeight=null,i.forBubbles={},m.seriesTypes=d3.set(),n.isBubbleEnabled=!1,n.noofBarEnabledSeries=0,n.noofAreaEnabledSeries=0,n.noofAreaRangeEnabledSeries=0,n.noofGanttEnabledSeries=0,n.totalnoofdatas=0,n.lastCategoryValue=0,n.isCombinationalChart=ts(),n.isAxisCategory=!1,n.isNonAxisMultiSeriesCategory=!1,n.isContinousChart=!0,n.isPolarAxisCategory=!1,n.hasLevelMarker=!1,n.isStackedPercentChart=!1,n.isPercentChart=!1,x.x=[],x.z=[[0]],x.subseries=[],m.hasNullFormatter={},r=this.plotBorder={},r.left=r.top=r.right=r.bottom=0,n.seriesExtermes=[];for(var w=c.axes.y.groups,k=0;u>k;k++)x["y"+k]=[],n.seriesExtermes[k]=[],ut(o[k])?null:o[k]={},w[k]=w[k]||{},w[k].disabled=!0;if(a(b)){var O=f.x?m.getColumn("x"):null,S=O?O.datatype:null,A=ut(f.z),P=C.groupByDataIndices(h);l=n.allChartTypes=l||C.getAllChartTypes(s);var T=function(e){return-1!==l.indexOf(e)};n.isDiscrete=So.chartcategory.discrete.some(T),n.isHierarchy=So.chartcategory.hierarchy.some(T),n.hasZaxis=ut(m.zidx)&&So.chartcategory.zaxis.some(T);var E=s.metadata.axes.x,L=s.metadata.columns[E].datatype;n.needXCategoriesSorting=!1;var z;b.forEach(function(e,r){var i=e.disabled,o=e.data,s=C.is3D(o),c=C.getChartType(e.type||d,Ws),u=(C.getChartType(e.type||d,"string"),C.getParsedYAxisOrder(e.yaxiscolumnorder)),h=(x["y"+u],m.getDataType("y",u));if(m.seriesTypes.add(c),n.isCombinationalChart.add(c),n.isBubbleEnabled=n.isBubbleEnabled||!i&&_r(c),n.isWaterfallEnabled=n.isWaterfallEnabled||!i&&Wr(c),n.pieWithAxis=n.pieWithAxis||!i&&c==So.charttype.bubblepie,n.noofBarEnabledSeries+=Vr(c)&&!i?1:0,n.noofAreaEnabledSeries+=c!=So.charttype.area&&c!=So.charttype.stkdarea||i?0:1,n.noofAreaRangeEnabledSeries+=c!=So.charttype.arearange||i?0:1,n.noofGanttEnabledSeries=n.ganttSeries_count+=c!==So.charttype.gantt||i?0:1,n.isContinousChart=n.isContinousChart&&(c==So.charttype.line||Fr(c)||Yr(c)),n.hasLevelMarker=n.hasLevelMarker||c==So.charttype.bullet||c==So.charttype.dial,n.isAxisCategory=n.isAxisCategory||So.chartcategory.axis.indexOf(c)>=0,n.isNonAxisMultiSeriesCategory=n.isNonAxisMultiSeriesCategory||So.chartcategory.nonaxismultiseries.indexOf(c)>=0,n.isPolarAxisCategory=n.isPolarAxisCategory||c==So.charttype.web,"addorremoveseries"!==t&&!s&&a(o)&&(o=n.convertTo3DArray(e,P,c)),!i&&a(o)){x["y"+u].enabled=!0,w[u].disabled=!1,z=c===So.charttype.waterfall&&null==z;var f={si:r,d:o};y[u]=y[u]?y[u].concat([f]):[f],n.setGroupDataComboKey(p,c,f);var g=m.getDataType("x",null,l),v=(m.getDataType("y",u,l),m.getColumn("y",u));ut(m.hasNullFormatter.x)||(m.hasNullFormatter.x=!(g===Ns?!at(O[S],"nullformatting"):!0)),ut(m.hasNullFormatter["y"+u])||(m.hasNullFormatter["y"+u]=!(h===Ns?!at(v[v.datatype],"nullformatting"):!0)),n.storeCategories(o,p,P,c,g,h,u,z),n.setExtremes(o,p,h,c,A,u),n.totalDataCount(o)}});var D=kd(c.userdata,"chart.axes.xaxis.categories");if(n.isAxisCategory&&L!==Ns&&n.needXCategoriesSorting&&(!ut(D)||ut(D)&&0===D.length)&&x.x.sort(is),n.xymultiRenderer=n.isAxisCategory,n.isCombinationalChart=n.isCombinationalChart.values().length>1,n.groupedByStack=v,n.isPercentChart=n.noofBarEnabledSeries&&!n.hasLevelMarker&&!n.noofGanttEnabledSeries&&at(g,"bar","showAs")&&g.bar.showAs,p){var M=m.seriesTypes;n.isStackedPercentChart=n.noofBarEnabledSeries&&!n.hasLevelMarker&&!n.isWaterfallEnabled&&g.bar.stacked.showAs===id||n.noofAreaEnabledSeries&&g.area.stacked.showAs===id||M.has(So.charttype.web)&&g.web.stacked.showAs===id||M.has(So.charttype.line)&&g.line.stacked.showAs===id}n.pieWithAxis&&(n.bubblepieData=n.processBubblePieData())}},t.getThresholdValues=function(e){var t=[];return ut(e.threshold)&&Tt(e.threshold,function(e){e.show===!0&&e.values.length&&(t=t.concat(e.values))}),t},t.getDomain=function(e,t){return this.hierarchical&&(!this.hierarchical.groupByDiscreteTime||!t)||this.isWaterfallEnabled?d3.range(e.length):e},t.updateMinMaxForBubble=function(t,a,r,n){var i=this,o=i.processedseriesData,l=i.groupedDataBySplitAxes,s=i.dataset,c=i.chartObj,d=e.helpers,u=t[0],h=t[1],f="x"==r,g=(f?o:l[n])||[];return g.forEach(function(e){var t=f?e.data:e.d,r=(f?e:o[e.si]).disabled,i=d.getParsedYAxisOrder((f?e:o[e.si]).yaxiscolumnorder);if(!r){var l=d.isCatNull(s,"x"),g=d.isCatNull(s,"y",i);t.forEach(function(e){e.forEach(function(e){var t=f?s.getX(e):s.getY(e,n),r=s.getZ(e)||c.zscale.domain()[0];if(e&&!e.isDummy&&!l(s.getX(e))&&!g(s.getY(e,i))){var o=c.zscale(r),d=a(t)+(null!=a.bandwidth?a.bandwidth()/2:0),p=d+o/2,y=d-o/2;p>h&&(h=p),u>y&&(u=y)}})})}}),[u,h]},e.helpers={isCatNull:function(e,t,a){var r=e.hasNullFormatter&&!e.hasNullFormatter[t+(ut(a)?a:"")];return function(e){return!ut(e)&&r}},is3D:function(e){return a(e)&&a(e[0])&&a(e[0][0])},getParsedYAxisOrder:function(e){return a(e)?e[0]:e||0},getChartType:function(e,t,a,r){if(null!=e||null!=a){var n,i,o=r&&r.seriesdata.chartdata;return ut(a)&&(e=Od((o[a]||o[0]).type,r.seriesdata.type)),isNaN(+e)?(n=e.toLowerCase(),i=So.charttype[n]):(i=+e,n=So.charttypenames.get(i)),"string"===t?n:t===Ws?i:{name:n,value:i}}},getAllChartTypes:function(e,t){var a=this,r=e.seriesdata&&e.seriesdata.type;return Od(kd(e,"seriesdata.chartdata"),[]).map(function(e){var n=a.getChartType(Od(e.type,r),Od(t,Ws));return t||"object"!==t?n:{}})},filterDataToViewPort:function(e,t,a,r){return e.filter(function(e){var n=r(e);return n>=t&&a>=n?e:void 0})},priorityBasedValue:function(e,t){var a=null,r=e.length,n=0;for(t=Od(t,0);r>n&&!ut(a);)a=null!=e[n]?e[n]:null,n++;return Od(a,t)},groupByDataIndices:function(e){var t=e.columns,a=e.axes.groupby||[];return a.map(function(e){return t[e].dataindex})}},So.DataProcessor=e}(window,So),function(e){"use strict";function t(e){this.chart=e,this.data=e.systemConf,this.initialize()}t.prototype.initialize=function(){var e=this,t=e.chart,a=e.data,r=a.metadata.axes.x,n=a.metadata.columns[r].datatype,i=So.DataProcessor.helpers,o=So.chartcategory.discrete.some(function(e){return-1!==t.chartTypes.indexOf(e)}),l=i.getChartType(null,null,0,t.systemConf),s=l.value,c=l.name,d=Vr(s)||Fr(s)||Nr(s)||Yr(s)||"line"===c;this.isHierarchyLayout()&&d&&(e.hierarchical=new So.HierarchicalOrdinalDataAdapter(this.chart),e.chart.seriesdata=this.hierarchical.getSeries()),e.processTimeData(),So.requireXDataSorting&&(n===Ws||n===_s&&!o)&&e.sortData(r,n)},t.prototype.isHierarchyLayout=function(){function e(e){return p.hasInnerSeries(e)}var t=this,a=t.chart,r=a.systemConf.seriesdata.chartdata;return r.some(e)},t.prototype.processTimeData=function(){var e,r,n,i,o=this,l=o.chart,s=l.seriesdata;e=t.helpers.time.getDataInfo(o.data),r=e.indices,n=e.formatConf,i=n.some(function(e){return ut(e)&&ut(e.inputformat)}),r&&r.length&&i&&s.forEach(function(r){var n=r.data,i=So.DataProcessor.helpers.is3D(n);a(n)&&n.forEach(function(r){i&&a(r)&&r.forEach(function(a){t.helpers.time.applyFormats(a,e)}),i||t.helpers.time.applyFormats(r,e)})})},t.prototype.sortData=function(e){var r=this,n=r.chart,i=r.data,o=n.seriesdata;return o.forEach(function(r){var n=r.data,o=i.metadata.columns[e].dataindex;So.DataProcessor.helpers.is3D(n)?a(n)&&n.forEach(function(e){t.helpers.linear.sort(e,o)}):t.helpers.linear.sort(n,o)}),i},t.helpers={time:{},ordinal:{},numeric:{},linear:{}},t.helpers.time={getDataInfo:function(t,a){var r,n,i,o=t.metadata.axes.x,l=Jl([o,Jl(t.metadata.axes.y)]),s=/timestamp/i,c=[],d=[];return l.map(function(l){i=Od(t.metadata.columns[l],{}),r=Od(i.time,{}),"time"!==i.datatype||l===o||a||(n=r.inputformat,d.push(s.test(n)&&"function"!==n&&"function"!=typeof e[n]?null:r),c.push(t.metadata.columns[l].dataindex))}),{indices:c,formatConf:d}},applyFormats:function(e,t){var r=t.indices,n=t.formatConf;return r.map(function(t,r){ut(e[t])&&(e[t]=a(e[t])?e[t].map(function(e){return mn(e,null,n[r],!0).getTime()}):mn(e[t],null,n[r],!0).getTime())}),e}},t.helpers.linear={sort:function(e,t){return e.sort(function(e,a){return e=e[t],a=a[t],a>e?-1:e>a?1:e>=a?0:0/0})}},So.PreProcessor=t}(window),So.DataProcessor.prototype.getCategories=function(e,t){var a,r=this,n=r.chartObj,i=n.dataObject.hierarchical,o=r.categoriesStore;return at(n.systemConf,"chart.zoom."+e+".categories")?n.systemConf.chart.zoom[e].categories:("x"===e?(a=ut(i)?i.groupByTime?t>0?i.categoriesList[t-1]:i.groupByDiscreteTime?Od(r.xaxisData.categories,o.x.sort(d3.ascending)):i.leafCategories:t>0?i.categoriesList[t-1]:i.leafCategories:r.xaxisData.categories,t=""):a=r.yaxesData[t].categories,ut(a)&&0!==a.length||(a=o[e+t]),"y"!==e||o["y"+t].enabled||(a=["NoData","NoData"]),a)},So.DataProcessor.prototype.getMinMaxX=function(e){var t,a=this,r=a.xaxisData,n=a.processedseriesData,i=a.chartObj,o=a.dataset,l=r.minRange,s=r.maxRange,c=o.getDataType("x"),d=a.xRange;if(e=Od(e,.05),at(i.systemConf,"chart.zoom.x"))return xRange=i.systemConf.chart.zoom.x,[xRange.minRange,xRange.maxRange];if(!ut(d)){t=n.map(function(e){return e.data.map(function(e){return rs(e,function(e){return o.getX(e)})})});var u=Od(kd(i.userdata,"chart.axes.xaxis"),{});d=a.xRange=rs(Jl(Jl(t)).concat(a.getThresholdValues(u)))}!a.isBubbleEnabled||c===_s||ut(l)||ut(s)||(t=a.overBubbles(d,"x"),d=[d[0]-t[0],d[1]+t[1]]);var h,f,g=0;return c!==_s&&0!==e&&(g=a.getCorrectionOverDataLabels(d,"x")),h=d[1]-d[0],0===h&&(h=1),f=h*e+g,[Od(l,d[0]-f,0),Od(s,d[1]+f,0)]},So.DataProcessor.prototype.getMinMaxY=function(e,t,a){var r,n=this,i=n.allChartTypes,o=n.yaxesData,l=n.hasNegativeValue,s=n.baseline,c=n.yRange,d=n.actual_yRange,u=n.chartObj,h=n.dataset,f=n.isstacked()||n.isPercentChart,g=Od(o[e],{}),p=h.getDataType("y",e),y=n.ganttSeries_count,v=g.minRange,m=g.maxRange,x=0,w=c[e],k=u.getAxesCount("y")>1,O=n.noofBarEnabledSeries,S=n.noofAreaEnabledSeries,e=Od(e,0);if(s[e]=kd(g,"baseline.show")===!0?g.baseline.value:null,k){var A=n.groupedDataBySplitAxes[e],P=A?A.map(function(e){return i[e.si]}):[],T=function(e){return Vr(e)?!0:void 0},E=function(e){return e===So.charttype.area||e===So.charttype.stkdarea?!0:void 0},O=P.some(T);S=P.some(E)}if(at(u.systemConf,"chart.zoom.y")){var L=u.systemConf.chart.zoom.y,z=L.minRange,D=L.maxRange,M=s[e];return l[e]=ut(M)&&!f&&M>=z&&D>=M?M:0>z?0:null,[z,D]}if(t=Od(t,u.datalabels.hasFixedPosition?1e-8:.05),!ut(c[e])){n.isWaterfallEnabled?(c[e]=Bi(n,e),r=c[e]):f?(c[e]=C(s[e],n),r=c[e][e]):(c[e]=b(e,n),r=c[e]);var j=Od(kd(u.userdata,"chart.axes.yaxis["+e+"]"),{});ut(r)&&(r=rs(r.concat(n.getThresholdValues(j))));var R;(n.hasLevelMarker||O&&!y)&&(R=n.overLevelMarker(r)),f?(d[e]=d[e]||[])[e]=c[e][e]=Od(R,r):d[e]=c[e]=Od(R,r),w=c[e]}if(!ut(w)||f&&!ut(w[e]))return["NoData","NoData"];var I=f?w[e]:w;l[e]=p===_s?null:ut(s[e])&&!f?s[e]:g.minRange<0||I[0]<0?0:null;var H=(O||S)&&p==Ws,B=H&&(null!=l[e]?l[e]>0:!0);H&&I[1]-I[0]===0&&(I=rs(Jl([I,[0]]))),!n.isBubbleEnabled||p===_s||ut(g.minRange)||ut(g.maxRange)||(I[0]=B?0:I[0],r=n.overBubbles(I,"y",e),I=[I[0]-r[0],I[1]+r[1]]);var F=I[1]-I[0];0===F&&(F=1),n.isStackedPercentChart||n.isPercentChart||n.hasLevelMarker||n.isWaterfallEnabled||(x=F*t),ut(v)||(v=B?0:I[0]-x),ut(m)||(m=I[1]+x);var V=0;if("time"!==p&&0!==t&&!a){var N=u.datalabels.hasFixedPosition&&ut(g.maxRange)&&g.maxRange<=I[1];V=N?0:this.getCorrectionOverDataLabels([v,m],"y",e)}if(B||u.datalabels.hasFixedPosition||(v=v-V||0),m=m+V||0,n.isWaterfallEnabled){var _=Vi([v,m],"y",e,u,V);v=_[0],m=_[1]}return[v,m]},So.DataProcessor.prototype.isstacked=function(e){var t=this.data,a=t.chart.plot.plotoptions,r=this.stackedChart,n=So.DataProcessor.helpers;if(ut(e)){var i=n.getChartType(e,Ws);return e=n.getChartType(e,"string"),a=a[e],i===So.charttype.stkdarea||i===So.charttype.stkdbar||i===So.charttype.bullet||"bullet"===e||("bar"===e||"area"===e||"web"===e||"line"===e||"waterfall"===e)&&kd(a,"stacked.enabled")===!0}if(!ut(r)){var o=this.allChartTypes||n.getAllChartTypes(t),l=o[0];this.stackedChart=r=-1!==o.indexOf(So.charttype.stkdarea)||-1!==o.indexOf(So.charttype.stkdbar)||-1!==o.indexOf(So.charttype.bullet)||-1!==o.indexOf(So.charttype.bar)&&kd(a,"bar.stacked.enabled")===!0||-1!==o.indexOf(So.charttype.area)&&kd(a,"area.stacked.enabled")===!0||l===So.charttype.web&&kd(a,"web.stacked.enabled")===!0||l===So.charttype.line&&kd(a,"line.stacked.enabled")===!0||l===So.charttype.waterfall&&kd(a,"waterfall.stacked.enabled")===!0}return r},So.DataProcessor.prototype.getXYvalue=function(e,t,a,r,n,i,o,l,s){var c=this,d=this.yaxesData,u=this.dataset;if(c.isPolarAxisCategory){var h=d[n].reversed&&!t?r.domain().length-1:0,f=a(u.getX(i)),g=t?r(i.y+i.y0):r(u.getY(i,n))+(null!=r.bandwidth?r.bandwidth()/2:0);g=ul(g,r.range()[h]);var p=ba(g,f);return"x"===o?p[0]:p[1]}switch(o){case"x":return e?t?r(i.y+i.y0):r(u.getY(i,n,s))+(null!=r.bandwidth?r.bandwidth()/2:0):a(u.getX(i))+(null!=a.bandwidth?a.bandwidth()/2:0);case"y":return e?a(u.getX(i))+(null!=a.bandwidth?a.bandwidth()/2:0):t?r(i.y+i.y0):r(u.getY(i,n,s))+(null!=r.bandwidth?r.bandwidth()/2:0);case"z":return l(u.getZ(i)||l.domain()[0])}},So.DataProcessor.prototype.getTransRectValue=function(e,a,r,n,i,o,l){var s=this.dataset,c=So.DataProcessor.helpers,d=c.priorityBasedValue,u=i&&i.yscale,h=i&&i.addRangeBand(u),f=i&&"waterfall"==i.charttype,g=i&&i.stacked||f,p=i&&s.getY(a,i.yaxiscolumnorder)instanceof Array,y=i&&(u.bandwidth?u.ordinalRange[0]+h:u.range()[0]),v=i&&u.range()[1];switch(this.dataset.yAccessor=this.isPercentChart?function(e){return e.y}:this.dataset.getY,e){case"x":if(i.axisrotated){l=p?0:null;var m=this.dataset.yAccessor(a,i.yaxiscolumnorder,l);return u.bandwidth?u.origRange[0]:u(g?hl(a.y0,a.y+a.y0):null!=l?m:null!=i.hasNegValue?m<i.hasNegValue?m:i.hasNegValue:u.domain()[0])}var x=s.getX(a);return(i.stacked?i.bandwidth1(x)+i.bandwidth2(i.stackGroupIndex):i.bandwidth1(x)+i.bandwidth2(i.barDatasetIndex+r))+i.padding;case"y":if(i.axisrotated){var x=s.getX(a);return(i.stacked?i.bandwidth1(x)+i.bandwidth2(i.stackGroupIndex):i.bandwidth1(x)+i.bandwidth2(i.barDatasetIndex+r))+i.padding}l=null!=l?l:p?1:null;var m=this.dataset.yAccessor(a,i.yaxiscolumnorder,l);return g?u(ul(a.y0,a.y+a.y0))+h:u(null==u.bandwidth?ul(i.hasNegValue||0,m):m)+h;case"width":if(i.axisrotated){var b=null==i.hasNegValue?p?u(this.dataset.yAccessor(a,i.yaxiscolumnorder,0)):y:u(i.hasNegValue);l=p?1:null;var m=u(this.dataset.yAccessor(a,i.yaxiscolumnorder,l));return u.bandwidth?m+h:g?fl(u(a.y+a.y0)-u(a.y0))+h:(fl(v-b-(v-m))||0)+h}return i.barWidth;case"height":if(i.axisrotated)return i.barWidth;var b=null!=i.hasNegValue?u(i.hasNegValue):p&&!g?u(this.dataset.yAccessor(a,i.yaxiscolumnorder,0)):y;l=p?1:null;var m=u(this.dataset.yAccessor(a,i.yaxiscolumnorder,l))+h;return u.bandwidth?fl(u.origRange[0]-m):g?fl(b-u(a.y+a.y0)-(b-u(a.y0)))+h:fl(b-m);case"radius":var C={},w=null!=o?o.toString().split("/"):null,k=null!=w&&null!=w[0]?w[0].split(" "):[],O=null!=w&&null!=w[1]?w[1].split(" "):k;return C.tlx=t(d([k[0]])),C.tly=t(d([O[0],k[0]])),C.trx=t(d([k[1],k[0]])),C.trY=t(d([O[1],O[0],k[1],k[0]])),C.brx=t(d([k[2],k[0]])),C.bry=t(d([O[2],O[0],k[2],k[0]])),C.blx=t(d([k[3],k[1],k[0]])),C.bly=t(d([O[3],O[1],k[3],k[0]])),C}},So.DataProcessor.prototype.getCorrectionOverDataLabels=function(e,t,a){var r=this,n=r.chartObj,i=r.xaxisData,o=r.yaxesData,l=r.domainCorrections,s=r.rangeCorrections.datalabels,c=r.processedseriesData,d=r.groupedDataBySplitAxes,u="x"==t,h=t+(ut(a)?a:""),f=u?i:o[a],g=f.minRange,p=f.maxRange,y=n.plotarea.height;if(!(r.isStackedPercentChart||r.isPercentChart||r.isBubbleEnabled&&!r.pieWithAxis||!r.isAxisCategory&&!r.isNonAxisMultiSeriesCategory||null!=g&&null!=p||!So.labelRenderer||null!=l.byDatalabels[h]&&y==l.plotHeight)){l.plotHeight=y;var v=n.axes[t].orient,m=n.plotarea["left"==v?"height":"width"],x=e[1]-e[0],b=u?c:d[a],C=0;null!=b&&(rt(s[h])&&(s[h]=gu(t,b,n)),C=s[h]),l.byDatalabels[h]=x/(m-C)*C}return l.byDatalabels[h]||0},So.DataProcessor.prototype.extendOuterpadding=function(e,t,a,r,n,i,o){var l=this.processedseriesData,s=this.groupedDataBySplitAxes,c=this.rangeCorrections.datalabels,d=this.chartObj,u=0;if(d.datalabels.moduleExists&&O(d)||this.isBubbleEnabled){t[0]>t[1]&&(t=[t[1],t[0]]);var h=Xl().domain(e).range(t).paddingInner(r).paddingOuter(n),f=t;if(this.isBubbleEnabled){var g=this.updateMinMaxForBubble(t,h,i,o),p=.5*ul(t[0]-g[0],g[1]-t[1]);f=[g[0]-p,g[1]+p]}else if(So.labelRenderer){var y="x"==i?l:s[o],v=h(h.domain()[0])-h.range()[0],m=i+(ut(o)?o:"");rt(c[m])&&(c[m]=gu(i,y,d));var p=c[m];p=ul(0,p-v),f=[t[0]-p,t[1]+p]}u=ul(f[1]-t[1],-f[0])}return u},So.DataProcessor.prototype.convertTo3DArray=function(e,t,a){var r=e.data;if(t.length>0&&(a===So.charttype.bar||a===So.charttype.stkdbar)){var n=S(e,t),i=n.distintGroupbyCat,o=n.allGroupbyCat,l=[];e.data.forEach(function(e,t){var a=i.indexOf(o[t]);l[a]?l[a].push(e):(l[a]=[],l[a].push(e))}),r=e.data=l}else ut(r)&&(!r.length||ut(r[0])&&r[0].length)&&(e.data=[],e.data.push(r),r=e.data);return r},So.DataProcessor.prototype.findXCategories=function(e){var t=this,a=t.categoriesStore,r=t.processedseriesData,n=t.dataset,i=a.x;return r.forEach(function(t){var a=t.disabled&&!e,r=t.data;a||null==r||r.constructor!=Array||r.map(function(e){return null!=e&&e.constructor==Array?e.map(function(e){var t=n.getX(e);\nnull!=t&&-1==i.indexOf(t)?i.push(t):null}):void 0})}),i},So.DataProcessor.prototype.storeCategories=function(e,t,r,n,i,o,l,s){var c=this,d=c.dataset,u=c.categoriesStore,h=u.x,f=u["y"+l],g=So.DataProcessor.helpers,p=g.isCatNull(d,"x"),y=g.isCatNull(d,"y",l);t?e.map(function(t){return!e.disabled&&a(t)?t.map(function(e){var a=d.getActualX(e),n=r.length>0?d.getGroupByValues(e,r):null;a>c.lastCategoryValue&&!c.needXCategoriesSorting?c.lastCategoryValue=a:c.needXCategoriesSorting||-1!=h.indexOf(a)||(c.needXCategoriesSorting=!0),p(a)||-1!=h.indexOf(a)&&!s?null:h.push(a),null!=n&&(t.groupByVal=n,e.groupByVal=n,-1==u.subseries.indexOf(n)?u.subseries.push(n):null)}):void 0}):(i===Ns||o===Ns)&&e.map(function(t){return!e.disabled&&a(t)?t.map(function(e){var t=d.getActualX(e),a=d.getY(e,l);i!==Ns||p(t)||(s||-1===h.indexOf(t)?h.push(t):null),o===Ns&&(n===So.charttype.arearange||n===So.charttype.gantt?(ut(a)&&-1===f.indexOf(a[0])?f.push(a[0]):null,ut(a)&&-1===f.indexOf(a[1])?f.push(a[1]):null):y(a)||-1!==f.indexOf(a)?null:f.push(a))}):void 0})},So.DataProcessor.prototype.overLevelMarker=function(e){var t,r,n=this,i=So.DataProcessor.helpers,o=n.qualitativeRanges,l=n.processedseriesData,s=i.getChartType(n.processedseriesData[0].type||n.globalChartType,"string"),c=n.data.chart.plot.plotoptions[s],d=c.levelMarker,u=c.targetMarker;return ut(o)||(o=n.qualitativeRanges=[],l.forEach(function(e){var n=e.plotoptions||{};d=Cd(d,n.levelMarker),u=Cd(u,n.targetMarker),t=d.dataindex,r=u.dataindex,(d.enabled||u.enabled)&&(t||r?e.data.forEach(function(e){e.forEach(function(e){u.enabled&&ut(e[r])&&o.push(e[r]),d.enabled&&ut(e[t])&&(a(e[t])?o=o.concat(e[t]):o.push(e[t]))})}):d.enabled&&ut(d.values)&&(o=o.concat(d.values)))})),isNaN(o[1]-o[0])&&!this.hasLevelMarker?e:d3.extent(d3.merge([o,e,[0]]))},So.DataProcessor.prototype.totalDataCount=function(e){var t=this,r=0;return e.map(function(n){if(!e.disabled&&a(n)){var i=t.isAxisCategory||t.isPolarAxisCategory||t.isNonAxisMultiSeriesCategory?n.length:n.reduce(function(e,t){return e+(t.disabled?0:1)},0);r+=1!==i||null!==n[0]&&n[0].length?i:0}}),this.totalnoofdatas+=r,r},So.DataProcessor.prototype.processBubblePieData=function(e){function t(e,t){var a=l.seriesdata[t],r=So.DataProcessor.helpers.getParsedYAxisOrder(a.yaxiscolumnorder),n=a.disabled||!Zr(l.chartTypes[t].value),i=s.getX(e),o=s.getY(e,r);return h.x&&(n=n||-1===h.x.indexOf(i)),h.y[r]&&(n=n||-1===h.y[r].indexOf(o)),n}function a(){d.forEach(function(e){e.forEach(function(e){o.forEach(function(t,a){e[a]||(e[a]=r(e,a))})})})}function r(e,t){var a=So.DataProcessor.helpers.getParsedYAxisOrder(l.seriesdata[t].yaxiscolumnorder),r=l.dataset,n=[];return n[r.xidx]=e.x,n[r.yidx(a)]=e.y,n[r.zidx]=e.z,n[c]=null,n.dummy=!0,n}function n(e,t){var a=[];return a.x=s.getX(e),a.y=s.getY(e,t),a.z=s.getZ(e),a.reference=e,a}e=e||So.charttype.bubblepie;var i=this,o=i.processedseriesData,l=i.chartObj,s=i.dataset,c=lt(i.data.chart.plot.plotoptions[So.charttypenames.get(e)].dataindex,3),d=[],u=[],h={x:El,y:[]},f=kd(l.userdata,"chart.axes.xaxis.categories"),g=s.getDataType("x")==Ns&&f&&f.length;return g&&(h.x=f),o.forEach(function(e,a){var r=So.DataProcessor.helpers.getParsedYAxisOrder(e.yaxiscolumnorder),i=kd(l.userdata,"chart.axes.yaxis["+r+"].categories"),o=s.getDataType("y",r)==Ns&&i&&i.length;o&&(h.y[r]=i),e.data.forEach(function(e,i){e.forEach(function(e){var o=t(e,a);if(u[i]=u[i]||[],d[i]=d[i]||[],!o){var s=xu.getKey(e,a,l),c=u[i].indexOf(s);-1===c&&(c=u[i].length,d[i][c]=n(e,r)),d[i][c][a]=e,u[i].push(s)}e.disabled=e.dummy=o}),d[i]=d[i]||[]})}),a(),d},So.hierarchymodel={},So.hierarchymodel.get=function(e){function r(e){return e.map(function(e){var t;if(e.data&&e.data[0]&&e.data[0].constructor===Array){t=e.data;var a=e.leafColors;a&&t.forEach(function(e,t){e.color=a[t%a.length]})}else e.data?(c.hasHierarchyData=!0,t=r(e.data)):t=e;for(var n in e)e.hasOwnProperty(n)&&"data"!==n&&(t[n]=e[n]);return t})}function n(e){e.forEach(function(t,r){if(t.level=null!=e.level?e.level+"_"+r:r+"",a(t[0]))n(t);else{var l=+t.level.split("_")[0],d=i.seriesdata.chartdata[l],u=s.getParsedYAxisOrder(d.yaxiscolumnorder);if(!d.disabled){var h=rs([t],function(e){return o.getY(e,u)});c.seriesExtermes[0].push(h),c.totalnoofdatas++}}})}var i=e.systemConf,o=e.dataset,l=e.seriesdata,s=So.DataProcessor.helpers,c={data:i};return c.getTransRectValue=function(e,a,r,n,i,o){var l=s.priorityBasedValue;switch(e){case"radius":var c={},d=null!=o?o.toString().split("/"):null,u=null!=d&&null!=d[0]?d[0].split(" "):[],h=null!=d&&null!=d[1]?d[1].split(" "):u;return c.tlx=t(l([u[0]])),c.tly=t(l([h[0],u[0]])),c.trx=t(l([u[1],u[0]])),c.trY=t(l([h[1],h[0],u[1],u[0]])),c.brx=t(l([u[2],u[0]])),c.bry=t(l([h[2],h[0],u[2],u[0]])),c.blx=t(l([u[3],u[1],u[0]])),c.bly=t(l([h[3],h[1],u[3],u[0]])),c}},c.getAxisRotated=function(){var e=c.data.chart.axes;return e&&e.rotated===!0},c.containsNegativeData=function(){return!1},c.isstacked=function(){return!1},c.getPlotBorder=function(){var t=i.chart.plot.border,a=t.show===!0?st(t,"size",0,10,e.plotarea.width,e.plotarea.height):0;return a={left:a,top:a,right:a,bottom:a}},c.initialize=function(t){globalChartType=i.seriesdata&&i.seriesdata.type,o.seriesTypes=d3.set(),c.totalnoofdatas=0,c.isNonAxisMultiSeriesCategory=!0,c.isHierarchy=!0,c.seriesExtermes=[[]],null!=l&&a(l)&&("addorremoveseries"!=t&&(e.seriesdata=l=r(l)),n(l),l.forEach(function(e){var t=s.getChartType(e.type||globalChartType,Ws);o.seriesTypes.add(t)}))},c.initialize(),c},So.defaultTheme=function(e){var t={canvas:{fontFamily:dd.globalProp.fontL1Family,fontColor:dd.globalProp.fontL1Color,fontSize:e.fontL1Size.l3,fontWeight:dd.globalProp.fontL1Weight,fontStyle:dd.globalProp.fontL1Style,title:{show:!0,text:"Title comes here",hAlign:"left",vAlign:"top",marginTop:10,marginRight:0,marginBottom:0,marginLeft:10,target:"newtab",fontSize:e.fontL1Size.l1},subtitle:{show:!0,text:"Description comes here",hAlign:"left",vAlign:"top",marginTop:0,marginRight:0,marginBottom:0,marginLeft:10,target:"newtab",fontSize:e.fontL1Size.l2},background:{alpha:1,color:"#FFFFFF"},border:{show:!0,size:1,style:"solid",radius:1,color:"#cccccc"},shadow:{show:!0,x:1,y:1,color:"rgba(0,0,0,0.1)",blur:2,inset:!1},intelligence:{dimension:{title:100,subtitle:120,xaxis:70,xaxislabel:80,yaxis:70,yaxislabel:80,legend:140,credits:150,marker:50},dataCount:{marker:300,animation:300,datalabels:300}}},legend:{enabled:!0,colorPallete:{type:"multicolor",options:{multicolor:"countries",monochrome:{baseColor:"red",count:5,colorGamma:[.3,.9]}}},hAlign:"right",vAlign:"top",fontSize:e.fontL1Size.l5,textPadding:5,itemMargin:3,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,colorBox:{shape:"square",strokeWidth:2},colorBand:{},title:{show:!1,text:"Legend",fontSize:e.fontL1Size.l4,keepAligned:!1},background:{color:"transparent",alpha:0},border:{show:!0,size:1,style:"solid",radius:0,color:"transparent"},itemDisabledStyle:{color:"#d1d1d1",strikeout:!1},shadow:{show:!1,color:"rgba(0,0,0,0.3)",x:2,y:2,blur:3,inset:!1},filter:{enabled:!0},highlightEffect:{selectedSeries:null,unselectedSeries:"none"},expandable:{fontSize:e.fontL1Size.l5}},chart:{marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,fontSize:e.fontL2Size.l3,zoom:{type:"none"},effects:{choice:"auto",options:{dropShadow:{dx:"5",dy:"5",blur:"3",color:"rgba(0,0,0,0.6)"},freeHand:{scale:7}}},plot:{renderer:{mode:"svg",image:{source:"auto",addDimensionInSource:!1,exportUrl:""}},background:{alpha:1,color:"transparent",gradients:{show:!1,type:"radial"}},border:{show:!1,size:1,style:"solid",radius:0,color:"#ececec"},animation:{enabled:dd.globalProp.animation.enabled,easingType:dd.globalProp.animation.easingType,duration:dd.globalProp.animation.duration},datalabels:{show:dd.globalProp.datalabels.enabled,handleOverlapping:!0,fontSize:e.datalabels.fontSize.l5,boundBox:{strokeColor:dd.fontColor,fillColor:"white"}},events:{cursor:null,click:dd.globalProp.events.click,mousemove:dd.globalProp.events.mouseMove,mouseout:dd.globalProp.events.mouseOut,doubleclick:dd.globalProp.events.doubleClick,contextmenu:null,init:null,onload:null},plotoptions:{}},axes:{xaxis:{show:!0,label:{show:!0,text:"Xaxis",fontSize:e.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{show:!0,color:"transparent",strokeWidth:null},ticklabel:{textOverflow:"ellipsis",fontSize:e.fontL2Size.l5},tickmark:{strokeWidth:null,color:"#ececec",size:3},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:10,color:"black"},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5},marker:{enabled:!0,hoveroptions:{innerStrokeOpacity:1,outerFillColor:"transparent",outerStrokeWidth:2}}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5}}}},yaxis:[{show:!0,label:{show:!0,text:"Yaxis",fontSize:e.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{show:!0,color:"#ececec"},ticklabel:{textOverflow:"ellipsis",fontSize:e.fontL2Size.l5},tickmark:{color:"#ececec",size:3},subtickmark:{color:"#ececec",size:5,count:0},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:0,color:"grey",strokeWidth:null},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5},marker:{enabled:!0,hoveroptions:{innerStrokeOpacity:1,outerFillColor:"transparent",outerStrokeWidth:2}}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5}}}}]}},map:{allAreas:!0,renderingMode:"canvas",fillColor:"#dddddd",strokeColor:"#444",strokeWidth:.6,gradients:{options:{linear:{y2:100},radial:{radius:100,gradientUnits:"objectBoundingBox"}}},globe:{strokeWidth:1.5},labels:{strokeWidth:1.5},extent:{top:10,right:10,bottom:10,left:10},layerName:"source",useMeshOutline:!0,textStrokeWidth:2,animation:{enabled:!0,type:"fade",duration:500,easingType:"cubic"}},tooltip:{enabled:!0,fontSize:e.fontL1Size.l5,opacity:.8,zindex:2e3,view:"normal",crosshair:{type:"none",color:"grey"},pointerEvents:"none"},noDataHandler:{text:"No Data",fontSize:e.fontL1Size.l1},loader:{type:"none",fontSize:e.fontL1Size.l3}};return t},So.getDefaultOptions=function(e,t,a){var r;switch(e){case"zoom":r={type:"none",resetButton:{fillColor:"grey",label:{text:"Reset Zoom",marginTop:5,marginRight:5,marginBottom:5,marginLeft:5,fontSize:a.fontL2Size.l5},border:{show:!0,size:1,radius:6,color:"#cccccc"},shadow:{show:!1,dx:1,dy:1,color:"#cccccc",blur:1}},selectionArea:{fillColor:"grey",fillOpacity:.4}};break;case"scroll":r={enabled:!0,categoryThickness:null,visibleCategories:null,height:10,slider:{fillOpacity:.3,strokeOpacity:.3,strokeColor:"black"}};break;case"legend":r={};break;case"credits":r={enabled:!1,imageWidth:150,imageHeight:50,hAlign:"right",vAlign:"bottom",text:"Zoho Reports",target:"newtab",marginTop:0,marginRight:10,marginBottom:10,marginLeft:0,fontSize:a.fontL1Size.l4};break;case"notes":r={enabled:!1,chartValues:[],plotValues:[],blockValues:[],type:"stickyNote",options:{stickyNote:{headWidth:15,headHeight:15,bodyWidth:100,bodyHeight:100,fontSize:a.fontL1Size.l5,color:["#F0F8FF","#FFE4C4","#DCDCDC","#ADFF2F","#90EE90","#87CEFA","#FFC0CB","#B0E0E6","#D2B48C","#D8BFD8","#EE82EE","#F5DEB3"],mode:"close",border:"1px solid grey"},customNote:{fontSize:a.fontL1Size.l5}}};break;case"bar":r={outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},levelMarker:{enabled:!1,color:["#d8d8d8"],fillOpacity:.9},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}};break;case"line":r={mode:"linear",strokeWidth:2,outerPadding:.02,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeWidth:2,outerFillColor:"transparent",outerStrokeColor:"transparent"},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}},gradients:{options:{linear:{x2:10,spreadMethod:"reflect"}}}};break;case"area":r={strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}}};break;case"arearange":r={strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}}};break;case"scatter":r={outerPadding:.02,multiColoring:!1,marker:{size:1,innerFillColor:"white",innerStrokeColor:"white",innerStrokeWidth:0,innerStrokeOpacity:1,outerFillColor:"white",outerStrokeOpacity:1,outerStrokeWidth:2},hoveroptions:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},datalabels:{showAs:"y"},animation:{type:"allseries"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[2,0]},radial:{radius:90,colorGamma:[2,0]}}}};break;case"bubblepie":case"pie":r={startAngle:0,endAngle:2*kl,innerRadius:0,outerPadding:10,datalabels:{type:"circular",padding:5,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"fanAll"},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90}}},models:{count:50}},"bubblepie"==e?(r.strokeColor="transparent",r.outerPadding=.02,r.datalabels.showAs="percent",r.hoveroptions={innerFillColor:"transparent",innerStrokeColor:"transparent",outerFillColor:"transparent",outerStrokeWidth:3}):(r.strokeColor="white",r.sliceOutHeight=5,r.maxRadius=250,r.datalabels.showAs="x");break;case"funnel":r={weighted:"height",split:!1,canOverlap:!0,threeDimension:!0,outerPadding:"2%",stemHeight:"20%",stemWidth:"20%",coneWidth:"100%",strokeColor:"transparent",emptyFunnel:{show:!1,color:"#FAFAFA"},datalabels:{showAs:"x",type:"strokeddoubleside",padding:30,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.6,0]}}},animation:{type:"vertical"}};break;case"web":r={fillOpacity:.5,strokeWidth:2,mode:"linearClosed",outerPadding:10,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeOpacity:1,outerFillColor:"white"},hoveroptions:{innerStrokeWidth:2,innerStrokeOpacity:1,outerFillColor:"white"},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90,x:0,y:0}}}};break;case"pyramid":r={threeDimension:!0,strokeColor:"black",strokeWidth:null,strokeOpacity:.5,fillOpacity:.8,gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.8,0]}}},datalabels:{showAs:"y",type:"singleside",padding:10,relativeX:!0,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"vertical"}};break;case"sunburst":r={strokeColor:"white",innerRadius:30,outerPadding:20,animation:{type:"fan"},datalabels:{showAs:"y",type:"circular",padding:10,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"splitpercent",parentLabel:{}}}};break;case"dial":r={startAngle:-kl/2,endAngle:kl/2,innerRadius:"65%",maxRadius:500,outerPadding:20,padding:0,strokeColor:"rgba(0,0,0,0.1)",animation:{type:"fanAll"},needle:{show:!0,type:"round",strokeColor:"black",fillColor:"grey",width:15,padding:15},minmaxlabels:{show:!0,fontSize:a.datalabels.fontSize.l5},datalabels:{show:!0,showAs:"y",padding:2},levelMarker:{enabled:!0,strokeColor:"rgba(0,0,0,0.1)",innerPadding:0,outerPadding:0,colorGamma:[.3,.9]},targetMarker:{outerStrokeWidth:3,symbol:"line",innerFillOpacity:0,innerStrokeOpacity:0,outerFillColor:"grey",outerStrokeColor:"#000"},gradients:{options:{linear:{x2:2,y2:2,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:16.5,spreadMethod:"reflect"}}},events:{enabled:!1}};break;case"bubble":r={outerPadding:.02,multiColoring:!1,marker:{innerFillOpacity:0,innerStrokeWidth:0,innerStrokeOpacity:0,outerFillOpacity:.4,outerStrokeOpacity:1},hoveroptions:{innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeOpacity:1,innerStrokeWidth:0,outerFillOpacity:.3,outerStrokeOpacity:.5},datalabels:{showAs:"y"},animation:{type:"sizing"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[1.5,0]},radial:{radius:90,colorGamma:[1.5,0]}}}};break;case"packedbubble":r={fillOpacity:.2,outerPadding:5,animation:{type:"sizing"},datalabels:{showAs:"y"}};break;case"bullet":r={strictBandWidth:!0,outerPadding:1e-8,levelMarker:{enabled:!0,dataindex:2,color:[],colorGamma:[.3,.9],fillOpacity:.9,maxBandWidth:200},targetMarker:{enabled:!0,dataindex:3,symbol:"line",innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerFillColor:"rgba(0, 0, 0, 0.6)",outerStrokeOpacity:1,outerStrokeWidth:5,outerStrokeColor:"rgba(0, 0, 0, 0.6)",label:{fontSize:a.datalabels.fontSize.l5}},animation:{type:"verticalAll"},datalabels:{textOverlap:"none",showAs:"y",stackLabels:{show:!1,showAs:"y"}},gradients:{options:{linear:{y2:50}}}};break;case"gantt":r={outerPadding:.04,padding:0,interPadding:.05,maxBandWidth:200,levelMarker:{enabled:!1,dataindex:2,fillOpacity:.3,bandWidth:4},hoveroptions:{enabled:!1,start:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},end:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2}},marker:{enabled:!1,start:{size:1,innerStrokeWidth:0,outerStrokeWidth:2},end:{size:1,innerStrokeWidth:0,outerStrokeWidth:2}},border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},animation:{type:"verticalAll"},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:50}}},dependency:{enabled:!1,targetIndex:0,link:{type:"ES",strokeWidth:2,strokeColor:"#111111",errorStyle:"red",padding:20},marker:{enabled:!0,padding:10,size:1.5,innerFillColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerStrokeOpacity:0,outerStrokeColor:"red",outerFillColor:"blue"}}};break;case"treemap":r={outerPadding:5,strokeColor:"rgba(255,255,255,0.7)",animation:{type:"fadeOneByOne"},datalabels:{showAs:"y",vAlign:"bottom",hAlign:"left"},gradients:{options:{linear:{y2:100,x2:100,colorGamma:[.5,0]},radial:{radius:100}}},parent:{strokeOpacity:0,datalabels:{position:"inset",vAlign:"center",hAlign:"center",showAs:"y",show:!1},events:{}}};break;case"heatmap":r={strokeColor:"white",animation:{},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:100},radial:{radius:100}}}};break;case"geoheatmap":r={animation:{enabled:!1},datalabels:{showAs:"geo",fontWeight:"bold"},gradients:{options:{linear:{y2:100},radial:{radius:100,gradientUnits:"objectBoundingBox"}}}};break;case"dotgrid":r={fillOpacity:.2,outerPadding:.2,animation:{type:"grid"},datalabels:{showAs:"x"}};break;case"waterfall":r={outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},connector:{},comparisonLine:{},cascadeCategories:{dataindex:2},risingCategories:{},fallingCategories:{},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}};break;case"wordcloud":r={strokeColor:"transparent",animation:{type:"fadeOneByOne"},datalabels:{showAs:"x"},gradients:{options:{linear:{x2:100,y2:100,colorGamma:[0,1.5]},radial:{x:50,y:50,radius:100,colorGamma:[1,0]}}},mask:{}};break;case"metadata":r={axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"",datatype:"numeric"},{dataindex:1,columnname:"",datatype:"numeric"}]}}return r},So.setDefaultOptions=function(e,t,a,r,n){n||(r=So.getDefaultOptions(e,t,a));var i=null==t[e]?t[e]={}:t[e];return Cd(r,i,!0,!0),t[e]=r,r};var hd={solid:"",shortdash:"1.5,1.5",shortdot:"0.1,1.5",dashed:"2.5,2.5",longdash:"5,5",dotted:"0.1,2.5",shortdashdotdot:"1.5,2,0.1,2,0.1,2",dashdot:"2.5,2.5,0.1,2.5",longdashdot:"5,5,0.1,5",longdashdotdot:"5,2.5,0.1,2.5,0.1,2.5"},fd=function(){};fd.get=function(e,t,a,r){r=r||{};var n=r.offset,i=(r.dimension,r.returnSVGimage),o=r.base64,l=r.chartObj,s="svgPattern"==r.moduleType?pd:null;if(e=e||s,(null!=t||""!=t)&&e[t]){var c;l&&l.getPatternSvg?c=l.getPatternSvg():(c=Od(r.renderTo,dd.patternSVG),c.isD3Selection||(c=Rl(c)));var d,u="zp"+Z(a,t);if(null!=u){var h=Gt(c.node()),f=Ll[h].EFFECTS;return ut(f[u])?(d=f[u],i?d:d.id||d):(d=e[t](a,u,n,i,o,l,c),d?(f[u]=d,i?d:d.id||d):void 0)}}},So.effects=fd,So.patternutil=function(){};var gd={};So.addPattern=function(e,t,a,r,n,i,o,l,s){gd[e]={type:t||"diagonal-line-right",size:a||5,strokeWidth:r||1,bgClr:i,stroke:n,fillOpacity:o||1,strokeOpacity:l||1,translate:s}},So.getPattern=function(e){return{type:gd[e].type,size:gd[e].size,strokeWidth:gd[e].strokeWidth,bgClr:gd[e].bgClr,stroke:gd[e].stroke,fillOpacity:gd[e].fillOpacity,strokeOpacity:gd[e].strokeOpacity,translate:gd[e].translate}};var pd=function(){};pd.imageFill=function(e,t,a,r,n,i,o){var l=e.width,s=e.height,c=o;return c.select("defs").append("pattern").attrs({patternUnits:"userSpaceOnUse",id:t,width:l,height:s,x:e.x||0,y:e.y||0}).append("image").attrs({"xlink:href":e.name,x:0,y:0,width:l,height:s}),t},pd.svgPatternFill=function(e,t,a,r,n,i,o,l){var s;if(s=null!=e.ele?I(e.ele,e,t,l,o):H(e,t,l,o),r){var c="<svg xmlns=\'http://www.w3.org/2000/svg\' xmlns:xlink=\'http://www.w3.org/1999/xlink\' width=\'"+s.w+"\' height=\'"+s.h+"\'>"+(new XMLSerializer).serializeToString(s.node.node())+"<path d=\'"+_("square")(hl(s.w,s.h))+"\' transform=\'translate("+s.w/2+","+s.h/2+")\' style=\'fill: url(#"+s.id+")\'></path> </svg>";return{url:ud.FIREFOX||n?"data:image/svg+xml;base64,"+sd(c):"data:image/svg+xml;utf8,"+c,node:s.node,w:s.w,h:s.h,id:s.id}}return s};var yd=function(){};yd.get=function(e,t,a,r,n,i){var o=e.type;if(o&&o!==Al){var l=n?n.plot.renderer.mode:"svg",s=e.options[o]||e.options,c=wd(s);switch(c.color=null!=t?t:c.color,c.dimension=null!=a?a:c.dimension,c.defsLocation=n?n.defsLocation:"",c.id=n.id,l){case"canvas":return c.pointOpacity=i||1,canvasGradient.create(n.context,o,c,r);default:return fd.get(yd,o,c,{offset:r,chartObj:n})}}},yd.svgGradientFill=function(e,t,a,r,n,i,o){return e&&e.type?yd[e.type](e,t,a,r,n,i,o):null},yd.radial=function(e,t,r,n,i,o,l){var s=l,c=e.color,d=e.dimension,u=e.spreadMethod,h=a(d)?ut(d[2])?d[2]:d[0]:d.r,f=+e.x||0,g=+e.y||0,p=+e.radius||0,y=Yl().domain([0,100]),v=s.select("defs").append("radialGradient").attrs({id:t,gradientUnits:e.gradientUnits||"userSpaceOnUse",spreadMethod:u});if("objectBoundingBox"===e.gradientUnits)v.attrs({cx:f+"%",cy:g+"%",r:p+"%"});else{var m=a(d)?h:d.x2-d.x1,x=a(d)?h:d.y2-d.y1,b=y.copy().range([0,m]),C=y.copy().range([0,x]),w=y.copy().range([0,h]);v.attrs({cx:b(f),cy:C(g),r:"repeat"!==u&&"reflect"!==u||!ud.IS_IOS&&!ud.SAFARI?w(p):h})}return F(v,e,c,"radial"),t},yd.linear=function(e,t,r,n,i,o,l){var s,c,d,u,h=l,f=e.color,g=e.dimension,p=e.spreadMethod,y=+e.x1||0,v=+e.x2||0,m=+e.y1||0,x=+e.y2||0,b="repeat"!==p&&"reflect"!==p||!ud.IS_IOS&&!ud.SAFARI?100:ul(fl(v-y),fl(x-m));a(g)?(s=0,c=g[0],d=0,u=g[1]):(s=g.x1||0,c=g.x2||0,d=g.y1||0,u=g.y2||0),/(pie|dial|bubblepie)/.test(r)&&(s=-c,d=-u);var C=Yl().domain([0,100]).range([s,c]),w=Yl().domain([0,100]).range([d,u]);y=100*y/b,v=100*v/b,m=100*m/b,x=100*x/b;var k=h.select("defs").append("linearGradient").attrs({id:t,gradientUnits:e.gradientUnits,spreadMethod:p});return k.attrs("userSpaceOnUse"==e.gradientUnits?{x1:C(y),x2:C(v),y1:w(m),y2:w(x)}:{x1:y+"%",x2:v+"%",y1:m+"%",y2:x+"%"}),F(k,e,f,"linear"),t},yd.thresholdLinear=function(e,t,a,r,n,i,o){var l=o,s=l.select("defs").append("linearGradient").attrs({id:t,gradientUnits:"userSpaceOnUse",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}),c=Qt(s,"stop",a,".","class","stop");return c.attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color}),t};var vd=function(){};vd.chalk=function(e,t,a,r,n,i,o){var l=o,s=l.select("defs").append("filter").attrs({id:t,x:-.3,y:-.5,height:2,width:1.6,"color-interpolation-filters":"sRGB"});return s.append("feTurbulence").attrs({baseFrequency:.32065,seed:115,result:"result1",numOctaves:1,type:"turbulence"}),s.append("feOffset").attrs({result:"result2",dx:-2,dy:-2}),s.append("feDisplacementMap").attrs({scale:5,yChannelSelector:"G",in2:"result1",xChannelSelector:"R","in":"SourceGraphic"}),t},vd.dropShadow=function(e,t,a,r,n,i,o){var l=o,s=l.select("defs").append("filter").attrs({x:e.x,y:e.y,width:e.width,height:e.height,id:t,filterUnits:e.filterUnits});if(s.append("feGaussianBlur").attrs({"in":e.source||"SourceAlpha",stdDeviation:e.blur}),"SourceGraphic"!==e.source){s.append("feOffset").attrs({dx:e.dx,dy:e.dy,result:"offsetblur"});var c=e.color,d=null,u=c&&c.match(tl);u&&5===u.length&&(c=Ta(c),d=u[4]);var h=s.append("feFlood");h.attrs({"flood-color":c,"flood-opacity":d}),s.append("feComposite").attrs({in2:"offsetblur",operator:"in"});var f=s.append("feMerge");f.append("feMergeNode"),f.append("feMergeNode").attr("in","SourceGraphic")}return t},vd.colorMatrix=function(e,t,a,r,n,i,o){{var l=o,s=l.select("defs").append("filter").attr("id",t);s.append("feColorMatrix").attrs({"in":"SourceGraphic",type:e.type,values:e.values})}return t},vd.freeHand=function(e,t,a,r,n,i,o){{var l=o,s=(null==e.scale?7:e.scale,l.select("defs").append("filter").attr("id",t));s.append("feTurbulence").attrs({type:"fractalNoise",baseFrequency:.015,numOctaves:2,result:"turbulence_3","data-filterId":3}),s.append("feDisplacementMap").attrs({xChannelSelector:"R",yChannelSelector:"G","in":"SourceGraphic",in2:"turbulence_3",scale:e.scale})}return t};var md=function(){};md.tenbytenGrid=function(e,t){{var a=dd.patternSVG,r=a.select("defs").append("mask").attrs({id:t,maskUnits:"userSpaceOnUse",width:e.width,height:e.height,x:e.x,y:e.y});r.append("polygon").attr("points",N(e.x,e.y,e.type,e.percent,e.size,e.width)).styles({fill:e.fillColor})}return t};var xd=function(){};xd.polygon=function(e,t,a,r,n,i,o){var l=xd.createElement(Us,t,i,o);return xd.setAttributes(l,e,["d"]),t},xd.rect=function(e,t,a,r,n,i,o){var l=xd.createElement(RECT_ELEMENT,t,i,o);return xd.setAttributes(l,e,["x","y","width","height"]),t},xd.circle=function(e,t,a,r,n,i,o){var l=xd.createElement(Gs,t,i,o);return xd.setAttributes(l,e,["cx","cy","r"]),t},xd.createElement=function(e,t,a,r){var n=ud.SAFARI?a.svg:r,i=n.select("defs").append("clipPath").attr("id",t).append(e);return i},xd.setAttributes=function(e,t,a){a.forEach(function(a){e.attr(a,t[a])})};var bd={getDimension:function(e,t){if(e.dataObject.isPolarAxisCategory){var a=e.plotarea_approx.radius;return{r:a,x1:-a,x2:a,y1:-a,y2:a}}if(e.isAxisCategory){var r=e.rendererConf[t].params,n=e.chartTypes[t].value,i=e.systemConf.chart.axes,o=i.xaxis.reversed,l=i.yaxis[r.yaxiscolumnorder].reversed,s=r.xscale,c=r.yscale,d=s.range(),u=c.range(),h=function(e,t){if(e.bandwidth&&(Fr(n)||n===So.charttype.line)){var a=e.bandwidth()/2,r=t[0]<t[1]?1:-1;return[t[0]+a*r,t[1]-a*r]}return t};return d=h(s,d),u=h(c,u),r.axisrotated?{x1:u[+!l],x2:u[+!!l],y1:d[+!o],y2:d[+!!o]}:{x1:d[+!!o],x2:d[+!o],y1:u[+!!l],y2:u[+!l]}}}};So.utils=function(){},So.utils.getActualTextBounds=function(e,t,a){var t=t,r=e,n=a*(2*Math.PI/360),i={};return i.width=Math.abs(r*Math.sin(n))+Math.abs(t*Math.cos(n)),i.height=Math.abs(r*Math.cos(n))+Math.abs(t*Math.sin(n)),i};var Cd=So.utils.mergeJSON=function(e,t,a,r){e=e||{},t=t||{};var n=null!=r&&1==r?e:wd(e);for(var i in t)t.hasOwnProperty(i)&&(void 0!=n[i]?null==t[i]||t[i].constructor!=Object&&t[i].constructor!=Array?1==a&&"object"==typeof n&&(n[i]=t[i]):n[i]=Cd(n[i],t[i],a,r):n[i]=t[i]);return n};So.utils.getValueOfPlotOptions=function(e,t){return function(a){return null!=e&&null!=e[a]?e[a]:null!=t&&null!=t[a]?t[a]:null}},So.utils.getVal=function(e,t){return"function"==typeof e?e.apply(null,t):e};var wd=So.utils.simpleClone=function(e){var t,r=e;if(e&&"object"==typeof e){r=a(e)?[]:{};for(t in e)r[t]=wd(e[t])}return r},kd=So.utils.getPropVal=function(e,t){return at(e,t,!0)};So.utils.elementIsVisible=Ot;var Od=function(){var e,t,a=arguments,r=a.length;for(e=0;r>e;e++)if(t=a[e],ut(t))return t;return a[r-1]};d3.selection.prototype.isD3Selection=!0,So.utils.getStyle=Dt,So.utils.toCapitalize=Ht,So.utils.fixHDPI=Bt,So.utils.arrayFind=Ft,So.utils.moveArrayElement=Vt,So.utils.isShadowElement=_t,So.utils.isShadowRoot=Wt,So.utils.isElementOnDocument=Yt,So.utils.isElementVisible=Xt,So.utils.getRootBody=Nt,So.utils.createElement=ca;var Sd=function(){var e=function(e,t,a){a=a||{x:0,y:0};var r=e.x,n=e.y,i=a.x,o=a.y;return{x:(r-i)*yl(t)+(n-o)*vl(t)+i,y:(r-i)*vl(t)-(n-o)*yl(t)+o}},t=function(e,t){var r,n,i=t.x||0,o=t.y||0,l=i+t.width,s=o+t.height;return a(e)?(r=e[0],n=e[1]):(r=e.x,n=e.y),r>=i&&l>=r&&n>=o&&s>=n},r=function(e){return e/180*kl};return{rotatePoint:e,pointInRectangle:t,degreeToRadian:r}}(),Ad=function(e){return e},Pd={};Pd.getProcessedColorRange=function(e,t,a,r){var n=a.stops,i=a.ranges,o=[],l=r.dataset.getDataType("clr")===Ns;if(!l&&n&&n.length){var s=0;t.forEach(function(t){var a=n.indexOf(t);-1===a&&(a=s),o.push(e[a%e.length]),s=a})}else if(i&&i.length){i=nr(r,!0);for(var c=0,d=function(e,a){return(1===e.length?l?e[0]===t[c]:e[0]===t[c+1]:e[0]===t[c]&&e[1]===t[c+1])?(h=a,!0):void 0},u=t.length;u>c;l?c++:c+=2){var h=-1;i.some(d),o.push(-1===h||i[h].disabled?null:e[h%e.length])}}else o=e;return o},Pd.getColorDomain=function(e){var t=e.systemConf.legend.colorBand,a=t.stops,r=t.ranges,n=Pd.getMinMax(e),i=Od(t.minRange,n[0])||0,o=Od(t.maxRange,n[1])||0,l=e.dataset.getDataType("clr")===Ns;if(!l&&a&&a.length){var s=et(a);s.sort(is);var c=s.filter(function(e){var a=!0;return ut(t.minRange)&&(a=a&&e>=t.minRange),ut(t.maxRange)&&(a=a&&e<=t.maxRange),a});return(i<c[0]||!c.length)&&c.splice(0,0,i),o>c[c.length-1]&&c.splice(c.length,0,o),c}if(r&&r.length){var d=nr(e),u=[];if(l)u=d;else{if(1===d[0].length){var h=i;d=d.map(function(e){var t=[h,e[0]];return h=t[1],t})}u=d,u.splice(0,0,[-1/0,-Ol]),u.splice(u.length,0,[Ol,1/0])}var f=Jl(u);return f}return[i,o]},Pd.getMinMax=function(e){var t=Pd.getAllColorData(e);return rs(t)},Pd.getCategories=function(e){var t=Pd.getAllColorData(e);return t.filter(function(e,a){return a===t.indexOf(e)})},Pd.getAllColorData=function(e){var t=e.seriesdata,a=[];return t.forEach(function(t){if(!t.disabled){var r=t.data||t;Pd.pushColorData(e,r,a)}}),a},Pd.pushColorData=function(e,t,r){if(t&&a(t)&&a(t[0]))t.forEach(function(t){Pd.pushColorData(e,t,r)});else{var n=e.dataset.getClr(t);r.push(n)}},Pd.isQuantileColorScale=function(e){return e.axes.clr?"quantile"===e.axes.clr.scaleType:ut(e.dataset.clridx)&&!e.dataObject.isPolarAxisCategory&&e.systemConf.legend.colorBand.type!==Al},Pd.getItemIndex=function(e,t,a,r){var n=a&&e.dataset.getClr(a);return t?t(n):r},Pd.getIndexScale=function(e){var t,a=Pd.isQuantileColorScale(e),r=e.systemConf.legend.colorBand.ranges;if(a&&r&&r.length){var n,i=e.axes.clr.scale,o=i.domain(),l=e.patternPallete,s=e.imagePallete;s&&s.length?n=s:l&&l.length&&(n=l),n&&(t=i.copy(),t.range(Pd.getProcessedColorRange(xs(n.length),o,e.systemConf.legend.colorBand,e)))}return t},So.scale.constructor=function(e,t,a,r){function n(){var t=e.dataObject,n=t.hierarchical,i=0,o=e.brush?e.brush.extent:null,l=e.axes.x;if(e.axes.x.scale=a(e,e.dataObject,e.plotarea,e.axes.x.orient,0,e.dataset,"x",o),e.axes.x.eventscale=null==r?e.axes.x.scale:r(e,e.dataObject,e.plotarea,e.axes.x.orient,null,e.dataset,"x"),ut(n)){e.axes.x.rangeScale=e.axes.x.scale.copy(),e.axes.x.rangeScale.outerPaddingPx=e.axes.x.scale.outerPaddingPx,n.groupByDiscreteTime&&e.axes.x.rangeScale.domain(t.getDomain(t.getCategories("x"))),i=n.finalDepth,n.setRanges(e.axes.x.rangeScale);\nfor(var s=0;i>s;s++)l.levels[s]||(l.levels[s]={}),l.levels[s].scale=a(e,t,e.plotarea,e.axes.x.orient,s+1,e.dataset,"x",o,null)}return[{scale:e.axes.x.scale}].concat(l.levels)}function i(){for(var t=e.axes.y.count,n=e.axes.y,i=0;t>i;i++)n.groups[i]||(n.groups[i]={}),n.groups[i].scale=a(e,e.dataObject,e.plotarea,e.axes.y.orient,i,e.dataset,"y"),n.groups[i].eventscale=null==r?n.groups[i].scale:r(e,e.dataObject,e.plotarea,e.axes.y.orient,i,e.dataset,"y");return e.axes.y.groups}var o,l=So.scale.getScale,s=So.scale.getEventScale;switch(a=Od(a,l),r=Od(r,s),t){case"left":o=e.axes.rotated?n():i();break;case"bottom":o=e.axes.rotated?i():n()}return o},So.scale.getScale=function(e,t,a,r,n,i,o,l,s){function c(){var n=m.reversed;if(O)return n?[lt(k.endAngle,2*kl),lt(k.startAngle,0)]:[lt(k.startAngle,0),lt(k.endAngle,2*kl)];if("clr"===o)return e.imagePallete||e.seriesColor;if("z"===o){if(S){var i=1;return[ka(k.minSize,i,ka("25%",i)),ka(k.maxSize,i,ka("100%",i))]}var l;t.isCombinationalChart?e.chartTypes.some(function(e){var t=e.name;return"bubble"===t||"bubblepie"===t?(l=t,!0):void 0}):l=w;var s=y.chart.plot.plotoptions[l]||{},c=hl(a.width,a.height),i=lt(s.size,1);return[ka(s.minSize,c,ka("2.5%",c))*i,ka(s.maxSize,c,ka("25%",c))*i]}var d=t.getPlotBorder();return n?"bottom"===r||"top"==r?[Ar(e,"width",a)-d.right,d.left]:[d.top,Ar(e,"height",a)-d.bottom]:"bottom"===r||"top"==r?[d.left,Ar(e,"width",a)-d.right]:[Ar(e,"height",a)-d.bottom,d.top]}function d(){return O||S||"x"!=o?0:lt(k.padding,t.noofBarEnabledSeries?.2:.9)}function u(){return O||A||S?0:"y"===o?lt(m.outerPadding,e.datalabels.hasFixedPosition?1e-8:.05):null!=s?s:lt(k.outerPadding,.02)}function h(){return"x"===o?y.chart.axes.xaxis:"clr"===o?y.legend.colorBand:y.chart.axes.yaxis[n||0]}function f(e,a,r){var i=0,l=0,s=0,c=e[0]<e[1],d=c?0:1,u=c?1:0;l=t.extendOuterpadding(p,e,y,E,r,o,n),i+=l;var h=fl(e[1]-e[0]);return s=h*a,i+=s,e[d]=e[d]+i,e[u]=e[u]-i,{range:e,outerPaddingPx:i}}var g,p,y=e.systemConf,v=i.getDataType(o,n),m=h(),x=t.hierarchical,b=ut(m.minRange),C=ut(m.maxRange),w=e.chartTypes[0].name,k=y.chart.plot.plotoptions[w],O="dial"===w||"web"===w&&"x"===o,S="heatmap"===w,A="clr"===o&&Pd.isQuantileColorScale(e),P=at(y,"chart.zoom."+o,!0),T=c(),E=d(),s=u();switch(v){case"numeric":l?p=l:"x"===o?p=t.getMinMaxX(0):"y"===o?p=t.getMinMaxY(n,s):"z"===o?p=t.getMinMaxZ():(p=Pd.getColorDomain(e),T=Pd.getProcessedColorRange(T,p,m,e));var L=p[0],z=p[1];if("NoData"==p[0]&&"NoData"==p[1]&&(p=[0,0]),!P&&(l||"x"==o)){var D=p[1]-p[0],M=0==D?e.plotarea.width/2:D*s;p[0]=b?p[0]:p[0]-M,p[1]=C?p[1]:p[1]+M}var j="clr"===o&&m.ranges&&m.ranges.length?Pd.quantileScale:Yl;g=j().domain(p).range(T);var R=[g(L),g(z)];g.actualRange=R,g.origRange=T;break;case"ordinal":if(l)p=l;else if("clr"===o)p=Pd.getColorDomain(e),T=Pd.getProcessedColorRange(T,p,m,e);else{var I=t.getCategories(o,n);p=t.getDomain(I,!0)}var H,B=0,F=[T[0],T[1]];if(E=1===p.length?0:E,s){B=So.scale.getOuterPadding(T,p.length,E,s);var V=f(T,s,B);T=V.range,H=V.outerPaddingPx}var j="clr"===o?Zl:Xl;g=j().domain(p),"clr"===o?g.range(T):g.range(T).paddingInner(E).paddingOuter(0),sr(g),g.origRange=F,g.outerPaddingPx=H||0;break;case"time":var N=i.getColumn(o,n),_=N[N.datatype],W=_&&_.subfunction,Y=Od(_&&_.useUTC,!1);p=l?l:"x"===o?t.getMinMaxX(0):t.getMinMaxY(n,0);var L,z,X=new Date(p[0]),U=new Date(p[1]);if(ut(W)||(W=En(U-X).subFunction),!P){if(!y.chart.axes[o+"axis"].disableBaseValue){var G=new Td(_);G.useUTC=Y,G.getBaseValue(X,W,!1),G.getBaseValue(U,W,!0)}if(L=X,z=U,t.isBubbleEnabled){var Z=t.overBubbles([X.getTime(),U.getTime()],o,"y"==o?n:null);X=new Date(X.getTime()-Z[0]),U=new Date(U.getTime()+Z[1])}var D=U.getTime()-X.getTime(),Q=0==D?e.plotarea.width/2:D*s,q=0==s?0:t.getCorrectionOverDataLabels([X.getTime(),U.getTime()],"x");X=new Date(b?p[0]:X.getTime()-Q-q),U=new Date(C?p[1]:U.getTime()+Q+q),p=[X,U]}g=Ul().domain(p).range(T);var R=[g(L),g(z)];g.actualRange=R,g.origRange=T;break;case"ordinalNonLinear":var I=t.getCategories(o,n);p=t.getDomain(I);var F=[T[0],T[1]],K=x.rangeList?x.rangeList[n-1]:null;g=So.nonLinearOrdinalScale().domain(p).range(T).rangeBands(K),g.origRange=F}return g.outerPadding=s,g},So.scale.getEventScale=function(e,t,a,r,n,i,o){var l,s=i.getDataType(o,n);switch(s){default:l=So.scale.getScale(e,t,a,r,n,i,o)}return l},So.scale.invert=function(e,t,a,r,n,i){var o;switch(e){case"numeric":case"time":var l="y"==n?r?t.x:t.y:r?t.y:t.x;o=a.invert(l);break;case"ordinal":var s=sr(a),c=a.bandwidth(),d=s.length>1?fl(s[1]-s[0]):0,u=fl(d-c);s=s.map(function(e){return e-u/2}),o=ir(t,s,n,r,i)}return o},So.scale.ordinalSubInvert=function(e,t,a,r,n,i,o){var l=a.bandwidth(),s=a.range(),c=r.ordinalRange,d=a.domain(),u=s[1]-s[0],h=u-d.length*l,f=d.map(function(e,a){return c[t]+a*(l+h)}),g=ir(e,f,i,n,o);return g},So.scale.barBandwidth=function(e){var t=e.systemConf,a=e.dataObject,r=e.chartTypes[0],n=e.dataset.seriesTypes,i=a.barChartType||(a.noofBarEnabledSeries?n.has(So.charttype.stkdbar)?So.charttype.stkdbar:n.has(So.charttype.bar)?So.charttype.bar:n.has(So.charttype.bullet)?So.charttype.bullet:n.has(So.charttype.waterfall)?So.charttype.waterfall:r.value:r.value);a.barChartType=i;var o=a.isstacked(i)?a.groupedByStack.keys().length||1:ql(e.seriesdata.map(function(e){return a.isBarEnabled(e)?e.data.length:void 0})),l=r.name,s=r.value==So.charttype.bullet,c=(Ur(r.value),t.chart.plot.border),d=c.show===!0?c.size:0,u="gantt"==l||"bullet"==l||"bar"==l||"waterfall"==l?t.chart.plot.plotoptions[l].padding||.2:.2,h=1==o?0:"bar"==l||"gantt"==l||"waterfall"==l?t.chart.plot.plotoptions[l].interPadding||0:0,f=t.chart.plot.plotoptions[l].outerPadding;f=null!=f&&""!==f?f:.02;var g,p,y=e.axes.x.scale.domain().length,v=e.axes.rotated?[Ar(e,"height",e.plotarea)-d,d]:[d,Ar(e,"width",e.plotarea)-d];f=So.scale.getOuterPadding(v,y,u,f),f+=a.extendOuterpadding(xs(y),v,t,u,f,"x"),e.barscale1=g=e.axes.x.scale,e.barscale2=p=Xl().domain(xs(o)).range([0,g.bandwidth()]).paddingInner(h);var m=a.noofBarEnabledSeries&&!s?t.chart.plot.plotoptions[l].maxBandWidth||g.bandwidth():200;if(!s&&p.bandwidth()>m){var x=(g.bandwidth()-o*m)/2;p.range([x,g.bandwidth()-x]).paddingInner(h)}return[g,p]},So.scale.getOuterPadding=function(e,t,a,r){var n=fl(e[1]-e[0]),i=r*n,o=(n-2*i)/(t-a+0);return i/o},So.scale.getOrdinalOuterPadding=function(e,t,a,r){var n=fl(e[1]-e[0]),i=r*n;return i/2},So.scale.getContinuousRangeBand=function(e,t,a){var r=e(t[0]),n=a&&t[a]?e(t[a]):r,i=e(a&&t[a+1]?t[a+1]:t[1]),o=i-n,l=e.range(),s=0>o?-1:1;return{outerPaddingInPixel:s*hl(fl(r-l[0]),fl(o/2)),rangeBand:o/2}},So.scale.getDiscreteRangeBand=function(e){var t=e.bandwidth(),a=e.outerPaddingPx+t/2,r=e.domain().length>1?e.ordinalRange[1]-e.ordinalRange[0]-t:0,n=t/2+r/2;return{outerPaddingInPixel:hl(a,n),rangeBand:t/2+r/2}},So.scale.getRangeBand=function(e,t,a){var r;return r=e.bandwidth?So.scale.getDiscreteRangeBand(e):So.scale.getContinuousRangeBand(e,t,a)},So.nonLinearOrdinalScale=function(){function e(e){return t?t.get(e):null}var t,a,r,n,i;return e.domain=function(t){return arguments.length?(a=t,e):a},e.rangeBand=function(){return 0},e.rangeBands=function(a){if(!arguments.length)return r;if(null==a)return e;i=a,r=new es,t=new es;var n=-1,o=a.length;for(temp=0;++n<o;)t.set(n,a[n][0]),r.set(n,a[n][1]-a[n][0]);return e},e.discreteWidth=function(e){return r?r.get(e):null},e.range=function(t){return arguments.length?(n=t,e):n},e.copy=function(){return So.nonLinearOrdinalScale().domain(a).rangeBands(i).range(n)},e},Pd.quantileScale=function(){function e(e){var t;return r.forEach(function(a,r){e>=a[0]&&e<=a[1]&&(t=r)}),ut(t)?a[t]:null}var t=[],a=[],r=[];return e.domain=function(a){if(arguments.length){t=a;for(var n=0;n<t.length;n+=2)r.push([t[n],t[n+1]]);return e}return t},e.range=function(t){return arguments.length?(a=t,e):a},e.copy=function(){return Pd.quantileScale().domain(t).range(a)},e},So.axis.render=function(e,t,r,n){function i(){var t=C.chart.axes.animation||{},a=t.enabled;if(!ut(a)){var r=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?e.seriesdata:e.seriesdata.slice(0,1);a=r.some(function(t,a){var r=e.chartTypes[a].name;return ha(C.chart.plot.plotoptions[r],t.plotoptions,e,r).enabled})}return a?Od(t.duration,600):0}function o(t,a,r,n,i,o){var l=C.chart.plot.border,s=e.container.selectAll("g.plotareaBorder-property"),c=null;if(ut(l)&&l.show===!0)e.drawPlotBorder();else{var d=a.axisline,u=0==d.show||null==d.color?Pl:d.color,h=lt(d.strokeWidth,1),f=d.style||"solid",g=rr(a,o,e)&&!n.tickObj.tickValueObj.inlineToPlot,p="left"==t||"right"==t?n.preCalcTickLen().width:n.preCalcTickLen().height,y=g?p:0,v=Qt(s,"line",[1],".","class",t);if(0==i||0==a.show||"hidden"==r.style("visibility"))return void v.style("stroke",Pl);var m,x,b,w;"bottom"==t?(m=-e.tickarea.left,x=e.plotarea.width+e.tickarea.right,b=e.plotarea.height+.5+y,w=e.plotarea.height+.5+y):"left"==t?(m=.5-y,x=.5-y,b=0,w=e.plotarea.height+e.tickarea.bottom):"right"==t?(m=e.plotarea.width+.5+y,x=e.plotarea.width+.5+y,b=0,w=e.plotarea.height+e.tickarea.bottom):"top"==t&&(m=-e.tickarea.left,x=e.plotarea.width+e.tickarea.right,b=.5-y,w=.5-y),v.styles({"stroke-width":h,stroke:u,"shape-rendering":"crispedges","stroke-dasharray":P(f,h)}).attrs({x1:m,x2:x,y1:b,y2:w}),c={size:h,clr:u},s.node()["border-"+t]=c}r.selectAll("path.domain").style("stroke",Pl)}function l(t,a,r){var n=t.orient,i=e.axes.rotated;return n=null==n?"x"==a?i?"left":"bottom":i?"bottom":0==r?"left":"right":n}function s(t,a){var r=[];switch(t){case"left":r=e.axes.rotated?d("x",a):d("y",a);break;case"bottom":r=e.axes.rotated?d("y",a):d("x",a)}return r}function c(t,a,r,n){var i="left"==a?e.axes.rotated?"x":"y":e.axes.rotated?"y":"x",o=tr(e,i,r).component,l=h(o,i,t,a,r,n);return l}function d(t,a){var n=tr(e,t,a),i="x"==t?C.chart.axes.xaxis:C.chart.axes.yaxis[a]||C.chart.axes.yaxis[0],o=n.component;return o?o:(n.component="x"==t?i.show&&ma(e,"xaxis",r)?So.axis.get():null:i.show?So.axis.get():null,o)}function u(e,t,a,r){var n=[];return n=f(e,a,t,r)}function h(n,i,o,s,c){var d="x"==i?C.chart.axes.xaxis:C.chart.axes.yaxis[c],s=l(d,i,c),u="bottom"==s||"top"==s?r:t,h=d.show===!0&&ma(e,i+"axis",u),f=Ka(d.ticklabel),g=$a(s,f,rr(d,i,e));if("y"!==i||h&&!e.axes.y.groups[c].disabled||T++,n){var p="y"===i&&e.axes.y.groups[c].disabled;n.plotBorderDrawn=!h||p?n.plotBorderDrawn:!k[s],k[s]=!0}if(h){var y=(e.axes.y.groups,tr(e,i,c).ticks),m=y.preCalcAxisLen,b=(y.preCalcApproxAxisLength(D),y.preCalcAxisLen-m),S=y.tickValueObj,P="x"==i?i+"-axis-"+c:i+"-axis-"+c,L=Qt(O.selectAll("g."+i+"-axis"),"g",h?[d]:[],".","class",P);if(fl(b)>1&&(x(s,b),D=e.plotarea),null!=n){var z="y"==i?A.axes.y[c].length>1:!1,M=y&&y.isHierarchy()&&e.dataObject.hierarchical.groupByTime,j=e.dataset.getColumnIdx(i,M?0:c),R=A.columns[j].datatype;R=y&&y.isHierarchialLevelType()&&e.dataObject.hierarchical.categoryTree?Ns:R;var I=A.columns[j][R];I=z&&"y"==i?Qa(c,e):I;var H=I&&(I.axisformat||I.format),B=lt(d.tickmark.size,6),F=(w.isStackedPercentChart||w.isPercentChart)&&"y"==i?xn:gn,V=M?c:null,N=!(y&&y.isHierarchy())&&I&&H&&H.specifier&&H.specifier.constructor==Array||"wrapOnSpace"==S.mode||"wrapAll"==S.mode,_=S.isInline&&!S.inlineToPlot,W="left"===s||"right"===s?"width":"height";e.tickarea[s]=_&&n.plotBorderDrawn?S.axisgroup[W]:e.tickarea[s]||0,n.orient(s).scale(o).tickPadding(g).tickSize(B).tickSizeOuter(0).majorTicks(c===("y"===i?T:E)?v(s,i,S):null).plotarea(e.plotarea).systemconf(e.systemConf).tickRotation(S.rotation).preCalcTickLen(y.preCalcTickLen).chartObj(e).columnIndices(z&&"y"==i?A.axes.y[c]:[j]).isMultiLineTick(N);var Y=null!=I?I.axisformat||I.format:null;if(Y&&"auto"==Y.specifier&&!o.bandwidth)n.tickValues(y.getTicksforAxisComp()).tickFormat(function(e){var t=o,a=t.tickFormat()(e);d3.select(this).text(a),this.formattedVal=a});else{n.tickValues(y.getTicksforAxisComp());var X=y.getActualTicklabel(),U=y.tickValueObj.maxTickSize.horizontal,G=y.tickValueObj.maxTickSize.vertical,Z=So.utils.getVal(ot([d.ticklabel,e.systemConf.chart,e.systemConf.canvas,dd],"fontSize")),Q="wrapOnSpace"==y.tickValueObj.mode||"wrapAll"==y.tickValueObj.mode,q=n.isMultiLineTick(),K=ut(d.ticklabel.showAs),$=[null,s,e,S.rotation,d.ticklabel.textOverflow,n.scale(),L,n,"ticklabel",d.ticklabel,c,!0],J=cr.apply(null,$),et=function(t,r){var n=X(r),i=F(I,n,R,e,"axis",null,null,V);if(d3.select(this).text(i),this.formattedVal=i,q)Q&&(i=br(i,y.tickValueObj.mode,U,G,Z)),ia(d3.select(this),i,{orient:s});else if(K&&ut(y.tickValueObj.customTicks[r])){this.innerHTML="",ia(d3.select(this),y.tickValueObj.customTicks[r],null,!0);var o=la(d3.select(this));this.formattedVal=a(o)?o.join(" "):o}J(this,r)};n.tickFormat(et)}n.tickObj=y,n.hideAxisLabel=!ma(e,i+"axislabel",u)}}return n}function f(a,n,i){var s="x"==n?C.chart.axes.xaxis:C.chart.axes.yaxis[i],c=(s.ticklabel,l(s,n,i)),d="bottom"==c||"top"==c?r:t,u=s.show===!0&&ma(e,n+"axis",d),h="x"==n?n+"-axis-"+i:n+"-axis-"+i,f=Qt(O.selectAll("g."+n+"-axis"),"g",u?[s]:[],".","class",h),y=tr(e,n,i);if(f.style("display","y"===n&&e.axes.y.groups[i].disabled?Al:null),"x"===n&&u?g(s,i,a,!0):p(s,i,a,null,!0),u){{y.ticks.tickValueObj}e.plotarea=a.plotarea(),f.transition().duration(S).call(a,n,i),"y"==n&&1==a.plotBorderDrawn?o(c,s,f,a,u,n):"x"==n&&0==i&&o(c,s,f,a,u,n)}else 1==a.plotBorderDrawn&&o(c,s,f,a,u,n);"y"==n&&at(C.chart,"scroll")&&C.chart.scroll.enabled&&e.brush.initialize(e.plotarea)}function g(t,a,r,n){var i={left:0,top:0,right:0,bottom:0},o=e.axes.x.count;if(0==a){for(var l=0;o>l;l++){var s=tr(e,"x",l),c=s.component,d=r.orient(),u=n?y(t.label,t.ticklabel,c.preCalcTickLen(),e,"x",l,d):c.tickLabelWidth(),h=O.selectAll(".x-axis-"+l),f="right"==d?e.plotarea.left+e.plotarea.width+i.right:e.plotarea.left-i.left,g=e.axes.rotated||"top"==d?e.plotarea.top-i.top:e.plotarea.top+e.plotarea.height+i[d];i[d]+=u,h.attr("transform","translate("+f+","+g+")"),h.attr("x",f),h.attr("y",g)}var h=O.selectAll("g.x-axis-0")}}function p(a,n,i,l,s){var c=C.chart.axes.yaxis,d=e.axes.y.groups.length,u=O.selectAll(".y-axis-0"),h=c[0].orient||(e.axes.rotated?"bottom":c[0].orient||"left");if(l||0==n){for(var f={left:0,top:0,right:0,bottom:0},g=0;d>g;g++){var p=c[g],v=p.orient;v=v||(e.axes.rotated?"bottom":null!=p.orient?p.orient:0==g?"left":"right");var m="bottom"==v||"top"==v?r:t,x=p.show===!0&&ma(e,"yaxis",m);if(x){var b=e.axes.y.groups[g].component,w=O.selectAll(".y-axis-"+g),k=s?y(p.label,p.ticklabel,b.preCalcTickLen(),e,"y",g,v):b.tickLabelWidth(),S="bottom"==v||"top"==v?e.plotarea.left:"left"===v?e.plotarea.left-f[v]:e.plotarea.left+e.plotarea.width+f[v],A="bottom"==v?e.plotarea.height+e.plotarea.top:e.plotarea.top;f[v]+=e.axes.y.groups[g].disabled?0:k,w.attr("transform","translate("+S+","+A+")"),b&&1==b.plotBorderDrawn&&o(v,p,w,i,"y")}}e.axes.rotated?null:u.selectAll("line.majorTicks").attr("x2","right"==h?-e.plotarea.width:e.plotarea.width)}}function y(e,t,a,r,n,i,o){var l={top:0,right:0,bottom:5,left:0},s=0,c=0,d=tr(r,n,i),u=d.component,h=d.ticks;c="clr"===n?0:d.axisLabel.getBBox().height;var f=u.hideAxisLabel||e.show===!1||!ut(e.text)||""===e.text||h.isHierarchy()&&i<r.dataObject.hierarchical.finalDepth;f?l.top=l.bottom=l.left=l.right=0:(l.top=Od(e.marginTop,5),l.bottom=Od(e.marginBottom,5),l.left=Od(e.marginLeft,5),l.right=Od(e.marginRight,5));var g=Od(t.marginRight,5),p=Od(t.marginLeft,5),y=Od(t.marginBottom,5),v=Od(t.marginTop,5);switch(o){case"top":s=null!=a?a.height+v+l.bottom:0,s=s+c+l.top;break;case"bottom":s=null!=a?a.height+y+l.top:0,s=s+c+l.bottom;break;case"left":s=null!=a?a.width+p+l.right:0,s=s+c+l.left;break;case"right":s=null!=a?a.width+g+l.left:0,s=s+c+l.right}return u.tickLabelWidth(s),s}function v(t,a,r){var n,i,o,l;n=i=o=l=0;var s=r.isInline&&!r.inlineToPlot,c=r.longTickSize,d=s&&("left"==t||"right"==t)?c.width:0;if("bottom"==t?(i=d,l=-e.plotarea.height):"top"==t?(i=-d,l=e.plotarea.height):"left"==t?(n=-d,o=e.plotarea.width):"right"==t&&(n=d,o=-e.plotarea.width),"x"===a&&e.datalabels.hasFixedPosition){var u=e.axes.y.groups.map(function(e){return e.disabled}).indexOf(!1),h=C.chart.axes.yaxis[u].reversed,f=m(u);"bottom"==t?h?i-=f:l+=f:"top"==t?h?l-=f:i+=f:"left"==t?h?n+=f:o-=f:"right"==t&&(h?o+=f:n-=f)}return{x1:n,y1:i,x2:o,y2:l}}function m(t){var a,r=So.scale.getScale(e,e.dataObject,e.plotarea,e.axes.y.orient,t,e.dataset,"y"),n=r.origRange,i=e.dataset.getDataType("y",t);if(i===Ns){var o=r.domain();a=r(o[o.length-1])+r.bandwidth()/2}else{var o=e.dataObject.getMinMaxY(t,0,e.datalabels.hasFixedPosition);a=r(o[1])}return hl(fl(a-n[0]),fl(a-n[1]))}function x(t,a){var r=e.plotarea;"left"===t?(r.left+=a,r.width-=a):"right"===t?r.width-=a:"bottom"===t?(r.height-=a,r.bottom+=a):(r.height-=a,r.top+=a)}function b(t,a,r,n,i,o){k={left:!1,right:!1,top:!1,bottom:!1},e.container.selectAll("g.plotareaBorder-property").selectAll("line").style("stroke",Pl);var l=a.orient(),s=(a.scale(),a.majorTicks(),t.node().getBBox().width);s+="left"==l?r.label.marginLeft:r.label.marginRight,s=a.tickLabelWidth(),("hidden"!==t.style("visibility")||"remove"!==o)&&(e.plotarea.width="add"==o?e.plotarea.width-s:e.plotarea.width+s,e.plotarea.left="left"==l?"add"==o?e.plotarea.left+s:e.plotarea.left-s:e.plotarea.left);var c=0,d="add"==o?"visible":"hidden";t.style("visibility",d),"add"==o&&t.style("display",null);for(var u=0;u<e.axes.y.groups.length;u++){var h=O.selectAll("g.y-axis-"+u),f=e.axes.y.groups[u].component,g=f.orient(),y=f.majorTicks(),m=C.chart.axes.yaxis[u]||C.chart.axes.yaxis[0];h.node()&&("hidden"!=h.style("visibility")&&0==c?(y=v(g,i,f.tickObj.tickValueObj),f.majorTicks(y),h.transition().duration(0).call(f,i,u,!0),c++):null!=y&&c>0&&(f.majorTicks(null),h.transition().duration(0).call(f,i,u,!0)),"visible"!=h.style("visibility")||k[g]?(f.plotBorderDrawn=!1,"visible"==h.style("visibility")?h.selectAll("path.domain").style("stroke",m.axisline.color):h.selectAll("path.domain").style("stroke",Pl)):(k[g]=!0,f.plotBorderDrawn=!0))}p(r,n,a,!0)}var C=e.systemConf,w=e.dataObject,k={left:!1,right:!1,top:!1,bottom:!1},O=e.svg.selectAll("g.xychart"),S=i(),A=e.systemConf.metadata,T=0,E=0,L=So.DataProcessor.helpers,z=L.getParsedYAxisOrder;e.axes.animationDuration=S,e.zscale=e.dataObject.hasZaxis?So.scale.getScale(e,w,e.plotarea,e.axes.x.orient,null,e.dataset,"z"):null,e.datalabels.hasFixedPosition=e.datalabels.moduleExists&&Jn(e),e.tickarea={left:0,right:0,top:0,bottom:0};var D={left:e.plotarea.left,top:e.plotarea.top,width:e.plotarea.width,height:e.plotarea.height};So.axis.constructTickObj(e,t,r,"left",D,n),So.axis.constructTickObj(e,t,r,"bottom",D,n),e.zscale=e.dataObject.hasZaxis?So.scale.getScale(e,w,e.plotarea,e.axes.x.orient,null,e.dataset,"z"):null,Md.updatePlotareaByBandWidth(e,D);for(var M=So.scale.constructor(e,"left"),j=e.axes.rotated?"x":"y",R=0;R<M.length;R++){var I=s("left",R);I=c(M[R].scale,"left",R,n)}for(var H=So.scale.constructor(e,"bottom"),B=e.axes.rotated?"y":"x",R=0;R<H.length;R++){var I=s("bottom",R);I=c(H[R].scale,"bottom",R,n)}for(var R=0;R<M.length;R++){var I=tr(e,j,R);null!=I.component&&u(I.component,R,j,n)}for(var R=0;R<H.length;R++){var I=tr(e,B,R);null!=I.component&&u(I.component,R,B,n)}e.dataset.getDataType("x")==Ns&&So.scale.barBandwidth(e),e.updateZscale=function(){e.dataObject.hasZaxis?e.zscale.domain(w.getMinMaxZ()):null},e.updateScale=function(n,i,s,c){var d,u="y"==i?z(null==n||a(n)?n:n.yaxiscolumnorder):0,c="x"==i&&ut(c)?c:u,h=O.selectAll("g."+i+"-axis-"+c),f=tr(e,i,c),y=f.ticks,v="x"==i?C.chart.axes.xaxis:C.chart.axes.yaxis[u],m=v.ticklabel,k=f.component?f.component.orient():l(v,i,u),P="bottom"==k||"top"==k?r:t,T=v.show===!0&&ma(e,i+"axis",P),E=e.dataset.getColumnIdx(i,u),L=A.columns[E].datatype,L=y&&y.isHierarchialLevelType()&&e.dataObject.hierarchical.categoryTree?Ns:L,D=A.columns[E][L],M=y&&y.isHierarchy()&&e.dataObject.hierarchical.groupByTime,j=M?c:null;if(s){d=s;var R=So.scale.getScale(e,w,e.plotarea,k,u,e.dataset,i,d);f.eventscale=f.scale=R}else{var I=e.chartTypes[0].name,H=C.chart.plot.plotoptions[I].outerPadding;d=L==Ns?w.getCategories(i,c):"x"==i?e.dataObject.getMinMaxX(lt(H,.2)):e.dataObject.getMinMaxY(u);var R=So.scale.getScale(e,w,e.plotarea,k,c,e.dataset,i);f.eventscale=f.scale=R}if("y"!=i||h.empty()||"NoData"!=d[0]||"NoData"!=d[1])if("y"!=i||h.empty()||"hidden"!=h.style("visibility")||h.style("display")===Al){if(w.isBubbleEnabled&&"y"==i&&(f.eventscale=f.scale=So.scale.getScale(e,w,e.plotarea,k,u,e.dataset,"y")),T){f.component.scale(f.scale),D=A.axes.y[u].length>1&&"y"==i?Qa(u,e):D;var B=(w.isStackedPercentChart||w.isPercentChart)&&"y"==i?xn:gn,F=null!=D?D.axisformat||D.format:null,y=f.ticks,V="bottom"==k||"top"==k?y.tickValueObj.longTickSize.height:y.tickValueObj.longTickSize.width,N=y.getTickValues(e.plotarea.width,e.plotarea.height,s,!1,null,f.Ticks,e.plotarea);y.tickValueObj=N;var _="bottom"==k||"top"==k?y.tickValueObj.longTickSize.height:y.tickValueObj.longTickSize.width,W=y.preCalcTickLen,Y=V>_?_-V:_>V?_-V:0;"bottom"==k||"top"==k?W.height=W.height+Y:W.width=W.width+Y;var X=y.getTicksforAxisComp();f.component.tickValues(X).tickRotation(N.rotation);var U=y.getActualTicklabel(),G=y.tickValueObj.maxTickSize.horizontal,Z=y.tickValueObj.maxTickSize.vertical,Q=So.utils.getVal(ot([v.ticklabel,e.systemConf.chart,e.systemConf.canvas,dd],"fontSize")),q="wrapOnSpace"==y.tickValueObj.mode||"wrapAll"==y.tickValueObj.mode,K=f.component.isMultiLineTick(),$=ut(v.ticklabel.showAs),J=[null,k,e,N.rotation,v.ticklabel.textOverflow,f.scale,O,f.component,"ticklabel",v.ticklabel,c,!0],et=cr.apply(null,J),tt=function(t,a){var r=U(a),n=B(D,r,L,e,"axis",null,null,j);d3.select(this).text(n),K?(q&&(n=br(n,y.tickValueObj.mode,G,Z,Q)),ia(d3.select(this),n,{orient:k})):$&&ut(y.tickValueObj.customTicks[a])&&(this.innerHTML="",ia(d3.select(this),y.tickValueObj.customTicks[a],null,!0)),et(this,a)};f.component.tickFormat(F&&"auto"==F.specifier&&!f.scale.bandwidth?function(e){d3.select(this).text(f.scale.tickFormat()(e))}:tt),f.component.isMultiLineTick()||ut(m.showAs)?h.call(f.component,i,c):h.transition().duration(S).call(f.component,i,c);var at=!h.empty()&&h.style("display")===Al&&"y"===i;if(at&&b(h,f.component,v,u,"y","add"),Y&&0!=Y){at||x(k,Y);var rt="x"==i?"y":"x";e.updateScale(n,rt),e.drawPlotareaClippath(),e.updatePlotareaProp()}"y"===i?(h.styles({display:null,visibility:"visible"}),p(v,u,f.component,!0)):g(v,c,f.component);var nt=e.plotarea.width;e.axes.rotated||"y"!=i?null:O.selectAll(".y-axis-"+u).selectAll("line.majorTicks").attr("x2","right"!=k?nt:-nt),1==f.component.plotBorderDrawn&&o(k,v,h,f.component,i)}}else T&&b(h,f.component,v,u,"y","add");else T&&b(h,f.component,v,u,"y","remove")}},So.axis.get=function(){function e(a,n,i){return a.each(function(a){var o=Rl(this);g=a.label,h=a.ticklabel,f=a.tickmark,p=a.grid;var y=tr(v,n,i),k=y.ticks,P=k.tickValueObj;M=Od(M,0);var T=0>M?360-fl(M):M;T=T>360?fl(T)-360:T,d&&o.selectAll("g.axisgroup").selectAll("*").remove();var D=Qt(o,"g",[a],".","class","axisgroup");o.selectAll("g#ticklabelG").remove();var j;if(P&&P.inlineToPlot){o.selectAll("g.axisgroup").selectAll("*").remove(),j=Qt(o,"g",[1],"#","id","ticklabelG"),j.style("pointer-events","visible");var R=Qt(v.staticPaneSVG,"use",[1]);R.attr("xlink:href","#ticklabelG"),R.attr("x",o.attr("x")),R.attr("y",o.attr("y"))}if(c&&l.ticks(c[0],c[1]),v.isAxisCategory&&"clr"!==n){var I=dr(v,P,x,n,i);D.attr("clip-path","url("+v.defsLocation+"#"+I+")"),P.inlineToPlot&&j.attr("clip-path","url("+v.defsLocation+"#"+I+")")}w=v.axes.animationDuration;var H={tickValues:O,tickFormat:S,tickSizeInner:A,tickSizeOuter:E,gridSize:z,tickPadding:L,orient:x,rotation:T,scale:s,chart:v,axis:y};"clr"===n||ut(h.showAs)||C?(H.renderGrid=!0,H.renderTicklabel=!0,D.call(Za,H,a)):(H.renderGrid=!0,H.renderTicklabel=P.inlineToPlot?!1:!0,D.transition().duration(w).call(Za,H,a),P.inlineToPlot&&(H.renderGrid=!1,H.renderTicklabel=!0,j.transition().duration(w).call(Za,H,a)));var B=D.selectAll(".tick"),F=null==O?s.ticks?s.ticks.apply(s,[B.nodes().length]):s.domain():O,V=D.selectAll(".tick").data(F,s),N=V.select("line.majorTicks"),_=y.axisLabel,W=D.selectAll("text.ticklabel").data(F,s);k.isHierarchialLevelType()&&r(V,n,i);var Y=(gr(x,T,W,l,f.size),{data:b.map(function(e){return Cd(v.systemConf.metadata.columns[e],{columnindex:e},!0)})});if(ur(v,W,h,Y,n,i),k.isHierarchialLevelType()||"between"!=f.align||t(s,V,"minorTicks"),"clr"!==n){g.tooltip===!0&&aa(_.element),_.tickObj=P,_.transformLabel(m,u,x);var X="left"==x?270:"right"==x?90:0;cr(_.element,x,v,X,"ellipsis",s,D,e,"axislabel")}if(z&&p.show&&(s.bandwidth&&"between"==f.align&&t(s,V,"majorTicks"),"clr"!==n)){var U=s.range(),G=null==e.tickValues()?null:s(e.tickValues()[0])+(s.bandwidth?s.bandwidth()/2:0),Z=v.systemConf.chart.plot.border,Q=Z===!0?Z.color:a.axisline.color;ut(G)&&"transparent"!==p.color&&"transparent"!==Q&&U[0]===G&&Rl(N.nodes()[0]).style("stroke","transparent")}var q=a.baseline;if(null!=q){var K=Qt(D,"line",q.show===!0&&s.domain()[0]<=q.value&&q.value<s.domain()[1]?[1]:[],".","class","zeroBase");K.attrs({x1:"left"==x||"right"==x?0:s(q.value),y1:"left"==x||"right"==x?s(q.value):-u.height,x2:"left"==x||"right"==x?u.width:s(q.value),y2:"left"==x||"right"==x?s(q.value):0}).styles({fill:Al,stroke:q.color,"shape-rendering":"crispedges","stroke-width":q.strokeWidth})}}),e}function t(e,t,r){var n,l,s,c,d=t.nodes(),u=d3.select(t.node()),h=d3.select(d[d.length-1]),g=t.selectAll("line."+r+":not(#minorTicksAlign)"),y=h.selectAll("line."+r),v=Qt(u,"line",[1],"#","id",r+"Align"),m=a(e);if("minorTicks"==r?(s="bottom"==x||"top"==x?0:-f.size,c="bottom"==x?f.size:"top"==x?-f.size:0,i(f,v)):(n=z.x1,l=z.y1,s=z.x2,c=z.y2,o(p,v)),e.bandwidth)g.attr("transform","translate("+m.mid+")"),y.attr("transform","translate("+m.end+")"),v.attr("transform","translate("+m.start+")").attrs({x1:n,y1:l,x2:s,y2:c});else{var b=0;g.attr("transform",function(){var t=a(e,b++);return"translate("+t.mid+")"}),y.attr("transform","translate("+m.end+")"),v.attr("transform","translate("+m.start+")").attrs({x1:n,y1:l,x2:s,y2:c})}}function a(t,a){var r,n,i,o,l;if(t.bandwidth){var s=t.bandwidth(),c=(t.range(),t.ordinalRange),d=t.outerPaddingPx+s/2,u=t.domain().length>1?c[1]-c[0]-s:0;o=s/2+u/2,l=hl(d,o)}else{var h=v.dataObject.hierarchical?v.dataObject.hierarchical.leafCategories:e.tickValues(),f=So.scale.getContinuousRangeBand(t,h,a),s=f.rangeBand;o=s,l=f.outerPaddingInPixel}return"bottom"===x||"top"==x?(r=-(l-.5)+",0",n=o+.5+",0",i=l+.5+",0"):(r="0,"+-l,n="0,"+o,i="0,"+l),{start:r,mid:n,end:i}}function r(e,t,a){var r=tr(v,t,a),o=r.component,l=e.selectAll("line.minorTicks"),s=n(t,a);r.ticks.tickValueObj.tickMarkSize=s+o.tickSize();var c=a,d="left"==x||"right"==x?"x1":"y1",u="left"==x||"top"==x?s:-s,h="left"==x?"y1":"x1";if(c===v.dataObject.hierarchical.finalDepth){var g=("bottom"==x?f.size:0,e.nodes());e.selectAll("line#minorTicksAlign").remove();var p=d3.select(g[g.length-1]),y=Qt(p,"line",[1],"#","id","minorTicksAlign"),m=v.axes.x.levels[c-1].scale,b=m.domain().length,C="top"==x||"bottom"==x?m.discreteWidth(b-1)+",0":"0,"+m.discreteWidth(b-1),w="left"==x||"right"==x?"x2":"y2",k="left"==x||"top"==x?-f.size:f.size;y.attr("transform","translate("+C+")").attr(d,u).attr(w,k),i(f,y)}l.attr(h,null),l.attr(d,u)}function n(e,t){for(var a=0;t>0;){var r=tr(v,e,t-1),n=r.component;a+=n.tickLabelWidth(),t--}return a}function i(e,t){t.styles({fill:"none","shape-rendering":"crispedges","stroke-width":e.strokeWidth,stroke:e.color})}function o(e,t){var a=Od(e.strokeWidth,1),r=P(e.style,a),n=T(e.lineCap,p.style);t.styles({fill:"none","shape-rendering":"crispedges","stroke-width":a,stroke:p.color,"stroke-dasharray":r,"stroke-linecap":n})}var l,s,c,d,u,h,f,g,p,y,v,m,x,b,C,w,k=[],O=null,S=null,A=6,E=6,L=3,z=null,D=null,M=0;return e.axis=l,e.scale=function(t){return arguments.length?(s=t,l?l.scale(s):(l=Fl(x,s),l.scale(s)),e):s},e.systemconf=function(t){return arguments.length?(y=t,e):y},e.orient=function(t){return arguments.length?(ut(x)&&(x!=t?(d=!0,v.container.selectAll("g.plotareaBorder-property").selectAll("*").remove(),l=null):d=!1),x=t,e):x},e.tickArguments=function(t){return arguments.length?(k=null==t?[]:Array.prototype.slice.call(t),e):k.slice()},e.tickValues=function(t){return arguments.length?(O=null==t?null:Array.prototype.slice.call(t),e):O&&O.slice()},e.tickFormat=function(t){return arguments.length?(S=t,e):S},e.tickSize=function(t){return arguments.length?(A=E=+t,e):A},e.tickSizeInner=function(t){return arguments.length?(A=+t,e):A},e.tickSizeOuter=function(t){return arguments.length?(E=+t,e):E},e.tickPadding=function(t){return arguments.length?(L=+t,e):L},e.ticks=function(){return arguments.length?(c=arguments,e):c},e.majorTicks=function(t){return arguments.length?(z=t,e):z},e.plotarea=function(t){return arguments.length?(u=t,e):u},e.tickLabelWidth=function(t){return arguments.length?(D=t,e):D},e.tickRotation=function(t){return arguments.length?(M=t,e):M},e.preCalcTickLen=function(t){return arguments.length?(m=t,e):m},e.chartObj=function(t){return arguments.length?(v=t,e):v},e.columnIndices=function(t){return arguments.length?(b=t,e):b},e.isMultiLineTick=function(t){return arguments.length?(C=t,e):C},e};var Td=function(e){e=Od(e,{}),this.startWeekDay=ut(e.startWeekDay)?e.startWeekDay:1,this.startMonth=ut(e.startMonth)?e.startMonth:0};Td.MILLISEC=0,Td.SECOND=1,Td.MINUTE=2,Td.HOUR=3,Td.DATE=4,Td.MONTH=5,Td.SECOND_TYPE="ABSSECOND",Td.MINUTE_TYPE="ABSMINUTE",Td.HOUR_TYPE="ABSHOUR",Td.DAY_TYPE="ABSDAY",Td.DATETIME_TYPE="DATETIME",Td.DATE_TYPE="DATE",Td.ABSWEEK_TYPE="ABSWEEK",Td.ABSMONTH_TYPE="ABSMONTH",Td.ABSQUARTER_TYPE="ABSQUARTER",Td.ABSYEAR_TYPE="YEAR",Td.D3_WEEKDAY_FNS=[bs,Cs,ws,ks,Os,Ss,As],Td.DAY_MILLIS=864e5,Td.prototype.setZero=function(e,t){for(var a=0,r=0;t>=r;r++)switch(r){case Td.MILLISEC:a+=this.getMilliseconds(e),this.setMilliseconds(e,0);break;case Td.SECOND:a+=this.getSeconds(e),this.setSeconds(e,0);break;case Td.MINUTE:a+=this.getMinutes(e),this.setMinutes(e,0);break;case Td.HOUR:a+=this.getHours(e),this.setHours(e,0);break;case Td.DATE:a+=this.getDate(e)-1,this.setDate(e,1);break;case Td.MONTH:a+=this.getMonth(e),this.setMonth(e,this.startMonth);break;default:throw"unknown type 333: "+t}return a},Td.prototype.getBaseValue=function(e,t,a){switch(t){case Td.SECOND_TYPE:case Td.DATETIME_TYPE:var r=this.setZero(e,Td.MILLISEC);a&&r>0&&this.setSeconds(e,this.getSeconds(e)+1);break;case Td.MINUTE_TYPE:var r=this.setZero(e,Td.SECOND);a&&r>0&&this.setMinutes(e,this.getMinutes(e)+1);break;case Td.HOUR_TYPE:var r=this.setZero(e,Td.MINUTE);a&&r>0&&this.setHours(e,this.getHours(e)+1);break;case Td.DAY_TYPE:case Td.DATE_TYPE:var r=this.setZero(e,Td.HOUR);a&&r>0&&this.setDate(e,this.getDate(e)+1);break;case Td.ABSWEEK_TYPE:var r=this.setZero(e,Td.SECOND),n=this.startWeekDay;a?(r>0&&this.setDate(e,this.getDate(e)+1),n<this.getDay(e)?this.setDate(e,this.getDate(e)+(7-this.getDay(e)+n)):this.setDate(e,this.getDate(e)+(n-this.getDay(e)))):n>this.getDay(e)?this.setDate(e,this.getDate(e)-(7-n+this.getDay(e))):this.setDate(e,this.getDate(e)-(this.getDay(e)-n));break;case Td.ABSQUARTER_TYPE:case Td.ABSMONTH_TYPE:var r=this.setZero(e,Td.DATE);a&&r>0&&this.setMonth(e,this.getMonth(e)+1);break;case Td.ABSYEAR_TYPE:var r=this.setZero(e,Td.MONTH);a&&r>this.startMonth&&this.setFullYear(e,this.getFullYear(e)+1);break;default:throw"unknow type 222: "+t}},Td.prototype.getTicksList=function(e,t,a,r){for(var n=new Array,i=t.getTime(),o=e.getTime(),l=new Date(o);i>=o;){switch(n.push(l),l=new Date(o),r){case Td.SECOND_TYPE:case Td.DATETIME_TYPE:l.setTime(l.getTime()+1e3*cl(a));break;case Td.MINUTE_TYPE:l.setTime(l.getTime()+6e4*a);break;case Td.HOUR_TYPE:l.setTime(l.getTime()+36e5*a);break;case Td.DAY_TYPE:case Td.DATE_TYPE:l.setTime(l.getTime()+a*Td.DAY_MILLIS);break;case Td.ABSWEEK_TYPE:this.setDate(l,this.getDate(l)+a);break;case Td.ABSMONTH_TYPE:case Td.ABSQUARTER_TYPE:this.setMonth(l,this.getMonth(l)+a);break;case Td.ABSYEAR_TYPE:this.setFullYear(l,this.getFullYear(l)+a)}o=l.getTime()}return n},Td.prototype.range=function(e,t,a,r,n){function i(e,t){return null!=t&&t>=e?t:e}switch(e=new Date(e.getTime()),t=new Date(t.getTime()),this.getBaseValue(e,r,!1),this.getBaseValue(t,r,!0),r){case Td.SECOND_TYPE:case Td.DATETIME_TYPE:var o=1,l=dl((t.getTime()-e.getTime())/1e3),s=dl(l/a)||o;\nreturn s=i(s,n),{TYPE:Ps,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case Td.MINUTE_TYPE:var o=1,s=dl((t.getTime()-e.getTime())/(6e4*a))||o;return s=i(s,n),{TYPE:Ts,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case Td.HOUR_TYPE:var o=1,s=dl((t.getTime()-e.getTime())/(36e5*a))||o;return s=i(s,n),{TYPE:Ts,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case Td.DAY_TYPE:case Td.DATE_TYPE:var o=1,s=dl((t.getTime()-e.getTime())/(a*Td.DAY_MILLIS))||o;return s=i(s,n),{TYPE:Es,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case Td.ABSWEEK_TYPE:var o=1,c=dl((t.getTime()-e.getTime())/(a*Td.DAY_MILLIS*7));c=i(c,n);var s=7*dl(c)||o;return{TYPE:Ls,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case Td.ABSMONTH_TYPE:var o=1,s=dl(this.getMonthsDiff(e,t)/a)||o;return s=i(s,n),{TYPE:zs,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case Td.ABSQUARTER_TYPE:var o=1,d=this.getMonthsDiff(e,t)/a||o,u=dl(d/3);u=i(u,n);var s=3*u;return{TYPE:zs,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case Td.ABSYEAR_TYPE:var o=1,s=dl((t.getFullYear()-e.getFullYear())/a)||o;return s=i(s,n),{TYPE:Ds,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};default:throw"UNKNOWN TYPE 111: "+r}},Td.MAX_DATE=new Date(2008,8,29,23,23,23,999),Td.prototype.getMaxDate=function(e,t){return gn(e,Td.MAX_DATE,_s,null,"axis",null,null,t)},Td.prototype.getMonthsDiff=function(e,t){return 12*(this.getFullYear(t)-this.getFullYear(e))+(this.getMonth(t)-this.getMonth(e))},Td.prototype.getYearsDiff=function(e,t){return 12*(this.getFullYear(t)-this.getFullYear(e))+(this.getMonth(t)-this.getMonth(e))},Td.prototype.getFullYear=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCFullYear():e.getFullYear()},Td.prototype.getMonth=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMonth():e.getMonth()},Td.prototype.getDay=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCDay():e.getDay()},Td.prototype.getDate=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCDate():e.getDate()},Td.prototype.getHours=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCHours():e.getHours()},Td.prototype.getMinutes=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMinutes():e.getMinutes()},Td.prototype.getSeconds=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCSeconds():e.getSeconds()},Td.prototype.getMilliseconds=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMilliseconds():e.getMilliseconds()},Td.prototype.setFullYear=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCFullYear(t):e.setFullYear(t)},Td.prototype.setMonth=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMonth(t):e.setMonth(t)},Td.prototype.setDate=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCDate(t):e.setDate(t)},Td.prototype.setHours=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCHours(t):e.setHours(t)},Td.prototype.setMinutes=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMinutes(t):e.setMinutes(t)},Td.prototype.setSeconds=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCSeconds(t):e.setSeconds(t)},Td.prototype.setMilliseconds=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMilliseconds(t):e.setMilliseconds(t)},function(e){"use strict";function t(e){var t=e.alignMode,a=e.alignMode&&-1!=e.alignMode.indexOf("rotate"),r=ut(e.rotation),n=0;if(a){var i=/\\(([^)]+)\\)/.exec(t);n=i?parseInt(i[1]):"auto"}else r&&!ut(e.alignMode)?(n="auto"==e.rotation?e.rotation:parseInt(e.rotation),t="rotate",a=!0):ut(e.alignMode)||(t="rotate(0)",a=!0);return{alignmentMode:t,isRotateMode:a,rotation:n}}function r(e,t,a,r){var n=e.length;t=sl(t),a=a||dl(n/fl(t));for(var i=0,o=[],l=r?[]:null,s=r?[]:null,c=r?ut(e[0].index):!1;n>i;)r?c?(o.push(e[i].value),l.push(e[i].index),s.push(e[i])):(o.push(e[i]),l.push(i)):o.push(e[i]),i+=a;return r?{nodes:s,ticks:o,indices:l}:o}function n(e,t,r,n,i,o){var l=[],s=[],c=[],d={data:[r]};return r.columnindex=Od(r.columnindex,i),e.forEach(function(e,r){var i=it(t.showAs,e,t,d,n,r,o),u=[],h=[];if(a(i)?(l.push(u),s.push(h)):(u=l,h=s),c.push(i),ut(i)){var f=document.createElement("div");f.innerHTML=i;var g=nt(f.querySelectorAll("tspan")),p=f.querySelectorAll("image,img");g.length?g.forEach(function(e){u.push(e.textContent.trim()),h.push({fontSize:e.style.fontSize&&parseFloat(e.style.fontSize),fontFamily:e.style.fontFamily,fontStyle:e.style.fontStyle,fontWeight:e.style.fontWeight})}):u.push(f.textContent),p.length&&nt(f.querySelectorAll("image,img")).forEach(function(e){u.push({width:+e.getAttribute("width"),height:+e.getAttribute("height")}),h.push({})})}}),{tickValues:l,styles:s,userRawTicks:c}}function i(e,t,a,r,n,i,o){il.save(),il.font=a+"px "+r;var l,s,c,d=0,u=null,h=null;n=Od(n,[]),ut(t)||(t=[]);var f=function(e,f){var g=xr(e,a,r,n[f]),p=g.width;i&&(p=g.width*g.height),o&&!s&&(s=-1!=e.indexOf(" ")),p>d&&(d=p,u=e,h=t[f],l=n[f],c=f)};return e.forEach(f),il.restore(),{actualVal:h,formattedVal:u,style:l,index:c,hasWhiteSpace:s}}function o(e,t,a){return"rotate("+e+" "+(t||0)+" "+(a||0)+")"}function l(e,t,a,r,n,i){var o=0;return o="height"===e?Math.abs(n+a.top+a.bottom):r>0?d(r,t.width,n,i).tickSpacing+a.left+a.right:t.width+a.left+a.right}function s(e,t,a,r,n,i){var o=Od(a.size,6),l=$a(e,t,i),s="left"===e||"right"===e?"x":"y",c="left"===e||"right"===e?"y":"x",d="top"===e||"left"===e?-1:1,d=n?-d:d,u={};return u[c]=0,u[s]=d*(l+o),u}function c(){var e={};return e.x=e.y=e.width=e.height=0,e}function d(e,t,a,r){var n=e*(2*kl/360),i=(90-e)*(2*kl/360);if("bottom"===r||"top"===r)return{tickSpacing:fl(a/vl(n))+5,baseLen:0};var o=fl(vl(i)*a),l=fl(yl(i)*a*xl(n));return{tickSpacing:o+l+5,baseLen:fl(yl(i)*t)}}function u(e,t,a,r,n,i){var o=a.dataObject,l=t.minmaxlabels||{};if(l.show===!0){var s=So.scale.getScale(a,o,a.plotarea,i,n,a.dataset,r),c=s.domain();lt(l.excludeIntervals,!0)?e=c:(c[0]!==e[0]&&e.splice(0,0,c[0]),c[1]!==e[e.length-1]&&e.push(c[1]))}return e}function h(e,t,a,r){var n=[1,2,5,10],i=n.length,o=e+t/2;o=+o.toFixed(12);for(var l,s,c=0;i>c;c++){var d,u=a/n[c];d=e%u?e-e%u+u:e;var h=fl(o-d);(l>h||null==l)&&(l=h,s=d)}if(null==s||e>s){var f=cl(ml(r)/Cl);0>f&&(s=+e.toFixed(fl(hl(0,f)))),s=e}return s=s>e?s:e}function f(e,t){for(var a,r,n=null,i=t,o=[1,1.2,1.5,1.75,2,2.2,2.5,3,3.5,4,4.5,5,6,7,8,9,10],l=0;l<o.length;l++)r=o[l]*t,a=fl(e-r),n=null==n?a:n,n>a&&e>=r&&(n=a,i=r);return i}function g(e,t){var a=y(e);return ut(t)&&(a=ul(t,a)),dl(e[0]/a)*a}function p(e){return dl(y(e))}function y(e,t){var a=ut(t)?t:10,r=e[1]-e[0],n=gl(10,cl(ml(r/a)/Cl)),i=a/r*n;return.15>=i?n*=10:.35>=i?n*=5:.75>=i&&(n*=2),n}var v=e.axis,m=function(e,t,a,r){this.axis=e,this.config=e.label,this.axisRect=t.bound,this.parentNode=r.isD3Selection?r:d3.select(r),this.orient=a,this.systemConfig=t.systemConf,this.order=t.axisOrder,this.plotRect=t.plotRect,this.show=!t.hide,this.tickObj=t.tickObj,this.show?this.add():this.element=Qt(this.parentNode,"text",[],".","class","axislabel")};m.prototype={add:function(){var e=this;e.element=Qt(e.parentNode,"text",[1],".","class","axislabel"),e.text=e.config.text,e.element.text(e.text),e.rect=null,e.transformLabel()},remove:function(){var e=this;e.rect=null,e.element=Qt(e.parentNode,"text",[],".","class","axislabel")},setStyles:function(){var e=this,t=e.systemConfig;ta(e.element,[e.config,t.chart,t.canvas,dd])},getBBox:function(){var e=this;if(!ut(e.rect)){if(!e.element.isD3Selection||e.element.empty())return c();e.rect=e.element.node().getBBox()}return e.rect},transformLabel:function(e,t,a){function r(e,t,a,r,i){r=Od(r,0),i=Od(i,0),n.element.attrs({x:t,y:a,transform:o(e,r,i),"text-anchor":d})}var n=this;if(n.show!==!0)return n.remove();if(n.element.empty()&&n.show===!0||n.text!==n.config.text)return n.add();n.setStyles();var i,l,s={top:0,right:90,bottom:0,left:270},c=n.systemConfig,d="middle",u=Od(a,n.orient),h=s[u],f=Od(e,this.axisRect),g=Od(t,this.plotRect),p=n.axis.ticklabel,y=n.config,v=Ka(p),m=Ka(y),x=parseFloat(So.utils.getVal(ot([n.config,c.chart,c.canvas,dd],"fontSize")));n.fontSize!==x?n.rect=null:n.fontSize=x,n.element.attr("dy","-0.25em");var b=this.tickObj.isInline,C=this.tickObj.inlineToPlot,w=b&&!C,k=w?0:v[u];switch(u){case"top":var O=C?0:f.height+k;i=g.width/2,l=O+m.bottom,r(h,i,-l);break;case"right":var O=C?0:f.width+k;i=g.height/2,l=O+m.left,r(h,i,-l);break;case"bottom":var O=C?0:f.height+k;i=g.width/2,l=O+m.top,n.element.attr("dy","0.91em"),r(h,i,l);break;case"left":var O=C?0:f.width+k;i=O+m.right,l=g.height/2,r(h,-i,l,-i,l)}}};var x=function(e,t,a,r,n){this.type=e,this.config=t.ticklabel,this.axis=t,this.plotRect=a,this.helpers=r,this.tickCount=n,this.maxSize=function(){return pr(this.config,this.plotRect)},this.cache={}};x.prototype={getScale:function(){var e=this,t=e.helpers.chart,a=e.helpers;return So.scale.getScale(t,t.dataObject,e.plotRect,a.orient,a.axisOrder,t.dataset,e.type,e.extent)},getTicks:function(e,o,c){function v(e,t){var a=F.chart.axes.yaxis[0].reversed;return"x"==e&&("bottom"==t&&!a||"left"==t&&!a||"top"==t&&a||"right"==t&&a)?!0:void 0}function m(e){if("auto"==mt){var t=b(ua,0);if(t.maxTickCount<e){var a=$==Ns?C(ua):b(ua,45,!0);if(a.maxTickCount<e){var r=b(ua,45,!0);return r.maxTickCount<e&&M.hasWhiteSpace?w(ua):r}return a}return t}return xt?b(ua):"zigzag"==mt?C(ua):"wrapOnSpace"==mt?w():"wrapAll"==mt?k():void 0}function x(e,t,a){var r,n,i,o,l=0,s=Ar(H.chart,Ct,I.plotRect);if("x"===a&&(l=s*Pt*2),r=s-l,i=!!e,o=t||ua,i){if("height"===Ct&&(90===e||270===e))return r/(o.width+fl(dt.top)+fl(dt.bottom));var c=e%90,u="height"===Ct?c>0:c>0||90===e||270===e;if(u){var h=d(e,o.width,o.height,H.orient);return r/(h.tickSpacing+fl(dt.left)+fl(dt.right))}}return n="height"===Ct?o.height+fl(dt.top)+fl(dt.bottom):o.width+fl(dt.left)+fl(dt.right),r/n}function b(e,t,a){var r,n=ut(t)?t:Ot;return"auto"===n?(Ot=0,r=x(Ot,e,W),!da&&G>r?"width"===Ct?(Ot=H.chart.axes.x.count>1&&"x"==W&&0==q?90:45,r=x(Ot,e,null),a=!0):a=!0:a=!1):(r=x(n,e,W),Ot=n),{mode:"rotate",rotation:Ot,maxTickCount:r,recalculate:a}}function C(e){var t=x(0,e,W);return{mode:"zigzag",rotation:0,maxTickCount:2*t}}function w(){if("auto"==mt){z=z.map(function(e){return e.split(" ")});var e=i(z,Q,pt,yt,Dt.styles);ut(Et)||(Et=e.formattedVal);var t=xr(Et,pt,yt,e.style,!0)}var a=x(Ot,t,W);return{mode:"wrapOnSpace",maxTickCount:a,rotation:Ot}}function k(){var e=x(Ot,ua,W);return{mode:"wrapAll",maxTickCount:e,rotation:Ot}}var O,S,A,P,T,E,L,z,D,M,j,R,I=this,H=Od(c,I.helpers),B=H.chart,F=B.systemConf,V=B.dataObject,N=I.plotRect=Od(e,I.plotRect),_=I.axis,W=I.type,Y=_.interval,X=_.tickCount,U=_.interval,G=Od(o,0),Z=c.extent,Q=Z,q=H.axisOrder,K=H.axisRotated,$=B.dataset.getDataType(W,q),J=B.systemConf.metadata,et=B.dataset.getColumnIdx(W,q),tt=J.columns[et],at=J.columns[et].datatype,nt="y"==W?J.axes.y[q].length>1:!1,it=J.columns[et],lt=Od(nt&&"y"==W?Qa(q,B):it[at],{}),st=lt.subfunction,ct="y"===W&&(B.dataObject.isStackedPercentChart||B.dataObject.isPercentChart)?xn:gn,dt=Ka(I.config),ht=rr(I.axis,W,B),ft=ht?v(W,H.orient):!1,gt=s(H.orient,dt,I.axis.tickmark,I.axis.ticklabel,ft,ht),pt=parseFloat(So.utils.getVal(ot([I.config,F.chart,F.canvas,dd],"fontSize"))),yt=So.utils.getVal(ot([I.config,F.chart,F.canvas,dd],"fontFamily")),vt=t(I.config),mt=vt.alignmentMode,xt=vt.isRotateMode,bt=vt.rotation,Ct=Ja(W,K)?"height":"width",wt=ar(B,this.type,q,bt),kt=B.axes.x.count>1&&"x"==W&&q>0,Ot=kt?0:bt,At=B.chartTypes[0].name,Pt=B.systemConf.chart.plot.plotoptions[At].outerPadding||0,Tt=B.systemConf.chart.plot.plotoptions[At].padding||.2,Et=null,Lt=Ar(H.chart,Ct,N),zt="x"===W?Lt*Pt*2:0,Dt={},Mt=c.maxTickSize||this.maxSize(),jt=a(lt.groupby)&&lt.groupby.length>0||"AUTO"===lt.groupby&&"YEAR"!==st,Rt=jt?q:null;switch(jt&&"AUTO"===lt.groupby&&(lt.AUTO_GROUP_ORDER=So.HierarchicalTimeDataAdapter.getAutoGroupOrder(st).reverse()),wt||(0>Ot?Ot=360-fl(Ot):Ot>360&&(Ot=fl(Ot)%360)),$){case"numeric":S=ut(Z)?Z:"x"===W?V.getMinMaxX():V.getMinMaxY(H.axisOrder,ol,B.datalabels.hasFixedPosition);var It;if("y"===W&&B.datalabels.hasFixedPosition){var Ht=V.rangeCorrections.datalabels,Bt=W+H.axisOrder;rt(Ht[Bt])&&(Ht[Bt]=gu(W,V.groupedDataBySplitAxes[H.axisOrder],B)),It=Ht[Bt]}else It=0;"height"===Ct?(D=N.height-It,G=G||sl(D/40),O=[D,0]):(D=N.width-It,G=G||sl(D/100),O=[0,D]),ut(X)&&(U=(S[1]-S[0])/X);var Ft,Vt,Nt,_t,Wt;if(Wt=ut(Y)&&(S[1]-S[0])/Y<D,A=Yl().domain(S).range(O),Wt){if(Ft=cl((S[1]-S[0])/U)){if(Vt=y(S,Ft),Nt=dl(S[0]/Vt)*Vt,Nt-S[0]>U){var Yt=gl(10,cl(ml(U)/Cl)),Xt=cl((Nt-S[0])/Yt);Nt-=Xt*Yt}}else{var Ut=S[1]-S[0],Yt=gl(10,cl(ml(Ut)/Cl));Nt=S[0]-S[0]%Yt+Yt}Q=xs(Nt,S[1],U)}else if(+X>0)if(1===X)Vt=y(S,1),Nt=Math.ceil(S[0]/Vt)*Vt,Q=[Nt];else{var Nt,_t,Gt,Zt=X-1,Ut=S[1]-S[0],Vt=Ut/Zt,Qt=cl(ml(Vt)/Cl),qt=gl(10,Qt);qt*=Math.floor(Vt/qt),qt=+qt.toFixed(12);var Kt=f(U,qt,Zt);Nt=S[0],_t=S[1],Gt=Ut-Kt*Zt;var $t=gl(10,cl(ml(Gt)/Cl)+1);Nt=h(Nt,Gt,$t,Kt),Nt=+Nt.toFixed(12),_t=Nt+Kt*X,_t=+_t.toFixed(12),_t=_t>S[1]?+S[1]:_t,Q=xs(Nt,_t,Kt)}else Q="integer"===st?xs(g(S,1),S[1],p(S)):A.ticks(G);Q=u(Q,I.config,B,W,H.axisOrder,H.orient),G=Q.length;break;case"ordinalNonLinear":case"ordinal":var Jt,ea=pt,ta=V.hierarchical;if(T=ut(ta)&&ta.categoryTree&&"x"==W&&0==q||V.isWaterfallEnabled,L=T&&("auto"==H.chart.systemConf.chart.width||"auto"==H.chart.systemConf.chart.height),ut(Q)||(Q=V.getCategories(W,H.axisOrder).slice(0)),T&&ut(ta)&&(Q=V.hierarchical.leafNodes),at===_s&&!ut(st)){var aa=En(Q[Q.length-1]-Q[0]);st=lt.subfunction=aa.subFunction}G=Q.length,j={},j.width=j.height=pt,R=l(Ct,j,dt,Ot,pt,H.orient),Jt=sl((Lt-zt)/R),G>Jt&&"width"===Ct&&(Ot||I.config.rotation>0)&&(R=d(45,pt,ea,H.orient).tickSpacing+dt.left+dt.right),"x"==W&&q>0||L||(G>X?Q=r(Q,X,null,T):ut(U)?Q=r(Q,G,U,T):G>Jt&&(Q=r(Q,Jt,null,T))),T&&(P=Q.nodes||Q,E=Q.indices,Q=Q.ticks||V.getCategories(W,H.axisOrder).slice(0)),G=Q.length;break;case"time":var ra=yr(lt);if(!ra){var na,ia,oa;if(S=ut(Z)?Z:"x"===W?V.getMinMaxX(0):V.getMinMaxY(H.axisOrder,0),na=new Date(S[0]),ia=new Date(S[1]),ut(it[at])||(it[at]=lt),!ut(st)||"AUTO"===st){var aa=En(ia-na);st=lt.subfunction=aa.subFunction}oa=new Td(lt),oa.useUTC=lt.useUTC===!0,Et=oa.getMaxDate(lt,Rt),Et=br(Et,mt,Mt.horizontal,Mt.vertical,pt),j=xr(Et,pt,yt),R=l(Ct,j,dt,Ot,pt,H.orient),G=(Lt-zt)/R;var la=oa.range(na,ia,dl(G),st,U,B);Q=u(la.TICKS,I.config,B,W,H.axisOrder,H.orient),G=la.TICKS.length;break}var sa=So.scale.getScale(B,V,N,H.orient,H.axisOrder,B.dataset,W,null);Q=sa.ticks(),z=Q.map(function(e){return sa.tickFormat()(e)}),G=Q.length}if("ordinalNonLinear"===$){var z=ra?z:St(Q,ct,lt,B,at,"axis",Rt,mt,Mt,pt);ut(I.config.showAs)&&(Dt=n(Q,I.config,tt,B,et,q),z=Dt.tickValues,Dt.length=z.length);var M=i(z,Q,pt,yt,Dt.styles);return{rawTickValues:Q,formatterTickValues:z,longestTickValue:M,scale:I.getScale(),longestTickDimension:xr(M.formattedVal,pt,yt),margin:dt,tickMargin:gt,rotation:Ot,customTickInfo:Dt,mode:mt,isInline:ht,inlineToPlot:ft,maxTickSize:Mt}}A=I.getScale();var ca=A.actualRange,da=ca&&ca[0]===ca[1];da&&(Q=[A.invert(ca[0])]),z=ra?z:St(Q,ct,lt,B,at,"axis",Rt,mt,Mt,pt),ut(I.config.showAs)&&(Dt=n(Q,I.config,tt,B,et,q),z=Dt.tickValues,Dt.length=z.length),M=i(z,Q,pt,yt,Dt.styles),ut(Et)||(Et=M.formattedVal);var ua=xr(Et,pt,yt,M.style,!0),ha=pr(I.config,B.chartarea);ua.width=hl(ua.width,ha.horizontal),ua.height=hl(ua.height,ha.vertical),L&&I.recalculatePlotSize(H.chart,Lt,ua,Ct,G,dt,Tt,Pt);var fa=m(G),ga=fa.mode,pa=fa.maxTickCount;if(Ot=fa.rotation,!da&&(G>pa||fa.recalculate))if($===_s)if(ra){var sa=So.scale.getScale(B,V,N,H.orient,H.axisOrder,B.dataset,W,null);Q=sa.ticks(pa),G>pa&&(Ot=45),z=Q.map(function(e){return sa.tickFormat()(e)}),M=i(z,Q,pt,yt,Dt.styles)}else la=oa.range(na,ia,pa,st,U,B),Q=u(la.TICKS,I.config,B,W,H.axisOrder,H.orient),z=St(Q,ct,lt,B,at,"axis",Rt,mt,Mt,pt);else G>pa&&(T?(Q=r(P||Q,pa,null,T),E=Q.indices,Q=Q.ticks):(Q=r(Q,pa),I.config.showAs&&(Dt.styles=r(Dt.styles,pa),Dt.userRawTicks=r(Dt.userRawTicks,pa))),z=r(z,pa),M=i(z,Q,pt,yt,Dt.styles));at===_s&&jt&&(jt&&!ut(V.hierarchical)?V.hierarchical=new So.HierarchicalTimeDataAdapter(B,Q,lt.groupby,$!==_s,tt):jt&&V.hierarchical.update(Q)),(ut(Dt.styles)||lt&&lt.format&&lt.format.breakSpace)&&(M=i(z,Q,pt,yt,Dt.styles,!0));var ya=xr(Et,pt,yt,M.style);return{rawTickValues:Q,formatterTickValues:z,longestTickValue:M,scale:A,longestTickDimension:ya,margin:dt,tickMargin:gt,rotation:Ot,mode:ga,isInline:ht,inlineToPlot:ft,tickValueIndices:E,customTickInfo:Dt,maxTickSize:Mt}},recalculatePlotSize:function(e,t,a,r,n,i,o,l){var s,c,d;"height"===r?(s=a[r]+i.top+i.bottom,c=s*n,t=[c,0]):(s=a[r]+i.left+i.right,c=s*n,t=[0,c]),d=lr(t,n,o,l,s),c+=d,e.systemConf.chart[r]=c}},v.Ticks=x,v.AxisLabel=m}(So),So.axis.Ticks.prototype.ticklabelFitModels=function(e,t){var a={},r=e.length;return a.zigzag={},a.rotate={},a.type=r>t?t>2*r?"zigzag":"rotate":"default",a},So.axis.ticks=function(e,t,a,r,n,i){"use strict";function o(){return l()&&r>0}function l(){return"x"==a&&e.axes.x.count>1}function s(a,i,o,l,s,d,h,g){var p,y=i,v=m===_s&&yr(B),x=s.formatterTickValues;f=s.rawTickValues;var b,w,k=s.longestTickValue,P=s.maxTickSize,T=s.tickValueIndices,E=s.scale;ut(s.customTickInfo)&&s.customTickInfo.length&&(b=s.customTickInfo.styles,w=s.customTickInfo.userRawTicks);var L=At(x),z=function(e,t){var a,r;return ut(b)&&(a=b[t]),r=xr(e,O,S,a),h?r.width*r.height:"left"==n||"right"==n?r.width:r.width*r.height};if(!d){o.append("line").attr("class","domain").attrs({x1:0,y1:0,x2:"bottom"==n||"top"==n?a.width:1e-4,y2:"bottom"==n||"top"==n?1e-4:a.height}).style("stroke","black");var D=C.textOverflow==Al?"":C.textOverflow,M=!1,j=-1,R=k.actualVal,I=k.formattedVal;h&&(I=c(s.longestTickValue,null,s)),ia(i,I,null,h),u(i,g,s);var H=(E(R)||0)+(null==E.bandwidth?0:E.bandwidth()/2);H="bottom"==n||"top"==n?H+",0":"0,"+H,l.attr("transform","translate("+H+")"),cr(i,n,{svg:e.svg,canvasarea:e.canvasarea,plotarea:a,chartarea:e.chartarea,legendarea:e.legendarea,actChartObj:e},A,D,E,o,null,"ticklabel",C,r);var F,V,N;for(V=F=h?I:la(i);"ordinalNonLinear"!=m&&!M&&j<f.length;){j+=1;var H=(E(R)||0)+(null==E.bandwidth?0:E.bandwidth()/2);H="bottom"==n||"top"==n?H+",0":"0,"+H,l.attr("transform","translate("+H+")"),cr(i,n,{svg:e.svg,canvasarea:e.canvasarea,plotarea:a,chartarea:e.chartarea,legendarea:e.legendarea,actChartObj:e},A,D,E,o,null,"ticklabel",C,r),F=la(i),z(F,j)>z(V,j)&&(I=F,h&&(I=c(null,j,s)),V=I),ia(i,V,null,h);var _=!f.length||j===f.length-1||1===f.length;N=_?null:v?L[j]:L[j]||"";var W=_?!1:z(F,j)<z(N,j);W?(R=L[j],F=N,I=N,h&&(I=c(null,j,s)),ia(i,I,null,h)):M=!0}}var Y=y.node().getBoundingClientRect(),X=o.node().getBoundingClientRect();return p={ticks:f,rotation:A,longTickSize:Y,longtick:k,axisgroup:X,customTicks:w,mode:s.mode,isInline:s.isInline,inlineToPlot:s.inlineToPlot,maxTickSize:P,showGrid:t.grid.show&&"transparent"!=t.grid.color},T&&(p.tickValueIndices=T),p}function c(e,t,a){return a.customTickInfo.userRawTicks[ut(t)?t:e.index]}function d(e,t,a,r,n,i){var o=Qt(e,"text",[1],".","class","dummyText");return o.attrs({x:a.x||0,y:a.y||0,dy:a.dy||0}).attr("transform","rotate("+r+" "+a.x+" "+a.y+")"),n?t=c(i.longestTickValue,null,i):o.text(t),ia(o,t,null,n),ta(o,[C,p.chart,p.canvas,dd]),o}function u(e,t,a){e.attrs({dy:"zigzag"==a.mode?t.dy1||t.dy:t.dy,transform:"rotate("+t.rotate[0]+" "+t.rotate[1]+" "+t.rotate[2]+")"}).styles({"text-anchor":t.textAnchor})}var h={};So.axis.ticks.maxTickSizeRatio_Vert="50%",So.axis.ticks.maxTickSizeRatio_Hori="50%";var f,g=e.dataObject,p=e.systemConf,y=e.svg,v=e.canvasarea["bottom"==n||"top"==n?"height":"width"];h.isHierarchy=l,h.isHierarchialLevelType=o;var n,m=e.dataset.getDataType(a,r),x=g.getAxisRotated(),b=t.label||{},C=t.ticklabel||{},w=t.tickmark,k={},O=parseFloat(So.utils.getVal(ot([C,p.chart,p.canvas,dd],"fontSize"))),S=So.utils.getVal(ot([C,p.chart,p.canvas,dd],"fontFamily")),A=null!=C&&null!=C.rotation&&"auto"!=C.rotation?C.rotation:0;l()&&(A=0),A=null==A||""==A?0:parseFloat(A),A=0>A?360-fl(A):A,A=A>360?fl(A)%360:A;var P,T,E,L,z=b.show===!1||!ut(b.text)||""===b.text||!ma(e,a+"axislabel",v)||l()&&r<e.axes.x.count-1;z?P=T=E=L=0:(L=Od(b.marginTop,5),E=Od(b.marginBottom,5),T=Od(b.marginLeft,5),P=Od(b.marginRight,5));var D=Ka(C),M=e.systemConf.metadata,j=e.dataset.getColumnIdx(a,r),R=M.columns[j].datatype,I=M.columns[j][R],H="y"==a?M.axes.y[r].length>1:!1,B=I;B=H&&"y"==a?Qa(r,e):I,this.preCalcAxisLen=0;var F=Od(w.size,6);return h.preCalcApproxAxisLength=function(i){var o="x"==a&&0==r&&e.brush?e.brush.extent:null,l=tr(e,a,r),s={axisRotated:x,axisOrder:r,chart:e,orient:n};l.Ticks||(l.Ticks=new So.axis.Ticks(a,t,i,s)),this.tickValueObj=h.getTickValues(i.width,i.height,o,!0,null,l.Ticks,i);var c="x"==a?a+"-axis-"+r:a+"-axis-"+r,d=e.svg.selectAll("g."+a+"-axis"),u=Qt(d,"g",[t],".","class",c),f=Qt(u,"g",[t],".","class","axisgroup");f.selectAll("line.majorTicks").style("display","");var g=this.tickValueObj.axisgroup,y=g.width,v=g.height,m=C.maxWidth,b=C.maxHeight;"left"!==n&&"right"!==n||!ut(C.width)?ut(C.height)&&(v=ka(Ed(C.height,b)||So.axis.ticks.maxTickSizeRatio_Vert,i.height)):y=ka(Ed(C.width,m)||So.axis.ticks.maxTickSizeRatio_Hori,i.width),g=this.preCalcTickLen={x:g.left,y:g.top,width:y,height:v};var w="x"===a&&!x,O=!w,S={systemConf:p,bound:g,horizontal:w,vertical:O,axisOrder:r,plotRect:i,hide:z,tickObj:this.tickValueObj},A=0;if(l.axisLabel?(l.axisLabel.show=!z,l.axisLabel.transformLabel(g,i,n)):l.axisLabel=new So.axis.AxisLabel(t,S,n,u),z)this.preCalcAxisLen="bottom"===n||"top"==n?g.height+D.bottom:g.width+D.left;else switch(A=l.axisLabel.getBBox().height,k.textAnchor="middle",n){case"left":var M=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?g.width:g.width+D.left;this.preCalcAxisLen=M+P+A+T;break;case"right":var M=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?g.width:g.width+D.right;this.preCalcAxisLen=M+T+A+P;break;case"bottom":var j=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?g.height:g.height+D.bottom;this.preCalcAxisLen=j+E+A+L;break;case"top":var j=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?g.height:g.height+D.top;this.preCalcAxisLen=j+L+A+E}return this.preCalcAxisLen},h.getTickValues=function(o,l,c,u,h,f,g){var p={},v={axisRotated:x,axisOrder:r,chart:e,orient:n,extent:c,maxTickSize:this.tickValueObj?this.tickValueObj.maxTickSize:null},b=f.getTicks(i,h,v),w=ut(C.showAs);A=isNaN(b.rotation)?A:b.rotation;var k=b.tickMargin,O=$a(n,D,rr(t,a,e)),S=gr(n,A,null,null,F,O,this.tickValueObj),P="left"===n||"right"===n?"x":"y",T="left"===n||"right"===n?1:2;k[P]+=this.tickValueObj&&this.tickValueObj.isInline&&!this.tickValueObj.inlineToPlot?S.rotate[T]:0,k.dy=S.dy,S.rotate[T]=k[P],m=e.dataset.getDataType(a,r);var E=Od(g,i),L=y.append("g").attr("class","dummy"),z="right"===n?E.left+E.width:E.left,M="bottom"===n?E.top+E.height:E.top;L.attr("transform","translate("+z+","+M+")");var j=L.append("g").attr("class","tick"),R=d(j,b.longestTickValue.formattedVal,k,A,w,b);return R.call(function(e){p=s(E,e,L,j,b,ut(h),w,S)}),L.remove(),p},h.getActualTicklabel=function(){var t,a=this.tickValueObj,r=a.ticks;return t=this.isHierarchy()&&!this.isHierarchialLevelType()&&a.tickValueIndices?function(e){var t=a.tickValueIndices.indexOf(e);return-1!=t?r[t]:null}:e.dataObject.isWaterfallEnabled&&a.tickValueIndices?function(e){return r[e]}:function(e){return r[e]}},h.getTicksforAxisComp=function(){var t=e.dataset.getDataType(a,r);return l(e,a)&&e.dataObject.hierarchical.categoryTree&&(t==Ns||"ordinalNonLinear"==t)||o()&&e.dataObject.hierarchical.groupByTime?null:e.dataObject.isWaterfallEnabled&&"x"==a?this.tickValueObj.tickValueIndices||null:this.tickValueObj.ticks},h},So.axis.constructTickObj=function(e,t,a,r,n,i){var o,l,s=e.systemConf;o="left"==r&&e.axes.rotated||"bottom"==r&&!e.axes.rotated?"x":"y";for(var c=e.axes[o].count,d=0;c>d;d++){var u=s.chart.axes.yaxis;if(d>0&&"y"==o){l=i?u[d]:Cd(u[d],u[0],!1);var h=null!=u[d]&&""!==u[d]?u[d]:{};l.interval=h.interval,l.tickCount=h.tickCount,l.minRange=h.minRange,l.maxRange=h.maxRange,l.categories=h.categories,u[d]=l}l="x"==o?s.chart.axes.xaxis:u[d],r=l.orient||("x"==o?e.axes.rotated?"left":"bottom":e.axes.rotated?"bottom":0==d?"left":"right");var f="bottom"==r||"top"==r?a:t,g=l.show===!0&&ma(e,o+"axis",f);if(g){var p=tr(e,o,d);"y"!=o||p||(p={}),"x"!=o||p||(p=d>0?{}:p);var y=So.axis.ticks(e,l,o,d,r,n);p.ticks=y;var v=y.preCalcApproxAxisLength(n);if("y"!==o||!e.axes.y.groups[d].disabled){var m=e.plotarea;"left"==r?(n.left+=v,n.width=n.width-v,m.left=n.left,m.width=n.width):"right"==r?(n.width=n.width-v,m.width=n.width):"bottom"==r?(m.height=m.height-v,m.bottom+=v,n.height=m.height,n.bottom+=m.bottom):"top"==r&&(m.height=m.height-v,m.top+=v,n.height=m.height,n.top+=m.top)}}else{var x="y"===o?e.axes.y.groups[d]:e.axes.x;x.axisLabel=x.Ticks=null}}"y"==o&&at(s.chart,"scroll")&&s.chart.scroll.enabled&&(e.svg.call(e.brush),e.brush.initialize(n))};var Ed=function(e,t){return ut(e)&&ut(e)?e>t?t:e:e||t},Ld=So.utils.fontUtils={getTextWidth:function(e,t,a,r,n){r=r||"normal",n=n||"normal",il.save(),il.font=r+" "+n+" "+(t||12)+"px "+(a||dd.fontFamily);var i=il.measureText(e).width;return il.restore(),i},getTextHeight:function(e,t,a,r,n,i){return i?t:24>t?t+3:~~(1.195*t)}};Cr.applyDefaultStyles=function(e,t,a){var r,n,i=e.svg.select(".seriesholder"),o=e.staticPaneSVG.select("g.labelholder"),l=e.chartTypes[0],s=o.selectAll(\'text[level^="\'+t+\'"],path[level^="\'+t+\'"]\'),c=o.selectAll(\'text:not([level^="\'+t+\'"]), path:not([level^="\'+t+\'"])\');if("bar"===l.name)r=i.selectAll(\'path[level^="\'+t+\'"]\'),n=i.selectAll(\'path:not([level^="\'+t+\'"])\');else{if("scatter"!==l.name&&"bubble"!==l.name)return;r=i.selectAll(\'g.scatter[level^="\'+t+\'"]\'),n=i.selectAll(\'g.scatter:not([level^="\'+t+\'"])\')}a===!0?(r.style("opacity",1),n.style("opacity",.1),s.style("opacity",1),c.style("opacity",.1)):(r.style("opacity",1),n.style("opacity",1),s.style("opacity",1),c.style("opacity",1))},Cr.setState=function(e,t){var a=function(e){e.active=t};e.forEach(a)},Cr.updateTickEventHandler=function(e,t){var a=e.cache.hierarchical,r=!t;if(ut(a)&&ut(a.data)){var n,i=e.dataObject.hierarchical;if(a.data){var o=a.data.filter(function(e){return!e.seriesDisabled});if(t&&(a.query=o.length?Cr.getQuery(o[0],a.depth):"-1"),r){n=o[0];var l=n.level.split("_").slice(0,a.depth+1).map(Number),s=i.getCategoriesByLevelIndices(l),c=p.getAllChildren(s);a.query=Cr.getQuery(n,a.depth),a.data=c,Cr.setState(c,!0)}}}},Cr.getQuery=function(e,t){var a=e.level.split("_").slice(0,t+1).map(Number);return a.slice(0,t+1).join("_")+"_"},So.axis.polar=function(){function e(e){e.each(function(e){var a,u,h,f,g,p,y=Rl(this),v=i.systemConf,m=e.axisline,x=e.tickmark,b=e.subtickmark||{},C=e.grid,w=e.ticklabel,k=w.events;null!=k&&(p=0==lt(k.enabled,!0),a=k.mousemove,u=k.mouseout,h=k.click,f=k.doubleclick,g=k.cursor);var O=e.tickOrient,S=m.show?lt(m.strokeWidth,1):0,A=lt(C.strokeWidth,1),E=lt(w.marginLeft,5),L=lt(x.size,3),z=lt(b.size,2),D=+b.count||0,M=c||(n.ticks?n.ticks():n.domain()),j=t(n,M,D),R=n.range(),I=Qt(y,"g",[1],".","class","subticksGroup");I.style("stroke",b.color);var H=Qt(I,LINE_ELEMENT,j),B=Qt(y,"g",[1],".","class","ticksGroup"),F=Qt(B,"g",M,".","class","tick"),V=Qt(y,Us,m.show?[1]:[],".","class","domain");V.attr("d",function(){var e=us().innerRadius(o-1).outerRadius(o).startAngle(R[0]).endAngle(R[1])(1);return"M"+e.split(/L|M/gi)[1]}).styles({stroke:m.color,fill:Al,"stroke-width":S,"stroke-dasharray":P(m.style,S),"stroke-linecap":T(m.lineCap,m.style),"pointer-events":Al}),Qt(F,LINE_ELEMENT,[1],".","class","tickmark"),Qt(F,LINE_ELEMENT,[1],".","class","grid"),Qt(F,Ys,[1],".","class","ticklabel");var N=F.select(Ys+".ticklabel"),_=F.select(LINE_ELEMENT+".tickmark"),W=F.select(LINE_ELEMENT+".grid");N.style("cursor",g||Tl).style("pointer-events",p?Al:El).attr("index",function(e,t){return t}).text(function(e){return s(e)}),ta(N,[w,v.chart,v.canvas,dd]),d={data:l.map(function(e){return Cd(i.systemConf.metadata.columns[e],{columnindex:e},!0)})};var Y=function(e){r(a,d3.event,e)},X=function(e){r(u,d3.event,e)},U=function(e){r(h,d3.event,e)},G=function(e){r(f,d3.event,e)},Z={mousemove:Y,mouseout:X,click:U,dblclick:G},Q={singletouchmove:Y,touchend:X,tap:U,dbltap:G};cn(N,Z,Q);var q,K,$,J;switch(O){case Sc:q=o-S/2,K=-(L+E),$=-L,J=-z;break;default:q=o+S/2,K=L+E,$=L,J=z}F.attr("transform",function(e){var t=ba(q,n(e));return"translate("+t[0]+","+t[1]+")"}),N.attrs({dy:function(e){var t=Ca(n(e));return O==Sc?t>kl/2&&3*kl/2>t?null:-Oa(t)+"em":t>kl/2&&3*kl/2>t?Oa(t)+"em":null},"text-anchor":function(e){var t=Ca(n(e));return t%kl==0?"middle":O==Sc&&kl>t||O!=Sc&&t>kl?"end":null},transform:function(e){var t=ba(K,n(e));return"translate("+t[0]+","+t[1]+")"}}),_.attrs({x2:function(e){return ba($,n(e))[0]},y2:function(e){return ba($,n(e))[1]}}).styles({stroke:x.color,"stroke-width":x.strokeWidth}),W.attrs({x2:function(e){return ba(-o,n(e))[0]},y2:function(e){return ba(-o,n(e))[1]}}).styles({stroke:C.color,"stroke-width":A,"stroke-dasharray":P(C.style,A),"stroke-linecap":T(C.lineCap,C.style)}),H.attrs({x2:function(e){return ba(J,n(e))[0]},y2:function(e){return ba(J,n(e))[1]},transform:function(e){var t=ba(q,n(e));return"translate("+t[0]+","+t[1]+")"}})})}function t(e,t,r){if(n=[],r&&t.length>1){for(var n,i,o,l=a(e.domain()),s=-1,c=t.length,d=(t[1]-t[0])/++r;++s<c;)for(i=r;--i>0;)(o=+t[s]-i*d)>=l[0]&&n.push(o);for(--s,i=0;++i<r&&(o=+t[s]+i*d)<l[1];)n.push(o)}return n}function a(e){var t=e[0],a=e[e.length-1];return a>t?[t,a]:[a,t]}function r(e,t,a){null!=e&&(d.data=d.data.map(function(e){return e.value=a,e}),it(e,t,d,i))}var n,i,o,l,s,c,d;return e.scale=function(t){return arguments.length?(n=t,e):n},e.chartObj=function(t){return arguments.length?(i=t,e):i},e.radius=function(t){return arguments.length?(o=t,e):o},e.columnIndices=function(t){return arguments.length?(l=t,e):l},e.tickValues=function(t){return arguments.length?(c=t,e):c},e.tickFormat=function(t){return arguments.length?(s=t,e):s},e},So.axis.polar.render=function(e,t){function a(e){var t=[],a=e+((L==Ac?S:S/2)+T*(z==Sc?-1:1)),n=z==Sc?Hl:Bl;return G.selectAll(Ys).each(function(i){var o=q(this),l=e+((L==Ac?S:S/2)+P+A)*(z==Sc?-1:1),s=ba(l,B(i)),c=[r(s[0]+o.x,s[1]+o.y),r(s[0]+o.x,s[1]+o.y+o.height),r(s[0]+o.x+o.width,s[1]+o.y),r(s[0]+o.x+o.width,s[1]+o.y+o.height),a];t.push(n(c))}),n(t)}function r(e,t){return pl(gl(e,2)+gl(t,2))}function n(e,t){if(bt){var a=us().innerRadius(e-1).outerRadius(e).startAngle(F[0]).endAngle(F[1])(1);return"M"+a.split(/L|M/gi)[1]}var r=t.ticks?t.ticks():t.domain(),a=r.reduce(function(a,r){var n=t(r),i=ba(e,n);return a+"L"+i[0]+" "+i[1]+" "},"");return"M"+a.substring(1)+"Z"}function i(t,a,r,n){var i=m.minmaxlabels,o=i.align,l=lt(i.padding,5),s=i.text,d=a.domain(),u=i.showAs,h=o==Sc?n-l:"center"==o?(r+n)/2:r+l,f=i.show?"min"==u?[d[0]]:"max"==u?[d[1]]:d:[],g=Qt(t,Ys,f,".","class","minmaxlabels");ta(g,[i,c.chart,c.canvas,dd]),g.attrs({"text-anchor":function(e){if("center"==o)return"middle";var t=Ca(a(e));return t%kl==0?"middle":o==Sc&&kl>t||o!=Sc&&t>kl?"end":null},dy:function(e){if("center"==o)return"1em";var t=Ca(a(e));return o==Sc?t>kl/2&&3*kl/2>t?null:-Oa(t)+"em":t>kl/2&&3*kl/2>t?Oa(t)+"em":null},transform:function(e){var t=ba(h,a(e)),r="center"==o?l:0;return"translate("+t[0]+","+(t[1]+r)+")"}}).text(function(t,a){return s&&ut(s[a])?x(s[a]+"",f,N,e):gn(W,t,_,e,"minmaxlabels")})}function o(){var e={};return l(e,"axisgroup"),l(e,"minmaxlabels"),l(e,"targetSeries"),d.firedList=e}function l(e,t){var a=[".targetSeries",".datalabel",".minmaxlabels",".axisgroup"].filter(function(e){return e!=="."+t}).join();U.selectAll(a).style("display",Al);var r=q(U.node()),n=j+hl((D-r.width)/it,(M-r.height)/nt),i=ka("minmaxlabels"===t?m.minmaxlabels.maxWidth:null,j,ka("50%",j));(j-i>n||0>=j||!isFinite(n))&&(e[t]=!0,U.selectAll("."+t).remove()),U.selectAll(a).style("display",null)}var t=t||"y",s=0,c=e.systemConf,d=e.renderer[0],u=e.dataObject,h=e.plotarea,f=e.canvasarea,g=e.systemConf.metadata.columns,p=e.chartTypes[0],y=p.value,v=p.name,m=c.chart.plot.plotoptions[v],b="x"==t?c.chart.axes.xaxis:c.chart.axes.yaxis[s],C=+m.outerPadding||0,w=+m.maxRadius||0,k=y===So.charttype.dial,O=b.show&&ma(e,t+"axis",hl(f.width,f.height)),S=O&&b.axisline.show?lt(b.axisline.strokeWidth,1):0,A=lt(b.ticklabel.marginLeft,5),P=lt(b.tickmark.size,3),T=b.subtickmark?lt(b.subtickmark.size,2):0,E=So.utils.getVal(b.ticklabel.fontSize||c.chart.fontSize||c.canvas.fontSize||dd.fontSize),L=b.orient||Ac,z=b.tickOrient,D=h.width-2*C,M=h.height-2*C,j=hl(D,M)/2,R=Pa(m,j),I=O?+m.padding||0:0;\ne.plotarea_approx={x:0,y:0,innerRadius:R};var H=So.scale.constructor(e,"x"==t?bc:mc),B="x"==t?H[0].scale:H[s].scale,F=B.range(),V=e.dataset.getColumnIdx(t,s),N=g[V],_=N.datatype,W=N[_],Y=L==Sc?z===Ac?R-I-S/2-ul(T,P+A+E):R:j,X=So.axis.polar().scale(B).chartObj(e).radius(Y).columnIndices([V]).tickFormat(function(t){return gn(W,t,_,e,"axis")}).tickValues(null),U=Qt(e.svg.selectAll("g.chartgroup"),"g",[1],".","class",t+"-axis"),G=Qt(U,"g",O?[b]:[],".","class","axisgroup");G.call(X),U.style("visibility","hidden");var Z=us().innerRadius(!k||m.needle.show||e.datalabels.moduleExists&&ui(m.datalabels,e)?0:R).outerRadius(j).startAngle(F[0]).endAngle(F[1]),Q=Qt(U,Us,[1],".","class","dummyArc").attr("d",Z(1)),K=Qt(U,"g",[1],".","class","datalabel"),$=Qt(U,"g",[1],".","class","targetSeries");if(k){if(!d){var J=0;d=e.renderer[J]=zd(v),e.rendererConf=[],e.rendererConf[J]=new So.plot.rendererConf,Ko.setRendererProp(e,d,e.seriesdata[J],J,J,[])}d.firedList={},So.labelRenderer&&K.call(So.labelRenderer.dial().renderer(d).args([e.seriesdata,0]),e.labelHandler,K),i(U,B,j,R),mu.targetMarker($,j,R,e);var et=+m.needle.width/2||7,tt=Qt(K,"circle",m.needle.show?[1]:[]);tt.attrs({r:et,transform:"translate("+et+","+et+")"})}var at=q(Q.node()),rt=q(U.node()),nt=at.height/j,it=at.width/j,ot=j+hl((D-rt.width)/it,(M-rt.height)/nt),st={};if(k){var st=o(),rt=q(U.node());ot=j+hl((D-rt.width)/it,(M-rt.height)/nt),ot=ot>w?w:ot,ot=isFinite(ot)&&ot>0?ot:0}R=Pa(m,ot)-(L==Sc?(+m.strokeWidth||0)/2:0),Y=(L==Sc?z==Sc?R:R-(a(j)-j):ot)-(z==Sc?S/2:0)-(L==Sc?I:0),X.radius(Y),st.axisgroup?null:G.call(X),Z.outerRadius(ot).innerRadius(!k||m.needle.show||e.datalabels.moduleExists&&ui(m.datalabels,e)?0:R),Q.attr("d",Z(1)),k&&(st.minmaxlabels?null:i(U,B,ot,R),mu.targetMarker($,ot,R,e));var at=q(Q.node()),rt=q(U.node()),ct=wa(rt,h.width,h.height,ot,0);U.attr("transform","translate("+(h.left+ct[0])+","+(h.top+ct[1])+")"),U.style("visibility",null);var dt=(z==Sc&&L==Ac?a(ot):ot-(L==Sc?0:S/2))-(L==Sc?0:I),ht=z==Sc?(ot-dt)*it:0,ft=z==Sc?(ot-dt)*nt:0;if(e.plotarea_approx={x:ct[0],y:ct[1],width:at.width-S-ht,height:at.height-S-ft,radius:dt,actualRadius:ot,innerRadius:R},Q.remove(),K.remove(),$.remove(),u.isPolarAxisCategory){var t="y",gt=0,pt=c.chart.axes.yaxis[gt],j=e.plotarea_approx.radius,yt=e.plotarea_approx.x,vt=e.plotarea_approx.y,L=pt.orient||xc,mt=lt(pt.tickmark.size,6),xt=lt(pt.ticklabel[L==mc?"marginRight":"marginLeft"],3),bt="arc"===pt.grid.type,H=So.scale.constructor(e,mc),Ct=H[gt].scale,wt=pt.reversed&&!u.isstacked()?[0,j]:[j,0];Ct.origRange=wt,Ct.range(wt);var kt={left:e.plotarea.left,top:e.plotarea.top,width:j,height:j},Ot=tr(e,t,0),St=So.axis.ticks(e,pt,"y",0,L,kt);Ot.ticks=St,St.preCalcApproxAxisLength(kt);var At=St.getTickValues(j,j,null,null,j/20,Ot.Ticks),Pt=e.userdata.metadata,Tt=Pt.axes.y[gt].length>1,V=e.dataset.getColumnIdx(t,gt),_=Pt.columns[V].datatype,W=Tt&&"y"==t?Qa(gt,e):Pt.columns[V][_],Et=u.isStackedPercentChart&&"y"==t?xn:gn,Lt=So.axis.get().orient(L).scale(Ct).tickPadding(xt).tickSize(mt,0).plotarea({width:j,height:j}).systemconf(e.systemConf).chartObj(e).tickRotation(At.rotation).preCalcTickLen(St.preCalcTickLen).tickValues(At.ticks).tickFormat(function(t){var a=Et(W,t,_,e,"axis");d3.select(this).text(a)}).columnIndices(Tt&&"y"==t?Pt.axes.y[s]:[V]),zt=e.svg.selectAll("g.y-axis").data(pt.show?[pt]:[]);zt.call(Lt,t,gt).attr("transform","translate("+(yt+e.plotarea.left)+","+(vt+e.plotarea.top-j)+")"),zt.exit().remove();var Dt=zt.selectAll(".tick");Dt.append(Us);var Mt=Dt.select(Us);Mt.attr("transform",function(e){return"translate(0,"+(j-Ct(e))+")"}).attr("d",function(e){return n(j-Ct(e),B)}).styles({fill:Al,stroke:pt.grid.color,"stroke-width":pt.grid.strokeWidth}),G.selectAll(Us+".domain").attr("d",function(){return n(j,B)}),Ct.range(wt.reverse()),H[s].eventscale=Ct}},So.plot.render=function(e){var t=e.systemConf.chart.plot.renderer.mode.toLowerCase(),a=e.chartTypes[0],r={mode:So.chartcategory.svgOnly.indexOf(a.value)>-1||e.dataObject.pieWithAxis?"svg":t.toLocaleLowerCase()},n={};if(n.labelQueue=[],n.notesArray=[],n.labelArray=[],e.rendererConf||(e.rendererConf=[]),"function"!=typeof So.plot[r.mode+"Renderer"])throw new SyntaxError(""+r.mode+"Renderer not found");return r[r.mode]=So.plot[r.mode+"Renderer"](e,n),r.draw=function(t){e.chartRendered=!1,this[this.mode].draw(t)},r},Ko.renderCompletedEvents=function(e,t,a){function r(){try{Ir(e,i.chart.plot.events,"plot",t?"onreload":"onload"),wr(e,a,!(l&&t)),e.handleHiddenContainer(!0),Ir(e,i.canvas.events,"chart",t?"onreload":"onload")}catch(r){So.Chart.helpers.handleErrors(e,r)}}var n,i=e.systemConf,o=e.dataObject.hasLevelMarker&&!e.isAxisCategory,l=(e.isAxisCategory||e.dataObject.isPolarAxisCategory)&&!e.dataObject.pieWithAxis||o,s=e.renderer,c=!1;e.isAxisCategory||e.dataObject.isPolarAxisCategory?setTimeout(function(){c=!0},e.axes.animationDuration+17):c=!0;var d=function(){if(kt()&&(e.chartRendered=!0),e.destroying)return!0;for(n=s.length;n--;){if(s[n].chartRendered!==!0||!c)return!1;a.notesArray=s[n].commonRendererProp().notes()}return r(),e.chartRendered=!0,clearInterval(u),!0},u=setInterval(d,1e3/60);l&&wr(e,a,o||t)},Ko.arrangeSeriesRenderingOrder=function(e){var t=e.seriesdata,a=So.DataProcessor.helpers;if(e.dataObject.isCombinationalChart){var r={defaultType:0,area:0,bar:1,line:2,bubble:3,bubblepie:4,scatter:5},n=e.userdata.seriesdata.type,i=wd(t);return i.map(function(e,t){return e.seriesidx=t,e}),i.sort(function(e,t){var i=a.getChartType(e.type||n,"string"),o=a.getChartType(t.type||n,"string"),l=null==r[i]?r.defaultType:r[i],s=null==r[o]?r.defaultType:r[o],c=e.seriesidx,d=t.seriesidx;return s>l?-1:l>s?1:d>c?-1:c>d?1:0}),i}return t},Ko.setRendererProp=function(e,t,a,r,n,i){function o(t,a,r,n,o){var s=e.seriesdata[r].color||e.seriesColor[r%e.seriesColor.length],c=e.seriesdata[r].yaxiscolumnorder,d=h.getParsedYAxisOrder(c),u=e.rendererConf[r];u.chartObj(e).dataset(e.dataset).axisrotated(e.dataObject.getAxisRotated()).yaxiscolumnorder(d).hasNegValue(e.dataObject.containsNegativeData(d)).stacked(e.dataObject.isstacked(o)).commonPlotOptions(e.systemConf.chart.plot.plotoptions[n]).color("bubblepie"==n?e.seriesColor:e.isAxisCategory?l(t,a,s,r,d,n):e.dataObject.isPolarAxisCategory?s:e.seriesColor).notes(i.notesArray).updateLabelArrayAndLabelQueue(i.labelArray,i.labelQueue)}function l(t,a,r,n,i,o){var l=u.chart.axes.xaxis.threshold.coloroverlay,s=null!=u.chart.axes.yaxis[i]&&null!=u.chart.axes.yaxis[i].threshold?u.chart.axes.yaxis[i].threshold.coloroverlay:null,c=l.show||null!=s&&s.show;if(c){var d=null!=s&&s.show?s:l.show?l:null,h=null!=s&&s.show?"y":l.show?"x":null,f=c?So.axis.threshold.overlay(e,"continous"):null,g="y"===h?i:0;return e.rendererConf[n].threshold(c?d:null).thresholdType(h).colorOverlay(c?So.axis.threshold.overlay(e,"discrete",d):null),"bar"==o||"scatter"==o||"bubble"==o?r:f(r,d,g,h)}return r}var s=e.chartTypes[r],c=s.name,d=s.value,u=e.systemConf,h=So.DataProcessor.helpers;o(t,a,r,c,d),t.commonRendererProp(e.rendererConf[r]);var f=e.seriesdata[r].yaxiscolumnorder,g=h.getParsedYAxisOrder(f);if(t.chartRendered=!1,e.xymultiRenderer||e.dataObject.isPolarAxisCategory){var p=e.axes.y.groups[g],y=p.scale;e.rendererConf[r].xscale(e.axes.x.scale).yscale(y).datasetIndex(r).renderingOrderIndex(n),i.labelArray=e.rendererConf[r].params.labelArray,i.labelQueue=e.rendererConf[r].params.labelQueue}if(Vr(d)&&!Ur(d)&&(t.bandwidth1(e.barscale1).bandwidth2(e.barscale2),i.image||t.barDatasetIndex(i.barDatasetIndex),null!=a.disabled&&a.disabled||(i.barDatasetIndex=i.barDatasetIndex+e.seriesdata[r].data.length)),Wr(d)){var v=e.rendererConf[r].params;v.categoryColorConfig=Ii(e.seriesdata[r].plotoptions,v.commonPlotOptions)}},Ko.saveSeriesdataInRenderer=function(e,t){var a=e.rendererConf[t].params,r=a.xscale,n=a.yscale,i=a.yaxiscolumnorder,o=e.dataset,l=o.getDataType("x"),s=o.getDataType("y",i),c=e.seriesdata[t].data,d=e.renderer[t];if(l==Ns||s==Ns){d.seriesdataAfterUpdate=[];var u=So.DataProcessor.helpers,h=(u.isCatNull(o,"x"),u.isCatNull(o,"y",i),l==Ns?r.domain():null),f=s==Ns?n.domain():null;c.forEach(function(t,a){d.seriesdataAfterUpdate[a]=e.dataObject.updateSeriesdatabyCategories(et(t),h,f,i)})}else d.seriesdataAfterUpdate=null},So.plot.rendererConf=function(){var e={};return e.params={},e.xscale=function(t){return arguments.length?(e.params.xscale=t,e):e.params.xscale},e.yscale=function(t){return arguments.length?(e.params.yscale=t,e):e.params.yscale},e.stacked=function(t){return arguments.length?(e.params.stacked=t,e):e.params.stacked},e.datasetIndex=function(t){return arguments.length?(e.params.datasetIndex=t,e):e.params.datasetIndex},e.renderingOrderIndex=function(t){return arguments.length?(e.params.renderingOrderIndex=t,e):e.params.renderingOrderIndex},e.axisrotated=function(t){return arguments.length?(e.params.axisrotated=t,e):e.params.axisrotated},e.commonPlotOptions=function(t){return arguments.length?(e.params.commonPlotOptions=t,e):e.params.commonPlotOptions},e.color=function(t){return arguments.length?(e.params.color=t,e):e.params.color},e.chartObj=function(t){return arguments.length?(e.params.chartObj=t,e):e.params.chartObj},e.notes=function(t){return arguments.length?(e.params.notesArray=t,e):e.params.notesArray},e.updateLabelArrayAndLabelQueue=function(t,a){return arguments.length?(e.params.labelArray=t,e.params.labelQueue=a,e):[e.params.labelArray,e.params.labelQueue]},e.hasNegValue=function(t){return arguments.length?(e.params.hasNegValue=t,e):e.params.hasNegValue},e.dataset=function(t){return arguments.length?(e.params.dataset=t,e):e.params.dataset},e.yaxiscolumnorder=function(t){return arguments.length?(e.params.yaxiscolumnorder=t,e):e.params.yaxiscolumnorder},e.threshold=function(t){return arguments.length?(e.params.threshold=t,e):e.params.threshold},e.thresholdType=function(t){return arguments.length?(e.params.thresholdType=t,e):e.params.thresholdType},e.colorOverlay=function(t){return arguments.length?(e.params.colorOverlay=t,e):e.params.colorOverlay},e},So.plot.svgRenderer=function(e,t){var a={},r=e.systemConf,n=So.DataProcessor.helpers;return a.draw=function(a){e.dataset.getDataType("x")==Ns&&e.isAxisCategory&&So.scale.barBandwidth(e),t.barDatasetIndex=0;var i,o=[];e.chartRendered=!1;var l=e.dataObject.isCombinationalChart,s=l?Ko.arrangeSeriesRenderingOrder(e):e.seriesdata;e.seriesdata.forEach(function(c,d){var u=s[d],h=l?u.seriesidx:d;if(!(h>0)||e.xymultiRenderer||e.dataObject.isPolarAxisCategory){i=n.getChartType(u.type||e.userdata.seriesdata.type,Ws),i==So.charttype.bubblepie&&rt(e.bubblePieRendererIndex)&&(e.bubblePieRendererIndex=h);var f=[],g=So.charttypenames.get(i),p=u.plotoptions,y=r.chart.plot.plotoptions[g],v=ha(y,p,e,g),m=v.enabled,x=v.type;null==e.renderer[h]&&(e.renderer[h]=zd(g),e.rendererConf[h]=new So.plot.rendererConf),e.renderer[h].chartRendered=!1,0==d&&(Ir(e,r.chart.plot.events,"plot","init"),e.hideLoading(e.container)),m&&!a&&(Nr(i)||Fr(i))&&[dc,sc,nc,Zs,ac,$s].indexOf(x)<0?(o[h]=!1,f[h]=setInterval(function(){e.renderer[h].chartRendered&&clearInterval(f[h]),!o[h]&&(0==h||h>0&&e.renderer[h-1].chartRendered)&&(Ko.setRendererProp(e,e.renderer[h],u,h,d,t),Dd(e,u,e.renderer[h]),o[h]=!0)},10)):(Ko.setRendererProp(e,e.renderer[h],u,h,d,t),Dd(e,u,e.renderer[h]))}}),Ko.renderCompletedEvents(e,a,t)},a};var zd=function(e){switch(e){case"waterfall":case"gantt":case"bullet":e="bar";break;case"web":case"arearange":e="area";break;case"bubble":e="scatter"}return new qo[e]},Dd=function(e,t,a,r){function n(e,t,a){return e.select("g."+t).attr("transform","translate("+a.x+","+a.y+")")}if(r)a.update();else{clearTimeout(a.renderedTimer);var i=e.svg.selectAll("g.xychart").data([e.systemConf]);n(i,"seriesholder",{x:e.plotarea.left,y:e.plotarea.top}).datum(e.seriesdata).call(a),e.dataObject.isPolarAxisCategory&&i.selectAll("g.seriesholder").selectAll(function(){return this.childNodes}).attr("transform","translate("+e.plotarea_approx.x+","+e.plotarea_approx.y+")"),n(e.staticPaneSVG,"labelholder",{x:e.plotarea.left,y:e.plotarea.top})}};So.plot.imageRenderer=function(e,t){function a(){function t(e,t,a){return e.select("g."+t).attr("transform","translate("+a.x+","+a.y+")")}function a(e){var t="",a=Object.keys(e),r=0;for(var n in e)t+=n+"="+e[n],e.hasOwnProperty(a[r+1])&&(t+="&"),r++;return t}function r(t){if(e.systemConf.chart.plot.renderer.image.addDimensionInSource===!0){var a=t.indexOf("?")>-1?"&":"?";t+=a+"WIDTH="+e.plotarea.width+"&HEIGHT="+e.plotarea.height}{var r=300;i.append("svg:image").attr("xlink:href",t).attr("width",sl(e.plotarea.width)).attr("height",sl(e.plotarea.height)).attr("x",0).attr("y",0).style("opacity",0).attr("onload",function(){e.hideLoading(e.container),e.svg.selectAll(".threshold").transition().style("opacity","1").duration(r)}).on("error",function(){throw e.chartRendered=!1,e.hideLoading(e.container),new ReferenceError("Invalid image source.")}).transition().style("opacity","1").duration(r).on("end",function(){e.chartRendered=!0})}}e.chartRendered=!1;var n=e.svg.selectAll("g.xychart");t(n,"seriesholder",{x:e.plotarea.left,y:e.plotarea.top}),t(n,"labelholder",{x:e.plotarea.left,y:e.plotarea.top});var i=e.svg.select(".seriesholder");e.svg.selectAll(".threshold").styles({opacity:0});var o=e.systemConf.chart.plot.renderer.image.source;if("auto"!=o)return i.selectAll("*:not(.zmarea)").remove(),void r(o);i.selectAll("*:not(.zmarea)").remove(),e.showLoading(e.container);var l=e.seriesdata[0].type||e.userdata.seriesdata.type,s=getChartType(l,"string"),c=e.systemConf,d=c.chart.plot.plotoptions[s].datalabels.fontSize;d="function"==typeof d?d():d,c.chart.plot.plotoptions[s].datalabels.fontSize=d;var u=JSON.parse(JSON.stringify(c));u.chart.plot.renderer.mode="svg",at(e.userdata,"chart.plot.datalabels.fontColor")||delete u.chart.plot.datalabels.fontColor,at(e.userdata,"chart.plot.plotoptions."+s+".datalabels.fontColor")||delete u.chart.plot.plotoptions[s].datalabels.fontColor;var h={url:e.systemConf.chart.plot.renderer.image.exportUrl,type:"POST",data:{DATA:encodeURIComponent(JSON.stringify(u)),HEIGHT:sl(e.plotarea.height),WIDTH:sl(e.plotarea.width)}};e.xhr&&e.xhr.abort();var f=a(h.data),g=Hs(h.url).header("Content-type","application/x-www-form-urlencoded").post(f,function(t,a){i.selectAll("image").remove();var n=JSON.parse(a.responseText);n.rendered&&(e.hideLoading(e.container),r(n.serverPath)),delete e.xhr});e.xhr=g}var r={};return r.draw=function(r){e.systemConf.legend.highlightEffect.selectedSeries=Al,e.systemConf.loader.enabled=!0,e.dataset.getDataType("x")==Ns&&e.isAxisCategory&&So.scale.barBandwidth(e),t.barDatasetIndex=0;var n;e.chartRendered=!1;var i=e.dataObject.isCombinationalChart,o=i?Ko.arrangeSeriesRenderingOrder(e,e.seriesdata):e.seriesdata;a(),e.seriesdata.forEach(function(a,r){var l=o[r],s=i?l.seriesidx:r;if(e.isAxisCategory||!(s>0)){var c=getChartType(null,"object",s,e.userdata),d=c.name;null==e.renderer[s]?(n=getChartType(l.type||e.userdata.seriesdata.type,Ws),e.renderer[s]=zd(d),e.rendererConf[s]=new So.plot.rendererConf):e.renderer[s].commonOption=null,Ko.setRendererProp(e,e.renderer[s],l,s,t),e.renderer[s].chartRendered=!1,0==r&&Ir(e,e.systemConf.chart.plot.events,"plot","init")}}),Ko.renderCompletedEvents(e,r,t)},r};var Md={};Md.getAvailableBound=function(e,t){var a=e.plotarea,r=a.width,n=a.height,i=hl(r/2,ka(t.outerPadding,r/2,0)),o=hl(n/2,ka(t.outerPadding,n/2,0));return{x:i,y:o,width:r-2*i,height:n-2*o}},Md.updatePlotareaByBandWidth=function(e,t){var a,r=e.dataObject;if((r.noofBarEnabledSeries||r.isCombinationalChart)&&r.allChartTypes.some(function(t){var r=So.DataProcessor.helpers.getChartType(t,"string");return Vr(t)?(a=e.systemConf.chart.plot.plotoptions[r],!0):void 0}),a&&a.strictBandWidth){var n=r.getCategories("x").length,i=Od(a.padding,.2),o=a.outerPadding;o=ut(o)?o:.2,o=So.scale.getOuterPadding(d?[0,t.width]:[t.height,0],n,i,o);var l=a.levelMarker,s=a.targetMarker||{},c=e.plotarea,d=e.axes.rotated,u=(d?t.height:t.width)/(n-i+2*o)*(1-i),h=[],f=lt(l.bandWidth,u),g=lt(l.maxBandWidth,u);levelMarkerBand=hl(f,g,u),l.enabled&&h.push(levelMarkerBand),s.enabled&&h.push(ut(s.size)?hl(10*s.size,u):0);var p=lt(a.bandWidth,levelMarkerBand),y=lt(a.maxBandWidth,p);h.push(hl(p,y,u));var v=ul.apply(null,h),m=v/(1-i);v=m*(n-i+2*o),d?(c.height=v+(c.height-t.height),c.top+=c.adjust=(t.height-v)/2):(c.width=v+(c.width-t.width),c.left+=c.adjust=(t.width-v)/2)}},So.legutil=function(){},So.legutil.colorpallete=es(),So.legutil.colorpallete.set("greenish",["#6c6c6d","#1ba98e","#00ff80","#00ffc0","#00ffff","#40ff00","#40ff40","#40ff80","#40ffc0","#40ffff","#80ff00","#80ff40","#80ff80","#80ffc0","#80ffff"]),So.legutil.colorpallete.set("pinkish",["#ff00ff","#ff00c0","#ff0080","#ff0040","#ff0000","#c000ff","#c000c0","#c00080","#c00040","#c00000","#8000ff","#8000c0","#800080","#800040","#800000"]),So.legutil.colorpallete.set("countries",["#00c6e4","#faa43a","#5da5da","#60bd68","#f17cb0","#b2912f","#307d99"]),So.legutil.colorpallete.set("saturate5",["#594f4f","#547980","#45ada8","#97843a","#518058","#975156"]),So.legutil.colorpallete.set("ocean5",["#ff7f00","#6a4a3c","#cc333f","#eb6841","#edc951","#975156"]),So.legutil.colorpallete.set("zoho-reports-old",["#FF465B","#04C36B","#3A92E9","#FDC33A","#D65587","#FC7C63","#51A5A9","#BFBFBF","#91CD6A","#BE9B89","#7D8DB0","#B68E2E","#C6D5B0","#D1ACCE","#E0AE60","#5CD29F","#716398","#AD8686","#FF99A8","#A0C0C0","#2D7094","#553D4E","#B2449D","#FED577","#D3D159","#AAAAAA","#7ED9D9","#F7A26D","#8ABFA2","#767676","#E36068","#A3AFC7"]),So.legutil.colorpallete.set("zoho-reports-new",["#60bfdf","#ffa060","#aadf80","#ff6c7d","#c9ac66","#bf80bf","#df6060","#606060","#60a0df","#ff99a8","#feff60","#a0dfdf","#dfa080","#dfdfdf","#a0a060","#a080bf","#a06060","#5cd29f","#ffbe60","#bfa080","#f28fb5","#8080bf","#bfbfbf","#dfdf80","#80a060","#80a060","#a08060","#7ed9d9","#be9b89","#bf6060","#a0bf60","#fc7c63"]),So.legutil.colorpallete.set("colors",["#0eaadd","#1ac9bb","#92c658","#dbbe56","#ee7d54","#ef4f6a","#b952ef"]),So.legutil.colorpallete.set("flat-ui-colors",["#23a96e","#bca634","#f75a51","#39b6c5","#f9ce8d","#983a67","#634c3f","#d7dab9","#357180","#983a67","#b16b76","#7f90a0"]),So.legutil.colorpallete.set("MEMobile",["#73c2f4","#ecd543","#e6be3f","#da7b36","#c84b37","#9c240f","#9bcedd","#ffe560","#ffe560","#c67c99","#c6db4c"]),So.legutil.colorpallete.set("Toddler",["#f8d0db","#9be1ed","#c4ead1","#fbe2aa","#e5e5e5","#d6b65f","#be9fbf","#ffe560","#ffe560","#c67c99","#c6db4c"]),So.legutil.colorpallete.set("BrightNDull",["#47bac1","#8ccace","#72c3f5","#71bfee","#ac66ad","#c5a0c6","#906aa6","#b29dbf","#fd9f94","#f6cac4","#ff759c","#f6acc1"]),So.legutil.colorpallete.set("BlueShades",["#00c6e4","#6ad4e4","#a3dbe4","#c3e0e4","#e4e4e4","#c8c8c8","#aac4c8"]),So.legutil.colorpallete.set("graphite6",["#595959","#767676","#373737","#9d9d9d","#bfbfbf","#222222"]),So.legutil.colorpallete.set("chalk",["#FFFFFF","#FAFAFA","#CCCCCC"]),So.legutil.colorpallete.set("map",["#FB0D0D","#53B808","#B80894","#2ADBDD"]),So.legutil.patternPallete=es(),So.legutil.imagePallete=es(),So.legutil.imagePallete.set("linesndots",["01.png","02.png","03.png","04.png","05.png","06.png","07.png","08.png","09.png","10.png","11.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),So.legutil.imagePallete.set("dotsfirst",["13.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),So.legutil.imagePallete.set("stones",["01.jpg","02.jpg","03.jpg"]),j(),So.legutil.patternPallete.set("stripes-fill",["hatchfill","hatchDashfill","checkerBoard","horizontalStripesfill","verticalStripesfill","crossStripesfill"]),So.legutil.patternPallete.set("stripes",["hatch","thinThickHatch","hatchLeft","hatchDash","horizontalStripes","crossStripes","verticalStripes","thickHatch","thinHatch","thinVerticalStripes","thinHorizontalStripes"]),So.legutil.patternPallete.set("dotted",["circle","tinyCircle","crossCircle","floatingCircle","dot"]),So.legutil.patternPallete.set("dotted-fill",["circlefill","crossCirclefill","floatingCirclefill","dotfill"]),So.legutil.patternPallete.set("shapes",["thinThickHatch","crossCircle","star","wave","cap","nylon"]),So.legutil.patternPallete.set("shapes-fill",["checkerBoard","floatingCirclefill","squarefill","starfill","wavefill","capfill","nylonfill"]),Pr(),So.legutil.getMonochromeColorPallette=function(e){var t=[0,+e.count-1],a=[+e.colorGamma[0],+e.colorGamma[1]],r=Q(e.baseColor,t,a);return xs(e.count).map(function(e,t){return r(t)})};var jd={};jd.getLegendData=function(e){if(Pd.isQuantileColorScale(e)){var t=e.systemConf.legend.colorBand.ranges;if(t&&t.length)return t}return e.xymultiRenderer||e.isNonAxisMultiSeriesCategory||e.isGeoMap?e.seriesdata:e.seriesdata[0].data[0]},jd.getLegendDataLength=function(e,t){return e.xymultiRenderer||e.isNonAxisMultiSeriesCategory?t.filter(function(e){return!jd.isHiddenItem(e)}).length:t.length},jd.isHiddenItem=function(e){return e.hideInLegend},jd.getClr=function(e,t,a){return e?a.color||t:t},jd.updateBubblePieData=function(e,t,a){a.dataObject.pieWithAxis&&e.data.forEach(function(r){var n=Zr(a.chartTypes[t].value);r.forEach(function(t){t.disabled=e.disabled||!n||t.dummy})})},jd.updateHierarchyData=function(e,t,a){a.dataObject.isHierarchy&&(a.systemConf.seriesdata.chartdata[t].disabled=e.disabled)},jd.toggleChartEvents=function(e,t){var a=t?null:Al,r=[];e.svg?((e.isAxisCategory||e.dataObject.isPolarAxisCategory)&&r.push(e.eventHandler.trackerElement),r.push(e.svg)):r.push(e.container),r.forEach(function(e){e.style("pointer-events",a)})},jd.fadeChart=function(e,t,a){t.container.selectAll("g.chartgroup,svg.static,canvas.zc-canvas,div.zcnotes").style("opacity",e?null:a)},jd.isDisabled=function(e,t,a){return t||a?e.disabled:!t},jd.isAllEnabled=function(e,t){if(!t)return t;var a=e.filter(function(e){return e.disabled});return!a.length},jd.getFilterBoxSize=function(e,t){var a=ut(e.size)?+e.size:t,r=ut(e.width)?+e.width:a,n=ut(e.height)?+e.height:a;return[r,n]},jd.updateData=function(e,t,a){Pd.isQuantileColorScale(a)?a.axes.clr.scale=So.scale.getScale(a,a.dataObject,null,null,null,a.dataset,"clr"):(jd.updateBubblePieData(e,t,a),jd.updateHierarchyData(e,t,a),a.dataObject.data=a.systemConf)},jd.isContinousLegend=function(e){var t=e.systemConf.legend.colorBand,a=Pd.isQuantileColorScale(e);if(a){var r=t.ranges,n=e.dataset.getDataType("clr")===Ns;if(n||r&&r.length){var i=t.type;return"continuousDiscrete"===i||"continuous"===i}return!0}return!1},jd.getColorBandDimension=function(e){var t=e.chartarea,a=e.systemConf.legend,r=Tr(a),n=a.colorBand,i="horizontal"===r.layout,o=a.maxWidth,l=a.maxHeight,s=n.width,c=n.height,d=Lr(a);return i?(o=d.width,l=d.height,s=s||"40%",c=c||14):(o=d.width,l=d.height,s=s||14,c=c||"70%"),o=ka(o,t.width),l=ka(l,t.height),s=ka(s,t.width),c=ka(c,t.height),s=hl(s,o),c=hl(c,l),[s,c]},jd.getOrient=function(e){var t,a=e.hAlign,r=e.vAlign,n=Tr(e),i={top:"top",center:"bottom",bottom:"bottom"},o={left:"left",center:"right",right:"right"};return t="horizontal"===n.layout?i[r]:o[a]},jd.getLabelIndex=function(e,t,r){var n,i=t.stops,o=t.ranges,l=r.dataset.getDataType("clr")===Ns;return!l&&i&&i.length?i.some(function(t,a){var r=t===e;return r?(n=a,!0):void 0}):o&&o.length&&o.some(function(t,r){var i;return i=a(t)?a(e)?t[0]===e[0]&&t[1]===e[1]:t[0]===e:t===e,i?(n=r,!0):void 0}),n},jd.hexToRGB=function(e){if(e&&-1==e.toString().indexOf("#"))return e;var a=t(Ta(e).replace(/#/g,""),16);return"rgb("+(a>>16&255)+","+(a>>8&255)+","+(255&a)+")"},jd.filterSelectionByColor=function(e,t,a,r){if(ut(a)){var n,i=r.systemConf.legend.colorBand.ranges,o=r.axes.clr.scale,l=function(e){var t=e.data||e;return r.dataset.getClr(t)};if(i&&i.length){var s=i[a],c=r.dataset.getDataType("clr")===Ns;if(1===s.length&&!c){var d=et(o.domain());d.splice(0,2),s=[d[2*a],d[2*a+1]]}return e.filter(function(e){var i=l(e);return n=ja(i,r,o),c?n=n&&i===s[0]:(n=n&&i>=s[0]&&i<=s[1],i===s[0]&&(n=n&&Ia(r,a)===o(i)),i===s[1]&&(n=n&&Ia(r,a)===o(i))),t?n:!n})}return e.filter(function(e){var i=l(e);return n=ja(i,r,o,null,a),t?n:!n})}return e},jd.isReversedColorAxis=function(e){var t=e.systemConf.legend;return t.colorAxis&&t.colorAxis.reversed};var Rd="80%",Id="20%",Hd="20%",Bd="100%",Fd="30%",Vd="30%",Nd="50%",_d="100%";So.legend.render=function(e){function t(){var t=d.chartarea(e.chartarea).systemconf(n).color(e.seriesColor).chartObj(e);return t}function a(){i.legpos;(d=t(i))(e.legendarea.element.datum(i));var a,r,n,o,l=e.legendarea.element.node();if(c){var s=q(l);a=s.width,r=s.height,o=s.y,n=s.x}else a=l.offsetWidth,r=l.offsetHeight,o=l.offsetTop,n=l.offsetLeft;var u=null!=i.x&&""!==i.x&&null!=i.y&&""!==i.y;i.marginLeft=+i.marginLeft,i.marginRight=+i.marginRight,i.marginTop=+i.marginTop,i.marginBottom=+i.marginBottom;var h=Tr(i),f="vertical"===h.layout,g=!f,p=0,y=0,v=h.hAlign,m=h.vAlign,x=function(){y=r+i.marginTop+i.marginBottom,e.chartarea.height-=y,e.plotarea.height-=y,"top"===i.vAlign&&(e.chartarea.top+=y,e.plotarea.top+=y),e.legendarea.adjust="x"},b=function(){p=a+i.marginLeft+i.marginRight,e.chartarea.width-=p,e.plotarea.width-=p,"left"===i.hAlign&&(p=a+i.marginLeft+i.marginRight,e.chartarea.left+=p,e.plotarea.left+=p),e.legendarea.adjust="y"};u||(g?"top"===m||"bottom"===m?x():"center"===m&&b():f&&("left"===v||"right"===v?b():"center"===v&&x())),e.legendarea.x=n,e.legendarea.y=o,e.legendarea.width=a,e.legendarea.height=r}function r(){if(s){e.dataset.getDataType("clr")===Ns&&(e.userdata.legend=e.userdata.legend||{},e.userdata.legend.colorBand=e.userdata.legend.colorBand||{},e.userdata.legend.colorBand.ranges||(e.systemConf.legend.colorBand.ranges=e.userdata.legend.colorBand.ranges=Pd.getCategories(e)));var t=e.systemConf.legend.colorBand.ranges;t&&t.length&&(e.userdata.legend.colorBand.ranges=e.systemConf.legend.colorBand.ranges=nr(e,!0));var a=So.scale.getScale(e,o,null,null,null,e.dataset,"clr"),r=a.domain(),n=a.copy();n.range(Pd.getProcessedColorRange(xs(r.length),r,e.systemConf.legend.colorBand,e));var i=e.axes.clr||{};i.scaleType="quantile",i.scale=a,i.indexScale=n,i.component=i.component||So.axis.get(),e.axes.clr=i}else e.axes.clr={}}var n=e.systemConf,i=n.legend,o=e.dataObject,l=e.seriesdata,s=Pd.isQuantileColorScale(e),c=jd.isContinousLegend(e),d=e.legend.component=c?So.legend.continuous.get():So.legend.discrete.get(),u=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?l.some(function(e){return!jd.isHiddenItem(e)&&e.seriesname!==ol}):!(e.chartTypes[0].value==So.charttype.dial);u=u||s;var h=e.canvasarea[null==i||null==i.vAlign?"height":"top"===i.vAlign||"bottom"===i.vAlign?"height":"width"],f=null!=i&&null!=i.x&&""!==i.x&&null!=i.y&&""!==i.y;u=f||ma(e,"legend",h)?u:!1,r(),s&&So.setDefaultOptions("filter",i,e.globalProp,Rr(e),!0),u&&i.enabled===!0?(e.legendarea.show=!0,e.legendarea.element.style("display",""),a()):(e.legendarea.show=!1,e.legendarea.element.style("display",Al),c?null:So.legend.events(e,e.legendarea.element.selectAll("li.series"),{allSelected:!0,isFirstClickAfterDeselection:!1}))},So.legendHighlight=function(e,t){function a(e,t,a){C.selSeriesObj=i(t,a);for(var r=C.getLegendHighlightEffect(t,"selectedSeries"),n=C.selSeriesObj.selectedSeries,o=C.selSeriesObj.charttypes,l=n.length,c=0;l>c;c++){var d=So.charttypenames.get(o[c]),u=C.getEffect(r,d,null,null,t);s(n[c],u,t,"select")}}function r(e,t,a){C.unselSeriesObj=o(t,a);for(var r=C.unselSeriesObj.unselectedSeries,n=C.unselSeriesObj.indices,i=C.unselSeriesObj.charttypes,l=r.length,c=0;l>c;c++){var d=So.charttypenames.get(i[c]),u=C.getLegendHighlightEffect(n[c],"unselectedSeries"),h=C.getEffect(u,d,null,null,n[c]);s(r[c],h,n[c],"unselect")}}function n(){e.container.select(".highlight-canvas").style("visibility","hidden")}function i(a,r){function n(t,a){var o,d;if(Ur(t)){var u=i.selectAll("g.heatmapseries_"+a);o=u.selectAll("path")}else if(Vr(t)){var h=i.selectAll("g.barseries_"+a);o=h.selectAll("path.zcbar")}else if(t==So.charttype.line){var f=i.selectAll("g.lineseries_"+a);o=f.selectAll("path.line"),d=f}else if(Fr(t)||t==So.charttype.web){var g=i.selectAll("g.areaseries_"+a);o=g.selectAll("path.area"),d=g}else{if(Nr(t)){var p=i.selectAll("g.scatterseries_"+a);o=p.selectAll("g.scatter"),o=T(o,!0,r,e);var y=o.selectAll("path.outer"),v=o.selectAll("path.inner");return s.push(y,v),l.push(t,t),d=p,void c.push(d)}if(t===So.charttype.bubblepie){var m=i.selectAll("g.piegroup");o=m.selectAll("path#arc_"+a)}else if(Gr(t)){var m=i.selectAll("g.piegroup");o=m.selectAll(ut(r)?"path":"path#arc_"+a)}else if(t==So.charttype.funnel){var x=i.selectAll("g.funnelgroup"),C=x.selectAll("g.trapezoidgroup");o=C.selectAll(ut(r)?"path":"path#funnel"+a)}else if(t==So.charttype.pyramid){var w=i.selectAll("g.pyramidgroup");o=w.selectAll(ut(r)?"g":"g#section_"+a)}else if(t==So.charttype.wordcloud){var k=i.selectAll("g.wordcloudgroup");o=k.selectAll("text.series_"+a)}else if(-1!=So.chartcategory.hierarchy.indexOf(t)){var O=i.selectAll("g.hierarchychart");o=O.selectAll(".series_"+a)}}o=T(o,!0,r,e),s.push(o),l.push(t),c.push(d),(Fr(t)||t==So.charttype.web)&&n(So.charttype.line,a),t==So.charttype.line&&b(r)&&n(So.charttype.scatter,a)}var i=t.selectAll("g.seriesholder"),o=P(null,"object",a,O).value,l=[],s=[],c=[];return n(o,a),{selectedSeries:s,charttypes:l,parentSeries:c}}function o(a,r){function n(t,a){var d,u;if(e.isAxisCategory||e.isNonAxisMultiSeriesCategory)e.seriesdata.forEach(function(n,h){if(1!=n.disabled&&(ut(r)?h===a:h!==a)){u=t||P(null,"object",h,O).value;var f=ut(r)?a:h;if(Ur(u)){var g=c.selectAll("g.heatmapseries_"+f);d=g.selectAll("path")}else if(Vr(u)){var p=c.selectAll("g.barseries_"+f);d=p.selectAll("path.zcbar")}else if(u==So.charttype.line){var y=c.selectAll("g.lineseries_"+f);d=y.selectAll("path.line")}else if(Fr(u)||u==So.charttype.web){var v=c.selectAll("g.areaseries_"+f);d=v.selectAll("path.area"),i=v}else{if(Nr(u)){var m=c.selectAll("g.scatterseries_"+f);d=m.selectAll("g.scatter"),d=T(d,!1,r,e);var x=d.selectAll("path.outer"),b=d.selectAll("path.inner");return o.push(x,b),s.push(u,u),void l.push(f,f)}if(-1!=So.chartcategory.hierarchy.indexOf(u)){var C=c.selectAll("g.hierarchychart");d=C.selectAll(".series_"+f)}else if(u==So.charttype.wordcloud){var w=c.selectAll("g.wordcloudgroup");d=w.selectAll(".series_"+f)}else u===So.charttype.bubblepie&&(d=c.selectAll("g.piegroup").selectAll("path#arc_"+h))}d=T(d,!1,r,e),o.push(d),l.push(h),s.push(u)}});else{u=t||P(null,"object",a,O).value;var h,f=function(){var t=Rl(this),n=ut(r)?!T(t,!1,r,e).empty():this.getAttribute("id")!=h+a;return n&&(o.push(t),l.push(a),s.push(u)),n};if(Gr(u))h="arc_",d=c.selectAll("g.piegroup").selectAll("path").filter(f);else if(u==So.charttype.funnel)h="funnel",d=c.selectAll("g.trapezoidgroup").selectAll("path").filter(f);else if(u==So.charttype.pyramid){h="section_";var g=c.selectAll("g.pyramidgroup");d=g.selectAll("g").filter(f)}}(Fr(u)||u==So.charttype.web)&&n(So.charttype.line,a),u==So.charttype.line&&b(r)&&n(So.charttype.scatter,a)}var i,o=[],l=[],s=[],c=t.selectAll("g.seriesholder");return n(null,a),{unselectedSeries:o,indices:l,charttypes:s,parentSeries:i}}function l(e,t,a,r,n){if(null!=a&&a.constructor==Object&&null!=e&&null!=e.node()){var i=c(e,r,n),o={},l=m(r);for(var s in a)if(a.hasOwnProperty(s)){l?(o[s]=o[s]||[],e.each(function(){o[s].push(d3.select(this).style(s))})):o[s]=e.styles(s);var d=a[s];ud.SAFARI||ud.IE?e.attr(s,function(e){return So.utils.getVal(d,[e,r])}).style(s,function(e){return So.utils.getVal(d,[e,r])}):e.style(s,function(e){return So.utils.getVal(d,[e,r])})}w[i]=w[i]||o,"select"===n&&C.raiseSelection(t||e)}}function s(t,a,r,n){if(null!=a&&a.constructor==Object&&null!=t&&null!=t.node()){if("svg"!==e.plot.renderer.mode)return void d(t,!1);var i=c(t,r,n),o=w[i],l=m(r);for(var s in o)if(o.hasOwnProperty(s)){var u=o[s],h=function(){return l?u[f++]:u},f=0;ud.SAFARI||ud.IE?t.style(s,h).attr(s,h):t.style(s,h)}}}function c(e,t,a){var r=e.node(),n=r.localName,i=r.getAttribute("class"),o=r.getAttribute("id"),l=n+"_"+t;return null!=i&&(l+="_"+i),null!=o&&(l+="_"+o),null!==a&&(l+="_"+a),l}function d(e,t){e.style("visibility",t?"visible":"hidden")\n}function u(t){return Br(e)?/(area|arearange)/.test(t)?"moody":"strokeEnlarge":/(bar|bullet|gantt|area|arearange|pie|funnel|pyramid|web|sunburst|waterfall)/.test(t)?"hatchfill":"heatmap"===t||"geoheatmap"===t?"tinyHatchfill":/(treemap|wordcloud)/.test(t)?"blackyBorder":"strokeEnlarge"}function h(e,t){return/(line|scatter)/.test(t)&&/(((\\D)+fill$)|illuminate|moody|flip)/.test(e)}function f(e,t,a){C.selSeriesObj=i(t,a);for(var r=C.getLegendHighlightEffect(t,"selectedSeries"),n=C.selSeriesObj.selectedSeries,o=C.selSeriesObj.charttypes,s=C.selSeriesObj.parentSeries,c=n.length,d=0;c>d;d++){var u=So.charttypenames.get(o[d]),h=C.getEffect(r,u,null,null,t);l(n[d],s[d],h,t,"select")}}function g(e,t,a,r){if(e.chartRendered){var n=e.highlightContext||(e.highlightContext=Gn(e,"highlight-canvas")),i=(e.systemConf,e.legendHighlight.getLegendHighlightEffect(a,"selectedSeries"));if(e.dataObject.isPolarAxisCategory&&n.translate(e.plotarea_approx.x,e.plotarea_approx.y),i!==Al){var o=e.chartTypes[a],l=o.name,s=o.value,c=Xn(l),d=e.seriesdata[a],u=null,h=e.isNonAxisMultiSeriesCategory&&!e.dataObject.isPolarAxisCategory?0:a;if(Ko.setRendererProp(e,c,d,h,h,{labelQueue:[]}),S&&(Fr(s)||Nr(s)))u=e.legendHighlight.getEffect(i,s);else switch(l){case"bar":case"bullet":case"area":case"arearange":case"heatmap":case"treemap":case"web":var f=e.systemConf.chart.plot.plotoptions[l].fillOpacity,g=gd[i];g&&(u=zr(g,C.baseClr,f,e));break;case"scatter":case"bubble":case"line":case"wordcloud":u=e.legendHighlight.getEffect(i,s)}Un(e,d,c,n,u,r)}}}function p(e,t,a,r){if(C.previousFilterIndex!==r){var n=e.eventHandler.mapEvents,i=n.getPointsByIndex(a,r),o=e.dataObject.getMapFeaturesByDataPoint(i,"array"),l=n.getHighlightEffect(a,null,"selectedSeries","legend");n.highlightPoints(o,"feature",l),C.previousFilterIndex=r}}function y(){C.previousFilterIndex=null,e.eventHandler.mapEvents.clearHighlightedPoints()}function v(t,a){var r=C.getLegendHighlightEffect(a,"selectedSeries");if(r!==Al){C.baseClr=Ia(e,a);var n=e.chartTypes[a],o=n.name,l=n.value,s=i(a);if(s.selectedSeries[0].length>0)return void d(s.selectedSeries[0],!0);if(e.chartRendered){e.systemConf.chart.plot.animation.enabled=!1,e.systemConf.chart.plot.plotoptions[o].animation.enabled=!1,e.seriesdata[a].plotoptions&&e.seriesdata[a].plotoptions.animation&&(e.seriesdata[a].plotoptions.animation.enabled=!1);var c=zd(o),u=e.systemConf.seriesdata.chartdata[a],h=0;if(l===So.charttype.bar||l===So.charttype.stkdbar)for(var g=0;a>g;g++)n=e.chartTypes[g],l=n.value,void 0!=e.seriesdata[g].disabled&&e.seriesdata[g].disabled||!Vr(l)||(h+=e.seriesdata[g].data.length);return Ko.setRendererProp(e,c,u,a,a,{labelQueue:[],barDatasetIndex:h}),Dd(e,u,c),f(t,a),!0}}}function m(t){var a=P(null,Ws,t,O);return-1!=So.chartcategory.hierarchy.indexOf(a)||S||_r(a)||e.rendererConf&&e.rendererConf[e.isAxisCategory?t:0].thresholdType}function x(){if(e.dataObject.isHierarchy){var t=C.getEffect(C.getLegendHighlightEffect(0,"selectedSeries"),e.chartTypes[0].name),a=Object.keys(t);return a.length>0&&a.some(function(e){return"fill"!==e})}return e.dataObject.noofAreaEnabledSeries||e.dataObject.noofAreaRangeEnabledSeries?!0:void 0}function b(e){return ud.IE||ud.SAFARI||ut(e)}var C={},w={},k=e.defsLocation,O=e.userdata,S=!e.nochartdata&&Pd.isQuantileColorScale(e),A=So.DataProcessor.helpers,P=A.getChartType,T=jd.filterSelectionByColor;return C.highlightSelectedSeries=function(t,a,r){if(C.baseClr=Dr(e,a,r),e.isGeoMap)p(e,t,a,r);else switch(e.plot.renderer.mode){case"svg":f(t,a,r);break;case"canvas":g(e,t,a,r);break;default:v(t,a)}},C.highlightUnselectedSeries=function(e,t,a){for(var r=o(t,a),n=r.unselectedSeries,i=r.indices,s=r.charttypes,c=n.length,d=0;c>d;d++){var u=So.charttypenames.get(s[d]),h=this.getLegendHighlightEffect(i[d],"unselectedSeries"),f=C.getEffect(h,u,null,null,i[d]);l(n[d],null,f,i[d],"unselect")}},C.reset=function(t,i,o,l){if(e.isGeoMap)y();else switch(e.plot.renderer.mode){case"svg":a(t,i,o),r(t,i,o);break;case"canvas":n()}l!==!1&&(w={},this.resetSelection())},C.getLegendHighlightEffect=function(t,a,r){var n=P(null,"string",t,O),i=P(null,Ws,t,O),o=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?e.seriesdata[t].plotoptions:e.seriesdata[0].plotoptions,l=e.systemConf.chart.plot.plotoptions[n],s=e.systemConf.legend.highlightEffect[a],c=o&&o.legendHighlightEffect&&l.legendHighlightEffect?So.utils.getValueOfPlotOptions(o.legendHighlightEffect,l.legendHighlightEffect)(a):l.legendHighlightEffect&&l.legendHighlightEffect[a];if("plot"===r)return c||(s&&s!==Al?s:u(n));var d="selectedSeries"===a&&S&&(Fr(i)||i===So.charttype.line)?"strokeEnlarge(6)":u(n);return c||s||d},C.getEffect=function(t,a,r,n,i,o){function l(){return/(waterfall)/.test(a)?!0:!1}function s(t,r){return"waterfall"==a?Hi(t,e.renderer[r].commonRendererProp().params.categoryColorConfig,C.baseClr):C.baseClr}r=r||C.baseClr;var c=l();r=c?s:r;var d=it(t,e,r,gd,o||"legend");if(d&&d.constructor==Object)return d;t=null===t||h(t,a)?u(a):t;var f={};if(e.patternPallete&&/(flip|moody|illuminate)/.test(t)){var g=e.patternPallete[(i||0)%e.patternPallete.length],p=gd[g]?gd[g]:R(g),y=function(a,n){var i=c?s(a,n):r;if(p.ele)p.bgClr_base=La(i,1,"darker",Kl);else{var o="flip"===t?i:La(i,1,"moody"===t?"darker":"brighter",Kl);if(p.bgClr_base=o,p.stroke_base=o,"flip"===t){p=wd(p);var l=p.bgClr_base;p.bgClr_base=p.stroke_base,p.stroke_base=l;var d=wt(p.bgClr),u=wt(p.stroke);p.bgClr=u,p.stroke=d}}var h=fd.get(pd,"svgPatternFill",p,{chartObj:e});return"url("+k+"#"+h+")"};f.fill=c?y:y()}else if(/(saturate|grayscale|blur|glow|shadow|boxShadow)/.test(t)){var v,m=/(saturate|grayscale)/.test(t)?"colorMatrix":"dropShadow";switch(t){case"saturate":v={type:"saturate",values:"0.3"};break;case"grayscale":v={type:"matrix",values:".33 .33 .33 0 0 .33 .33 .33 0 0 .33 .33 .33 0 0 0 0 0 1 0"};break;case"blur":v={blur:6,source:"SourceGraphic"};break;case"glow":v={blur:3,color:"gold"};break;case"shadow":v={dx:5,dy:5,blur:3};break;case"boxShadow":f.fill=r,f.stroke="white",v={dx:0,dy:0,blur:5,color:"rgba(0,0,0,0.3)"}}var x=fd.get(vd,m,v,{chartObj:e});f.filter="url("+k+"#"+x+")"}else if(/(moody|illuminate)/.test(t)){var b="moody"===t,w=function(e,t){var a=c?s(e,t):r;return-1!=a.indexOf("url")?b?"grey":"silver":La(a,.6,b?"darker":"brighter",Kl)};f.fill=c?w:w()}else if(t.indexOf("strokeEnlarge")>-1){var O=t.split(/(\\d+)/g)[1];if(f["stroke-width"]=ut(O)?+O:3,S&&(f.visibility=El),n)for(var A in n)f[A]=n[A]}else if("fadeOut"===t)f["fill-opacity"]=f["stroke-opacity"]=.3;else if("blackyBorder"===t)f.stroke="rgba(0,0,0,0.5)",f["stroke-width"]=1;else if("invert"===t)f.fill="white",f.stroke=r,f["stroke-width"]=1,f["paint-order"]=null;else if("ridge"===t)f.fill=r,f.stroke="white",f["stroke-width"]=7;else if(t!==Al){var p=gd[t];if(p){var w=function(a,n){var i=c?s(a,n):r,o=gd[t];o.bgClr_base=i,o.stroke="transparent,white,white";var l=fd.get(pd,"svgPatternFill",o,{chartObj:e});return"url("+k+"#"+l+")"};f.fill=c?w:w()}else f.fill=r}return f},C.raiseSelection=function(e){x()&&e.raise()},C.resetSelection=function(){if(x())if(e.dataObject.noofAreaEnabledSeries||e.dataObject.noofAreaRangeEnabledSeries){var a=t.selectAll("g.seriesholder"),r=a.selectAll(function(){return this.childNodes}).filter(function(){return"g"==this.tagName});r.sort(function(e,t){return e.index-t.index})}else{var a=t.selectAll("g.seriesholder").selectAll("g.hierarchychart");a.selectAll("*").sort(function(e,t){return e.index-t.index})}},C},So.legend.discrete=function(){},So.legend.discrete.get=function(){"use strict";function e(n){return n.each(function(n){var c,y=u(o),v=h(o,y),m=n.colorBox,x=n.itemDisabledStyle,b=[n,i.canvas,dd],C=null!=n.x&&""!==n.x&&null!=n.y&&""!==n.y,w=+So.utils.getVal(n.fontSize||i.canvas.fontSize),k=ot(b,"fontColor"),O=o.dataset.getColumnIdx(o.xymultiRenderer||o.isGeoMap||o.isNonAxisMultiSeriesCategory||Pd.isQuantileColorScale(o)?"clr":"x"),S=n.showAs,A=m.position||"left",P=n.expandable||{},T=P.show===!0,E=!!o.renderer.length,L=jd.getFilterBoxSize(m,w),z=L[0],D=L[1],M=Tr(n),j=M.hAlign,R=M.vAlign,I=o.legend.states=o.legend.states||{allSelected:!0,isFirstClickAfterDeselection:!1},H="horizontal"===M.layout;c="wrap"===n.textOverflow?{"word-wrap":"break-word","white-space":"normal","vertical-align":"top"}:{"text-overflow":"ellipsis","vertical-align":"middle"};var B=Rl(this);e.update=function(){B.transition().call(e)};var F={display:"block",position:"absolute",left:null,top:null};B.styles(F);var V=Qt(B,"div",[n],".","class","legendgroup"),N=n.shadow;if(N.show===!0){var _=N.x+"px "+N.y+"px "+N.blur+"px "+N.color;_=N.inset?_+" inset":_,B.style("box-shadow",_)}else B.style("box-shadow",null);var W=$l(n.background.color.toString());B.style("background-color","rgba("+W.r+","+W.g+","+W.b+","+n.background.alpha+")");var Y=n.border;Y.show===!0?B.styles({border:+Y.size+"px "+Y.style+" "+Y.color,"border-radius":Y.radius+"px"}):B.style("border",null),o.filterEffectsID&&n.useChartEffect!==!1&&B.style("filter",o.filterEffectsID?"url(#"+o.filterEffectsID+")":null);var X=n.title,U=X.keepAligned&&H,G=ut(X.margin)?X.margin:3,Z={display:U?"inline-block":null,"vertical-align":"top"},Q=ca("ul",".zcheader",X.show===!0?[X]:[],V,":first-child").styles(Z),q=Qt(Q,"li",[1],".","class","zcheader");Q.styles({"white-space":"normal",overflow:"hidden",width:"","list-style-type":Al,margin:0,padding:0}),q.styles({padding:pt(G),"white-space":"nowrap",overflow:"hidden","text-align":"left","text-overflow":"ellipsis","vertical-align":"middle"});var J=So.legend.selectAllBox(q,o,I),et=J.element,tt=J.options,at=J.size,rt=tt.disabledOpacity;jd.fadeChart(I.allSelected,o,rt);var nt=Qt(q,"span",[1],".","class","legendtitle");nt.text(K(X.text)).style("padding-"+A,tt.show?n.textPadding+"px":null).style("margin-"+A,tt.show?at+"px":null),ta(nt,[X,i.canvas,dd],!0),et.style("margin",function(){var e=Math.max(0,(nt.node().offsetHeight-et.node().offsetHeight)/2)+"px";return e+" 0px 0px 0px"}),q.style("line-height",function(){var e=tt.show?et.node().offsetHeight:0,t=Math.max(nt.node().offsetHeight,e);return t+"px"});var lt=Qt(V,"ul",[n],".","class","legseries");lt.styles({"white-space":"normal","overflow-y":"hidden",width:"","list-style-type":Al,margin:0,padding:0,"-webkit-overflow-scrolling":"touch","font-size":"0px"}).styles(Z);var st;T?(lt.style("overflow","hidden"),st=Qt(V,"div",[1],".","class","expandable"),st.styles({color:P.fontColor,"font-size":So.utils.getVal(P.fontSize)+"px","font-family":P.fontFamily||ot(b,"fontFamily"),"text-align":P.textAlign,cursor:Tl,display:"block",padding:n.itemMargin+"px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}),st.html(it(P.text,0,o)||"0 more...")):V.select(".expandable").empty()||(V.selectAll(".expandable").remove(),lt.style("overflow-y","hidden"),lt.style("overflow-x","hidden"));var ct=Qt(lt,"li",y,".","class","series");Qt(ct,"div",[1],".","class","legendfilterbox"),Qt(ct,"span",[1],".","class","legendlabel"),ct.styles({color:function(e){return g(p(e,I.allSelected,I.isFirstClickAfterDeselection),k,x)},position:"relative","white-space":"nowrap",padding:+n.itemMargin+"px",overflow:"hidden","text-align":"left","line-height":ut(m.size)?ul(w,D)+"px":(ud.OSX||ud.LINUX)&&ud.FIREFOX?"1.2":"normal","font-size":w+"px",width:null==n.itemWidth||""==n.itemWidth?null:n.itemWidth+"px",height:null==n.itemHeight||""==n.itemHeight?null:n.itemHeight+"px","font-family":ot(b,"fontFamily"),"font-weight":ot(b,"fontWeight"),display:function(e){return f(e)?Al:H?"inline-block":"block"}}).styles(c).style("vertical-align","top"),So.legend.events(o,ct,I,rt);var dt=ct.select("span.legendlabel");dt.style("padding-"+A,n.textPadding+"px").style("margin-"+A,z+"px").html(function(e,t){if(Pd.isQuantileColorScale(o)){var a=n.colorBand,r=a.labels;if(r&&r.length)return $(r[t])}var i=o.xymultiRenderer||o.isNonAxisMultiSeriesCategory||o.isGeoMap?t:0,l=o.xymultiRenderer||o.isNonAxisMultiSeriesCategory||o.isGeoMap?0:t;return S?o.dataset.getCustomizedVal(o,S,i,0,l,e,"legend"):o.dataset.getDataPointValue(o,e,O,i,null,"legend")}).attr("title",function(){return n.tooltip?this.textContent:null});var ht={fontColor:function(e){return g(p(e,I.allSelected,I.isFirstClickAfterDeselection),k,x)},textDecoration:function(e){return p(e,I.allSelected,I.isFirstClickAfterDeselection)&&x.strikeout?"line-through":null}};ta(dt,[ht,n,i.canvas,dd],!0);var ft=lt.select("span.legendlabel").node().offsetHeight,gt=0;ut(m.size)||"wrap"===n.textOverflow?gt=(ul(w,D)-D)/2:ft>D&&(gt=(ft-D)/2);var yt=ct.select("div.legendfilterbox");yt.styles({width:z+Sl,height:D+Sl,"float":A,"margin-top":gt+Sl,"border-color":Pl,"background-repeat":"repeat","line-height":D-m.strokeWidth+Sl,"text-align":"center","font-family":m.fontFamily,"font-size":(m.fontSize||w)+Sl,position:"absolute",display:"inline-block","box-sizing":"border-box"}),So.legend.setColorBoxBackground(yt,o,I);var vt,mt,xt=ct.node().offsetHeight,bt=o.legend.expanded,Ct=[],wt=null!=n.itemWidth?+n.itemWidth:null;ct.each(function(){var e=Rl(this).select("div.legendfilterbox"),t=Rl(this).select("span.legendlabel");mt=mt||e.node().getBoundingClientRect().width,vt=t.node().getBoundingClientRect().width;var a=mt+vt;Ct.push(wt||a+2*+n.itemMargin)}),wt=null!=n.itemWidth?wt:Bl(Ct);var kt=n.itemHeight||ul(ft,D)+2*+n.itemMargin;lt.style("overflow-y",(T&&bt||!T)===!0?"auto":"hidden"),lt.style("overflow-x","hidden");var Ot,St=0,At=[];if(l=0,C){var Pt=ka(n.maxHeight||Rd,r.height);T&&(Pt=cl(Pt/xt)*xt);var Tt=o.legendarea.element.node().getBoundingClientRect(),Et=hl(o.canvasarea.width-Tt.width,n.x),Lt=hl(o.canvasarea.height-hl(Tt.height,Pt),n.y);B.style("left",Et+"px"),B.style("top",Lt+"px"),lt.style("max-height",Pt+"px")}else{var zt=ka(n.maxWidth||(H?Bd:Hd),r.width),Dt=hl(ka(X.maxWidth||(U?Nd:_d),zt),zt);V.style("max-width",zt+"px"),Q.style("max-width",Dt+"px");var Mt=Zt(Q).width;if(H){var jt=zt;U&&(jt=zt-Mt,ct.styles({"max-width":jt+"px"}));var Pt=ka(n.maxHeight||Id,r.height),Rt=jt-+n.marginLeft-+n.marginRight-(n.border.show?2*n.border.size:0);for(T&&(Pt=cl(Pt/xt)*xt,xt>Pt&&(Pt=xt));Rt>l&&St<Ct.length;)At[St]=Ct[St],l+=Ct[St],St++;for(var It=function(e,t){return e+t};l>Rt&&St>1;){At=[],St--;for(var Ht=0;Ht<Ct.length;Ht++)At[Ht%St]=Ct[Ht%St];l=At.reduce(It)}var Bt=Ct.length%St,Ft=(Ct.length-Bt)/St,Vt=0==Bt?Ft:Ft+1;lt.styles({height:Vt*kt+2+"px","max-height":Pt+"px","max-width":jt+"px"});var Nt=lt.node().scrollHeight>lt.node().offsetHeight?d:0;s=l+2+Nt,lt.style("width",s+"px");var _t=t(n,B,j,R);Ot=a(lt),ut(st)&&Ot>=v&&(Qt(V,"div",[],".","class","expandable"),_t=t(n,B,j,R)),B.styles({left:_t[0]+"px",top:_t[1]+"px"})}else{St=1;var Pt=ka(n.maxHeight||Rd,r.height);T&&(Pt=cl(Pt/xt)*xt),lt.styles({"max-height":Pt+"px","max-width":zt+"px"});var Nt=lt.node().scrollHeight>lt.node().offsetHeight?d:0;s=wt+2+Nt,Ot=a(lt),ut(st)&&Ot>=v&&Qt(V,"div",[],".","class","expandable"),lt.styles({width:s+"px",height:null}),_t=t(n,B,j,R),B.styles({left:_t[0]+"px",top:_t[1]+"px"})}}if(T){var Wt=Od(Ot,a(lt));if(v>Wt){st.styles({width:s+"px","margin-left":U?Mt+Sl:0});var Yt=it(P.text,v-Wt,o)||v-Wt+" more...";bt?E&&bt&&st.html(function(){return it(P.ontoggle,this,bt,o)||"Show less.."}):st.html(Yt),st.on("click",function(){bt=o.legend.expanded=!o.legend.expanded;var e=it(P.ontoggle,this,bt,o);ut(e)&&(e+=""),bt?(this.innerHTML=e||"Show less..",lt.style("overflow-y","auto")):(lt.node().scrollTop=0,Wt=a(lt),this.innerHTML=e||it(P.text,v-Wt,o)||v-Wt+" more...",lt.style("overflow-y","hidden"))})}else st.remove()}}),e}function t(){return Er(r,o)}function a(e){for(var t=e.node(),a=t.children,r=0,n=0,i=a.length;i>n&&So.utils.elementIsVisible(a[n],t);n++)r++;return r}var r,n,i,o,l=0,s=0,c=ns("legendClick","legendDblclick","legendMouseover","legendMouseout"),d=20,u=jd.getLegendData,h=jd.getLegendDataLength,f=jd.isHiddenItem,g=jd.getClr,p=jd.isDisabled;return e.dispatch=c,e.chartarea=function(t){return arguments.length?(r=t,e):r},e.systemconf=function(t){return arguments.length?(i=t,e):i},e.chartObj=function(t){return arguments.length?(o=t,e):o},e.color=function(t){return arguments.length?(n=t,e):n},e},function(){var e=jd.getLegendData,t=jd.getLegendDataLength,a=jd.isHiddenItem,r=jd.isDisabled,n=jd.isAllEnabled,i=jd.getClr,o=jd.updateData;So.legend.events=function(l,s,c,d){function u(e,t,a){P.toggleItemNUpdateChart(e,t,a,T)}function h(e,t,a){P.highlightSeries(e,t,a,T,l,!0),P.highlightItem(e,t,a,T,!0)}function f(e,t,a){P.highlightSeries(e,t,a,T,l),P.highlightItem(e,t,a,T)}var g,p,y,v,m,x,b,C,w,k,O,S,A,P=l.legend.component,T=l.systemConf.legend,E=T.itemDisabledStyle,L=T.colorBox,z=[T,l.systemConf.canvas,dd],D=[T.itemHoverStyle,T,l.systemConf.canvas,dd],M=ot(z,"fontColor"),j=l.systemConf.legend.events;if(null!=j&&(A=0==lt(j.enabled,!0),m=j.click,x=j.doubleclick,b=j.mouseover,C=j.mouseout,S=j.cursor,w=j.tap,k=j.taphold,O=j.tapholdend),!A){s.style("cursor",S||Tl);var R={chartObj:l},I=function(e,t){if(Yd=null,null==b)h(this,e,t);else{var a=l.zcEventType?k:b;it(a,d3.event,e,t,l)}},H=function(e,t){if(null==C)f(this,e,t);else{var a=l.zcEventType?O:C;it(a,d3.event,e,t,l)}},B=function(e,t){var a=d3.event&&d3.event.touches;if(a&&Qd(),null==m)u(this,e,t);else{var r=l.zcEventType?w:m;it(r,d3.event,e,t,l)}},F=function(e,t){if(null==x);else it(x,d3.event,e,t,l)},V={mousemove:I,mouseout:H,click:B,dblclick:F},N={taphold:I,tapholdend:H,tap:B,dbltap:F};cn(s,V,N,R)}P.filterSeriesNUpdate=function(r,n,i){y||(y=e(i),v=t(i,y));var l=y[n],s=y.filter(function(e,t){if(!c.allSelected&&!c.isFirstClickAfterDeselection){a(e)||(e.disabled=!c.allSelected),o(e,t,i),jd.toggleChartEvents(i,!0),jd.fadeChart(!0,i,d);var r=i.eventHandler.tooltipElement;r.hide(r.element)}return!a(e)&&e.disabled}),u=s.length==v-1&&!l.disabled&&!a(r);u||(l.disabled=!l.disabled,i.dataObject.hierarchical&&!Pd.isQuantileColorScale(i)&&(i.systemConf.seriesdata.chartdata[n].disabled=l.disabled),o(l,n,i),i.addRemoveSeries(l,0,l.yaxiscolumnorder,!c.allSelected&&!c.isFirstClickAfterDeselection)),c.allSelected||c.isFirstClickAfterDeselection||(c.isFirstClickAfterDeselection=!0)},P.toggleItemNUpdateChart=function(t,a,r,o){var s=l.legendarea.element;if(g=g||s.selectAll("div.legendfilterbox"),p=p||s.selectAll("div.selectAll"),o.filter.enabled){l.legendHighlight.resetSelection(),P.filterSeriesNUpdate(a,r,l);var d,u=Rl(t),f=i(a.disabled,M,E);a.disabled&&(P.highlightItem(t,a,r,o,!1,!0),E.strikeout&&(d="line-through")),u.selectAll(".legendlabel").styles({color:f,"text-decoration":d}),So.legend.setColorBoxBackground(g,l,c),null==d3.event.touches&&h(t,a,r)}c.allSelected||(c.allSelected=!c.allSelected),p.empty()||(y=y||e(l),p.html(n(y,c.allSelected)?L.text||"&#10003;":(E.colorBox||{}).text||""))},P.highlightItem=function(e,t,a,n,i,o){if((o||!r(t,c.allSelected,c.isFirstClickAfterDeselection))&&n.itemHoverStyle){var l=Rl(e);l.style("background-color",(i?n.itemHoverStyle:n).backgroundColor),ta(l.selectAll("span"),i?D:z,!0)}},P.highlightSeries=function(e,t,a,r,n,i){if(n.highlightContext=null,Pd.isQuantileColorScale(n)){var o=n.legendHighlight,l=a;i?t.disabled||n.seriesdata.forEach(function(e,t){o.highlightSelectedSeries(r,t,l),o.highlightUnselectedSeries(r,t,l)}):n.seriesdata.forEach(function(e,t){o.reset(r,t,l,n.seriesdata.length-1===t)})}else{var o=n.legendHighlight;i?t.disabled||(o.highlightSelectedSeries(r,a),o.highlightUnselectedSeries(r,a)):o.reset(r,a)}}}}(),function(){function e(e,r,n,i,l,s){n=o(n),i=o(i);var c=l.systemConf.legend,d=c.colorBox,u=c.shapes,h=(u?u[s%u.length]:null)||d.shape,f=h||!So.legend.getHTML4ChartTypeSymbol||Pd.isQuantileColorScale(l)&&l.dataObject.isCombinationalChart?t(e,r,n,i,h,d):So.legend.getHTML4ChartTypeSymbol(e,r,i,l,s);return a(f)?\'url("\'+f+\'")\':jr(f,e,r)}function t(e,t,a,r,n,i){var l=_(n||"square")(10);return"<path d=\'"+l+"\' transform=\'translate("+e/2+","+t/2+") scale("+e/(10+2*lt(i.strokeWidth,1))+")\' style=\'stroke: "+o(a)+"; fill: "+o(r)+"; fill-opacity: "+i.fillOpacity+"; stroke-width: "+lt(i.strokeWidth,1)+"px; stroke-opacity: "+i.strokeOpacity+";\'></path>"}function a(e){return e&&!("<"===e[0]||0===e.indexOf(\'url("data\'))}function r(e,t,a,r){var n=document.createElement("canvas"),i=n.getContext("2d");n.width=t,n.height=a;var o=new Image;o.src=e.substring(5,e.length-2),o.width=t,o.height=a,o.onload=function(){i.drawImage(o,0,0,t,a);for(var e=i.getImageData(0,0,n.width,n.height),l=0;l<e.height;l++)for(var s=0;s<e.width;s++){var c=4*l*e.width+4*s,d=(e.data[c]+e.data[c+1]+e.data[c+2])/3;e.data[c]=d,e.data[c+1]=d,e.data[c+2]=d}i.putImageData(e,0,0,0,0,e.width,e.height),r.style("background","url("+n.toDataURL()+")")}}var n=jd.getClr,i=jd.isDisabled,o=jd.hexToRGB;So.legend.setColorBoxBackground=function(t,o,l){var s,c,d,u,h,f,g,p,y,v=o.systemConf.legend,m=v.colorBox,x=v.itemDisabledStyle,b=x.colorBox||{},C=v.imagePallete?So.legutil.imagePallete.get(v.imagePallete):null,w=ut(C)&&C.length>0,k=o.patternPallete,O=k&&k.length,S=!o.patternPallete&&(ut(v.shapes)||"square"!==m.shape),A=b.grayScale,P=+So.utils.getVal(v.fontSize||o.systemConf.canvas.fontSize),T=jd.getFilterBoxSize(m,P),E=T[0],L=T[1],z=null;t.each(function(t,v){if(p=Rl(this),y=i(t,l.allSelected,l.isFirstClickAfterDeselection),u=n(y,Od(m.strokeColor,Ia(o,v)),x),s=d=n(y,Od(m.fillColor,Ia(o,v)),x),h=m.borderRadius,f=y?b.fillOpacity:null,g=null,y&&A&&ud.IE&&(d=Fa(d),u=Fa(u)),w)if(y&&x.color)s=x.color;else{s=\'url("\'+C[v%C.length]+\'")\';var P=o.patternImageSizes&&o.patternImageSizes;z=P[v]?P[v%P.length][0]+Sl+" "+P[v%P.length][1]+Sl:null}else if(S)s=e(E,L,u,s,o,v),h=null;else if(O){var T=k[v%O],D=gd[T]?gd[T]:R(T);D.bgClr_base=d,D.stroke_base=d,D.width=E,D.customStaticClr=o.userdata.legend.customPatternColor,D.x=D.y=0;var M="zp"+Z(D,"legelegendndFill"),j=pd.svgPatternFill(D,M,null,!0,!0,o,o.getPatternSvg(),"objectBoundingBox"),I=j.width,H=j.height;s=\'url("\'+j.url+\'")\',z=(E>2*I?I:E/2)+Sl+" "+(L>2*H?H:L/2)+Sl,c=m.strokeWidth+Sl+"solid "+u}else c=m.strokeWidth+Sl+"solid "+u;if(a(s)&&(z=z||E+Sl+" "+L+Sl,y&&A&&ud.IE)){var B=z.split("px").map(function(e){return+e});r(s,B[0],B[1],p)}p.styles({background:s,"background-size":z,color:y?b.fontColor:m.fontColor||"white",border:c,"border-radius":ut(h)?h+Sl:null,opacity:y?f:null,filter:y&&A&&!ud.IE?"grayscale(1)":null}).html(y?b.text||"":m.text)})}}(),function(){function e(e){return function(t){switch(e){case Tc:case Lc:case Ec:case zc:return"M"+.5*-t+" "+.5*t+" L"+.5*-t+" "+.2*-t+" L"+.25*-t+" "+.2*-t+" L"+.25*-t+" "+.5*t+"Z  M"+.125*-t+" "+.5*t+" L"+.125*-t+" "+.5*-t+" L"+.125*t+" "+.5*-t+" L"+.125*t+" "+.5*t+"Z  M"+.25*t+" "+.5*t+" L"+.25*t+" "+.1*t+" L"+.5*t+" "+.1*t+" L"+.5*t+" "+.5*t+"Z";case Dc:case Mc:return"M"+.5*-t+" "+.5*t+" L"+.5*-t+" "+.28*t+" L"+.24*-t+" "+.08*t+" L"+.13*-t+" "+.19*t+" L"+.07*t+" "+.14*-t+" L"+.23*t+" "+.012*t+" L"+.5*t+" "+.5*-t+" L"+.5*t+" "+.5*t+"Z";case Bc:case Hc:case Yc:return"M"+.045*t+" "+.045*-t+" L"+.5*t+" "+.045*-t+" A "+.455*t+" "+.455*t+" 0 0 0 "+.045*t+" "+.5*-t+"Z M"+.045*-t+" "+.045*t+" L"+.045*-t+" "+.41*-t+" A "+.455*t+" "+.455*t+" 1 1 0 "+.41*t+" "+.045*t+"Z";case Vc:return"M"+.5*-t+" "+.5*-t+" L "+.5*t+" "+.5*-t+" L "+.15*t+" "+.2*t+" L "+.15*t+" "+.5*t+" L "+.15*-t+" "+.5*t+" L "+.15*-t+" "+.2*t+"Z";case Nc:return"M0 "+.5*-t+" L"+.23*t+" "+.06*-t+" L"+.23*-t+" "+.06*-t+"Z M"+.5*-t+" "+.5*t+" L"+.5*t+" "+.5*t+" L"+.27*t+" 0 L"+.27*-t+" 0Z";case _c:return _("line")(t);case Uc:return _("square")(t);case Rc:case Ic:case Xc:case jc:default:return _(e)(t)}}}function t(e,t,a){var r,n=ot([e,t],"dashStyle"),i=P(n,.75*a);if(i&&i.length){var o=T(ot([e,t],"lineCap"),n);r="stroke-dasharray:"+i+";stroke-linecap:"+o+";"}return r}function a(t,a,r,n,o,l,s){var c=e(t.symbol)(l),d="stroke:"+i(t[o?o+"StrokeColor":"strokeColor"]||n)+";stroke-width:"+lt(t[o?o+"StrokeWidth":"strokeWidth"],1)+";stroke-opacity:"+lt(t[o?o+"StrokeOpacity":"strokeOpacity"],1)+";fill:"+(s||i(t[o?o+"FillColor":"fillColor"]||n))+";fill-opacity:"+lt(t[o?o+"FillOpacity":"fillOpacity"],1)+";";return"<path d=\'"+c+"\' transform=\'translate("+a/2+","+r/2+")\' style=\'"+d+"\'></path>"}function r(e,t,a,r,n,i,o){var l,s=e&&e.gradients?Cd(t.gradients||{},e.gradients,!0):t.gradients||{},c="",d=i.getPatternSvg();if("linear"===s.type||"radial"===s.type){var u=z(s,[a,r],n,1),h={offset:o,chartObj:i},f=fd.get(yd,"svgGradientFill",u,h),g=new XMLSerializer,p=g.serializeToString(d.select("#"+f).node());p=p.replace(/"/g,"\'"),c="<defs>"+p+"</defs>",l="url("+(ud.IE?"#":"%23")+f+")"}return{defs:c,fill:l}}function n(e,t,a,r,n,o){var l=e.borderRadius;l&&(l=hl(hl(t,a)/4,l));var s=Jt(-t/2,-a/2,t,a,n.dataObject.getTransRectValue("radius",null,null,null,null,l)),c="stroke:"+i(e.strokeColor||r)+";stroke-width:"+lt(e.strokeWidth,1)+";stroke-opacity:"+lt(e.strokeOpacity,1)+";fill:"+(o||i(e.fillColor||r))+";fill-opacity:"+lt(e.fillOpacity,1)+";";return"<path d=\'"+s+"\' transform=\'translate("+t/2+","+a/2+")\' style=\'"+c+"\'></path>"}var i=jd.hexToRGB;So.legend.getHTML4ChartTypeSymbol=function(i,o,l,s,c){var d=Pd.isQuantileColorScale(s),u=(s.isAxisCategory||s.dataObject.isPolarAxisCategory||s.dataObject.isHierarchy)&&!d?c:0,h=s.chartTypes[u].name,f=s.systemConf.chart.plot.plotoptions[h],g=d?El:s.seriesdata[u].plotoptions,p=e(h)(i);switch(h){case jc:case _c:var y=.15*o,v=g&&g.marker?Cd(f.marker,g.marker,!0):f.marker,m=t(g,f,y),x="",b="stroke:"+l+";stroke-width:"+y+";";if(m)b+=m;else if(0!=v.enabled){var C=h===_c?.5:.65,w=h===_c?.25:.45;x=a(v,i,o,l,"outer",hl(i,o)*C),x+=a(v,i,o,l,"inner",hl(i,o)*w)}return"<path d=\'"+p+"\' transform=\'translate("+i/2+","+o/2+")\' style=\'"+b+"\'></path>"+x;case Rc:case Ic:var v=g&&g.marker?Cd(f.marker,g.marker,!0):f.marker;if(v.imageUrl)return v.imageUrl;var k=hl(i,o)-lt(v.outerStrokeWidth,1),O=.5*hl(i,o)-lt(v.innerStrokeWidth,1),S=r(g,f,k,k,v.outerFillColor||l,s,h),A=r(g,f,O,O,v.innerFillColor||l,s,h);return S.defs+a(v,i,o,l,"outer",k,S.fill)+A.defs+a(v,i,o,l,"inner",O,A.fill);case Xc:var P=hl(i,o)-lt(f.strokeWidth,1),T=r(g,f,P,P,l,s,h);return T.defs+a(f,i,o,l,null,P,T.fill);case Wc:if(f.symbol&&_(f.symbol)){var P=hl(i,o)-lt(f.strokeWidth,1),T=r(g,f,P,P,l,s,h);return T.defs+a(f,i,o,l,null,P,T.fill)}var y=lt(f.strokeWidth,1),E=i-y,L=o-y,T=r(g,f,E,L,l,s,h);return T.defs+n(f,E,L,l,s,T.fill);default:var T=r(g,f,i,o,l,s,h),z=Od(g&&g.fillOpacity,f.fillOpacity,1),b="fill:"+(T.fill||l)+";fill-opacity:"+z+";";return T.defs+"<path d=\'"+p+"\' transform=\'translate("+i/2+","+o/2+")\' style=\'"+b+"\'></path>"}}}(),function(){var e={show:!1,strokeColor:"#262626",strokeWidth:1,fillColor:Pl,fontColor:"#262626",fillOpacity:1,strokeOpacity:1,disabledOpacity:.3,tooltip:{enabled:!0,color:"red",content:"Select atleast one legend"},events:{click:null}},t=jd.getLegendData,a=jd.isDisabled,r=jd.isAllEnabled,n=jd.getClr,i=jd.toggleChartEvents,o=jd.updateData;So.legend.selectAllBox=function(l,s,c){function d(){(!c.allSelected||r(m,c.allSelected))&&(c.allSelected=!c.allSelected),c.isFirstClickAfterDeselection=!1,R.html(c.allSelected?Od(C.text,b.text)||"&#10003;":k.text||"");var e=C.events[s.zcEventType||"click"];it(e,d3.event,c.allSelected,s)}function u(){if(h(),f(),i(s,c.allSelected),jd.fadeChart(c.allSelected,s,j),M.enabled){var e=s.eventHandler.tooltipElement;p||(p=e.element.selectAll("div#tooltipcontent").style("color"));var t=s.systemConf.tooltip,a=pt(ut(t.borderWidth)?t.borderWidth:1);if(c.allSelected){var e=s.eventHandler.tooltipElement;g(e,null,a,p),e.hide(e.element)}else{var r=Qr(D,d3.event);r={x:r[0],y:r[1]};var n=un(d3.event),o=tn(n,r,0,0,s,{},!1,!1,!1,!0,!1),l=r.x-n.clientX,d=r.y-n.clientY;o.dLeft=l,o.dTop=d,o.helpers.color=M.color,o.helpers.backgroundColor=M.backgroundColor,o.helpers.borderColor=M.borderColor,g(e,"center",null,M.fontColor||p),e.show(s,o,M.content,!1,o.helpers),setTimeout(function(){var e=s.eventHandler.tooltipElement;g(e,null,a,p),e.hide(e.element)},4e3)}}}function h(){m||(m=t(s)),c.allSelected&&(m.forEach(function(e,t){e.disabled=!c.allSelected,o(e,t,s)}),s.addRemoveSeries(m,0,[0,0],!0))}function f(){if(!v){var e=s.legendarea.element;v=e.selectAll("div.legendfilterbox"),y=e.selectAll("span.legendlabel")}So.legend.setColorBoxBackground(v,s,c);var t,a;c.allSelected?(t=A,a=null):(t=n(!0,A,w),a=JSON.parse(w.strikeout)?"line-through":null),y.styles({color:t,"text-decoration":a})}function g(e,t,a,r){e.element.attr("align",t).styles({"border-width":a}),e.element.selectAll("div#tooltipcontent").style("color",r)}e.events.click=s.legend.component.toggleSelectAll=u;var p,y,v,m=t(s),x=s.systemConf.legend,b=x.colorBox,C=Cd(e,x.selectAllBox,!0),w=x.itemDisabledStyle,k=w.colorBox||{},O=[x,s.systemConf.canvas,dd],S=+So.utils.getVal(x.fontSize||s.systemConf.canvas.fontSize),A=ot(O,"fontColor"),P=(x.imagePallete?So.legutil.imagePallete.get(x.imagePallete):null,Cd(b,C,!0)),T=jd.getFilterBoxSize(P,S),E=T[0],L=T[1],z=Math.min(E,L)-(x.imagePallete||!ut(x.shapes)||"square"===b.shape?0:+b.strokeWidth),D=s.container.node(),M=C.tooltip,j=C.disabledOpacity;c.allSelected=ut(C.selected)?C.selected:c.allSelected;var R=Qt(l,"div",[1],".","class","selectAll"),I=Od(C.shape,b.shape),H="square"!==I,B={display:C.show?"inline-block":Al,width:z+"px",height:z+"px","float":"left",background:C.fillColor,position:"absolute","box-sizing":"border-box","text-align":"center","line-height":z+"px","font-family":b.fontFamily,"font-size":(b.fontSize||S-2)+"px",color:function(e){return C.fontColor||(a(e,c.allSelected,c.isFirstClickAfterDeselection)?k.fontColor:b.fontColor)}};if(H){var F=Mr(z,z,C.strokeColor,C.fillColor,I,C);B.background=jr(F,z,z),B.border="none"}else B.border=C.strokeWidth+"px solid "+C.strokeColor;R.styles(B).html(function(){return r(m,c.allSelected)?Od(C.text,b.text)||"&#10003;":k.text||""}),l.style("cursor",C.show?Tl:null);var V={click:d},N={tap:d};if(C.show?cn(l,V,N):(dn(l,null,V),dn(l,null,N)),s.eventHandler){var _=s.eventHandler.tooltipElement;_.hide(_.element)}return{element:R,options:C,size:z}}}(),function(){function e(e,a){var r=a.systemConf,n=r.legend.title,i=n.show,o=s(r),l=o.left,c=o.right,d=o.top,u=o.bottom;e.attr("transform",i?"translate("+l+","+d+")":El);var h=Qt(e,"text",i?[1]:[],".","class","legendtitle");ta(e,[n,r.canvas,dd]),h.text(K(n.text)).attr("dy","0.91em"),i&&t(h,a);var f=q(h.node()),g=Qt(e,"path",i?[1]:[],".","class","zchart-legend-title-background");g.attr("d",Jt(f.x-l,f.y-d,f.width+l+c,f.height+d+u,It(0))).style("opacity",0)}function t(e,t){var a=t.chartarea,r=t.systemConf.legend,n=jd.getOrient(r),i=s(t.systemConf),o=a.width-r.marginLeft-r.marginRight,l=a.height-r.marginTop-r.marginBottom,c=n===Cc||n===bc?Bd:Hd,d=n===Cc||n===bc?Id:Rd,u=ka(r.maxWidth||c,o),h=ka(r.maxHeight||d,l),f=q(t.legendarea.element.node()),g=e.node(),p=q(g),y={left:f.x+i.left,top:f.y+i.top,right:f.x+i.left+u-i.right,bottom:f.y+i.top+h-i.bottom},v={left:5,right:5,top:5,bottom:5},m="..",x={left:0,top:0,width:p.width,height:p.height};qt(g,g.textContent,x,y,bc,m,v),g.textContent===m&&e.text("")}function a(e,t,a){var r=t.systemConf.legend,n=r.background,i=r.colorBand,o=Rt(i.padding),l=r.border,s=l.show,c=Od(l.strokeWidth,1),d=P(l.style,c),u=T(l.lineCap,l.style),h=It(s?l.radius:void 0);e.attrs({d:Jt(a.x-o.left,a.y-o.top,a.width+o.left+o.right,a.height+o.top+o.bottom,h)}).styles({stroke:l.color,"stroke-width":s?l.size:0,"stroke-dasharray":d,"stroke-linecap":u,fill:n.color||Pl,"fill-opacity":n.alpha})}function r(e,t,a,r){e===Cc?a[1]+=t:e===bc?r[1]+=t:e===mc?a[0]+=t:r[0]+=t}function n(e,t){var a=t.selectAll("g.zchart-minmaxlabels,line.majorTicks");a.style("display",Al);var r=wd(q(t.node()));return a.style("display",null),r}function i(e,t,a,r,n,i,o,l){var s=t.align,c=[];return c[0]=a===mc?s===xc?i.width:s===mc?ul(i.width,l.width):ul(i.width,l.width/2):a===xc?s===xc?0:s===mc?l.width:l.width/2:s===Cc||s===bc?0:-l.x,c[1]=o.height,a===mc||a===xc?c[1]-=hl(0,l.y):a===bc&&s===Cc&&(c[1]+=l.height),a===Cc&&(c[1]+=i.height),c}function o(e,t,a,r,n,i,o,s,c){var d=t.minmaxlabels,u=d.align,h=[];return h[0]=a===mc?u===xc?i.width:u===mc?ul(i.width,s.width):ul(i.width,s.width/2):a===xc?u===xc?c[0]:u===mc?c[0]+s.width:c[0]+s.width/2:u===Cc||u===bc?c[0]:c[0]-s.x,h[1]=o.height,a===mc||a===xc?h[1]-=hl(0,s.y):a===bc&&u===Cc&&(h[1]+=s.height),h[1]+=a===Cc?i.height:c[1],h=l(h,t.axisline,a)}function l(e,t,a){var r=t.show?lt(t.strokeWidth,1):0,n=r-.5;\nreturn a===mc?e[0]-=n:a===xc?e[0]+=n:a===bc?e[1]+=n:e[1]-=n,e}function s(e){var t=e.legend.title,a=0;return t.show&&(a=ut(t.margin)?t.margin:3),Rt(a)}function c(e){var t={label:{},grid:{color:Pl},ticklabel:{fontColor:e.fontColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,tooltip:e.tooltip},minmaxlabels:{padding:2,align:"center",fontSize:e.fontSize},tickmark:{color:"#B0B0B0",size:3},axisline:{show:!1}},a=e.colorAxis||{};return a=Cd(t,a,!0)}function d(e,t,a,l,s,c,d,u,h){var f=l.systemConf,g=q(a.node()),p=jd.getOrient(l.systemConf.legend),y=n(p,e),v=q(e.selectAll("g.zchart-minmaxlabels").node()),m=i(f,s.minmaxlabels,p,c,d,y,g,v),x=o(f,s,p,c,d,y,g,v,u);return r(p,h,m,x),t.attr("transform","translate("+m[0]+","+m[1]+")"),e.attr("transform","translate("+x[0]+","+x[1]+")"),{axisGroupPosition:x,bandGroupPosition:m}}So.legend.continuous=function(){},So.legend.continuous.get=function(){"use strict";function t(n){return n.each(function(t){function n(){var e=Er(o,r);return p?[e[0]-b.left,e[1]+b.top]:(v===xc?e[0]-=b.right:v===mc&&(e[0]+=b.right),m===bc?e[1]-=b.bottom:m===Cc&&(e[1]+=b.top),e)}var i,l=s(r),h=(u(r,l),r.systemConf.legend),f=h.colorBand,g=c(h),p=ut(h.x)&&ut(h.y),y=Tr(h),v=y.hAlign,m=y.vAlign,x=lt(f.strokeWidth,1)/2,b=Rt(f.padding),C=g.show===!1,w=Rl(this),k=Qt(w,"path",[1],".","class","zchart-background"),O=Qt(w,"g",[1],".","class","zcheader"),S=Qt(w,"path",[1],".","class","colorband"),A=Qt(w,"g",C?[]:[1],".","class","legend-axis");k.style("display",Al),w.selectAll(".brush,.highlight").style("display",Al),e(O,r),So.legend.colorBand(S,r),So.legend.colorAxis(A,r,g);var P=C?[0,0]:$t(A).translate,T=d(A,S,O,r,g,v,m,P,x),E=n();C||(So.legend.colorAxis.handleOverlapNOverlap(A,T.axisGroupPosition,E,r,o,g),T=d(A,S,O,r,g,v,m,P,x),e(O,r),E=n()),w.selectAll(".brush,.highlight").style("display",El);new Wd(r,{position:T.bandGroupPosition});So.legend.continuous.events(r,{position:T.bandGroupPosition}),E=n(),w.attr("transform","translate("+E[0]+","+E[1]+")"),i=q(w.node()),a(k,r,i),k.style("display",null),r.filterEffectsID&&t.useChartEffect!==!1&&w.style("filter",r.filterEffectsID?"url(#"+r.filterEffectsID+")":null)}),t}var r,n,i,o,l=ns("legendClick","legendDblclick","legendMouseover","legendMouseout"),s=jd.getLegendData,u=jd.getLegendDataLength;return t.dispatch=l,t.chartarea=function(e){return arguments.length?(o=e,t):o},t.systemconf=function(e){return arguments.length?(n=e,t):n},t.chartObj=function(e){return arguments.length?(r=e,t):r},t.color=function(e){return arguments.length?(i=e,t):i},t}}(),So.legend.colorBand=function(e,t){var a,r,n,i,o=t.systemConf.legend,l=o.colorBand,s=jd.getColorBandDimension(t),c=s[0],d=s[1],u=Tr(o),h="horizontal"===u.layout,f=l.ranges&&l.ranges.length,g=jd.isReversedColorAxis(t),p=It(l.borderRadius);g?(a=h?100:0,i=h?0:100):(r=h?100:0,n=h?0:100);var y,v,m,x=t.axes.clr.scale;if(f){v=x.range().filter(function(e){return e!==El});for(var b=[],C=[],w=0;f>w;w++)b.push(w,w+1),C.push(v[w],v[w]);y=b,v=C,m=Gl().domain(y).range([0,100])}else y=x.domain(),v=x.range(),y[0]===y[1]&&(v=[v[0],v[0]]),m=Yl().domain([y[0],y[y.length-1]]).range([0,100]);var k={type:"linear",options:{linear:{x1:a,y1:n,x2:r,y2:i,stopColor:v,stopOffset:y.map(function(e){return m(e)+"%"})}}},O=[0,c],S=z(k,O),A={chartObj:t},P=fd.get(yd,"svgGradientFill",S,A);e.attr("d",Jt(0,0,c,d,p)).styles({stroke:l.strokeColor,"stroke-opacity":l.strokeOpacity,"stroke-width":l.strokeWidth,"fill-opacity":l.fillOpacity,fill:"url("+t.defsLocation+"#"+P+")","pointer-events":"visible"})},function(){function e(e,t,a,r){var n,i,o,l;return n=i=o=l=0,e==bc?(i=-r,l=-a-r):e==Cc?(i=r,l=a+r):e==mc?(n=t+r,o=r):e==xc&&(n=-t-r,o=-r),{x1:n,y1:i,x2:o,y2:l}}function t(e,t,r,n,i){var l=n.systemConf.legend,s=Tr(l),c=[],d=o(n,i),u={left:d.x1,top:d.y1,right:d.x2,bottom:d.y2},h={left:5,right:5,top:5,bottom:5},f="..";if(e.each(function(e,n){var i=a(this,t,r),o={left:i.x1,top:i.y1,width:i.width,height:i.height};qt(this,this.textContent,o,u,bc,f,h),this.textContent===f&&Rl(this).text(""),c[n]=a(this,t,r)}),"horizontal"===s.layout&&c.length&&_a(c[0],c[1])){var g=c[1].x2-c[0].x1;e.each(function(e,n){var i=a(this,t,r),o={left:i.x1,top:i.y1,width:i.width,height:i.height},l=wd(u);0===n?l.right=i.x1+g/2:l.left=i.x2-g/2,qt(this,this.textContent,o,l,bc,f,h),this.textContent===f&&Rl(this).text(""),c[n]=a(this,t,r)})}return c}function a(e,t,a,r){r=r||[0,0];var n=q(e),i={x1:n.x+t[0]+a[0]+r[0],y1:n.y+t[1]+a[1]+r[1],width:n.width,height:n.height};return i.x2=i.x1+n.width,i.y2=i.y1+n.height,i}function r(e,t,r,o,l){var s=q(l.legendarea.element.node()),c=[],d=[],u=0;e.each(function(){d.push(q(this).width)}),d=Bl(d),e.each(function(){var e=$t(this.parentNode).translate;c.push(a(this,t,r,e)),i(this,l,e,c[u],d,s)&&(c[u]=a(this,t,r,e)),n(this,o,c,u)&&(c[u]={x1:0,y1:0,x2:0,y2:0}),u++})}function n(e,t,a,r){for(var n,i=r-1;i>=0&&!n;i--)n=_a(a[i],a[r]);return(t.length?_a(a[r],t[0])||_a(a[r],t[1]):!1)||n?(Rl(e.parentNode).style("display",Al),!0):void 0}function i(e,t,a,r,n,i){var l=jd.getOrient(t.systemConf.legend),s=l===xc||l===mc?1:.5,c=o(t,t.chartarea),d=t.systemConf.legend.title.show?q(t.legendarea.element.selectAll(".legendtitle").node()).width:0,u=(c.x2-c.x1-(i.width-ul(n,d)))*s,h=c.y2-c.y1,f={left:a[0],top:a[1],right:a[0]+u,bottom:a[1]+h},g={left:5,right:5,top:5,bottom:5},p="..";if(r.x2-r.x1>u){var y={left:a[0],top:a[1],width:r.width,height:r.height};return qt(e,e.textContent,y,f,bc,p,g),e.textContent===p&&(Rl(e).text(""),Rl(e.parentNode).style("opacity",0)),!0}}function o(e,t){var a=e.systemConf.legend,r=jd.getOrient(a),n=Tr(a),i=("horizontal"===n.layout,n.hAlign),o=(n.vAlign,t.width-a.marginLeft-a.marginRight),l=t.height-a.marginTop-a.marginBottom,s=t.left+a.marginLeft,c=t.top+a.marginTop,d=Lr(a),u=d.width,h=d.height,f=ka(a.maxWidth||u,o),g=ka(a.maxHeight||h,l),p={};return r===bc?(p.y1=c+l-g,p.x1=i===mc?s:i===xc?s+o-f:s+(o-f)/2):r===Cc?(p.y1=c,p.x1=i===mc?s:i===xc?s+o-f:s+(o-f)/2):r===xc?(p.y1=c,p.x1=s+o-f):(p.y1=c,p.x1=s),p.x2=p.x1+f,p.y2=p.y1+g,p}function l(e,t,a,r,n){var i=e.selectAll("path.domain");if(t.show){var o=lt(t.strokeWidth,1),l=0,s=0;a===mc?l=o/2:a===xc?l=-o/2:s=a===bc?-o/2:o/2,i.attr("transform","translate("+l+","+s+")").attr("d",r?"M0,0 L"+n[0]+",0":"M0,0 L0,"+n[1]).styles({"stroke-dasharray":P(t.style,o),"stroke-linecap":T(t.lineCap,t.style)})}else i.remove()}So.legend.colorAxis=function(t,a,r){var n,i=a.systemConf.legend,o=i.colorBand,s=r.minmaxlabels,c=r.axisline,d=c.show?lt(c.strokeWidth,1):0,u=jd.getColorBandDimension(a),h=u[0],f=u[1],g=o.type,p=jd.getOrient(i),y=Tr(i),v=a.dataset.getColumn("clr"),m=v.datatype,x=v[m],b="-",C=a.axes.clr.component,w=a.axes.clr.scale,k=w.domain(),O=s.show&&s.excludeIntervals?[]:k,S=jd.isReversedColorAxis(a),A="horizontal"===y.layout,P=A?[0,h]:[f,0],T=s.show&&s.excludeIntervals&&p===Cc?[0,0]:p===bc||p===Cc?[0,f]:[h,0],E=o.ranges&&o.ranges.length,L=o.labels;if(a.axes.clr.ticks=So.axis.ticks(a,r,"clr",0,p,a.chartarea),S&&P.reverse(),E){k=nr(a);var z=a.dataset.getDataType("clr")===Ns;"continuous"!==g||z?n=Xl().domain(k).range(P).padding(0):(k=Jl(k),o.minRange!==k[0]&&k.splice(0,0,o.minRange),n=Gl().domain(k).range(P))}else{if(O[0]===O[1]){var D=fl(P[0]-P[1]);P=[D/2,D/2]}n=Yl().domain([k[0],k[k.length-1]]).range(P)}n.origRange=P,O=s.show&&s.excludeIntervals?[]:k,C.orient(p).scale(n).tickSize(lt(r.tickmark.size,6),0).majorTicks(e(p,h,f,d)).systemconf(a.systemConf).chartObj(a).tickValues(O).columnIndices([a.dataset.getColumnIdx("clr")]).tickFormat(function(e){if(L&&L.length){var t=jd.getLabelIndex(e,o,a);if(ut(t))return this.__formattedValue=L[t],d3.select(this).text(L[t])}var r=gn(x,e,m,a,"legend",null,b);this.__formattedValue=r,d3.select(this).text(r)}),t.datum(r).attr("transform","translate("+T[0]+","+T[1]+")").call(C,"clr"),t.selectAll("g.tick").style("display",null),t.selectAll("line.minorTicks").attr(A?"x2":"y2",null),t.selectAll("text.ticklabel").style("pointer-events","visible"),l(t,c,p,A,u),t.call(ZC_legend_minmaxLabels,u,r,a,p)},So.legend.colorAxis.handleOverlapNOverlap=function(e,a,n,i,o,l){var s=e.selectAll("g.zchart-minmaxlabels").selectAll("text"),c=e.selectAll("g.tick").selectAll("text"),d=t(s,a,n,i,o);r(c,a,n,d,i,o),l.ticklabel.tooltip===!0&&c.each(function(){aa(d3.select(this),this.__formattedValue)})}}();!function(){function e(e,t,a,r,n,i){var o,l,s,c;return e===bc?a===Cc?(s="-0.3em",c=0===i?null:"end",l=-t[1]-r-ul(0,(n[1]-t[1])/2),o=0===i?0:t[0]):a===bc?(s="1em",c=0===i?null:"end",l=r+ul(0,(n[1]-t[1])/2),o=0===i?0:t[0]):(s="0.3em",c=0===i?"end":null,l=-t[1]/2,o=0===i?-r-n[0]/2:t[0]+r+n[0]/2):e===Cc?a===Cc?(s="-0.3em",c=0===i?null:"end",l=-r-ul(0,(n[1]-t[1])/2),o=0===i?0:t[0]):a===bc?(s="1em",c=0===i?null:"end",l=t[1]+r+ul(0,(n[1]-t[1])/2),o=0===i?0:t[0]):(s="0.3em",c=0===i?"end":null,l=t[1]/2,o=0===i?-r-n[0]/2:t[0]+r+n[0]/2):e===xc?a===mc?(s=0!==i?"1em":"-0.3em",c="end",o=-t[0]-r-ul(0,(n[1]-t[0])/2),l=0!==i?0:t[1]):a===xc?(s=0!==i?"1em":"-0.3em",c=null,o=r+ul(0,(n[1]-t[0])/2),l=0!==i?0:t[1]):(s=0!==i?"-0.3em":"1em",c="middle",o=-t[0]/2,l=0!==i?-r-n[0]/2:t[1]+r+n[0]/2):a===mc?(s=0!==i?"1em":"-0.3em",c="end",o=-r-ul(0,(n[1]-t[0])/2),l=0!==i?0:t[1]):a===xc?(s=0!==i?"1em":"-0.3em",c=null,o=t[0]+r+ul(0,(n[1]-t[0])/2),l=0!==i?0:t[1]):(s=0!==i?"-0.3em":"1em",c="middle",o=t[0]/2,l=0!==i?-r-n[0]/2:t[1]+r+n[0]/2),{x:o,y:l,dy:s,anchor:c}}function t(e,t,a,r){var n=e.type,i=e[n],o="horizontal"===r.layout;return"triangleUp"===n||"triangleDown"===n?[0,0]:"lever"===n||"vernier"===n?[i.width,i.height]:"pentagon"===n?[i.size+2*i.bandWidth,t[o?1:0]+1.5*i.bandWidth+2]:[i.size,i.size]}ZC_legend_minmaxLabels=function(a,r,n,i,o){var l=i.systemConf,s=n.minmaxlabels,c=i.systemConf.legend,d=c.colorBand,u=Tr(c),h=c.filter.enabled?t(c.filter.slider,r,o,u):[0,0],f=lt(s.padding,2),g=s.align,p=s.text,y=d.ranges&&d.ranges.length,v=jd.isReversedColorAxis(i),m=[],x=i.dataset.getColumn("clr"),b=x.datatype,C=x[b];if(s.show)if(y){var w=nr(i);m=[w[0][0],w[w.length-1][w[w.length-1].length-1]]}else{var k=i.axes.clr.scale.domain();m=[k[0],k[k.length-1]]}v&&m.reverse();var O=Qt(a,"g",[1],".","class","zchart-minmaxlabels"),S=Qt(O,"text",m);S.each(function(t,a){var n=e(o,r,g,f,h,a);Rl(this).attrs({x:n.x,y:n.y,"text-anchor":n.anchor,dy:n.dy}).text(p?p[a]:gn(C,t,b,i,"minmaxlabels"))}),ta(S,[s,l.chart,l.canvas,dd])}}();var Wd;!function(){function e(e,t,a,r,n){var i=a?[0,e.length-1]:[e.length-1,0];r&&i.reverse();var o=e[i[t]];return n(o)}function t(e,t,a,n,i,l,s){var c,d,u=t.domain().map(function(e){return t(e)}),h=et(u).sort(is),f=t.domain(),g=t.bandwidth();h.some(function(t,a){if(e[0]>=t&&e[0]<=t+g){var r=e[0]-t;c=.5>=r&&r>=0?ul(a-1,0):a}if(e[1]>=t&&e[1]<=t+g){var r=t+g-e[1];d=.5>=r&&r>=0?hl(a+1,h.length-1):a}return ut(c)&&ut(d)}),c=ul(0,lt(c,0)),d=ul(0,lt(d,f.length-1));var p=f;if(i!==Ns&&1===n[0].length&&(p=r(a,p)),!l&&!s||l&&s){var y=c;c=h.length-1-d,d=h.length-1-y}return p=p.slice(c,d+1,0),i===Ns?e=p:(e=rs(Jl(p)),e=o(e,a)),e}function a(e,t,a,r,n){var i,l=t.bandwidth()/2;if(n===Ns)i=[t(e[0])+l,t(e[e.length-1])+l];else{var c,d,u=t.domain();e=o(e,a),u.forEach(function(t,a){e[0]>=t[0]&&(c=1===r[0].length?a+1:a),!ut(d)&&e[1]<=t[0]&&(d=1===r[0].length?a:a-1)}),c=ul(0,lt(c,0)),d=ul(0,lt(d,u.length-1)),i=[t(u[c])+l,t(u[d])+l]}return i[0]===i[1]&&(i[0]-=s,i[1]+=s),i}function r(e,t){for(var a=e[2],r=e[e.length-1-2],n=[],i=0;i<t.length;i++)n.push([a,t[i][0]]),a=t[i][0];return n.push(a,r),n}function i(e,t){return e.indexOf(t)===e.lastIndexOf(t)}function o(e,t){return i(t,e[1])||(e[1]-=s),e}function l(e,t){return t[1]>t[0]?(e[1]=hl(e[1],t[1]),e[0]=ul(e[0],t[0])):(e[1]=ul(e[1],t[1]),e[0]=hl(e[0],t[0])),e}var s=1e-12;Wd=function(r,i){var o,c,d,u,h,f,g,p=i.position,y=jd.getColorBandDimension(r),v=y[0],m=y[1],x=r.systemConf.legend,b=x.colorBand,C=jd.getOrient(x),w=Tr(x),k=r.dataset.getDataType("clr"),O=b.ranges,S=O&&O.length,A=r.systemConf.legend.filter.range,P=r.axes.clr.scale,T=P.domain(),E=jd.isReversedColorAxis(r),L="horizontal"===w.layout,z=L?[0,v]:[m,0];if(E&&z.reverse(),S)o=Xl().domain(k===Ns?T:nr(r)).range(z).padding(0),c=o.bandwidth(),d=c/2;else{var D=[T[0],T[T.length-1]];D[0]===D[1]&&(g=[-1,1],D=[-Ol,Ol]),o=Yl().domain(D).range(z).clamp(!0)}if(u=o.domain(),r.axes.clr.brushScale=o,S){if(A)h=a(A,o,T,O,k);else{var M=o(u[u.length-1]),j=o(u[0]);h=[M+d-s,j+d+s]}h.sort(is)}else h=A||g||o.domain(),h=h.map(function(e){return o(e)}).sort(is);var R={element:r.legendarea.element,orient:C,legendAlign:w,scale:o,initialExtent:h,brushOptions:x.filter,dimension:y,singleDomainContinuous:g,onClick:"resize",onBrush:function(a){if(a.initialized&&!g){var i=d3.event.selection;i=l(i,z),i=S?t(i,o,T,O,k,L,E):i.map(function(e){return o.invert(e)}).sort(is),r.systemConf.legend.filter.range=i,r.legend.component.highlightItem(El,!1,!0),n(i)!==n(f)&&r.addRemoveSeries(),I.slider.style("fill",function(t,a){return e(i,a,L,E,P)}),f=i}},onEnd:function(e,t){var n;if(S){var i=r.systemConf.legend.filter.range;n=a(i,o,T,O,k)}else g&&(n=g.map(function(e){return o(e)}).sort(is));if(n){n.sort(is),e.initialized=!1;var l=d3.event.sourceEvent;I.context.transition().duration(t?0:250).call(e.move,n).on("end",function(){e.initialized=!0,I.context.node().contains(l.srcElement||l.target)||I.tooltipComponent.hide()}),I.slider.transition().duration(t?0:250).attr("transform",function(e,t){return"translate("+(L?n[t]:0)+","+(L?0:n[t])+")"})}}},I=r.legend.brush=new yu(r,R);I.context.attr("transform","translate("+p[0]+","+p[1]+")"),I.slider.style("fill",function(a,r){var n=S?t(h,o,T,O,k,L,E):h.map(function(e){return o.invert(e)}).sort(is);return e(n,r,L,E,P)})}}(),So.legend.continuous.events=function(e,a){function r(){var t=Qr((p.filter.enabled?m:v).node(),d3.event),a=b?t[0]:t[1];ud.FIREFOX&&(a-=sa(e.legend.brush.context.node()||e.legendarea.element)[b?0:1]),u=s(a),d3.event.stopImmediatePropagation(),e.legend.brush.tooltipComponent.hide(!0),g.highlightItem(a,!0),g.highlightSeries(u,!0)}function i(){g.highlightItem(El,!1),g.highlightSeries(h,!1)}function o(a){var r,n=p.colorBand.ranges,i=p.colorAxis&&p.colorAxis.reversed,o=e.axes.clr.brushScale;if(n&&n.length){var l=o.bandwidth(),s=t(a/l);s=b&&i||!b&&!i?n.length-1-s:s,a=o(n[s])+l/2,r=e.seriesColor[s%e.seriesColor.length]}else r=e.axes.clr.scale(o.invert(a));var c=b?[a,0]:[0,a];c[0]+=f[0],c[1]+=f[1],va(C),e.legendarea.element.selectAll(".highlight").style("fill",r),C.style("display",El).style("opacity",1).attr("transform","translate("+c+")")}function l(e){e?C.style("opacity",0):C.transition().style("opacity",0)}function s(a){var r=p.colorBand.ranges,n=p.itemHoverStyle||{},i=e.axes.clr.brushScale;if(r&&r.length){var o=p.colorAxis&&p.colorAxis.reversed,l=i.bandwidth(),s=t(a/l);return s=b&&o||!b&&!o?r.length-1-s:s}var c=e.axes.clr.scale.domain();if(c[0]===c[1])return c;var d=lt(n.triggerOffset,10),u=i.invert(a-d/2),h=i.invert(a+d/2),f=fl(h-u),g=cl(+(ml(f)/Cl).toFixed(2)),y=gl(10,g),v=cl(i.invert(a)/y)*y;return v=+v.toFixed(12),[v,v+y-1e-12]}function c(t){var a=p.colorBand.ranges,r=e.dataset.getColumn("clr"),n=r.datatype,i=r[n],o=a&&a.length?a[t]:t[0];k.show(gn(i,o,n,e,"legend",ol,"-"))}e.legend.highlight={};var d,u,h,f=a.position,g=e.legend.component,p=e.systemConf.legend,y=p.itemHoverStyle||{},v=e.legendarea.element.selectAll(p.filter.enabled?".selection":".colorband"),m=e.legendarea.element.selectAll(".zcbrushhighlighttracker"),x=Tr(p),b="horizontal"===x.layout,C=Qt(e.legendarea.element,"g",[1],".","class","highlight").style("display",El),w=e.legend.highlight.slider=So.legend.continuous.slider(e,C),k=e.legend.highlight.tooltip=So.legend.continuous.tooltip(e,C),O=(w.container,p.events);if(C.style("display",Al).style("opacity",0),O&&(d=0==lt(O.enabled,!0)),!d&&y.type&&y.type!==Al){var S={chartObj:e},A={mousemove:r,mouseout:i},P=El;cn(v,A,P,S,"highlight"),cn(m,A,P,S,"highlight")}g.highlightItem=function(e,t,a,r){v.style("cursor",t?Tl:El),t?(o(e),c(ut(r)?r:u)):l(a)},g.highlightSeries=function(t,a){e.highlightContext=El;var r=e.legendHighlight;if(a){if(ut(h)&&n(h)!==n(t)){var i=h;h=El,g.highlightSeries(i,!1)}e.seriesdata.forEach(function(e,a){r.highlightSelectedSeries(p,a,t),r.highlightUnselectedSeries(p,a,t)}),h=t}else e.seriesdata.forEach(function(a,n){r.reset(p,n,t,e.seriesdata.length-1===n)})}},So.legend.continuous.slider=function(e,t){var a=Qt(t,"g",[1],".","class","slider"),r=e.systemConf.legend,n=r.itemHoverStyle||{},i=jd.getColorBandDimension(e),o=Tr(r),l="horizontal"===o.layout,s=l?"":" rotate(-90)",c=n.type,d={container:a,config:Cd(jn(e)[c],n[c],!0),type:c,chartObj:e,isHorizontal:l,bound:i};a.selectAll("*").remove();var u=new su(d);u.draw();var h=u.getPosition();return a.selectAll(Us).attr("transform",function(){var e=$t(this).translate;return"translate("+(e[0]+h[0])+","+(e[1]+h[1])+")"+s}),u},So.legend.continuous.tooltip=function(e,t){function a(){var t,a,r=e.legend.highlight.slider.container,n=r.selectAll("path").node(),o=n?$t(n).translate:[0,0],s=q(n),c=l.config,d=c.padding+c.margin;switch(i){case bc:t=0,a=s.y-d;break;case xc:t=s.y-d,a=0;break;case mc:t=s.y+s.height+d,a=0;break;case Cc:t=0,a=s.y+s.height+d}return[t+o[0],a+o[1]]}var r=e.systemConf.legend,n=r.itemHoverStyle||{},i=jd.getOrient(r),o={enabled:!0,padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)",fontSize:e.globalProp.fontL1Size.l5,orient:i},l={chartObj:e,config:Cd(o,n.tooltip,!0),container:t},s=a(),c=new lu(l);return c.container.attr("transform","translate("+s[0]+","+s[1]+")"),c};var Yd,Xd,Ud,Gd,Zd=Rl(document.documentElement),Qd=function(e){if(ud.isTouchDevice&&(!e&&Ud&&Xd||Xd&&Xd!=e)){var t=Xd.container.node();if(Xt(t)){Ud[4]=!0;var a=Xd.systemConf.tooltip,r=a.hideDelay;a.hideDelay=0,Xd.eventHandler.tapOldInfo=null,Xd.eventHandler.mouseOut.apply(Gd,Ud),a.hideDelay=r}}};if(So.documentTapEvent=Qd,ud.isTouchDevice){var qd=function(){var e=(new Date).getTime();(!Yd||e-Yd>500)&&Qd()},Kd={tap:qd,taphold:qd,dbltap:qd};cn(Zd,{},Kd,{preventDefault:!1}),Zd.on("touchmove",function(){Qd()})}So.events.mouseevents=function(e,t,r,n,i,o,l,s,c,d,u){function h(){return e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)?yt:e.eventHandler.trackerElement}function f(){if(gt){var t=e.plotarea_approx,a=e.plotarea,r={name:"polarClip",id:e.id,cx:t.x+a.left,cy:t.y+a.top,r:t.radius},n={chartObj:e},i=fd.get(xd,Gs,r,n);e.eventHandler.trackerElement.attr("clip-path","url("+e.defsLocation+"#"+i+")"),window.PointerEvent||"canvas"!==e.plot.renderer.mode||sn(e.container.selectAll("canvas.zc-labelholder-canvas,canvas.highlight-canvas,canvas.zc-canvas"))}}function g(a,n,l){var s=q(l),c=a[0]-s.x,u=a[1]-s.y,h={x:c,y:u},f=b(h,o,ht,r,!0),g=e.seriesdata,p=f.seriesPos,y=f.itemPos,v=f.subseriesindex[p],m=f.subseriesLength[p],C=f.itemPosShared,w=f.currentQualitativeRangePoint;st=f.highlightpoint,nt=f.levelMarkerPoint;var k=e.eventHandler.oldInfo,O=e.eventHandler.tooltipElement,S=f.customPoint;if(n=un(n),ut(S)){if("threshold-marker"===S.type){var P=Hr(null,S,e,"mousemove");ut(P)&&et(P,S,n),At.hoverPoint(S,n,h)}return void(e.eventHandler.oldInfo={customPoint:S,isNoInfo:!0})}if(ut(w)&&r.tooltip.enabled!==!1&&("marker"===w.type||!ut(p))){var T=tn(n,h,0,0,e,f,ft,wt,{},!0,!1,!1),E=kt.bulletEvents.getTooltipContent(w,0),L=Hr(null,w,e,"mousemove");return ut(L)&&et(L,w,n),A(),T.helpers.inheritColors=!0,T.helpers.itempos=w.itemIndex,T.helpers.chartType=w.chartType,O.show(e,T,E,!1,T.helpers),void(e.eventHandler.oldInfo={customPoint:w,isNoInfo:!0})}if(null==p)return e.eventHandler.mouseOut(),void(e.eventHandler.oldInfo={isNoInfo:!0});var z=e.chartTypes[p].value,D=z==So.charttype.arearange,M=D?1:null,j=xt(g[p].yaxiscolumnorder),I=ht[j].eventscale,H=U(p,v,y,C),B=wt?o.domain()[y]:i.getX(H),F=i.getY(H,j),N=e.dataObject.getXYvalue(ft,St(z),o,I,j,H,"x",null,M),_=e.dataObject.getXYvalue(ft,St(z),o,I,j,H,"y",null,M);if(Vr(z)||null!=R(N,_)){if(null!=k&&!k.isNoInfo){var W=k.nearestPoint,Y=bt(k.type||e.userdata.seriesdata.type,Ws);if(W&&W.seriesPos==f.seriesPos&&W.itemPos==f.itemPos&&W.subseriesindex==f.subseriesindex&&Y==z)return d.selectAll("#zcbarhighlight,#zcareahighlight").style("display",""),t.style("visibility",pt?"visible":"hidden"),void(Jr(e)&&e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible"))}var X=V({x:o(B),y:I(F)},h),G=wt?e.seriesdata.length:1;d.selectAll("#zcscatterhighlight").selectAll("*").remove(),d.selectAll("#zcbarhighlight").selectAll("*").remove(),d.selectAll("#zcareahighlight").selectAll("*").remove();for(var Z=es(),Q=0;G>Q;Q++){var K=wt?Q:p;if(wt&&m>1)for(var $=0;m>$;$++)x(e,K,B,y,$,f,wt,X>10,Z);else x(e,K,B,y,v,f,wt,X>10,Z)}if(pt){var J=tn(n,h,N,_,e,f,ft,wt,Z,!0,!1,Zr(e.chartTypes[p].value)&&e.subrenderer[v][xu.getKey(H,p,e)].fillColorFunc);O.show(e,J,null,!0,J.helpers)}}}function p(a,n,i){var l=10,s=q(i),c=a[0]-s.x-(gt?e.plotarea_approx.x:0),u=a[1]-s.y-(gt?e.plotarea_approx.y:0),h={x:c,y:u},f=e.eventHandler.oldInfo,g=un(n),p=h.y-n.clientY,y=h.x-n.clientX,v=wt?O(h,o,ht,r):S(h,o,ht,r),m=v.seriesPos,b=v.itemPos,C=v.subseriesindex,w=e.eventHandler.tooltipElement,k=v.customPoint;if(ut(k)){if("threshold-marker"===k.type){var A=Hr(null,k,e,"mousemove");ut(A)&&et(A,k,n),At.hoverPoint(k,n,h)}return void(e.eventHandler.oldInfo={customPoint:k,isNoInfo:!0})}if(!ut(m))return e.eventHandler.mouseOut(),void(e.eventHandler.oldInfo={isNoInfo:!0});var P=e.seriesdata,T=xt(P[m].yaxiscolumnorder),E=ht[T].scale,L=e.chartTypes[m].value,z=L==So.charttype.arearange,D=z?1:null,M=(null!=o.bandwidth?o.bandwidth():null,e.renderer[m]),j=null!=M.seriesdataAfterUpdate?M.seriesdataAfterUpdate[C]:P[m].data[C],I=j[b],H=e.dataset.getX(I),B=e.dataObject.getXYvalue(ft,St(L),o,E,T,I,"x",null,D),F=e.dataObject.getXYvalue(ft,St(L),o,E,T,I,"y",null,D);if(gt||null!=R(B,F)){var N=V({x:B,y:F},h);if(null!=f&&!wt){var _=f.nearestPoint,W=bt(f.type||e.userdata.seriesdata.type,Ws);if(_&&_.seriesPos==v.seriesPos&&_.itemPos==v.itemPos&&_.subseriesindex[_.seriesPos]==v.subseriesindex[v.seriesPos]&&W==L&&f.containerLeft===y&&f.containerTop===p)return d.selectAll(Fr(L)?"#zcscatterhighlight,#zcareahighlight":"#zcscatterhighlight").style("display",""),t.style("visibility",pt?"visible":"hidden"),void(Jr(e)&&e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible"))}var Y=wt?e.seriesdata.length:1;d.selectAll("#zcscatterhighlight").selectAll("*").remove(),d.selectAll("#zcareahighlight").selectAll("*").remove();for(var X=es(),U=0;Y>U;U++){var G=wt?U:m;x(e,G,H,b,C,v,wt,l>N,X)}if(pt){var Z=tn(g,h,B,F,e,v,ft,wt,X,!1,gt,Zr(e.chartTypes[m].value)&&e.subrenderer[C][xu.getKey(I,m,e)].fillColorFunc),Q=Z.helpers;e.dataObject.isBubbleEnabled&&(Z.distance=e.dataObject.getXYvalue(ft,St(L),o,E,T,I,"z",e.zscale)/2),w.show(e,Z,null,!0,Q),f=e.eventHandler.oldInfo,f&&(f.containerLeft=y,f.containerTop=p)}}}function y(t,a,r,o,l,s,c,u,h,f,g,p,y){var v=e.seriesdata,m=e.systemConf.legend.patternPallete?.5:.2,x=Ra(e,l,U(l,s,c),l),b=e.legendHighlight.getLegendHighlightEffect(l,"selectedSeries","plot"),C=b===Al?{fill:Pl}:e.legendHighlight.getEffect(b,"area",x,{fill:Pl,stroke:x},l,"plot");y||M(d.selectAll("g#zcbarhighlight")),t.style("display","").attr("transform","translate("+n.left+","+n.top+")").styles(C);var w,k,O,S,A,P,T,E,L=ct(r,o)("mode"),m=lt(o.hoveroptions.fillOpacity,.2),z=Ct(i,"x"),D=Ct(i,"y",f);if("linear"==L&&null!=p){var j=Jl(p.map(function(e){return[e.x,e.y]})),R=Qt(t,"polygon",[p],".","class","highlight"+l);R.attr("points",j.toString()).styles({"fill-opacity":m,display:""})}else{var I,H,B=St(a),F=e.dataObject.containsNegativeData(f),V=e.systemConf.chart.axes.xaxis.reversed,N=e.systemConf.chart.axes.yaxis[f||0].reversed;if(gt){var _=e.renderer[l];H=null!=_.seriesdataAfterUpdate?_.seriesdataAfterUpdate[s]:v[l].data[s];var W=N&&!B?h.domain().length-1:0,Y=function(e){var t=B?h(e.y0+e.y):h(i.getY(e,f))+(null!=h.bandwidth?h.bandwidth()/2:0);return ul(t,h.range()[W])},X=function(e){var t;return t=B?0==l?hl(h.range()[0],h(F)):h(e.y0):h(h.domain()[W])+(null!=h.bandwidth?h.bandwidth()/2:0),ul(t,h.range()[W])},G="strokeEnlarge"===b;I=(G?ss:ds)().angle(function(e){return u(i.getX(e))}).curve(_l(L,ft)),G?I.radius(Y):I.outerRadius(Y).innerRadius(X)}else{var Z=a==So.charttype.arearange,Q=Z?1:null,_=e.renderer[l],q=null!=_.seriesdataAfterUpdate?_.seriesdataAfterUpdate[s]:v[l].data[s],K=q[c],$=e.dataObject.getXYvalue(ft,B,u,h,f,K,"x",null,Q),J=e.dataObject.getXYvalue(ft,B,u,h,f,K,"y",null,Q),et=0!=c,tt=c!=q.length-1;if(V?tt:et){var at=q[V?c+1:c-1],rt=e.dataObject.getXYvalue(ft,B,u,h,f,at,"x",null,Q),nt=e.dataObject.getXYvalue(ft,B,u,h,f,at,"y",null,Q);w=($+rt)/2,k=(J+nt)/2}if(V?et:tt){var it=q[V?c-1:c+1],ot=e.dataObject.getXYvalue(ft,B,u,h,f,it,"x",null,Q),st=e.dataObject.getXYvalue(ft,B,u,h,f,it,"y",null,Q);O=($+ot)/2,S=(J+st)/2}A=ft?0:null==w?$:w,P=Hl([k,J,S,h(h.domain()[N?0:1])]),T=ft?Bl([w,$,O,h(F)||$]):null!=w&&null!=O?O-w:null==w?null==O?1:O-$:$-w,E=ft?null==k?J-S:null==S?k-J:k-S:n.height-P;var dt=Math.max(0,-A),ut=Math.max(0,-P),ht=Math.max(0,A+T-n.width-(e.scrolledX||0)),pt=Math.max(0,P+E-n.height-(e.scrolledY||0));A=Math.max(0,A),P=Math.max(0,P),T-=dt+ht,E-=ut+pt,t.style("display","block"),H=q,I=cs().defined(function(e){return!D(i.getY(e,f))&&!z(i.getX(e))}).curve(_l(L,ft)),ft?I.x0(function(e,t){return B?0==l&&0==s&&0==t?ul(h.range()[0],h(F)):h(e.y0):null!=h.bandwidth?h.origRange[0]+h.bandwidth():ul(h.range()[0],h(F))}).x1(function(t){return e.dataObject.getXYvalue(ft,B,u,h,f,t,"x")}).y(function(t){return e.dataObject.getXYvalue(ft,B,u,h,f,t,"y",null,Q)}):I.x(function(t){return e.dataObject.getXYvalue(ft,B,u,h,f,t,"x")}).y0(function(t,a){return B?0==l&&0==s&&0==a?hl(h.range()[0],h(F)):h(t.y0):Z?e.dataObject.getXYvalue(ft,B,u,h,f,t,"y",null,0):null!=h.bandwidth?h.origRange[0]+h.bandwidth():hl(h.range()[0],h(F))}).y1(function(t){return e.dataObject.getXYvalue(ft,B,u,h,f,t,"y",null,Q)})}var yt={name:"rect",id:e.id,x:A,y:P,width:T,height:E},vt={chartObj:e},mt=fd.get(xd,"rect",yt,vt),xt=Qt(d.selectAll("#zcareahighlight"),"path",[1],".","class","highlight"+l);xt.datum(H).attr("d",I).attr("stroke","").attr("clip-path",gt?null:"url("+e.defsLocation+"#"+mt+")").styles({"fill-opacity":m,display:""})}}function v(e,t,a,r,n,i){var o=K(t),l=Q(t,a,n);i||M(d.selectAll("g#zcareahighlight,g#zcscatterhighlight")),d.selectAll("g#zcbarhighlight").style("display",""),e.attr("d",l).attr("transform","translate("+o[0]+","+o[1]+")").style("display","")}function m(t,a,r,i,o,l,s,c,u,h,f,g,p,y,v,m){var x=a==So.charttype.gantt,b=e.legendHighlight.getLegendHighlightEffect(g,"selectedSeries","plot"),C=Br(e)&&(_r(a)||a===So.charttype.scatter)&&"strokeEnlarge"!==b,w=Ra(e,Va(i,e)?p:g,U(g,f,p),g);x||m||M(d.selectAll("g#zcbarhighlight")),y||gt||(M(d.selectAll("g#zcareahighlight").selectAll("*")),M(d.selectAll("g#zcareahighlight")));var k,O,S=d.selectAll("#zcscatterhighlight"),A=r?Cd(i.hoveroptions,r.hoveroptions,!0):i.hoveroptions;if(!x||!i.marker||i.marker.enabled!==!1){if(_r(a)){var P=e.renderer[g],T=null!=P.seriesdataAfterUpdate?P.seriesdataAfterUpdate[f]:h[g].data[f],E=e.dataObject.getXYvalue(ft,St(a),s,c,u,T[p],"z",e.zscale);C?(O=.1*E,k=0):(O=.1*(E+ka("2.5%",hl(n.width,n.height))),k=E/2*.1)}else{var L=a===So.charttype.line||Fr(a),z=r&&r.marker?ct(r.marker,i.marker)("size"):i.marker.size,D=!L&&!gt||null!=z&&""!==z?z||1:ct(r,i)("strokeWidth");D=null!=A.size&&""!==A.size?1:+D,x&&(A=r?Cd(v.hoveroptions,r.hoveroptions,!0):v.hoveroptions);var j,R;gt?(j=.7,R=.35):L?(j=.9,R=.4):C?(j=1,R=0):(j=2,R=1),O=D*j,k=D*R}if(S.attr("transform","translate("+n.left+","+n.top+")").style("display",""),W(t,null,C?{symbol:A.symbol}:A,{color:C?null:w,symbolSize:{inner:k,outer:O},transform:[o,l],imageSize:15},e),C){var I=b===Al?{fill:Pl}:e.legendHighlight.getEffect(b,"scatter",rl.test(b)?w:Pl,{fill:Pl,stroke:w},g,"plot");t.styles(I)}}}function x(e,t,a,l,s,c,u,h,f,g){var p=e.seriesdata,x=xt(p[t].yaxiscolumnorder),b=ht[x].scale,C=e.chartTypes[t].value,k=C==So.charttype.arearange,O=C===So.charttype.gantt,S=k||O?1:null,A=null!=o.bandwidth?o.bandwidth():null,T=e.renderer[t],E=null!=T.seriesdataAfterUpdate?T.seriesdataAfterUpdate[s]:p[t].data[s];if(null!=E){var L=E[l];if(l=L&&i.getActualX(L)===a?l:w(a,E),null!=l&&!X(e.seriesdata[t])&&!P(E[l],i,x)){f.set(t,l),ou.updateSharedInfo(e,f,t);var z,D=E[l],M=e.dataObject.getXYvalue(ft,St(C),o,b,x,D,"x",null,S),j=e.dataObject.getXYvalue(ft,St(C),o,b,x,D,"y",null,S),R=p[t].plotoptions,I=r.chart.plot.plotoptions[So.charttypenames.get(C)],H=e.zcEventType||"mousemove",B=Hr(R,I,e,H),F=Hr(R,I,e,"cursor");C===So.charttype.line||C===So.charttype.scatter&&h?kt.hideCursor(e.eventHandler.trackerElement):kt.addCursor(F);var V=d3.event||e.eventHandler.targetEvent;if(ut(B)&&et(B,c,V,{x:M,y:j}),J(B,V)){if(st=g||st,(null!=st||u)&&Vr(C)){var N=e.systemConf.chart.axes.yaxis[x||0].reversed,_=ct(R,I)("border")||{},W=C===So.charttype.bullet?0:_.radius;W=_&&_.show?W:0;var T=e.renderer[t],Y=e.dataObject.getTransRectValue("radius",null,null,null,null,W),G=e.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),Q=Ra(e,Va(I,e)?l:t,U(t,s,l),t),q=G===Al?{fill:Pl}:e.legendHighlight.getEffect(G,"bar",rl.test(G)?Q:Pl,{fill:Pl,stroke:Q},t,"plot"),K=Qt(d.selectAll("#zcbarhighlight"),"path",[1],".","class","highlight"+t+s).styles(q);u&&!Ur(e.chartTypes[t].value)&&(st=Z(t,s,l)),v(K,st,Y,T,N,u);var $=R&&R.levelMarker?Cd(I.levelMarker,R.levelMarker,!0):I.levelMarker;if(O&&$.enabled){var tt=e.dataObject.getTransRectValue("radius",null,null,null,0),at={fill:$.color||Q},rt=Qt(d.selectAll("#zcbarhighlight"),"path",[1],"#","id","levelMarkerpath");rt.styles(at),v(rt,nt,tt,T,N)}}if(Fr(C)||gt){z=!0;var it=d.selectAll("#zcareahighlight");y(it,C,R,I,t,s,l,o,b,x,A,c.poly,u)}if(Fr(C)||Yr(C)||C===So.charttype.line||gt||O){var ot=d.selectAll("#zcscatterhighlight"),lt=Qt(ot,"g",[1],".","class","highlight"+t);if(k||O){var dt,pt,yt=Qt(lt,"g",[1],".","class","yrangePos_0"),vt=Qt(lt,"g",[1],".","class","yrangePos_1"),mt={};if(O){mt=T.markerProperties;var bt=T.getMarkerPosition(D,mt.subseriesIndex,0,T);ft?(M=bt.y,j=bt.x+bt.width/2,dt=bt.y+bt.height,pt=bt.x+bt.width/2):(M=bt.x+bt.width/2,j=bt.y,dt=bt.x+bt.width/2,pt=bt.y+bt.height)}else dt=e.dataObject.getXYvalue(ft,St(C),o,b,x,D,"x",null,0),pt=e.dataObject.getXYvalue(ft,St(C),o,b,x,D,"y",null,0);m(yt,C,R,I,dt,pt,o,b,x,p,s,t,l,z,{size:mt.size,hoveroptions:I.hoveroptions.end}),m(vt,C,R,I,M,j,o,b,x,p,s,t,l,z,{size:mt.size,hoveroptions:I.hoveroptions.start})}else m(lt,C,R,I,M,j,o,b,x,p,s,t,l,z,null,u)}gt&&d.selectAll("#zcareahighlight,#zcscatterhighlight").attrs({"clip-path":null,transform:"translate("+(n.left+e.plotarea_approx.x)+","+(n.top+e.plotarea_approx.y)+")"}).style("display","")}c.data=D,e.eventHandler.oldInfo={nearestPoint:c,type:C,chartObj:e,isNoInfo:!1}}}}function b(t,a,r,n){var o,c,d,u,h,f,g,p,y,v,m,x=e.systemConf.chart.axes.xaxis.reversed,b=So.scale.invert(Ns,t,l,ft,null,x),w=e.seriesdata,k=(e.dataObject.isCombinationalChart,{}),O={},S=[],A={},T=null,D=!1,M=!1,R={},H=null,B="x",V="y";ft&&(B="y",V="x");var _=w.map(function(w,_){var W=e.chartTypes[_].value;d=null==d||e.dataObject.isCombinationalChart?A[W]||on(e,W,null):d;var U=xt(w.yaxiscolumnorder),G=e.systemConf.chart.axes.yaxis[U||0].reversed,Z=r[U].eventscale,Q=e.dataObject.containsNegativeData(U),q=Ct(i,"y",U),K={},$=w.plotoptions,J=n.chart.plot.plotoptions[e.chartTypes[_].name],et=($?Cd(J.marker,$.marker,!0):J.marker)||{},tt=10*(et.enabled?et.size||1:1);if(X(w))return[null];var at=e.renderer[_],rt=at.commonOption||kr(e.rendererConf[_],_);kt.bulletEvents||(kt.bulletEvents=new So.BulletEvent(e,at.commonOption,a,r[0].scale));var nt=kt.bulletEvents;return w.data.map(function(r,n){var w=null!=at.seriesdataAfterUpdate?at.seriesdataAfterUpdate[n]:r;if(u=C(b,w)||null,null!=u){if(wt){var X=ja(i.getClr(w[u[0]]),e);return S[_]=S[_]||[],S[_][n]=u,et=X?0:null,M=!0,Vr(W)?(f=f||So.scale.ordinalSubInvert(t,k[W],s,l,ft,W,x),O.shared=f,k.shared=b,O.shared=_):(O[W]=_,k[W]=b),et}if(Ur(W)){var $=null;return w.forEach(function(r,n){var l=Kr(e,r,a,Z,U),s=ja(i.getClr(r),e),c=j(l,t);!P(r,i,U)&&s&&0==c&&null===$&&(M=!0,k[W]=n,O[W]=_,o=l,$=c)}),$}if(Vr(W)){for(var J=u.length,et=null,it=0;J>it;it++){var ot=u[it];if(null==w[ot])return null;var lt=qr(e,w[ot],n,rt);\nif(q(w[ot])||P(w[ot],i,U))return null;var st=j(lt,t,G),X=ja(i.getClr(w[ot]),e);X&&0==st&&!R[W]&&(et=0,M=!0,R[W]=!0,O[W]=_,k[W]=ot,o=lt,W===So.charttype.gantt&&(c=at.getGanttLevelMarkerProp(w[ot],n,ot,at,rt))),So.charttype.bullet===W&&(H=nt.getCurrentPoint(t,w[ot]))}return et}if(Fr(W)){u=u[0];var lt=w[u],X=ja(i.getClr(lt),e),et=null;if(P(lt,i,U))return;var ct=W==So.charttype.arearange;K=z(_,n,u,w,w[u-1],w[u],w[u+1],e.dataObject,i,ft,St(W),a,Z,U,Q,ct);var dt=N(t,K.points);return dt&&(et=0==n?F(t,K.curpt,K.curNext):n==w.length-1?F(t,K.prevCur,K.curpt):Hl([F(t,K.prevCur,K.curpt),F(t,K.curpt,K.curNext)])),X&&(null==d||d>et)&&null!=et?(M=!0,R[W]=!0,d=et,O[W]=_,h=n,k[W]=u,T=K.points,A[W]=d,et):null}if(Yr(W)||W===So.charttype.line){for(var J=u.length,et=El,it=0;J>it;it++){var ut,ot=u[it],lt=w[ot],X=ja(i.getClr(lt),e),ht=_r(W)?0:at.getSymbolSize?at.getSymbolSize(lt):tt,gt=at.getSymbolBBox?at.getSymbolBBox(lt):El,pt=!1,yt=El;if(P(lt,i,U))return;if(gt!=El){var vt=L(lt,i,a,Z,U,W,El,B,V,gt);yt=F(t,vt[0],vt[1])}else yt=E(lt,t,a,Z,U,W,El,B,V);if(p=(_r(W)?e.dataObject.getXYvalue(ft,St(W),a,Z,U,lt,"z",e.zscale):ht)/2,ut=p>=yt,g=g||ut){if(ut)if(y=e.dataObject.getXYvalue(ft,St(W),a,Z,U,lt,"x"),v=e.dataObject.getXYvalue(ft,St(W),a,Z,U,lt,"y"),m){var mt=kl*m.r*m.r,xt=kl*p*p,bt=pl(I(m.cx-y)+I(m.cy-v)),Ct=.9*bt<=fl(m.r-p);pt=m.dist==El||yt<m.dist||!(xt>mt&&Ct)}else pt=!0}else pt=d>=yt;if(W===So.charttype.bubblepie){var kt=P(lt,i,U)?{x:0,y:0}:{x:e.dataObject.getXYvalue(ft,St(W),a,Z,U,lt,"x"),y:e.dataObject.getXYvalue(ft,St(W),a,Z,U,lt,"y")};pt=pt&&Y(t,kt,_,n,lt)}X&&pt&&(M=!0,R[W]=!0,et=yt,d=yt,O.point=_,h=n,k.point=ot,D=W===So.charttype.line||Yr(W),ut&&(m={cx:y,cy:v,r:p,dist:yt}))}return et}}})}),W=[],U=[],G=_.map(function(e,t){var a=Hl(e);return null!=a?(W[t]=e.indexOf(a),U[t]=e.length):W[t]=U[t]=null,a});D&&(G=G.map(function(t,a){var r=e.chartTypes[a].value;return r=Yr(r)||r===So.charttype.line?"point":r,"point"===r&&O[r]===a?t:null}));var Z=wt&&ut(f)?O.shared:Ur(e.chartTypes[0].value)?G.lastIndexOf(Hl(G)):G.indexOf(Hl(G));null!=G[Z]&&M||(Z=null),ut(H)&&"marker"===H.type?Z=null:ut(Z)&&(H=null);var Q=wt&&ut(f)?"shared":ut(Z)?e.chartTypes[Z].value:null;return Q=wt||!Yr(Q)&&Q!==So.charttype.line?Q:"point",{seriesPos:Q&&O[Q],itemPos:Q&&k[Q],itemPosShared:S,subseriesindex:W,subseriesLength:U,highlightpoint:o||null,levelMarkerPoint:c||null,distance:G[O],poly:T,currentQualitativeRangePoint:H,customPoint:At.getClosest(t,d)}}function C(e,t){var a=o.domain(),r=a[e],n=null,l=Ct(i,"x");return t.forEach(function(e,t){var a=!l(i.getX(e))&&i.getX(e)===r;return a&&(null==n?n=[t]:n.push(t)),a}),n}function w(e,t){var a=null,r=Ct(i,"x");return t.some(function(t,n){var o=!r(i.getX(t))&&i.getX(t)===e;return o&&(a=n),o}),a}function k(t,a,r,n,i,o){var l=e.systemConf.notes&&e.systemConf.notes.addOnDoubleclickEvent;if(So.annotation&&l){if(!t){var s=e.seriesdata,c=n[r],d=c.slice(),u=d.splice(0,d.length);s.length>1&&u.push(s[a].seriesname),t={coordinate:[i,o],data:u,basedOn:"plot"}}So.annotation.addNotes(e,t)}}function O(t,a,r,n){var o=a.invert(ft?t.y:t.x),l=n.seriesdata.chartdata,s=Ql(function(e){return i.getX(e)}).left,c=l.map(function(t,a){if(t.disabled)return null;var r=e.renderer[a];return t.data.map(function(e,t){return e=null!=r.seriesdataAfterUpdate?r.seriesdataAfterUpdate[t]:e,s(e,o,0,e.length-1)})}),d=l.map(function(n,o){if(n.disabled)return null;var l=e.renderer[o],s=xt(n.yaxiscolumnorder),d=e.chartTypes[o].value,u=r[s].scale;return n.data.map(function(r,n){r=null!=l.seriesdataAfterUpdate?l.seriesdataAfterUpdate[n]:r;var h,f,g=c[o][n];if(r[g]&&(h={x:a(i.getX(r[g])),y:u(St(d)?r[g].y+r[g].y0:i.getY(r[g],s))},f=ja(i.getClr(r),e)),g>0){var p=fl(t.x-h.x),y={x:a(i.getX(r[g-1])),y:u(St(d)?r[g-1].y+r[g-1].y0:i.getY(r[g-1],s))},v=fl(t.x-y.x),m=p>v?g-1:g;p=p>v?v:p;{V(h,t),V(t,y)}return{dist:f?p:null,xbis:m}}if(0==g){var p=f&&h?fl(t.x-h.x):null;return{dist:p,xbis:g}}})}),u=[],h=[],f=d.map(function(e,t){if(!e)return null;var a=e.map(function(e){return e.dist}),r=Hl(a),n=a.indexOf(r);return u[t]=r?n:null,h[t]=r?e[n].xbis:null,r}),g=f.indexOf(Hl(f)),p=h[g];return{itemPos:p,seriesPos:g,subseriesindex:u[g]}}function S(t,a,n){var o,l,s,c,d,u,h,f,g,p,y=e.seriesdata,v=El,m=El,x="x",b="y";ft&&(x="y",b="x"),y.map(function(y,C){var w=e.chartTypes[C],k=w.value,O=w.name,S=k==So.charttype.arearange,A=on(e,k),z=y.plotoptions,D=r.chart.plot.plotoptions[O],M=(z?Cd(D.marker,z.marker,!0):D.marker)||{},j=10*(M.enabled?M.size||1:1);X(y)||(e.dataObject.isCombinationalChart?(!ut(o)||(ut(f)?A!=El&&o>=A:m>A||m==El||A==El))&&(o=A):o=o==El?A:o);var R,H=e.renderer[C],B=xt(y.yaxiscolumnorder),V=n[B].scale,N=e.dataObject.containsNegativeData(B),_=S?1:El,W={};return X(y)?[El]:y.data.map(function(r,n){r=H.seriesdataAfterUpdate?H.seriesdataAfterUpdate[n]:r;var y=gt?r.map(function(t){var r=e.dataObject.getXYvalue(ft,St(k),a,V,B,t,"x"),n=e.dataObject.getXYvalue(ft,St(k),a,V,B,t,"y");return{x:r,y:n}}):El;return r.map(function(m,w){if(!P(m,i,B)){var O,A=_r(k)?0:H.getSymbolSize?H.getSymbolSize(m):j;if(Yr(k)||k===So.charttype.line){var z=H.getSymbolBBox?H.getSymbolBBox(m):El;if(z!=El){var D=L(m,i,a,V,B,k,_,x,b,z);l=F(t,D[0],D[1])}else l=E(m,t,a,V,B,k,_,x,b),l-=A/2;if(c=(_r(k)?e.dataObject.getXYvalue(ft,St(k),a,V,B,m,"z",e.zscale):A)/2,O=c>=l,s=s||O,O||(l-=c),k===So.charttype.bubblepie){var M=P(m,i,B)?{x:0,y:0}:{x:e.dataObject.getXYvalue(ft,St(k),a,V,B,m,"x"),y:e.dataObject.getXYvalue(ft,St(k),a,V,B,m,"y",El,_)};l=Y(t,M,C,n,m)?l:ol}}else{var X=T(m,C,n,w,r,t,R,k,a,V,B,N,S,y);l=X.distance,W=X.polygonPoints,R=m}var U;if(s){if(O)if(d=e.dataObject.getXYvalue(ft,St(k),a,V,B,m,"x"),u=e.dataObject.getXYvalue(ft,St(k),a,V,B,m,"y"),h){var G=kl*h.r*h.r,Z=kl*c*c,Q=pl(I(h.cx-d)+I(h.cy-u)),q=.9*Q<=fl(h.r-c);U=h.dist==El||l<h.dist||!(Z>G&&q)}else U=!0}else U=o==El||o>=l;var K=ja(i.getClr(m),e);K&&U&&l!=El&&(o=l,f=C,g=n,p=w,v=W.points,O&&(h={cx:d,cy:u,r:c,dist:l}))}})})});var C=El;return ut(f)&&(C=o),{seriesPos:f,itemPos:p,subseriesindex:g,poly:v,customPoint:At.getClosest(t,C)}}function A(){d.selectAll("#zcscatterhighlight,#zcbarhighlight,#zcareahighlight").style("display",Al)}function P(t,a,r){return e.seriesdata[0].type==So.charttype.stkdarea?!1:null==t||Ct(a,"x")(a.getX(t))||Ct(a,"y",r)(a.getY(t,r))}function T(t,a,r,n,o,l,s,c,d,u,h,f,g,p){var y=null,v=z(a,r,n,o,s,o[n],o[n+1],e.dataObject,i,ft,St(c),d,u,h,f,g),m=1==v.points.length;gt&&(v.points=p);var x=Fr(c)||gt?N(l,v.points):!0;if((1==o.length||m)&&!P(t,i,h)){y=H(l,v.curpt);var b=e.dataObject.isCombinationalChart,C=e.dataObject.noofAreaEnabledSeries,w=on(e,So.charttype.line);(C>1||1===C&&b)&&y>w&&(y=null)}if(x&&!P(t,i,h)&&1!=o.length&&!m){var k=F(l,v.curpt,v.curNext),O=F(l,v.prevCur,v.curpt),S=0!==n&&P(s,i,h);y=0==n?k:n==o.length-1?O:S?k:Hl([O,k])}return{distance:y,polygonPoints:v}}function E(t,a,r,n,i,o,l,s,c){var d={};d[s]=e.dataObject.getXYvalue(ft,St(o),r,n,i,t,"x"),d[c]=e.dataObject.getXYvalue(ft,St(o),r,n,i,t,"y",null,l);var u=d.x-a[s],h=d.y-a[c];return pl(I(u)+I(h))}function L(t,a,r,n,i,o,l,s,c,d){var u=[];if(P(t,a,i))return 0;var h={};return h.x=e.dataObject.getXYvalue(ft,St(o),r,n,i,t,"x"),h.y=e.dataObject.getXYvalue(ft,St(o),r,n,i,t,"y",null,l),ft?u.push({x:h.x,y:h.y-d.width/2},{x:h.x,y:h.y+d.width/2}):u.push({x:h.x-d.width/2,y:h.y},{x:h.x+d.width/2,y:h.y}),u}function z(e,t,a,r,n,i,o,l,s,c,d,u,h,f,g,p){var y,v,m,x,b,C,w=p?1:null;v=P(i,s,f)?{x:0,y:0}:{x:l.getXYvalue(c,d,u,h,f,i,"x"),y:l.getXYvalue(c,d,u,h,f,i,"y",null,w)},y=0==a?{x:0,y:0}:P(n,s,f)?v:{x:l.getXYvalue(c,d,u,h,f,n,"x"),y:l.getXYvalue(c,d,u,h,f,n,"y",null,w)},m=a==r.length-1?{x:0,y:0}:P(o,s,f)?v:{x:l.getXYvalue(c,d,u,h,f,o,"x"),y:l.getXYvalue(c,d,u,h,f,o,"y",null,w)},b=P(i,s,f)?{x:0,y:0}:D(l,c,d,e,t,a,u,h,f,g,i,p),x=0==a?{x:0,y:0}:P(n,s,f)?b:D(l,c,d,e,t,a-1,u,h,f,g,n,p),C=a==r.length-1?{x:0,y:0}:P(o,s,f)?b:D(l,c,d,e,t,a+1,u,h,f,g,o,p);{var k=0==a?{x:0,y:0}:P(n,s,f)?v:{x:(y.x+v.x)/2,y:(y.y+v.y)/2},O=a==r.length-1?{x:0,y:0}:P(o,s,f)?v:{x:(m.x+v.x)/2,y:(m.y+v.y)/2},S=0==a?{x:0,y:0}:P(n,s,f)?b:{x:(x.x+b.x)/2,y:(x.y+b.y)/2},A=a==r.length-1?{x:0,y:0}:P(o,s,f)?b:{x:(C.x+b.x)/2,y:(C.y+b.y)/2},T=[];P(n,s,f)&&P(o,s,f)?T.push(v):0==a||P(n,s,f)?T.push(v,O,A,b):a==r.length-1||P(o,s,f)?T.push(k,v,b,S):T.push(k,v,O,A,b,S)}return{points:T,prevCur:k,curNext:O,curpt:v}}function D(e,t,a,r,n,o,l,s,c,d,u,h){var f,g,p=h?0:null;if(t){var y=e.getXYvalue(t,a,l,s,c,u,"y",null,p),v=h?e.getXYvalue(t,a,l,s,c,u,"x",null,p):s.range()[0],m=h&&i.getY(u,c,0)<0?hl:ul;a?(g=0==r&&0==n&&0==o?ul(s.range()[0],s(d)):s(u.y0),f={x:g,y:y}):(g=null!=s.bandwidth?s.origRange[0]+s.bandwidth():m(v,s(d)),f={x:g,y:y})}else{var y=e.getXYvalue(t,a,l,s,c,u,"x"),v=h?e.getXYvalue(t,a,l,s,c,u,"y",null,p):s.range()[0],m=h&&i.getY(u,c,0)<0?ul:hl;a?(g=0==r&&0==n&&0==o?hl(s.range()[0],s(d)):s(u.y0),f={x:y,y:g}):(g=null!=s.bandwidth?v+s.bandwidth():m(v,s(d)),f={x:y,y:g})}return f}function M(e){e.style("display",Al)}function j(e,t,a){var r=e.x,n=e.y,i=r+e.width,o=n+e.height;a&&(ft?i=(r-=e.width)+e.width:o=n-e.height);var l=r<=t.x&&t.x<=i&&(a&&!ft?o<=t.y&&t.y<=n:n<=t.y&&t.y<=o);return l?0:null}function R(t,a){return j({x:n.left+(e.scrolledX||0),y:n.top+(e.scrolledY||0),width:n.width,height:n.height},{x:n.left+t,y:n.top+a})}function I(e){return e*e}function H(e,t){return I(e.x-t.x)+I(e.y-t.y)}function B(e,t,a){var r=H(t,a);if(0===r)return H(e,t);var n=((e.x-t.x)*(a.x-t.x)+(e.y-t.y)*(a.y-t.y))/r;return 0>n?H(e,t):n>1?H(e,a):H(e,{x:t.x+n*(a.x-t.x),y:t.y+n*(a.y-t.y)})}function F(e,t,a){return pl(B(e,t,a))}function V(e,t){var a=0,r=0;return a=t.x-e.x,a*=a,r=t.y-e.y,r*=r,pl(a+r)}function N(e,t){for(var a,r,n,i,o,l,s=e.x,c=e.y,d=!1,o=0,u=t.length-1;o<t.length;u=o++)a=t[o].x,n=t[o].y,r=t[u].x,i=t[u].y,l=n>c!=i>c&&(r-a)*(c-n)/(i-n)+a>s,l&&(d=!d);return d}function Y(t,a,r,n,i){var o=xu.getKey(i,r,e),l=e.subrenderer[n][o];if(l){var s=l.data[r],c=s.startAngle,d=s.endAngle,u=bl(t.x-a.x,-(t.y-a.y));return Sa(c,d,u)}}function X(t){var a=t.plotoptions,n=bt(t.type||e.userdata.seriesdata.type,"string"),i=r.chart.plot.plotoptions[n];return t.disabled||0==lt(Hr(a,i,e,"enabled"),!0)}function U(t,a,r,n,i){var o=e.renderer[t],l=o&&o.seriesdataAfterUpdate?o.seriesdataAfterUpdate[a]:e.seriesdata[t].data[a],s=wt&&ut(n)?n[t][a][0]:r;return i?l:l[s]}function Z(t,a,r){if(ut(t)&&ut(r)){a=Od(a,0);var n=e.renderer[t],i=n.seriesdataAfterUpdate[a][r],o=n.commonOption||kr(e.rendererConf[t],t);return qr(e,i,a,o)}}function Q(t,a,r){if(Ur(e.chartTypes[0].value)){var n=e.systemConf.chart.plot.plotoptions.heatmap,i=n.symbol&&_(n.symbol);return i?i(hl(t.width,t.height)):Jt(-t.width/2,-t.height/2,t.width,t.height,a,null,ft)}return Jt(t.x,t.y,t.width,t.height,a,r,ft)}function K(t){var a=n.left,r=n.top;return Ur(e.chartTypes[0].value)&&(a+=t.x+t.width/2,r+=t.y+t.height/2),[a,r]}function $(e){return e=e.split("_"),{levelIndices:e.map(Number),seriesIndex:+e[0],itemIndex:+e[e.length-1]}}function J(e,t){return!ut(e)||e&&t.allowDefault===!0}function et(t,a,r,n){var i;if("threshold-marker"===a.type){var o="x"===a.thresholdType?"x":"y.groups["+a.yColumnIndex+"]";i=kd(e.axes,o+".threshold.line").getMetaInfo(a)}else i=tt(a);ut(n)&&"object"==typeof n&&(i=Cd(i,n,!0,!0)),it(t,r,i,e)}function tt(t){var r,n=t.currentQualitativeRangePoint,i=Od(t.point,t.data)||{},o=Od(t.level,i&&i.level);return r=ut(o)?$(o):{seriesIndex:Od(t.seriesPos,i.seriesIndex),subSeriesIndex:Od(t.subseriesindex,t.subseriesPos,i.subSeriesIndex),itemIndex:Od(t.itemPos,i.itemIndex)},a(t.subseriesindex)&&t.subseriesindex.some(function(e){return ut(e)?r.subSeriesIndex=e:void 0}),ut(n)&&(r.rangeIndex=n.rangeIndex,r.targetIndex=n.targetIndex),ut(r.seriesIndex)&&ut(r.itemIndex)&&(ut(i)&&a(i.data)&&(i=i.data),a(i)||(r.subSeriesIndex=Od(r.subSeriesIndex,0),i=U(r.seriesIndex,r.subSeriesIndex,r.itemIndex,t.itemPosShared),ut(i.level)&&(r.levelIndices=$(i.level).levelIndices)),r.data=e.dataset.getMetaInfoObj(e,i,r.seriesIndex)),r.point=i,r}var rt,nt,ot,st,ct=So.utils.getValueOfPlotOptions,dt=i.getDataType("x"),ht=c,u=u,ft=e.dataObject.getAxisRotated(),gt=e.dataObject.isPolarAxisCategory,pt=r.tooltip.enabled===!0,yt=e.container.selectAll(".zohocharts_scroll"),vt={target:"plot",chartObj:e},mt=So.DataProcessor.helpers,xt=mt.getParsedYAxisOrder,bt=mt.getChartType,Ct=mt.isCatNull,wt=iu.hasSharedSeries(e),kt={},Ot=0,St=function(t){return e.dataObject.isstacked(t)},At=new So.CustomPoints(e);return At.addPoints(e.cache.thresholdCustomPoints,!0),kt.initializeListener=function(){var a=e.eventHandler;ot=e.eventHandler.tapOldInfo=null,a.trackerElement=Qt(d,"rect",[1],".","class","eventhandler"),a.tooltipElement=So.events.tooltip(t,r,e),a.tooltipElement.initialize(),a.customPoints=At,f();var n=e.eventHandler.trackerElement;n.style("fill-opacity",0);var i=at(r.chart,"zoom.type",!0),o={click:a.click,dblclick:a.doubleclick,contextmenu:a.contextMenu},l={mousemove:a.mouseMove,mouseout:a.mouseOut};if(cn(n,o,null,vt,"chart"),cn(n,l,null,vt,"chartmove"),cn(t,l,null,vt),i&&i!==Al)So.setDefaultOptions("zoom",e.systemConf.chart,e.globalProp),a.initializeZoomListener();else{var s={tap:a.click,dbltap:a.doubleclick,singletouchmove:a.mouseMove,touchend:a.mouseOut};cn(n,{},s,vt)}var c=e.eventHandler.tooltipElement,u="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",h=e.container.node(),g=null;if(e.d3container.on(u,function(){var e=h.getBoundingClientRect();g&&(g.left!==e.left||g.top!==e.top)&&c.hide(c.element),g=e}),"auto"===r.tooltip.pointerEvents){var p=a.tooltipElement.element;p.on("mouseenter",function(){kt.mouseOnTooltip=!0}),p.on("mouseleave",function(){kt.mouseOnTooltip=!1,a.mouseOut()})}kt.reverseLegendHighlight=new $d(e),e.isGeoMap&&(kt.mapEvents=new Vn(e))},kt.initializeZoomListener=function(){e.zoom=So.events.zoom(e,ft,r,i);var t=e.eventHandler.trackerElement,a=Rl(document.documentElement),n=e.zoom,o=e.eventHandler;n.zmInit();var l=!1,s={mousedown:function(){dn(t,"chartmove"),cn(a,c,null,vt,"zoommove"),d3.event.preventDefault()}},c={mousemove:function(){e.eventHandler.mousePos=Qr(t.node(),d3.event),l||(e.eventHandler.mouseOut(),n.zmStart(e.eventHandler.mousePos),l=!0),n.zmMove(e.eventHandler.mousePos)},mouseup:function(){dn(a,"zoommove",c);var r=n.zmEnd(e.eventHandler.mousePos);l&&(e.eventHandler.mousePos=Qr(t.node(),d3.event),n=e.zoom,n.zoomed(r));var i={mousemove:o.mouseMove,mouseout:o.mouseOut};cn(t,i,null,vt,"chartmove"),l=!1}},d={tap:o.click,dbltap:o.doubleclick,doubletouchmove:function(){e.eventHandler.mousePos=Qr(t.node(),d3.event),l||(e.eventHandler.mouseOut(),n.zmStart(e.eventHandler.mousePos),l=!0),n.zmMove(e.eventHandler.mousePos)},touchend:function(){dn(a,null,c);var r=n.zmEnd(e.eventHandler.mousePos);l?(e.eventHandler.mousePos=Qr(t.node(),d3.event),n=e.zoom,n.zoomed(r)):o.mouseOut(),l=!1},singletouchmove:o.mouseMove};cn(t,s,d,vt,"zoom")},kt.updateParams=function(a){e=a,r=e.systemConf,n=e.plotarea,i=e.dataset,o=e.axes.x.eventscale,ht=e.axes.y.groups,l=e.barscale1,s=e.barscale2,u=e.seriesColor,t=e.tooltip.element,St=function(t){return e.dataObject.isstacked(t)},ft=e.dataObject.getAxisRotated(),d=e.staticPaneSVG.selectAll("g.eventgroup"),dt=i.getDataType("x"),pt=r.tooltip.enabled===!0,e.eventHandler.tooltipElement=So.events.tooltip(e.tooltip.element,r,e),e.eventHandler.tooltipElement.initialize(),e.eventHandler.bulletEvents=null,wt=iu.hasSharedSeries(e),kt.reverseLegendHighlight=new $d(e),At.removePoints(0,At.points.length),At.addPoints(e.cache.thresholdCustomPoints,!0),(e.xymultiRenderer||gt)&&(G(e.eventHandler.trackerElement,e.plotarea),f()),e.zoom&&e.zoom.zmInit(!0)},kt.mouseMove=function(t){t.element||this;if(e.chartRendered){var a=e.eventHandler.tooltipElement;if(null!=a&&null!=a.timeout&&clearTimeout(a.timeout),e.stopPropogate!==!1&&d3.event.stopPropagation(),e.eventHandler.targetEvent=d3.event,e.xymultiRenderer||gt||e.isGeoMap){e.eventHandler.mousemovetimer&&clearTimeout(e.eventHandler.mousemovetimer);var n=e.eventHandler.trackerElement.node();e.eventHandler.mousePos=Qr(n,d3.event),e.eventHandler.mousemovetimer=setTimeout(function(){if(e.isGeoMap)kt.mapEvents.handleEvent(e.eventHandler.mousePos,"mousemove",e.eventHandler.targetEvent);else{var t=e.dataObject.noofBarEnabledSeries>0,a=dt===Ns&&(t||wt)?g:p;a(e.eventHandler.mousePos,e.eventHandler.targetEvent,n)}},Ot)}else{var n=e.svg.node();e.eventHandler.mousePos=Qr(n,d3.event);{var i=e.eventHandler.mousePos[0],o=e.eventHandler.mousePos[1],l={x:i,y:o},s=d3.event.srcElement||d3.event.target;Rl(s).attr("id")}if(t=t.constructor===Object?t:e.eventHandler.oldRenderer){var c=e.seriesdata,d=e.chartTypes[0].name,h=c[t.seriesPos].plotoptions,f=r.chart.plot.plotoptions[d],y=e.zcEventType||"mousemove",v=Hr(h,f,e,y),m=d3.event||e.eventHandler.targetEvent;if(ut(v)&&et(v,t,m),J(v,m)&&(e.eventHandler.oldRenderer=t,t.renderer.defaultMouseOverFunc(t.data,t.seriesPos,t.itemPos)),pt){var x={left:l.x,top:l.y};m=un(d3.event);var b=l.x-m.clientX,C=l.y-m.clientY;x.left-=b,x.top-=C,x.dLeft=b,x.dTop=C;var w={seriesindex:t.seriesPos,subseriespos:t.subseriesPos,color:t.color||u,svgFillFunc:t.renderer.fillColorFunc,itempos:t.itemPos,d:e.dataObject.isHierarchy?t.data.data||t.data:null};a.show(e,x,null,!0,w)}}}}kt.reverseLegendHighlight.highlight(e.isAxisCategory||gt||e.isGeoMap?e.eventHandler.oldInfo&&e.eventHandler.oldInfo.nearestPoint:t)},kt.mouseOut=function(t,a,n,i,o){if(kt.mouseOnTooltip!==!0){var l=e.seriesdata,s=this;n=n||0;var c=e.chartTypes[0].name,d=e.isNonAxisMultiSeriesCategory&&!gt?l[n].plotoptions:l[0].plotoptions,u=r.chart.plot.plotoptions[c],h=e.eventHandler.oldInfo,f=r.tooltip.hideDelay,g={},p=d3.event||e.eventHandler.targetEvent,y=e.eventHandler.tooltipElement;if(e.isGeoMap)return kt.mapEvents.handleEvent(null,"mouseout",p);h&&(g=Od(h.nearestPoint,g),h.customPoint&&(u=h.customPoint));var v=Hr(d,u,e,"mouseout");if(o||e.chartRendered){var m=0;if(ut(v))if(!e.xymultiRenderer||null!=h&&!h.isNoInfo){var x;h&&ut(h.nearestPoint)?x=h.nearestPoint:a&&(x={seriesPos:0,itemPos:n,point:a.data}),ut(x)&&et(v,x,p)}else h&&ut(h.customPoint)&&et(v,h.customPoint,p);if(J(v,p)){if(e.xymultiRenderer||gt){p=d3.event;var b=e.eventHandler.trackerElement.node(),C=null!=p?Qr(b,p):e.eventHandler.mousePos,w=q(b),k=ft?C[1]:C[0],O=ft?C[0]:C[1],S={x:k,y:O};m=j(w,S)}var P=null!=p?p.relatedTarget:null,T=null!=p?p.target:null;if(e.xymultiRenderer&&0==m&&null!=P&&null!=y&&(T==y.element.node()||T==y.element.selectAll("div#tooltipcontent").node()||P==y.element.node()||P==y.element.selectAll("div#tooltipcontent").node()))return;if(!e.xymultiRenderer&&!gt)if(t=t||e.renderer[n],"zctooltip"==s.id||null!=P&&null!=y&&(T==y.element.node()||T==y.element.selectAll("div#tooltipcontent").node()||T==y.element.selectAll("div#zctooltipafter").node()||T==y.element.selectAll("div#zctooltipbefore").node()||P==y.element.node()||P==y.element.selectAll("div#tooltipcontent").node()||P==y.element.selectAll("div#zctooltipafter").node()||P==y.element.selectAll("div#zctooltipbefore").node())){var E=e.eventHandler.oldRenderer;null!=E&&E.renderer.defaultMouseOutFunc(E.data,e.isNonAxisMultiSeriesCategory?E.seriesPos:E.itemPos,o)}else t.defaultMouseOutFunc(a,n,o)}clearTimeout(e.eventHandler.mouseouttimer),e.eventHandler.mouseouttimer=setTimeout(function(){i!==!0&&(clearTimeout(e.eventHandler.tooltipElement.timeout),e.eventHandler.tooltipElement.timeout=setTimeout(function(){A(),y.hide()},Od(f,150)))},Ot),kt.reverseLegendHighlight.reset(),kt.hideCursor(e.eventHandler.trackerElement)}}},kt.click=function(t,n,i,l,s){if(e.chartRendered){var c=e.seriesdata,d=d3.event&&d3.event.touches,h=e.zcEventType||"click";d&&"taphold"!==h&&(Qd(e),Yd=(new Date).getTime(),Gd=this,Ud=[t,n,i,l],Xd=e);var f=e.eventHandler.tooltipElement,g=d3.event||e.eventHandler.targetEvent;if(e.xymultiRenderer||gt||e.isGeoMap){var p=d3.event;rt=e.eventHandler.trackerElement.node();var y=Qr(rt,p)||e.eventHandler.mousePos;if(e.isGeoMap)return kt.mapEvents.handleEvent(y,"click",p);var v=q(rt),m=y[0]-v.x-(gt?e.plotarea_approx.x:0),x=y[1]-v.y-(gt?e.plotarea_approx.y:0),C={x:m,y:x};rt=this;var w=e.dataObject.noofBarEnabledSeries>0,k=dt===Ns&&w?b:S,O=k(C,o,ht,r),A=O.seriesPos,l=O.itemPos,P=a(O.subseriesindex)?O.subseriesindex[A]:O.subseriesindex,T=Od(O.customPoint,O.currentQualitativeRangePoint);if(ut(T)){var E=Hr(null,T,e,h);ut(E)&&et(E,T,p),e.eventHandler.oldInfo={customPoint:T,isNoInfo:!0}}if(null==A&&!ut(T))return void(d&&(e.eventHandler.mouseOut(),e.eventHandler.tapOldInfo=null));if(ut(A))var L=e.chartTypes[A].value,z=c[A].plotoptions,D=r.chart.plot.plotoptions[So.charttypenames.get(L)],M=Hr(z,D,e,h,O.currentQualitativeRangePoint),j=Hr(z,D,e,"cursor");if(ut(M)){var R=xt(c[A].yaxiscolumnorder),I=ht[R].eventscale,n=U(A,P,l,O.itemPosShared);if(Vr(L)){var H=O.highlightpoint||Z(A,P,l);kt.addCursor(j),et(M,O,g,{x:H.x,y:H.y})}else{var B=e.dataObject.getXYvalue(ft,St(L),o,I,R,n,"x"),F=e.dataObject.getXYvalue(ft,St(L),o,I,R,n,"y"),N=Fr(L)||gt?null:V({x:B,y:F},C),_=_r(L)?e.zscale(e.dataset.getZ(n))/2:10;if(!(_>=N))return void kt.hideCursor(e.eventHandler.trackerElement);kt.addCursor(j),et(M,O,g,{x:B,y:F})}}if(J(M,g)&&(f.hide(f.element),kt.hideCursor(e.eventHandler.trackerElement)),d&&"taphold"!==h&&J(M,g)){ot=e.eventHandler.tapOldInfo;var W=O.currentQualitativeRangePoint||{},Y=ot&&ot.currentQualitativeRangePoint||{},X=!ot||ot.itemPos!=l||ot.seriesPos!=A||ot.subseriesindex!=P||W.rangeIndex!=Y.rangeIndex||W.targetIndex!=Y.targetIndex||(O.highlightpoint&&O.highlightpoint.type||W.type)!=Y.type;X?(e.eventHandler.mouseMove({}),e.eventHandler.tapOldInfo={seriesPos:A,subseriesindex:P,itemPos:l,currentQualitativeRangePoint:W,type:O.highlightpoint&&O.highlightpoint.type||W.type}):(e.eventHandler.mouseOut(),e.eventHandler.tapOldInfo=null)}}else{var G=e.chartTypes[0].name,z=c[e.isNonAxisMultiSeriesCategory?i:0].plotoptions,D=r.chart.plot.plotoptions[G],M=Hr(z,D,e,h);if(ut(M)&&et(M,s,g),J(M,g)&&(f.hide(f.element),kt.hideCursor(e.eventHandler.trackerElement)),d&&"taphold"!==h&&J(M,g))if(ot=e.eventHandler.tapOldInfo,ot&&(s.level?s.level==ot.level:ot.itemPos==l&&ot.seriesPos==i&&0==ot.subseriesindex))t.defaultMouseOutFunc(n,l),e.eventHandler.tapOldInfo=null;else{if(t.defaultMouseOverFunc(n,i,l),pt){var Q=e.svg.node();e.eventHandler.mousePos=Qr(Q,d3.event);var m=e.eventHandler.mousePos[0],x=e.eventHandler.mousePos[1],C={x:m,y:x},K={left:C.x,top:C.y},g=un(d3.event),$=C.x-g.clientX,tt=C.y-g.clientY;K.left-=$,K.top-=tt,K.dLeft=$,K.dTop=tt;var at={seriesindex:s.seriesPos,subseriespos:s.subseriesPos,color:s.color||u,svgFillFunc:s.renderer.fillColorFunc,itempos:s.itemPos,d:e.dataObject.isHierarchy?s.data.data||s.data:null};f.show(e,K,null,!0,at)}e.eventHandler.tapOldInfo={seriesPos:i,subseriesindex:0,itemPos:l,level:s.level}}}}},kt.doubleclick=function(t,a,n){if(e.chartRendered){e.noPropogate&&d3.event.stopPropagation();var i=d3.event&&d3.event.touches;i&&!e.isGeoMap&&(e.eventHandler.mouseOut(),e.eventHandler.tapOldInfo=null);var l=d3.event||e.eventHandler.targetEvent,s=e.eventHandler.tooltipElement,c=e.seriesdata,d=e.zcEventType||"doubleclick";if(e.xymultiRenderer||gt||e.isGeoMap){rt=e.eventHandler.trackerElement.node();var u=Qr(rt,d3.event);if(e.isGeoMap)return kt.mapEvents.handleEvent(u,"doubleclick",event);var h=q(rt),f=u[0]-h.x-(gt?e.plotarea_approx.x:0),g=u[1]-h.y-(gt?e.plotarea_approx.y:0),p={x:f,y:g};rt=this;var y=e.dataObject.noofBarEnabledSeries>0,v=dt===Ns&&y?b:S,m=v(p,o,ht,r),x=Od(m.customPoint,m.currentQualitativeRangePoint);if(ut(x)&&!ut(w)){var C=Hr(null,x,e,d);return ut(C)&&et(C,x,l),void(e.eventHandler.oldInfo={customPoint:x,isNoInfo:!0})}var w=m.seriesPos;if(null==w)return;var O=m.itemPos,A=m.subseriesindex instanceof Array?m.subseriesindex[w]:m.subseriesindex,t=U(w,A,O,m.itemPosShared),P=e.chartTypes[w].value,T=c[w].plotoptions,E=r.chart.plot.plotoptions[So.charttypenames.get(P)],L=Hr(T,E,e,d,m.currentQualitativeRangePoint),z=Hr(T,E,e,"cursor");if(Vr(P)){if(kt.addCursor(z),ut(L)&&et(L,m,l),J(L,l)){var D=Od(m.highlightpoint,{}),M=U(w,A,O,m.itemPosShared,!0);k(null,w,O,M,D.x,D.y)}}else{var j=xt(c[w].yaxiscolumnorder),R=ht[j].eventscale,I=e.dataObject.getXYvalue(ft,St(P),o,R,j,t,"x")+(gt?e.plotarea_approx.x:0),H=e.dataObject.getXYvalue(ft,St(P),o,R,j,t,"y")+(gt?e.plotarea_approx.y:0),B=Fr(P)||gt?null:V({x:I,y:H},p),F=_r(P)?e.zscale(e.dataset.getZ(t))/2:10;if(F>=B&&(kt.addCursor(z),ut(L)&&et(L,m,l,{x:I,y:H}),J(L,l))){var M=U(w,A,O,m.itemPosShared,!0);k(null,w,O,M,I,H)}J(L,l)&&kt.hideCursor(e.eventHandler.trackerElement)}}else{var N=e.chartTypes[0].name,T=c[e.isNonAxisMultiSeriesCategory?a:0].plotoptions,E=r.chart.plot.plotoptions[N],L=Hr(T,E,e,d);ut(L)&&et(L,{seriesPos:0,itemPos:a,point:t.data},l),J(L,l)&&k(n)}J(L,l)&&(s.hide(s.element),kt.hideCursor(e.eventHandler.trackerElement))}},kt.contextMenu=function(){var t=r.chart.plot.events.contextmenu;if(null!=t){var a=d3.event||e.eventHandler.targetEvent;it(t,a,e),d3.event.preventDefault()}},kt.addCursor=function(t){var a=h(),t=t||(at(r.chart,"zoom.type")&&e.systemConf.chart.zoom.type!=Al?"crosshair":Tl);a.style("cursor",t)},kt.hideCursor=function(){var e=h();e.style("cursor","default")},kt.helpers={isDefaultAllowed:J,triggerUserCallback:et,eventDisabled:X},kt},function(){"use strict";function e(e,t,a,r,n){return{x:n?t:e,y:n?e:t,width:n?r:a,height:n?a:r}}function t(e,t,a,r){this.chart=e,this.barOptions=t,this.scale={x:a,y:r},this.barOptions=t,this.axesRotated=e.dataObject.getAxisRotated(),this.cache=es()}t.prototype.getCurrentPoint=function(e,t){for(var a,r=this,n=r.getCurrentRectangles(t),i=n.length;i--;)if(a=n[i],rn(e.x,e.y,a))return a;return null},t.prototype.getCurrentRectangles=function(t){if(t.isDummy)return[];var r=this,n=r.chart,i=n.dataset.getX(t);if(r.cache.has(i))return r.cache.get(i);var o,l,s,c,d=r.scale.y,u=r.scale.x,h=n.systemConf.chart.plot.plotoptions.bullet.levelMarker,f=n.systemConf.chart.plot.plotoptions.bullet.targetMarker,g=r.barOptions,p=u(i)+g.levelMarkerPadding,y=u.bandwidth(),v=hl(h.maxBandWidth,y),m="y",x=n.dataset.getDataType(m,0),b=[],C=t[h.dataindex]||[],w=r.axesRotated,k=u.domain().indexOf(i),O=null;a(C)||(C=[C]);var S=C.slice(0);if(x===_s){var A=n.dataset.getColumn(m,0);s=ut(A.time)?A.time:null}S.push(0),S=S.map(function(e){return x===_s?mn(e,null,s).getTime():e}),S=S.sort(w?is:os);var P,T=S.map(function(e){return d(e)});for(S.splice(S.indexOf(0),1),c=T.length-1,P=c-1;c--;)l=T[c+1]-T[c],l>0&&(o=T[c]),o=T[c],l>0&&(O=e(p,o,v,l,w),O.currentStage=S[c],O.type="levelMarker",O.data=t,O.rangeIndex=P-c,O.itemIndex=k,O.events=h.events,O.chartType=n.chartTypes[0],b.push(O));if(f.enabled===!0){var E=0;v=Od(f.size,g.levelMarkerWidth-2*Od(f.padding,g.padding/2)),ut(f.size)&&(v=10*hl(v,y/10)),l="line"===f.symbol?ul(Od(f.outerStrokeWidth,f.innerStrokeWidth,0)):v;var L=t[f.dataindex];p=u(n.dataset.getX(t))-E,o=d(L)-E,p+=(y-v)/2,o-=l/2,5>l&&(l=5,o-=2.5);var z=f.events||{},D=z.triggerOffset||0;p-=D/2,o-=D/2,v+=D+2*E,l+=D+2*E,O=e(p,o,v,l,w),O.type="marker",O.data=t,O.currentStage=L,O.itemIndex=k,O.targetIndex=0,O.events=f.events,O.chartType=n.chartTypes[0],b.push(O)}return r.cache.set(i,b),b},t.prototype.getTooltipContent=function(e,t){var a,r=this,n=r.chart,i=n.systemConf.chart.plot.plotoptions.bullet,o=an(n,i.levelMarker),l=an(n,i.targetMarker),s=kd(i,"levelMarker.events")||{},c=kd(i,"targetMarker.events")||{},d=("marker"===this.type?l:o)||n.dataset.getColumn("y",0),u=e.currentStage,h=d.datatype,f=n.dataset.getMetaInfoObj(n,e.data,t),g=gn(d[h],u,h,n,"tooltip"),p={value:u,formattedValue:g,actualData:e.data,data:f};return a="marker"===e.type?it(c.tooltipContent,p,n,"tooltip")||"Target: "+g:it(s.tooltipContent,p,n,"tooltip")||"Range: "+g},So.BulletEvent=t}(),function(e){function t(e,a,r){return this instanceof t?(a=Od(a,[]),r&&(a=t.toCircle(a)),this.chart=e,void(this.points=t.addType(a))):new t(a)}function a(e,t,a,n,i,o){var l=e.eventHandler.oldInfo,s=e.systemConf.tooltip,c=e.systemConf.tooltip.sharedSeriesInfo,d=e.staticPaneSVG.selectAll("g.eventgroup"),u=s.enabled===!0||o===!0,h=e.eventHandler.tooltipElement;l&&l.isNoInfo===!1&&e.eventHandler.mouseOut(),clearTimeout(h.timeout),d.selectAll("#zcscatterhighlight,#zcbarhighlight,#zcareahighlight").style("display",Al);var f=n.x+n.width/2,g=n.y+n.height/2;if(ut(a)||(a={x:f,y:g}),ut(t)&&(t=un(t)),!ut(t)){var p=e.svg.node().getBoundingClientRect();t={clientX:f+e.plotarea.left+p.x,clientY:g+e.plotarea.top+p.y}}if(i&&"circle"===n._type&&r(n,f,g,d,e.plotarea,e),u){var y=tn(t,a,f,g,e,null,e.axes.rotated,c,null,!1,!1),v=[n.text,n.formattedValue].join(": "),m=n.marker,x=Od(n.events,{}),b=x.tooltipContent;if(ut(b)){var C=it(b,t,{data:[n.columnInfo],itemIndex:n.itemIndex,point:n.point,pointFormatted:n.formattedValue},e);ut(C)&&(v=C)}y.helpers.backgroundColor=Od(s.backgroundColor,m.fillColor,n.color),y.helpers.borderColor=Od(s.borderColor,m.strokeColor,n.color),h.show(e,y,v,!1,y.helpers)}}function r(e,t,a,r,n,i){var o=r.selectAll("#zcscatterhighlight").style("display",null).attr("transform","translate("+n.left+","+n.top+")"),l=kd(e.marker,"hoveroptions")||{},s={color:e.color,symbolSize:{inner:e.size/2,outer:e.size},transform:[t,a]};W(o,null,l,s,i)}t.prototype.getClosest=function(e,t){ut(t)||(t=Number.MAX_VALUE);for(var a,r,n=this,i=n.points,o=i.length,l=null,s=null,c=t,d=0;o--;)a=i[o],"circle"===a._type?(r=a.triggerOffset||0,d=nn(e.x,e.y,a),r>d&&c>d&&(0>=d&&(s=a),c=d,l=a)):"rect"===a._type&&rn(e.x,e.y,a)&&(l=s=a);return Od(s,l)},t.prototype.addPoints=function(e,a){return e?(a&&(e=t.toCircle(e)),Array.prototype.push.apply(this.points,t.addType(jt(e))),this):void 0},t.prototype.removePoints=function(e,t){return this.points.splice(e,t||1)},t.prototype.hoverPoint=function(e,t,r,n,i,o){n=n!==!1,i=i!==!1,n&&a(this.chart,t||d3.event,r,e,i,o)},t.prototype.leavePoints=function(){if(this.points.length){var e=this.chart;e.staticPaneSVG.selectAll("g.eventgroup").selectAll("#zcscatterhighlight").style("display",Al),e.eventHandler.tooltipElement.hide()}},t.toCircle=function(e){return e.forEach(function(e){e._converted||ut(e.r)||(e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e.r=ul(e.width,e.height)/2,e._converted=!0)}),e},t.addType=function(e){return e.forEach(function(e){e._type=ut(e.r)?"circle":ut(e.x)&&ut(e.y)&&ut(e.width)&&ut(e.height)?"rect":"poly"}),e},e.CustomPoints=t}(So);var $d=function(e){var t=e.legendarea.element.selectAll(".legseries").node();this.chartObj=e,this.legendSeries=t,this.legendElements=t?t.children:[],this.itemHighlighted=!1,this.hoveredSeriesIndex=El,this.previousHoveredSeriesIndex=El,this.legend_series_height=El,this.legendScrollable=El,t&&(this.legend_series_height=t.clientHeight,this.legendScrollable=t.scrollHeight>this.legend_series_height)};$d.prototype.highlight=function(e){var t=this.chartObj,a=this.previousHoveredSeriesIndex,r=t.systemConf.legend,n=r.itemHoverStyle;if(n&&n.showOnDataHover&&(!jd.isContinousLegend(t)||n.type&&n.type!==Al)){var i=t.eventHandler.oldInfo,o=t.legend.component.highlightItem;if(!(t.isAxisCategory||t.dataObject.isPolarAxisCategory||t.isGeoMap)||i&&!i.isNoInfo){var l,s,c;t.isAxisCategory||t.dataObject.isPolarAxisCategory||t.isGeoMap?(l=e.data,s=e.seriesPos,c=e.itemPos):(l=e.data.data||e.data,s=e.seriesPos,c=e.itemPos);var d=this.hoveredSeriesIndex=this.getLegendIndex(l,t.isAxisCategory||t.dataObject.isPolarAxisCategory||t.isNonAxisMultiSeriesCategory?s:c);if(jd.isContinousLegend(t)){var u,h=t.dataset.getClr(l),r=t.systemConf.legend,f=r.colorBand.ranges,g=t.axes.clr.brushScale;u=f&&f.length?g(f[d])+g.bandwidth()/2:g(h),o(u,!0,El,f&&f.length?d:[h]),this.itemHighlighted=!0}else{var p=this.legendElements;if(p[d]){var y=jd.getLegendData(t);d!==a&&null!==a&&o(p[a],y[a],a,r),o(p[d],y[d],d,r,!0),this.itemHighlighted=!0,!this.legendScrollable||t.systemConf.legend.expandable&&t.systemConf.legend.expandable.show||(this.legendSeries.scrollTop=p[d].offsetTop-this.legend_series_height/2)}}this.previousHoveredSeriesIndex=d}}},$d.prototype.reset=function(){if(this.itemHighlighted){var e=this.legendElements,t=this.chartObj,a=this.hoveredSeriesIndex,r=t.legend.component.highlightItem;if(jd.isContinousLegend(t))r(El,!1);else if(ut(e[a])){var n=jd.getLegendData(t),i=t.systemConf.legend;r(e[a],n[a],a,i)}this.hoveredSeriesIndex=null}this.itemHighlighted=!1\n},$d.prototype.getLegendIndex=function(e,t){var a=this.chartObj,r=a.axes.clr;return r.scaleType?Pd.getItemIndex(a,r.indexScale,e):null!=t?t:void 0};var Jd={YYYY:"%Y",MMMM:"%B",EEEE:"%A",EEE:"%a",MMM:"%b",YY:"%y",MM:"%m",EE:"%U",dd:"%d",HH:"%H",hh:"%I",mm:"%M",ss:"%S",a:"%p",MILLI:"%L",z:"%Z",QT:"$Q"},eu={decimal:"d",exponent:"e","float":"f",binary:"b",octal:"o",hexadecimal:"x",SIprefix:"s"},tu={Q:Ln},au=Object.keys(tu).map(function(e){return"\\\\$"+e}),ru=new RegExp(au.join("|"));So.events.tooltip=function(e,r,n){"use strict";function i(e,t,a,r){e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible");var n=r.type;("x"==n||"xy"==n)&&o(e,t,a,r,"x"),("y"==n||"xy"==n)&&o(e,t,a,r,"y")}function o(e,t,a,r,n){var i=e.staticPaneSVG.selectAll("line."+n+"-crosshair"),o="x"==n&&!e.axes.rotated||"y"==n&&e.axes.rotated;i.attrs({x1:o?t:e.plotarea.left,y1:o?e.plotarea.top:a,x2:o?t:e.plotarea.left+e.plotarea.width,y2:o?e.plotarea.height+e.plotarea.top:a}).styles({"shape-rendering":"crispEdges",stroke:r.color,"stroke-width":r.strokeWidth,"stroke-dasharray":P(r.dashStyle,r.strokeWidth),"pointer-events":Al})}function l(e,t,a,r,i,o){if(at(So,"tooltip.getTheme")&&ut(g.tooltip.theme)&&""!==g.tooltip.theme&&ut(n.tooltip.content))return p.getCustomizedVal(n,n.tooltip.content,e,t,a,i,"tooltip",r);var l=d(n.chartTypes[e].name),s=p.getDataPoint(n,null,e,t,a,i),c=Ra(n,l?a:e,s,e),u=(o||x).filter(function(r){return!(m[r]&&rt(p.getDataPoint(n,r,e,t,a,i)))}),h=ou.getContentTemplate(n,El,u);return p.getCustomizedVal(n,h,e,t,a,i,"tooltip",c)}function s(e,r,i,o,l,s,c,d){var u=p.getColumnIdx("clr"),h=n.seriesdata[e].yaxiscolumnorder||[0,0],f=n.dataObject.pieWithAxis&&!n.dataObject.isCombinationalChart?iu.getPieColumnIndex(n):p.getColumnIdx("y",h),g=l.keys(),y=l.y_val_pattern,v=ou.getRawSharedContent(n,l,x),m=0,b=function(e,t,a,r,i,l){if(n.ismultiy||null==u){var s=$(n.seriesdata[t].seriesname)||l.replace(/val/gi,"col");e=e.replace("{{val(null)}}",s)}return p.getCustomizedVal(n,e,t,a,r,o,"tooltip",i,El,d&&d>1?d:El)},C=[];return v.forEach(function(d,u){var h=(a(d)?d:[d]).some(function(e){return"string"==typeof e&&(-1!=e.indexOf("{{val("+f+")}}")||-1!=e.indexOf("{{per("+f+")}}"))});if(a(d)||h){m%=n.seriesdata.length;var x=g[m];if(h&&m++,rt(x))return void C.push(u);var w=t(x),k=t(l.get(x)),O=y,S=s;if(a(S)){var A=p.getDataPoint(n,null,w,r,k,o);S=Ra(n,c?k:w,A,w)}a(d)?d.forEach(function(e,t){d[t]=b(d[t],w,r,k,S,O)}):v[u]=b(v[u],w,r,k,S,O)}else{var w,k,x=g[0];ut(x)?(w=t(x),k=t(l.get(x))):(w=e,k=i),v[u]=p.getCustomizedVal(n,d,w,r,k,o,"tooltip",s,El)}}),v=v.filter(function(e,t){return-1==C.indexOf(t)}),ou.getContentTemplate(n,v)}function c(e,t){return function(){var a=d3.interpolateRound(parseInt(e),parseInt(t));return function(e){return a(e)+"px"}}}function d(e){var t=/(bar|scatter|bubble$|bullet|gantt|wordcloud|waterfall)/.test(e)&&Va(g.chart.plot.plotoptions[e],n),a=/(^pie|funnel|pyramid)/.test(e);return t||a}var u="40%",h="100%",f={element:e},g=n.systemConf,p=n.dataset,y=g.metadata,v=y.axes,m=y.columns,x=v.tooltip||d3.range(m.length),b=g.tooltip,C=null,w=b.position||"relative",k="relative"===w,O={left:50,top:100,rotation:0};if(b.theme&&""!==b.theme){var S=at(So,"tooltip.getTheme")&&So.tooltip.getTheme(b.theme,n);null!==S&&(b=n.systemConf.tooltip=Cd(b,S.borderStyle,!0,!0),n.tooltip.content=[S.body],C=S.maxWidth)}var A,T,E,L,z=20,D=lt(b.hookHeight,6),M=ut(b.borderWidth)?b.borderWidth:1,j=ut(b.borderRadius)?b.borderRadius:5,R=ut(b.borderStyle)?b.borderStyle:"solid",I=ut(b.padding)?b.padding+"":"5",H=lt(b.withinChart,!0),F=lt(b.hookBorderWidth,/ /g.test(M)?1:+M),V=It(j),N=ka(b.maxWidth||C||u,n.chartarea.width),_=ka(b.maxHeight||h,n.chartarea.height),W=ul(.05*n.chartarea.width,2*D),Y=b.headerContent,X=b.footerContent,U=b.crosshair;return f.initialize=function(){var t=da(b,n),a=+t+.35*+t,r=null!=n.userdata.canvas?n.userdata.canvas.fontColor:null,i=pt(j),o=b.useChartEffect===!1,l=null;!o&&n.filterEffectsID&&(l="url(#"+n.filterEffectsID+")"),e.styles({width:"auto","box-shadow":b.shadow,opacity:b.opacity,"z-index":b.zindex,"border-radius":i,"border-width":pt(M),"border-style":R,"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","-o-transform-style":"preserve-3d","transform-style":"preserve-3d","pointer-events":b.pointerEvents,filter:l});var s=Qt(e,"div",b.borderTop?[b.borderTop]:[],".","class","borderTop");s.styles({height:b.borderTop+"px","border-radius":i,"border-bottom-left-radius":"1px","border-bottom-right-radius":"1px"}),L=Qt(e,"div",[1],"#","id","tooltipcontent"),L.styles({"box-sizing":"relative"===w?null:"border-box","max-width":"relative"===w?N+"px":null,"min-width":"relative"===w?W+"px":null,"line-height":(b.lineHeight||a)+"px","word-wrap":"break-word","white-space":"normal","overflow-y":"auto",padding:pt(I)}),ta(L,[{fontColor:null==b.fontColor&&null==r?"white":b.fontColor||r},b,n.systemConf.canvas,dd],!0),A=Qt(e,"div",k?[1]:[],"#","id","zctooltipbefore"),A.styles({"margin-left":-(D+2*F)+"px",border:D+2*F+"px solid transparent"}),T=Qt(e,"div",k?[1]:[],"#","id","zctooltipafter"),T.styles({"margin-left":-D+"px",border:D+"px solid transparent"}),E=e.selectAll("div#zctooltipbefore,div#zctooltipafter"),E.styles({"border-color":Pl,"border-top-color":"white",position:"absolute",top:"100%",left:"50%",width:0,height:0,content:" "})},f.show=function(r,n,o,u,h){function f(){if(j)return M.keys().map(function(e){var a=t(e),n=t(M.get(e)),i=p.getColumnIdx("clr"),o=r.seriesdata[a].yaxiscolumnorder||[0,0],l=r.ismultiy||null==i?p.getColumnIdx("y",o):i,s=p.getDataPoint(r,l,a,x,n),c=p.getMetaInfoObj(r,s,a);return{actData:s,metaInfo:c}});var e=p.getDataPoint(r,null,m,x,k,h.d),a=r.dataset.getMetaInfoObj(r,e,m);return{actData:e,metaInfo:a,seriesIndex:m,subseriesIndex:x,itemIndex:k}}ut(h)||(h={});var g,y=h.color,v=h.svgFillFunc,m=h.seriesindex,x=h.subseriespos,C=h.subseriesLength,k=h.itempos,S=h.backgroundColor||b.backgroundColor,P=h.borderColor||b.borderColor,M=h.tooltipSharedInfo,j=h.tooltipShared,R=null!=m&&r.chartTypes[m].name||h.chartType&&h.chartType.name;u=null==o&&u===!0,(u||h.inheritColors)&&(g=d(R));var I=y;if(u||h.inheritColors){var W=g?k:m,G=p.getDataPoint(r,null,m,x,k,h.d);I=Ra(r,W,G,m)}else a(I)&&(I=I[m%I.length]);I=j?"black":I,P=null!=P?P:I,S=null!=S&&""!=S?S:I,e.styles({visibility:"visible","background-color":S,"border-color":P});var Z,Q,q="",K="",$="",J=L.node();u&&null!=Y&&(K=it(Y,d3.event,Z=f(),r)),q+=u?b.content?it(b.content,d3.event,Z=Z||f(),r):j?s(m,x,k,h.d,M,y,g,C):l(m,x,k,I,h.d):o,u&&null!=X&&($=it(X,d3.event,Z=Z||f(),r)),L.html(q),Mt(K)||(Q=document.createElement("div"),Q.innerHTML=K,K=Q),Mt($)||(Q=document.createElement("div"),Q.innerHTML=$,$=Q),J.insertBefore(K,J.firstChild),J.appendChild($);{var et=e.node();et.offsetWidth,et.offsetHeight}U.type!=Al&&r.isAxisCategory&&i(r,n.actLeft||n.left,n.actTop||n.top,U),e.interrupt().transition(),e.transition().delay(0);var tt;if("relative"===w){var at=parseFloat(et.style.left),rt=parseFloat(et.style.top);tt=nu.relative(n,e,r,D,z,H,F,V,N,_),O=tt.hookPosition,(!at||isNaN(at)||!rt||isNaN(rt))&&e.styles({left:tt.x+"px",top:tt.y+"px"}),at=!at||isNaN(at)?tt.x:(2*at+tt.x)/3,rt=!rt||isNaN(rt)?tt.y:(rt+tt.y)/2,e.transition().duration(100).ease(Nl).styleTween("left",c(at,tt.x)).styleTween("top",c(rt,tt.y))}else"fixed"===w?(tt=nu.fixed(n,e,r),e.styles({left:tt.x+"px",top:tt.y+"px"})):(tt=nu.block(n,e,r),e.styles({left:tt.x+"px",top:tt.y+"px"}).attr("align",tt.align));if(L.styles({width:tt.w,height:tt.h,"max-width":tt.maxw,"max-height":tt.maxh}),b.borderTop){var nt=v?v(g?k:m,null,null,I,null,null,{width:hl(+tt.w,+tt.maxw)},!0):P,ot="object"==typeof nt?"url("+B(nt,!0).url+")":nt,lt=e.selectAll("div.borderTop");lt.styles({background:ot})}if(j)E.style("display",Al);else{var st="rotate("+O.rotation+"deg)",ct="50% 0%";E.styles({display:"",left:O.left+"%",top:O.top+"%",transform:st,"-webkit-transform":st,"-ms-transform":st,"transform-origin":ct,"-webkit-transform-origin":ct,"-ms-transform-origin":ct}),A.style("border-top-color",P),T.styles({"border-top-color":S,opacity:1})}},f.hide=function(e){e=null==e?this.element:e,e.style("visibility","hidden"),n.systemConf.tooltip.crosshair.type!=Al&&n.staticPaneSVG.selectAll("g.crosshair").style("visibility","hidden")},f.destroy=function(){this.element.remove()},f.getTooltipContent=function(){return l.apply(null,arguments)},f};var nu={};nu.relative=function(e,t,a,r,n,i,o,l,s,c){function d(t){var a;/(top|bottom)/.test(t)?e.left-A/2<E.left?(a=u(t==Cc?"blx":"tlx"),L.x=E.left,T.left=ul(a,e.left-E.left)/A*100):e.left+A/2>E.right?(a=u(t==Cc?"brx":"trx"),L.x=E.right-A,T.left=100*(1-ul(a,E.right-e.left)/A)):T.left=50:e.top-P/2<E.top?(a=u(t==mc?"trY":"tly"),L.y=E.top,T.top=ul(a,e.top-E.top)/P*100):e.top+P/2>E.bottom?(a=u(t==mc?"bry":"bly"),L.y=E.bottom-P,T.top=100*(1-ul(a,E.bottom-e.top)/P)):(L.y=e.top-P/2,T.top=50)}function u(e){return r+l[e]+pl(gl(o,2)+gl(o,2))}t.selectAll("#tooltipcontent").styles({width:null,height:null,"max-width":s+Sl,"max-height":c+Sl});var h=t.node(),f=h.offsetWidth,g=h.offsetHeight,p=2,y=a.canvasarea,v=a.chartarea,m=n+r+(e.distance||0),x=e.dTop||0,b=e.dLeft||0,C=a.systemConf.tooltip,w=(C.relative||{}).orient,k=(C.borderTop||0,v.width-v.left+v.right),O=v.height,S=iu.getSize(C,[k,O],[f,g],[s,c]),A=S.w,P=S.h,T={left:50,top:100,rotation:0},E={left:fl(hl(b,0))+(a.scrolledX||0),top:fl(hl(x,0))+(a.scrolledY||0),right:y.width-p-ul(b,0)+fl(hl(b,0)),bottom:y.height-ul(x,0)+fl(hl(x,0))},L={x:e.left-A/2,y:e.top-P-m,maxw:s+Sl,maxh:c+Sl};if(i&&!a.scrolledX&&!a.scrolledY){var z=e.top-P-m,D=e.left+A+m,M=e.left-A-m,j=e.top+P+m;w=w||(z>E.top?Cc:D<E.right?xc:M>E.left?mc:j<E.bottom?bc:null),w==Cc?(d(Cc),T.rotation=0,T.top=100):w==xc?(L.x=e.left+m,d(xc),T.rotation=90,T.left=0):w==mc?(L.x=e.left-m-A,d(mc),T.rotation=-90,T.left=100):w==bc&&(d(bc),L.y=e.top+m,T.rotation=180,T.top=0)}return L.hookPosition=T,L},nu.fixed=function(e,t,a){t.selectAll("#tooltipcontent").styles({width:null,height:null,"max-width":null,"max-height":null}),t.style("border-width",0);var r,n=t.node(),i=n.offsetWidth,o=n.offsetHeight,l=a.canvasarea,s=e.dTop||0,c=e.dLeft||0,d=a.systemConf.tooltip,u=(d.fixed||{}).orient,h=d.borderTop||0,f=Od(d.borderWidth,1),g=Rt(f),p=g.top,y=g.right,v=g.bottom,m=g.left,x=l.width-m-y,b=l.height-p-v,C=iu.getSize(d,[x,b],[i,o]),w=C.w,k=C.h,O={left:0,top:0,right:window.innerWidth,bottom:window.innerHeight},S={x:fl(hl(c,0)),y:fl(hl(s,0))},A=fl(hl(c,0)),P=fl(hl(s,0)),T=w,E=k,L=S.y-k,z=S.x+l.width+w,D=S.x-w,M=S.y+l.height+k,j=0>=s||s>0&&l.height-s>k;return u||(L>O.top?u=Cc:z<O.right&&j?u=xc:D>O.left&&j?u=mc:M<O.bottom&&(u=bc)),u===Cc?(S.y=P-k-p-v,T=x-(c>0?c:0),r="40%"):u===xc?(S.x=A+l.width,E=b-(s>0?s:0)):u===mc?(S.x=A-w-y-m,E=b-(s>0?s:0)):u===bc?(S.y=P+l.height-(s>0?s:0),T=x-(c>0?c:0),r="40%"):(S.y=P,T=x-(c>0?c:0),r="40%"),C=iu.getSize(d,[x,b],[T,E]),S.w=C.w+Sl,S.h=C.h-h+Sl,S.maxw=x-(c>0?c:0)+Sl,S.maxh=hl(b-(s>0?s:0),rt(d.height)&&rt(d.maxHeight)&&ut(r)?ka(r,b):1/0)+Sl,t.style("border-width",pt(f)),S},nu.block=function(e,t,a){var r=a.chartarea,n=a.plotarea,i=a.systemConf.tooltip,o=i.block||{},l=i.borderTop||0,s=Od(i.borderWidth,1),c=Rt(s),d=c.top,u=c.right,h=(c.bottom,c.left),f=o.vAlign||Cc,g=o.hAlign,p=e.dTop||0,y=e.dLeft||0,v=r.width-h-u,m=r.height,x=iu.getSize(i,[v,m],["100%",a.tooltip.preCalculatedHeight]),b=x.w,C=hl(x.h,ka(iu.MAXHEIGHT_BLOCK,m)),w={x:fl(hl(y,0))-ul(y,0)+r.left,y:fl(hl(p,0))-ul(p,0),w:b+Sl,h:C-l+Sl,align:g};return g===xc?w.x+=v-b:g===vc&&(w.x+=(v-b)/2),w.y+=f===bc?n.top+n.height+(n.bottom-C)-d-u:r.top,w};var iu={};iu.MAXHEIGHT_BLOCK="50%",iu.updatePlotarea4BlockTooltip=function(e){var t=e.systemConf.tooltip,a=t.block||{},r=t.position||"relative";if(t.enabled&&"block"===r){if(rt(t.height)&&!t.content){var n=So.events.tooltip(e.tooltip.element,e.systemConf,e);n.initialize(),e.tooltip.element.selectAll("div#tooltipcontent").html(ou.getContentTemplate(e,El,El,!0)),e.tooltip.preCalculatedHeight=e.tooltip.element.node().clientHeight}else e.tooltip.preCalculatedHeight="20%";var i=e.plotarea;e.tooltip.blockarea=wd(i);var o=a.vAlign||Cc,l=Od(t.borderWidth,1),s=Rt(l),c=s.top,d=s.right,u=s.bottom,h=s.left,f=e.chartarea,g=f.width-h-d,p=f.height,y=iu.getSize(t,[g,p],["100%",e.tooltip.preCalculatedHeight]),v=hl(y.h,ka(iu.MAXHEIGHT_BLOCK,p))+c+u;o===vc&&(o=Cc),i.height-=v,i[o]+=v}},iu.getSize=function(e,t,a,r){r=r||[];var n=t[0],i=t[1],o=a[0],l=a[1],s=r[0],c=r[1],d=ka(e.width,n,ka(o,n)),u=ka(e.height,i,ka(l,i)),h=ka(e.maxWidth,n,s||d),f=ka(e.maxHeight,i,c||u);return{w:hl(h,d),h:hl(f,u),maxw:h,maxh:f}},iu.getPieColumnIndex=function(e){var t,a=lt(e.systemConf.chart.plot.plotoptions.bubblepie.dataindex,3);return e.systemConf.metadata.columns.some(function(e,r){return e.dataindex===a?(t=r,!0):void 0}),ut(t)?t:e.dataset.getColumnIdx("y",0)},iu.hasSharedSeries=function(e){return e.systemConf.tooltip.sharedSeriesInfo&&e.isAxisCategory&&!Ur(e.chartTypes[0].value)};var ou={};ou.getContentTemplate=function(e,t,r,n){var i,o,l=e.systemConf,s=l.metadata,c=s.axes,d=s.columns,u=r||c.tooltip||d3.range(d.length),h=c.y&&Jl(c.y)||[],f=l.tooltip,g=ka(f.maxWidth||"40%",e.chartarea.width),p=iu.hasSharedSeries(e),y="column"===f.view,v=[];if(t)v=t;else{if(ut(l.tooltip.theme)&&at(So,"tooltip.getTheme"))u=e.tooltip.content;else if(p){var m=es();e.seriesdata.forEach(function(t,a){ou.updateSharedInfo(e,m,a)}),u=ou.getRawSharedContent(e,m,u)}u.forEach(function(e){var t,a=val="";if(d[e]){if(h.length>1&&h.indexOf(e)>-1&&!p){if(i)return;i=!0,u.forEach(function(e){h.indexOf(e)>-1&&(a+="{{col("+e+")}}",val+="{{val("+e+")}}")})}else a="{{col("+e+")}}",val="{{val("+e+")}}";t=[a,val]}else t=e;v.push(t)})}return y?(o=v.reduce(function(e,t){var r;return r=a(t)?"<tr style=\'vertical-align: top;\'><td style=\'max-width:"+.4*g+"px;\'>"+t[0]+": </td><td style=\'max-width:"+.6*g+"px;\'><b>"+t[1]+"</b></td></tr>":"<tr style=\'vertical-align: top;\'><td style=\'max-width:"+g+"px;\'>"+t+"</td></tr>",e+r},""),o="<table cellspacing=\'0\' cellpadding=\'0\' border=\'0\' style=\'border-spacing: 5px;\'><tbody>"+o+"</tbody></table>"):o=v.reduce(function(e,t,r){var n;return n=a(t)?t[0]+" : "+t[1]:t,e+n+(r==v.length-1?"":"<br>")},""),n&&(o=o.replace(/{{clr}}/g,"black")),o},ou.updateSharedInfo=function(e,t,a){var r=e.dataset,n=r.getColumnIdx("clr"),i=r.getColumnIdx("y",e.seriesdata[a].yaxiscolumnorder||[0,0]),o="{{val("+(e.dataObject.pieWithAxis&&!e.dataObject.isCombinationalChart?iu.getPieColumnIndex(e):i)+")}}";t.y_val_pattern=t.y_val_pattern||"",t.y_col_pattern=t.y_col_pattern||"",-1==t.y_val_pattern.indexOf(o)&&(t.y_val_pattern+=o,t.y_col_pattern+=e.ismultiy||rt(n)?""!=t.y_col_pattern?"":"{{val(null)}}":"{{val("+n+")}}")},ou.getRawSharedContent=function(e,t,r){var n=e.systemConf.metadata,i=n.axes,o=n.columns,l=Jl(i.y),s=e.dataset,c=[],d="",u=e.dataObject.pieWithAxis&&!e.dataObject.isCombinationalChart?iu.getPieColumnIndex(e):El,h=r.some(function(e){return el.lastIndex=0,"string"==typeof e&&el.test(e)}),f=function(e){var t=ut(u)?u:e;return(a(d)?d:[d]).some(function(e){return"string"==typeof e&&(-1!=e.indexOf("{{val("+t+")}}")||-1!=e.indexOf("{{per("+t+")}}"))})},g=e.isAxisCategory;if(h)r.forEach(function(t){ut(o[t])&&(t=["{{col("+t+")}}","{{val("+t+")}}"]),d=t,(a(t)||"string"==typeof t)&&l.some(f)&&g?e.seriesdata.forEach(function(){c.push(a(t)?et(t):t)}):c.push(t)});else{var p="{{val("+s.getColumnIdx("x")+")}}",y=t.y_val_pattern,v="{{clr}}",m=t.y_col_pattern,x=p,b=["<div style=\'margin-right:0.2em;display:inline-block;vertical-align:middle;border-radius: 50%;padding:0.4em;background:"+v+"\'\'></div>"+m,y];c.push(x),e.dataObject.pieWithAxis&&!e.dataObject.isCombinationalChart&&(c.push(["{{col("+s.getColumnIdx("y",0)+")}}","{{val("+s.getColumnIdx("y",0)+")}}"]),c.push(["{{col("+s.getColumnIdx("z")+")}}","{{val("+s.getColumnIdx("z")+")}}"])),g?e.seriesdata.forEach(function(){c.push(et(b))}):c.push(et(b))}return c};var lu=function(e){this.chartObj=e.chartObj,this.config=e.config;var t=this.container=Qt(e.container,"g",this.config.enabled?[1]:[],".","class","tooltip");t.style("pointer-events",Al).style("display",Al),this.boundBoxEle=Qt(t,Us,[1]),this.textEle=Qt(t,Ys,[1]),this.styleText(),this.styleBoundBox()};lu.prototype.show=function(e,t){va(this.container),this.container.styles({opacity:El,display:El}),this.updateTextContent(e),this.positionTooltip(t),this.drawBoundBox()},lu.prototype.hide=function(e){this.container.transition().duration(e?0:250).style("opacity",0).on("end",function(){Rl(this).style("display",Al)})},lu.prototype.styleText=function(){var e=this.textEle,t=this.config.orient,a=this.chartObj.systemConf,r=t===Cc||t===bc;ta(e,[this.config,a.chart,a.canvas,dd]),e.attrs({"text-anchor":r?"middle":t===mc?"start":"end",dy:r?t===Cc?"0.9em":"-0.3em":"0.3em"})},lu.prototype.styleBoundBox=function(){var e=this.config;this.boundBoxEle.styles({fill:e.backgroundColor,stroke:e.borderColor,"stroke-width":e.borderWidth})},lu.prototype.updateTextContent=function(e){this.textEle.text(e)},lu.prototype.positionTooltip=function(e){e&&this.container.attr("transform","translate("+e[0]+","+e[1]+")")},lu.prototype.drawBoundBox=function(){var e=this.textEle.nodes(),t=this.config,a=t.padding,r=It(t.borderRadius||0),n=0;this.boundBoxEle.attr("d",function(){var t=q(e[n++]);return zn(t.x-a,t.y-a,t.width,t.height,r,a,Cc,{},0)})};var su=function(e){this.chartObj=e.chartObj,this.config=e.config,this.container=e.container,this.type=e.type,this.isHorizontal=e.isHorizontal,this.bound=e.bound;var t=this.config.globalShadow!==ol?this.config.globalShadow:this.config.shadow;t&&(this.filter=this.getFilter(t))};su.prototype.draw=function(){var e=(this.chartObj,this.config),t=this.container,a=this.filter,r=this.type;switch(r){case"line":t.append(Us).attr("d",_("vertical-line")(e.height)).styles({stroke:e.strokeColor,"stroke-width":e.strokeWidth});break;case"triangleUp":t.append(Us).attr("d",_("triangle-down")(e.size)).styles({fill:e.fillColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth});break;case"triangleDown":t.append(Us).attr("d",_("triangle-up")(e.size)).styles({fill:e.fillColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth});break;case"triangleUpDown":var n=e.padding/2;t.append(Us).attr("d",_("triangle-down")(e.size)).attr("transform","translate("+(this.isHorizontal?[0,-n]:[-n,0])+")").styles({fill:e.fillColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth}),t.append(Us).attr("d",_("triangle-up")(e.size)).attr("transform","translate("+(this.isHorizontal?[0,n]:[n,0])+")").styles({fill:e.fillColor,stroke:e.strokeColor,"stroke-width":e.strokeWidth});break;case"box":var i=e.strokeWidth,o=e.width,l=e.height;t.append(Us).attr("d",Jt(-(o-i)/2,-(l-i)/2,o-i,l-i,It())).styles({stroke:e.strokeColor,"stroke-width":e.strokeWidth,fill:e.fillColor});break;case"enlarge":var i=e.strokeWidth,s=e.range||1,o=e.width*s,l=e.height*s;t.append(Us).attr("d",Jt(-o/2,-l/2,o,l,It())).styles({fill:e.fillColor});break;case"lever":var c=It(e.radius);t.append(Us).attrs({d:Jt(-e.width/2,-e.height/2,e.width,e.height,c),filter:a}).styles({fill:e.fillColor,stroke:e.strokeColor}),t.append(Us).attr("d","M"+-e.stripePadding/2+" "+-e.stripeHeight/2+" L"+-e.stripePadding/2+" "+e.stripeHeight/2+" M"+e.stripePadding/2+" "+-e.stripeHeight/2+" L"+e.stripePadding/2+" "+e.stripeHeight/2).styles({stroke:e.stripeColor});break;case"hollowCircle":t.append(Us).attrs({d:_()(e.size),filter:a}).styles({fill:e.outerFillColor,stroke:e.outerStrokeColor}),t.append(Us).attr("d",_()(.4*e.size)).styles({fill:e.innerFillColor,stroke:e.outerStrokeColor});break;case"circle":t.append(Us).attrs({d:_()(e.size),filter:a}).styles({fill:e.outerFillColor,stroke:e.outerStrokeColor,"stroke-width":e.outerStrokeWidth}),t.append(Us).attr("d",_()(.3*e.size)).styles({fill:e.innerFillColor,stroke:e.outerStrokeColor});break;case"vernier":var d=t.nodes(),u=Rl(d[0]),h=Rl(d[1]),o=e.width,l=e.height,f="M"+.5*-o+" "+.5*-l+" L"+.5*o+" "+.5*-l+" L"+.5*o+" "+.5*l+" L"+.5*-o+" "+.2*l+" Z",g="M"+.5*-o+" "+.5*-l+" L"+.5*o+" "+.5*-l+" L"+.5*o+" "+.2*l+" L"+.5*-o+" "+.5*l+" Z";u.append(Us).attr("d",f),h.append(Us).attr("d",g),t.selectAll(Us).attr("filter",a).styles({fill:e.fillColor,stroke:e.strokeColor});break;case"pentagon":var p=e.size,y=e.bandWidth,l=e.height,v="M"+(.5*-p-y)+" "+(.5*-l-y)+" L"+(.5*p+y)+" "+(.5*-l-y)+" L"+(.5*p+y)+" "+.5*l+"L0 "+(.5*l+1.5*y+2)+" L"+(.5*-p-y)+" "+.5*l+"ZM"+.5*-p+" "+.5*-l+" L"+.5*p+" "+.5*-l+" L"+.5*p+" "+(.5*l-.5*y)+"L0 "+(.5*l+.5*y)+" L"+.5*-p+" "+(.5*l-.5*y)+"Z",m="M"+.5*-p+" "+.5*-l+" L"+.5*p+" "+.5*-l+" L"+.5*p+" "+.5*l+" L"+.5*-p+" "+.5*l+"Z";t.append(Us).attr("d",m),t.append(Us).attrs({d:v,filter:a}).styles({"fill-rule":"evenodd",fill:e.fillColor,stroke:e.strokeColor})}},su.prototype.getPosition=function(){var e=this.config,t=this.type,a=this.isHorizontal,r=this.bound,n=r[0],i=r[1],o=[0,0],l=a?1:0,s=a?i:n;switch(t){case"lever":case"vernier":case"pentagon":case"hollowCircle":case"circle":case"box":case"enlarge":case"triangleUpDown":case"line":o[l]=s/2;break;case"triangleUp":o[l]=-e.size/2;break;case"triangleDown":o[l]=s+e.size/2}return o},su.prototype.getFilter=function(e){var t=e.split(" "),a={dx:parseFloat(t[0]),dy:parseFloat(t[1]),color:t[3],blur:parseFloat(t[2]),x:"-50%",y:"-50%",width:"200%",height:"200%"},r=fd.get(vd,"dropShadow",a,{chartObj:this.chartObj});return r="url("+this.chartObj.defsLocation+"#"+r+")"},So.mapCollections={},Lt(Rn,c),Rn.helpers=c.helpers,Rn.SeriesTypes=d3.map(),Rn.getDefaultProjection=function(){return{name:"geoMercator"}},Rn.getGeoJSON=function(e,t){if(ut(e)&&Bn.GEO_FORMATS.has(e.type)&&"Topology"===e.type){var a=e.projection;e=Vs.feature(e,e.objects[t]),ut(a)&&(e.projection=a)}return e},Rn.prototype.initialize=function(){{var e=this,t=e.userdata;t.map}e.id="ZC_GEO_"+e.idNumeric,ud.IE&&parseFloat(ud.VERSION)<11&&(e.fixIE=!0),e.geo={layerCount:0,extraLayers:{},extraLayersRenderingOrder:["graticule","globe","allAreas"],utils:{},highlightUtils:{},rawLayers:[]},e.processUserData(e.themeoptions),e.plot={renderer:{mode:e.systemConf.map.renderingMode}},Rn.helpers.constructChartGroups(e),e.seriesContainer=e.svg.select(".seriesholder"),e.chartGroup=e.svg.select(".chartgroup"),e.legendHighlight=new So.legendHighlight(this,this.svg),e.render()},Rn.prototype.render=function(){var e=this,t=e.systemConf,a=t.map.animation.enabled&&!e.updating;if(e.setChartDimension(),e.updateCanvasArea(),e.applyChartProperties(),!e.hasGeoLayer)return e.hideLoading(e.container),e.handleNoData(t.noDataHandler),e.chartRendered=!0,void Ir(e,t.canvas.events,"chart",e.updating?"onreload":"onload");if(e.hasSeriesPoints&&(e.getChartSeriesColor(),So.legend.render(e),iu.updatePlotarea4BlockTooltip(e)),So.annotation&&So.annotation.addBlockAnnotations(e),e.setupFeatureContainerLayer(),e.setUpMapLayer(),e.updatePlotareaProp(),a){var r=e.geo.isCanvasMode?".label-container":"g.labelholder";e.animateSelection=e.container.selectAll("canvas.geomap-features, .xychart,"+r).style("opacity",0)}Ir(e,t.map.events,"map",e.updating?"reinit":"init"),e.renderGlobe(),e.renderGraticule(),e.renderMapLayer(),Ir(e,t.map.events,"map",e.updating?"onreload":"onload"),e.hasSeriesPoints&&(e.updating||Ir(e,t.chart.plot.events,"plot","init"),e.setupZScale(),e.renderSeries(),Ir(e,t.chart.plot.events,"plot",e.updating?"onreload":"onload"),e.handleEvent()),e.drawPlotareaClippath(),e.drawPlotBorder(),t.map.animation.enabled&&!e.updating?e.animate():(e.renderLabels(),e.performPostRender())},Rn.prototype.setupFeatureContainerLayer=function(){var e=this,t=e.systemConf,a=e.geo,r=t.map,n=a.isCanvasMode="svg"!==r.renderingMode,i=Ht(n?"canvas":"svg");a.mapArea=Object.create(e.plotarea),e["setup"+i+"Layer"]()},Rn.prototype.setupLayerSettings=function(e){var t,a=this,r=a.geo,n=r.mapArea,i=r.defaultLayer.layerGeojson,o=a.systemConf.map,l=Od(o.projection,e.projection,i.projection),s=o.extent,c=n.width-s.right,d=n.height-s.bottom,u=[[s.left,s.top],[c,d]],h=e;ut(l)||(l=Rn.getDefaultProjection()),t=r.utils.projection=r.highlightUtils.projection=d3[l.name]();for(var f in l)l.hasOwnProperty(f)&&"name"!==f&&t[f]&&t[f](l[f]);t.fitExtent(u,h),r.utils.geoPath=d3.geoPath().projection(r.utils.projection),r.highlightUtils.geoPath=d3.geoPath().projection(r.utils.projection),r.isCanvasMode&&r.utils.geoPath.context(r.featureLayer)},Rn.prototype.addLayer=function(e,t,a,r,n){var i=this,o=i.geo,l=o.layerCount++,s={feature:o.featureLayer,highlight:o.highlightLayer},c=s[r];return a=a||"map-layer-"+l,o.isCanvasMode||(c=ca("g","."+a,[a],o.featureLayer)),new Bn(e,o.utils,c,t,i,n)},Rn.prototype.setupSvgLayer=function(){{var e=this,t=e.geo,a=t.mapArea;e.systemConf.map}t.featureLayer=ca("g",".feature-layer",[1],e.seriesContainer),e.seriesContainer.attr("transform","translate("+a.left+","+a.top+")"),t.labelLayer=e.staticPaneSVG.select(".labelholder").attr("transform","translate("+a.left+","+a.top+")")},Rn.prototype.setupCanvasLayer=function(){var e=this,t=e.geo,a=t.mapArea,r=e.systemConf.map,n=({x:r.marginLeft,y:r.marginTop},{position:"absolute",left:a.left+Sl,top:a.top+Sl,"pointer-events":"none"});t.featureElement=ca("canvas",".geomap-features",[1],e.chartParentElement,".static").attrs({width:a.width,height:a.height}).styles(n);var i=null;e.fixIE&&(i=".static"),t.labelElement=ca("canvas",".label-container",[1],e.chartParentElement,i).styles(n).attr("width",a.width).attr("height",a.height);var o=t.featureElement.node(),l=t.labelElement.node();t.featureLayer=o.getContext("2d"),Bt(t.featureLayer),t.labelLayer=l.getContext("2d"),Bt(t.labelLayer);var s=ud.prefix.lowercase+"ImageSmoothingEnabled";t.featureLayer[s]=!1,t.featureLayer.imageSmoothingEnabled=!1,t.labelLayer[s]=!1,t.labelLayer.imageSmoothingEnabled=!1},Rn.prototype.getLayerData=function(e){var t=So.mapCollections;return ut(t[e])?(this.emptyMapLayer=!1,t[e]):void(this.emptyMapLayer=!0)},Rn.prototype.setUpMapLayer=function(){var e,t=this,a=t.systemConf,r=t.dataObject;e=a.map.allAreas?r.getMapFeatures("geojson"):r.getUserMapFeatures("geojson"),t.setupLayerSettings(e)},Rn.prototype.setupZScale=function(){var e=this,t=e.dataObject;t.hasZaxis&&(e.axes.z=So.scale.getScale(e,t,e.plotarea,null,null,e.dataset,"z"))},Rn.prototype.renderGraticule=function(){var e=this,t=e.systemConf.map.graticule||{},a=t.show===!0,r=e.geo.extraLayers;if(a)if(e.updating&&r.graticule)r.graticule.update();else{var n=d3.geoGraticule();r.graticule=e.addLayer(n(),t,"graticule","feature")}else ut(r.graticule)&&(r.graticule.destroy(),r.graticule=null)},Rn.prototype.renderGlobe=function(){var e=this,t=e.systemConf.map,a=t.projection||{},r="geoOrthographic"===a.name&&!ut(t.globe.show),n=e.geo.extraLayers;r||t.globe.show?e.updating&&n.globe?n.globe.update():n.globe=e.addLayer({type:"Sphere"},t.globe,"sphere","feature"):ut(n.globe)&&(n.globe.destroy(),n.globe=null)},Rn.prototype.renderMapLayer=function(){var e=this,t=e.systemConf,a=e.dataObject,r=t.map;if(!e.containesHeatmap){var n,i=a.userMapFeatures.values();i.length&&(n=e.addLayer(i,r,"feature-layer","feature",r.useMeshOutline),e.geo.extraLayers.push(n))}if(e.updating&&e.geo.extraLayers.allAreas)e.geo.extraLayers.allAreas.update();else if(r.allAreas&&!a.userUnmatchedMapFeatures.empty()){var o=Hn.helpers.arrayToGeojson(a.userUnmatchedMapFeatures.values());e.geo.extraLayers.allAreas=e.addLayer(o,r,"all-areas-layer","feature",r.useMeshOutline)}},Rn.prototype.renderSeries=function(){var e=this,t=e.systemConf,a=e.seriesdata||[];e.renderer=[],Tt(a,function(a,r){var n=So.DataProcessor.helpers.getChartType(null,"object",r,t);if(Rn.SeriesTypes.has(n.name)){var i=new(Rn.SeriesTypes.get(n.name))(a,e,r);e.renderer.push(i)}})},Rn.prototype.renderLabels=function(){var e=this;e.geo.geoLabels=new _n(e),e.rendererConf=e.renderer.map(function(e,t){return{params:{datasetIndex:t}}}),So.annotation&&e.rendererConf.length&&So.annotation.draw(e,[])},Rn.prototype.handleEvent=function(){var e=this,t=e.geo,a=e.eventHandler=So.events.mouseevents(e,e.tooltip.element,e.systemConf,e.plotarea,e.dataset,null,null,null,null,e.staticPaneSVG.select(".eventgroup"),e.seriesColor);a.initializeListener(),t.eventLayer=a.trackerElement.styles({"pointer-events":"visible"}),G(a.trackerElement,e.plotarea)},Rn.prototype.clearMap=function(){var e=this;if(e.geo.isCanvasMode){var t=e.geo.featureLayer;t.clearRect(0,0,t.canvas.width,t.canvas.height)}ut(e.eventHandler)&&e.eventHandler.mapEvents.clearHighlightedPoints()},Rn.prototype.processUserData=function(e){var t,a=this,r=a.systemConf=Cd(e,a.userdata,!0,!0),n=r.map,i=a.getLayerData(n.scope,n.layerName);a.updating||Ir(a,a.systemConf.canvas.events,"chart","init"),t=kd(r,"seriesdata")||{},a.seriesdata=t.chartdata;var o=a.geo.defaultLayer={layerGeojson:Rn.getGeoJSON(i,n.layerName),layerOriginal:i};o.layerGeojson?(a.hasGeoLayer=!0,a.dataset=new In(a),a.dataObject=new Hn(a),a.hasSeriesPoints=a.dataObject.totalDataCount>0,a.nochartdata=!a.hasSeriesPoints&&a.emptyMapLayer):(a.hasGeoLayer=!1,a.nochartdata=!0)},Rn.prototype.addRemoveSeries=function(){{var e=this;e.eventHandler}e.updating=!0,e.clearMap(),e.geo.extraLayersRenderingOrder.forEach(function(t){ut(e.geo.extraLayers[t])&&e.geo.extraLayers[t].update()}),e.renderer.forEach(function(e){e.update(!0)}),e.geo.geoLabels.update(),e.updating=!1},Rn.prototype.performPostRender=function(){var e=this,t=e.systemConf;e.chartRendered=!0,e.handleHiddenContainer(!0),Ir(e,t.canvas.events,"chart",e.updating?"onreload":"onload"),this.updating=!1},Rn.prototype.getTransform=function(){return d3.zoomTransform(this.geo.eventLayer.node())},Rn.prototype.animate=function(){var e=this,t=e.systemConf.map,a=t.animation,r=e.animateSelection;r.transition().duration(a.duration).ease(Vl(a.easingType)).on("start",function(){r.style("opacity",0),e.renderLabels()}).on("end",function(){e.performPostRender()}).attrTween("tween",function(){return function(e){return r.style("opacity",e),e}})},In.prototype.initialize=function(){var e=this,t=e.geoMap,a=t.userdata,r=a.metadata,n=e.columns=Od(r.columns,{}),i=e.axes=Od(r.axes,{geo:[0],clr:[1],z:[1]}),o=Od(n[i.clr],{}),l=Od(n[i.geo],{}),s=Od(n[i.z],{});e.clridx=Od(o.dataindex),e.zidx=Od(s.dataindex),e.geoidx=Od(l.dataindex,0),e.geoMapByKey=e.getJoinByKey(l),i.label&&n[i.label]&&(e.labelIndex=n[i.label].dataindex)},In.prototype.getJoinByKey=function(e){var t=this,a=Od(e,t.columns[t.axes.geo],{}),r=Od(a.joinBy,"zc-key");if("zc-key"!==r){var n=t.geoMap.geo.defaultLayer.layerGeojson.features[0].properties;ut(n[r])||(r="zc-key")}return r},In.prototype.getColumnIdx=function(e){return a(this.axes[e])?this.axes[e][0]:null},In.prototype.getDataType=function(e){var t=this,a=t.getColumnIdx(e);return ut(t.columns[a])?t.columns[a].datatype:Ns},In.prototype.getZ=function(e){return e[this.zidx]},In.prototype.getClr=function(e){return e[this.clridx]},In.prototype.getGeo=function(e){return e[this.geoidx]},In.prototype.getMapByKey=function(){return this.geoMapByKey},In.prototype.getColumn=function(e){return this.columns[this.getColumnIdx(e)]},In.prototype.getDataPointValue=function(e,t,a,r,n,i,o,l,s){a&&(a=+a),rt(l)&&(l=!/(tooltip|legend)/.test(i));var c=this.axes,d=this.columns,u=d[a]||{},h=u.datatype,f=u.dataindex,g=u[h];if(null!=t){if(null==c.clr&&"legend"!==i||a!=c.clr){var p,y=n?xn:gn;if(s){for(var v=0,m=0;s>m;m++)v+=this.getDataPointUnformattedValue(h,r,m,a,t,i,n,f);p=v}else p=this.getDataPointUnformattedValue(h,r,o,a,t,i,n,f);return""===p&&n?p:y(g,p,h,e,i,l)}return ut(this.clridx)&&Pd.isQuantileColorScale(e)?"legend"===i?gn(g,t,h,e,i,l,"-"):gn(g,this.getClr(t),h,e,i,l):gn(g,this.geoMap.seriesdata[r].seriesname,h,e,i,l)}return null},In.prototype.getDataPointUnformattedValue=function(e,t,a,r,n,i,o,l){var s="";if(o){var c;if(e===Ws)return c=m(chartObj,t,subseriespos,r,n,o,i),ut(c)&&(s=Od((i===Qc?n:n[l])/c*100,0)),s}return i===Qc?n:n[l]},In.prototype.getDataPoint=function(e,t,a,r,n,i){if(ut(i))return i;var o=this.geoMap.seriesdata;return o[a].data[r][n]},In.prototype.getCustomizedVal=function(e,t,a,r,n,i,o,l,s,c){var d=this;return rt(s)&&(s=!/(tooltip|legend)/.test(o)),t.toString().replace(el,function(){var t=arguments[0],u=arguments[1],h=arguments[2],f=arguments[3],g=arguments[4],p=arguments[5],y=arguments[6],v=u||h||f||g||p;\nif(-1!==t.indexOf("{{clr}}"))return l;if(null!=d.columns[v]){var m=o===Qc?i:d.getDataPoint(e,v,a,r,n,i);if(null==m)return"";var x=t.match(/[a-z]+/gi)[0];switch(x){case"col":return d.getColumnName(h,s);case"val":return d.getDataPointValue(e,m,u,a,!1,o,r,s,c);case ad:case rd:case nd:return d.getDataPointValue(e,m,f||g||p,a,x,o,r,s,c)}}else{if(!y)return t;var b=e.dataObject.getMapFeaturesByDataPoint(i,"array");if(b.length)return b[0].properties[y]||t}})},In.prototype.getColumnName=function(e,t){var a=this;return t?$(a.columns[e].columnname):K(a.columns[e].columnname)},In.prototype.getMetaInfoObj=function(e,t,r){var n=this,i=n.axes,o=n.columns,l=n.geoMap.seriesdata,s=[],c=function(e,t){var a=wd(o[e]||{});return a.value=t,a.columnindex=e,a};if(a(t)&&t.forEach(function(e,t){var a=o.indexOf(o.filter(function(e){return e.dataindex===t})[0]);s.push(c(a,e))}),ut(i.clr)){var d=a(i.clr)?i.clr[0]:i.clr;s.push(c(d,l[r].seriesname))}return s},Hn.prototype.initialize=function(){var e=this,t=e.geoMap,a=t.geo,r=t.dataset,n=t.seriesdata,i=t.systemConf.map,o=d3.set(i.excludeAreas||[]),l=d3.set(i.includeAreas||[]),s=e.mapFeatures=a.defaultLayer.layerGeojson.features,c=e.joinByKey=r.getMapByKey(),d=e.mapFeaturesHashed=Hn.helpers.hashFeaturesByProperty(s,c,l,o,!0),u=e.userDataHashed=d3.map(),h=e.userUnmatchedMapFeatures=d3.map(),f=e.userMapFeatures=d3.map(),g=e.userUnmatchedData=d3.set();e.totalDataCount=0,e.extents=d3.map(),t.isGeoMap=!0,t.containesHeatmap=e.containsChartType("geoheatmap"),t.hasColorScale=Pd.isQuantileColorScale(t),e.hasZaxis=ut(r.zidx)&&So.chartcategory.zaxis.some(function(t){return e.containsChartType(t)});var p=function(t,a,n,i){var o=r.getGeo(t);t.seriesIndex=a,t.subSeriesIndex=n,t.itemIndex=i,d.has(o)?(e.totalDataCount++,f.set(o,d.get(o)),u.has(o)?u.get(o).push(t):u.set(o,[t])):g.add(o)},y=[];Tt(n,function(t,a){Hn.helpers.convertTo3DArray(t),Tt(t.data,function(t,n){Tt(t,function(e,t){p(Object.create(e),a,n,t)}),e.hasZaxis&&y.push(rs(t,function(e){return r.getZ(e)}))})}),e.hasZaxis&&e.extents.set("z",rs(Jl(y))),d.keys().forEach(function(e){f.has(e)||o.has(e)||h.set(e,d.get(e))}),e.userMapFeaturesArray=f.values(),e.totalnoofdatas=e.totalDataCount},Hn.prototype.getFeatureMesh=function(e){var t=this,a=d3.set(),r=t.geoMap.geo.defaultLayer.layerOriginal,n=null,i=t.geoMap.systemConf.map.layerName;return"Topology"===r.type&&(e.forEach(function(e){e.properties&&e.properties[t.joinByKey]&&a.add(e.properties[t.joinByKey])}),n=Vs.mesh(r,r.objects[i],function(e){return a.has(e.properties[t.joinByKey])})),n},Hn.prototype.getAxisRotated=function(){return!1},Hn.prototype.containsChartType=function(e){return this.geoMap.chartTypes.some(function(t){return t.name===e||t.value===e})},Hn.prototype.getXYPoint=function(e){var t=this,a=t.geoMap,r=a.dataset,n=a.geo.utils,i=t.userMapFeatures,o=r.getGeo(e),l=[null,null];if(i.has(o)){var s=i.get(o),c=s.properties;l=c.latitude&&c.longitude?n.projection([+c.longitude,+c.latitude]):n.geoPath.centroid(s)}return new Wn(l[0],l[1])},Hn.prototype.getXYvalue=function(e,t,a,r,n,i,o){return this.getXYPoint(i)[o]},Hn.prototype.getXYFromLatLng=function(e){var t=cu.toXY(this.geoMap,e.longitude,e.latitude);return new Wn(t[0],t[1])},Hn.prototype.getUserMapFeatures=function(e){var t=this;return"geojson"===e?Hn.helpers.arrayToGeojson(t.userMapFeaturesArray):"array"===e?t.userMapFeaturesArray:t.userMapFeatures},Hn.prototype.getMapFeaturesByDataPoint=function(e,t){var r=this,n=r.geoMap.dataset,i=d3.map();return a(e[0])||(e=[e]),e.forEach(function(e){var t=e[n.geoidx];r.userMapFeatures.has(t)&&i.set(t,r.userMapFeatures.get(t))}),"geojson"===t?Hn.helpers.arrayToGeojson(i.values()):"array"===t?i.values():i},Hn.prototype.getMapFeatures=function(e){var t=this,a=d3.map(t.userMapFeatures);return t.userUnmatchedMapFeatures.keys().forEach(function(e){a.set(e,t.userUnmatchedMapFeatures.get(e))}),"geojson"===e?Hn.helpers.arrayToGeojson(a.values()):"array"===e?a:a},Hn.prototype.getMinMaxZ=function(){return this.extents.get("z")},Hn.prototype.isstacked=function(){return!1},Hn.helpers={is3D:function(e){return a(e)&&a(e[0])&&a(e[0][0])},convertTo3DArray:function(e){this.is3D(e.data)||(e.data=[e.data])},arrayToGeojson:function(e){return{type:"FeatureCollection",features:e}},hashFeaturesByProperty:function(e,t,a,r,n){var i=es();return Tt(e,function(e){var o=e.properties[t];!a.empty()&&!a.has(o)||!r.empty()&&r.has(o)||i.set(o,n?Object.create(e):e)}),i}};var cu={getGeoBBox:function(e,t){return this.geoBoundToRect(t.bounds(e))},geoBoundToRect:function(e){return{x:e[0][0],y:e[0][1],width:Math.abs(e[1][0]-e[0][0]),height:Math.abs(e[1][1]-e[0][1])}},getFeatureGradientBBox:function(e,t,a){return this.getGeoBBox(e,a)},toLatLong:function(e,t,a){var r=e.geo.utils,n=[t,a];if(!e.geo.isCanvasMode){var i=e.getTransform();n=i.invert(n)}return r.projection.invert(n)},toXY:function(e,t,a){var r=e.systemConf.map.projection||{};if("geoOrthographic"===r.name){var n=e.geo.utils.projection.rotate(),i=[-n[0],-n[1]],o=d3.geoDistance([t,a],i);if(o>Math.PI/2)return[null,null]}return e.geo.utils.projection([t,a])},clearContext:function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)},applyTransform:function(e,t){t.canvas?(t.translate(e.x,e.y),t.scale(e.k,e.k)):t.attr("transform",e)},round:function(e,t){var a=Math.pow(10,t||0);return Math.round(e*a)/a}};Bn.GEO_FORMATS=d3.set(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection","Feature","FeatureCollection","Topology"]),Bn.getMapFeatures=function(e){return"FeatureCollection"===e.type?e.features:jt(e)},Bn.prototype.getStyle=function(e,t,a){var r=this,n=r.styles||{},i=e.styles||{},o=e.properties||{},l=Od(n[t],i[t],o[t],r.defaultStyles[t]);if("function"==typeof l)return l.call(this,e,l);if(a)if(r._gradient)l=r._gradient;else{var s=Od(n.gradients,i.gradients,o.gradients,{});if("linear"===s.type||"radial"===s.type){var c=cu.getFeatureGradientBBox(e,s.type,r.utils.geoPath);l=Da(s,[c.width,c.height],r.getStyle(e,"fillColor"),r.renderingMode,r.fillOpacity,"area",null,r.geoMap),e.transform={x:c.x,y:c.y},r.isCanvasMode||"linear"!==s.type||(r._gradient=l)}}else"dashStyle"===t&&ut(l)&&(l=P(l,r.getStyle("strokeWidth")));return l},Bn.prototype.initialize=function(){var e=this,t=e.layerContainer.isD3Selection?"svg":"canvas";e.defaultStyles={fillColor:"transparent",strokeColor:"#333",strokeWidth:.6,dashStyle:null},e.renderingMode=t,e.isCanvasMode=e.layerContainer.isD3Selection!==!0,e.renderingModeCapitialized=Ht(t),e.paintLayer()},Bn.prototype.update=function(e){e&&(this.layer=e),this.paintLayer(!0)},Bn.prototype.paintLayer=function(e){var t=this;t["paint"+t.renderingModeCapitialized+"Layer"](e)},Bn.prototype.paintSvgLayer=function(){var e=this,t=Bn.getMapFeatures(e.layer),a=function(t){t.attrs({stroke:function(t){return e.getStyle(t,"strokeColor")},"stroke-width":function(t){return e.getStyle(t,"strokeWidth")},"stroke-dasharray":function(t){return e.getStyle(t,"dashStyle")},"stroke-opacity":function(t){return e.getStyle(t,"strokeOpacity")}})},r=ca("path",".map-feature",Bn.getMapFeatures(t),e.layerContainer).attrs({fill:function(t){return e.getStyle(t,"fillColor",!0)},"fill-opacity":function(t){return e.getStyle(t,"fillOpacity")||1},d:e.utils.geoPath});if(e.useMesh){var n=e.geoMap.dataObject.getFeatureMesh(Bn.getMapFeatures(e.layer));r=ca("path",".map-feature-outline",[t[0]],e.layerContainer).attrs({fill:"none",d:e.utils.geoPath(n)}),a(r)}else a(r)},Bn.prototype.paintCanvasLayer=function(){var e=this,t=e.layerContainer,a=Bn.getMapFeatures(e.layer);if(Tt(a,function(a){t.save(),t.fillStyle=e.getStyle(a,"fillColor",!0),t.strokeStyle=e.getStyle(a,"strokeColor"),t.lineWidth=e.getStyle(a,"strokeWidth");var r=e.getStyle(a,"dashStyle");r&&ut(t.setLineDash)&&t.setLineDash(r),t.beginPath(),e.utils.geoPath(a),a.transform&&t.translate(a.transform.x,a.transform.y),t.fill(),e.useMesh||t.stroke(),t.closePath(),t.restore()}),e.useMesh){var r=e.geoMap.dataObject.getFeatureMesh(Bn.getMapFeatures(e.layer));t.save(),t.fillStyle=e.getStyle(a[0],"fillColor",!0),t.strokeStyle=e.getStyle(a[0],"strokeColor"),t.lineWidth=e.getStyle(a[0],"strokeWidth");var n=e.getStyle(r,"dashStyle");n&&ut(t.setLineDash)&&t.setLineDash(n),t.beginPath(),e.utils.geoPath(r),t.stroke(),t.closePath(),t.restore()}},Bn.prototype.destroy=function(){var e=this;e.update([]),Tt(e,function(t,a){e[a]=null,delete e[a]})},Fn.getPlotOptions=function(e,t){return kd(e.systemConf,"chart.plot.plotoptions."+t)},Fn.prototype.initialize=function(){var e=this,t=e.geoMap,a=t.chartTypes[e.index],r=bd.getDimension(t,e.index);t.context=t.geo.featureLayer,e.isCanvasMode=t.geo.isCanvasMode,e.plotOptions=Cd(Fn.getPlotOptions(t,a.name),Od(e.series.plotoptions,{}),!0),e.fillColor=za(t,e.index,r),e.strokeColor=Ma(t,e.index,r),e.render(!1)},Fn.prototype.update=function(){this.render(!0)},Vn.fixMouseCoordinates=function(e,t){if(!t)return{x:null,y:null};e.systemConf.map;return{x:t[0]-e.plotarea.left,y:t[1]-e.plotarea.top}},Vn.fixEventArguments=function(e){return{seriesPos:e.seriesIndex,itemPos:e.itemIndex,subseriespos:e.subSeriesIndex,data:e}},Vn.prototype.initialize=function(){{var e=this,t=e.geoMap,a=t.geo,r=e.utils=a.utils;t.systemConf.map}e.eventConfig=Od(t.systemConf.map.events,{}),e.outerGeoBounds=r.geoPath.bounds(a.defaultLayer.layerGeojson),e.highlightElement=ca("g",".map-highlight",[1],t.staticPaneSVG,":first-child").attr("transform","translate("+t.plotarea.left+","+t.plotarea.top+")"),e.timers={},e.highlightCache={},e.outLine=e.getOutLine()},Vn.prototype.showTooltip=function(e,t,a){var r=this,n=tn(un(a),e,0,0,r.geoMap,t,!1,!1,{},!0,!1,!1),i=n.helpers;i.itempos=t.itemIndex,i.subseriespos=t.subSeriesIndex,i.seriesindex=t.seriesIndex,r.geoMap.eventHandler.tooltipElement.show(r.geoMap,n,null,!0,n.helpers)},Vn.prototype.hideTooltip=function(e){var t=this,a=t.geoMap.systemConf.tooltip.hideDelay,r=t.geoMap.eventHandler.tooltipElement;e?r.hide(r.element):(clearTimeout(t.timers.tooltipDelay),t.timers.tooltipDelay=setTimeout(function(){r.hide(r.element)},Od(a,150)))},Vn.prototype.getPoint=function(e){var t,a=this,r=a.geoMap,n=null;e instanceof Wn?(t=e.toArray(),e=e.toLatLong(a.geoMap).toArray()):e instanceof Yn&&(t=e.toXY(r),e=e.toArray());var i=a.outLine.some(function(e){return d3.polygonContains(e,t)});return i&&r.renderer.some(function(t){return r.eventHandler.helpers.eventDisabled(t.series)?void 0:n=t.getPoint(e)}),n},Vn.prototype.getPointsByIndex=function(e,t){if(ut(e)){var a=this,r=a.geoMap,n=[];return r.seriesdata[e].data.forEach(function(e){n=n.concat(e)}),ut(t)?jd.filterSelectionByColor(n,!0,t,r):n}},Vn.prototype.getHighlightEffect=function(e,t,a,r){var n=this.geoMap,i=n.legendHighlight.getLegendHighlightEffect(e,a,r),o={fillColor:Pl};return i!==Al&&(n.fixIE&&(t="transparent"),o={fillColor:n.legendHighlight.getEffect(i,"area",t,{fill:Pl,stroke:t},0,r).fill,strokeWidth:2}),o},Vn.prototype.highlightPoints=function(e,t,a){var r=this;switch(r.highlightElement.attr("visibility","visible"),t){case"feature":r.highlightGeoFeature(e,a)}},Vn.prototype.highlightGeoFeature=function(e,t){var a=this,r=a.geoMap;a.highlightLayer=new Bn(e,r.geo.highlightUtils,a.highlightElement,t,r)},Vn.prototype.clearHighlightedPoints=function(){this.highlightElement.attr("visibility","hidden")},Vn.prototype.getTransform=function(){return d3.zoomTransform(this.geoMap.geo.eventLayer.node())},Vn.prototype.handleEvent=function(e,t,a){e=Vn.fixMouseCoordinates(this.geoMap,e),a=a||d3.event;var r=this,n=r.geoMap,i=new Wn(e.x,e.y),o=r.getPoint(i),l=n.systemConf.tooltip.enabled!==!1,s=Od(n.zcEventType,t),c=n.eventHandler.oldInfo,d=!(!c||c.point!==(o&&o.point));if("mouseout"===t)o=n.eventHandler.oldInfo;else if(ut(n.eventHandler.oldInfo)&&!ut(o)||("doubletap"===s||"tap"===s&&d)&&"mouseout"!==t)return n.eventHandler.mouseOut();if(ut(o)){var u=o.point,h=u.seriesIndex,f=n.renderer[h],g=f.plotOptions,p=Hr(null,g,n,s),y=n.eventHandler.helpers,v=!1,m=t,x=ud.isTouchDevice,b={mousemove:"handleMouseMove",click:"handleMouseClick",mouseout:"handleMouseOut"};x&&(v=!0,"click"===t&&(m="mousemove")),ut(p)&&y.triggerUserCallback(p,o,a),y.isDefaultAllowed(p,a)&&ut(f[b[m]])&&f[b[m]](o,d),"mousemove"===m?(l&&(clearTimeout(r.timers.tooltipDelay),r.showTooltip(e,u,a)),d||(n.eventHandler.addCursor(Hr(null,f.plotOptions,n,"cursor")),n.eventHandler.oldInfo=o,n.eventHandler.oldInfo.nearestPoint=Vn.fixEventArguments(u))):"mouseout"===m&&(l&&r.hideTooltip(v),n.eventHandler.hideCursor(),n.eventHandler.reverseLegendHighlight.reset(),n.eventHandler.oldInfo=null)}},Vn.prototype.getOutLine=function(){var e=this,t=e.geoMap,a=document.createElementNS(d3.namespace("svg").space,"path"),r=d3.select(a).datum({type:"Sphere"}).attr("d",t.geo.highlightUtils.geoPath),n=r.attr("d");return n.split("M").slice(1).map(function(e){return e=e.slice(0,e.length-1),e.split("L").map(function(e){return e.trim().split(/[,\\s]/).map(function(e){return parseInt(e)})})})},Et(Oo.prototype,{getPoint:function(e){var t=this,a=t.features,r=t.geoMap,n=r.dataObject,i=Ft(a,function(t){return d3.geoContains(t,e)});if(i){for(var o,l=n.userDataHashed.get(i.properties[n.joinByKey]),s=l.length;s--;)if(!r.seriesdata[l[s].seriesIndex].disabled){o=l[s];break}if(!r.hasColorScale||r.hasColorScale&&ja(r.dataset.getClr(o),r))return{type:"feature",feature:i,point:o}}return null},getHighlightStyle:function(){},handleMouseMove:function(e,t){var a=this,r=a.geoMap,n=a.index,i=r.eventHandler.mapEvents;if(!t){var o=Ra(r,n,e.point),l=i.getHighlightEffect(n,o,"selectedSeries","plot");i.highlightPoints(e.feature,e.type,l)}},handleMouseOut:function(){var e=this.geoMap;e.eventHandler.hideCursor(),e.eventHandler.mapEvents.clearHighlightedPoints()},handleMouseClick:function(){this.geoMap.eventHandler.mapEvents.hideTooltip(!0)}}),Nn.prototype.getXY=function(){var e=this,t=e._coordinates;return t||(t=e._coordinates=e.latLong.toXY(e.geoMap)),t},Nn.prototype.getDimension=function(){var e=this,t=e.styles,a=e._dimension;return a||(a=e._dimension={width:Ld.getTextWidth(e.text,t.fontSize,t.fontFamily,t.fontStyle,t.fontWeight),height:Ld.getTextHeight(e.text,t.fontSize,t.fontFamily,t.fontStyle,t.fontWeight)}),a},Nn.prototype.getBBox=function(){var e=this,t=e._bbox,a=5,r=a/2;if(!t){var n=e.getXY(),i=e.getDimension();t=e._bbox={x:n.x-i.width/2-r,y:n.y-i.height/2-r,width:i.width+r,height:i.height+r}}return t},Nn.prototype.overlapsWith=function(e){var t=this.getBBox(),a=e.getBBox();return t.x<a.x+a.width&&t.x+t.width>a.x&&t.y<a.y+a.height&&t.height+t.y>a.y},Nn.prototype.insideRect=function(e){var t=this.getBBox();return t.x+t.width<e.x+e.width&&t.x>e.x&&t.y>e.y&&t.y+t.height<e.y+e.height},Nn.prototype.clearCache=function(){this._bbox=this._coordinates=this._dimension=null},_n.prototype.initialize=function(){var e=this,t=e.geoMap,a=t.systemConf.map.labels||{},r=e.geoLabelStyles=Object.create(a),n=e.labels=[],i={x:0,y:0,width:t.plotarea.width,height:t.plotarea.height},o=function(e){e.insideRect(i)&&!n.some(function(t){return e.overlapsWith(t)})&&n.push(e)};Tt(t.renderer,function(e,r){var n=e.plotOptions,i=n.datalabels;if(!e.series.disabled&&t.datalabels.moduleExists&&ui(i,t)){var l=vi(t,null,i,Zc,null,r),s={};s.fontFamily=ua(i,t),s.fontSize=da(i,t),s.fontWeight=i.fontWeight||"normal",s.fontStyle=i.fontStyle||"normal",s.textShadow=i.textShadow,s.strokeColor=Od(i.strokeColor,a.strokeColor),s.strokeWidth=Od(i.strokeWidth,a.strokeWidth),s.type="point",Tt(e.series.data,function(e){Tt(e,function(e){var a=t.dataObject.getMapFeaturesByDataPoint(e,"array")[0];if(a){var n=l(e),c=new Nn(n,new Yn(a.properties.longitude,a.properties.latitude),s,t),d=Ra(t,r,e),u=!0;c.fontColor=ci(t.systemConf,d,i,t,!1,r,!1),t.updating&&t.hasColorScale&&(u=ja(t.dataset.getClr(e),t)),u&&o(c)}})})}}),r.show===!0&&(r.fontFamily=ua(a,t),r.fontSize=da(a,t),r.fontWeight=a.fontWeight||"normal",r.fontStyle=a.fontStyle||"normal",r.fontColor=a.fontColor||"#333",r.textShadow=a.textShadow,r.strokeColor=a.strokeColor,r.strokeWidth=a.strokeWidth,r.type="background",t.systemConf.map.allAreas===!0&&t.dataObject.userUnmatchedMapFeatures.each(function(e){var n=e.properties,i=it(!0,a.showAs,e,t),l=Od(n[i],i,n.name),s=new Nn(l,new Yn(n.longitude,n.latitude),r,t);o(s)})),e.render()},_n.prototype.render=function(e){{var t=this;t.geoMap}this.geoMap.geo.isCanvasMode?t.renderCanvasLabel(e):t.renderSvgLabel(e)},_n.prototype.renderCanvasLabel=function(){var e=this,t=e.geoMap.geo.labelLayer,a=function(e,t,a,r){return e+" "+t+" "+a+"px "+r},r={};e.labels.forEach(function(e){var n=e.styles,i=Od(e.fontColor,n.fontColor),o=n.strokeColor||mt(i),l=e.getXY();if(ut(l.x)&&ut(l.y)){if(t.save(),n.textShadow&&!ut(r[e.type])&&(r[e.type]=$o.canvas.parseTextShadow(n.textShadow)),r[e.type]){var s=r[e.type];ut(s)&&(t.shadowOffsetX=s[0],t.shadowOffsetY=s[1],t.shadowBlur=s[2],t.shadowColor=s[3])}t.textAlign="center",t.textBaseline="middle",t.fillStyle=i,t.strokeStyle=o,t.font=a(n.fontStyle,n.fontWeight,n.fontSize,n.fontFamily),n.strokeWidth>0&&(t.lineWidth=n.strokeWidth,t.strokeText(e.text,l.x,l.y)),t.fillText(e.text,l.x,l.y),t.restore()}})},_n.prototype.renderSvgLabel=function(){var e=this,t=e.geoMap.geo.labelLayer;e.labelElements=ca("text",".geo-labels",e.labels,t).each(function(e){var t=d3.select(this),a=e.getXY(),r=e.styles,n=Od(e.fontColor,r.fontColor),i=r.strokeColor||mt(n);ut(a.x)&&ut(a.y)&&(t.attrs({"font-family":r.fontFamily,"font-size":r.fontSize,"font-style":r.fontStyle,"font-weight":r.fontWeight,"text-anchor":"middle","dominant-baseline":"middle",transform:"translate("+a.x+","+a.y+")"}),r.textShadow&&t.style("text-shadow",r.textShadow),r.strokeWidth>0&&ca("tspan",".stroke-text",[1],t).text(e.text).attrs({stroke:i,"stroke-width":r.strokeWidth,x:0,y:0}),ca("tspan",".fill-text",[1],t).text(e.text).attrs({fill:n,x:0,y:0}))})},_n.prototype.update=function(){var e=this,t=e.geoMap;t.geo.isCanvasMode&&cu.clearContext(t.geo.labelLayer),e.labels.forEach(function(e){e.clearCache()}),e.initialize(!0)},Wn.prototype.toLatLong=function(e){var t=cu.toLatLong(e,this.x,this.y)||[null,null];return new Yn(t[0],t[1])},Wn.prototype.toJSON=function(){return{x:this.x,y:this.y}},Wn.prototype.toArray=function(){return[this.x,this.y]},Yn.prototype.toXY=function(e){var t=this,a=cu.toXY(e,t.longitude,t.latitude)||[null,null];return new Wn(a[0],a[1])},Yn.prototype.toJSON=function(){return{latitude:this.latitude,longitude:this.longitude}},Yn.prototype.toArray=function(){return[this.longitude,this.latitude]};var du={};So.plot.canvasRenderer=function(e,t){"use strict";var a={},r=e.systemConf,n=So.DataProcessor.helpers;return a.draw=function(a){e.container.select(".highlight-canvas").style("visibility","hidden"),e.context=Gn(e,"zc-canvas"),e.labelHolderContext=Gn(e,"zc-labelholder-canvas",window.PointerEvent?e.container.selectAll("div.legendarea").node():null),t.barDatasetIndex=0,e.systemConf.legend.enabled&&e.svg.select(".seriesholder").selectAll("*:not(.zmarea)").remove(),e.dataObject.isPolarAxisCategory&&(e.context.translate(e.plotarea_approx.x,e.plotarea_approx.y),e.labelHolderContext.translate(e.plotarea_approx.x,e.plotarea_approx.y)),e.dataset.getDataType("x")==Ns&&e.isAxisCategory&&So.scale.barBandwidth(e);var i=null;e.chartRendered=!1;var o=e.dataObject.isCombinationalChart,l=e.plotarea,s=o?Ko.arrangeSeriesRenderingOrder(e):e.seriesdata;if(e.seriesdata.forEach(function(a,c){var d=s[c],u=o?d.seriesidx:c;!e.isAxisCategory&&!e.dataObject.isPolarAxisCategory&&u>0||(i=n.getChartType(d.type||e.userdata.seriesdata.type,"string"),null==e.renderer[u]&&(e.renderer[u]=Xn(i),e.rendererConf[u]=new So.plot.rendererConf),e.renderer[u].chartRendered=!1,0==c&&(Ir(e,r.chart.plot.events,"plot","init"),e.hideLoading(e.container)),Ko.setRendererProp(e,e.renderer[u],d,u,c,t),l.width>0&&l.height>0&&Un(e,d,e.renderer[u]))}),Ko.renderCompletedEvents(e,a,t),!a){var c=e.systemConf.chart.plot.plotoptions[i],d=ha(c,e.seriesdata[0].plotoptions,e,i),u=ut(d.duration)?d.duration:400;if(!ut(d.enabled)||0===u)return;var h=e.seriesdata.length;e.context.canvas.style.opacity=0;var f=setInterval(function(){var t=!0;if(e.renderer.length===h)for(var a=0;a<e.renderer.length;a++)if(!e.renderer[a].chartRendered){t=!1;break}t&&(clearInterval(f),Rl(e.context.canvas).transition().duration(u).style("opacity",1))},1e3/60)}},a};var uu=function(){function e(e){return Math.sqrt(gl(e[0],2)+gl(e[1],2))}function t(e,t){return e[0]*t[0]+e[1]*t[1]}function a(a,r){return t(a,r)/(e(a)*e(r))}function r(e,t){var r=1;return e[0]*t[1]-e[1]*t[0]<0&&(r=-1),r*Math.acos(a(e,t))}function n(e,t){var a=yl(t),r=vl(t);return[a*e[0]+r*e[1],-1*r*e[0]+a*e[1]]}function i(e,t){var a=yl(t),r=vl(t);return[a*e[0]-r*e[1],r*e[0]+a*e[1]]}function o(e,t){return[(e[0]-t[0])/2,(e[1]-t[1])/2]}function l(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function s(e,t){return[e[0]*t[0],e[1]*t[1]]}function c(e,t){return[e*t[0],e*t[1]]}function d(e,t){return[e[0]+t[0],e[1]+t[1]]}function u(e,t,a,u,h,f,g,p){if(0===t||0===a)return p.lineTo(g[0],g[1]);u*=Math.PI/180,t=fl(t),a=fl(a);var y=n(o(e,g),u),v=s(y,y),m=gl(t,2),x=gl(a,2),b=Math.sqrt(v[0]/m+v[1]/x);b>1&&(t*=b,a*=b,m=gl(t,2),x=gl(a,2));var C=pl((m*x-m*v[1]-x*v[0])/(m*v[1]+x*v[0]));h===f&&(C*=-1);var w=c(C,[t*y[1]/a,-a*y[0]/t]),k=d(i(w,u),l(e,g)),O=[(y[0]-w[0])/t,(y[1]-w[1])/a],S=[(-1*y[0]-w[0])/t,(-1*y[1]-w[1])/a],A=r([1,0],O),P=r(O,S),T=A,E=A+P;p.save(),p.translate(k[0],k[1]),p.scale(t,a),p.arc(0,0,1,T,E,1-f),p.restore()}var h={};return h.drawPath=function(e,t){function a(e,t){return-1==="mlazhvcsqt".indexOf(e)?i=t:(i[0]+=t[0],i[1]+=t[1]),i.slice(0)}var r=0,n=0,i=[0,0];na(t).forEach(function(t){var o,l;switch(t.function){case"M":a(t.function,t.moves),e.moveTo(t.moves[0],t.moves[1]),r=t.moves[0],n=t.moves[1];break;case"L":for(var s=0;s<t.moves.length;s+=2)a(t.function,t.moves),e.lineTo(t.moves[s],t.moves[s+1]);break;case"l":for(var s=0;s<t.moves.length;s+=2)a(t.function,t.moves),r+=t.moves[s],n+=t.moves[s+1],e.lineTo(r,n);break;case"A":var c=[i.slice()],d=[a(t.function,t.moves.slice(-2))],h=c.concat(t.moves.slice(0,-2),d);h.push(e),u.apply(this,h);break;case"C":for(o=t.moves;o.length;)l=o.splice(0,6),e.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);break;case"c":for(o=t.moves;o.length;)l=o.splice(0,6),l[0]+=r,l[2]+=r,l[1]+=n,l[3]+=n,r+=l[4],n+=l[5],e.bezierCurveTo(l[0],l[1],l[2],l[3],r,n);break;case"Q":for(o=t.moves;o.length>0;)l=o.splice(0,6),e.quadraticCurveTo(l[0],l[1],l[2],l[3]);break;case"Z":e.closePath()}})},h.getRadianAngle=function(e){return e*kl/180},h.constant=function(e){return function(){return e}},h.pointX=function(e){return e[0]},h.pointY=function(e){return e[1]},h.rgba=function(e,t){t=Od(t,1);var a=$l(e);return"rgba("+a.r+","+a.g+","+a.b+","+t*a.opacity+")"},h.roundedRect=function(e,t,a,r,n,i,o,l){i=ea(i,r,n,!0);var s=o&&l?t-r:t,c=o&&l?t:t+r,d=o&&!l?a-n:a,u=o&&!l?a:a+n;e.moveTo(s+i.tlx,d),e.lineTo(c-i.trx,d),e.arcTo(c,d,c,d+i.trx,i.trx),e.lineTo(c,u-i.brx),e.arcTo(c,u,c-i.brx,u,i.brx),e.lineTo(s+i.blx,u),e.arcTo(s,u,s,u-i.blx,i.blx),e.lineTo(s,d+i.tlx),e.arcTo(s,d,s+i.tlx,d,i.tlx),e.closePath()},h.boundBoxWithHook=function(e,t){var a=0,r=na(t);r.forEach(function(t,n){var i=t.moves;switch(t.function.toLowerCase()){case"m":e.moveTo(i[0],i[1]);break;case"l":e.lineTo(i[0],i[1]);break;case"a":var o=r[n-1].moves,l=0==a?[o[0],i[6]]:1==a?[i[5],o[1]]:2==a?[o[0],i[6]]:[i[5],o[1]];a++,e.quadraticCurveTo(l[0],l[1],i[5],i[6])}})},h.getFontStyles=function(e,t,a,r,n,i){return si(null,t,e,a,r,n,i)},h}();$o.canvas=function(e,t,a,r){if(t){r=r||"label";var n="stacklabel"===r,i=r===qc||r===Kc,o=t.properties,l=o.rotation,s=o.dataLabels,c=ut(a)?e.renderer[a]:null,d=Pd.isQuantileColorScale(e),u=e.chartTypes[0].value==So.charttype.treemap,h=uu.getFontStyles(e,o.dataLabels,o.color,null,a,n),f=parseFloat(h["font-size"]),g=$o.canvas,p=e.labelHolderContext,y=g.getFont(h),v=g.parseTextShadow(h["text-shadow"]);t.forEach(function(t,r){var n=c&&c.seriesdataAfterUpdate?c.seriesdataAfterUpdate[r]:null;t.forEach(function(t,r){p.save();var c,m,x,b,C=t.xy||[t.X,t.Y],w=t.display,k=El;if(d||o.rp.threshold||e.dataObject.isHierarchy||!(e.isAxisCategory||e.dataObject.isPolarAxisCategory||e.dataObject.isNonAxisMultiSeriesCategory)||o.multiColoring){var O=u&&i?o.dataUpdate[r]:n&&n[r],S=Ra(e,o.multiColoring?r:a,O&&O.data?O.data:O,a);u&&i&&/(top-outset|bottom-outset)/.test(s.position)&&$l(S).opacity<.1&&(S="white"),k=ci(e.systemConf,S,s,e)}w===!0&&(c=C[0],m=C[1],x=t.customHTML?0:parseFloat(t.DY||0),b=t.height,x=(t.tspanInfo||1===x?f:b)*x,ut(l)&&0!==l?(e.axes.rotated&&(x=-1*x),p.translate(c+x,m),p.rotate(uu.getRadianAngle(l))):p.translate(c,m+x),ut(t.ANCHOR)&&(p.textAlign=g.align(t.ANCHOR)),t.customHTML?t.customHTML.forEach(function(a){g.drawCustomHTML(e,p,t,a,h,y,v,k)}):t.tspanInfo?t.tspanInfo.forEach(function(e){var t,a,r,n=e.style;n&&(t=g.getFont(h,n),r=n.fill,a=parseFloat(n["font-size"])),g.createText(p,e.text,t||y,r||k||h.color,v,El,[e.dx||0,(a||f)*e.dy])}):g.createText(p,t.text,y,k||h.color,v,h),p.restore())})})}},Jo.canvas=function(){function e(e,a){e.each(function(){if(t){var e=t.properties,r=e.rp.chartObj,n=uu.rgba,i=r.labelHolderContext;if(!ut(i))return!1;if(ai(e.dataLabels,r)){var o=ti(e.dataLabels,r),l=oi(o.hook),s=e.dataUpdate,c=e.rotation||0,d=ri(e.dataLabels,r),u=r.dataObject.getTransRectValue("radius",null,null,null,null,o.radius),h=ut(o.strokeWidth)?+o.strokeWidth:1,f=P(o.dashStyle,h),g=T(o.lineCap,o.dashStyle),p=Yl();t.forEach(function(t){t.forEach(function(t,y){var v=t.display;if(v===!0){var m=t.xy||[t.X,t.Y],x=m[0],b=m[1],C=void 0!==t.actualDY?t.actualDY:parseFloat(t.DY)||0,w=t.height,k=t.width,O=ei(o.strokeColor,e,r,s,a);"function"==typeof O&&(O=O(s&&s[y],y));var S=ei(o.fillColor,e,r,s,a);if("function"==typeof S&&(S=S(s&&s[y],y)),i.save(),ut(c)&&0!==c){var A=0,P=0;r.axes.rotated?A=-1*C*w:(P=("middle"===t.ANCHOR?k/2:"end"===t.ANCHOR?-k:0)+d,A=-p.domain([-.3,.9]).range([w,0])(C)-d),i.translate(x+A,b+P),i.rotate(uu.getRadianAngle(c))}else x=("middle"===t.ANCHOR?x-k/2:"end"===t.ANCHOR?x-k:x)-d,b=b-p.domain([-.3,1]).range([w,0])(C)-d,i.translate(x,b);i.fillStyle=n(S,o.fillOpacity),i.strokeStyle=n(O,o.strokeOpacity),i.lineWidth=h,f&&ut(i.setLineDash)&&(i.setLineDash(f),i.lineCap=g),i.beginPath(),i.translate(-x,-b),uu.boundBoxWithHook(i,zn(x,b,k,w,u,d,t.hookPosition,l,t.adjustVal)),i.fill(),i.stroke(),i.closePath(),i.restore()}})})}}})}var t;return e.args=function(a){return arguments.length?(t=a,e):t},e},$o.canvas.drawCustomHTML=function(e,t,a,r,n,i,o,l){var s=$o.canvas,c=a.xy||[a.X,a.Y],d=r.bb,u=r.node;switch(r.nodeName){case"image":var h=Rl(u),f=+h.attr("x")||0,g=+h.attr("y")||0,p=+h.attr("width")||0,y=+h.attr("height")||0,v=h.attr("href")||h.attr("xlink:href"),m=new Image;m.onload=function(){t.drawImage(m,c[0]+f,c[1]+g,p,y)},m.src=v;break;case"rect":var h=Rl(u),f=+h.attr("x")||0,g=+h.attr("y")||0,p=+h.attr("width")||0,y=+h.attr("height")||0,x=+h.attr("rx")||0;t.fillStyle=h.style("fill"),t.strokeStyle=h.style("stroke"),t.lineWidth=h.style("stroke-width"),t.beginPath(),uu.roundedRect(t,f,g,p,y,e.dataObject.getTransRectValue("radius",El,El,El,El,x)),t.fill(),t.stroke(),t.closePath();break;case"text":case"tspan":var b,C,w=u.style;w&&(b=s.getFont(n,w),C=w.fill),t.translate(d.x,d.y+.77*d.height),t.textAlign=s.align("start"),s.createText(t,u.textContent,b||i,C||l||n.color,o),t.translate(-d.x,-d.y-.77*d.height)}},$o.canvas.align=function(e){switch(e.toLocaleLowerCase()){case"start":return mc;case"middle":return vc;case"end":return xc}},$o.canvas.getFont=function(e,t){var a="normal",r=t&&t["font-style"]||e["font-style"]||a,n=t&&t["font-weight"]||e["font-weight"]||a,i=t&&t["font-size"]||e["font-size"],o=t&&t["font-family"]||e["font-family"];return r+" "+a+" "+n+" "+i+" "+o},$o.canvas.parseTextShadow=function(e){return(e=e&&e.trim())?e.split(/\\s+/).map(function(e){var a=t(e);return isNaN(a)?e:a}):void 0},$o.canvas.addTextShadow=function(e,t){ut(t)&&(e.shadowOffsetX=t[0],e.shadowOffsetY=t[1],e.shadowBlur=t[2],e.shadowColor=t[3])},$o.canvas.createText=function(e,t,a,r,n,i,o){o=o||[0,0],e.font=a,e.fillStyle=uu.rgba(r||i.color,lt(i&&i["fill-opacity"],1)),$o.canvas.addTextShadow(e,n),e.fillText(t||"",o[0],o[1])};var hu=function(){};hu.canvasPatternFill=function(e,t){var a,r,n,i;return n=document.createElement("canvas"),i=n.getContext("2d"),r=e.ele?qn(e,t):Kn(e,t),a=i.createPattern(r,"repeat")},hu.imageFill=function(e,t){Zn(e.name,e,t)};var fu=function(){var e={},t=function(t,a,r,n){if(/threshold/gi.test(a))return e[a](t,r,n);var i=ud.SAFARI;ud.SAFARI=0;var o=gradients.getStops({},r,r.color,a),l=e[a](t,r,o);return ud.SAFARI=i,l},r=e.canvasGradientFill=function(e,t,a,r,n,i){return ut(i.context)||(i.context=document.createElement("canvas").getContext("2d")),e&&e.type?fu[e.type](e,t,a,r,n,i):null},n=e.linear=function(e,t,r,n,i,o){var s,c,d,u,h=o.context,f=e.dimension,g=e.spreadMethod,p=+e.x1||0,y=+e.x2||0,v=+e.y1||0,m=+e.y2||0,x=V({},e,e.color,"linear"),b="repeat"!==g&&"reflect"!==g||!ud.IS_IOS&&!ud.SAFARI?100:ul(fl(y-p),fl(m-v));a(f)?(s=0,c=f[0],d=0,u=f[1]):(s=f.x1||0,c=f.x2||0,d=f.y1||0,u=f.y2||0);var C=Yl().domain([0,100]).range([s,c].sort(is)),w=Yl().domain([0,100]).range([d,u].sort(is)),k=C(100*p/b),p=C(100*y/b),O=w(100*v/b),v=w(100*m/b),S=h.createLinearGradient(k,O,p,v);return l(S,x,e.opacity),S},i=e.radial=function(e,t,r,n,i,o){var s=o.context,c=e.dimension,d=e.spreadMethod,u=V({},e,e.color,"radial"),h=a(c)?ut(c[2])?c[2]:c[0]:c.r,f=a(c)?h:c.x2-c.x1,g=a(c)?h:c.y2-c.y1,p=f/100*e.x||0,y=g/100*e.y||0,v="repeat"!==d&&"reflect"!==d||!ud.IS_IOS&&!ud.SAFARI?h/100*e.radius:h,m=s.createRadialGradient(p,y,0,p,y,v);return l(m,u,e.opacity),m},o=e.thresholdLinear=function(e,t,a,r,n,i){var o=i.context,s={opacity:[],offset:[],color:[]};a.forEach(function(e){s.opacity.push(1),s.offset.push(e.offset),s.color.push(e.color)});var c=o.createLinearGradient(e.x1,e.y1,e.x2,e.y2);return l(c,s,e.opacity),c},l=function(e,t,a){var r=t.offset.length,n=-1;for(a=a||1;++n<r;){var i=fl(1-(lt(t.opacity[n],1)+a)),o=uu.rgba(t.color[n],i);e.addColorStop(parseFloat(t.offset[n])/100,o)}},s={};return s.create=t,s.linear=n,s.radial=i,s.thresholdLinear=o,s.canvasGradientFill=r,So.canvasGradient?So.canvasGradient:s}();So.labelRenderer=function(){},So.labelRenderer.drawLabelsFromQueue=function(e,t,a){if(a.labelHandler=null,"image"!==a.plot.renderer.mode){var r=a.dataObject;if(a.isAxisCategory){var n=function(){var e=r.groupedByStack;e.keys().forEach(function(t,n){var i=e.get(t),o=i.stackLabelIndex;if((r.noofBarEnabledSeries||r.isCombinationalChart)&&null!=o){var l={renderer:a.renderer[o],chartObj:a,args:[{data:[i.stackExtent]},o,Qc,n],charttype:Tc};So.labelRenderer.drawLabel(l)}})};n()}e.forEach(function(e){So.labelRenderer.drawLabel(e)});var i=$n(a),o=t.length,l={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom},s=function(){var e=r.isContinousChart;t=e?t.sort(function(e,t){return is(e.x1,t.x1)}):t;for(var a=1;o>a;a++){var n,i,s,c=0,d=!1,u=0,h=t[a].pointRadius||0,f=t[a].x1,g=t[a].y1,p=t[a].x2,y=t[a].y2,v=t[a].x2-t[a].x1,m=t[a].y2-t[a].y1,x=t.slice(0,a);x=e?x.reverse():x;do{switch(u){case 0:n=t[a],i="hidden"===n.overlap||r.isBubbleEnabled;break;case 1:n.y1=g-m/2,n.y2=y-m/2,s=bc;break;case 2:n.x1=(f+p)/2+h,n.x2=(f+p)/2+h+v,n.y1=y+1,n.y2=y+m+1,s=mc;break;case 3:n.x1=f,n.x2=p,n.y1=y+2*(h+1),n.y2=y+2*(h+1)+m,s=Cc;break;case 4:n.x1=(f+p)/2-h-v,n.x2=(f+p)/2-h,n.y1=y+1,n.y2=y+m+1,s=xc}for(var b=a-1;b>=0;b--)if(d=_a(x[b],n)){c++;break}}while(++u<5&&d);if(0!=c){var C=r.isPolarAxisCategory?!0:di(n,l),w=t[a].translateFunction,k=t[a].id,O=t[a].isStackedLabels;if(!C||5==c||i)w(k,null,null,!0,ol,ol,O?Qc:Zc),t[a].x1=t[a].y1=t[a].x2=t[a].y2=0;else{var S=n.x1-f,A=n.y1-g;w(k,S,A,null,void 0,s,O?Qc:Zc)}}}},c=function(){var e=r.getAxisRotated();t.sort(function(t,a){return e?os(t.y1,a.y1):is(t.x1,a.x1)});for(var a=0;o>a;a++){for(var n=!1,i=0,s=0,c=t[a].x1,d=t[a].y1,u=t[a],h=t.slice(0,a).sort(function(t,a){return e?os(t.x1,a.x1):is(t.y1,a.y1)}),f="hidden"===u.overlap,g=a-1;g>=0&&2>i;g--){var p=_a(h[g],u);p&&(e?(s=h[g].x2-u.x1,u.x2+=s,u.x1+=s):(s=h[g].y1-u.y2,u.y2+=s,u.y1+=s),i++),n=n||p}if(n){var y=di(u,l),v=t[a].translateFunction,m=t[a].id,x=t[a].isStackedLabels;if(!y||i>1||f)v(m,null,null,!0,ol,ol,x?Qc:Zc),t[a].x1=t[a].y1=t[a].x2=t[a].y2=0;\nelse{var b=u.x1-c,C=u.y1-d;v(m,b,C,ol,ol,ol,x?Qc:Zc)}}}},d=function(){if(o){var r,n,i,l=[],s=[],c=t.TOP,d=t.BOTTOM,u=0,h=0,f=[],g=[],p=0,y=0,v=0,m=0;t.forEach(function(e){var t=e.isLeft;if(t){var a=Pi(e,i,c,d,r,s,h,m,!0);i=a.totalslot,r=a.prev,h=a.count,m=a.need}else{var a=Pi(e,i,c,d,n,l,u,v);i=a.totalslot,n=a.prev,u=a.count,v=a.need}}),v||m?("funnel"===t.actualType&&l.reverse(),p=Ai(l,p,f,c),s.reverse(),y=Ai(s,y,g,c),Si(f,c,i,p),Si(g,c,i,y),t.forEach(function(e){a.labelHandler.update(e.id,e.DX,e.translate||0,e.hide,void 0,e.overlappingHookPosition)}),e.forEach(function(e){var t=e.args[1],r=a.labelHandler.getQueue(t);r&&r.properties&&r.properties.onOverlap&&r.properties.onOverlap()})):(e.forEach(function(e){var t=e.args[1],r=a.labelHandler.getQueue(t);r&&r.properties&&r.properties.onNonOverlap&&r.properties.onNonOverlap()}),t.forEach(function(e){a.labelHandler.update(e.id,0,0,null,e.actualDY)}))}};if((r.isCombinationalChart||r.isContinousChart||r.isPolarAxisCategory?s:r.noofBarEnabledSeries?c:d)(),a.staticPaneSVG.select(".temp_label").remove(),a.labelHandler){var u=a.staticPaneSVG.selectAll("g.labelholder"),h=a.plot.renderer.mode;e.forEach(function(e){var t=e.args[1],n=r.isAxisCategory?e.args[3]:null,i=/(pieInnerLabels|funnelInnerLabels)/.test(e.charttype),o="pieInnerLabels"===e.charttype&&Xr(a.chartTypes[t].value)&&e.args[e.args.length-1]?Kc:i?qc:Zc,l=a.labelHandler.getQueue(t,n,o),s=Jo[h]().args(l);u.call(s,t,o)}),a.labelHandler.draw()}}},So.labelRenderer.drawLabel=function(e){var t=e.chartObj,a=e.renderer,r=e.charttype,n=e.args,i=t.staticPaneSVG.selectAll("g.labelholder"),o=t.labelHandler;t.labelHandler||(o=t.labelHandler=$o.initialize(t),o.chartType=r);var l=So.labelRenderer[r]();l.renderer(a).args(n),i.call(l,o)},So.labelRenderer.bar=function(){function e(e,c){e.each(function(){function e(){if(Q===Ns){var e=C.domain();return C(e[e.length-1])+C.bandwidth()/2}var t=y.dataObject.rangeCorrections.datalabels,a=[0],r=i?U?1:-1:U?-1:1;for(var n in t)n.indexOf("y")>-1&&a.push(t[n]);return C(C.domain()[1])+Bl(a)*r}var d,u=n[0],h=n[1],f=n[2]||Zc,g=r.commonRendererProp().params,p=u.plotoptions,y=g.chartObj,v=y.systemConf,m=g.commonPlotOptions,x=g.dataset,b=g.stacked,C=g.yscale,w=g.yaxiscolumnorder,k=g.labelArray,O=f===Qc,S="canvas"===y.plot.renderer.mode;i=g.axisrotated,d=li(m,O?El:p,y,h),O&&(d=d.stackLabels);var A=O?hi(d,y):ui(d,y);if(!u.disabled&&A){var P=$n(y),T=d.textOverlap,E=So.labelRenderer.bar.getVAlign(y,h,f),L=d.showZeros,z=Va(m,y),D=P.left,M=P.top,j=P.right,R=P.bottom,I=y.svg.node().getBoundingClientRect(),H=I.left+y.plotarea.left,B=I.top+y.plotarea.top,F=.75*(i?y.plotarea.width:y.plotarea.height),V=vi(y,g,d,f,El,h),N=V.contentType||"text",_="html"===N&&V.multiLine,W=E===wc,Y=s.isCatNull(x,"x"),X=s.isCatNull(x,"y",w),U=v.chart.axes.yaxis[w||0].reversed,G=y.barscale2.bandwidth()||0,Z=da(d,y),Q=y.dataset.getDataType("y",w);if(!W||y.dataObject.rangeCorrections.datalabels["y"+w]){var K=0,$=0,J=0,et=0,tt=0;if(ai(d,y)){var at=ti(d,y),rt=oi(at.hook);K=ri(d,y),$=ni(d,y),J=b||E===Pc?0:rt.height,et=rt.width,tt=at.radius}var it="clip"===T,ot=v.chart.plot.datalabels.handleOverlapping&&T!==Al,st=ul(0,lt(d.padding,2))+K+J+(W&&$?$/2-1:0),ct=W&&e();st=st>F?F:st,o=d.textDirection,o=!o||b&&!O?i?kc:Oc:o,l=i?o==Oc?90:0:o==Oc?0:270;var dt=r.commonOption,ht=function(){return y.dataObject.getTransRectValue.apply(y.dataObject,nt(arguments))},ft=Qt(y.staticPaneSVG.select(".labelholder"),Ys,[1],".","class","temp_label"),gt=c.update,pt=c.add;u.data.forEach(function(e,n){var s=r.seriesdataAfterUpdate&&!O?r.seriesdataAfterUpdate[n]:u.data[n];if(O){var c=v.chart.scroll;c&&c.enabled&&(s=a(s,g.xscale.domain())),W&&C.domain()[0]<0&&(s=t(s))}var f=[];si(ft,d,y,g.color,!1,h),ft.styles({fill:Pl}),s.forEach(function(e,t){var a,r=El,s=U?-1:1,c=O?e[1]<0:x.getY(e,w)<0;ft[N](function(){if(O){{var t=e[1];e[0]}a=L||0!=t?V(e):El}else a=Y(x.getX(e))||X(x.getY(e,w))||!L&&0==x.getY(e,w)?El:V(e);return a}),_&&bi(ft,0);var u,g,p,v,m,A;r=q(ft.node());var P=0,z=0;if(O){var I=dt.bandwidth1(e[0])+dt.bandwidth2(dt.stackGroupIndex),F=C(e[2]||e[1]);u=i?F:I,g=i?I:F,i?o==Oc?(u+=(c?-st:st)*s,p=U?c?"-0.3em":"1em":c?"1em":"-0.3em"):(g+=G/2,p="0.3em",W?(u=ct+st*s+(_?0:0)*s,v=U?"end":El):(u+=(c?-st:st)*s,v=U?c?El:"end":c?"end":El,_&&(u+=r.width/2*(c?-1:1)*s))):(u+=G/2,g+=(c?st:-st)*s,o==kc?(p="0.3em",v=U?c?El:"end":c?"end":El):(v="middle",W?(g=ct-st*s,p=U?"1em":"-0.3em"):p=U?c?"-0.3em":"1em":c?"1em":"-0.3em"))}else{var Q=r,I=ht("x",e,n,t,dt)||0,F=ht("y",e,n,t,dt)||0,at=ht("width",e,n,t,dt)||0,rt=ht("height",e,n,t,dt)||0,nt=it;if(u=I,g=F,i)b?(g+=rt/2,p="0.3em",E==Pc?(u+=at/2*s,v="middle"):E==Cc?(u+=(c?st:at-st)*s,v=U?c?"end":El:c?El:"end",_&&!W&&(u+=Q.width/2*(c?1:-1)*s)):(u+=(c?at-st:st)*s,v=U?c?El:"end":c?"end":El,_&&!W&&(u+=Q.width/2*(c?-1:1)*s))):o==kc?(z=ii(r.height,K,tt,et),g+=rt/2+z/2,p="0.3em",nt=nt&&E!=Cc&&Q.width>at,m=U?c?mc:xc:c?xc:mc,W?(v=U?"end":El,u=ct+st*s+(_?0:0)*s,m=U?xc:mc):nt?E==bc?u+=U?c?-at+st:-at:c?0:st:E==Pc&&(u+=U?-at+K:K):(v=U?c?El:"end":c?"end":El,E==Pc?(u+=(Q.width>at?c?at:0:at/2)*s,v=Q.width>at?v:"middle"):u+=E==Cc?(c?-st:at+st)*s:(c?at-st:st)*s,!_||E===Pc&&Q.width<=at||(u+=(c?-r.width/2:r.width/2)*s))):(P=ii(r.width,K,tt,et),p=U?c?"-0.3em":"1em":c?"1em":"-0.3em",nt=nt&&Q.width>rt,m=U?c?bc:Cc:c?Cc:bc,E==Pc?(Q.height>at?_?(u+=(U?c?at:0:c?0:at)*s,u+=U?Q.height/2*(c?1:-1):0):u+=(U?c?0:at:c?at:0)*s:u+=at/2*s,p=Q.height>at?p:"0.3em"):u+=E==Cc?(c?-st:at+st)*s:(c?at-st:st)*s,nt?(u+=P/2,g+=K):(g+=rt/2,v="middle",E==Pc&&(p="0.3em")));else if(b)u+=at/2,v="middle",E==Pc?(g+=rt/2*s,p="0.3em"):E==Cc?(g+=(c?rt-st:st)*s,p=U?c?"1em":"-0.3em":c?"-0.3em":"1em"):(g+=(c?st:rt-st)*s,p=U?c?"-0.3em":"1em":c?"1em":"-0.3em");else if(o==kc){z=ii(r.height,K,tt,et);var lt=!U&&c||U&&!c?Q.width:0;nt=nt&&E!=Cc&&Q.width+st>rt,p="0.3em",m=U?c?mc:xc:c?xc:mc,nt?(u+=at/2,g+=E==Pc?U?K:rt-K:U?c?-st:0:rt+(c?0:-st)):(u+=at/2,E==Pc?(g+=Q.width>rt?_?(c?r.width/2:rt-r.width/2)*s:(c?0:rt)*s+lt:rt/2*s,v=Q.width>rt?El:"middle"):E==Cc?(g+=(c?rt+st:-st)*s+lt,_&&(g-=r.width/2)):(g+=(c?st:rt-st)*s+lt,_&&(g-=r.width/2)))}else P=ii(r.width,K,tt,et),nt=nt&&Q.width+2*K>at,p=U?c?"-0.3em":"1em":c?"1em":"-0.3em",m=U?c?bc:Cc:c?Cc:bc,W?(g=ct-st*s,m=U?Cc:bc,p=U?"1em":"-0.3em"):E==Pc?(g+=(Q.height<rt?rt/2:c?0:rt)*s,p=Q.height<rt?"0.3em":p):g+=E==Cc?(c?rt+st:-st)*s:(c?st:rt-st)*s,nt?u+=K:(u+=at/2,v="middle")}if(_){p=parseFloat(p);var pt=1.1*(d.showAs.length-1);p===-.3?(A=p,p-=pt):.3===p&&(A=p,p-=pt/2),p+="em",nt||W||(v="middle")}if(ft.attrs({x:u,y:g,dy:p,"text-anchor":v,transform:"rotate("+l+" "+u+" "+g+")"}),W&&jt!==!1){var yt=ka(ut(d.maxWidth)?d.maxWidth:"30%",y.plotarea.width);if("html"===N){bi(ft,u);var vt=q(ft.node()),mt={left:vt.x,top:vt.y,right:vt.x+yt,bottom:vt.y+vt.height},xt=(vt.width,wi(ft,Z));Ci(ft,y,[0,0],0,mt,xt),a=ft.html()}else{var vt=q(ft.node()),mt={left:vt.x,top:vt.y,right:vt.x+yt,bottom:vt.y+vt.height};gi(ft,y,[0,0],0,mt),a=ft.text()}}var bt=0,Ct=0,wt=0,kt=0;if(m=E===Pc?El:m,i?kt=(o===Oc?P:z)/2:wt=(o===Oc?P:z)/2,!it){_&&bi(ft,u);var Ot=K+$/2,St=0,At=0,Q=ft.node().getBoundingClientRect(),Pt=Q.left-H-Ot-wt-St,Tt=Pt+Q.width+2*Ot+2*wt,Et=Q.top-B-Ot-kt-At,Lt=Et+Q.height+2*Ot+2*kt,zt=u+(D>Pt?D-Pt:Tt>j?-(Tt-j):0);zt==u||W&&i||(bt=zt-u,u=zt);var Dt=g+(M>Et?M-Et:Lt>R?-(Lt-R):0);Dt==g||W&&!i||(Ct=Dt-g,g=Dt)}var Mt=ja(x.getClr(e),y),jt=O||Mt;if(ot)if(b&&!O){ft.attrs({x:u,y:g}),_&&bi(ft,u),r=q(ft.node());var I=ht("x",e,n,t,dt)||0,F=ht("y",e,n,t,dt)||0,rt=ht("height",e,n,t,dt)||0,at=ht("width",e,n,t,dt)||0;U&&(i?I-=at:F-=rt);var Rt={x1:r.x-K,y1:r.y-K,x2:r.x+r.width+K,y2:r.y+r.height+K},It={x1:I,y1:F,x2:I+at,y2:F+rt},Ht=di(Rt,It);Ht||(jt=!1)}else if(!it||O){_&&bi(ft,u);var Q=ft.node().getBoundingClientRect(),Bt=Q.left-H,Ft=Q.top-B,Vt={id:"lbl"+h+"_"+n+"_"+t,translateFunction:gt,isStackedLabels:O,x1:Bt-K+bt-wt,y1:Ft-K+Ct-kt,x2:Bt+Q.width+K+bt+(l?J+2*$:0)+wt,y2:Ft+Q.height+K+Ct+(l?0:J+2*$)+kt,overlap:W&&"hidden"!==T&&T!==Al?"hidden":T};k.push(Vt)}else{if(o!=Oc){var Nt=ht(i?"width":"height",e,n,t,dt)||0;at=E==Cc?r.width:Nt-(E==bc?st+K:2*K)}else at=G-2*K;r.width=hl(at,r.width)}var _t={X:u,Y:g,DY:p,ANCHOR:v,text:a,display:jt,height:r.height+z,width:r.width+P,hookPosition:m,adjustVal:o===Oc?i?Ct:bt:El};void 0!==A&&(_t.actualDY=A),S&&"html"===N&&(_t.tspanInfo=wi(ft,Z)),f.push(_t)}),f.dataUpdate=s;var p=pt(f,h,n,El,O?Qc:El);p.properties={type:Tc,dataLabels:d,rotation:l,color:g.color,dataUpdate:s,showlabel:A,multiColoring:z,textDirection:o,rp:g,contentType:N,isMultiLine:_}})}}})}function t(e){var t=ts();return e.filter(function(e){var a=e[0];return t.has(a)?!1:(t.add(a),!0)})}function a(e,t){return e.filter(function(e){var a=e[0];return t.indexOf(a)>-1})}var r,n,i,o,l,s=So.DataProcessor.helpers;return e.renderer=function(t){return arguments.length?(r=t,e):r},e.args=function(t){return arguments.length?(n=t,e):n},e},So.labelRenderer.bar.getVAlign=function(e,t,a){if(e.dataObject.noofBarEnabledSeries){var r=a===Qc,n=e.systemConf.chart.plot.plotoptions[e.chartTypes[t].name],i=li(n,r?El:e.seriesdata[t].plotoptions,e,t);r&&(i=i.stackLabels);var o=e.dataObject,l=o.getAxisRotated(),s=o.isstacked(),c=i.labelPos||Cc,d=i.textDirection,u=r?hi(i,e):ui(i,e);return u?(d=!d||s&&!r?l?kc:Oc:d,a===Zc&&c===wc&&(s||l&&d!==kc||!l&&d===kc)&&(c=Cc),c):void 0}},So.labelRenderer.pie=function(){function e(e,c){e.each(function(){var e=n[0],d=n[2],u=n[3],h=n[4],f=n[5],g="translate("+n[8][0]+","+n[8][1]+")",p=n[9]||{},y=r.commonRendererProp().params;l=y.chartObj,s=l.dataset;var v,m=l.systemConf,x=y.commonPlotOptions,b=y.labelArray,C=y.datasetIndex||n[1]||0,w=(r.plotarea?r.plotarea():l.plotarea).height;o=Xr(l.chartTypes[C].value),e=e[C],i=n[6];var k,O,S,A,P=m.chart.plot.datalabels.handleOverlapping===!0,T=e.plotoptions,v=li(x,T,l,C);if(A=ui(v,l),!e.disabled&&A){var E=v.type,L=v.line,z=vi(l,y,v,Zc,h,C),D=z.contentType||"text",M="html"===D,j=M&&z.multiLine,R=0,I=0,H=0,B=0;if(ai(v,l)){var F=ti(v,l),V=oi(F.hook);R=ri(v,l),I=R+ni(v,l)+V.height,H=V.width,B=F.radius}A=A?E:"hidden",k=(p.padding||+(v.padding||0))+I,S=da(v,l),O=+(So.utils.getValueOfPlotOptions(T,x)("outerPadding")||0),r.autoLabelDone=!1,r.showlabel=A,r.lineStrokeWidth=lt(L.strokeWidth,1);var N=Qt(l.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");N.attr("transform",g);var _=c.add;(o?e:e.data).forEach(function(e,s){var c=r.seriesdataAfterUpdate?r.seriesdataAfterUpdate[s]:o?e:d,h=[];si(N,v,l,y.color),N.style("fill",Pl),c.forEach(function(e,n){var i,l=null,c=!t(e),d=0,g=a(e),p=0>g||g>kl,y="doubleside"==A?0>g||g>kl?-(u+k):u+k:f.centroid(e)[0],v=f.centroid(e)[1]+ul(0,S-O-10-(u+f.centroid(e)[1])),m=j?"middle":p?"end":"start",x=j?"0.9em":"circular"==A&&g>kl/2&&3*kl/2>g?Oa(g)+"em":"0.3em",w=x,T=e.data,E=o?0==e.depth:t(e);if(i=E?null:z(T),N[D](i).attrs({x:y,y:v,dy:x,"text-anchor":m}),c&&j){bi(N,y);var l=q(N.node());if("circular"==A){var L=Yl().range([-1,0]).domain(kl>g?[0,kl]:[2*kl,kl]);v+=L(g)*l.height,y+=(g>0&&kl>g?.5:g>kl&&2*kl>g?-.5:0)*l.width}else v-=.5*l.height,y-=l.width/2*(p?1:-1);N.attr("y",v),bi(N,y)}if(P){r.showlabel="auto";var F=5,V=10;if(j||(x="0.3em",N.attr("dy",x)),c){l=q(N.node()),d=ii(l.height,R,B,H);var _=p?-(u+k+V):u+k+V;j&&(_+=l.width/2*(p?-1:1));var W={id:"lbl"+C+"_"+s+"_"+n,x1:l.x-I,x2:l.x+l.width+I,y1:l.y-F-I-d/2,y2:l.y+l.height+F+I+d/2,isLeft:p,actualDY:w,DX:_-y,overlappingHookPosition:p?xc:mc};b.push(W)}}else l=q(N.node()),d=ii(l.height,R,B,H);var Y={X:y,Y:v,DY:x,ANCHOR:m,text:i,display:c,ID:"lbl"+C+"_"+s+"_"+n,width:c?l.width:0,height:c?l.height+d:0,hookPosition:"circular"===A?null:p?xc:mc};M&&(Y.isLeft=p),h.push(Y)});var p=_(h,C,s);p.properties={type:Bc,dataLabels:v,dataUpdate:c,showlabel:r.showlabel,rp:y,translation:g,trans:n[8],txtHgt:S,isSunburst:o,connectorPath:function(e){var t=a(e),r="M "+i.centroid(e)[0]+" "+i.centroid(e)[1]+" L"+f.centroid(e)[0]+" "+f.centroid(e)[1];return r+" L"+f.centroid(e)[0]+" "+f.centroid(e)[1]+" L"+(0>t||t>kl?-(u+k-I):u+k-I)+" "+f.centroid(e)[1]},onNonOverlap:function(){p.properties.showlabel=r.showlabel=A,r.autoLabelDone=!0},onOverlap:function(){p.properties.connectorPath=function(e,t){var r=10,n=a(e),o=ul(0,S-O-10-(u+f.centroid(e)[1])),l=f.centroid(e)[1]+o,s=0>n||n>kl?-1:1,c=p[0][t].Y+(j?p[0][t].height/2:0),d=c-l?(u+k-I+r)*s:f.centroid(e)[0],h=f.centroid(e)[1],g=(u+k-I+r)*s,y=c,v="M "+i.centroid(e)[0]+" "+i.centroid(e)[1]+" Q "+d+" "+h+" "+g+" "+y;return v}},contentType:D,isMultiLine:j},b.TOP=-n[8][1],b.BOTTOM=w-n[8][1]})}})}function t(e){var t=ja(s.getClr(o?e:e.data),l);return!t||(o?null==e.parent||0==e.value:0==e.value)}function a(e){var t=o?i.startAngle()(e):e.startAngle,a=o?i.endAngle()(e):e.endAngle;return(t+a)/2}var r,n,i,o,l,s;return e.renderer=function(t){return arguments.length?(r=t,e):r},e.args=function(t){return arguments.length?(n=t,e):n},e},So.labelRenderer.dial=function(){function e(e,r,n){e.each(function(){var e=a[0],i=a[1],o=t.commonRendererProp().params,l=o.chartObj,s=o.commonPlotOptions,c=o.color,d=e.plotoptions,u=l.plotarea_approx,h=l.axes.y.groups[0].scale.domain(),f=li(s,d,l,i),g=ui(f,l),p=vi(l,o,f,Zc,h[1]-h[0],0),y=p.contentType||"text",v="html"===y&&p.multiLine;if(g){var m=ai(f,l)?ri(f,l)+ni(f,l):0,x=Qt(l.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");si(x,f,l,c[0]),x.style("fill",Pl);var b=[l.userdata.seriesdata.chartdata[0].data[0][0]],C=[],w=0;if(b.forEach(function(e,t){var a="middle",r=v?"0.9em":"-.3em",n=p(e),o=!0;x[y](n).attrs({x:d,dy:r,"text-anchor":a});var c=q(x.node()),d=ut(f.x)?it(f.x,e,l,c):u.x,h=ut(f.y)?it(f.y,e,l,c):u.y+(s.needle.show?c.height+(+f.padding||0)+(+s.needle.width/2||7)+m:c.height/2);v&&(ut(f.y)||(h-=c.height),bi(x,d),c=q(x.node()));var g={X:d,Y:h,DY:r,ANCHOR:a,text:n,display:o,ID:"lbl"+i+"_"+w+"_"+t,width:c.width,height:c.height};C.push(g)}),n){var k=C[0],O=Qt(n,"text",g?b:[]);si(O,f,l,c[0]),O[y](k.text).attrs({"text-anchor":k.ANCHOR,dy:k.DY,transform:"translate("+k.X+","+k.Y+")"}),v&&bi(x,k.X)}else{var S=r.add,A=S(C,i,w);A.properties={type:Fc,dataLabels:f,dataUpdate:b,showlabel:g,rp:o,contentType:y,isMultiLine:v}}}})}var t,a;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},So.labelRenderer.funnel=function(){function e(e,n){e.each(function(){function e(e){var t=h[G-1-e],a=ja(O.getClr(t),C);return t.disabled||!O.getY(t,S)||!a}function i(e){switch(X){case"singleside":return!1;case"doubleside":return e%2==0;case"strokeddoubleside":return e>=f/2}}function o(e,t){return i(t)?e.leftx+H:e.rightx-H}function l(e,t,a){var r=i(t);return U&&"overlap"!=s?r?e.leftx-D:e.rightx+D:(a=ut(a)?a:H,r?0-a:m+a)}var s,c,d=a[0],u=a[1],h=a[2],f=a[3],g=a[4],p=a[5],y=a[6],v=a[7],m=y.width,x=y.height,b=t.commonRendererProp().params,C=b.chartObj,w=C.systemConf,k=b.commonPlotOptions,O=b.dataset,S=b.yaxiscolumnorder,A=b.labelArray,P=C.chartTypes[0].name,T=C.svg.selectAll("g."+P+"group").attr("transform"),E=P===Nc;d=d[u];var L=d.plotoptions,z=0,D=0,M=0,j=0;if(c=li(k,L,C,u),ai(c,C)){var R=ti(c,C),I=oi(R.hook);z=ri(c,C),D=z+ni(c,C)+I.height,M=I.width,j=R.radius}var H=y.datalabelPadding||+c.padding||0,B=c.type,F=w.chart.plot.datalabels.handleOverlapping===!0,V=da(c,C),N=vi(C,b,c,Zc,p,u),_=N.contentType||"text",W="html"===_,Y=W&&N.multiLine,X=ui(c,C),U=c.relativeX===!0;if(X){X=X?B:"hidden";var G=h.length,Z=$t(C.svg.selectAll("g."+P+"group")).translate,Q=0,K=Qt(C.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");si(K,c,C,b.color),K.attr("transform",T).style("fill",Pl);var $=n.add;d.data.forEach(function(t,a){var n=v,d=[];n.forEach(function(t,n){var o,s=!e(n),c=i(Q),f=0,p=l(t,Q)+(c?-D:D),y=E&&c?t.leftY:ul(t.y,V-g-t.y),v=Y?"middle":c?"end":null,x=Y?"0.9em":"0.3em",b=t.data=h[G-1-n],C=N(b);if(K[_](C).attrs({x:p,y:y,"text-anchor":v,dy:x}),s&&Y){bi(K,p);var o=q(K.node());y-=o.height/2,p+=o.width/2*(c?-1:1),bi(K,p),K.attr("y",y)}if(F){if(s){o=q(K.node()),f=ii(o.height,z,j,M);var w=c?-(0+H+D):m+H+D;Y&&(w+=o.width/2*(c?-1:1));var k={id:"lbl"+u+"_"+a+"_"+n,x1:o.x-D,x2:o.x+o.width+D,y1:o.y-r-D-f/2,isLeft:c,y2:o.y+o.height+r+D+f/2,DX:w-p};A.push(k)}}else o=q(K.node()),f=ii(o.height,z,j,M);var O={X:p,Y:y,ANCHOR:v,DY:x,text:C,display:s,ID:"lbl"+u+"_"+a+"_"+n,width:s?o.width:0,height:s?o.height+f:0,hookPosition:c?xc:mc};W&&(O.isLeft=c),d.push(O),Q+=s?1:0}),Q=-1;var f=$(d,u,a);f.properties={type:Bc,dataLabels:c,dataUpdate:n,showlabel:X,rp:b,translation:T,trans:Z,txtHgt:V,connectorPath:function(t,a){Q+=e(a)?0:1;var r=f[0][a].Y+(Y?f[0][a].height/2:0),n=E&&i(Q)?t.leftY:t.y;return"M"+o(t,Q)+" "+n+" L"+l(t,Q,0)+" "+n+" L"+l(t,Q)+" "+r},reverseColor:!0,onOverlap:function(){s="overlap"},contentType:_,isMultiLine:Y},A.TOP=-Z[1],A.BOTTOM=x+Z[1],A.actualType=Vc})}})}var t,a,r=5;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},So.labelRenderer.scatter=function(){function e(e,i){e.each(function(){var e,o=r[0],l=r[1],s=r[2]||0,c=r[3],d=[0,0],u=o.plotoptions,h=a.commonRendererProp().params,f=h.chartObj,g=f.systemConf,p=h.commonPlotOptions,y=h.dataset,v=h.stacked,m=h.axisrotated,x=h.yaxiscolumnorder,b=h.xscale,C=h.yscale,w=h.labelArray,k=f.chartTypes[l].value,O=f.chartTypes[l].name==Mc,S="canvas"===f.plot.renderer.mode,A=Nr(k),P=k==So.charttype.bubble,T=k==So.charttype.bubblepie,E=f.dataObject.isPolarAxisCategory;e=li(p,u,f,l);var L=ui(e,f);if(!o.disabled&&L){var z=$n(f),D=0,M=0,j=0,R=0,I=0,H=t(e,f);if(ai(e,f)){var B=ti(e,f),F=oi(B.hook);D=ri(e,f),M=ni(e,f),j=F.height,R=F.width,I=B.radius}var V=P?0:ul(0,+(e.padding||0))+D+j,N=e.textOverlap,_=g.chart.plot.datalabels.handleOverlapping===!0,W=A?Va(p,f):!1,Y=z.left,X=z.top,U=z.right,G=z.bottom,Z=Y+H.left,Q=X+H.top,K=U-H.right,$=(G-H.bottom,vi(f,h,e,Zc,null,l,c)),J=$.contentType||"text",et="html"===J&&$.multiLine,tt=n.isCatNull(y,"x"),at=n.isCatNull(y,"y",x),rt=da(e,f),nt=si(null,e,f,h.color,!1,l),it=Qt(f.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label"),ot=i.update,lt=i.add;o.data.forEach(function(t,r){var n=a.seriesdataAfterUpdate?a.seriesdataAfterUpdate[r]:o.data[r],i=[];si(it,e,f,h.color,!1,l),it.styles({fill:Pl}),n.forEach(function(t,a){var n,o,u=f.dataObject.getXYvalue(m,v,b,C,x,t,"x",null,c),g=f.dataObject.getXYvalue(m,v,b,C,x,t,"y",null,c),p=P||T?f.dataObject.getXYvalue(m,v,b,C,x,t,"z",f.zscale):null,k=ja(y.getClr(t),f),A=null,L=null,z=null,H=null,B=k&&!t.disabled,F="",W=et?"0.9em":P?"0.3em":"-0.3em",lt="middle",st=P?null:bc,ct=0,dt=0;if(T){var ut=xu.getKey(t,l,f),ht=f.subrenderer[r][ut],ft=ht.data[l];n=(ft.startAngle+ft.endAngle)/2;var gt=p/2+V,o=ba(gt,n);W=et?"0.9em":n>kl/2&&3*kl/2>n?Oa(n)+"em":"0",lt=0>n||n>kl?"end":"start",$=vi(f,h,e,Zc,ht.total,l,c)}it[J](function(){return z=t.isDummy||tt(y.getX(t))||at(y.getY(t,x,c))?null:$(t)}).styles({display:function(){if(E)return null;var e=u,t=g,a=Y>e||e>U||X>t||t>G;return a?(B=!1,Al):null}}).attrs({transform:null,dy:W,x:function(){return A=T?u+o[0]:u,A||0},y:function(){var e=(P?0:s)/2;return L=T?g+o[1]:g+(e+V)*(O&&!c?1:-1),L||0},"text-anchor":lt}),F="lbl"+l+"_"+r+"_"+a+"_"+c;var pt;if(et){if(bi(it,A),pt=q(it.node()),T){var yt=Yl().range([-1,0]).domain(kl>n?[0,kl]:[2*kl,kl]);L+=yt(n)*pt.height,bi(it,A)}else L-=P?pt.height/2:pt.height;it.attr("y",L),pt=q(it.node())}else"html"===J?pt=q(it.node()):(pt=xr(z,rt,ua(e,f),null,null,nt["font-style"],nt["font-weight"]),pt.x=A-("middle"===lt?pt.width/2:"end"===lt?pt.width:0),pt.y=L-pt.height);var vt=0;if(!E){vt=ii(pt.width,D,I,R);var mt=D+M/2+vt/2,xt=0,bt=it,Ct=pt.x-mt,wt=Ct+pt.width+xt+2*mt,kt=A+(Z>Ct?Z-Ct:wt>K?-(wt-K):0);(ct=kt-A)&&(A=kt,bt.attr("x",kt),et&&bi(it,kt));var Ot=L+(pt.y<Q?pt.height+s+V:0);(dt=Ot-L)&&(!f.dataObject.isStackedPercentChart&&!f.dataObject.isPercentChart||m?B=!1:(L=Ot,bt.attr("y",Ot))),et&&(ct||dt)?pt=q(it.node()):(pt.x+=ct,pt.y+=dt)}vt=E?ii(pt.width,D,I,R):vt;var St=pt.width+vt,At=pt.height,Pt=pt.x+vt/2;if(_){var Tt=(P?p:s)/2;if(P){var Et=u,Lt=g,zt=pl(gl(Et-Pt,2)+gl(Lt-pt.y,2))+D,Dt=pl(gl(Et-(Pt+pt.width),2)+gl(Lt-(pt.y+pt.height),2))+D;if(zt>Tt||Dt>Tt){var Mt;if("ellipsis"===N){var jt=hl(pt.height/2,Tt),Rt=pl(gl(Tt,2)-gl(jt,2)),It={left:Et-Rt+D,top:Lt-Rt+D,right:Et+Rt-D,bottom:Lt+Rt-D};"html"===J?(H=wi(it,rt),Ci(it,f,d,0,It,H)):gi(it,f,d,0,It);var Ht=it.text();if(Ht&&".."!==Ht&&(z=it[J](),Mt=!0,St=2*Rt-2*D,et)){var Bt=q(it.node());At=Bt.height,St=Bt.width+vt,L+=(pt.height-Bt.height)/2}}Mt||(B=!1,it.style("display",Al))}}var Ft={id:F,x1:Pt-D,y1:pt.y-D,x2:Pt+St+D,y2:pt.y+pt.height+D+j,pointRadius:Tt+V-j,translateFunction:ot,overlap:N,hookHeight:j};w.push(Ft)}var Vt={X:A,Y:L,DY:W,ANCHOR:lt,text:z,display:B,height:At,width:St,hookPosition:st,adjustVal:ct};S&&"html"===J&&(Vt.tspanInfo=H||wi(it,rt)),i.push(Vt)}),i.dataUpdate=n;var u=lt(i,l,r,c);u.properties={type:Rc,dataLabels:e,color:h.color,dataUpdate:n,showlabel:L,multiColoring:W,rp:h,rangeChart:O,yrangePos:c,contentType:J,isMultiLine:et}})}})}function t(e,t){var a=t.container.selectAll("g.plotareaBorder-property").node(),r=1,n={left:0,top:0,right:0,bottom:0};if(ai(e,t))for(var i in n)n[i]=a["border-"+i]?a["border-"+i].size/2+r:r;return n}var a,r,n=So.DataProcessor.helpers;return e.renderer=function(t){return arguments.length?(a=t,e):a},e.args=function(t){return arguments.length?(r=t,e):r},e},$o.initialize=function(e){var t=e.plot.renderer.mode,a=$o[t],r=$o.connector,n=yi(e),i=So.charttype,o={};o[Zc]=[],o[Qc]=[],o[qc]=[],o[Kc]=[];var l={rangeChart:[i.arearange],connector:[i.pie,i.sunburst,i.funnel,i.pyramid]};l[qc]=So.chartcategory.innerLabels,l[Kc]=So.chartcategory.parentLabels;var s={};return s.add=function(t,a,r,n,i){i=i||Zc;var s=o[i];return s=s[a]=s[a]||[],i===Zc&&l.rangeChart.indexOf(e.chartTypes[a].value)>-1&&(n=n||0,s=s[n]=s[n]||[]),s[r]=s[r]||[],s[r].push.apply(s[r],t),s[r].dataUpdate=t.dataUpdate,s},s.update=function(e,t,a,r,n,i,o){o=o||Zc;var l=e.match(/\\d+/g),c=l[0],d=l[1],u=l[2],h=+l[3]||0,f=s.getQueue(c,h,o),g=f[d][u];g.X+=t,g.Y+=a,g.display=g.display&&!r,void 0!==n&&(g.DY=n),i&&(g.hookPosition=i)},s.getQueue=function(t,a,r){r=r||Zc;var n=o[r];return n=n[t],r===Zc&&l.rangeChart.indexOf(e.chartTypes[t].value)>-1&&n&&(n=n[a||0]),n},s.draw=function(){if(e.isAxisCategory){var i=e.dataObject.groupedByStack,s=e.userdata.seriesdata.stackGroup||i.keys();s.forEach(function(r,l){if(o[Qc].length&&i.has(l)){var s=i.get(l);a(e,o[Qc][s.stackLabelIndex],l,"stacklabel")}else"svg"===t&&Qt(n,"g",[],".","class","stacklabel_"+l)}),s.length||"svg"!==t||Qt(n,"g",[],"#","id",Qc)}e.seriesdata.forEach(function(t,n){var i=o[Zc][n],s=e.chartTypes[n].value;l.rangeChart.indexOf(s)>-1?(a(e,i&&i[0],n),a(e,i&&i[1],n)):a(e,i,n),l[qc].indexOf(s)>-1&&(l.connector.indexOf(s)>-1&&r(e,i,n),a(e,o[qc][n],n,qc)),l[Kc].indexOf(s)>-1&&a(e,o[Kc][n],n,Kc)})},s},$o.svg=function(e,t,a,r){r=r||"label";var n="stacklabel"===r,i=r===qc||r===Kc,o=e.chartTypes[0].value==So.charttype.packedbubble,l=e.chartTypes[0].value==So.charttype.treemap,s=yi(e),c=Qt(s,"g",t?[1]:[],".","class",r+"_"+a);if(t){var d,u=t.properties,h=u.dataUpdate,f=u.dataLabels,g=u.rp,p=u.rotation,y=u.rangeChart,v=u.yrangePos,m=u.reverseColor,x=u.contentType||"text",b=u.isMultiLine,C=e.dataObject.isPolarAxisCategory,w=e.isAxisCategory,k="clip"===f.textOverlap,O=da(f,e),S=w||C?El:h.length,A="scatter"===u.type,P=Pd.isQuantileColorScale(e),T=El;if((P||g.threshold||e.dataObject.isHierarchy||!(w||C||e.dataObject.isNonAxisMultiSeriesCategory)||u.multiColoring)&&(T=function(t,r){var n=m?S-1-r:(w||C||e.dataObject.isNonAxisMultiSeriesCategory)&&!u.multiColoring?a:r,o=Ra(e,n,t&&t.data?t.data:t,a),s=u.isSunburst&&u.parentInnerLabel&&t.children?u.parentInnerLabel:f;return l&&i&&/(top-outset|bottom-outset)/.test(s.position)&&$l(o).opacity<.1&&(o="white"),ci(e.systemConf,o,s,e,i,a)}),k){var E=(ud.SAFARI?e.svg:e.getPatternSvg()).selectAll("defs");d=Qt(E,"g",[1],".","class","textClipPaths")}y&&(c=Qt(c,"g",[1],".","class","rangePos_"+v)),n&&c.attr("id",Qc),c.attrs({"text-anchor":A?"middle":null,transform:u.translation}),si(c,f,e,g.color,i,a,n),C&&c.attr("transform","translate("+e.plotarea_approx.x+","+e.plotarea_approx.y+")"),t.forEach(function(t,a){var r=t.dataUpdate||h,s=Qt(c,"g",[1],".","class","subseries_"+a),d=Qt(s,u.GLT&&u.GLT.hasShowAsFunction?"g":"text",r);if(d[x](function(e,a){return t[a].text}),b&&d.each(function(e,a){bi(d3.select(this),t[a].X)}),d.styles({display:function(e,a){return t[a].display===!1?Al:null},fill:T,"pointer-events":Al,opacity:function(t){if(ut(e.dataObject.hierarchical)&&ut(e.cache.hierarchical)){var a=e.cache.hierarchical;if(a.active)return t.active===!0?1:.1}},transition:"opacity ease .2s"}).attrs({x:function(e,a){return t[a].X},y:function(e,a){return t[a].Y},dy:function(e,a){return t[a].DY},"text-anchor":function(e,a){return t[a].ANCHOR},id:function(e,a){return t[a].ID},transform:function(e,a){var r=t[a].xy||[t[a].X,t[a].Y],n="";return t[a].xy&&(n="translate("+r+")"),ut(p)&&(n+="rotate("+p+" "+r+")"),n||El},"clip-path":k?function(a,r){var n=q(this),i={name:"textClip",id:e.id,x:n.x,y:n.y,width:t[r].width,height:n.height},o={chartObj:e},l=fd.get(xd,"rect",i,o);return"url("+e.defsLocation+"#"+l+")"}:null,level:function(e){return e.level?e.level:void 0}}),e.dataObject.isWaterfallEnabled&&void 0!==f.fontColor&&f.fontColor==El&&d.style("fill",function(e){var t=Hi(e,u.rp.categoryColorConfig);return t?t:void 0}),!(w||l||C||e.dataObject.hasLevelMarker||o||n||i))if("html"===x){var g=ai(f,e)?ri(f,e)+ni(f,e):0;d.each(function(a,r){if(t[r].display!==!1){var n=d3.select(this),i=wi(n,O);if(Ci(n,e,u.trans,u.txtHgt,null,i,t[r].isLeft?g:0),"middle"===t[r].ANCHOR){var o=(t[r].width-q(this).width)/2,l=t[r].isLeft?1:-1,s=t[r].X+o*l;n.attr("x",s),bi(n,s)}}})}else gi(d,e,u.trans,u.txtHgt)})}},Jo.svg=function(){function e(e,n,i){e.each(function(){t&&(a=t.properties,r=a.rp.chartObj);var e=t&&ai(a.dataLabels,r),o=Rl(this),l=Qt(o,"g",[1],".","class",(i===Kc?"parentboundboxseries_":i===qc?"innerboundboxseries_":"boundboxseries_")+n);a&&a.rangeChart&&(l=Qt(l,"g",[1],".","class","rangePos_"+a.yrangePos));var s=Qt(l,"g",e?t:[]);if(e){var c=r.dataObject.isPolarAxisCategory?"translate("+r.plotarea_approx.x+","+r.plotarea_approx.y+")":r.isAxisCategory?null:a.translation;l.attr("transform",c);var d=ti(a.dataLabels,r),u=oi(d.hook),h=a.dataUpdate,f=a.rotation||0,g=ri(a.dataLabels,r),p=r.dataObject.getTransRectValue("radius",null,null,null,null,d.radius),y=ei(d.strokeColor,a,r,h,n),v=ei(d.fillColor,a,r,h,n),m=ut(d.strokeWidth)?+d.strokeWidth:1,x=P(d.dashStyle,m),b=T(d.lineCap,d.dashStyle),C=Yl(),w=r.plotarea,k=a.trans||[0,0],O={left:-k[0]+w.left,right:w.width-k[0]-w.left};s.attr("class",function(e,t){return"subseries_"+t}).each(function(e){var t=e.dataUpdate||h,n=Qt(d3.select(this),"path",t);n.attrs({d:function(t,n){var i=e[n],o=i.xy||[i.X,i.Y],l=o[0]-g,s=o[1]-g,c=i.width,h=i.height,f=void 0!==i.actualDY?i.actualDY:parseFloat(i.DY)||0,y=i.ANCHOR,v=i.hookPosition;return l="middle"===y?l-c/2:"end"===y?l-c:l,s-=C.domain([-.3,.9]).range([h,0])(f),r.isAxisCategory||r.dataObject.isPolarAxisCategory||"hierarchy"===a.type||(l<O.left&&(c-=O.left-l+m/2+g,l=O.left+m/2),l+c+m/2+g>O.right&&(c-=l+c-O.right+m/2+2*g),l+=(d.strokeWidth||1)*(v===xc?.5:v===mc?-.5:0)),zn(l,s,c,h,p,g,v,u,i.adjustVal)},transform:function(t,a){var r=e[a],n=r.xy||[r.X,r.Y];return"rotate("+f+" "+n[0]+" "+n[1]+")"},id:function(t,a){return"boundbox"+e[a].ID},level:function(e){return e.level?e.level:void 0}}).styles({display:function(t,a){return e[a].display===!1?Al:null},fill:v,"fill-opacity":d.fillOpacity,stroke:y,"stroke-opacity":d.strokeOpacity,"stroke-width":d.strokeWidth,"stroke-dasharray":x,"stroke-linecap":b,opacity:function(e){if(ut(r.dataObject.hierarchical)&&ut(r.cache.hierarchical)){var t=r.cache.hierarchical;if(t.active)return e.active===!0?1:.1}},transition:"opacity ease .2s"})})}})}var t,a,r;return e.args=function(a){return arguments.length?(t=a,e):t},e},So.labelRenderer.pieInnerLabels=function(){function e(e,i){e.each(function(){function e(e,t){var a=f.innerRadius()(t),r=f.outerRadius()(t),n=f.startAngle()(t),i=f.endAngle()(t),l=e.x*e.x+e.y*e.y,s=o(e);return l>=a*a&&r*r>=l&&Sa(n,i,s)}function o(e){return bl(e.x,-e.y)}function l(e){var t=ja(n.getClr(m?e:e.data||e),r);return!t||(m?null==e.parent||0==e.value:0==e.value)}function s(e){var t=m?x.startAngle()(e):e.startAngle,a=m?x.endAngle()(e):e.endAngle;return(t+a)/2}var c=a[0],d=a[2],u=a[4],h=a[8]?"translate("+a[8][0]+","+a[8][1]+")":null,f=a[7],g=a[9],p=t.commonRendererProp().params;n=p.dataset,r=p.chartObj;var y=p.commonPlotOptions,v=a[1]||0,m=Xr(r.chartTypes[v].value),x=a[6],b=p.yaxiscolumnorder;g=m?g:El,c=c[v];var C=r.dataObject.pieWithAxis,w=c.plotoptions,k=li(y,w,r,v),O=k.innerLabel,S=O.show===!0&&xa(r,Zc);if(g){var A=Cd(O.parentLabel,O);S=(ut(A.show)?A.show:O.show)!==!1,O=A}var P=vi(r,p,O,qc,u,v),T=P.contentType||"text",E="html"===T&&P.multiLine,L=O.textOverlap||"adjust",z=ai(O,r)?ri(O,r)+ni(O,r):0;if(!c.disabled&&S){var D=Qt(r.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");si(D,O,r,p.color),D.attr("transform",h).style("fill",Pl);var M=i.add;(m?c:c.data).forEach(function(n,i){var c=C?t.seriesdataAfterUpdate?t.seriesdataAfterUpdate[i]:n:d,u=[];c.forEach(function(t,a){var n,c,d=null,h=!l(t),g="middle",y=E?"0.9em":"0.35em",w=0,k=0;if(C){var S=p.stacked,A=p.axisrotated,M=p.xscale,j=p.yscale,R=xu.getKey(t,v,r),I=r.subrenderer[i][R];t=I.data[v],f=I.arc,w=r.dataObject.getXYvalue(A,S,M,j,b,t.data,"x",null),k=r.dataObject.getXYvalue(A,S,M,j,b,t.data,"y",null);var H=r.dataObject.getXYvalue(A,S,M,j,b,t.data,"z",r.zscale),B=H/4,F=ba(B,s(t));P=vi(r,p,O,qc,I.total,v),n=w+F[0],c=k+F[1]}else n=f.centroid(t)[0],c=f.centroid(t)[1];var V=t.data,N=m?0==t.depth:l(t),_=N?null:P(V);if(D[T](_).attrs({x:n,y:c,dy:y,"text-anchor":g}),h&&E&&(bi(D,n),d=q(D.node()),c-=d.height/2),L!=Al){d=d||q(D.node());var W=f.centroid(t),Y=d.width/2+z,X=d.height/2+z,U={x:W[0]-Y,y:W[1]-X},G={x:W[0]+Y,y:W[1]-X},Z={x:W[0]-Y,y:W[1]+X},Q={x:W[0]+Y,y:W[1]+X},K=e(U,t)&&e(G,t)&&e(Z,t)&&e(Q,t);if(!K){if("adjust"===L){var $,J,et=m?x.startAngle()(t):t.startAngle,tt=m?x.endAngle()(t):t.endAngle,at=s(t),rt=d.height+2*z,nt=o(U),it=o(G),ot=o(Z),lt=o(Q),st=[nt,it,ot,lt],ct=[U,G,Z,Q],dt=rs(st),$=ct[st.indexOf(dt[0])],J=ct[st.indexOf(dt[1])],ut=pl(($.x-J.x)*($.x-J.x)+($.y-J.y)*($.y-J.y)),ht=fl(ut/2/xl((tt-et)/2))+rt,ft=[vl(at)*ht,-(yl(at)*ht)],U={x:ft[0]-Y,y:ft[1]-X},G={x:ft[0]+Y,y:ft[1]-X},Z={x:ft[0]-Y,y:ft[1]+X},Q={x:ft[0]+Y,y:ft[1]+X};K=e(U,t)&&e(G,t)&&e(Z,t)&&e(Q,t)}K?(n=ft[0]+w,c=ft[1]+k):h=!1}}else d=q(D.node());var gt={X:n,Y:c,DY:y,ANCHOR:g,text:_,display:h,ID:"innerlbl"+v+"_"+i+"_"+a,width:d.width,height:d.height};u.push(gt)});var y=M(u,v,i,El,g?Kc:qc);y.properties={type:Bc,dataLabels:O,dataUpdate:c,showlabel:S,rp:p,translation:h,trans:a[8],isSunburst:m,contentType:T,isMultiLine:E}})}})}var t,a,r,n;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},So.labelRenderer.funnelInnerLabels=function(){function e(e,r){e.each(function(){function e(e){var t=o[S-1-e],a=ja(p.getClr(t),f);return t.disabled||!p.getY(t,y)||!a}var n=a[0],i=a[1],o=a[2],l=a[4],s=a[5],c=a[6],d=a[7],u=c.width,h=t.commonRendererProp().params,f=h.chartObj,g=h.commonPlotOptions,p=h.dataset,y=h.yaxiscolumnorder,v=f.chartTypes[0].name,m=f.svg.selectAll("g."+v+"group").attr("transform"),x=v===Nc;n=n[i];var b=n.plotoptions,C=li(g,b,f,i),w=C.innerLabel,k=c.datalabelPadding||+C.padding||0,O=$t(f.svg.selectAll("g."+v+"group").node()).translate,S=o.length,A=w.show===!0,P=da(w,f),T=vi(f,h,w,qc,s,i),E=T.contentType||"text",L="html"===E&&T.multiLine,z=ai(C,f)?ri(C,f)+ni(C,f):0;if(A=A&&xa(f,Zc),P+=2*z,!n.disabled&&A){var D=Qt(f.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");si(D,w,f,h.color),D.attr("transform",m).style("fill",Pl);var M=r.add;n.data.forEach(function(t,a){var r=d,n=[];r.forEach(function(t,r){var s=!e(r),d=x?t.midX:u/2,h=x?t.leftY:t.y,f="middle",g=L?"0.9em":"0.5em",p=T(o[S-1-r]),y=null;if(D[E](p).attrs({x:d,y:h,dy:g,"text-anchor":f}),s&&L&&(bi(D,d),y=q(D.node()),h-=y.height/2,P=y.height),s)if(y=y||q(D.node()),x)s=!(P>2*(t.y0-t.leftY));else{var v=c.canOverlap?(t.rightx-t.leftx-2*k)/u*l:l;s=!(P<t.y-(t.y0-t.y)+v&&P>t.y0+v-(t.y-(t.y0-t.y)+v))\n}var m={X:d,Y:h,DY:g,ANCHOR:f,text:p,display:s,ID:"innerlbl"+i+"_"+a+"_"+r,width:s?y.width:0,height:s?y.height:0};n.push(m)});var s=M(n,i,a,El,qc);s.properties={type:Bc,dataLabels:w,dataUpdate:r,showlabel:A,rp:h,translation:m,trans:O,reverseColor:!0,contentType:E,isMultiLine:L}})}})}var t,a;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e};var gu;!function(){function e(e,t,a,r,n,i,o){var l,s=e.dataObject,c=e.seriesdata[o],d=So.DataProcessor.helpers.getParsedYAxisOrder(c.yaxiscolumnorder),u=e.dataset.getDataType("y",d),h=s.getDomain(s.getCategories("x"),!0),f=u==Ns?s.getCategories("y",d):null,g=vi(e,null,t,Zc,null,o),p=ka(ut(t.maxWidth)?t.maxWidth:"30%",e.plotarea.width);c.data.forEach(function(e){var t=s.updateSeriesdatabyCategories(et(e),h,f,d);t.forEach(function(e){a.updateText(g,e),l=a.getMeasure(r?"w":"h"),r&&(l=hl(l,p)),i.push(l+n)})})}function t(e,t,a,r,n,i){var o,l=e.dataObject.groupedByStack,s=ka(ut(t.maxWidth)?t.maxWidth:"30%",e.plotarea.width);l.keys().forEach(function(c){var d=l.get(c),u=d.stackLabelIndex,h=d.stackExtent,f=vi(e,null,t,Qc,null,u);h.forEach(function(e){a.updateText(f,e),o=a.getMeasure(r?"w":"h"),r&&(o=hl(o,s)),i.push(o+n)})})}function a(e,t){var a=e.dataObject.groupedByStack;return a.keys().some(function(r){return"html"===vi(e,null,t,Qc,null,a.get(r).stackLabelIndex).contentType})}gu=function(n,i,o){if(o.dataObject.hasLevelMarker||!i)return 0;var l,s=[],c=o.systemConf,d=o.dataObject,u=d.getAxisRotated(),h=d.isstacked(),f=d.noofBarEnabledSeries,g=.75*(u?o.plotarea.width:o.plotarea.height),p=c.chart.plot.datalabels.handleOverlapping,y="y"===n,v=new r(o),m=v.createElement();if(o.seriesdata.forEach(function(t,a){if(!t.disabled){var r=t.plotoptions,i=c.chart.plot.plotoptions[o.chartTypes[a].name],d=li(i,r),m=ui(d,o);if(m){v.setFont(d,a);var x=y&&f&&!h&&So.labelRenderer.bar.getVAlign(o,a)===wc,b=vi(o,null,d,Zc,null,a),C=y?ul(0,hl(lt(d.padding,x&&Vr(o.chartTypes[a].value)?2:0),g)):0;x&&ai(d,o)&&(C=C+2*ri(d,o)+ni(d,o)),x&&(u||"html"===b.contentType)?e(o,d,v,u,C,s,a):(l=v.getMeasure("h"),l+=C+(!p||u||"y"!=n||x?0:l),s.push(l))}}}),y&&f&&h&&!d.isStackedPercentChart){var x=o.dataObject.groupedByStack,b=x.get(x.keys()[0]),C=b&&b.stackLabelIndex,w=c.chart.plot.plotoptions[o.chartTypes[C].name].datalabels.stackLabels||{},k=w?w.show:!1,O=ul(0,hl(lt(w.padding,2),g));o.datalabels.isStackedLabels=k,k&&(v.setFont(w,C),So.labelRenderer.bar.getVAlign(o,C,Qc)===wc&&(u||a(o,w))?t(o,w,v,u,O,s):(l=v.getMeasure("h")+O,s.push(l)))}return m.remove(),s.length>0?ul.apply(null,s):0};var r=function(e){this.chartObj=e};r.prototype.createElement=function(){return this.element=Qt(this.chartObj.staticPaneSVG.selectAll("g.labelholder"),"text",[1],".","class","dummyText").text("qtyplkjhgfd").style("fill",Al)},r.prototype.setFont=function(e,t){si(this.element,e,this.chartObj,Al,!1,t)},r.prototype.getMeasure=function(e){var t=q(this.element.node());return"w"===e?t.width:t.height},r.prototype.updateText=function(e,t){var a=e.contentType||"text",r="html"===a&&e.multiLine,n=this.element;n[a](e(t)),r&&bi(n,0)}}(),So.labelRenderer.hierarchy=function(){function e(e,r){e.each(function(){function e(e){var t=c(e),a=t.x;return y=t.y,w=t.width,h=t.height,a=i(a,w)+b[0],y=o(y,h)+b[1],{x:a,y:y,w:w,h:h}}function n(e,t){var a=e.height-2*X,r=e.width-2*X,n=e.x+b[0]+X,i=e.y+b[1]+X,o={x1:n,y1:i,x2:n+r,y2:i+a};if(M===Xc){var l=r/2,s=hl(t.height/2,l),c=pl(gl(l,2)-gl(s,2)),d=l-c;o.x1+=d,o.x2-=d,o.y1+=d,o.y2-=d}return o}function i(e,t){return e+=W===vc?t/2:W===xc?t-X-R:X+R}function o(e,t){return e+=Y===vc?t/2:Y===bc?t-X-R:X+R}function l(){return W===vc?"middle":W===xc?"end":null}function s(){var e,t;if(e=Y===vc?.3:Y===bc?-.3:1,Q){var a=1.1*(f.showAs.length-1);e===-.3?(e-=a,t=e+a):.3===e&&(e-=a/2,t=e+a/2)}return[e,t]}function c(e){switch(M){case Xc:return $r(e);case Uc:var t=bu.getTileBound(S,e);return t=u(t);case Wc:return Kr(S,e,L,z,E)}}function d(e,t,a){var r=e.width,n=e.height,i="middle"===t?r/2:"end"===t?r:0,o=et.range([n,0])(parseFloat(a));return e.x=-i,e.y=-o,e}function u(e){if(C&&("bottom-outset"===f.position||"top-outset"===f.position)){var t=Rt(P.padding),a=t["bottom-outset"===f.position?"bottom":"top"];"bottom-outset"===f.position&&(e.y=e.y+e.height-a),e.height=a}return e}var f,g=a[0],p=a[1],v=(a[2]||0,a[3]),m=a[4],x=a[5],b=a[6]||[0,0],C=a[7],k=g.plotoptions,O=t.commonRendererProp().params,S=O.chartObj,A=S.systemConf,P=O.commonPlotOptions,T=O.dataset,E=O.yaxiscolumnorder,L=(O.labelArray,O.xscale),z=O.yscale;f=li(P,k,S,p);var D=ui(f,S),M=S.chartTypes[0].name;if(C){var j=Cd(P.parent.datalabels,f);D=gt(j.show),f=j}if(!g.disabled&&D){var R=($n(S),0),I=0,H=0,B=0,F=0;if(ai(f,S)){var V=ti(f,S),N=oi(V.hook);R=ri(f,S),I=ni(f,S),H=N.height,B=N.width,F=V.radius}var _=f.textOverlap,W=f.hAlign||vc,Y=f.vAlign||vc,X=lt(f.padding,.5),U=A.chart.plot.datalabels.handleOverlapping===!0&&_!==Al,G=vi(S,O,f,Zc,m,p,v),Z=G.contentType||"text",Q="html"===Z&&G.multiLine,K=G.hasShowAsFunction,$=Va(P,S),J=da(f,S),et=Yl().domain([-.3,.9]),tt="canvas"===S.plot.renderer.mode,at=s(),rt=si(null,f,S,O.color,!1,p);_=K&&"ellipsis"===_?"hidden":_;var nt=Qt(S.staticPaneSVG.select(".labelholder"),K?"g":"text",[1],".","class","temp_label"),it=(r.update,r.add),ot=x,st=[];si(nt,f,S,O.color,!1,p),nt.styles({fill:Pl}),ot.forEach(function(t){var a=e(t),r=a.x,i=a.y,o=null,s=null,u=Pd.isQuantileColorScale(S)?ja(T.getClr(t.data||t),S):!0,h="",g=at[0]+"em",p=at[1],y=l(),v=null,m=0;nt[Z](function(){return o=G(t.data||t,a)}).attrs({dy:g,transform:"translate("+[r,i]+")","text-anchor":y,display:u}),h="lbl"+t.level;var x;Q?(W!==vc&&(nt.attr("text-anchor",El),r+=q(nt.node()).x*(W===xc?1:-1),nt.attr("transform","translate("+[r,i]+")").attr("text-anchor",y)),bi(nt,0),x=q(nt.node())):"html"===Z?x=q(nt.node()):(x=xr(o,J,ua(f,S),null,null,rt["font-style"],rt["font-weight"]),x=d(x,y,g,r,i)),widthToBeAdded=0;{var C=x.width+widthToBeAdded,w=x.height;x.x+widthToBeAdded/2}if(U){var k={x1:x.x+r-R,y1:x.y+i-R,x2:x.x+r+x.width+R,y2:x.y+i+x.height+R},O=n(c(t),x),A=di(k,O);if(!A){var P;if("ellipsis"===_){var E=a.h,L=a.w;if(E>w+2*R){var z={left:O.x1+R,top:O.y1+R,right:O.x2-R,bottom:O.y2-R};"html"===Z?(s=wi(nt,J),Ci(nt,S,b,0,z,s,El,[r,i])):gi(nt,S,b,0,z,[r,i]);var D=nt.text();if(D&&".."!==D&&(o=nt[Z](),P=!0,C=L-2*R,Q)){var M=q(nt.node());w=M.height,C=M.width+widthToBeAdded,i+=(x.height-M.height)/2}}}P?"html"===Z&&(s=wi(nt,J)):u=!1}}var j={X:0,DY:g,xy:[r,i],actualDY:p,ANCHOR:y,text:o,display:u,height:w,width:C,hookPosition:v,adjustVal:m};tt&&"html"===Z&&(K?j.customHTML=ki(nt):j.tspanInfo=s||wi(nt,J)),st.push(j)}),st.dataUpdate=ot;var ct=it(st,p,0,v,C?Kc:El);ct.properties={type:"hierarchy",dataLabels:f,color:O.color,dataUpdate:ot,showlabel:D,multiColoring:$,rp:O,contentType:Z,isMultiLine:Q,GLT:G}}})}var t,a;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},$o.connector=function(e,t,a){var r=yi(e),n=Qt(r,"g",t&&"circular"!==t.properties.showlabel?[1]:[],".","class","link_"+a);if(t){var i=t.properties,o=i.dataUpdate,l=i.isSunburst,s=i.connectorPath,c=i.dataLabels.line,d=o.length;c&&(n.attr("transform",i.translation).styles({stroke:c.strokeColor,"stroke-width":c.strokeWidth,fill:Al}),t.forEach(function(t,r){var u=Qt(n,"g",[1],".","class","subseries_"+r),h=Qt(u,"path",o);h.styles({display:function(e,a){return t[a].display===!1?Al:El},stroke:function(t,r){return l||c.strokeColor?El:Ra(e,i.reverseColor?d-1-r:r,t&&t.data?t.data:t,a)}}).attrs({d:s,id:function(e,t){return"link"+a+"_"+r+"_"+t}})}))}};var pu=function(e,t){function a(){x=e.dataObject.getAxisRotated(),b=x?"left":"bottom";var r=e.axes.x.scrollScale=So.scale.getScale(e,e.dataObject,e.plotarea,b,0,e.dataset,t,null,0),i=f(e,e.plotarea),o=p(r,i);return(C=Math.abs(o-e.plotarea[x?"height":"width"])>=1||z)?(a.initialized,a.component=x?Fs():Bs(),a.component.on("brush",function(){return e.isBrushing=!0,O&&k?(O=!1,null):(O=k?!0:!1,void a.scrollNrender())}).on("start",function(){k=!1,e.isBrushing=!0;var t=n(d3.event.selection);t[0]===t[1]?a.scrollNrender(!0):k=!1}).on("end",function(){k=!1,O=!1,e.isBrushing=!1}),a.context||(a.context=Qt(e.svg,"g",[1],".","class","brush")),void(x?(e.plotarea.width-=P.height||T.scrollHeight,a.context.attr("transform","translate("+(e.plotarea.left+e.plotarea.width)+","+e.plotarea.top+")")):(e.plotarea.bottom+=P.height||T.scrollHeight,e.plotarea.height-=P.height||T.scrollHeight,a.context.attr("transform","translate("+e.plotarea.left+","+(e.plotarea.top+e.plotarea.height)+")")))):void e.svg.selectAll("g.brush").remove()}function r(e){return x?[{x:0,y:e[0]},{x:0,y:e[1]}]:[{x:e[0],y:0},{x:e[1],y:0}]}function n(a){if(m==Ns)return[a[0],a[1]];var n=r(a),i=So.scale.invert(m,n[0],e.axes.x.scrollScale,x,t),o=So.scale.invert(m,n[1],e.axes.x.scrollScale,x,t);return[e.axes.x.scrollScale(i),e.axes.x.scrollScale(o)]}function i(t){var r=n(t),i=a.categoryPosInScreen,o=a.scrollBarLength||p(e.axes.x.scrollScale,i);if(a.scrollBarLength=o,S=O?!1:r[0]===r[1],k=k||S){if(!S){var l=o*(x?-1.5:.5);r[0]+=r[1]-A[1]+l,r[1]=r[0]+o}r[0]-=o/2,r[1]-=o/2,x?(r[0]=r[0]<0?0:r[0],r[1]=r[0]+o,r[1]=r[1]>e.plotarea.height?e.plotarea.height:r[1],r[0]=r[1]-o):(r[0]=r[1]>e.plotarea.width?r[0]-(r[1]-e.plotarea.width):r[0]<0?0:r[0],r[1]=r[0]+o,r[0]=r[0]+o>e.plotarea.width?r[0]-(r[1]-e.plotarea.width):r[0],r[1]=r[0]+o),S&&(A=r)}return r}function o(a){var r,n=So.scale.invert(m,a[0],e.axes.x.scrollScale,x,t),i=So.scale.invert(m,a[1],e.axes.x.scrollScale,x,t);return r=m==Ns?x?e.axes.x.scrollScale.domain().slice(i,n+1,0):e.axes.x.scrollScale.domain().slice(n,i+1,0):[n,i]}function l(){var t,r,n=$t(a.context).translate;x?(t=e.plotarea.left+e.plotarea.width,r=e.plotarea.top):(t=e.plotarea.left,r=n[1]),a.context.attr("transform","translate("+t+","+r+")"),L&&w.styles({left:t+"px",top:r+"px"});var i={};i[x?"width":"height"]=P.height||T.scrollHeight;var o={};s(a.context.selectAll("rect.selection"),P.slider,T.slider,i),s(a.context.selectAll("rect.overlay"),P.tracker,T.tracker,i),s(a.context.selectAll("rect.handle"),P.resizer,T.resizer,o),c()}function s(e,t,a,r){t=t||{},e.styles({visibility:"visible",cursor:t.cursor||a.cursor,fill:t.fillColor||a.fillColor,"fill-opacity":t.fillOpacity,"stroke-opacity":t.strokeOpacity,"stroke-width":t.strokeWidth,stroke:t.strokeColor}).attrs({rx:t.radius,ry:t.radius,opacity:null}).attrs(r)}function c(){var e=P.resizer||{};e.enabled||a.context.selectAll(".handle").remove()}function d(e,t,a){e.axes.x.scrollScale=So.scale.getScale(e,e.dataObject,t,b,0,e.dataset,a,null,0)}function u(t,a,r,n){var i=e.axes.x.scrollScale,o=x?t.height:t.width,l=e.dataObject.getCategories("x"),l=l&&l.length?l:e.dataObject.findXCategories(),s=l.length;n=n>s?s:n;var c=i?g(i,n-1,l[n-1]):cl((o-r)/s*n);return c}function h(t,a,r,n){var i=e.axes.x.scrollScale,o=(x?t.height:t.width,or(n,a)),l=y(e,t,r,o);r=i&&i.bandwidth?lr(i.range(),l,a,r,o):2*o*r;var l=y(e,t,r,o),s=u(t,a,r,l);return s}function f(e,t){var a,r=(x?t.height:t.width,P.visibleCategories),n=e.chartTypes[0].name,i="gantt"==n||"bullet"==n||"bar"==n?e.systemConf.chart.plot.plotoptions[n].padding||.2:.2,o=e.systemConf.chart.plot.plotoptions[n].outerPadding||.02;return a=r?u(t,i,o,r):h(t,i,o,P.categoryThickness||E)}function g(e,t,a){return e.bandwidth?e.ordinalRange[t]:e(a)}function p(e,t){return e.bandwidth?x?e.range()[0]-t:t+e.bandwidth():x?e.range()[0]-t:t}function y(e,t,a,r){return cl(x?(t.height-a)/r:(t.width-a)/r)}function v(){var t=e.plotarea,a=e.userdata;a.chart.scroll.enabled=!1,a.chart.axes.xaxis.show=!1,a.chart.axes.yaxis[0].show=!1,a.canvas.title.show=!1,a.canvas.subtitle.show=!1,a.chart.plot.renderer?a.chart.plot.renderer.mode="canvas":a.chart.plot?a.chart.plot.renderer={mode:"canvas"}:a.chart.plot={renderer:{mode:"canvas"}},a.chart.marginTop=0,a.chart.marginBottom=0,a.chart.marginLeft=0,a.chart.marginRight=0,a.canvas.intelligence={},a.credits?a.credits.show=!1:null,a.chart.plot.datalabels?a.chart.plot.datalabels.show=!1:null,a.legend.enabled=!1,w=e.container.selectAll("div.zcoverview"),w.styles({position:"absolute",width:t.width+"px",height:+P.height+"px","pointer-events":Al,"box-sizing":"border-box"}),So.charts(w.node(),a)}var m,x,b,C,w,k,O,S,A,P=e.systemConf.chart.scroll,T={slider:{fillColor:"#B3B6B7",cursor:Tl},tracker:{fillColor:"#ECF0F1",cursor:Tl},resizer:{fillColor:Al},scrollHeight:10},E=15,L=(P.overview||{}).enabled,z=(P.resizer||{}).enabled;return e.isBrushing=null,a.initialize=function(r){if(!C)return void e.svg.selectAll("g.brush").remove();m=e.dataset.getDataType(t),b=x?"left":"bottom",d(e,r,t),a.categoryPosInScreen=f(e,r),a.extent=[];var n=x?"y":"x",i=x?[{y:a.categoryPosInScreen||.01,x:0},{y:r.height,x:0}]:[{x:0,y:0},{x:a.categoryPosInScreen||.01,y:0}];a.setExtent(i),a.initialized=!1,a.context.call(a.component),a.context.call(a.component.move,[i[0][n],i[1][n]]),a.initialized=!0,L&&v(),l()},a.scrollNrender=function(r){a.updateExtentPosition(r),a.initialized&&(e.updateScale(e.seriesdata[0],t,a.extent),e.drawThreshold(!0),e.drawPlotareaClippath(),e.plot.renderer.draw(!0),e.eventHandler.updateParams(e))},a.updateExtentPosition=function(e){var t=i(d3.event.selection),n=x?"y":"x",o=r(t);a.setExtent(o),(e||O)&&(a.context.call(a.component.move,[o[0][n],o[1][n]]),c()),e&&(S=!1)},a.setExtent=function(t){var r=x?[P.height,e.plotarea.height]:[e.plotarea.width,P.height];a.component.extent([[0,0],r]);var n=o(t);a.extent=n},a};Ei.initialize=function(e){if(e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)){a?e.scrolledY=e.scrolledY||0:e.scrolledX=e.scrolledX||0;var t=Qt(e.container.selectAll(".d3container"),DIV_ELEMENT,[1],".","class","zohocharts_scroll");t.styles({width:100+Sl,height:100+Sl,overflow:"auto",position:"absolute",margin:0,padding:0,"background-color":"rgba(0,0,0,0)","box-sizing":"content-box","-webkit-tap-highlight-color":Pl,"-webkit-overflow-scrolling":"touch"}),Qt(t,DIV_ELEMENT,[1],".","class","child").styles({width:200+Sl,height:200+Sl});var a=e.dataObject.getAxisRotated(),r=e.defaultScroll,n=t.node(),i=a?n.offsetWidth-n.clientWidth:n.offsetHeight-n.clientHeight;t.attr("scrollbarSize",i),r||(r=e.defaultScroll={},r.tickmarkSize=+e.systemConf.chart.axes.xaxis.tickmark.size,r.marginRight=+e.systemConf.chart.marginRight),a?(e.plotarea.bottom+=i,e.plotarea.width-=i):e.systemConf.chart.axes.xaxis.tickmark.size=+r.tickmarkSize+i}};var yu;!function(){yu=function(e,t){function a(e){i.attr("transform",function(t,a){return"translate("+(c?e[a]:0)+","+(c?0:e[a])+")"})}function r(e){d.initialized=!1,d3.event.selection=e,n.call(d.move,e),d.initialized=!0,t.onBrush(d),a(e)}this.chartObj=e,this.options=t,this.isResizeInitiated=null;var n,i,o,l,s=(t.scale,t.orient,t.dimension),c="horizontal"===t.legendAlign.layout,d=this.component=(c?Bs:Fs)(),u=t.initialExtent,h=[0,s[c?0:1]],f=this,g=t.onClick;d.on("brush",function(){if(f.updateTrackerBound(),d.initialized){var e=d3.event.selection;e[0]===e[1]&&h.indexOf(e[0])>-1?(e=f.resizeFilterRange(e[0],h,!0),r(e)):(a(e),t.onBrush(d),l.show()),u=e,o=d3.event.type}}).on("start",function(){this.isResizeInitiated=!1,o=d3.event.type}).on("end",function(){if(d.initialized){var e=d3.event.selection=d3.event.selection||u,a=d3.event.sourceEvent,i="start"===o;if(i){var s=Qr(n.node(),d3.event),p=s[c?0:1];ud.FIREFOX&&(p-=sa(n)[c?0:1]),p=hl(ul(p,h[0]),h[1]),e="reposition"===g?f.repositionFilterRange(p,u):f.resizeFilterRange(p,u),r(e),l.show()}else n.node().contains&&n.node().contains(a.srcElement||a.target)||l.hide();t.onEnd(d,i),u=d3.event.selection,o=d3.event.type}}),this.context||(this.context=n=Qt(t.element||e.svg,"g",t.brushOptions.enabled?[1]:[],".","class","brush",{"pointer-events":"visible"})),d.initialized=!1,d.extent([[0,0],s]),n.call(d),this.drawSlider(),i=this.slider,a(t.initialExtent),l=this.tooltipComponent=new vu(this),n.call(d.move,t.initialExtent),d.initialized=!0,this.drawTracker(),n.selectAll(RECT_ELEMENT+".selection").style("opacity",0)},yu.prototype.repositionFilterRange=function(e,t){var a=this.options.scale,r=fl(t[1]-t[0]),n=a.range().sort(is),i=[e-r/2,e+r/2];return i[1]>n[1]&&(i[1]=n[1]-(a.bandwidth?.1*r:0),i[0]=i[1]-r),i[0]<n[0]&&(i[0]=n[0]+(a.bandwidth?.1*r:0),i[1]=i[0]+r),i},yu.prototype.resizeFilterRange=function(e,t,a){var r,n=fl(t[0]-e),i=fl(t[1]-e);if(a){var o=5e-5;r=i>n?[t[0],e+o]:[e-o,t[1]]}else r=i>n?[e,t[1]]:[t[0],e];return r.sort(is)}}(),yu.prototype.drawSlider=function(){var e=this.chartObj,t=this.options,a=this.context,r=Tr(e.systemConf.legend),n="horizontal"===r.layout,i=t.dimension,o=t.brushOptions.slider,l=o.type,s=n?"":" rotate(-90)",c=this.slider=Qt(a,"g",n?[{type:"w"},{type:"e"}]:[{type:"n"},{type:"s"}],".","class","handle--custom");c.attr("cursor",n?"ew-resize":"ns-resize").selectAll("*").remove();var d={container:c,config:o[l],type:l,chartObj:e,isHorizontal:n,bound:i,globalShadow:o.shadow},u=new su(d);u.draw();var h=u.getPosition();c.selectAll(Us).attr("transform","translate("+h[0]+","+h[1]+")"+s)},function(){yu.prototype.drawTracker=function(){var e=this.options,t=this.context,a=e.brushOptions.track;t.selectAll(RECT_ELEMENT+".overlay").styles({fill:a.fillColor,"fill-opacity":a.fillOpacity})},yu.prototype.updateTrackerBound=function(){var e,t=this.chartObj,a=this.options,r=this.context,n=a.scale,i=(a.orient,a.dimension),o=r.selectAll(RECT_ELEMENT+".overlay"),l=[0,0],s=i,c=d3.event.selection.slice(),d="horizontal"===a.legendAlign.layout;if(n.bandwidth){var u=n.bandwidth();c[0]-=c[0]%u,c[1]+=u-c[1]%u}else a.singleDomainContinuous&&(c[0]=l[d?0:1],c[1]=s[d?0:1]);e=d?"M"+l[0]+" "+l[1]+"L"+c[0]+" "+l[1]+"L"+c[0]+" "+s[1]+"L"+l[0]+" "+s[1]+"ZM"+c[1]+" "+l[1]+"L"+s[0]+" "+l[1]+"L"+s[0]+" "+s[1]+"L"+c[1]+" "+s[1]+"Z":"M"+l[0]+" "+l[1]+"L"+s[0]+" "+l[1]+"L"+s[0]+" "+c[0]+"L"+l[0]+" "+c[0]+"ZM"+l[0]+" "+c[1]+"L"+s[0]+" "+c[1]+"L"+s[0]+" "+s[1]+"L"+l[0]+" "+s[1]+"Z";var h="zcbrushhighlighttracker",f=r.selectAll("path."+h).data([1]);f.enter().insert("path",":nth-child(2)").merge(f).attr("class",h),f=r.selectAll("path."+h);var g=c[0]+1,p=c[1]-1,y=d?"M"+g+" "+l[1]+"L"+p+" "+l[1]+"L"+p+" "+s[1]+"L"+g+" "+s[1]+"Z":"M"+l[0]+" "+g+"L"+l[0]+" "+p+"L"+s[0]+" "+p+"L"+s[0]+" "+g+"Z";f.attr("d",y).styles({opacity:0,"stroke-width":0});var v={name:"brush",id:t.id,d:e},m={chartObj:t};clipID=fd.get(xd,"polygon",v,m),o.attr("clip-path","url("+t.defsLocation+"#"+clipID+")")}}();var vu;!function(){function e(e){var t=e.options.orient;return t===Cc||t===bc}function t(e){var t=e.systemConf.legend.colorBand,a=t.ranges,n=a&&a.length,i=e.systemConf.legend.filter.range,o=e.axes.clr.scale.domain();if(n){if(e.dataset.getDataType("clr")===Ns){var l=i||o;return[l[0],l[l.length-1]]}return i?r(i,a):[a[0],a[a.length-1]]}return i||o}function r(e,t){var a,r,n=[e[0],e[1]+1e-12],i=1===t[0].length;return t.forEach(function(e,t){e[0]<=n[0]&&(a=t),e[1===e.length?0:1]<=n[1]&&(r=t)}),rt(a)?a=0:i?a++:null,rt(r)?r=t.length-1:null,[t[a],t[r]]}vu=function(e){var t={orient:e.options.orient},a={chartObj:e.chartObj,config:Cd(t,e.options.brushOptions.slider.tooltip,!0),container:e.slider},r=this.super=new lu(a);this.container=r.container,this.boundBoxEle=r.boundBoxEle,this.textEle=r.textEle,this.tooltipOptions=r.config,this.brushComponent=e,this.count=0,this.positionTooltip(),this.addHoverEvents()},vu.prototype.show=function(){var e=this;e.super.show(function(){return e.getTextContent()}),e.brushComponent.chartObj.legend.component.highlightItem(El,!1,!0)},vu.prototype.hide=function(e){this.super.hide(e)},vu.prototype.positionTooltip=function(){var e,t,a=this.brushComponent,r=this.tooltipOptions,n=a.options.orient,i=q(a.slider.node()),o=r.padding+r.margin;switch(n){case bc:e=0,t=i.y-o;break;case xc:e=i.x-o,t=0;break;case mc:e=i.x+i.width+o,t=0;break;case Cc:e=0,t=i.y+i.height+o}this.container.attr("transform","translate("+e+","+t+")")},vu.prototype.addHoverEvents=function(){var e=!0,t=this,a={mousemove:function(){var a=Rl(d3.event.srcElement||d3.event.target).attr("class");"overlay"!==a?(t.show(),e=!0):e&&(t.hide(),e=!1)},mouseleave:function(){t.hide(),e=!1}};cn(t.brushComponent.context,a)},vu.prototype.getTextContent=function(){var r,n,i=this.brushComponent,o=i.chartObj,l=t(o),s=e(i),c=jd.isReversedColorAxis(o),d=o.dataset.getColumn("clr"),u=d.datatype,h=d[u];if(o.dataset.getDataType("clr")===Ws){var f=o.systemConf.legend.colorBand,g=f.ranges&&f.ranges.length;if(!g){var p=o.axes.clr.scale.domain();n=[p[0],p[p.length-1]];var y=fl(n[1]-n[0]);if(y){var v=Math.floor(Math.log(y)/Math.LN10)-2;r=Math.abs(Math.min(v,0))}}}var m=s?this.count:+!this.count;c&&(m=!m);var x=l[m?l.length-1:0];return this.count=!this.count,ut(r)&&-1===n.indexOf(x)&&(x=a(x)?x.map(function(e){return+e.toFixed(r)}):+x.toFixed(r)),gn(h,x,u,o,"legend",ol,"-")}}(),qo.bar=function(){function e(d){return d.each(function(d){var u=Rl(this);e.update=function(){u.transition().call(e)};var h=t.params,f=h.chartObj,g=h.xscale,p=h.stacked,y=h.datasetIndex,v=h.renderingOrderIndex,m=h.axisrotated,x=h.commonPlotOptions,b=h.color,C=h.labelQueue,w=h.hasNegValue,k=h.yaxiscolumnorder,O=h.dataset,S=f.systemConf,A=(f.plotarea,f.dataObject),T=(h.threshold,h.colorOverlay,S.chart.axes.yaxis[h.yaxiscolumnorder||0].reversed),E=f.systemConf.chart.axes.xaxis.reversed;i=h.yscale;var L=d[y],z={data:L,index:v},D=f.defsLocation,M=L.plotoptions,j=L.data,R=f.chartTypes[y].name,I=So.utils.getValueOfPlotOptions(M,x),H=bd.getDimension(f,y),B=f.patternPallete&&f.patternPallete.length,F=f.dataObject.noofBarEnabledSeries,V="bullet"==R,N="gantt"==R,_="waterfall"==R,W=f.dataset.getDataType("y",k),Y=g.domain(),X=W==Ns?i.domain():null,U=(ut(A.hierarchical)?A.getCategories("x"):Y,Qt(u,"g",[z],".","class","barseries_"+y));if(!r||!n)return c=!0,void(e.chartRendered=!0);var G,Z=M&&M.levelMarker?Cd(x.levelMarker,M.levelMarker,!0):x.levelMarker,Q=M&&M.border?Cd(x.border,M.border,!0):x.border,q=Va(x,f),K=ha(x,M,f,"bar"),$=K.enabled,J=K.easingType,tt=K.type,at=$?100:0;s=c?$?300:0:K.duration;var rt=kr(f.rendererConf[y],y),it=rt.barWidth,ot=(rt.levelMarkerWidth,rt.padding,rt.levelMarkerPadding,rt.addRangeBand),lt=f.userdata.seriesdata.stackGroup,st=lt?Sr(y,lt):0;e.getParamValue=function(){return f.dataObject.getTransRectValue.apply(f.dataObject,nt(arguments))};var ct,dt,ht;if(Z&&(ht=Z.color,Z.overlayRange="below"),V||N){var ft=N?"marker":"targetMarker";ct=M&&M[ft]?Cd(x[ft],M[ft],!0):x[ft],dt=Qt(f.staticPaneSVG.selectAll("g.threshold"),"g",ct.enabled!==!0||L.disabled?[]:[y],".","class",N?"markerSeries"+y:"markerSeries")}var pt={tlx:0,tly:0,trx:0,trY:0,brx:0,bry:0,blx:0,bly:0},yt=pt,vt=0,mt=null,xt=null,bt=pt;ut(Q)&&gt(Q.show)&&(vt=Q.size,mt=Q.color,xt=Q.style,yt=e.getParamValue("radius",null,null,null,rt,Q.radius));var Ct=P(xt,null==vt?2:vt),wt=e.fillColorFunc=za(f,y,H),kt=Ma(f,y);e.seriesdataAfterUpdate=[],j.forEach(function(t,d){function v(t,a,r,n,o){switch(t){case"x":return m?i(a.y0):e.getParamValue("x",a,r,n,o);case"y":return m?e.getParamValue("y",a,r,n,o):i(a.y0);case"width":return m?1:it;case"height":return m?it:1}}function C(e){var t=O.getX(e);return P=p?r(t):r(t)+n(o+d),z=i.bandwidth?i.origRange[0]:m?p?null!=w?i(w):i.range()[0]:null!=w?i(w):i.range()[0]:p?null!=w?i(w):i.range()[0]:null!=w?i(w):null!=i(0)?hl(i(0),i.range()[0]):i.range()[0],z=_?i(e.y0):z,j=m?0:it,R=m?it:0,{x:P,y:z,width:j,height:R}}function S(t,a){return H=e.getParamValue("x",t,d,a,rt),W=e.getParamValue("y",t,d,a,rt),Q=e.getParamValue("width",t,d,a,rt),K=e.getParamValue("height",t,d,a,rt),{x:H,y:W,width:Q,height:K}}e.getGanttLevelMarkerProp=N?ho:null;var P,z,j,R,H,W,Q,K,$=L.disabled,nt=f.dataObject.updateSeriesdatabyCategories(et(t),Y,X,k,!0);E&&(nt=nt.slice(0).reverse()),e.seriesdataAfterUpdate[d]=nt;var ft;if(null!=l){ft=et(t);for(var gt=l.count,xt=0;gt>=xt;xt++)ft.splice(xt,0,[null,null]);if(c){var Ot=g(O.getX(t[0])),St={name:"rect",id:f.id,x:Ot,y:0,width:f.plotarea.width,height:f.plotarea.height},At={chartObj:f},Pt=fd.get(xd,"rect",St,At);U.attr("clip-path","url("+D+"#"+Pt+")")}}var Tt=null!=l?ft:e.seriesdataAfterUpdate[d];G=tt==ac||c?s:s/(Tt.length*F);var Et=Z&&Z.enabled===!0&&(p&&F>0||!$)&&!f.dataObject.isStackedPercentChart&&(lt?f.dataObject.groupedByStack.has(st):!0),Lt=(p?u:U).selectAll(p?"g.levelMarkerSeries_"+st:"g.subseries_levelMarker_"+d).data(function(e){return Et?[e]:[]});(p?U:u).selectAll(p?"g.subseries_levelMarker_"+d:"g.levelMarkerSeries_"+st).remove(),Lt.exit().selectAll("path.levelMarker").transition().duration(at).attr("d",function(t,a){if(N){var r=Rl(this).attr("d"),n=na(r),o=n[0].moves[0],l=n[3].moves[1],s=ho(t,d,a,e,rt),c=s.x||o,u=s.y+(m?0:s.height*(T?-1:1))||l,h=m?0:s.width,f=m?s.height:0;return Jt(c,u,h,f,yt,T,m)}var c=e.getParamValue("x",t,d,a,rt)||na(Rl(this).attr("d"))[0].moves[0],u=i(i.domain()[0]),h=m?0:e.getParamValue("width",t,d,a,rt),f=m?e.getParamValue("height",t,d,a,rt):0;return Jt(c,u,h,f,yt,T,m)}).remove();var zt=U.selectAll("g.subseries_"+d).data(function(e){return $?[]:[e]});zt.exit().selectAll("path.zcbar").transition().duration(at).attr("d",function(t,a){var r=Rl(this).attr("d"),n=na(r),o=n[0].moves[0],l=n[3].moves[1],s=e.getParamValue("x",t,d,a,rt)||o,c=(m?e.getParamValue("y",t,d,a,rt):N?e.getParamValue("y",t,d,a,rt,null,0):(p?i(t.y0):null!=w?i(w):null!=i(0)?hl(i(0),i.range()[0]):i.range()[0])+2*ot())||l,u=m?0:e.getParamValue("width",t,d,a,rt),h=m?e.getParamValue("height",t,d,a,rt):0;return Jt(s,c,u,h,yt,T,m)}).remove();var Dt=zt.enter().append("g").merge(zt).attr("class","subseries_"+d);if(_){var Mt=Qt(p?u:U,"g",p||!$?[1]:[],".","class","connectorLines",null);Wi(Mt,Tt,{chart:f,yaxiscolumnorder:k,axisrotated:m,stacked:p,xscale:g,yscale:i,renderer:e,seriesindex:d,plotoptions:M,commonPlotOptions:x});var jt=Qt(p?u:U,"g",p||!$?[1]:[],".","class","comparisonLines",null);Gi(jt,Tt,{chart:f,yaxiscolumnorder:k,axisrotated:m,stacked:p,xscale:g,yscale:i,renderer:e,seriesindex:d,plotoptions:M,commonPlotOptions:x})}var Rt=N?Lt.enter().append("g").merge(Lt):Lt.enter().insert("g",":first-child").merge(Lt);Rt.attr("class",p?"levelMarkerSeries_"+st:"subseries_levelMarker_"+d),Et&&p&&Y.length!=Tt.length&&Or(Tt,Y,O,k);var It=Rt.selectAll("path.levelMarker").data(Tt,function(e){return N?e:O.getX(e)}),Ht=It.enter().append("path").merge(It).attr("class","levelMarker");Ht.styles({fill:function(t,r){if(N)return Z.color||(q?f.seriesColor[r%f.seriesColor.length]:b);if(!wu||!no)throw"Level marker or bullet module was not loaded";var n=q?f.seriesColor[r%f.seriesColor.length]:b,i=a(Z.color)?Z.color[0]:Z.color;if(B){var o=N?ho(t,d,r,e,rt):wu(t,Z,f,rt,h,d,y),l=o.x,s=o.y,c=o.width,u=o.height;i=wt(q?r:y,null,null,i,null,null,{x:l,y:s,width:c,height:u})}return no(t,Z,f,n,ht)||i||n},"fill-opacity":Z?Z.fillOpacity:null,opacity:function(e){if(ut(A.hierarchical)&&ut(f.cache.hierarchical)){var t=f.cache.hierarchical;if(t.active)return e.active===!0?1:.1}}}).attr("d",function(t,a){var r=N?ho(t,d,a,e,rt):wu(t,Z,f,rt,h,d,y),n=r.x,i=r.y,o=r.width,l=r.height;return N?Jt(n,i,o,l,bt,T,m):m?Jt(i,n,o,l,yt,T,m):Jt(n,i,o,l,yt,T,m)}).attr("level",function(e){return ut(A.hierarchical)?e.level:void 0}),Z&&(Z.color=ht),It.exit().remove(),V?(fo(dt,Tt,e,d,ct,q,""),Ti.call(f,ct,e,Tt)):N&&(fo(dt,Tt,e,d,ct.start,q,0),fo(dt,Tt,e,d,ct.end,q,1));{var Bt=Dt.selectAll("path.zcbar").attr("class","zcbar").data(Tt,function(e){return N?e:O.getX(e)}),Ft=Bt.enter().append("path").style("fill-opacity",I("fillOpacity")).attrs({"class":"zcbar",height:0,d:function(e){var t=C(e);return d3.select(this).attr("y",t.y),m?Jt(t.y,t.x,t.width,t.height,pt,T,m):Jt(t.x,t.y,t.width,t.height,pt,T,m)}}).merge(Bt);Ft.attrs({stroke:function(e,t){return kt(q?t:y,e,mt)},"stroke-width":vt,"stroke-dasharray":Ct,level:function(e){return ut(A.hierarchical)?e.level:void 0}}).styles({fill:function(t,a){return B?wt(q?a:y,t,null,null,null,null,{x:e.getParamValue("x",t,d,a,rt),y:e.getParamValue("y",t,d,a,rt),width:e.getParamValue("width",t,d,a,rt),height:e.getParamValue("height",t,d,a,rt)}):wt(q?a:y,t)},opacity:function(e){if(ut(A.hierarchical)&&ut(f.cache.hierarchical)){var t=f.cache.hierarchical;if(t.active)return e.active===!0?1:.1}},"fill-opacity":I("fillOpacity"),transition:"opacity ease 0.2s"})}if(null==l?Ft.transition().duration(c?G:0).delay(function(e,t){return tt==ac||c?0:(t*F+y)*G}).attr("d",function(t,a){var r=Rl(this),n=parseFloat(r.attr("height"));return H=m&&!N?parseFloat(r.attr("y")):e.getParamValue("x",t,d,a,rt),W=m?e.getParamValue("y",t,d,a,rt):N&&!n?e.getParamValue("y",t,d,a,rt,null,0):parseFloat(r.attr("y")),Q=m?parseFloat(r.attr("height")):e.getParamValue("width",t,d,a,rt),K=m?e.getParamValue("height",t,d,a,rt):n,Jt(H,W,Q,K,yt,T,m)}).on("end",function(e,t){Rl(this).transition().delay(function(){return tt==ac||c?0:(t*F+y)*G}).duration(G).ease(J).attr("d",function(e){var a=S(e,t);return Jt(a.x,a.y,a.width,a.height,yt,T,m)})}).attrs({y:function(t,a){var r=m?"x":"y";return e.getParamValue(r,t,d,a,rt)},height:function(t,a){var r=m?"width":"height";return e.getParamValue(r,t,d,a,rt)}}):Ft.transition().duration(c?G:0).attrs({d:function(e,t){var a=S(e,t);return Jt(a.x,a.y,a.width,a.height,yt,T,m)},y:function(t,a){var r=m?"x":"y";return e.getParamValue(r,t,d,a,rt)},height:function(t,a){var r=m?"width":"height";return e.getParamValue(r,t,d,a,rt)}}),Bt.exit().transition().duration(G).remove(),d>0&&p){var Vt=Qt(U,"g",$?[]:[1],".","class","subdividerseries_"+d),Nt=Vt.selectAll("rect").data(Tt,function(e){return O.getX(e)}),_t=Nt.enter().append("rect").merge(Nt).styles({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attrs({width:v("width"),height:v("height"),x:function(e,t){return v("x",e,d,t,rt)},y:function(e,t){return v("y",e,d,t,rt)}});_t.transition().duration(G).ease(J).styles({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attrs({width:v("width"),height:v("height"),x:function(e,t){return v("x",e,d,t,rt)},y:function(e,t){return v("y",e,d,t,rt)}}),_t.exit().remove()}N&&io(e,Tt,U,d),e.getMarkerPosition=N?go:null}),C.push({renderer:e,charttype:"bar",chartObj:f,args:[L,y]})}),e.renderedTimer=setTimeout(function(){c=!0,e.chartRendered=!0},2*s+10),e}var t,r,n,i,o,l,s,c=!1;return e.commonRendererProp=function(a){return arguments.length?(t=a,e):t},e.bandwidth1=function(t){return arguments.length?(r=t,e):r},e.bandwidth2=function(t){return arguments.length?(n=t,e):n},e.barDatasetIndex=function(t){return arguments.length?(o=t,e):o},e.shiftInfo=function(t){return arguments.length?(l=t,e):l},e},qo.line=function(){function e(j){return j.each(function(E){var j=r.params;w=j.chartObj,n=j.xscale,i=j.yscale,v=j.stacked,o=j.datasetIndex,renderingOrder=j.renderingOrderIndex,s=j.axisrotated,x=j.commonPlotOptions,d=j.color,m=j.labelQueue,C=j.hasNegValue,c=j.yaxiscolumnorder,l=j.dataset,b=w.systemConf;var R=w.defsLocation,I=E[o],H={data:I,index:renderingOrder},B=I.plotoptions,F=I.data,V=w.chartTypes[o],N=V.name,_=V.value,Y=So.DataProcessor.helpers,U=So.utils.getValueOfPlotOptions(B,x),G=(_!=So.charttype.line,"arearange"==N),Q=w.dataObject.isPolarAxisCategory,q=bd.getDimension(w,o),K=w.canvasarea,$=U("mode"),J=U("dashStyle"),tt=lt(U("strokeWidth"),2),at=U("strokeOpacity"),rt=Ma(w,o,q),nt=Pd.isQuantileColorScale(w),it=B&&B.marker?Cd(x.marker,B.marker,!0):x.marker,ot=ha(x,B,w,N),st=ot.enabled,ct=ot.easingType;A=ot.duration,L=ot.type,L=L==nc?rc:L;var dt=B&&B.animation&&B.animation.blink?Cd(x.animation.blink,B.animation.blink,!0):x.animation.blink,ht=nt||(xa(w,"marker")&&ma(w,"marker",hl(K.width,K.height))?it.enabled:!1),ft=T(U("lineCap"),J),gt=ud.IE||ud.SAFARI||"stepBefore"==$||"stepAfter"==$||"step-before"==$||"step-after"==$||j.thresholdType||nt||ud.FIREFOX&&dt.enabled;f=P(J,tt);var pt=B&&B.animation&&B.animation.marquee?Cd(x.animation.marquee,B.animation.marquee,!0):x.animation.marquee;g=pt.enabled,p=pt.duration;var yt=w.dataset.getDataType("x"),vt=w.dataset.getDataType("y",c),mt=yt==Ns?n.domain():null,xt=vt==Ns?i.domain():null,bt=yt!=Ns||ut(w.dataObject.hierarchical)?w.dataObject.getCategories("x"):mt,Ct=b.chart.axes.yaxis[c].reversed;yt!=Ns&&0==bt.length&&st&&L==sc&&(bt=w.dataObject.findXCategories()),e.seriesdataAfterUpdate=[],F.forEach(function(t,a){var r;r=yt==Ns||vt==Ns?w.dataObject.updateSeriesdatabyCategories(et(t),mt,xt,c):t,e.seriesdataAfterUpdate[a]=r,z[a]=Mi(j,r,O,S)\n});var wt=Rl(this);e.update=function(){wt.transition().call(e)},u=Qt(wt,"g",[H],".","class","lineseries_"+o),u.node().index=o,G&&(u=Qt(u,"g",[H],".","class","rangePos_"+S));var kt,Ot=Q?{inner:.32,outer:.56}:{inner:.4,outer:.7};if(ht&&!gt&&(it.color=I.color||w.seriesColor[o%w.seriesColor.length],kt=Z(it,"marker")+Z(dt,"blink"),y=W(u,kt,it,{color:it.color,symbolSize:Ot,strokeWidth:tt},w),delete it.color),ht&&!gt&&X(y.selectAll(".outer,.inner"),dt,w),ht&&gt?(D.commonRendererProp(r).shiftInfo(O).yrangePos(S),D.chartRendered=!1,wt.call(D)):wt.selectAll("g.scatterseries_"+o).remove(),F.forEach(function(r,g){function p(){var e=vs(z[g](D),z[g](T));return function(t){return e(t)}}var y=I.disabled;if(w.brush&&w.brush.extent){var m=w.axes.x.scale.domain(),x=(w.axes.x.ticks.tickValueObj.ticks,yt==_s?m[0].getTime():yt==Ns?bt.indexOf(m[0]):m[0]),b=yt==_s?m[1].getTime():yt==Ns?bt.indexOf(m[m.length-1]):m[1],P=yt==Ns?function(e){return bt.indexOf(w.dataset.getX(e))}:function(e){return w.dataset.getX(e)};e.seriesdataAfterUpdate[g]=Y.filterDataToViewPort(e.seriesdataAfterUpdate[g],x,b,P)}var T=e.seriesdataAfterUpdate[g];w.systemConf.chart.axes.xaxis.reversed&&(T=T.slice(0).reverse());var E,D=T,H=Qt(u,"g",function(e){return y?[]:[e]},".","class","subseries_"+g);if(h=H.selectAll("path.line").data(function(e){return y?[]:[e]}),st&&L!=lc){if(L==sc)D=null!=k?k.map(function(){return Object.create(k[0])}):T.map(function(){return Object.create(T[0])});else{var B=L==oc?l.xidx:l.yidx(c),F=L==oc?n:i,V=Q&&Ct&&!v?F.domain().length-1:0;D=T.map(function(e){var t=Object.create(e);if(v&&L!=oc)t.y0=0,t.y=Q||null==C||null==F(C)?F.domain()[0]:ul(C,F.domain()[0]);else if(G&&L==rc){var a=new Array(2),r=w.dataset.getY(e,c,0);a[0]=r,a[1]=null==t[B]?null:null!=C&&null!=F(C)?ul(C,r):r,t[B]=a}else t[B]=null==t[B]?null:Q||null==C||null==F(C)?F.domain()[V]:ul(C,F.domain()[0]);return t})}E=et(D)}if(null!=O&&M){var N=n(T[0][0])+(null!=n.bandwidth?n.bandwidth()/2:0),_=w.dataObject.getXYvalue(s,v,n,i,c,T[T.length-1],"x",null,S)-w.dataObject.getXYvalue(s,v,n,i,c,T[0],"x",null,S),W={name:"rect",id:w.id,x:N,y:0,width:_,height:w.plotarea.height},X={chartObj:w},Z=fd.get(xd,"rect",W,X);u.attr("clip-path","url("+R+"#"+Z+")")}var q=h.enter().append("path").attr("class","line").datum(D,function(e){return l.getX(e)}).attr("d",z[g]).style("stroke",I.color||d).style("fill",Al).style("stroke-width",tt).style("stroke-opacity",null==at||""===at?1:at);st&&(L==cc||L==sc?fa(D,E,T,bt,L,ct,A,j,function(e){return{d:z[g](e)}},q):L==lc?t(q,ct,A):q.transition().duration(A).ease(ct).attrTween("d",p));var K=q.merge(h).datum(T,function(e){return l.getX(e)}).attrs({id:"line_"+o,"stroke-dasharray":f}).styles({"stroke-linecap":ft,"stroke-width":tt,"stroke-opacity":lt(at,1),fill:Al,stroke:rt(o,El,U("strokeColor")||d,El,at,g)}),$=T;if(null!=O){var J=null!=O?Math.abs(w.dataObject.getXYvalue(s,v,e.oldXscale,i,c,T[0],"x",null,S)-w.dataObject.getXYvalue(s,v,n,i,c,T[0],"x",null,S)):null;h.datum($).attr("d",z[g]).transition().duration(A).ease(ct).attr("transform",function(){return null==J?null:"translate(-"+J+",0)"}),a(h)}else null==q.node()&&(h.datum($).attr("transform",null).transition().duration(A).ease(ct).attr("d",z[g]),a(h));var nt=ht&&!gt?"url("+R+"#"+kt+")":null;K.attrs({"marker-end":nt,"marker-start":nt,"marker-mid":nt}),q.exit().remove()}),!gt||!ht){var St=ht?(it.size||tt)*Ot.outer*10+tt/2:0;m.push({renderer:e,charttype:"scatter",chartObj:w,args:[I,o,St,S]})}}),e.renderedTimer=setTimeout(function(){g&&E(u.selectAll("#line_"+o),p,f,e),e.chartRendered=!0,M=!0},M?2*A+20:A+20),e.oldXscale=n,e}function t(e,t,r){e.styles({"stroke-dasharray":function(){return this.getTotalLength()+" "+this.getTotalLength()},"stroke-dashoffset":function(){return this.getTotalLength()}}).transition().duration(r).ease(t).style("stroke-dashoffset",0).on("end",function(){a(Rl(this))})}function a(e){e.styles({"stroke-dasharray":f,"stroke-dashoffset":null})}var r,n,i,o,l,s,c,d,u,h,f,g,p,y,v,m,x,b,C,w,k,O,S,A,L,z=[],D=qo.scatter(),M=!1;return e.commonRendererProp=function(t){return arguments.length?(r=t,e):r},e.shiftInfo=function(t){return arguments.length?(O=t,e):O},e.yrangePos=function(t){return arguments.length?(S=t,e):S},e},qo.area=function(){function e(k){return k.each(function(k){var O=a.params;h=O.chartObj,r=O.xscale,n=O.yscale,v=O.stacked,y=O.datasetIndex,renderingOrder=O.renderingOrderIndex,m=O.axisrotated,c=O.commonPlotOptions,l=O.color,s=O.labelQueue,u=O.hasNegValue,o=O.yaxiscolumnorder,i=O.dataset,d=h.systemConf;var S=h.defsLocation,A=h.dataObject.isPolarAxisCategory,P=k[y],T={data:P,index:renderingOrder},E=P.plotoptions,L=P.data,z=h.chartTypes[y].name,D=So.utils.getValueOfPlotOptions(E,c),M=D("fillOpacity"),j=D("strokeWidth"),R=D("strokeColor"),I=Pd.isQuantileColorScale(h),H=I||(ut(E)?So.utils.getValueOfPlotOptions(E.marker,c.marker)("enabled"):c.marker.enabled),B=null!=j&&""!=j&&0!=t(j)||null!=R&&""!=R||H,F=ha(c,E,h,z),V=F.enabled,N=F.easingType,_=F.type;f=F.duration,_=_==nc?rc:_;var W=h.dataset.getDataType("x"),Y=h.dataset.getDataType("y",o),X=W==Ns?r.domain():null,U=Y==Ns?n.domain():null,G=W!=Ns||ut(h.dataObject.hierarchical)?h.dataObject.getCategories("x"):X,Z=d.chart.axes.yaxis[o].reversed;W!=Ns&&0==G.length&&V&&_==sc&&(G=h.dataObject.findXCategories());var Q="arearange"==z,q=Q?1:null;e.seriesdataAfterUpdate=[],L.forEach(function(t,a){var i;if(i=W==Ns||Y==Ns?h.dataObject.updateSeriesdatabyCategories(et(t),X,U,o):t,h.brush&&h.brush.extent){var l=h.axes.x.scale.domain(),s=h.axes.x.ticks.tickValueObj.ticks,c=W==_s?s[0].getTime():W==Ns?G.indexOf(l[0]):l[0],d=W==_s?l[1].getTime():W==Ns?G.indexOf(l[l.length-1]):l[1],u=W==Ns?function(e){return G.indexOf(h.dataset.getX(e))}:function(e){return h.dataset.getX(e)};i=w.filterDataToViewPort(i,c,d,u)}e.seriesdataAfterUpdate[a]=i,h.systemConf.chart.axes.xaxis.reversed&&(i=i.slice(0).reverse()),p=null!=g?null==p||0==p?h.dataObject.getXYvalue(m,v,r,n,o,i[i.length-1],"x")-h.dataObject.getXYvalue(m,v,r,n,o,i[i.length-2],"x"):p:0,C[a]=ji(O,p,g,i,a)});var K=Rl(this);e.update=function(){K.transition().call(e)};var $;if(A?($=K.selectAll("g.areaseries_"+y).data([T]),$.enter().insert("g",":first-child").merge($).attr("class","areaseries_"+y),$=K.selectAll("g.areaseries_"+y)):$=Qt(K,"g",[T],".","class","areaseries_"+y),B||H){if(b.commonRendererProp(a).shiftInfo(g),b.chartRendered=!1,Q){b.yrangePos(1);var J=qo.line().commonRendererProp(a).shiftInfo(g).yrangePos(0);J.chartRendered=!1,K.call(J)}K.call(b)}else K.selectAll("g.lineseries_"+y+",g.scatterseries_"+y).remove();L.forEach(function(t,a){function s(){var e=vs(C[a](p),C[a](d));return function(t){return e(t)}}var c,d=e.seriesdataAfterUpdate[a],p=d;if(V){if(_==sc)p=d.map(function(){return Object.create(d[0])});else{var b=_==oc?i.xidx:i.yidx(o),w=_==oc?r:n,k=A&&Z&&!v?w.domain().length-1:0;p=d.map(function(e){var t=Object.create(e);if(v&&_!=oc)t.y0=A&&_===lc?hl(0,w.domain()[0]):0,t.y=A||null==u||null==w(u)?w.domain()[0]:ul(u,w.domain()[0]);else if(Q&&_==rc){var a=new Array(2),r=h.dataset.getY(e,o,0);a[0]=r,a[1]=null==t[b]?null:null!=u&&null!=w(u)?ul(u,r):r,t[b]=a}else t[b]=null==t[b]?null:A||null==u||null==w(u)?w.domain()[k]:ul(u,w.domain()[0]);return t})}c=et(p)}var T=P.disabled,E=Qt($,"g",function(e){return T?[]:[e]},".","class","subseries_"+a),L=E.selectAll("path.area").data(function(e){return T?[]:[e]}),z=L.enter().append("path").datum(p,function(e){return i.getX(e)}).attr("class","area").style("opacity",M).style("fill",l).attr("d",C[a]);V&&(_==cc||_==sc?fa(p,c,d,G,_,N,f,O,function(e){return{d:C[a](e)}},z):null!=z.node()&&_==lc?z.transition().duration(0).delay(f).attr("d",function(e){return C[a](e)}):z.transition().duration(f).ease(N).attrTween("d",s));var D=bd.getDimension(h,y),j=e.fillColorFunc=za(h,y,D);if(null!=g&&x){var R=r(d[0][0])+(null!=r.bandwidth?r.bandwidth()/2:0),I=h.dataObject.getXYvalue(m,v,r,n,o,d[d.length-1],"x")-h.dataObject.getXYvalue(m,v,r,n,o,d[0],"x"),H={name:"rect",id:h.id,x:R,y:0,width:I,height:h.plotarea.height},B={chartObj:h},F=fd.get(xd,"rect",H,B);$.attr("clip-path","url("+S+"#"+F+")")}var W=d,Y=z.merge(L).datum(d,function(e){return i.getX(e)}).styles({opacity:M,fill:j(y,null,null,l,El,El,El,El,a)});if(null!=g){var X=null!=g?Math.abs(h.dataObject.getXYvalue(m,v,e.oldXscale,n,o,d[0],"x",null,q)-h.dataObject.getXYvalue(m,v,r,n,o,d[0],"x",null,q)):null;L.datum(W).attr("d",C[a]).attr("transform",null).transition().duration(f).ease(N).attr("transform",function(){return null==X?null:"translate(-"+X+",0)"})}else null!=z.node()&&_==lc?Y.datum(W).style("fill-opacity",0).transition().duration(0).delay(f).attr("d",C[a]).style("fill-opacity",null):Y.datum(W).style("fill-opacity",null).transition().delay(_!=cc&&_!=sc||null==z.node()?0:f).duration(f).ease(N).attr("d",C[a]);L.exit().remove()}),B||H||(Q?(s.push({renderer:e,charttype:"scatter",chartObj:h,args:[P,y,0,1]}),s.push({renderer:e,charttype:"scatter",chartObj:h,args:[P,y,0,0]})):s.push({renderer:e,charttype:"scatter",chartObj:h,args:[P,y,0]}))}),e.renderedTimer=setTimeout(function(){e.chartRendered=!0,x=!0},f),e.oldXscale=r,e}var a,r,n,i,o,l,s,c,d,u,h,f,g,p,y=0,v=!1,m=!1,x=!1,b=qo.line(),C=[],w=So.DataProcessor.helpers;return e.commonRendererProp=function(t){return arguments.length?(a=t,e):a},e.shiftInfo=function(t){return arguments.length?(g=t,e):g},e},qo.scatter=function(){function e(p){return p.each(function(p){var b=y.params;t=b.chartObj,a=b.xscale,r=b.yscale,l=b.stacked,n=b.datasetIndex,renderingOrder=b.renderingOrderIndex,c=b.axisrotated,u=b.commonPlotOptions,o=b.color,d=b.labelQueue,f=b.hasNegValue,i=b.yaxiscolumnorder,s=b.dataset,h=t.systemConf;var C=t.defsLocation,w=h.chart.axes.xaxis.reversed,k=h.chart.axes.yaxis[i].reversed,O=Rl(this);e.update=function(){O.transition().call(e)};var S=p[n],A={data:S,index:renderingOrder},E=S.plotoptions,L=t.chartTypes[n].value,z=t.chartTypes[n].name,D=L==So.charttype.bubble,M=Nr(L),j=t.dataObject.isPolarAxisCategory,R=S.data,I=Qt(O,"g",[A],".","class","scatterseries_"+n);"arearange"===z&&(I=Qt(I,"g",[A],".","class","rangePos_"+v));var H=ha(u,E,t,z),B=H.enabled,F=H.easingType,V=H.type;g=H.duration;var N=E&&E.marker?Cd(u.marker,E.marker,!0):u.marker,W=N.symbol,Y=N.size,U=N.imageUrl;M?(Y=lt(Y,1),V=V==Zs?Ks:V):(rt(Y)&&(Y=(E?So.utils.getValueOfPlotOptions(E,u)("strokeWidth"):u.strokeWidth)||2),U||(Y*=j?.56:.7),V=V==rc||V==nc?ac:V,V=V==oc?ic:V,o=S.color||o);var G=_(W,Y),Z=M?Va(u,t):!1,Q=10*Y,q=V==Ks?0:N.outerFillOpacity,K=V==Ks?0:N.outerStrokeOpacity,$=V==Ks?0:N.innerFillOpacity,J=V==Ks?0:N.innerStrokeOpacity,tt={name:N.imageUrl},at=P(N.outerDashStyle,N.outerStrokeWidth),nt=P(N.innerDashStyle,N.innerStrokeWidth),it=T(N.outerLineCap,N.outerDashStyle),ot=T(N.innerLineCap,N.innerDashStyle),st=Pd.isQuantileColorScale(t),ct=st&&N.enabled===!1?"hidden":El,dt=e.fillColorFunc=za(t,n,null,M?null:!0),ht=Ma(t,n);e.seriesdataAfterUpdate=[];var ft=t.dataset.getDataType("x"),gt=t.dataset.getDataType("y",i),pt=x.isCatNull(s,"x"),yt=x.isCatNull(s,"y",i),vt=ft==Ns?a.domain():null,mt=gt==Ns?r.domain():null,xt=ft!=Ns||null==a.domain||ut(t.dataObject.hierarchical)?t.dataObject.getCategories("x"):vt;if(R.forEach(function(d,h){function p(e){switch(V){case ac:var n=null!=f&&null!=r(f)?r(ul(f,r.domain()[0])):r.origRange[0];return c?n:t.dataObject.getXYvalue(c,l,a,r,i,e,"x",null,v);case ic:var n=(null!=f&&null!=a(f)?a(ul(f,a.domain()[0])):a.origRange[0])+(null!=a.bandwidth?a.bandwidth()/2:0);return c?t.dataObject.getXYvalue(c,l,a,r,i,e,"x",null,v):n;case Ks:case $s:case Js:case sc:case cc:case lc:return t.dataObject.getXYvalue(c,l,a,r,i,e,"x",null,v);default:var o=(c?r:a).origRange,s=c&&k||!c&&w?o.length-1:0;return o[s]}}function y(e){switch(V){case ac:var n=null!=f&&null!=r(f)?r(ul(f,r.domain()[0])):r.origRange[0];return c?t.dataObject.getXYvalue(c,l,a,r,i,e,"y",null,v):n;case ic:var o=(null!=f&&null!=a(f)?a(ul(f,a.domain()[0])):a.origRange[0])+(null!=a.bandwidth?a.bandwidth()/2:0);return c?o:t.dataObject.getXYvalue(c,l,a,r,i,e,"y",null,v);case Ks:case $s:case Js:case sc:case cc:case lc:return t.dataObject.getXYvalue(c,l,a,r,i,e,"y",null,v);default:var s=(c?a:r).origRange,d=c&&w||!c&&k?s.length-1:0;return s[d]}}function O(e){return(!j||e&&!e.isDummy)&&(j||L===So.charttype.stkdarea||!pt(s.getX(e))&&!yt(s.getY(e,i)))?D?t.dataObject.getXYvalue(c,l,a,r,i,e,"z",t.zscale,v):Q:0}function A(e){var t=O(e);return t>0&&("line"==W||"vertical-line"==W)?"line"==W?{width:t,height:Ct||1}:"vertical-line"==W?{height:Ct||1,width:t}:void 0:null}var P;if(P=ft==Ns||gt==Ns?t.dataObject.updateSeriesdatabyCategories(et(d),vt,mt,i):d,t.brush&&t.brush.extent){var T=t.axes.x.scale.domain(),z=(t.axes.x.ticks.tickValueObj.ticks,ft==_s?T[0].getTime():ft==Ns?xt.indexOf(T[0]):T[0]),R=ft==_s?T[1].getTime():ft==Ns?xt.indexOf(T[T.length-1]):T[1],H=ft==Ns?function(e){return xt.indexOf(t.dataset.getX(e))}:function(e){return t.dataset.getX(e)};P=x.filterDataToViewPort(P,z,R,H)}e.seriesdataAfterUpdate[h]=P;var _,Y,rt,lt=S.disabled;if(V==cc||V==sc){if(_=P,w&&(_=_.slice(0).reverse()),Y=_,V==sc)Y=_.map(function(){return Object.create(_[0])});else if(V==cc){var st=j&&k&&!l?r.domain().length-1:0;Y=_.map(function(e){var t=Object.create(e),a=j||null==f||null==r(f)?r.domain()[st]:ul(f,r.domain()[0]);return l&&(t.y0=0,t.y=a),t[s.yidx(i)]=a,t})}rt=et(Y)}var bt=Qt(I,"g",function(){return lt?[]:[P]},".","class","subseries_"+h),wt=function(e){return e},kt=bt.selectAll("g.scatter").data(wt).attr("class","scatter"),Ot=kt.enter().append("g").attr("class","scatter"),St=Ot.size(),At=V!=uc?g:g/St,Pt=function(e,a){return(!j||e&&!e.isDummy)&&(j||L===So.charttype.stkdarea||e&&!e.isDummy&&!pt(s.getX(e))&&!yt(s.getY(e,i)))?[{color:Z?t.seriesColor[a%t.seriesColor.length]:o,index:Z?a:n,data:e}]:[]};B&&(V==cc||V==sc?fa(Y,rt,_,xt,V,F,g,b,function(e){return{transform:function(t,a){return"translate("+p(e[a])+","+y(e[a])+")"}}},Ot,"scatter"):Ot.attr("transform",function(e){return"translate("+p(e)+","+y(e)+")"+(U&&V===$s?" scale(0)":"")}).transition().delay(function(e,t){return V==uc?t*At:0}).duration(At).ease(F).attr("transform",function(e){return"translate("+t.dataObject.getXYvalue(c,l,a,r,i,e,"x",null,v)+","+t.dataObject.getXYvalue(c,l,a,r,i,e,"y",null,v)+")"}));var Tt=Ot.merge(kt),Et=Qt(Tt,"path",Pt,".","class","outer");Et.styles({"fill-opacity":q,"stroke-opacity":K,visibility:ct});var Lt=Qt(Tt,"path",U?[]:Pt,".","class","inner");Lt.styles({"fill-opacity":$,"stroke-opacity":J,visibility:ct}),m&&U&&Tt.attr("transform",function(e){var t=Rl(this).attr("transform"),a=Rl(this).attr("size"),r=O(e);return t+" scale("+a/r+")"}),Tt.transition().delay(function(e,t){return V!=cc&&V!=sc||null==Ot.node()?V==uc?t*At:0:g}).duration(At).ease(F).attr("transform",function(e){return"translate("+t.dataObject.getXYvalue(c,l,a,r,i,e,"x",null,v)+","+t.dataObject.getXYvalue(c,l,a,r,i,e,"y",null,v)+")"}).attr("level",function(e){return ut(t.dataObject.hierarchical)?e.level:void 0}).styles({transition:"opacity ease .2s",opacity:function(e){if(ut(t.dataObject.hierarchical)&&ut(t.cache.hierarchical)){var a=t.cache.hierarchical;if(a.active)return e.active===!0?1:.1}}});var zt=V===Js?2*g/5:At,Dt=V===Js?function(){return wl()*(3*g/5)}:0,Mt=Tt.selectAll("path.outer").attr("d",function(e){var t=Rl(this.parentNode).attr("size"),a=O(e.data),r=null!=t?U?a:t:V!=$s&&V!==Js||U?a:0;return G(r)}).styles({"stroke-width":N.outerStrokeWidth,fill:function(e){var a=O(e.data);if(U)return tt.width=tt.height=parseFloat(a),tt.x=tt.y=-parseFloat(a)/2,"url("+C+"#"+fd.get(pd,"imageFill",tt,{chartObj:t})+")";var r=a/2;return dt(e.index,e.data,null,N.outerFillColor,null,M?[r,r]:null)},stroke:function(e){return ht(e.index,e.data,N.outerStrokeColor)},"stroke-dasharray":at,"stroke-linecap":it}),jt=Tt.selectAll("path.inner").attr("d",function(e){var t=Rl(this.parentNode).attr("size"),a=null!=t?t:V!=$s&&V!==Js||U?O(e.data):0;return G(a/2)}).styles({"stroke-width":N.innerStrokeWidth,fill:function(e){var t=O(e.data)/4;return dt(e.index,e.data,null,N.innerFillColor,null,M?[t,t]:null)},stroke:function(e){return ht(e.index,e.data,N.innerStrokeColor)},"stroke-dasharray":nt,"stroke-linecap":ot});Mt.transition().delay(Dt).duration(zt).ease(F).attr("d",function(e){return G(O(e.data))}).styles({"fill-opacity":N.outerFillOpacity,"stroke-opacity":N.outerStrokeOpacity}),jt.transition().delay(Dt).duration(zt).ease(F).attr("d",function(e){return G(O(e.data)/2)}).styles({"fill-opacity":N.innerFillOpacity,"stroke-opacity":N.innerStrokeOpacity});var Rt=(E&&E.animation&&E.animation.blink?Cd(u.animation.blink,E.animation.blink,!0):u.animation.blink)||{};X(Tt.selectAll(".outer,.inner"),Rt,t),Tt.attr("size",function(e){return O(e)}),kt.exit().remove(),e.getSymbolSize=O,e.getSymbolBBox=A}),null!=So.labelRenderer){var bt;if(M||D)bt=Q+N.outerStrokeWidth;else{var Ct=lt(So.utils.getValueOfPlotOptions(E,u)("strokeWidth"),2);bt=(N.size||Ct)*Q*.5+Ct/2}d.push({renderer:e,charttype:"scatter",chartObj:t,args:[S,n,bt,v]})}e.renderedTimer=setTimeout(function(){m=!0,e.chartRendered=!0},g)}),e}var t,a,r,n,i,o,l,s,c,d,u,h,f,g,p,y,v,m=!1,x=So.DataProcessor.helpers;return e.commonRendererProp=function(t){return arguments.length?(y=t,e):y},e.shiftInfo=function(t){return arguments.length?(p=t,e):p},e.yrangePos=function(t){return arguments.length?(v=t,e):v},e},qo.pie=function(){function e(t){return t.each(function(t){function s(t,a){var r=un(d3.event);return{renderer:e,seriesPos:0,subseriesPos:0,itemPos:a,color:P[a%P.length],coordinates:[r.pageX,r.pageY],element:this,data:t}}var c=w.params;k=c.chartObj,R=c.commonPlotOptions,P=c.color,H=c.notesArray,I=k.systemConf;var d=c.labelQueue,u=c.yaxiscolumnorder,h=c.dataset,f=c.datasetIndex||0,q=k.defsLocation,et=k.seriesdata[f],at=R.maxRadius+" _ "+R.outerPadding+" _ "+R.innerRadius,rt=k.chartTypes[f].name;B=rt===Fc;var nt=rt===Bc,it=!B&&!nt;Q=it?lt(R.dataindex,3):h.yidx(u),Z=G||(B?k.plotarea_approx:k.plotarea),z=Z.width,L=Z.height,O=lt(Z.radius,hl(z,L)/2),y=!1;var ot,st=et.plotoptions,ct=R.datalabels,dt=So.utils.getValueOfPlotOptions(st,R),ht=lt(dt("maxRadius"),250),ft=R.levelMarker,gt=nt?+dt("outerPadding"):0,pt=dt("strokeWidth");C=void 0!==R.baseValue?R.baseValue:0;var yt=k.datalabels.moduleExists&&ui(ct,k),vt=yt?+(ct.padding||0)+(ai(ct,k)?2*(ri(ct,k)+ni(ct,k)):0):0,mt={},xt=0;if(v=k.datalabels.moduleExists&&ai(ct,k),gt+=nt?vt:0,F=hl(ht,O-gt),nt&&yt){var bt=z*K,Ct=z-2*F;bt>Ct&&(vt=mt.padding=5,xt=ul(bt-Ct,0),F-=xt/2)}if(S=Pa(R,F),pt=lt(pt,1),B&&ft.enabled){var wt,kt;if(ut(R.bandWidth)||ut(R.maxBandWidth)){var Ot=lt(R.maxBandWidth,F),St=hl(ka(R.bandWidth,F,F-S),Ot);wt=-(F-S-St)/2,kt=-(F-S-St)/2,ot=0===St?"hidden":null}else wt=hl(0,ka(ft.innerPadding,O,0)),kt=hl(0,ka(ft.outerPadding,O,0));F+=kt,S-=wt}F-=.5*pt,V=ul(S,F),Y=(st&&st.models?Cd(R.models,st.models,!0):R.models)||{};var At=ha(R,st,k,rt),Pt=At.enabled,Tt=Pt?tt?200:At.duration:0,Et=tt?Nl:At.easingType,Lt=At.type,zt=0==lt(Hr(st,R,k,"enabled"),!0),Dt=zt?null:Hr(st,R,k,"cursor")||Tl;T=Rl(this),E=Qt(T,"g",[t],".","class","piegroup"),E.styles({"stroke-width":pt,"fill-opacity":dt("fillOpacity"),"stroke-opacity":R.strokeOpacity,cursor:Dt,visibility:ot}),$.startAngle(R.startAngle).endAngle(R.endAngle).value(function(e){return e.disabled?0:fl(e[Q]||0)});var Mt=$(t=it?t:et.data[0]);e.data=Mt,_=Mt.reduce(function(e,t){return e+(t.value?1:0)},0),e.total=A=Mt.reduce(function(e,t){return e+t.value},0),e.arc=J;var jt=!0;if(jt)J.outerRadius(V).innerRadius(S);else{var Rt=ka(ft.interPadding,V,10),It=t.length,Ht=(V-S-(It-1)*Rt)/It;J.innerRadius(function(e,t){return t*(Ht+Rt)+S}).outerRadius(function(e,t){return(t+1)*Ht+t*Rt+S}).startAngle(R.startAngle).endAngle(function(e){return e.endAngle})}j=us().innerRadius(V).outerRadius(V+vt);var Bt=us().innerRadius(V).outerRadius(V);N=pt;var Ft=l(E),Vt=(Ft.height+pt)/F,Nt=(Ft.width+pt)/F,_t=F+hl((z-2*gt-xt-(Ft.width+pt))/Nt,(L-2*gt-xt-(Ft.height+pt))/Vt);if(_t=hl(ht,ul(F,_t)),B){at+=" _ "+R.bandWidth+" _ "+ft.bandWidth+" _ "+ft.innerPadding+" _ "+ft.outerPadding;var Wt=k.axes.y.groups[0].scale,Yt=Wt.domain();Mt.forEach(function(e){var t=e.data[Q];p=g,(g=0>t)?(e.startAngle=Wt(null!=C?Math.min(C,Yt[1]):Yt[1]),e.endAngle=Wt(Math.max(t,Yt[0]))):(e.startAngle=Wt(null!=C?Math.max(C,Yt[0]):Yt[0]),e.endAngle=Wt(Math.min(e.value,Yt[1])))})}else _t!=F&&(F=_t,S=Pa(R,F),V=ul(S,F),J.outerRadius(V).innerRadius(S),j=us().innerRadius(V).outerRadius(V+vt),Bt=us().innerRadius(V).outerRadius(V),l(E));var Xt=!B&&Y.type?"url("+q+"#"+r(a())+")":null,Ut=[V,V],Gt=e.fillColorFunc=za(k,f,Ut),Zt=Ma(k,0);if(W=2*ka(dt("sliceOutHeight"),F,0),M=E.selectAll(Us).data(),D=Qt(E,Us,Mt),D.attrs({"clip-path":Xt,id:function(e,t){return"arc_"+t}}).styles({display:"block",fill:function(e,t){return Gt(t,e.data)},stroke:function(e,t){return Zt(t,e.data,R.strokeColor)}}),en(k,D,zt),!zt){var qt=function(e,t){var a=s(e,t);k.eventHandler.mouseMove(a)},Kt=function(t,a){k.eventHandler.mouseOut(e,t,a)},$t=function(t,a){var r=s(t,a);k.eventHandler.click(e,t,0,a,r)},Jt=function(e,t){var a=So.annotation?vo(e.data,null):e.data,r=j.centroid(e);r=[r[0]+X,r[1]+U];var n={coordinate:r,data:a,basedOn:"plot"};k.eventHandler.doubleclick(e,t,n)},ea={target:"plot",touchleave:!0,chartObj:k},ta={mousemove:qt,mouseout:Kt,click:$t,dblclick:Jt},aa={singletouchmove:qt,touchend:Kt,tap:$t,dbltap:Jt};cn(D,ta,aa,ea)}if(/(\\D)+onebyone/.test(Lt)&&!tt){var ra=Lt==hc,na=ra?Tt:Tt/_,ia=0;D.transition().ease(Et).duration(function(e){return ra?na*(e.value/A):na}).delay(function(e){var t=na*ia;return ia+=ra?e.value/A:1,t}).call(ra?i:n)}else{var oa;oa=tt?at!=m?n:o:Lt==fc?o:Lt==yc?n:i,D.transition().duration(Tt).ease(Et).call(oa).on("end",function(e){var t=e.data.disabled||e.startAngle===e.endAngle;Rl(this).style("display",t?Al:"block")})}e.renderedTimer=setTimeout(function(){if(m=at,x=S,b=V,B)k.renderer[0].endFunctions();else if(D.style("display",function(e){return e.data.disabled||!e.value?Al:null}),So.labelRenderer&&!it){var t=[X,U],a=[E.datum(),0,Mt,V,A,j,Bt,J,t,mt];d.push({renderer:e,charttype:Bc,chartObj:k,args:a}),d.push({renderer:e,charttype:"pieInnerLabels",chartObj:k,args:a})}So.annotation&&!it&&(H=So.annotation.preprocessAnnotations(k.seriesdata,0,function(e,t,a){var r=j.centroid(Mt[a]);return[r[0]+X,r[1]+U]},H,k,c)),e.chartRendered=!0,tt=!0},Tt+1e3/60)}),e}function t(e){for(var t=[],a=[],r=0,n=0;e>n;n++)"gear1"==Y.type?a.push([r++,0],[r++,1],[r++,1]):a.push([r,0],[r++,1],[r,1],[r++,0]);return t.push(a),t}function a(){var e=-1,a=Y.count,r="zigzag"==Y.type?-50+S/5:"sun"==Y.type?-1:-10,n=t(a),i=Yl().range([0,2*kl]).domain([0,"gear1"==Y.type?3*a:2*a]),o=Yl().range([S,V]).domain([r,1]),l=ss().curve(_l("linearClosed")).radius(function(e){return o(e[1])}).angle(function(t,a){return e="gear"==Y.type?a%2==0?e+1:e:"gear1"!=Y.type&&a%2!=0?e+1:e,i("gear1"==Y.type?e++:e)});return l(n[0])}function r(e){var t={name:"pieModels",id:k.id,d:e},a={chartObj:k},r=fd.get(xd,"polygon",t,a);return r}function n(e){Ri(e,J,[tt?x:S,S],[tt?b:S,V])}function i(e){e.attrTween("d",function(e){var t=vs(e.startAngle,e.endAngle);return function(a){return e.endAngle=t(a),J(e)}})}function o(e){e.attrTween("d",function(e,t){var a,r,n=M[t]||M[M.length-1];g?(a=tt&&n&&p?n.endAngle:e.startAngle,r=tt&&n&&p?n.startAngle:e.startAngle):(a=tt&&n&&!p?n.endAngle:B?e.startAngle:R.startAngle,r=tt&&n&&!p?M[t]?n.startAngle:n.endAngle:B?e.startAngle:R.startAngle);var i=vs(a,e.endAngle),o=vs(r,e.startAngle);return function(a){return e.endAngle=i(a)||0,e.startAngle=o(a)||0,J(e,t)}})}function l(t){var a=[];a[Q]=1;var r=T.append(Us).attr("d",J($([a])[0],e.data.length-1)).styles({fill:Al,stroke:Al}),n=q(r.node());r.remove();var i=wa(n,z,L,F,N);return X=B?Z.x:i[0],U=B?Z.y:i[1],t.attr("transform",function(){return"translate("+X+","+U+")"}),n}function s(){c=c||k.staticPaneSVG.selectAll("g."+qc+"_0"),d=d||k.staticPaneSVG.selectAll("g.link_0"),u=u||k.staticPaneSVG.selectAll("g.label_0"),f=f||k.staticPaneSVG.selectAll("g.boundboxseries_0"),h=h||k.staticPaneSVG.selectAll("g.innerboundboxseries_0"),y=!0}var c,d,u,h,f,g,p,y,v,m,x,b,C,w,k,O,S,A,P,T,E,L,z,D,M,j,R,I,H,B,F,V,N,_,W,Y,X,U,G,Z,Q,K=.3,$=fs().sort(null),J=us(),et=function(e){return ba(W,(e.startAngle+e.endAngle)/2)},tt=!1;return e.commonRendererProp=function(t){return arguments.length?(w=t,e):w},e.plotarea=function(t){return arguments.length?(G=t,e):G||Z},e.innerRadius=function(t){return arguments.length?(S=t,e):S},e.defaultMouseOverFunc=function(t,a,r){if(1!=_){y||s();var n=et(t),i={transform:"translate("+n[0]+","+n[1]+")"};D.transition().ease(Nl).attr("transform","translate(0,0)"),E.selectAll("#arc_"+r).transition().ease(Nl).attrs(i),c.selectAll("#innerlbl0_0_"+r).transition().ease(Nl).attrs(i),v||d.selectAll("#link0_0_"+r).style("stroke-width",3*e.lineStrokeWidth),"circular"==e.showlabel&&(u.selectAll("#lbl0_0_"+r).transition().ease(Nl).attrs(i),f.selectAll("#boundboxlbl0_0_"+r).transition().ease(Nl).attrs(i)),u.selectAll("#lbl0_0_"+r).style("text-shadow","0 0 0 rgba(0,0,0,1)"),h.selectAll("#boundboxinnerlbl0_0_"+r).transition().ease(Nl).attrs(i)}},e.defaultMouseOutFunc=function(t,a,r){y||s();var n={transform:"translate(0,0)"};return u.selectAll(Ys).style("text-shadow",null),v||d.selectAll(Us).style("stroke-width",e.lineStrokeWidth),!Yd&&r?(D.attrs(n),c.selectAll(Ys).attrs(n),h.selectAll(Us).attrs(n),void("circular"==e.showlabel&&(u.selectAll(Ys).attrs(n),f.selectAll(Us).attrs(n)))):(D.transition().ease(Nl).attrs(n),c.selectAll(Ys).transition().ease(Nl).attrs(n),"circular"==e.showlabel&&(u.selectAll(Ys).transition().ease(Nl).attrs(n),f.selectAll(Us).transition().ease(Nl).attrs(n)),void h.selectAll(Us).transition().ease(Nl).attrs(n))},e},qo.funnel=function(){function e(i){i.each(function(i){function l(){e.renderedTimer=setTimeout(function(){var t=a(p);if(So.labelRenderer){var r=[g.seriesdata,0,p,y,z+2+q,O,ct,t];V.push({renderer:e,charttype:Vc,chartObj:g,args:r}),V.push({renderer:e,charttype:"funnelInnerLabels",chartObj:g,args:r})}So.annotation&&(G=So.annotation.preprocessAnnotations(g.seriesdata,0,function(e,t,a){return[S[S.length-1-a].bottomLeft[0]+(k/2-ct.width/2),S[S.length-1-a].bottomLeft[1]+(z+2+q)]},G,g,rt)),ft=!0,e.chartRendered=!0},bt?ft?wt:300:0)}function h(e){e._groups[0].reverse(),e.data(p)}function F(t,a){var r=un(d3.event);return{renderer:e,seriesPos:0,subseriesPos:0,itemPos:a,color:P[a%P.length],coordinates:[r.pageX,r.pageY],element:this,data:t}}rt=f.params,g=rt.chartObj,X=rt.commonPlotOptions,P=rt.color,G=rt.notesArray,W=rt.yaxiscolumnorder,w=rt.dataset,U=g.systemConf;var V=rt.labelQueue;at=g.defsLocation,k=g.plotarea.width,A=g.plotarea.height,nt=!1,Y=i[0].plotoptions;var it=So.utils.getValueOfPlotOptions(Y,X);$=U.legend.imagePallete||Br(g),ct.canOverlap=it("canOverlap"),Q=it("split"),L=it("threeDimension");var dt=X.emptyFunnel;Z=X.datalabels.padding;var pt=g.datalabels.moduleExists&&ui(X.datalabels,g),yt=Ma(g,0);j=Od(X.minPadding,L?4:1),R=Od(X.maxPadding,10);var vt=ha(X,Y,g,Vc),mt=vt.type,xt=vt.easingType,bt=vt.enabled,Ct=vt.duration,wt=bt?200:0;q=ka(it("outerPadding"),A,0)/2,x=it("stemHeight"),b=it("stemWidth"),et="width"===it("weighted"),tt=it("weighted")===Al,et&&(x=b=0,Q=!0),p=i=i[0].data[0],y=p.reduce(function(e,t){return e+(w.getY(t,W)&&!t.disabled?1:0)},0),m=y-1;var kt=s();ct.height=A-2*kt-.01*A-2*q;var Ot=it("coneWidth");if(Ot=ka(Ot,ct.height,.95*ct.height),ct.width=hl(k,Ot),M=c(ct.height),ct.gapHeight=!bt||Q||ft?M:mt==ic?M:0,(et||tt)&&ut(X.maxSliceHeight)&&(ct.height-=ul(0,ct.height-M*m-ka(X.maxSliceHeight,ct.height)*y)),pt){var St=k*st,At=k-ct.width;St>At&&(Z=ct.datalabelPadding=5,ct.width-=ul(St-At,0))}x=ka(x,ct.height,.2*ct.height),C=b=ka(b,ct.width,x*ct.width/ct.height)/2,v=ct.height-x,z=.05*ct.height,z=ul(ht,(z-p.length)/p.length),D=z=L?ct.canOverlap?z+R/2:M/2-gt:0,e.total=O=p.reduce(function(e,t,a){return e+(p[a].disabled?0:fl(w.getY(p[a],W)||0))},0),J=ul.apply(null,p.map(function(e,t){return p[t].disabled?0:fl(w.getY(p[t],W))/O})),_=Yl().domain(et?[0,J]:[x,ct.height]).range([ct.width/2-b,0]),N=Yl().domain(et?[0,J]:[x,ct.height]).range([ct.width/2+b,ct.width]),S=t(p),K=[ct.width,ct.height],ot=e.fillColorFunc=za(g,0,K);var Pt=0==lt(Hr(Y,X,g,"enabled"),!0),Tt=Pt?null:Hr(Y,X,g,"cursor")||Tl,Et=Rl(this);if(I=Qt(Et,"g",[i],".","class","funnelgroup"),I.attr("transform","translate("+(k/2-ct.width/2)+","+(z+2+q)+")").styles({cursor:Tt,"stroke-opacity":it("strokeOpacity"),"stroke-width":it("strokeWidth")}),H=Qt(I,"g",[1],".","class","ellipsegroup"),B=Qt(I,"g",[1],".","class","trapezoidgroup"),T=Qt(B,Us,p),h(T),T.attr("id",function(e,t){return"funnel"+t}).styles({"fill-opacity":X.fillOpacity,fill:function(e,t){return ot(t,e)},stroke:function(e,t){return yt(t,e,X.strokeColor)}}),E=Qt(H,Us,L?p:[]),h(E),E.attr("id",function(e,t){return"ellipse"+t}).styles({"fill-opacity":X.fillOpacity,fill:function(e,t){return ot(t,e,.5)},stroke:function(e,t){return yt(t,e,X.strokeColor,.5)}}),en(g,T,Pt),en(g,E,Pt),!Pt){var Lt=function(e,t){var a=F(e,t);g.eventHandler.mouseMove(a)},zt=function(t,a){g.eventHandler.mouseOut(e,t,a)},Dt=function(t,a){var r=F(t,a);g.eventHandler.click(e,t,0,a,r)},Mt=function(e,t){var a=So.annotation?vo(e,null):e,r=S[i.length-1-t].bottomLeft;r=[r[0]+(k/2-ct.width/2),r[1]+(z+2+q)];var n={coordinate:r,data:a,basedOn:"plot"};g.eventHandler.doubleclick(e,i.length-1-t,n)},jt={target:"plot",touchleave:!0,chartObj:g},Rt={mousemove:Lt,mouseout:zt,click:Dt,dblclick:Mt},It={singletouchmove:Lt,touchend:zt,tap:Dt,dbltap:Mt};cn(T,Rt,It,jt),cn(E,Rt,It,jt)}var Ht=ct.canOverlap?2*b/ct.width*z:z+gt,Bt="M0,0L"+(ct.width/2-b)+","+v+"L"+(ct.width/2-b)+","+ct.height+"A"+b+","+Ht+",0,0,0,"+(ct.width/2+b)+","+ct.height+"L"+(ct.width/2+b)+","+v+"L"+ct.width+",0A"+ct.width/2+","+z+",0,0,0,0,0A"+ct.width/2+","+z+",0,0,0,"+ct.width+",0",Ft=Qt(I,Us,!ft&&dt.show&&bt?[1]:[],"#","id","emptyFunnel");if(Ft.attr("d",Bt).styles({stroke:dt.color||"grey",fill:Al}),r(Bt),ft)T.transition().duration(wt).ease(Nl).attr("d",function(e,t){return d(S[p.length-1-t])}),E.transition().duration(wt).ease(Nl).attr("d",function(e,t){return u(S[p.length-1-t])}),o(i,wt),l();else{o(i,0);var Vt=0,Nt=0;T.transition().duration(function(e){var t=w.getY(e,W);return mt==tc?e.disabled||!t?0:et||tt?Ct/y:fl(t)/O*Ct:Ct}).delay(function(e){var t=w.getY(e,W);Vt+=e.disabled||!t?0:et||tt?Ct/y:fl(t);var a=mt==tc?et||tt?Ct-Vt:(O-Vt)/O*Ct:0;return a||0}).ease(xt).attrTween("d",function(e,t){return n(e,p.length-1-t,"funnel",mt)}).on("end",function(){Nt++}),Vt=0,E.transition().duration(function(e){var t=w.getY(e,W);return mt==tc?e.disabled||!t?0:et||tt?Ct/y:fl(t)/O*Ct:Ct}).delay(function(e){var t=w.getY(e,W);Vt+=e.disabled||!t?0:et||tt?Ct/y:fl(t);var a=mt==tc?et||tt?Ct-Vt:(O-Vt)/O*Ct:0;return a||0}).ease(xt).attrTween("d",function(e,t){return n(e,p.length-1-t,"ellipse",mt)});var _t=setInterval(function(){Nt==p.length&&(mt!=ic&&(ct.gapHeight=M,S=t(p),T.transition().duration(bt?250:0).delay(50).ease(Nl).attr("d",function(e,t){return d(S[p.length-1-t])}),E.transition().duration(bt?250:0).delay(50).ease(Nl).attr("d",function(e,t){return u(S[p.length-1-t])})),l(),I.selectAll(Us+"#emptyFunnel").transition().duration(50).delay(310).style("stroke-opacity",0).remove(),clearInterval(_t))},10)}})}function t(e){var t=0,a=ct.height,r=0,n=0;return S=[],C=b,e.forEach(function(i,o){var l=e[e.length-1-o],s=w.getY(l,W),c=l.disabled;n=O?(c?0:et||tt?s?1/y:0:fl(s)/O)*(ct.height-(y-1)*ct.gapHeight):0,n=n||0,t+=c?0:s,n=r+n;var d=s/O;d=d||0;var u={};t!=O||0!=s&&!c?et?(u.bottomLeft=[_(d),ct.height-n],u.topLeft=[_(d),a],u.middleLeft=[_(d),ct.height-n],u.bottomRight=[N(d),ct.height-n],u.topRight=[N(d),a],u.middleRight=[N(d),ct.height-n]):(u.bottomLeft=[ct.height-n>=v?ct.width/2-b:_(n),ct.height-n],u.topLeft=[a>=v?ct.width/2-b:_(r),a],u.middleLeft=[a>=v?ct.width/2-b:u.bottomLeft[0],a>=v&&ct.height-n<=v?v:ct.height-n],u.bottomRight=[ct.height-n>=v?ct.width/2+b:N(n),ct.height-n],u.topRight=[a>=v?ct.width/2+b:N(r),a],u.middleRight=[a>=v?ct.width/2+b:u.bottomRight[0],a>=v&&ct.height-n<=v?v:ct.height-n]):(u.topLeft=u.bottomLeft=u.middleLeft=[_(et?J:ct.height),0],u.topRight=u.bottomRight=u.middleRight=[N(et?J:ct.height),0]),S.push(u),a=!s||c?ct.height-n:ct.height-n-ct.gapHeight,r=!s||c?n:n+ct.gapHeight}),S}function a(e){var t=[],a=ct.height,r=0,n=0;\nreturn e.forEach(function(i,o){var l=e[e.length-1-o],s=w.getY(l,W),c=l.disabled;n=(c?0:et||tt?s?1/y:0:fl(s)/O)*(ct.height-(y-1)*ct.gapHeight)/2,n=n||0;var d=n;n=r+n;var u=s/O;u=u||0;var h=et?_(u):ct.height-n>=v?ct.width/2-b:_(n),f=et?N(u):ct.height-n>=v?ct.width/2+b:N(n);t.push({rightx:f+Z,leftx:h-Z,y:fl(ct.height-n),y0:fl(ct.height-n+d)}),n+=d,a=!s||c?ct.height-n:ct.height-n-ct.gapHeight,r=!s||c?n:n+ct.gapHeight}),t}function r(e){var t;if(et)t=null;else{var a={name:"FunnelClipPath",id:g.id,d:e},r={chartObj:g};t=fd.get(xd,"polygon",a,r)}I.attr("clip-path",t?"url("+at+"#"+t+")":null)}function n(e,t,a,r){var n=i(r,t),o=S[t],l="funnel"==a?vs(d(n),d(o)):vs(u(n),u(o));return function(e){return l(e)}}function i(e,t){var a=wd(S[e==ac?0:t]);return e===ic?a.topLeft[0]=a.middleLeft[0]=a.bottomLeft[0]=a.topRight[0]=a.middleRight[0]=a.bottomRight[0]=ct.width/2:(a.middleLeft=a.bottomLeft=a.topLeft,a.middleRight=a.bottomRight=a.topRight),a}function o(e,t){E.each(function(a,r){var n=e[r].disabled||!w.getY(p[r],W),i=n?t:0;i?setTimeout(function(){l(r,n)},i):l(r,n)})}function l(e,t){var a=t?Al:null;H.selectAll("#ellipse"+e).style("display",a),B.selectAll("#funnel"+e).style("display",a)}function s(){var e=A-2*q,t=.05*e,a=c(e);return t=(t-p.length)/p.length,t=ul(ht,t),t=L?ct.canOverlap?t+R/2:a/2-gt:0}function c(e){var t=X.padding;if(ut(t))return it(t,e,m,g);var a=e*dt;return hl(R,ul(j,a/m))}function d(e){var t=(e.topRight[0]-e.topLeft[0])/2,a=(e.bottomRight[0]-e.bottomLeft[0])/2,r=ct.canOverlap?2*t/ct.width*z:D,n=ct.canOverlap?2*a/ct.width*z:D;return"M"+e.topLeft[0]+" "+e.topLeft[1]+" A"+t+" "+r+" 0 0 0 "+e.topRight[0]+" "+e.topRight[1]+" L"+e.middleRight[0]+" "+e.middleRight[1]+" L"+e.bottomRight[0]+" "+e.bottomRight[1]+" A"+a+" "+n+" 0 0 1 "+e.bottomLeft[0]+" "+e.bottomLeft[1]+" L"+e.middleLeft[0]+" "+e.middleLeft[1]+"Z"}function u(e){var t=(e.bottomRight[0]-e.bottomLeft[0])/2,a=ct.canOverlap?2*t/ct.width*z+gt:D;return"M"+e.bottomLeft[0]+" "+e.bottomLeft[1]+" A"+t+" "+a+" 0 0 1 "+e.bottomRight[0]+" "+e.bottomRight[1]+" A"+t+" "+(ct.canOverlap?a:a+gt)+" 0 0 1 "+e.bottomLeft[0]+" "+e.bottomLeft[1]}function h(){V=V||g.staticPaneSVG.selectAll("g.link_0"),F=F||g.staticPaneSVG.selectAll("g.label_0"),nt=!0}var f,g,p,y,v,m,x,b,C,w,k,O,S,A,P,T,E,L,z,D,M,j,R,I,H,B,F,V,N,_,W,Y,X,U,G,Z,Q,q,K,$,J,et,tt,at,rt,nt,ot,st=.3,ct={},dt=.375,ht=1,ft=!1,gt=0;return e.commonRendererProp=function(t){return arguments.length?(f=t,e):f},e.defaultMouseOverFunc=function(e,t,a){nt||h(),$?(T.style("opacity",function(e,t){return t===a?null:.4}),E.style("opacity",function(e,t){return t===a?null:.4})):(T.style("fill",function(e,t){return ot(t,e,t===a?.6:null)}),E.style("fill",function(e,t){return ot(t,e,t===a?1:.5)})),F.selectAll("text").style("text-shadow",null),V.selectAll(Us).style("stroke-width",null),F.selectAll("#lbl0_0_"+(p.length-1-a)).style("text-shadow","0 0 0 rgba(0,0,0,1)"),V.selectAll("#link0_0_"+(p.length-1-a)).style("stroke-width",1)},e.defaultMouseOutFunc=function(){nt||h(),$?(T.style("opacity",null),E.style("opacity",null)):(T.style("fill",function(e,t){return ot(t,e)}),E.style("fill",function(e,t){return ot(t,e,.5)})),F.selectAll("text").style("text-shadow",null),V.selectAll(Us).style("stroke-width",null)},e},qo.pyramid=function(){function e(a){a.each(function(a){function r(t,r){var n=un(d3.event);return{renderer:e,seriesPos:0,subseriesPos:0,itemPos:r,color:E[r%E.length],coordinates:[n.pageX,n.pageY],element:t,data:a[r]}}var n=d.params;z=n.chartObj,p=n.commonPlotOptions,E=n.color,v=n.notesArray,h=n.yaxiscolumnorder,u=n.dataset,y=z.systemConf;var i=n.labelQueue;x=z.defsLocation,f=z.plotarea.width,g=z.plotarea.height;var _=hl(f,g);H=p.datalabels.padding;var W=z.datalabels.moduleExists&&ui(p.datalabels,z);if(W){var Y=f*F,X=f-_;Y>X&&(H=V.datalabelPadding=5,_-=ul(Y-X,0))}V.width=_,V.height=4*_/5;var U=a[0].plotoptions,G=So.utils.getValueOfPlotOptions(U,p);m=y.legend.imagePallete||Br(z);var Z=G("strokeWidth"),Q=G("strokeOpacity"),q=G("threeDimension"),K=G("fillOpacity"),$=ha(p,U,z,Nc),J=$.enabled,et=$.easingType,tt=N?J?200:0:$.duration;c=$.type;var at=0==lt(Hr(U,p,z,"enabled"),!0),rt=at?null:Hr(U,p,z,"cursor")||"pointer",nt=Rl(this);D=Qt(nt,"g",[a],".","class","pyramidgroup"),D.attr("transform","translate("+(f/2-V.width/2)+","+(g/2-V.height/2)+")").style("cursor",rt),I=a=a[0].data[0],R=a.length,L=[],b=V.height,w=V.width,k=q?V.height/6:0;var it=25,ot=pl(gl(k/vl(it*kl/180),2)-gl(k,2));w-=ot,O=Yl().range([(w+ot)/2,0]).domain([0,b]),S=Yl().range([(w+ot)/2,w]).domain([0,b]),A=Yl().range([(w+ot)/2,w+ot]).domain([0,b]),P=Yl().range([(w+ot)/2,ot]).domain([0,b]),T=Yl().range([0,k]).domain([0,b-k/2]),M=[V.width,V.height],B=e.fillColorFunc=za(z,0,M);var st=Ma(z,0),ct=0;e.total=C=a.reduce(function(e,t){return e+(t.disabled?0:(ct++,fl(u.getY(t,h)||0)))},0);var dt=0;if(a.forEach(function(e){L.push({height:(dt+(e.disabled?0:fl(u.getY(e,h))))/C*(b-k/2)||0,previousHeight:dt/C*(b-k/2)||0}),dt+=e.disabled?0:fl(u.getY(e,h))}),j=Qt(D,"g",a),j.attr("id",function(e,t){return"section_"+(R-1-t)}).styles({stroke:function(e,t){return st(R-1-t,a[R-1-t],p.strokeColor)},"stroke-opacity":Q,"stroke-width":Z,"fill-opacity":K,fill:function(e,t){return B(R-1-t,a[R-1-t])}}).each(function(e,t){var a=Rl(this),r=Qt(a,Us,[e,e,e,e]);r.attr("class","section_"+(R-1-t))}),en(z,j,at),!at){var ut=function(){var e=this.parentNode,a=t(Rl(e).attr("id").replace(/section_/gi,"")),n=r(e,a);z.eventHandler.mouseMove(n)},ht=function(){var r=this.parentNode,n=t(Rl(r).attr("id").replace(/section_/gi,""));z.eventHandler.mouseOut(e,a[n],n)},ft=function(){var n=this.parentNode,i=t(Rl(n).attr("id").replace(/section_/gi,"")),o=r(n,i);z.eventHandler.click(e,a[i],0,i,o)},gt=function(e){var r=this.parentNode,n=t(Rl(r).attr("id").replace(/section_/gi,"")),i=So.annotation?vo(a[n],null):a[n],o=L[n].previousHeight,l=[O(o+T(o)/2)+(f/2-V.width/2),T(o)/2+o+(g/2-V.height/2)],s={coordinate:l,data:i,basedOn:"plot"};z.eventHandler.doubleclick(e,n,s)},pt={target:"plot",touchleave:!0,chartObj:z},yt={mousemove:ut,mouseout:ht,click:ft,dblclick:gt},vt={singletouchmove:ut,touchend:ht,tap:ft,dbltap:gt};cn(j.selectAll(Us),yt,vt,pt)}var mt=0;j.each(function(e,t){var a=D.selectAll("#section_"+t).selectAll(Us);if(N)a.transition().duration(tt).ease(Nl).attr("d",function(e,a){return o(t,a)});else{var r=u.getY(e,h),n=c==tc?(e.disabled||!r?0:fl(r))/C*tt:tt;mt+=e.disabled||!r?0:fl(r);var i=c==tc?(C-mt)/C*tt:0;a.transition().duration(n).delay(i).ease(et).attrTween("d",function(a,r){return l(e,t,r)})}}),e.renderedTimer=setTimeout(function(){if(So.labelRenderer){var t=[z.seriesdata,0,a,ct,0,C,V,s(a)];i.push({renderer:e,charttype:Vc,chartObj:z,args:t}),i.push({renderer:e,charttype:"funnelInnerLabels",chartObj:z,args:t})}So.annotation&&(v=So.annotation.preprocessAnnotations(z.seriesdata,0,function(e,t,a){var r=L[a].previousHeight;return[O(r+T(r)/2)+(f/2-V.width/2),T(r)/2+r+(g/2-V.height/2)]},v,z,n)),N=!0,e.chartRendered=!0},tt+10)})}function a(e,t){return"M"+O(e+T(e)/2)+" "+(T(e)/2+e)+" L"+S(e+T(e)/2)+" "+(T(e)/2+e)+" L"+S(t+T(t)/2)+" "+(T(t)/2+t)+" L"+O(t+T(t)/2)+" "+(T(t)/2+t)+" L"+O(e+T(e)/2)+" "+(T(e)/2+e)}function r(e,t){return"M"+S(e+T(e)/2)+" "+(T(e)/2+e)+" L"+A(e+T(e)/2)+" "+(-T(e)/2+e)+" L"+A(t+T(t)/2)+" "+(-T(t)/2+t)+" L"+S(t+T(t)/2)+" "+(T(t)/2+t)+" L"+S(e+T(e)/2)+" "+(T(e)/2+e)}function n(e,t){return"M"+A(e+T(e)/2)+" "+(-T(e)/2+e)+" L"+P(e+T(e)/2)+" "+(-T(e)/2+e)+" L"+P(t+T(t)/2)+" "+(-T(t)/2+t)+" L"+A(t+T(t)/2)+" "+(-T(t)/2+t)+" L"+A(e+T(e)/2)+" "+(-T(e)/2+e)}function i(e,t){return"M"+P(e+T(e)/2)+" "+(-T(e)/2+e)+" L"+O(e+T(e)/2)+" "+(T(e)/2+e)+" L"+O(t+T(t)/2)+" "+(T(t)/2+t)+" L"+P(t+T(t)/2)+" "+(-T(t)/2+t)+" L"+P(e+T(e)/2)+" "+(-T(e)/2+e)}function o(e,t,o){var l=L[e].height,s="down"==o?l:L[e].previousHeight;switch(t){case 0:return n(l,s);case 1:return i(l,s);case 2:return a(l,s);case 3:return r(l,s)}}function l(e,t,a){var r=vs(o(c==tc?t:R-1,a,"down"),o(t,a));return function(e){return r(e)}}function s(e){var t=[];return e.forEach(function(a,r){var n=e.length-1-r,i=L[n].height,o=L[n].previousHeight,l=(i+o)/2,s={x:A(i+T(i)/2),y:-T(i)/2+i},c={x:A(o+T(o)/2),y:-T(o)/2+o},d={x:O(i+T(i)/2),y:T(i)/2+i},u={x:O(o+T(o)/2),y:T(o)/2+o},h=(s.x+c.x)/2,f=(s.y+c.y)/2,g=(d.x+u.x)/2,p=(d.y+u.y)/2,y=(O(l+T(l)/2)+S(l+T(l)/2))/2;t.push({rightx:h+H,leftx:g-H,y:f,y0:i+T(i)/2,midX:y,leftY:p})}),t}var c,d,u,h,f,g,p,y,v,m,x,b,C,w,k,O,S,A,P,T,E,L,z,D,M,j,R,I,H,B,F=.3,V={},N=!1;return e.commonRendererProp=function(t){return arguments.length?(d=t,e):d},e.defaultMouseOverFunc=function(e,t,a){m?j.style("opacity",function(e,t){return R-1-t==a?null:.2}):j.style("fill",function(e,t){return B(R-1-t,I[R-1-t],R-1-t==a?.5:null)})},e.defaultMouseOutFunc=function(){m?j.style("opacity",null):j.style("fill",function(e,t){return B(R-1-t,I[R-1-t])})},e},qo.sunburst=function(){function e(a){return a.each(function(o){function c(t){var a=un(d3.event);return{renderer:e,seriesPos:i(t),coordinates:[a.pageX,a.pageY],element:this,data:t.data,level:l(t)}}var R=u.params;O=R.chartObj,E=R.commonPlotOptions,k=R.color,S=R.notesArray,b=R.yaxiscolumnorder,y=R.dataset,m=O.systemConf;var _=R.labelQueue;C=O.plotarea.width,w=O.plotarea.height;var W,Y=So.utils.getValueOfPlotOptions,X=E.datalabels,U=+E.outerPadding||0,G="absolute"===E.showAsNegative;j=null,H=0,F=[];var Z=O.datalabels.moduleExists&&ui(X,O),Q=Z&&ai(X,O)?ri(X,O)+ni(X,O):0,q=0==lt(Hr(null,E,O,"enabled"),!0),K=q?null:E.events?E.events.cursor||Tl:m.chart.plot.events.cursor||Tl;I=E.events&&E.events.highlightHierarchy;var $=ha(E,null,O,Yc),J=$.enabled,et=$.type,tt=$.easingType,at=V?J?200:0:$.duration;p=hl(C,w)/2-U-2*Q;var rt=hl(ul(0,ka(E.innerRadius,p)),ka("95%",p)),nt=e.fillColorFunc=za(O,0,[p,p]),it=Ma(O,0);L=function(e){return ul(0,hl(2*kl,h(e.x0)))},z=function(e){return ul(0,hl(2*kl,h(e.x1)))},D=function(e){return f(e.y0)+W/2},M=function(e,t){return t=t||0,function(e){return f(e.y1)+t-W/2}},B=function(e){if(s(e))return 0;var t=y.getY(e,b)||0;return 0>t?G?fl(t):0:t},g=us().startAngle(L).endAngle(z).innerRadius(D).outerRadius(M(f)),v=us().startAngle(L).endAngle(z).innerRadius(D).outerRadius(M(f)),T=Qt(a,"g",[o],".","class","hierarchychart"),T.attr("transform","translate("+C/2+","+w/2+")").style("cursor",K),x=[],T.selectAll(Us).each(function(e){x.push({x0:e.x0,x1:e.x1})});var ot=d(o);e.total=ot[0].value,P=Qt(T,Us,ot);var st=[],ct=[],dt=[];if(o.forEach(function(e,t){ct[t]=[[]],ct[t].disabled=e.disabled,ct[t].plotoptions=e.plotoptions,dt[t]=[],dt[t].disabled=e.disabled,dt[t].plotoptions=e.plotoptions;var a=k[t%k.length];st[t]=Yl().domain([0,A(e)]).range([a,La(a,1.5,"brighter")])}),P.attr("class",function(e){return null!=l(e)?"series_"+i(e):null}).attr("id",function(e){return"arcPath_"+l(e)}).each(function(e,t){e.index=t;var a=i(e),r=l(e);if(H=ul(H,e.depth),e.depth){if(e.data.color)e.data.arcColor=e.data.color;else{var n=o[a].plotoptions,s=null!=n?Y(n,E)("childrenColors"):E.childrenColors;if(null!=s)e.data.arcColor=s[N[r]%s.length];else{var c=st[a](N[r]);e.data.arcColor=c}}e.children||ct[a][0].push(e),dt[a].push(e),F[r]=e}else e.data.arcColor=Pl}),h=Yl().range([0,2*kl]),f=Yl().range([rt,p]).domain([ot[0].y1,1]),W=hl(ul(0,ka(E.padding,p,0)),.9*(p-rt)/H),P.transition().duration(at).ease(V?Nl:tt).attrTween("d",V||et===gc?t:et===pc?n:r),P.styles({fill:function(e){return e.fillColor=nt(i(e),e.data)},stroke:function(e){return e.depth?E.strokeColor?E.strokeColor:it(i(e),e.data):"white"},"stroke-opacity":function(e){return e.depth?Y(o[i(e)].plotoptions,E)("strokeOpacity"):1},"fill-opacity":function(e){return e.depth?Y(o[i(e)].plotoptions,E)("fillOpacity"):0},"stroke-width":function(e){return e.depth?Y(o[i(e)].plotoptions,E)("strokeWidth"):0}}),en(O,P,q),!q){var ut=function(e,t){var a=c(e,t);O.eventHandler.mouseMove(a)},ht=function(t){O.eventHandler.mouseOut(e,t,i(t))},ft=function(t,a){var r=c(t,a);O.eventHandler.click(e,t,i(t),t.itemPos,r)},gt=function(t){if(e.chartRendered){var a=null==t.children?null!=So.annotation?vo(t,o.length>1?t.parent.data.seriesname:null):t:[t.data.seriesname,t.value],r=v.centroid(t);r=[r[0]+C/2,r[1]+w/2];var n={coordinate:r,data:a,basedOn:"plot"};O.eventHandler.doubleclick(t,i(t),n)}},pt={target:"plot",touchleave:!0,chartObj:O},yt={mousemove:ut,mouseout:ht,click:ft,dblclick:gt},vt={singletouchmove:ut,touchend:ht,tap:ft,dbltap:gt};cn(P.filter(function(e){return 0!=e.depth}),yt,vt,pt)}e.renderedTimer=setTimeout(function(){if(null!=So.labelRenderer){var t=us().startAngle(L).endAngle(z).innerRadius(M(f)).outerRadius(M(f)),a=E.datalabels.padding+Q,r=us().startAngle(L).endAngle(z).innerRadius(M(f,a)).outerRadius(M(f,a));o.forEach(function(a,n){var i=function(a,i){return[ct,n,a,p,function(t,a){if(a===id)return e.total;var r=e.getProcessedNode(t);return r.parent.value},r,t,v,[C/2,w/2],i]};_.push({renderer:e,chartObj:O,charttype:Bc,args:i(dt[n])}),_.push({renderer:e,chartObj:O,charttype:"pieInnerLabels",args:i(ct[n][0])}),_.push({renderer:e,chartObj:O,charttype:"pieInnerLabels",args:i(dt[n].filter(function(e){return e.children}),!0)})})}null!=So.annotation&&o.forEach(function(t,a){S=So.annotation.preprocessAnnotations(o,a,function(t){var a=e.getProcessedNode(t),r=v.centroid(a);return[r[0]+C/2,r[1]+w/2]},S,O,R)}),V=!0,e.chartRendered=!0},at+1e3/60)}),e}function t(e,t){var a=vs(V&&x[t]?L(x[t]):0,L(e)),r=vs(V&&x[t]?z(x[t]):0,z(e));return function(t){return g.startAngle(a(t)).endAngle(r(t)),g(e)}}function r(e){var t=vs(0,D(e)),a=vs(0,M(f)(e));return function(r){return g.innerRadius(t(r)).outerRadius(a(r)),g(e)}}function n(e){var t=vs(L(e),z(e));return function(a){return g.endAngle(t(a)),g(e)}}function i(e){var t=l(e);return t?+t.split("_")[0]:void 0}function o(e){var t=[],a=Us+"#arcPath";if(I){var r=e.split("_");r.forEach(function(e){a=a+"_"+e,t.push(a)})}else t.push(a+"_"+e);return t}function l(e){return e.level||e.data&&e.data.level}function s(e){var t=i(e);return ut(t)&&O.seriesdata[t].disabled}function c(e){var t=l(e),r=t&&t.split("_").length;return N[t]=1===r?_=0:_,!O.dataObject.hasHierarchyData&&1==r&&e.length<2&&e[0]&&a(e[0][0])?e[0]:a(e[0])?e:(_++,null)}function d(e){partition=gs();var t=d3.hierarchy(e,c).sum(B).sort(is);return partition(t),t.descendants()}var u,h,f,g,p,y,v,m,x,b,C,w,k,O,S,P,T,E,L,z,D,M,j,R,I,H,B,F,V=!1,N={};e.commonRendererProp=function(t){return arguments.length?(u=t,e):u},e.defaultMouseOverFunc=function(e,t){j||(j=O.staticPaneSVG.selectAll("g#zchierarchyhighlight").attr("transform","translate("+(O.plotarea.left+C/2)+","+(O.plotarea.top+w/2)+")"),R=Qt(j,Us,xs(I?H:1)));var a=O.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),r=o(l(e));if(a!==Al){j.style("opacity",null);var n=T.selectAll(r.join()).nodes();R.each(function(e,r){var i=Rl(this);if(n[r]){var o=Rl(n[r]),l=Ra(O,t,o.datum(),t);i.attr("d",o.attr("d")).styles(O.legendHighlight.getEffect(a,Yc,rl.test(a)?l:Pl,{fill:Pl,stroke:l},t,"plot"))}else i.attr("d",null)})}},e.defaultMouseOutFunc=function(){j||(j=O.staticPaneSVG.selectAll("g#zchierarchyhighlight")),j.style("opacity",0)},e.getProcessedNode=function(e){return F[l(e)]};var _;return e};var mu=function(){};mu.getValueWithinRange=function(e,t){return hl(ul(e,t[0]),t[1])},mu.getNeedlePolygon=function(e,t,a){var r=Od(e.width/2,7),n=-ka(e.innerRadius,t.radius,0),i=-ka(e.radius,t.radius,a)+e.padding,o=-3*r;switch(i=hl(i,o),e.type){case"clock":return"M"+r+" "+n+" A"+r+" "+r+" 0 0 1 "+-r+" "+n+" A"+r+" "+r+" 0 0 1 "+r+" "+n+" M0 "+(n-r)+" L0 "+i+" M"+-r+" "+(r+i)+" L0 "+i+" L"+r+" "+(r+i)+" L0 "+i;case"sharp":return"M"+r+" "+n+" L0 "+(n+r)+" L"+-r+" "+n+" L0 "+i+" L"+r+" "+n;default:return"M"+r+" "+n+" A"+r+" "+r+" 0 0 1 "+-r+" "+n+" L0 "+i+" L"+r+" "+n}},mu.createLevelsNColors=function(e,t,a,r){var n=[],i=[];if(dt=e[0].data[0],origValues=dt[0][t.dataindex]||t.values||[],clr=t.color,origValues instanceof Array||(origValues=[origValues]),void 0===clr&&origValues.length<=1&&(clr=["#d1d1d1"]),origValues.length>0){var o=origValues.slice(0);if(!clr)var l=a[0],s=[0,o.length-1],c=[t.colorGamma[0],t.colorGamma[1]],d=Q(l,s,c);o.sort(is);var u=r[0];o.forEach(function(e,t){var a=origValues.indexOf(e),l=mu.getValueWithinRange(e,r),s=mu.getValueWithinRange(ut(o[t+1])?o[t+1]:0,r);n[t]=0>l?[l,s]:[u,l],i[t]=clr?clr[a]:d(t),u=0>l?s:l})}else dt.forEach(function(e,t){n[t]=r,i[t]=(clr instanceof Array?clr[t]:clr)||"#d1d1d1"});return{values:n,colors:i}},mu.targetMarker=function(e,t,a,r,n){function i(e){var t=e[p.dataindex];if(ut(t)){t=mu.getValueWithinRange(t,f);var a=h(t),r=ba(O,a),n=Aa(a)+x;return"translate("+r[0]+","+r[1]+") rotate("+n+",0,0)"}}function o(e){var t=e[p.dataindex];return ut(t)?null:Al}function l(e){var n=p.events&&p.events.triggerOffset||0;w.strokeWidth=(C+2*n)/10,e.attrs({transform:i,"class":function(e,t){return"ZCtargetmarker_eventhandler_"+t}}).styles({display:o,opacity:0}).each(function(){var e=Rl(this);if(W(e,null,p,w,r),"line"===p.symbol){var i=C>=t-a?C:ul(C+n,t-a),o=n||1;e.selectAll("*").attr("d",_("rect")(i,o))}})}var s=r.systemConf,c=s.chart.plot.plotoptions.dial,d=r.dataset,u=0,h=r.axes.y.groups[0].scale,f=h.domain(),g=r.seriesdata,p=c.targetMarker,y=p.align,v=p.dAlign,m=+(p.padding||0),x=/line/.test(p.symbol)?90:0,b=!/(outer|inner)/g.test(y)&&/line/.test(p.symbol)?(t-a-2*m)/10:1,C=10*lt(p.size,b),w={symbolSize:{outer:1,inner:.5},color:r.seriesColor[0],strokeWidth:b},k=v===Ac?C/2+m:v===Sc?-(C/2)-m:0,O=y===Ac?t+k:y===Sc?a+k:(t+a)/2,S=Qt(e,"g",p.enabled?[g[0].data[0][0]]:[],".","class","targetmarker"),A=Qt(e,"g",p.enabled&&n?[g[0].data[0][0]]:[],".","class","targetmarker-eventhandler");S.attr("transform",i).styles({display:o,"stroke-dasharray":P(p.dashStyle,lt(p.outerStrokeWidth,1)),"stroke-linecap":T(p.lineCap,p.dashStyle)}).each(function(){var e=Rl(this);W(e,null,p,w,r)}),l(A),mu.handleEvents(r,A,p,"targetmarker",g);var E=p.label||{},L=lt(E.padding,2),z=y===Ac?O+C/2+L:y===Sc?(v===Ac?a:O-C/2)-L:t+L,D=Qt(e,"text",p.enabled&&Od(E.enabled,!0)&&!r.renderer[0].firedList.targetSeries?[g[0].data[0][0]]:[]);ta(D,[E,s.chart,s.canvas,dd]),D.each(function(e){var t=Rl(this);t.style("display",Al);var a=e[p.dataindex];if(ut(a)){if(a=mu.getValueWithinRange(a,f),JSON.parse(c.minmaxlabels.show)&&-1!=f.indexOf(a))return;var n=h(a),i=Ca(n),o=ba(z,n),l=r.userdata.metadata.columns,s=l.filter(function(e){return e.dataindex===p.dataindex}),g=s.length?s[0]:l[d.getColumnIdx("y",0)],v=g.datatype,m=g[v],x=y===Sc?0>i||i>kl?null:"end":0>i||i>kl?"end":null,b=y===Sc?i>kl/2&&3*kl/2>i?null:-Oa(i)+"em":i>kl/2&&3*kl/2>i?Oa(i)+"em":null,C=ut(E.text)?d.getCustomizedVal(r,E.text,u,null,null,e,"targetLabel"):gn(m,a,v,r,"targetLabel");t.text(C).style("display",null).attrs({"text-anchor":x,dy:b,transform:"translate("+o[0]+","+o[1]+")"})}})},mu.handleEvents=function(e,t,a,r,n){function i(){var t=Qr(e.svg.node(),d3.event),a={x:t[0],y:t[1]},r={left:a.x,top:a.y},n=un(d3.event),i=a.x-n.clientX,o=a.y-n.clientY;return r.left-=i,r.top-=o,r.dLeft=i,r.dTop=o,r}function o(t,a,r,n){return it(v[a],r,l(n),e)}function l(t){var r=h?t[1]:t[a.dataindex];return{value:r,formattedValue:gn(c,r,d,e),actualData:u,data:s=s||e.dataset.getMetaInfoObj(e,u,0)}}var s,c,d,u=n[0].data[0][0],h="levelmarker"===r,f=e.renderer[0].levelMarker,g=f&&f.values.length,p=e.systemConf.chart.plot.plotoptions.dial,y=e.systemConf.tooltip.enabled,v=a.events||{},m=lt(v.enabled,p.events.enabled),x=m?v.cursor||Tl:null;if(t.style("cursor",x),m){var b=e.dataset,C=e.userdata.metadata.columns,w=n[0].data[0].length,k=C.filter(function(e){return e.dataindex===a.dataindex}),O=k.length?k[0]:C[b.getColumnIdx("y",0)],S=function(t){var r=(h?t[1]:t[a.dataindex],l(t)),n=tn(d3.event,{x:0,y:0},0,0,e,{seriesPos:0,subseriesindex:0,itemPos:0});if(y){var o=it(v.tooltipContent,r,e)||(h?"Range: ":"Target: ")+r.formattedValue,s=e.eventHandler.tooltipElement;s.show(e,i(),o,!1,n.helpers)}},A=function(){if(y){var t=e.eventHandler.tooltipElement;t.hide(t.element)}};d=O.datatype,c=O[d];var P=function(t,a){Xd=El;var r=e.eventHandler.tooltipElement;r&&r.timeout&&clearTimeout(r.timeout),e.stopPropogate!==!1&&d3.event.stopPropagation();var n=e.zcEventType||"mousemove";o(u,n,d3.event,t),S(t,a)},T=function(t){var a=e.zcEventType||"mouseout";o(u,a,d3.event,t),A()},E=function(t,a){var n=d3.event&&d3.event.touches,i=e.zcEventType||"click",l=w+a+1+("targetmarker"===r?g:0);if(o(u,i,d3.event,t),n&&"taphold"!==i){Qd(e),Yd=(new Date).getTime(),Gd=this,Ud=[e.renderer[0],t,0,l],Xd=e;var s=e.eventHandler.tapOldInfo;s&&s.itemPos==l?(A(),e.eventHandler.tapOldInfo=null):(S(t,a),e.eventHandler.tapOldInfo={seriesPos:0,subseriesindex:0,itemPos:l,type:r})}},L=function(t){var a=e.zcEventType||"doubleclick";o(u,a,d3.event,t)},z={target:"plot",touchleave:!0,chartObj:e},D={mousemove:P,mouseout:T,click:E,dblclick:L},M={singletouchmove:P,touchend:T,tap:E,dbltap:L};cn(t,D,M,z)}},qo.dial=function(){function e(S){return S.each(function(S){var A=r.params;n=A.chartObj,l=A.commonPlotOptions,o=A.color,s=A.dataset,c=A.yaxiscolumnorder,h=n.systemConf;var P=S[0].plotoptions;d=s.getY(S[0].data[0][0],c),v=y,y=0>d;var T=n.defsLocation,E=A.labelQueue;f=n.axes.y.groups[0].scale,p=f.domain(),u=n.plotarea_approx,l=P?Cd(l,P,!0):l;var L=ha(l,P,n,Fc),D=L.enabled,M=L.easingType,j=k?D?200:0:L.duration,R=Rl(this).data(t(S));g=R.selectAll(Us+".dial").data();var I=l.levelMarker;C=l.innerRadius+" _ "+l.outerPadding+" _ "+l.maxRadius+" _ "+l.bandWidth+" _ "+I.bandWidth+" _ "+I.innerPadding+" _ "+I.outerPadding;var H,B=u.radius,F=lt(I.strokeWidth,1),V=!0,N=Pa(l,B);if(w=us().endAngle(function(e){return f(e[1])}),V){var _,W;if(ut(I.bandWidth)||ut(I.maxBandWidth)){var Y=lt(I.maxBandWidth,B),X=Math.min(ka(I.bandWidth,B,B-N),Y);_=(B-N-X)/2,W=(B-N-X)/2,H=0===X?"hidden":null}else _=ul(0,ka(I.innerPadding,B,0)),W=ul(0,ka(I.outerPadding,B,0));w.innerRadius(N+_).outerRadius(B-W-.5*F).startAngle(function(e){return f(e[0])})}else{var U=ka(I.interPadding,B,10),G=S[0].data[0].length,Z=(B-N-(G-1)*U)/G;w.innerRadius(function(e,t){return t*(Z+U)+N}).outerRadius(function(e,t){return(t+1)*Z+t*U+N}).startAngle(l.startAngle)}var Q=e.levelMarker=mu.createLevelsNColors(S,I,o,p);levelmarkerClr=Q.colors;var q=Qt(R,"g",[1],".","class","levelmarkerSeries"),K=Qt(q,Us,I.enabled?Q.values:[]);K.attr("class",function(e,t){return"ZClevelmarker_"+t}).attr("transform","translate("+u.x+","+u.y+")").styles({stroke:function(e,t){return I.strokeColor||levelmarkerClr[t]},"stroke-width":F,"stroke-opacity":I.strokeOpacity,"fill-opacity":I.fillOpacity,fill:function(e,t){var a=levelmarkerClr[t],r=z(l.gradients,[B,B],a),i=r?fd.get(yd,"svgGradientFill",r,{offset:"pie",chartObj:n}):null;return i?"url("+T+"#"+i+")":a},visibility:H}),k&&C!=m?K.transition().duration(j).ease(Nl).call(function(e){Ri(e,w,[b,w.innerRadius()()],[x,w.outerRadius()()])}):K.attr("d",w),mu.handleEvents(n,K,I,"levelmarker",S),r.commonPlotOptions(l),O.commonRendererProp(r),O.chartRendered=!1,R.call(O),i=O.innerRadius();var $=Qt(R,"g",[1],".","class","targetSeries");mu.targetMarker($,u.actualRadius,u.innerRadius,n,!0),$.attr("transform","translate("+u.x+","+u.y+")");var J=l.needle,et=Qt(R,Us,J.show?[d]:[],".","class","dial");et.attr("d",mu.getNeedlePolygon(J,u,i)).styles({stroke:J.strokeColor||"black","stroke-width":J.strokeWidth,fill:J.fillColor||Al}).transition().duration(j).ease(M).call(a),So.labelRenderer&&E.push({renderer:e,charttype:Fc,chartObj:n,args:[S,0]})}),e}function t(e){var t=e[0].data[0];return e[0].data[0]=[t[0]],[e]}function a(e){var t,a,r,n,i=u.x,o=u.y,s=void 0!==l.baseValue?l.baseValue:0;e.attrTween("transform",function(e){k?n=$t(this).rotate:(a=y?p[1]:p[0],null!=s&&(a=y?hl(s,a):ul(s,a)),n=Aa(f(a))),t=hl(ul(e,p[0]),p[1]),r=Aa(f(t));var l=vs(n,r);return function(e){return"translate("+i+","+o+") rotate("+l(e)+",0,0)"}})}var r,n,i,o,l,s,c,d,u,h,f,g,p,y,v,m,x,b,C,w,k=!1,O=qo.pie();return e.commonRendererProp=function(t){return arguments.length?(r=t,e):r},e.endFunctions=function(){m=C,x=w.outerRadius()(),b=w.innerRadius()(),e.chartRendered=!0,k=!0},e.defaultMouseOutFunc=function(){if(n.systemConf.tooltip.enabled){var e=n.eventHandler.tooltipElement;e.hide(e.element)}},e},qo.packedbubble=function(){function e(t){return t.each(function(a){function r(t){var a=un(d3.event);return{renderer:e,seriesPos:n(t),subseriesPos:0,itemPos:i(t),coordinates:[a.pageX,a.pageY],element:this,data:t}}var y=c.params;h=y.chartObj;var v=y.color,O=y.notesArray,S=y.yaxiscolumnorder,A=y.dataset,P=h.systemConf,T=y.labelQueue;f=y.commonPlotOptions;var E=e.fillColorFunc=za(h,0),L=Ma(h,0),z=a.filter(function(e,t){return e.seriesIndex=t,k[t]=[],!e.disabled}),D=h.plotarea.width,M=h.plotarea.height,j=1===z.length,R=Br(h)||h.patternPallete,I=h.systemConf.notes,H=I&&I.enabled===!0&&I.plotValues;g=f.mode,m=Va(f,h);var B="absolute"===f.showAsNegative,F=+f.interPadding||0,V=+f.outerPadding||0,N=hl(D,M)-V;p=[h.plotarea.left+(D-N)/2,h.plotarea.top+(M-N)/2],x=function(e){if(!b&&l(e))return 0;var t=A.getY(e,S)||0;return 0>t?B?fl(t):0:t};var _=0==lt(Hr(null,f,h,"enabled"),!0),W=f.events?f.events.cursor||"pointer":P.chart.plot.events.cursor||"pointer",Y=ha(f,null,h,Xc),X=Y.enabled,U=Y.type,G=Y.easingType,Z=w?X?200:0:Y.duration,Q=function(){var e=Rl(this).attr("transform");return null!=e?e:"translate("+N/2+","+N/2+")"},q=function(e){return"translate("+e.x+","+e.y+")"},K=function(){var e=Rl(this).attr("r");return null!=e?e:0},$=function(e){return e.r},J=function(){return f.fillOpacity},et=function(){return f.strokeOpacity},tt=!w&&(U===Ks||U===Zs);C.size([N,N]).padding(F),d=Qt(t,"g",[1],".","class","hierarchychart"),d.attr("transform","translate("+(D-N)/2+","+(M-N)/2+")").style("cursor",W),u=Qt(d,Gs,s(a,!0)),u.attrs({"class":function(e){return"series_"+n(e)}}).style("visibility",function(e){return l(e)?"hidden":null}),u=u.filter(function(e){return!l(e)});var at=s(z);e.total=at[0].value,u=u.data(at),u.attrs({transform:tt?q:Q,r:tt?$:K}).styles({fill:function(e,t){e.index=t,e.r=e.r||0,e.x=e.x||0,e.y=e.y||0,e.data.parent=e.parent,H&&(e.data.x=e.x,e.data.y=e.y),!e.children&&e.parent&&k[n(e)].push(e),e.arcColor=e.depth?"flat"!==g&&1===e.depth&&m?"grey":v[(m?i(e):n(e))%v.length]:"flat"==g||m||j?Al:"grey";var a=o(e);return e.fillColor=!e.depth&&R?Al:E(m?i(e):n(e),e.data,null,a)},"fill-opacity":tt?0:J,"stroke-opacity":tt?0:et,stroke:function(e){return e.arcColor===Al?Al:f.strokeColor?f.strokeColor:e.children?e.arcColor:L(m?i(e):n(e),e.data)},"stroke-width":function(){return f.strokeWidth}});var rt=u.size(),nt=w||U!==Ks?Z:Z/rt,it=U===Ks?nt:0;if(u.transition().delay(function(e,t){return w?0:t*it}).duration(nt).ease(w?Nl:G).attrs({transform:q,r:$}).styles({"fill-opacity":J,"stroke-opacity":et}),en(h,u,_),!_){var ot=function(e,t){var a=r(e,t);h.eventHandler.mouseMove(a)},st=function(t){h.eventHandler.mouseOut(e,t,n(t))},ct=function(t,a){var o=r(t,a);h.eventHandler.click(e,t,n(t),i(t),o)},dt=function(t){if(e.chartRendered){var r=So.annotation?vo(t.data,a.length>1?a[n(t)].seriesname:null):t.data,i=[t.x,t.y];i=[i[0]+(D-N)/2,i[1]+(M-N)/2];var o={coordinate:i,data:r,basedOn:"plot"};h.eventHandler.doubleclick(t,n(t),o)}},ut={target:"plot",touchleave:!0,chartObj:h},ht={mousemove:ot,mouseout:st,click:ct,dblclick:dt},ft={singletouchmove:ot,touchend:st,tap:ct,dbltap:dt};cn(u.filter(function(e){return!e.children}),ht,ft,ut)}e.renderedTimer=setTimeout(function(){if(So.annotation&&a.forEach(function(e,t){O=So.annotation.preprocessAnnotations(a,t,function(e){var t=[e.x,e.y];return[t[0]+(D-N)/2,t[1]+(M-N)/2]},O,h,y)}),So.labelRenderer){var t=[(D-N)/2,(M-N)/2],r=function(t,a){return a===id?e.total:t.parent.value};a.forEach(function(n,i){T.push({renderer:e,charttype:"hierarchy",chartObj:h,args:[a[i],i,null,null,r,k[i],t]})})}w=!0,e.chartRendered=!0},Z+17)}),e}function t(e){function t(e,i){var o=r(e);o?o.forEach(function(e,r){var n=ut(i)?i+"_"+r:e.seriesIndex+"";a(e,n),t(e,n)}):(a(e,i),"flat"==g&&n.push(e))}function a(e,t){var a=t.split(/_/);e.seriesPos=+a[0],e.itemPos=+a[a.length-1]}var n=[];return t(e),"flat"==g?n:e}function r(e){var t=e.level&&e.level.split("_").length;return!h.dataObject.hasHierarchyData&&1==t&&e.length<2&&e[0]&&a(e[0][0])?e[0]:a(e[0])?a(e[0][0])?e:e.filter(function(e){return a(e[0])||x(e)>0}):null}function n(e){var t=e.level||e.data&&e.data.level;return t?+t.split("_")[0]:void 0}function i(e){return e.data.itemPos}function o(e){return e.children?e.arcColor:null}function l(e){var t=n(e);return ut(t)&&h.seriesdata[t].disabled}function s(e,a){b=a;var n=f.order||is;"string"==typeof n&&(n=kd(window,n));var i=d3.hierarchy(t(e),r).sum(x).sort(n);return C(i),i.descendants()}var c,d,u,h,f,g,p,y,v,m,x,b,C=hs(),w=!1,k=[];return e.commonRendererProp=function(t){return arguments.length?(c=t,e):c},e.defaultMouseOverFunc=function(e,t,a){y||(y=h.staticPaneSVG.selectAll("g#zchierarchyhighlight"),v=Qt(y,Us,[1]));var r=Rl(u.nodes()[e.index]),n=$t(r).translate,i=h.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),o=Ra(h,m?a:t,e.data,t);y.style("opacity",null),v.attrs({transform:"translate("+(p[0]+n[0])+","+(p[1]+n[1])+")",d:_("circle")(2*+r.attr("r"))}).styles(h.legendHighlight.getEffect(i,Xc,rl.test(i)?o:Pl,{fill:Pl,stroke:o},m?a:t,"plot"))},e.defaultMouseOutFunc=function(){y||(y=h.staticPaneSVG.selectAll("g#zchierarchyhighlight")),y.style("opacity",0)},e};var xu={};xu.filterBySum=function(e,t){var a=function(e,a){return e+(a.disabled?0:fl(a[t]||0))};return e.filter(function(e){return e.reduce(a,0)>0})},xu.getKey=function(e,t,a,r){if(!r){var n=a.dataset,i=So.DataProcessor.helpers.getParsedYAxisOrder(a.seriesdata[t].yaxiscolumnorder);r=[n.getX(e),n.getY(e,i)]}return"x("+r[0]+") y("+r[1]+")"},qo.bubblepie=function(){function e(t){return t.each(function(t){var n=a.params,i=n.chartObj,o=n.datasetIndex,l=n.commonPlotOptions,s=n.axisrotated,c=n.stacked,d=n.xscale,u=n.yscale,h=n.yaxiscolumnorder,f=n.labelQueue,g=Rl(this),p=t[o],y=p.plotoptions;if(Ko.saveSeriesdataInRenderer(i,o),o!==i.bubblePieRendererIndex)return void(e.chartRendered=!0);var v=ha(l,y,i,Hc),m=v.duration,x=i.dataObject.bubblepieData,b=i.subrenderer,C=lt(l.dataindex,3),w=Qt(g,"g",x?[1]:[],".","class","scatterseries");x&&x.forEach(function(e,t){b[t]=b[t]||{};var r=function(e){e.reference;return xu.getKey(El,El,El,[e.x,e.y])},n=Qt(w,"g",[1],".","class","subseries_"+t),o=Qt(n,"g",xu.filterBySum(e,C),".","class","scatter",El,r);o.each(function(e){var r=e.reference,n=xu.getKey(El,El,El,[e.x,e.y]),o=i.dataObject.getXYvalue(s,c,d,u,h,r,"x")||0,l=i.dataObject.getXYvalue(s,c,d,u,h,r,"y")||0,f=i.dataObject.getXYvalue(s,c,d,u,h,r,"z",i.zscale);b[t][n]=(b[t][n]||qo.pie()).commonRendererProp(a).plotarea({width:f,height:f,left:o-f/2,top:l-f/2}),b[t][n].chartRendered=!1,Rl(this).attr("transform","translate("+(o-f/2)+","+(l-f/2)+")").call(b[t][n])})}),e.renderedTimer=setTimeout(function(){r=!0,e.chartRendered=!0;var t=i.seriesdata;t.forEach(function(e,a){if(i.chartTypes[a].value===So.charttype.bubblepie){var r=i.renderer[a];f.push({renderer:r,charttype:Rc,chartObj:i,args:[e,a]}),f.push({renderer:r,charttype:"pieInnerLabels",chartObj:i,args:[t,a,x]})}})},m)}),e}var t,a,r=!1;return e.commonRendererProp=function(t){return arguments.length?(a=t,e):a},e.shiftInfo=function(a){return arguments.length?(t=a,e):t},e},qo.heatmap=function(){function e(r){return r.each(function(r){var n=t.params,i=n.chartObj,o=n.xscale,l=n.yscale,s=n.datasetIndex,c=n.commonPlotOptions,d=n.labelQueue,u=n.yaxiscolumnorder,h=r[s],f=h.data,g=ha(c,null,i,Wc),p=g.enabled,y=g.type,v=g.easingType,m=a?p?200:0:g.duration,x=y===Js||y===qs,b=a?0:x?function(){return wl()*(3*m/5)}:0,C=a?m:x?2*m/5:m,w=e.fillColorFunc=za(i,s),k=Ma(i,s),O=i.dataObject.getTransRectValue("radius",null,null,null,null,c.borderRadius),S=c.symbol&&_(c.symbol),A=o.domain(),P=l.domain(),T=Pd.isQuantileColorScale(i),E=Rl(this),L=Qt(E,"g",[1],".","class","heatmapseries_"+s);e.seriesdataAfterUpdate=[],f.forEach(function(t,r){var n=e.seriesdataAfterUpdate[r]=i.dataObject.updateSeriesdatabyCategories(et(t),A,P,u),d=Qt(L,"g",!T&&h.disabled?[]:[1],".","class","subseries_"+r),f=Qt(d,Us,n);f.styles({fill:function(e){var t=Kr(i,e,o,l,u);return w(s,e,null,null,null,[t.width,t.height])},"fill-opacity":c.fillOpacity,stroke:function(e){return k(s,e,c.strokeColor)},"stroke-width":c.strokeWidth,"stroke-opacity":c.strokeOpacity}).attr("transform",function(e){var t=Kr(i,e,o,l,u);\nreturn"translate("+(t.x+t.width/2)+","+(t.y+t.height/2)+")"}).attr("d",function(e){var t=Kr(i,e,o,l,u);return S?S(hl(t.width,t.height)):Jt(-t.width/2,-t.height/2,t.width,t.height,O)}),a||(va(f),f.attr("opacity",0).transition().delay(b).duration(C).ease(v).on("start",function(){Rl(this).attr("opacity",null)}).call(x?pa:function(){}).call(y===$s||y===Js?ya:y===Ks||y===qs?pa:ga))}),So.labelRenderer&&d.push({renderer:e,charttype:"hierarchy",chartObj:i,args:[h,s,null,null,null,Jl(e.seriesdataAfterUpdate)]}),e.renderedTimer=setTimeout(function(){a=!0,e.chartRendered=!0},m+17)}),e}var t,a=!1;return e.commonRendererProp=function(a){return arguments.length?(t=a,e):t},e};var bu={};bu.getTileBound=function(e,t){var a=e.axes.x.scale,r=e.axes.y.groups[0].scale,n=t.x0||0,i=t.x1||0,o=t.y0||0,l=t.y1||0;return{x:a(n),y:r(o),width:a(i)-a(n),height:r(l)-r(o)}},bu.getLevel=function(e){return e.level||e.data&&e.data.level},bu.getSeriesIndex=function(e){var t=bu.getLevel(e);return t?+t.split("_")[0]:void 0},bu.getItemIndex=function(e){var t=bu.getLevel(e);if(t){var a=t.split("_");return+a[a.length-1]}},bu.getParentColor=function(e,t){var a=e.params,r=a.color,n=a.commonPlotOptions.parent.fillColor,i=Pl;if(t.depth){var o=r[bu.getSeriesIndex(t)%r.length];i="{{clr-tint}}"===n?La(o,.5,"brighter",d3.hsl):"{{clr-shade}}"===n?La(o,.5,"darker",d3.hsl):"{{clr}}"===n?o:n?n:Ea(o,1e-4)}return i},bu.isDisabled=function(e,t){var a=bu.getSeriesIndex(t);return ut(a)&&e.seriesdata[a].disabled};var Cu=function(e){var t=this,a=t.rp=e.params,r=t.chartObj=a.chartObj;t.commonRendererProp=e,t.dimension=Md.getAvailableBound(r,a.commonPlotOptions),t.createScale(),t.layout=t.getLayout(),t.processData()};Cu.prototype.createScale=function(){var e=this.chartObj,t=this.dimension;e.axes.x.scale=Yl().domain([0,t.width]).range([0,t.width]),e.axes.y.groups[0]=e.axes.y.groups[0]||{},e.axes.y.groups[0].scale=Yl().domain([0,t.height]).range([0,t.height])},Cu.prototype.getLayout=function(){var e=this,t=e.dimension,a=this.rp.commonPlotOptions,r=a.parent,n=Rt(a.padding),i=a.mode;return ps().size([t.width,t.height]).tile(Wl(i)).round(!0).paddingInner(function(e){return e.value?(e.children[0]&&e.children[0].children?r:a).interPadding||0:0}).paddingTop(function(e){return e.depth&&e.value?n.top:0}).paddingBottom(function(e){return e.depth&&e.value?n.bottom:0}).paddingLeft(function(e){return e.depth&&e.value?n.left:0}).paddingRight(function(e){return e.depth&&e.value?n.right:0})},Cu.prototype.getValue=function(e){var t=this,a=t.chartObj,r=t.rp,n=bu.getSeriesIndex(e),i=So.DataProcessor.helpers.getParsedYAxisOrder(a.seriesdata[n||0].yaxiscolumnorder),o=a.dataset.getY(e,i)||0,l="absolute"===r.commonPlotOptions.negativeAs;return bu.isDisabled(a,e)?0:0>o?l?fl(o):0:o},Cu.prototype.getChildren=function(e){var t=bu.getLevel(e),r=t&&t.split("_").length;return!this.chartObj.dataObject.hasHierarchyData&&1==r&&e.length<2&&e[0]&&a(e[0][0])?e[0]:a(e[0])?e:El},Cu.prototype.processData=function(){var e=this,t=e.chartObj,a=e.commonRendererProp,r=e.dimension,n=e.rp,i=n.commonPlotOptions,o=n.color,l=i.colorScheme||"solid",s=0,c={},d=[],u=[],h=[],f=[],g=[],p=[],y=d3.hierarchy(e.chartObj.seriesdata,function(t){return e.getChildren(t)}).sum(function(t){return e.getValue(t)}),v=e.layout(y).descendants();e.chartObj.seriesdata.forEach(function(e,a){var n=o[a%o.length];p[a]=za(t,a,[r.width,r.height]),u[a]=0,h[a]=[],h[a].disabled=e.disabled,h[a].plotoptions=e.plotoptions,d[a]=Yl().domain([0,A(e)]).range([n,La(n,"solid"===l?0:"shades"===l?-1:1,"brighter",d3.hsl)])}),v.forEach(function(e,r){var n=bu.getLevel(e),l=bu.getSeriesIndex(e),p=bu.getItemIndex(e);if(e.index=r,e.depth){if(e.data.color)e.data.arcColor=e.data.color;else{var y=Va(i,t)?o[p%o.length]:d[l](u[l]);e.data.arcColor=y}g[n]=e}e.children?e.data.arcColor=bu.getParentColor(a,e):(f[l]||(f[l]=[]),f[l].push(e),u[l]++),e.depth&&h[l].push(e),bu.isDisabled(t,e)||(c[n]=s++)}),t.renderer[0].fillColorFunc=p[0],e.processedData=v,e.previousSiblingsCount=c,e.seriesWiseNodes=h,e.leafNodes=f,e.nodes=g,e.fillColor=p},function(){function e(e,t,a){var r=un(d3.event);return{renderer:a,seriesPos:bu.getSeriesIndex(e),coordinates:[r.pageX,r.pageY],element:this,data:e.data,level:bu.getLevel(e)}}function t(e){var t,a=e.chartObj,r=e.dimension,n=e.processedData,i=e.rp.commonPlotOptions,o=a.dataset,l=ln(a);if(a.chartRendered)return n.some(function(e){var n=bu.getSeriesIndex(e),s=rt(n)||0==lt(Hr(a.seriesdata[n].plotoptions,i,a,"enabled"),!0);if(!s){var c=bu.getTileBound(a,e),d=c.x,u=c.y,h=c.width,f=c.height,g=ja(o.getClr(e.data),a),p={x:d+r.x,y:u+r.y,width:h,height:f};return g&&Sd.pointInRectangle(l,p)&&!e.children?(t=e,!0):void 0}}),t}function a(e){var t=e.node().__on;t.forEach(function(t){e.on("."+t.name,El)})}bu.addEvents=function(r){function n(){var a=t(r);if(a){var n=e(a,El,v);u.eventHandler.mouseMove(n);var i=Hr(u.seriesdata[bu.getSeriesIndex(a)].plotoptions,f,u,"cursor");u.eventHandler.addCursor(i)}else d&&(u.eventHandler.mouseOut(v,d,g(d)),u.eventHandler.hideCursor());d=a}function i(){var e=d;e?u.eventHandler.mouseOut(v,e,g(e)):c()}function o(){var a=t(r);if(a){var n=e(a,El,v);u.eventHandler.click(v,a,g(a),p(a),n),d=a}}function l(){var e=t(r);if(e){var a=So.annotation?vo(e,y.length>1?y[g(e)].seriesname:El):e,n=bu.getTileBound(u,e),i=[n.x+h.x,n.y+h.y],o={coordinate:i,data:a,basedOn:"plot"};u.eventHandler.doubleclick(e,g(e),o),d=e}}function s(e,t,a){e=e.data||e;var r=u.dataObject.getTransRectValue("radius",El,El,El,El,f.borderRadius),n=Va(f,u),i=u.staticPaneSVG.selectAll("g#zchierarchyhighlight"),o=i.selectAll(Us),l=u.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),s=Ra(u,n?a:t,e,t);i.style("opacity",El),o.attr("d",function(){var t=v.getProcessedNode(e),a=bu.getTileBound(u,t);return"canvas"===u.plot.renderer.mode&&(r=ea(r,a.width,a.height,!0)),Jt(a.x,a.y,a.width,a.height,r)}).styles(u.legendHighlight.getEffect(l,"treemap",rl.test(l)?s:Pl,{fill:Pl,stroke:s},n?a:t,"plot"))}function c(){u.staticPaneSVG.selectAll("g#zchierarchyhighlight").style("opacity",0)}var d,u=r.chartObj,h=r.dimension,f=r.rp.commonPlotOptions,g=bu.getSeriesIndex,p=bu.getItemIndex,y=u.seriesdata,v=u.renderer[0],m=[u.plotarea.left+h.x,u.plotarea.top+h.y],x=u.eventHandler.trackerElement;G(x,u.plotarea),a(x),v.defaultMouseOverFunc=s,v.defaultMouseOutFunc=c;var b=u.staticPaneSVG.selectAll("g#zchierarchyhighlight").attr("transform","translate("+m+")");Qt(b,Us,[1]);var C={target:"plot",touchleave:!0,chartObj:u},w={mousemove:n,mouseout:i,click:o,dblclick:l},k={singletouchmove:n,touchend:i,tap:o,dbltap:l};cn(x,w,k,C)}}(),qo.treemap=function(){function e(g){return g.each(function(p){var y=t.params;n=y.chartObj,i=y.commonPlotOptions;var v=y.notesArray,m=n.systemConf,x=y.labelQueue;o=new Cu(t),l=o.dimension,s=o.nodes,c=o.leafNodes,d=o.seriesWiseNodes;var b=i.strokeWidth,C=i.strokeOpacity,w=i.fillOpacity,k=o.fillColor,O=Ma(n,0),S=n.dataObject.getTransRectValue("radius",El,El,El,El,i.borderRadius),A=[l.x,l.y],P=ha(i,El,n,"treemap"),T=P.enabled,E=P.type,L=u?Nl:P.easingType,z=u?T?200:0:P.duration,D=n.dataObject.totalnoofdatas,M=u?z:E===Qs?z/D:z,j=u?0:E===Qs?function(e){return o.previousSiblingsCount[h(e)]*(z/D)}:E===qs?function(){return wl()*D*(z/D)}:0,R=E===Zs||E===qs||E===Qs?0:El,I=i.events?i.events.cursor||Tl:m.chart.plot.events.cursor||Tl,H=i.parent,B=H.events.cursor;a=Qt(g,"g",[p],".","class","hierarchychart"),a.attr("transform","translate("+l.x+","+l.y+")").styles({"stroke-width":b,"stroke-opacity":C,"fill-opacity":w,cursor:I});var F=o.processedData;e.total=F[0].value,r=Qt(a,Us,F),e.total||r.remove(),r.styles({fill:function(e){if(e.children)return e.fillColor=e.data.arcColor;var t=bu.getTileBound(n,e),a=f(e);return e.fillColor=k[a](a,e.data,El,El,El,[t.width,t.height])},stroke:function(e){var t=(e.children?H.strokeColor:El)||i.strokeColor;return e.depth?t?t:e.children?e.data.arcColor:O(f(e),e.data):Pl},visibility:function(e){return e.value?El:"hidden"}}).attr("class",function(e){return ut(h(e))?"series_"+f(e)+(e.children?" zchierarchyparent":""):void 0}).attr("id",function(e){return"tree_"+h(e)});var V=a.selectAll(Us+".zchierarchyparent");V.styles({"stroke-width":H.strokeWidth,"stroke-opacity":H.strokeOpacity,"fill-opacity":H.fillOpacity,cursor:B}),u||r.attr("transform",function(e){var t=bu.getTileBound(n,e),a=t.x+t.width/2,r=t.y+t.height/2;return E===ec?(a=l.width/2,r=l.height/2):E===ic?a=t.width/2:E===ac&&(r=t.height/2),"translate("+a+","+r+")"}).attr("d",function(e){var t=bu.getTileBound(n,e),a=-t.width/2,r=-t.height/2,i=t.width,o=t.height;return E===ic?i=0:E===ac&&(o=0),Jt(a,r,i,o,S)}).style("opacity",R),r.transition().duration(M).delay(j).ease(L).attr("transform",function(e){var t=bu.getTileBound(n,e);return"translate("+(t.x+t.width/2)+","+(t.y+t.height/2)+")"}).attr("d",function(e){var t=bu.getTileBound(n,e);return Jt(-t.width/2,-t.height/2,t.width,t.height,S)}).style("opacity",El),e.renderedTimer=setTimeout(function(){if(So.labelRenderer){var t=function(t,a){if(a===id)return e.total;var r=e.getProcessedNode(t);return r.parent.value};p.forEach(function(a,r){x.push({renderer:e,charttype:"hierarchy",chartObj:n,args:[d[r],r,El,El,t,c[r],A]}),x.push({renderer:e,charttype:"hierarchy",chartObj:n,args:[d[r],r,El,El,t,[d[r][0]],A,!0]})})}So.annotation&&p.forEach(function(t,a){v=So.annotation.preprocessAnnotations(p,a,function(t){var a=e.getProcessedNode(t),r=bu.getTileBound(n,a);return[r.x+l.x,r.y+l.y]},v,n,y)}),bu.addEvents(o),u=!0,e.chartRendered=!0},z+17+(j?4*D:0))}),e}var t,a,r,n,i,o,l,s,c,d,u=!1,h=bu.getLevel,f=bu.getSeriesIndex;return e.commonRendererProp=function(a){return arguments.length?(t=a,e):t},e.getProcessedNode=function(e){return o.nodes[h(e)]},e};var wu=function(e,t,a,r,n,i,o){var l,s,c=e[t.dataindex]||[],d=ut(t.dataindex),u=a.datalabels.hasFixedPosition,h=a.systemConf.chart.axes.yaxis[n.yaxiscolumnorder||0].reversed,f=a.userdata.seriesdata.stackGroup,g=f?Sr(o,f):0,p=a.plotarea,y=n.stacked,v=n.axisrotated,m=n.hasNegValue,x=n.yaxiscolumnorder,b=n.dataset,C=n.yscale;null==c||c instanceof Array||(c=[c]),d&&!c.length?l=s=0:(l=Hl(c),s=Bl(c));var w=b.getX(e),k=(y?r.bandwidth1(w)+(r.bandwidth2(g)||0):r.bandwidth1(w)+r.bandwidth2(r.barDatasetIndex+i))+r.levelMarkerPadding,O=d?C(v?hl(0,l):ul(0,s)):v&&null!=m?C(m):0,S=v?d?C(ul(0,s))-C(hl(0,l)):null!=m?p.width-C(m):p.width:r.levelMarkerWidth,A=v?r.levelMarkerWidth:d?C(hl(0,l))-C(ul(0,s)):null!=m?C(m):p.height;if(!d)if(C.bandwidth){var P=C.ordinalRange,T=C.bandwidth()/2;v?(O=C.origRange[0],S=P[h?0:P.length-1]+T):(O=P[P.length-1]+T,A=P[h?P.length-1:0]+T)}else{var E;if(u){var L=ku(a,x);E=y?L[x][1]:L[1]}else E=C.domain()[1];var z=[C(E),C(ut(m)?m:C.domain()[0])];v?(z.reverse(),O=z[0],S=fl(z[1]-z[0])):(O=z[0],A=fl(z[1]-z[0]))}return{x:k,y:O,width:S,height:A}},ku=function(e,t){var a=e.dataObject.actual_yRange[t];return rs(Jl([a,[0]]))};!function(e){var t=!0,r=!1,n=255,i="dummyText",o=0,l=function(){return document.createElement("canvas")},s=function(e,t){return e.getContext("2d",t)},c=function(e){return Qt(e.getPatternSvg(),Ys,[1],".","class",i)},d=function(e){Qt(e.getPatternSvg(),Ys,[],".","class",i)},u=function(e){return e.nodeName===Xs},h=function(e,i){var h,f,g=i.padding,p=i.textOverflow,y=i.textOverlap,v=a(v=i.rotation)?v:[v],m=i.mask,x=i.fontScale,b=i.fontFamily,C=i.fontStyle,w=i.fontWeight,k=i.fontSize,O=i.content,S=i.chartObj,A=[],P=0,T=hl(8,ul(4,sl(16*hl(i.width,i.height)/1024))),E=[],L=dl(i.width/T),z=dl(i.height/T),D=(D=i.origin)?[D[0]/T,D[1]/T]:[L/2,z/2],M=cl(pl(L*L+z*z)),j=function(e){if(A[e])return A[e];var t=8*e,a=t,r=[];for(0===e&&r.push([D[0],D[1],0]);a--;){var n=1,i=a/t*2*kl;r.push([D[0]+e*n*yl(-i)*hl(1,L/z),D[1]+e*n*vl(-i)*hl(1,z/L),i])}return A[e]=r,r},R=function(e,t,a,r){var n=k(t),o=B(t),l=Su.getDy(r),s=0,c=0;"html"===r.contentType?(e.textAlign=vc,r.forEach(function(d){var u,h,f=d.style;f.length&&(u=$o.canvas.getFont(ta(null,[H(t)]),f),h=parseFloat(f["font-size"])),s=d.dx||0,c=(d.dy||0)*n+n*l-(Su.isMultiLine(r)?a.height/2:0),e.font=u||o,e.strokeStyle="#000",e.lineWidth=i.strokeWidth+g,e.strokeText(d.text,s,c),e.fillStyle="#000",e.fillText(d.text,s,c)})):(c=n*l,e.textAlign=vc,e.font=o,e.strokeStyle="#000",e.lineWidth=i.strokeWidth+g,e.strokeText(r.innerSVG,s,c),e.fillStyle="#000",e.fillText(r.innerSVG,s,c))},I=function(){return Sd.degreeToRadian(v[P++%v.length])},H=function(e){return{fontStyle:C(e),fontWeight:w(e),fontSize:k(e),fontFamily:b(e)}},B=function(e){return C(e)+" normal "+w(e)+" "+k(e).toString(10)+Sl+" "+b(e)},F=function(e,t){return k(t)-k(e)},V=function(e,t,a){for(var r,n,i,o=[],l=[a/2,t/2,a/2,t/2],s=t*T,c=t;c--;)for(r=a;r--;){i=T;e:for(;i--;)for(n=T;n--;)if(e[4*((r*T+i)*s+(c*T+n))+3]){o.push([c,r]),l[0]=hl(l[0],r),l[1]=ul(l[1],c),l[2]=ul(l[2],r),l[3]=hl(l[3],c);break e}}return{occupied:o,bound:l}},N=function(e,t,a){var r=e.node(),n=r.childElementCount?e.selectAll("*").filter(function(){return u(this)&&!this.childElementCount}).nodes():[r],o=e.attr("dy"),l=$t(r).rotate||0,s=fl(ut(a)?a:l)%360,c=s>90?180-s:s;e.attrs({"text-anchor":El,dy:"1em",transform:"rotate("+c+" 0 0)"});var d,h,f,y,v,m="ellipsis"===p?"..":"",x=m.length,b=mr(r),C=(ut(t)?t:i.width)-g,w=i.height-g,k={left:b.left,top:b.top,right:b.left+C,bottom:b.top+w,width:C,height:w},O=function(e){var t=u(e)?vr:mr,a=t(e);return u(e)&&(f=k.width-ul(0,a.left-k.left)-ul(0,k.right-a.right),y=k.height-ul(0,a.top-k.top)-ul(0,k.bottom-a.bottom)),{width:a.width,height:a.height}};n.forEach(function(e){f=C,y=w,v=O(e),v.width-f>1&&(d=(v.width-f)/v.width,h=dl((1-d)*e.textContent.length),e.textContent=e.textContent.substring(0,h-x)+m,v=O(e)),v.height-y>1&&(d=(v.height-y)/v.height,h=dl((1-d)*e.textContent.length),e.textContent=e.textContent.substring(0,h-x)+m,v=O(e)),(v.width-f>1||v.height-y>1)&&ra(e,e,e.textContent,v.width,v.height,v,m),e.textContent===m&&(e.textContent="")}),e.attrs({"text-anchor":Pc,dy:o,transform:"rotate("+l+" 0 0)"})},_=function(e,a){var r=k(e),n=O(e);if(o>=r)return El;var c=l(),d=s(c,{willReadFrequently:t}),u=[],h=n.value,f=n.type;dummyText.attrs({"text-anchor":"middle",dy:Su.getDy(n)+"em",transform:"rotate("+Aa(a)+" 0 0)"}),ta(dummyText,[H(e)]),dummyText[n.type](n.value),Su.isMultiLine(n)&&bi(dummyText,0),"none"!==p&&(ut(i.maxWidth)&&N(dummyText,ka(i.maxWidth,i.width),0),N(dummyText),h=dummyText[n.type]());var y=q(dummyText.node()),v=y.width+i.strokeWidth+g,m=y.height+i.strokeWidth+g,x=dl((v*fl(vl(a))+m*fl(yl(a)))/T),b=dl((v*fl(yl(a))+m*fl(vl(a)))/T),C=b*T,w=x*T;if(u.innerSVG=h,u.contentType=f,u.format=n.format,"html"===f){var S=wi(dummyText,r);Array.prototype.push.apply(u,S)}c.setAttribute("width",C),c.setAttribute("height",w),d.translate(C/2,w/2),d.rotate(a),R(d,e,y,u);var A=d.getImageData(0,0,C,w).data,P=V(A,b,x);return{occupied:P.occupied,bound:P.bound,gw:b,gh:x,width:v,height:m,fontSize:r,rotation:a,nodeList:u}},W=function(e,t){return e>=L||t>=z||0>e||0>t},Y=function(e,a,n,i,o){for(var l=o.length;l--;){var s=e+o[l][0],c=a+o[l][1];if(W(s,c)||!E[s][c])return r}return t},X=function(){for(var e,a,i,o=L;o--;)for(E[o]=[],e=z;e--;)if(m){i=T;e:for(;i--;)for(a=T;a--;)for(var l=4;l--;)if(f[4*((e*T+i)*L*T+(o*T+a))+l]!==n){E[o][e]=r;break e}E[o][e]!==r&&(E[o][e]=t)}else E[o][e]=t},U=function(e,t,a,r,n,i){for(var o,l=n.occupied,s=l.length;s--;){var c=e+l[s][0],d=t+l[s][1];W(c,d)||G(c,d,o,i)}},G=function(e,t){W(e,t)||(E[e][t]=r)},Z=function(e){var a=I(),n=_(e,a);if(h.push(n),e.layout=El,!n)return r;var i=n.bound;if(i[1]-i[3]+1>L||i[2]-i[0]+1>z)return r;for(var o,l=M+1,s=function(a){var i=cl(a[0]-n.gw/2),l=cl(a[1]-n.gh/2),s=n.gw,c=n.gh;return Y(i,l,s,c,n.occupied)?(o=[i,l],U(i,l,s,c,n,e),t):r};l--;){var c=j(M-l),d=c.some(s);if(d)return e.layout={x:(o[0]+n.gw/2)*T,y:(o[1]+n.gh/2)*T,width:n.width,height:n.height,rotation:n.rotation,text:n.text,size:n.fontSize,nodeList:n.nodeList},t}return r},Q=function(){dummyText=c(S),e.sort(F),h=[],X();var t=e.filter(Z);if("adjust"===y&&t.length!==e.length){var a=0,r=0;if(e.forEach(function(e,t){if(h[t]){var n=h[t].width*h[t].height;a+=n,r+=e.layout?n:0}}),r!==a){var n=x.range(),o=r/a,l=3,s=ul(n[0],l),u=ul(n[1]*o,s+2);x.range([s,u]),h=[],X(),t=e.filter(Z)}}i.onload(),d(S)};if(m){var K,$=new Image;$.crossOrigin="Anonymous",$.onload=function(){var e=L*T,t=z*T;K=l(),K.width=e,K.height=t;var a=s(K);a.drawImage($,0,0,e,t);var r=a.getImageData(0,0,e,t),i=a.createImageData(r),o=r.data;f=i.data;for(var c=0;c<o.length;c+=4)f[c]=f[c+1]=f[c+2]=n,f[c+3]=o[c+3]>128?n:n-1;r=i=o=null,Q(),f=null},$.src=m}else Q()};e.WordCloud=h}(this);var Ou=function(e){var t,a,r,n,i,o,l,s,c,d,u,h,f,g,p=Su.getSeriesIndex,y=function(e){var t=So.DataProcessor.helpers.getParsedYAxisOrder(a.seriesdata[p(e)].yaxiscolumnorder);return a.dataset.getY(e,t)},v=function(){a.seriesdata.forEach(function(e,t){e.disabled||e.data.forEach(function(e,a){e.forEach(function(e,r){e.seriesIndex=t,e.subSeriesIndex=a,e.itemIndex=r,e.layout=El,e.level=t+"_"+a+"_"+r;var i=y(e);o+=i,g.push(i),n.push(e)})})})},m=function(){var e=function(e,t){return t===id?o:l[1]};a.seriesdata.forEach(function(n,i){var o=li(r,n.plotoptions,a,i),l=si(El,o,a);u.push(l["font-family"]),h.push(l["font-style"]),f.push(l["font-weight"]),c.push(o),d.push(vi(a,t,o,Zc,e,i))})},x=function(){l=rs(Jl([[0],rs(g)]))},b=function(){var e=hl(i.width,i.height),t=ka(r.minSize,e,ka("2%",e)),a=ka(r.maxSize,e,ka("20%",e));s=Yl().domain(l).range([t,a])},C=function(e){var t,o=r.mask,l=!ud.IE&&!ud.PHANTOMJS&&o.htmlEl,c=o.imageUrl,g=!ud.IE&&!ud.PHANTOMJS&&o.symbol;if(l)t="data:image/svg+xml;"+(ud.IE?"base64":"utf8")+","+(ud.IE?sd(unescape(encodeURIComponent(l))):l);else if(c)t=c;else if(g){var v=i.width,m=i.height,x=hl(v,m),b="rect"===g?_(g)(v,m):_(g)(x),C="rect"===g?[v,m]:[x,x],w="<svg xmlns=\'"+d3.namespaces.svg+"\' width=\'"+C[0]+"\' height=\'"+C[1]+"\'><path transform=\'translate("+C[0]/2+","+C[1]/2+")\' d=\'"+b+"\'></path></svg>";t="data:image/svg+xml;"+(ud.IE?"base64":"utf8")+","+(ud.IE?sd(unescape(encodeURIComponent(w))):w)}var k={width:i.width,height:i.height,rotation:r.rotation||[0],fontSize:function(e){var t=y(e);return t?s(t):0},fontFamily:function(e){return u[p(e)]},fontStyle:function(e){return h[p(e)]||"normal"},fontWeight:function(e){return f[p(e)]||"normal"},content:function(e){var t=y(e);if(ut(t)){var a=d[p(e)];return{type:a.contentType,value:a(e),format:a}}return{type:"text",value:""}},strokeWidth:lt(r.strokeWidth,1),onload:function(){a.hideLoading(a.container),e()},origin:El,mask:t,padding:lt(r.padding,2),textOverflow:r.datalabels.textOverflow||"ellipsis",textOverlap:r.datalabels.textOverlap||"adjust",maxWidth:r.datalabels.maxWidth,fontScale:s,chartObj:a};WordCloud(n,k)},w=function(){t=e.params,a=t.chartObj,r=t.commonPlotOptions,i=Md.getAvailableBound(a,r),o=0,n=[],c=[],d=[],u=[],h=[],f=[],g=[]},k=function(){w(),a.showLoading(a.container),v(),x(),m(),b()};return k(),{rp:t,processedData:n,dimension:i,sum:o,fontScale:s,datalabelOptions:c,fontFamily:u,fontStyle:h,fontWeight:f,drawLayout:C}},Su={};Su.getSeriesIndex=function(e){return e.seriesIndex},Su.getItemIndex=function(e){return e.itemIndex},Su.getDy=function(e){return Su.isMultiLine(e)?.9:.4},Su.isMultiLine=function(e){return(e.nodeList?e.nodeList.format:e.format).multiLine},function(){function e(e,t,a){var i=un(d3.event);return{renderer:a,seriesPos:r(e),subseriesPos:e.subSeriesIndex,itemPos:n(e),coordinates:[i.pageX,i.pageY],element:this,data:e}}function t(e){var t,a=e.rp.chartObj,n=e.dimension,i=e.processedData,o=ln(a),l=i.length,s=null;if(o.x-=n.x,o.y-=n.y,a.chartRendered){for(;l--;){var c=i[l],d=c.layout,u=ja(a.dataset.getClr(c),a),h=0==lt(Hr(a.seriesdata[r(c)].plotoptions,e.rp.commonPlotOptions,a,"enabled"),!0);if(d&&!h&&u){var f={x:d.x-d.width/2,y:d.y-d.height/2,width:d.width,height:d.height},g=Sd.rotatePoint(o,d.rotation,d),p=fl(g.y-g.y);Sd.pointInRectangle(g,f)&&(null===s||s>p)&&(t=c,s=p)}}return t}}function a(e){var t=e.node().__on;t.forEach(function(t){e.on("."+t.name,El)})}var r=Su.getSeriesIndex,n=Su.getItemIndex;Su.addEvents=function(i){var o,l=i.rp.chartObj,s=i.rp.commonPlotOptions,c=i.dimension,d=l.seriesdata,u=l.renderer[0],h=l.plotarea,f=l.eventHandler,g=[h.left+c.x,h.top+c.y],p=c.width,y=c.height,v=za(l,0,{x1:0,x2:p,y1:0,y2:y,r:hl(p,y)},El,"svg"),m=f.trackerElement;G(m,h),a(m);var x=l.staticPaneSVG.selectAll("g.zcplothighlight").attr("transform","translate("+g+")");Qt(x,Ys,[1]);var b=function(){x.style("opacity",0)},C=function(e,t,a){var n=Va(s,l),o=x.selectAll(Ys),c=l.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),d=Ra(l,n?a:t,e,t),u=e.layout,h=Su.isMultiLine(u);x.style("opacity",El),si(o,i.datalabelOptions[r(e)],l),o[u.nodeList.contentType](u.nodeList.innerSVG),o.attrs({x:u.x,y:u.y-(h?u.height/2:0),transform:"rotate("+Aa(u.rotation)+" "+u.x+" "+u.y+")","text-anchor":Pc,dy:Su.getDy(u)+"em"}).styles({"font-size":u.size+Sl,"paint-order":"stroke",fill:v(n?a:t,e)}).styles(l.legendHighlight.getEffect(c,Gc,rl.test(c)?d:Pl,{fill:Pl,stroke:d},n?a:t,"plot")),h&&bi(o,u.x)},w=function(){var a=t(i);if(a){var n=e(a,El,u);f.mouseMove(n);var c=Hr(d[r(a)].plotoptions,s,l,"cursor");f.addCursor(c)}else o&&(f.mouseOut(u,{data:o},r(o)),f.hideCursor());o=a},k=function(){var e=o;e?f.mouseOut(u,{data:e},r(e)):b()},O=function(){var a=t(i);if(a){var l=e(a,El,u);f.click(u,{data:a},r(a),n(a),l),o=a}},S=function(){var e=t(i);if(e){var a=So.annotation?vo(e,d.length>1?d[r(e)].seriesname:El):e,n=e.layout,s=[n.x-.5*n.width+c.x,n.y-n.height*Su.getDy(n)+c.y],u={coordinate:s,data:a,basedOn:"plot"};l.eventHandler.doubleclick({data:e},r(e),u),o=e}};u.defaultMouseOverFunc=C,u.defaultMouseOutFunc=b;var A={target:"plot",touchleave:!0,chartObj:l},P={mousemove:w,mouseout:k,click:O,dblclick:S},T={singletouchmove:w,touchend:k,tap:O,dbltap:S};cn(m,P,T,A)}}(),qo.wordcloud=function(){function e(g){return g.each(function(g){function p(){v=a();var r=Qt(T,Ys,s.processedData);r=r.filter(f),t(T),r.each(function(e){var t=Rl(this),a=u(e),r=h(e),d=e.layout,f=Su.isMultiLine(d);si(t,s.datalabelOptions[a],l),t[d.nodeList.contentType](d.nodeList.innerSVG),t.styles({"font-size":d.size+Sl,fill:i(c?r:a,e),stroke:o(c?r:a,e,n.strokeColor)}).attrs({x:d.x,y:d.y-(f?d.height/2:0),dy:Su.getDy(d)+"em",transform:"rotate("+Aa(d.rotation)+" "+d.x+" "+d.y+")",id:"word_"+a+"_"+e.subSeriesIndex+"_"+r,"class":"series_"+a}),f&&bi(t,d.x)}),d||r.style("opacity",P).each(function(e){var t,a,r=e.layout;if(C===$s)t=E.width/2,a=E.height/2;else if(C===ec){var n=L/v,i=z/v;t=wl()*(n-r.width)-E.x+r.width/2,a=wl()*(i-r.height)-E.y+r.height/2}else t=r.x,a=r.y;Rl(this).attrs({x:t,y:a-(Su.isMultiLine(r)?r.height/2:0),transform:"rotate("+Aa(r.rotation)+" "+t+" "+a+")"})}),r.transition().duration(S).delay(A).ease(w).style("opacity",El).attrs({x:function(e){return e.layout.x},y:function(e){var t=e.layout;return t.y-(Su.isMultiLine(t)?t.height/2:0)},transform:function(e){var t=e.layout;return"rotate("+Aa(t.rotation)+" "+t.x+" "+t.y+")"}}),e.renderedTimer=setTimeout(function(){Su.addEvents(s),So.annotation&&g.forEach(function(e,t){m=So.annotation.preprocessAnnotations(g,t,function(e){var t=e.layout;return[(t.x-.5*t.width+E.x)*v,(t.y-t.height*Su.getDy(t)+E.y)*v]},m,l,y)}),e.chartRendered=!0,d=!0},k+1e3/60)}var y=r.params;l=y.chartObj,n=y.commonPlotOptions;var v,m=y.notesArray,x=ha(n,El,l,Gc),b=x.enabled,C=x.type,w=d?Nl:x.easingType,k=d?b?200:0:x.duration,O=l.dataObject.totalnoofdatas,S=d?k:C===Qs||C===qs?k/O:k,A=d?0:C===Qs?function(e,t){return t*(k/O)}:C===qs?function(){return wl()*O*(k/O)}:0,P=C===Zs||C===qs||C===Qs?0:El,T=Qt(Rl(this),"g",[g],".","class","wordcloudgroup");s=new Ou(r);var E=s.dimension,L=E.width,z=E.height;e.total=s.sum,e.extentY=s.fontScale.domain(),i=e.fillColorFunc=za(l,0,{x1:0,x2:L,y1:0,y2:z,r:hl(L,z)}),o=o=Ma(l,0),c=Va(n,l),T.attrs({transform:"translate("+E.x+","+E.y+")","text-anchor":Pc}),s.drawLayout(p)}),e}function t(e){e.styles({"paint-order":"stroke","fill-opacity":n.fillOpacity,"stroke-width":n.strokeWidth,"stroke-opacity":n.strokeOpacity})}function a(){return 1}var r,n,i,o,l,s,c,d=!1,u=Su.getSeriesIndex,h=Su.getItemIndex,f=function(e){return Rl(this).style("opacity",e.layout?El:0),e.layout};return e.commonRendererProp=function(t){return arguments.length?(r=t,e):r},e},So.axis.threshold=function(e,t){function a(e,t,a,r){return e?(e.threshold||(e.threshold={}),e.threshold[r]=t.show?"line"==r?So.axis.threshold.line():So.axis.threshold.range():null,e.threshold[r]):null}function r(t,a,r,n,o,l){var s;return i.axisObj=function(e){return arguments.length?(a=e,i):a},i.thresholdIndex=function(e){return arguments.length?(r=e,i):r},i.type=function(e){return arguments.length?(n=e,i):n},i.values=function(e){return arguments.length?(s=e,i):s},i.chartObj=function(t){return arguments.length?(e=t,i):e},i.thresholdIndex(r).type(n).values(l.values).chartObj(e),"line"==o&&i.axisObj(a),t.parentObj(i),t}function n(t,n,i,o,l,s,c){var d=c&&c.underlay,u=(d?e.svg:e.staticPaneSVG).selectAll("g.threshold"),h=e.svg.selectAll("g."+l+"-axis-"+i),f=null==h||h.empty()||""!=h.style("visibility")&&"visible"!=h.style("visibility")?"hidden":"visible",g=Qt(u,"g",c.show&&"visible"==f?[n]:[],".","class","threshold"+s+"-"+l+"-axis-"+i);if(null!=t&&n.show){var p=o&&null!=t.threshold&&null!=t.threshold[s]?t.threshold[s]:a(t,n,i,s);p=r(p,t,i,l,s,c),g.call(p)}}var i={},o=e.systemConf,l=o.chart.axes.xaxis,s=at(e.userdata,"chart.axes.xaxis")?e.userdata.chart.axes.xaxis:{};null!=s.threshold&&null!=s.threshold.line&&n(e.axes.x,l.threshold.line,0,t,"x","line",s.threshold.line),null!=s.threshold&&null!=s.threshold.range&&n(e.axes.x,l.threshold.range,0,t,"x","range",s.threshold.range);for(var c=o.chart.axes.yaxis,d=at(e.userdata,"chart.axes.yaxis")?e.userdata.chart.axes.yaxis:{},u=0;u<e.axes.y.count;u++)null!=d&&null!=d[u]&&null!=d[u].threshold&&null!=d[u].threshold.line&&n(e.axes.y.groups[u],c[u].threshold.line,u,t,"y","line",d[u].threshold.line),null!=d&&null!=d[u]&&null!=d[u].threshold&&null!=d[u].threshold.range&&n(e.axes.y.groups[u],c[u].threshold.range,u,t,"y","range",d[u].threshold.range)},So.axis.threshold.textAlign=function(e,t,a,r,n,i){var o;return n=n||0,"left"==e?o=r?"left"==i||"bottom"==i?"x"==t?n:a.height-n:"x"==t?n:a.height-n:"left"==i||"bottom"==i?"x"==t?a.height-n:n:"x"==t?n:a.width-n:"center"==e?o=r?"left"===i||"bottom"===i?"x"==t?(a.width+n)/2:(a.height-n)/2:"x"==t?(a.width-n)/2:(a.height+n)/2:"left"==i||"bottom"==i?"x"==t?(a.height-n)/2:(a.width+n)/2:"x"==t?(a.height+n)/2:(a.width-n)/2:"right"==e&&(o=r?"x"==t?a.width:0:"left"==i||"bottom"==i?"x"==t?0:a.width:"x"==t?a.height:0),o},So.axis.threshold.line=function(){function e(f){f.each(function(f){var g=Rl(this);e.update=function(){g.transition().call(e)},l=d.chartObj(),n=d.thresholdIndex(),c=d.type(),u=d.axisObj(),h=d.values(),i=l.plotarea;var p=u.scale,y=p.range();y=y.slice(0,y.length),y.sort(function(e,t){return e-t});var v=null!=p.bandwidth?p.bandwidth()/2:0,m=f.label;m=yo(m,at(l.userdata,"chart.axes."+c+"axis"+("x"===c?"":"."+n)+".threshold.line.label",!0));var b=f.marker||{},C=Od(b.enabled,!0);s=l.axes.rotated,o=l.systemConf;var w=[],k=[],O=[],S={x:2,y:2},A=o.chart.axes.xaxis.axisline,T=o.chart.axes.yaxis[n].axisline;ut(A)&&A.show&&(S.x+=+A.strokeWidth-1),ut(T)&&T.show&&(S.y+=+T.strokeWidth-1);var E,L=0,z=[],D=[],M=[],j=[],R=[],I=[],H=[],B=[],F=l.dataset.getDataType(c,n),V=kd(f.events,"enabled")!==!1,N=l.dataset.getColumn(c,n),W=l.dataset.getColumnIdx(c,n);F==_s&&(E=kd(N,_s)||null),h.map(function(e,t){var r=null!=e&&""!=e?F==_s?mn(e,null,E).getTime():e:null;null!=e&&""!==e&&p(r)+v>=y[0]&&p(r)+v<=y[y.length-1]&&(w[L]=r,k[L]=x(kd(f,"label.text["+t+"]")||"",h,N,l),O[L]=(a(f.color)?f.color[t]:f.color)||"black",z[L]=ut(f.label)?(a(f.label.hAlign)?f.label.hAlign[t]:f.label.hAlign)||"center":"center",M[L]=(a(f.strokeWidth)?f.strokeWidth[t]:f.strokeWidth)||1,D[L]=a(f.dashStyle)?f.dashStyle[t]:f.dashStyle,j[L]=ut(f.marker)&&f.marker.enabled?(a(f.marker.strokeWidth)?f.marker.strokeWidth[t]:f.marker.strokeWidth)||2:null,I[L]=f.marker&&f.marker.enabled?(a(f.marker.size)?f.marker.size[t]:f.marker.size)||1:null,L++)});var Y=l.container.node().getBoundingClientRect(),X={left:Y.left+i.left,top:Y.top+i.top,width:i.width,height:i.height,right:Y.left+i.left+i.width,bottom:Y.top+i.top+i.height},U=X.left,G=X.top,Z=u.component.orient(),Q={top:0,left:0,right:0,bottom:0},q="..",$=l.cache.thresholdCustomPoints=Od(l.cache.thresholdCustomPoints,[]),J=t(f,l);g.attr("transform","translate("+i.left+","+i.top+")");var et=Qt(g,"g",[f],".","class","thresline-"+n),tt=l.container.selectAll("g.plotareaBorder-property").node(),rt=tt.border||tt["border-"+Z],nt=tt.border||tt["border-"+qa(Z)],it=rt&&rt.clr!==Pl?rt.size:0,ot=nt&&nt.clr!==Pl?nt.size:0,lt=it+ot,st=Qt(et,"path",null!=b&&C?w:[],".","class","marker");st.attr("d",function(e,t){return _(a(b.symbol)?b.symbol[t]:b.symbol)(10*I[t])}).style("stroke-width",function(e,t){return j[t]||2}).style("stroke",function(e,t){return(a(b.strokeColor)?b.strokeColor[t]:b.strokeColor)||O[t]}).attr("fill",function(e,t){var r=a(b.fillColor)?b.fillColor[t]:b.fillColor;return r||(null===r?O[t]:"white")}),st.attr("transform",function(e,t){var a=j[t]/2,r=Rl(this).node().getBBox();R[t]=r.width+it;var o="bottom"==Z||"top"==Z?p(e)+v:"left"==Z?a+it+r.width/2:i.width-(a+it+r.width/2),s="bottom"==Z?i.height-r.width/2-it-a:"top"==Z?a+r.height/2+it:p(e)+v;return V&&$.push({x:o-R[t]/2,y:s-R[t]/2,width:R[t],height:R[t],color:O[t],text:k[t],type:"threshold-marker",triggerOffset:J,size:I[t],marker:b,point:h[t],formattedValue:gn(N[N.datatype],h[t],N.datatype,l,"threshold",!1),thresholdType:c,columnIndex:W,columnInfo:N,yColumnIndex:n,itemIndex:t,events:f.events||{}}),"translate("+o+","+s+")"});var ct=Qt(et,"line",w);ct.attr("x1",function(e,t){return"bottom"==Z||"top"==Z?p(e)+v:"left"==Z?(R[t]||0)+j[t]:ot}).attr("y1",function(e,t){return"bottom"==Z?it:"top"==Z?(R[t]||0)+j[t]:p(e)+v}).attr("x2",function(e,t){return"bottom"==Z||"top"==Z?p(e)+v:"left"==Z?i.width-ot:i.width-j[t]-(R[t]||0)}).attr("y2",function(e,t){return"bottom"==Z?i.height-j[t]-(R[t]||0):"top"==Z?i.height-ot:p(e)+v}).attr("stroke",function(e,t){return"    "+O[t]}).attr("stroke-width",function(e,t){return M[t]+"px"}).attr("shaperendering","crispedges").attr("stroke-dasharray",function(e,t){return P(D[t],M[t])});var dt=Qt(et,"text",null!=m?w:[]);dt.text(function(e,t){return K(k[t])}).attr("x",function(e,t){var a=10*I[t]+S[c]+(j[t]||2),r="x"==c&&!s||"y"==c&&s?-So.axis.threshold.textAlign(z[t]||"right",c,i,s,a,Z):So.axis.threshold.textAlign(z[t]||"right",c,i,s,a,Z);return r}).attr("y",function(e){var t="x"==c&&!s||"y"==c&&s?p(e)+v:p(e)+v;return t-5}).attr("transform","x"==c&&!s||"y"==c&&s?"rotate(-90)":"rotate(0)").styles({"font-family":function(e,t){return B[t]=(a(m.fontFamily)?m.fontFamily[t]:m.fontFamily)||o.chart.fontFamily||o.canvas.fontFamily||dd.fontFamily,B[t]},"font-size":function(e,t){return H[t]=So.utils.getVal((r(m.fontSize)||a(m.fontSize)?m.fontSize[t]:m.fontSize)||o.chart.fontSize||o.canvas.fontSize),H[t]+"px"},fill:function(e,t){return(a(m.fontColor)?m.fontColor[t]:m.fontColor)||o.chart.fontColor||o.canvas.fontColor||dd.fontColor},"font-weight":function(e,t){return(a(m.fontWeight)?m.fontWeight[t]:m.fontWeight)||o.chart.fontWeight||o.canvas.fontWeight||dd.fontWeight},"font-style":function(e,t){return(a(m.fontStyle)?m.fontStyle[t]:m.fontStyle)||o.chart.fontStyle||o.canvas.fontStyle||dd.fontStyle},"text-Anchor":function(e,t){return"left"==Z||"bottom"==Z?"center"==z[t]?"middle":"right"==z[t]?"end":"start":"center"==z[t]?"middle":"right"==z[t]?"start":"end"}}).each(function(e,t){var a,r=K(k[t]),n=10*I[t],o=Ld.getTextWidth(r,H[t],B[t])+n,l="top"===Z||"bottom"===Z?i.height:i.width;o>l&&(a=hl(o-l,n)+lt,X.left=U+a,X.top=G+a,qt(this,this.textContent,this.getBoundingClientRect(),X,po(Z),q,Q))})})}function t(e,t){return Od(kd(e,"events.triggerOffset"),on(t,t.chartTypes[0].value))}var n,i,o,l,s,c,d,u,h;return e.parentObj=function(t){return arguments.length?(d=t,e):d},e.getMetaInfo=function(e){return{itemIndex:e.itemIndex,point:e.point,data:Cd(l.systemConf.metadata.columns[e.columnIndex],{columnindex:e.columnIndex})}},e},So.axis.threshold.range=function(){function e(e){e.each(function(e){var o=Rl(this);r=i.chartObj(),t=i.thresholdIndex(),n=i.type();\nvar l=r.systemConf,s=e.label;s=yo(s,at(r.userdata,"chart.axes."+n+"axis"+("x"===n?"":"."+t)+".threshold.range.label",!0));var c=[],d=[],u=[],h=[],f=[],g=[],p=[],y=[],v=[],m=[],b=[],C=[],w=r.container.node().getBoundingClientRect(),k=r.plotarea,O={left:w.left+k.left,top:w.top+k.top,width:k.width,height:k.height,right:w.left+k.left+k.width,bottom:w.top+k.top+k.height},S=r.axes[n].orient,A=i.axisObj().component.orient(),E={top:0,left:0,right:0,bottom:0},L="..",z=Qt(o,"g",e.show?[e]:[],".","class","thresholdrangegroup-"+n),D=r.axes.rotated;if(e.show){var M,j=r.dataset.getDataType(n,t),R=r.dataset.getColumn(n,t);j==_s&&(M=null!=R.time?R.time:null);var I=[],H=[],B={x:2,y:2},F=l.chart.axes.xaxis.axisline,V=l.chart.axes.yaxis[t].axisline;ut(F)&&F.show&&(B.x+=+F.strokeWidth-1),ut(V)&&V.show&&(B.y+=+V.strokeWidth-1);var N=D?r.axes.y.groups[t].scale:r.axes.x.scale,_=D?r.axes.x.scale:r.axes.y.groups[t].scale,W=r.dataObject.noofBarEnabledSeries,Y=null!=N.bandwidth&&W?N.bandwidth():0,X=null!=_.bandwidth&&W?_.bandwidth():0,U=null==N.bandwidth||W?0:N.bandwidth()/2,G=null==_.bandwidth||W?0:_.bandwidth()/2,Z=0,Q=("x"==n&&!D||"y"==n&&D?N:_).domain(),q=Q.length-1;e.values.map(function(t,n){H=null!=t&&""!=t?t.map(function(e){return j==_s?mn(e,null,M).getTime():e}):null,H&&!(H[0]>Q[q]||H[1]<Q[0])&&(H[0]=ul(H[0],Q[0]),H[1]=hl(H[1],Q[q]),I[Z]=H,c[Z]=(a(e.fillColor)?e.fillColor[n]:e.fillColor)||"grey",d[Z]=lt(a(e.fillOpacity)?e.fillOpacity[n]:e.fillOpacity,"0.2"),u[Z]=(a(e.strokeColor)?e.strokeColor[n]:e.strokeColor)||"black",h[Z]=a(e.dashStyle)?e.dashStyle[n]:e.dashStyle,f[Z]=a(e.lineCap)?e.lineCap[n]:e.lineCap,g[Z]=(a(e.label.hAlign)?e.label.hAlign[n]:e.label.hAlign)||"center",p[Z]=x(kd(e,"label.text["+n+"]")||"",e.values,R,r),y[Z]=a(s.fontColor)?s.fontColor[n]:s.fontColor,C[Z]=a(s.fontStyle)?s.fontStyle[n]:s.fontStyle,m[Z]=a(s.fontFamily)?s.fontFamily[n]:s.fontFamily,b[Z]=a(s.fontWeight)?s.fontWeight[n]:s.fontWeight,v[Z]=s.fontSize instanceof Function||a(s.fontSize)?s.fontSize[n]:s.fontSize,Z++)});var $=Qt(z,"g",I,".","class","rangebox-"+t);$.append("rect"),$.append("text");var J=$.select("rect"),et=$.select("text");J.attrs({x:function(e){return"x"==n&&!D||"y"==n&&D?N(e[0])+U+r.plotarea.left:r.plotarea.left+B[n]},y:function(e){return"x"==n&&!D||"y"==n&&D?r.plotarea.top:_(e[1])+G+r.plotarea.top},width:function(e){return"x"==n&&!D||"y"==n&&D?N(e[1])-N(e[0])+Y:r.plotarea.width-B[n]},height:function(e){return"x"==n&&!D||"y"==n&&D?r.plotarea.height-B[n]:_(e[0])-_(e[1])+X}}).styles({fill:function(e,t){return c[t]},"fill-opacity":function(e,t){return d[t]},stroke:function(e,t){return u[t]},"stroke-dasharray":function(e,t){return P(h[t])},"stroke-linecap":function(e,t){return T(f[t],h[t])}}),et.attrs({transform:function(e,t){var a=J.nodes()[t].getBBox(),i=So.axis.threshold.textAlign(g[t],n,r.plotarea,D,B[n],S);return"x"==n&&!D||"y"==n&&D?"translate("+(a.x+a.width/2)+","+(i+r.plotarea.top)+") rotate(-90)":"translate("+(i+r.plotarea.left)+","+(a.y+a.height/2)+")"},dy:"0.3em"}).styles({"font-family":function(e,t){return m[t]||l.chart.fontFamily||l.canvas.fontFamily||dd.fontFamily},"font-size":function(e,t){return So.utils.getVal(v[t]||l.chart.fontSize||l.canvas.fontSize)+"px"},fill:function(e,t){return y[t]||l.chart.fontColor||l.canvas.fontColor||dd.fontColor},"font-weight":function(e,t){return b[t]||l.chart.fontWeight||l.canvas.fontWeight||dd.fontWeight},"font-style":function(e,t){return C[t]||l.chart.fontStyle||l.canvas.fontStyle||dd.fontStyle},"text-Anchor":function(e,t){return"center"==g[t]?"middle":"right"==g[t]?"end":"start"}}).text(function(e,t){return K(p[t])}).each(function(){qt(this,this.textContent,this.getBoundingClientRect(),O,po(A),L,E)})}})}var t,r,n,i;return e.parentObj=function(t){return arguments.length?(i=t,e):i},e},So.axis.threshold.overlay=function(e,t,a){var r=e.dataObject.getAxisRotated();if("discrete"==t){var n=a.values.slice(0),i=a.overlayRange,o=a.defaultColor;return n.sort("below"==i||"equalandbelow"==i?is:os),function(e,t,r,l){if(null==a.values||0==a.length)return l;for(var s=0;s<n.length;s++){var c,d=n[s];switch(i){case"equal":c=r===d;break;case"equalandbelow":c=d>=r;break;case"equalandabove":c=r>=d;break;case"below":c=d>r;break;default:c=r>d}if(c){var u=a.values.indexOf(d);return null==t||null==t[u]?o?l:"black":t[u]}}return l}}return"continous"==t?function(t,a,n,i){var o="x"==i?e.axes.x.scale:e.axes.y.groups[0].scale,l=n,s=a.values;if(null==s||0==s.length)return t;var c=s.slice(),d=a.color,u=a.overlayRange,h=a.defaultColor;u&&(u=u.replace("equaland",""));var f,g=e.dataset.getDataType(i,n);if("time"==g){var p=e.dataset.getColumn(i,n);f=null!=p.time?p.time:null}c=c.map(function(e){return"time"==g?mn(e,null,f).getTime():e}),c.sort("x"==i&&!r||"y"==i&&r?function(e,t){return t>e?-1:e>t?1:0}:function(e,t){return e>t?-1:t>e?1:0});var y=o.domain().length,v="x"==i&&!r||"y"==i&&r?o(o.domain()[y-1])-o(o.domain()[0]):o(o.domain()[0])-o(o.domain()[y-1]),m=[];m.push(0);for(var x=0;x<c.length;x++){var b=o(c[x])+(null!=o.bandwidth?o.bandwidth()/2:0),C=b/v*100;100>C&&(m.push(C),m.push(C))}m.push(100);var w=[];("y"==i&&"below"==u&&!r||"x"==i&&"above"==u&&!r||"y"==i&&"above"==u&&r||"x"==i&&"below"==u&&r)&&w.push(t);for(var x=0;x<c.length;x++){var n=s.indexOf(c[x]);w.push(null==d||null==d[n]?h?t:"black":d[n])}("y"==i&&"above"==u&&!r||"x"==i&&"below"==u&&!r||"y"==i&&"below"==u&&r||"x"==i&&"above"==u&&r)&&w.push(t);for(var k=[],x=0;x<m.length;x++){var O={};O.offset=m[x]+"%",O.color=x%2==0?w[x/2]:w[(x-1)/2],k.push(O)}var S={};S.type="thresholdLinear",S.options={};var A=S.options,P=r?e.axes.y.groups[0].scale:e.axes.x.scale,T=r?e.axes.x.scale:e.axes.y.groups[0].scale,E="x"==i&&!r||"y"==i&&r;A.x1=E?P(P.domain()[0]):0,A.x2=E?P(P.domain()[y-1]):0,A.y1=E?0:T(T.domain()[y-1]),A.y2=E?0:T(T.domain()[0]),A.values=c,A.color=w,A.seriesclr=t,A.overlayRange=u;var L=(E?P:T).domain();A.scale=L[0]+"_"+L[1];var D=e.plot.renderer.mode,M=e.chartTypes[l].name,j=e.systemConf.chart.plot.plotoptions[M],R="line"===M?j.strokeOpacity:j.fillOpacity,I=[A.x1,A.x2,A.y1,A.y2],H=z(S,I,w,R),B={offset:M,chartObj:e,offset:k,dimension:I,color:w},F="svg"==D?fd.get(yd,"svgGradientFill",H,B):fd.get(fu,"canvasGradientFill",H,B);return"svg"==D?"url("+e.defsLocation+"#"+F+")":F}:void 0},So.annotation=function(){},So.annotation.draw=function(e,t){"use strict";var a=e.systemConf.notes,r=ut(a)&&a.enabled===!0;if(r){var n=e.dataObject.isPolarAxisCategory,i=Od(a.chartValues,[]);if(i.forEach(function(t){So.annotation.addNotes(e,{coordinate:[t.x,t.y],conf:t})}),e.isAxisCategory||n||e.isGeoMap)for(var o=0,l=e.seriesdata.length;l>o;o++){var s=e.renderer[o];"image"===e.plot.renderer.mode&&Ko.setRendererProp(e,s,e.seriesdata,o,o,{image:!0});var c,d,u=e.rendererConf[o].params,h=u.xscale,f=u.yscale,g=u.stacked,p=u.datasetIndex,y=u.axisrotated,v=u.yaxiscolumnorder,m=e.chartTypes[p].value;if(e.isGeoMap||(d=e.dataset.getDataType("x")==Ns?h.domain():e.dataObject.getCategories("x")),Vr(m)){var x=kr(e.rendererConf[p],p);c=function(t,a,r){return[e.dataObject.getTransRectValue("x",t,a,r,x),e.dataObject.getTransRectValue("y",t,a,r,x)]}}else c=function(t){var a=n?[e.plotarea_approx.x,e.plotarea_approx.y]:[0,0];return[e.dataObject.getXYvalue(y,g,h,f,v,t,"x")+a[0],e.dataObject.getXYvalue(y,g,h,f,v,t,"y")+a[1]]};t=So.annotation.preprocessAnnotations(e.seriesdata,p,c,t,e,u,d)}t.forEach(function(t){So.annotation.addNotes(e,t)})}return t=[]},So.annotation.addNotes=function(e,t){var a,r,i,o,l=e.systemConf.notes,s=e.plotarea,c=e.canvasarea,d=c.width,u=c.height,h=t.coordinate,f=t.basedOn||"chart",g=t.data,p=t.conf||{},y=t.disabled,v=Od(p.type,l.type,"stickyNote"),m="block"===f||"plot"===f?s:c,x=p.overflow||l.overflow||"scroll";"block"===f&&(i="scroll"===x?"auto":"hidden",a=ka(l.maxWidth||"100%",m.width)),"block"===f&&(o="scroll"===x?"auto":"hidden",r=ka(l.maxHeight||"10%",m.height));var b="plot"==f?n(g):"block"==f?Z(p,""):n(h);b="plot"!=f&&null!=p.id?p.id:f+b.replace(/[`~!@#$%^&*( )_|+\\-=?;:\'",.<>\\{\\}\\[\\]\\\\\\/]/gi,""),p.id=b;var C=Qt(e.notes,"div",[1],"#","id",f);C.styles({width:"0",height:"0"});var w=Qt(C,"div",[t],"#","id",b);w.styles({display:y?Al:null,position:"absolute",left:"0",top:"0","overflow-x":i,"overflow-y":o,"max-width":ut(a)?a+Sl:El,"max-height":ut(r)?r+Sl:El});var k=So.annotation["stickyNote"===v?"stickyNote":"customNote"](),O=Cd(l.options[v],t.conf||{},!0);if(k.chartObj(e).conf(O),ta(w,[O,e.systemConf.canvas,dd],!0),w.call(k),!y){var S=w.node(),A="stickyNote"===v?ul(parseFloat(w.selectAll(".head").style("width")),parseFloat(w.selectAll(".body").style("width"))):0,P="stickyNote"===v?parseFloat(w.selectAll(".head").style("height"))+parseFloat(w.selectAll(".body").style("height")):0;h=h.map(function(t,a){var r="plot"===f?t+e.plotarea[0==a?mc:Cc]:it(t,e,r,S);return isNaN(+r)?ka(t,0==a?d:u,0):r});var T="plot"===f||"block"===f?p.transform:null;h=it(T,e,p,S,h)||h,k.coordinate(h),h=xo(h[0],h[1],A,P,d,u),w.styles({left:h[0]+Sl,top:h[1]+Sl});var E="plot"==f?g:b,L=bo(l,E,f);return-1==L&&mo(l,E,"",t.coordinate,f),w}},So.annotation.preprocessAnnotations=function(e,t,a,r,i,o,l){function s(e,t,a,n){r.push({coordinate:e,data:t,conf:a,disabled:n,basedOn:"plot"})}if(!i.destroying){var c=i.systemConf.notes;if(!ut(c)||c.enabled===!1)return r;var d=c.plotValues,u=i.isAxisCategory,h=i.isNonAxisMultiSeriesCategory,f=i.dataset,g=o.stacked,p=i.plotarea,y=o.yaxiscolumnorder,v=e[t],m=Sd.pointInRectangle,x=i.dataObject.isHierarchy?v:v.data,b=(u||h)&&e.length>1?v.seriesname:null,C=i.chartTypes[t].name,w=i.dataObject.seriesNames||(i.dataObject.seriesNames=i.seriesdata.map(function(e){return e.seriesname})),k=u&&e.length>1?d.filter(function(e){var t=e.data[e.data.length-1];return b==t||-1==w.indexOf(t)}):d;return k.forEach(function(t){for(var r=!1,o=t.data,c=0,d=u?x.length:1;d>c&&!r;c++)for(var k=0,O=x[c].length;O>k&&!r;k++){var S=x[c][k],A=vo(S,b);if(n(A)==n(o)){r=!0;var P=a(S,c,k),T=u&&!m(P,p)?!0:u||h?v.disabled:S.disabled;T=T||!ja(f.getClr(S),i),s(P,A,t,T)}}if(u&&!r&&("bar"===C?-1!=l.indexOf(f.getX(o)):!0)){r=!0;var S=vo(o);g&&(S.y=f.getY(o,y),S.y0=0);var P=a(S,0,k),T=u&&!m(P,p)?!0:u&&e.length>1&&-1==w.indexOf(o[o.length-1])?!1:v.disabled;s(P,S,t,T)}if(!r&&"sunburst"===C){var E=[b,v.value];n(E)===n(o)&&s(a(v),E,t,v.disabled)}}),r}},So.annotation.addBlockAnnotations=function(e){var t=e.systemConf.notes;if(ut(t)&&t.enabled!==!1){{So.setDefaultOptions("notes",e.systemConf,e.globalProp)}t=e.systemConf.notes;var a,r,n=t.blockValues,i=e.plotarea,o=ka(t.maxWidth||"100%",i.width),l=ka(t.maxHeight||"10%",i.height),s=i.width,c=i.height,d=i.left,u=i.top,h=i.bottom;n.forEach(function(n){var f=n.hAlign,g=n.vAlign,p=n.overflow||t.overflow||"scroll",y=f===xc,v=f===mc,m=g===Cc,x=g===bc;if(!(r&&m||a&&x)){{var b=function(e,t,a){var r=a.getBoundingClientRect(),n=y?d+s:v?d:d+s/2,i=y?r.width:v?0:r.width/2;return ul(n-i,0)},C=function(e,t,a){var r=a.getBoundingClientRect(),n=m?u:u+c,i=m?0:r.height;return n-i},w=So.annotation.addNotes(e,{coordinate:[b,C],conf:n,basedOn:"block"}),k=w.node(),O=k.getBoundingClientRect(),S=O.height;O.width}"fire"===p&&(k.scrollHeight>l||k.scrollWidth>o)?w.remove():(i.height=c-S,m?i.top=u+S:x&&(i.bottom=h+S)),r=r||m,a=a||x}})}},So.annotation.stickyNote=function(){function e(e){e.each(function(e){var n=Rl(this),i=t.systemConf.notes,o=t.canvasarea.width,l=t.canvasarea.height,s=t.notes,c=e.basedOn||"chart",d=(e.data,e.coordinate),u="string"==typeof d[0]&&d[0].indexOf("%")>-1,h="string"==typeof d[1]&&d[1].indexOf("%")>-1,f=a.text,g=s.selectAll(".head").size(),p=a.color,y="open"===a.mode,v=lt(a.bodyWidth,100),m=lt(a.bodyHeight,100),x=lt(a.headWidth,15),b=lt(a.headHeight,15),C=y?0:1;p=p instanceof Array?p[g%p.length]:p;as().on("drag",function(){if(!d3.event.defaultPrevented){var e=Rl(this.parentNode),t=parseFloat(e.style("left"))+d3.event.x,a=parseFloat(e.style("top"))+d3.event.y,n=ul(C%2!=0?0:v,x),s=(C%2!=0?0:m)+b;t=t>o-n?o-n:0>t?0:t,a=a>l-s?l-s:0>a?0:a,r[0]=t,r[1]=a;var d=t+Sl,f=a+Sl;if(e.styles({left:d,top:f}),"plot"!=c){var g=e.attr("id"),p=bo(i,g,c);-1!=p&&(i.chartValues[p].x=u?t/o*100+"%":t,i.chartValues[p].y=h?a/l*100+"%":a)}}});n.attr("class","group").styles({width:0,height:0,"z-index":2});var w=Qt(s,"textarea",[1]);w.styles({width:v+Sl,height:m+Sl,position:"absolute","border-color":Pl,"border-radius":(a.bodyBorderRadius||0)+Sl,"background-color":Pl,overflow:"hidden",display:Al,resize:Al,"z-index":2,outline:Al}).on("blur",function(){var e=w.attr("eleID");if(w.style("display",Al),null!=e){var t=Rl("#"+e),a=t.selectAll(".body");a.style("color",null),t.style("z-index",2)}}).on("input",function(){var e=Rl(this);if(e.style("display")!==Al){var t=Rl("#"+e.attr("eleID")),a=t.selectAll(".body"),r=t.attr("id"),n=w.node().value,o=t.datum(),l=o.basedOn||"chart",s=o.data;a.text(n);var c="plot"==l?s:r,u=bo(i,c,l);-1==u?mo(i,c,n,d,l):i[l+"Values"][u].text=n}}).text(f);var k=Qt(n,"div",[1],".","class","head");k.attr("customColor")||k.style("background-color",p).attr("customColor",p),k.styles({width:x+Sl,height:b+Sl,border:a.border,"border-radius":(a.headBorderRadius||0)+Sl,"z-index":"auto"});var O=function(){if(!d3.event.defaultPrevented){var e=C%2==0,t=Rl(this.nextSibling),a=Rl(this.parentNode);if(w.on("blur")(),e)a.transition().delay(250).duration(0).styles({left:r[0]+Sl,top:r[1]+Sl});else{var n=xo(parseFloat(a.style("left")),parseFloat(a.style("top")),v,b+m,o,l);a.styles({left:n[0]+Sl,top:n[1]+Sl})}t.style("color",null).transition().ease(Nl).styles({width:e?0+Sl:v+Sl,height:e?0+Sl:m+Sl,display:e?null:"block"}),t.transition().delay(250).style("display",e?Al:null),s.selectAll(".group").style("z-index",1),a.style("z-index",2),C++}},S={click:O},A={tap:O};cn(k,S,A);var P=n.selectAll("div.body").empty()?{"background-color":p}:{},T=Qt(n,"div",[1],".","class","body");T.styles({width:y?v+Sl:"0",height:y?m+Sl:"0",display:y?null:Al,border:a.border,overflow:"hidden","box-shadow":a.shadow,"border-radius":(a.bodyBorderRadius||0)+Sl,"z-index":"auto"}).styles(P).text(f);var O=function(){var e=Rl(this),t=Rl(this.parentNode);w.on("blur")(),w.styles({display:null,left:t.style("left"),top:parseFloat(t.style("top"))+b+Sl,color:t.style("color"),"font-size":t.style("font-size"),"font-family":t.style("font-family"),"font-weight":t.style("font-weight"),"font-style":t.style("font-style")}).attr("eleID",t.attr("id")),w.node().value=e.text(),w.node().focus(),e.style("color",Pl),s.selectAll(".group").style("z-index",1),t.style("z-index",2),w.style("z-index",3)},S={click:O},A={tap:O};cn(T,S,A)})}var t,a,r;return e.chartObj=function(a){return arguments.length?(t=a,e):t},e.conf=function(t){return arguments.length?(a=t,e):a},e.coordinate=function(t){return arguments.length?(r=t,e):r},e},So.annotation.customNote=function(){function e(e){e.each(function(e){Rl(this).html(it(t.htmlEl,r,e.conf))})}var t,a,r;return e.coordinate=function(t){return arguments.length?(a=t,e):a},e.conf=function(a){return arguments.length?(t=a,e):t},e.chartObj=function(t){return arguments.length?(r=t,e):r},e},So.events.zoom=function(e,t,a){"use strict";function r(t,r,n,i){a.chart.axes[t+"axis"].disableBaseValue=!0;var o=y[t]={};i==Ns?o.categories=n:(o.minRange=n[0],o.maxRange=n[1]),e.updateScale(p[r],t,n)}function n(t,a){return t=it(t,e,u),t=null!=t?t:a}function i(e){return{x:hl(ul(e[0]-m.left,0),m.width),y:hl(ul(e[1]-m.top,0),m.height)}}var o,l,s,c,d,u,h=!1,f={},g=e.svg,p=a.seriesdata.chartdata,y=a.chart.zoom,v=2,m=e.plotarea,x=y.selectionArea,b=y.resetButton,C=b.border,w=b.shadow,k=b.label,O=y.type,S=C.show,A=S?C.radius:0,E=null;w.show&&(E=fd.get(vd,"dropShadow",w,{chartObj:e}),E=E?"url("+e.defsLocation+"#"+E+")":null);var L=y.events||{};return f.zmInit=function(t){m=e.plotarea,s=Qt(g.selectAll(".seriesholder"),"rect",[1],".","class","zmarea"),s.styles({fill:x.fillColor||"grey","fill-opacity":x.fillOpacity});var r=Qt(e.staticPaneSVG.select(".eventgroup"),"rect",[1],".","class","zmbtn"),i=P(C.style,C.size);r.attrs({rx:A,ry:A,filter:E}).styles({fill:b.fillColor,"fill-opacity":b.fillOpacity,stroke:C.color,"stroke-width":S?C.size:0,"stroke-dasharray":i,"stroke-linecap":T(C.lineCap,i),cursor:Tl});var o={click:f.reset},l={tap:f.reset};cn(r,o,l);var h=Qt(e.staticPaneSVG.select(".eventgroup"),"text",[1],".","class","zmbtn");h.attr("dy","0.9em").style("pointer-events",Al).text(k.text),ta(h,[k,a.chart,a.canvas,{fontColor:"white",fontSize:11},dd]);var p=h.node().getBBox();r.attrs({width:p.width+k.marginLeft+k.marginRight,height:p.height+k.marginTop+k.marginBottom}),u=r.node().getBBox(),c=n(b.x,m.left+m.width-u.width),d=n(b.y,10),r.attrs({x:c,y:d}),h.attrs({x:c+k.marginLeft,y:d+k.marginTop}),t||(s.style("visibility","hidden"),r.style("visibility","hidden"),h.style("visibility","hidden"))},f.zoomInitialized=!1,f.zmStart=function(a){O=y.type,h=!0,o=i(a);var r={};s.style("visibility","visible");var n=O.indexOf("x")>-1&&!t||O.indexOf("y")>-1&&t,l=O.indexOf("y")>-1&&!t||O.indexOf("x")>-1&&t;n?r.x=o.x:r.width=m.width,l?r.y=o.y:r.height=m.height,s.attrs(r),f.zoomInitialized=!0,it(!0,L.zoomstart,o,{x:y.x,y:y.y},e)},f.zmMove=function(a){if(O=y.type,h){var r=i(a),n={},c=O.indexOf("x")>-1&&!t||O.indexOf("y")>-1&&t,d=O.indexOf("y")>-1&&!t||O.indexOf("x")>-1&&t;ko(d3.event)&&(o=i(Co(e.eventHandler.trackerElement.node(),0)),r=i(Co(e.eventHandler.trackerElement.node(),1))),l=r,c&&(n.x=(r.x<o.x?r:o).x,n.width=fl(r.x-o.x)),d&&(n.y=(r.y<o.y?r:o).y,n.height=fl(r.y-o.y)),s.attrs(n)}it(!0,L.zoom,r,{x:y.x,y:y.y},e)},f.zmEnd=function(e){return f.zoomInitialized?(ko(d3.event)||(l=i(e)),s.attrs({height:0,width:0}).style("visibility","hidden"),h=!1,f.zoomInitialized=!1,{startPt:o,endPt:l}):!1},f.zoomed=function(n,i,o,s){O=y.type;var c=null!=i,d=t?"y":"x",u=t?"x":"y",h=O.indexOf("x")>-1&&(c||fl(n.startPt[d]-n.endPt[d])>v),g=O.indexOf("y")>-1&&(c||fl(n.startPt[u]-n.endPt[u])>v),p=O.indexOf("x")>-1&&(c?o[0]!=o[1]:n.startPt[d]!=n.endPt[d])||O.indexOf("y")>-1&&(c?s[0]!=s[1]:n.startPt[u]!=n.endPt[u]);if(p){if(Ir(e,a.chart.axes.events,null,"init"),h){var m=e.dataset.getDataType("x");if(!c){var x=e.axes.x.scale,b=a.chart.axes.xaxis.reversed,C=So.scale.invert(m,n.startPt,x,t,"x",b),w=So.scale.invert(m,n.endPt,x,t,"x",b);if(C>w){var k=C;C=w,w=k}o=m==Ns?x.domain().slice(C,w+1,0):[C,w]}r("x",c?i:0,o,m)}if(g)for(var S=c?i:0,A=c?i+1:e.axes.y.groups.length;A>S;S++){var m=e.dataset.getDataType("y",S);if(!c){var P=e.axes.y.groups[S].scale,b=a.chart.axes.yaxis[S].reversed,T=So.scale.invert(m,n.startPt,P,t,"y",b),E=So.scale.invert(m,n.endPt,P,t,"y",b);T>E&&(T=T+E-(E=T)),s=m==Ns?P.domain().slice(T,E+1,0):[T,E]}r("y",S,s,m)}Ir(e,a.chart.axes.events,null,"onreload"),e.updatePlotareaProp(),e.plot.renderer.draw(!0),e.eventHandler.updateParams(e),f.clipMarker||(e.drawPlotareaClippath(),f.clipMarker=!0),e.drawThreshold(!0),e.staticPaneSVG.selectAll(".zmbtn").style("visibility","visible"),it(!0,L.zoomend,l,{x:y.x,y:y.y},e)}},f.reset=function(){if(delete y.x,delete y.y,Ir(e,a.chart.axes.events,null,"init"),O=y.type,O.indexOf("x")>-1&&(a.chart.axes.xaxis.disableBaseValue=!1,e.updateScale(p[0],"x",null)),O.indexOf("y")>-1)for(var t=0;t<e.axes.y.groups.length;t++)a.chart.axes.yaxis.disableBaseValue=!1,e.updateScale(p[t],"y",null);Ir(e,a.chart.axes.events,null,"onreload"),e.updatePlotareaProp(),e.plot.renderer.draw(!0),e.eventHandler.updateParams(e),e.drawThreshold(!0);var r=setInterval(function(){e.chartRendered&&(e.drawPlotareaClippath(),f.clipMarker=!1,clearInterval(r))},10);e.staticPaneSVG.selectAll(".zmbtn").style("visibility","hidden"),it(L.reset,e)},f};var Au=function(){var e=navigator.userAgent,a={};if(e.indexOf("OPR")>0){a.name="Opera",a.jsPrefix="webkit",a.cssPrefix="-webkit-";var r=e.indexOf("OPR/");a.version=t(e.substr(r+4))}else if(e.indexOf("Chrome")>0){a.name="Chrome",a.jsPrefix="webkit",a.cssPrefix="-webkit-";var r=e.indexOf("Chrome/");a.version=t(e.substr(r+7))}else if(e.indexOf("Safari")>0){a.name="Safari",a.jsPrefix="webkit",a.cssPrefix="-webkit-";var r=e.indexOf("Version/");a.version=t(e.substr(r+8))}else if(e.indexOf("Firefox")>0){a.name="Firefox",a.jsPrefix="Moz",a.cssPrefix="-moz-";var r=e.indexOf("Firefox/");a.version=t(e.substr(r+8))}else if(e.indexOf("MSIE")>0){a.name="Internet Explorer",a.jsPrefix="ms",a.cssPrefix="-ms-";var r=e.indexOf("MSIE");a.version=t(e.substr(r+5))}else a=void 0;return a},Pu=function(e,t){var a=getComputedStyle(e),r=Au();for(var n in t)if(t.hasOwnProperty(n))if(n in a)e.style[n]=t[n];else if(void 0!=r){var i=r.jsPrefix+n.charAt(0).toUpperCase()+n.slice(1);e.style[i]=t[n]}},Tu=function(e,t){var a={type:"zBars",scale:1,duration:1.2},r=document.getElementById("ZCloader");Tu.style||(r=document.createElement("style"),r.setAttribute("id","ZCloader"),document.head.appendChild(r),Tu.style=!0);for(var n in t)t.hasOwnProperty(n)&&(a[n]=t[n]);var i=a.colors||["rgb(204, 32, 50)","rgb(24, 153, 74)","rgb(1, 115, 178)","rgb(253, 208, 25)"],o=i[0%i.length],l=i[1%i.length],s=i[2%i.length],c=i[3%i.length],d=Au(),u="";if(void 0===d?(d={},d.cssPrefix=""):"Internet Explorer"===d.name&&d.version<10&&(a.type="wheel"),!e.loader){var h=document.createElement("div");if("zBlocks"==a.type){if(!Tu.zBlocks){var u="\\n@"+d.cssPrefix+"keyframes "+a.type+" {";u+="0% { left:0px; top:0px; "+d.cssPrefix+"transform:rotate(0deg) scale(1)}",u+="25% { left:40px; top:0px; "+d.cssPrefix+"transform:rotate(90deg) scale(0.5)}",u+="50% { left:40px; top:40px; "+d.cssPrefix+"transform:rotate(180deg) scale(1.0)}",u+="75% { left:0px; top:40px; "+d.cssPrefix+"transform:rotate(270deg) scale(0.5)}",u+="100% { left:0px; top:0px; "+d.cssPrefix+"transform:rotate(360deg)scale(1)} }\\n",r.innerHTML+=u,Tu.zBlocks=!0}Pu(h,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale("+a.scale+")"});var f=document.createElement("div");f.innerHTML="&nbsp",h.appendChild(f),Pu(f,{backgroundColor:o,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var g=document.createElement("div");g.innerHTML="&nbsp",h.appendChild(g),Pu(g,{backgroundColor:l,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+a.duration/4*1+"s"});var p=document.createElement("div");p.innerHTML="&nbsp",h.appendChild(p),Pu(p,{backgroundColor:s,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+a.duration/4*2+"s"});var y=document.createElement("div");y.innerHTML="&nbsp",h.appendChild(y),Pu(y,{backgroundColor:c,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+a.duration/4*3+"s"}),e.loader=!0}else if("zCircle1"==a.type){if(!Tu.zCircle1){var u="\\n@"+d.cssPrefix+"keyframes "+a.type+" { ";u+="0% ,25%, 50%, 75%, 100%{ "+d.cssPrefix+"transform: scale(0.0);  } ",u+="12.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+o+";}",u+="37.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+l+";}",u+="62.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+s+";}",u+="87.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+c+";} }\\n",r.innerHTML+=u,Tu.zCircle1=!0}Pu(h,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale("+a.scale+")"});var v=document.createElement("div");v.innerHTML="&nbsp",h.appendChild(v),Pu(v,{width:"100%",height:"100%",borderRadius:"50%",opacity:"0.6",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}),e.loader=!0}else if("zBars"==a.type){if(!Tu.zBars){var u="\\n@"+d.cssPrefix+"keyframes "+a.type+" { ";u+="0%, 40%, 100% { "+d.cssPrefix+"transform: scaleY(0.4) }",u+="20% { "+d.cssPrefix+"transform: scaleY(1.0) } }\\n",r.innerHTML+=u,Tu.zBars=!0}Pu(h,{display:"inline-block",verticalAlign:"middle",width:"50px",height:"30px",textAlign:"center",fontSize:"10px",transform:"scale("+a.scale+")"});var m=document.createElement("div");m.innerHTML="&nbsp",h.appendChild(m),Pu(m,{backgroundColor:o,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var x=document.createElement("div");x.innerHTML="&nbsp",h.appendChild(x),Pu(x,{backgroundColor:l,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.1)+"s"});var b=document.createElement("div");b.innerHTML="&nbsp",h.appendChild(b),Pu(b,{backgroundColor:s,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.2)+"s"});var C=document.createElement("div");C.innerHTML="&nbsp",h.appendChild(C),Pu(C,{backgroundColor:c,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.3)+"s"}),e.loader=!0}else if("zCircle2"==a.type){if(!Tu.zCircle2){var u="\\n@"+d.cssPrefix+"keyframes "+a.type+" { ";u+="0%, 80%, 100% { "+d.cssPrefix+"transform: scale(0.0) }",u+="40% { "+d.cssPrefix+"transform: scale(1.0) } }\\n",r.innerHTML+=u,Tu.zCircle2=!0}Pu(h,{display:"inline-block",verticalAlign:"middle",width:"72px",height:"18px",textAlign:"center",fontSize:"10px",transform:"scale("+a.scale+")"});var w=document.createElement("div");w.innerHTML="&nbsp",h.appendChild(w),Pu(w,{backgroundColor:o,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var k=document.createElement("div");k.innerHTML="&nbsp",h.appendChild(k),Pu(k,{backgroundColor:l,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.2)+"s"});var O=document.createElement("div");O.innerHTML="&nbsp",h.appendChild(O),Pu(O,{backgroundColor:s,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.4)+"s"});var S=document.createElement("div");S.innerHTML="&nbsp",h.appendChild(S),Pu(S,{backgroundColor:c,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.6)+"s"}),e.loader=!0}else if("zCrossBars"==a.type){if(!Tu.zCrossBars){var u="\\n@"+d.cssPrefix+"keyframes "+a.type+" { ";u+="0%{left:-50%;}",u+="100%{left: 150%;} }\\n",r.innerHTML+=u,Tu.zCrossBars=!0}Pu(h,{display:"inline-block",position:"relative",verticalAlign:"middle",width:"70px",height:"30px",boxSizing:"border-box",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(160, 150, 150)",borderRadius:"8px",overflow:"hidden",transform:"scale("+a.scale+")"});var m=document.createElement("div");m.innerHTML="&nbsp",h.appendChild(m),Pu(m,{backgroundColor:o,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration+"s"});var x=document.createElement("div");x.innerHTML="&nbsp",h.appendChild(x),Pu(x,{backgroundColor:l,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration/100*80+"s"});var b=document.createElement("div");b.innerHTML="&nbsp",h.appendChild(b),Pu(b,{backgroundColor:s,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration/100*60+"s"});var C=document.createElement("div");C.innerHTML="&nbsp",h.appendChild(C),Pu(C,{backgroundColor:c,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration/100*40+"s"}),e.loader=!0}else Pu(h,{display:"inline-block",verticalAlign:"middle",width:"30px",height:"30px",position:"absolute",backgroundImage:"url(\'"+So.imageFilePath+"loader_"+a.type+".gif\')",backgroundSize:"30px 30px",backgroundRepeat:"no-repeat",backgroundPosition:"center"});return h}};Lt(Oo,Fn),Rn.SeriesTypes.set("geoheatmap",Oo),Oo.prototype.render=function(e){var t=this,a=t.geoMap,r=null,n=a.dataObject.getUserMapFeatures(),i=t.plotOptions,o=i.gradients,l=a.systemConf.map,s=ts(["radial","linear"]).has(o.type);t.features=[],t.seriesdataAfterUpdate=t.series.data,t.series.disabled||Tt(t.series.data,function(e){Tt(e,function(e,a){var c=t.geoMap.dataset.getGeo(e);if(n.has(c)){var d=n.get(c),u=r;if(s){var h=cu.getFeatureGradientBBox(d,o.type,t.geoMap.geo.utils.geoPath);u=[h.width,h.height],d.transform={x:h.x,y:h.y}}d.styles={fillColor:t.fillColor(t.index,e,r,r,t.plotOptions.fillOpacity,u),strokeColor:t.strokeColor(t.index,e,Od(i.strokeColor,l.strokeColor),r,i.strokeOpacity,a),strokeWidth:i.strokeWidth,strokeStyle:i.strokeStyle,fillOpacity:Od(i.fillOpacity,1),strokeOpacity:Od(i.strokeOpacity,1)},t.features.push(d)}})}),e?t.mapLayer.update(t.features):t.mapLayer=t.geoMap.addLayer(t.features,r,"series-"+t.index,"feature",l.useMeshOutline)},So.getFormattedValue=gn,So.generateFormatSpecifier=yn,So.appendElement=Qt,So.tempCanvasContext=il,So.getRawColor=Ra,So.setGlobalPatternSVG=g,e.$ZC=typeof e.$ZC===So?e.$ZC:So}(window);'},1626:function(t,e){t.exports="let ZD_DASH_COLOR_LIST = [\n  '#00a3fe',\n  '#1fbe28',\n  '#EF8B00',\n  '#E24B4B',\n  '#e5d569',\n  '#50C1E5',\n  '#9FD376',\n  '#FAD067',\n  '#54D6BC',\n  '#F05368',\n  '#AD92E6',\n  '#F087BB',\n  '#6CC7CD',\n  '#f7a35c',\n  '#8085e9',\n  '#2b908f',\n  '#e4d354',\n  '#D0A549',\n  '#BAC3D2',\n  '#725da2',\n  '#109618',\n  '#D2B48C',\n  '#91e8e1',\n  '#d54852',\n  '#cdd548',\n  '#ff9900',\n  '#45d1ba',\n  '#87CEFA',\n  '#48d54b',\n  '#d58048',\n  '#edc54b',\n  '#F5DEB3',\n  '#659b07',\n  '#6CA0CD',\n  '#629AEC',\n  '#45CEB0',\n  '#FB6C59',\n  '#7cb5ec',\n  '#fa6b5b',\n  '#43AEA8',\n  '#f05d6c',\n  '#f15c80'\n];\n$ZC.setLegendColorPallete('zczdcolor', ZD_DASH_COLOR_LIST); //Zoho chart and zoho desk (zczd)\n\nlet themeOptions = function() {\n  return {\n    canvas: {\n      title: {\n        show: false\n      },\n      subtitle: {\n        show: false\n      },\n      border: {\n        show: false\n      },\n      shadow: {\n        show: false\n      },\n      fontWeight: 'bold',\n      fontStyle: 'normal',\n      fontFamily: 'ProximaNovaLtSemibold',\n      fontSize: 20,\n      fontColor: '#272c32',\n      intelligence: {\n        dataCount: {\n          datalabels: 1000\n        }\n      }\n    },\n    chart: {\n      effects: {\n        choice: 'none',\n        options: {\n          dropShadow: {\n            color: '#CACACA',\n            dy: 3,\n            dx: 3,\n            blur: 1.5\n          }\n        }\n      },\n      axes: {\n        xaxis: {\n          show: true,\n          label: {\n            fontFamily: 'ProximaNovaLtSemibold'\n          },\n          ticklabel: {\n            alignMode: 'auto',\n            maxWidth: '13%',\n            fontFamily: 'ProximaNovaLtSemibold'\n          },\n          axisline: {\n            style: 'shortdash',\n            strokeWidth: 2,\n            color: '#dee0e6'\n          },\n          tickmark: {\n            color: '#FFF'\n          }\n        },\n        yaxis: [\n          {\n            show: true,\n            label: {\n              show: true,\n              text: 'Record Count',\n              marginRight: 10,\n              fontFamily: 'ProximaNovaLtSemibold'\n            },\n            grid: {\n              color: '#e8ebf2',\n              style: 'shortdash',\n              strokeWidth: 1.75\n            },\n            axisline: {\n              show: false\n            },\n            tickmark: {\n              color: '#FFFFFF'\n            },\n            ticklabel: {\n              rotation: 'auto',\n              fontColor: '',\n              fontFamily: 'ProximaNovaLtSemibold',\n              marginRight: 10\n            }\n          }\n        ]\n      }\n    },\n    tooltip: {\n      enabled: true,\n      sharedSeriesInfo: false,\n      fontColor: '#272c32',\n      fontSize: 12,\n      backgroundColor: '#ffffff',\n      opacity: 2,\n      borderWidth: '5 1 1 1',\n      lineHeight: 25,\n      shadow: '2px 2px 2px rgba(0,0,0,0.3)',\n      crosshairColor: '#0f7369'\n    },\n    legend: {\n      colorPallete: {\n        type: 'multicolor',\n        options: {\n          multicolor: 'zczdcolor'\n        }\n      },\n      colorBox: {\n        shape: null\n      },\n      hAlign: 'center',\n      vAlign: 'bottom'\n    },\n    noDataHandler: {\n      text: 'No data available',\n      style: {\n        color: '#575757',\n        fontWeight: 'lighter'\n      }\n    }\n  };\n};\n\n$ZC.setTheme('zczdtheme', themeOptions);\n"},552:function(t,e,n){n(1303)(n(1624))},553:function(t,e,n){n(1303)(n(1625))},554:function(t,e,n){n(1303)(n(1626))}}]);