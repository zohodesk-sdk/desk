(window.deskappJsonp=window.deskappJsonp||[]).push([[56],{1004:function(t,e,o){"use strict";(function(t){var n=o(11),a=o.n(n),r=o(2),i=o.n(r),s=o(12),l=o.n(s),m=o(9),c=o.n(m),d=o(10),u=o.n(d),p=o(13),h=o.n(p),f=o(14),g=o.n(f),C=o(0),_=o.n(C),v=(o(1),o(16)),b=o(1012),I=o(997),E=o(1013),A=o.n(E),y=(o(1014),function(e){function o(t){c()(this,o);var e=h()(this,(o.__proto__||l()(o)).call(this,t));e.state={isEditorLoad:!1};return I.a.apply(e,["editorCallback","handleUpload","handleChange","focusCallback","handleInlineUpload","processPastedFile","handleDropUpload","blurCallback"]),e}return g()(o,e),u()(o,[{key:"componentDidMount",value:function(){var e=this.props,o=e.id,n=e.value,a=e.editorMode,r=void 0===a?"":a,s=e.editorOptions,l=void 0===s?{}:s,m=e.needEditorFocus,c=void 0===m||m,d=e.mode;if(o&&t.ZohoDeskEditor){var u={id:o,content:n,callback:this.editorCallback,imageuploadcallback:this.handleInlineUpload,processPastedFile:this.processPastedFile,handleInlineDropImage:this.handleDropUpload,contentChanged:this.handleChange,focusCallback:this.focusCallback,lineHeight:"Normal",needEditorFocus:c,blurCallback:this.blurCallback,mode:d};u=i()(u,l),ZohoDeskEditor_Init.init(r),ZohoDeskEditor.create&&ZohoDeskEditor.create(u)}}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,o=e.id,n=e.chageEditorContent;e.value;t.isEmptyContent&&editor[o]&&editor[o].setContent(""),t.chageEditorContent!=n&&t.chageEditorContent&&void 0!==n&&editor[o].setContent(t.value)}},{key:"componentWillUnmount",value:function(){var e=this.props.id;t.editor&&t.editor[e]&&delete t.editor[e]}},{key:"focusCallback",value:function(){var t=this.props.onFocus;t&&t()}},{key:"handleChange",value:function(){var t=this.props,e=t.onChange,o=t.id,n=editor[o]?editor[o]:{},a=n.getContent?n.getContent():"";Object(b.a)(n)||(a=""),a="plaintext"===n.mode?Object(b.b)(a):a,e&&e(a.trim(),o)}},{key:"editorCallback",value:function(e){var o=this.props.editorCallback;this.setState({isEditorLoad:!0});var n=this.props.id;t.editor=t.editor||{},editor[n]||(editor[n]=e),o&&o(e)}},{key:"handleInlineUpload",value:function(t,e,o,n,a){this.handleUpload(t).then(function(t){var o={};o[0]={url:t,desc:a},e(o,n)},function(){o(n)})}},{key:"handleDropUpload",value:function(t,e,o){this.handleUpload(t).then(function(t){e(t)},function(){o()})}},{key:"blurCallback",value:function(){var t=this.props.blurCallback;t&&t()}},{key:"processPastedFile",value:function(t,e,o,n){var a=void 0;"blob"===e?a=t:(a=new Blob([t.split(",")[1]],{type:"image/png"})).name="zohokb_"+(new Date).getTime()+Math.floor(1e3*Math.random()+1);this.handleUpload(a).then(function(t){o(t)},function(){n()})}},{key:"handleUpload",value:function(t){var e=this.props.onUpload;try{var o=new FormData;return o.append("file",t),e(o).then(function(t){var e=t.data||{},o=e.data,n=e.orgId,a=o||{},r=a.id,i=a.href;if(r)return i+"?orgId="+n;throw{}},function(t){throw t})}catch(t){return a.a.reject()}}},{key:"render",value:function(){var t=this.props,e=t.id,o=t.dataId,n=this.state.isEditorLoad;return _.a.createElement(v.Container,{className:A.a.editDraft,dataId:o},!n&&_.a.createElement("div",{className:A.a.stencillist9},_.a.createElement("div",{className:A.a.stencilLoading}),_.a.createElement("div",{className:A.a.stencilLoading}),_.a.createElement("div",{className:A.a.stencilLoading}),_.a.createElement("div",{className:A.a.stencilLoading}),_.a.createElement("div",{className:A.a.stencilLoading}),_.a.createElement("div",{className:A.a.stencilLoading})),_.a.createElement(v.Box,{flexible:!0,id:e,dataId:o}))}}]),o}(C.Component));e.a=y}).call(this,o(68))},1007:function(t,e,o){"use strict";var n,a=o(5),r=o.n(a),i=o(12),s=o.n(i),l=o(9),m=o.n(l),c=o(10),d=o.n(c),u=o(13),p=o.n(u),h=o(14),f=o.n(h),g=o(0),C=o.n(g),_=o(1),v=o.n(_),b=o(1042),I=o.n(b),E=o(157),A=o.n(E),y=o(30),k=o(80),w=o.n(k),N=o(72),x=o.n(N),P=o(1026),O=o.n(P),B=o(361),T=o.n(B),L=function(t){function e(t){m()(this,e);var o=p()(this,(e.__proto__||s()(e)).call(this,t));return o.handleSelect=o.handleSelect.bind(o),o.togglePopup=o.togglePopup.bind(o),o}return f()(e,t),d()(e,[{key:"handleSelect",value:function(t,e,o,n){if(void 0!==this.props.onSelect){var a=this.props;(0,a.onSelect)(t,a.entity)}this.props.togglePopup(n)}},{key:"togglePopup",value:function(t){var e=this.props,o=e.togglePopup,n=e.boxPosition;t.stopPropagation(),o(t,n)}},{key:"componentDidUpdate",value:function(t){var e=this.props,o=e.isPopupOpen,n=e.onPopupChange;t.isPopupOpen!==o&&n&&n(o)}},{key:"render",value:function(){var t=this,e=this.props,o=e.theme,n=void 0===o?"white":o,a=e.objValues,r=e.Icnsize,i=e.IcnName,s=(e.removeClose,e.listStyle,e.arrowPosition),l=e.position,m=e.right,c=(e.isScroll,e.widgets),d=void 0===c?[]:c,u=e.onWidgetScroll,p=e.onWidgetSelect,h=e.selectedWidgetId,f=e.arrowRight,g=e.arrowLeft,_=e.size,v=e.left,b=e.isPopupOpen,E=e.isPopupReady,k=e.getTargetRef,w=e.getContainerRef;return r=r||"medium",C.a.createElement("span",{className:A.a.posrel,ref:k,onClick:this.togglePopup},C.a.createElement("span",{className:I.a.defaultSize+" "+A.a.posrel+" "+I.a[n]},C.a.createElement("span",null,C.a.createElement(y.TopbandFontIcon,{name:i,size:r}))),b?C.a.createElement("span",{className:I.a.dropDivPosition},C.a.createElement(x.a,{isAnimate:!0,right:m,left:v,isActive:E,size:_,arrowRight:f,arrowLeft:g,boxPosition:l,getRef:w,arrowPosition:s},a.map(function(e,o){return C.a.createElement(T.a,{autoHover:!0,value:e.name,iconName:e.iconName||null,iconClass:e.iconClass,iconSize:e.size,key:o,id:e.name,onClick:t.handleSelect,dataId:"Delete"===e.name?"delete":"Edit"===e.name?"edit":e.name})}),a.length&&d.length?C.a.createElement(O.a,null):null,d.length?C.a.createElement("div",{className:I.a.widgetList,onScroll:u},d.map(function(t){var e=t.name,o=t.sanitisedName+"_"+t.installationId;return h!=o?C.a.createElement(T.a,{autoHover:!0,value:decodeURIComponent(e),iconName:null,key:o,id:o,onClick:function(){p(o,t)}}):null})):null)):null)}}]),e}(g.Component);L.defaultProps={IcnName:"more1",size:"small"},L.propTypes=(n={IcnName:v.a.string,Icnsize:v.a.string,arrowLeft:v.a.string,arrowPosition:v.a.string,arrowRight:v.a.string,boxPosition:v.a.string,entity:v.a.object,getContainerRef:v.a.func},r()(n,"getContainerRef",v.a.func),r()(n,"getTargetRef",v.a.func),r()(n,"isPopupOpen",v.a.bool),r()(n,"isPopupReady",v.a.bool),r()(n,"isScroll",v.a.bool),r()(n,"left",v.a.string),r()(n,"listStyle",v.a.string),r()(n,"objValues",v.a.array),r()(n,"onPopupChange",v.a.func),r()(n,"onSelect",v.a.func),r()(n,"onWidgetScroll",v.a.func),r()(n,"onWidgetSelect",v.a.func),r()(n,"position",v.a.string),r()(n,"removeClose",v.a.func),r()(n,"right",v.a.string),r()(n,"selectedWidgetId",v.a.string),r()(n,"size",v.a.string),r()(n,"theme",v.a.string),r()(n,"togglePopup",v.a.func),r()(n,"widgets",v.a.array),n),e.a=w()(L)},1012:function(t,e,o){"use strict";function n(t){var e=t&&t.getContent&&t.getContent()||"";return!(""==e||!e.length||"<div><br></div>"==e||!("plaintext"===t.mode||t.doc.body.innerText.trim().length||t.doc.getElementsByTagName("img").length||t.doc.getElementsByTagName("iframe").length))}function a(t){return 1==/<|>|&|"|'|\\/g.test(t)&&(t=(t=(t=(t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/\\/g,"&#x5c;")).replace(/'/g,"&#39;")),t}o.d(e,"a",function(){return n}),o.d(e,"b",function(){return a})},1013:function(t,e,o){t.exports={icon:"TextEditor-module__icon",small:"TextEditor-module__small",threeDotIcon:"TextEditor-module__threeDotIcon",editDraft:"TextEditor-module__editDraft",New_Editor_MultiTools:"TextEditor-module__New_Editor_MultiTools",cardDetail:"TextEditor-module__cardDetail",stencilLoading:"TextEditor-module__stencilLoading",stencillist9:"TextEditor-module__stencillist9",Stencils__placeHolderShimmer:"TextEditor-module__Stencils__placeHolderShimmer"}},1014:function(t,e,o){(function(t){t.ZohoDeskEditor_Init=function(){},ZohoDeskEditor_Init.init=function(t){ZohoDeskEditor_Init.version="v1.8.9",ZohoDeskEditor_Init.inlineQuotes=!0,ZohoDeskEditor_Init.csrfCookieVal="",ZohoDeskEditor_Init.csrfParamVal="",ZohoDeskEditor_Init.defaultFontSize="16",ZohoDeskEditor_Init.defaultFontFamily="ProximaNovaRegular, Arial, Helvetica, sans-serif",ZohoDeskEditor_Init.dropDownTopPadding=11,ZohoDeskEditor_Init.dropDownLeftPadding=5,ZohoDeskEditor_Init.slidebarClass="KB_Editor_DropDown_Slidebar";var e=navigator.userAgent.toLowerCase();ZohoDeskEditor_Init.is_ie=-1!==e.indexOf("ie"),ZohoDeskEditor_Init.is_safari=-1!==e.indexOf("safari"),ZohoDeskEditor_Init.is_opera=-1!==e.indexOf("opera"),ZohoDeskEditor_Init.is_mac=-1!==e.indexOf("mac"),ZohoDeskEditor_Init.loading=!0,ZohoDeskEditor_Init.changedTools=["fontfamily"],ZohoDeskEditor_Init.spellcheckURL="lt.zoho.com",ZohoDeskEditor_Init.useProxy=!0,ZohoDeskEditor_Init.useSameDomain=!0,ZohoDeskEditor_Init.domain=document.domain,ZohoDeskEditor_Init.contextVal="support",ZohoDeskEditor_Init.spellcheckProxyUrl="/"+ZohoDeskEditor_Init.contextVal+"/ze",ZohoDeskEditor_Init.tabKeyHandling=!0;var o=window.location.protocol,n="",a="com",r="",i=".zohostatic.";"US".indexOf("SKY")>-1&&(i=".skydeskstatic.",a="jp"),"US".indexOf("RO")>-1&&(r="-ro"),["LOC","DEV"].indexOf("US")>-1&&(n="local"),ZohoDeskEditor_Init.jsurl=o+"//"+n+"localjs"+r+i+a+"/zde/"+ZohoDeskEditor_Init.version+"/js/",ZohoDeskEditor_Init.cssurl=o+"//"+n+"localcss"+r+i+a+"/zde/"+ZohoDeskEditor_Init.version+"/css/",ZohoDeskEditor_Init.imgurl=o+"//"+n+"localimg"+r+i+a+"/zde/"+ZohoDeskEditor_Init.version+"/images/","CommentEditor"==t||"replyComments"==t?(ZohoDeskEditor_Init.toolbarOrder=[["bold","Bold (Ctrl+B)","#KBEditortools_txtbold","KBEditortools-txtbold"],["italic","Italic (Ctrl+I)","#KBEditortools_txtitalic","KBEditortools-txtitalic"],["undterline","Underline (Ctrl+U)","#KBEditortools_txtunderline","KBEditortools-txtunderline"],["forecolor","Font color","#KBEditortools_clrpick","KBEditortools-clrpick"],["backcolor","Background color","#KBEditortools_bgclr","KBEditortools-bgclr"],["listoptions","Lists","#KBEditortools_list_round","KBEditortools-list-round"],["removeFormat","Clear formatting","#KBEditortools_clr","KBEditortools-clr"],["link","Insert link","#KBEditortools_insertlink","KBEditortools-insertlink"],["table","Insert table","#KBEditortools_inserttable","KBEditortools-inserttable"]],"replyComments"==t&&(ZohoDeskEditor_Init.toolbarOrder=ZohoDeskEditor_Init.toolbarOrder.slice(0,5))):ZohoDeskEditor_Init.toolbarOrder=[["bold","Bold (Ctrl+B)","#KBEditortools_txtbold","KBEditortools-txtbold"],["italic","Italic (Ctrl+I)","#KBEditortools_txtitalic","KBEditortools-txtitalic"],["underline","Underline (Ctrl+U)","#KBEditortools_txtunderline","KBEditortools-txtunderline"],["forecolor","Font color","#KBEditortools_clrpick","KBEditortools-clrpick"],["backcolor","Background color","#KBEditortools_bgclr","KBEditortools-bgclr"],["heading","Headings","#KBEditortools_block_down_arrow","KB_Editor_Bdr_div Text_Type"],["fontSize","Font size","#KBEditortools_block_down_arrow","KB_Editor_Bdr_div TextSize_Type"],["alignoptions","Align","#KBEditortools_align_left","KBEditortools-align-left"],["listoptions","Lists","#KBEditortools_list_round","KBEditortools-list-round"],["indentoptions","Indent","#KBEditortools_increaseindent","KBEditortools-increaseindent"],["attach","Insert image","#KBEditortools_insertimage","KBEditortools-insertimage"],["removeFormat","Clear formatting","#KBEditortools_clr","KBEditortools-clr"],["articlelink","Insert article as link","#KBEditortools_linkarticle","KBEditortools-linkarticle"],["insertoptions","Insert options","#KBEditortools_block_down_arrow","KB_Editor_Bdr_div Insert_Type"],["editorexpand","Normal view","#KBEditortools_expand","KBEditortools-expand"],["styletext","Text Style","#KBEditortools_txtbgclr","KBEditortools-txtbgclr"],["plaintext","Plain text","#KBEditortools_arrow","KB_Editor_PlainText KB_Editor_FullScreen"]],ZohoDeskEditor_Init.heading=[{htm:"Heading 1",datAttr:"h1"},{htm:"Heading 2",datAttr:"h2"},{htm:"Heading 3",datAttr:"h3"},{htm:"Normal",datAttr:"p"}],ZohoDeskEditor_Init.insertoptions=[{htm:"Insert link",datAttr:"link",iconClass:"KBEditortools-insertlink",svgId:"#KBEditortools_insertlink"},{htm:"Remove link",datAttr:"unlink",iconClass:"KBEditortools-removelink",svgId:"#KBEditortools_removelink"},{htm:"Insert HTML",datAttr:"object",iconClass:"KBEditortools-embed2",svgId:"#KBEditortools_embed_2"},{htm:"Edit HTML",datAttr:"edithtml",iconClass:"KBEditortools-embed2",svgId:"#KBEditortools_embed_2"},{htm:"Insert table",datAttr:"table",iconClass:"KBEditortools-inserttable",svgId:"#KBEditortools_inserttable"},{htm:"Insert horizontal rule",datAttr:"inserthorizontalrule",iconClass:"KBEditortools-hr",svgId:"#KBEditortools_hr"},{htm:"Insert code",datAttr:"code",iconClass:"KBEditortools-code",svgId:"#KBEditortools_code"}],ZohoDeskEditor_Init.align=[{htm:"Align left",datAttr:"justifyleft",iconClass:"KBEditortools-align-left",svgId:"#KBEditortools_align_left"},{htm:"Align right",datAttr:"justifyright",iconClass:"KBEditortools-align-right",svgId:"#KBEditortools_align_right"},{htm:"Align justify",datAttr:"justifyfull",iconClass:"KBEditortools-align-justify",svgId:"#KBEditortools_align_justify"},{htm:"Align center",datAttr:"justifycenter",iconClass:"KBEditortools-align-center",svgId:"#KBEditortools_align_center"}],ZohoDeskEditor_Init.list=[{htm:"Bullets",datAttr:"insertunorderedlist",iconClass:"KBEditortools-list-round",svgId:"#KBEditortools_list_round"},{htm:"Numbering",datAttr:"insertorderedlist",iconClass:"KBEditortools-list-number",svgId:"#KBEditortools_list_number"}],ZohoDeskEditor_Init.indent=[{htm:"Increase indent",datAttr:"indent",iconClass:"KBEditortools-increaseindent",svgId:"#KBEditortools_increaseindent"},{htm:"Decrease indent",datAttr:"outdent",iconClass:"KBEditortools-decreaseindent",svgId:"#KBEditortools_decreaseindent"}],ZohoDeskEditor_Init.others=[{htm:"Check spelling",datAttr:"spellcheck"},{htm:"Plain text mode",datAttr:"switchmode"}],ZohoDeskEditor_Init.attachDrop=[{clk:function(t){t.uploadImage("load"),ZohoDeskEditor_Init.needEditorStats&&t.updateCount("image")},htm:"Upload",iconClass:"KBEditortools-upload",svgId:"#KBEditortools_upload"},{clk:function(t){callZDOCSAttachViewer(docsObj,"inline")},htm:"Gallery",iconClass:"KBEditortools-image",svgId:"#KBEditortools_image"},{clk:function(t){t.uploadImage("url"),ZohoDeskEditor_Init.needEditorStats&&t.updateCount("image")},htm:"URL",iconClass:"KBEditortools-sphere",svgId:"#KBEditortools_sphere"}],ZohoDeskEditor_Init.fontSize=[{htm:"8",datAttr:"1"},{htm:"10",datAttr:"2"},{htm:"12",datAttr:"3"},{htm:"14",datAttr:"4"},{htm:"18",datAttr:"5"},{htm:"24",datAttr:"6"},{htm:"36",datAttr:"7"}];var s=function(t){ZohoDeskEditor_Init.toolbarOrder.splice(t,0,["fontfamily","Font","#KBEditortools_Icon_Font","KBEditortools_Icon_Font"]),ZohoDeskEditor_Init.fontfamily=[{htm:"ProximaNova",ff:"ProximaNovaRegular, Arial, Helvetica"},{htm:"Arial",ff:"Arial, Helvetica, sans-serif"},{htm:"Helvetica",ff:"undefined"},{htm:"Verdana",ff:"verdana"},{htm:"Wide",ff:'"arial black"'},{htm:"Courier New",ff:'"courier new", courier, monospace'},{htm:"Comic Sans MS",ff:'"comic sans ms"'},{htm:"Garamond",ff:"garamond, serif"},{htm:"Georgia",ff:"georgia, times new roman, times, serif"},{htm:"Narrow",ff:'"arial narrow", sans-serif'},{htm:"Serif",ff:"serif, times new roman"},{htm:"Tahoma",ff:"tahoma, arial, helvetica, sans-serif"},{htm:"Times New Roman",ff:'"times new roman", times, serif'},{htm:"Trebuchet",ff:'"trebuchet ms", arial, helvetica, sans-serif'},{htm:"Calibri",ff:"Calibri, Verdana, Arial, sans-serif"}]};if("TicketReply"===t){for(var l=0,m=(c=[5,11,12,12,12]).length;l<m;l++)ZohoDeskEditor_Init.toolbarOrder.splice(c[l],1);ZohoDeskEditor_Init.toolbarOrder.unshift(["template","Template","#TemplateIcon","TemplateIcon"]),ZohoDeskEditor_Init.toolbarOrder.unshift(["snippet","","#SnippetIcon","SnippetIcon"]),ZohoDeskEditor_Init.defaultFontSize=10,ZohoDeskEditor_Init.defaultFontFamily="Arial, Helvetica, sans-serif",ZohoDeskEditor_Init.attachDrop.splice(1,1),ZohoDeskEditor_Init.dropDownTopPadding=2,ZohoDeskEditor_Init.dropDownLeftPadding=0,s(5),ZohoDeskEditor_Init.toolbarOrder.splice(3,0,["strikethrough","Strikethrough","#KBEditortools_strike","KBEditortools_strike"]),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheck","Spell Check","#KBEditortools_spellcheck","KBEditortools_spellcheck"]),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheckoptions","Spell Check Languages","#KBEditortools_block_down_arrow","KBEditortools-Block-down-arrow"]),ZohoDeskEditor_Init.insertoptions.push({htm:"Insert quote",datAttr:"quote",iconClass:"KBEditortools-quote",svgId:"#KBEditortools_quote"}),ZohoDeskEditor_Init.tabKeyHandling=!1,ZohoDeskEditor_Init.toolbarOrder.push(["moreoptions","More","#KBEditortools_more1","Kbeditor_more_icon"]),ZohoDeskEditor_Init.moreoptions=[{htm:"Plain Text",datAttr:"plaintext"}]}if("Snippets"===t){var c;for(l=0,m=(c=[5,8,8,8,8,9,10]).length;l<m;l++)ZohoDeskEditor_Init.toolbarOrder.splice(c[l],1);ZohoDeskEditor_Init.defaultFontSize=12,ZohoDeskEditor_Init.toolbarOrder.push(["moreoptions","More","#KBEditortools_more1","Kbeditor_more_icon"]),s(5),ZohoDeskEditor_Init.moreoptions=[{htm:"Increase Indent",datAttr:"indent",iconClass:"KBEditortools-increaseindent",svgId:"#KBEditortools_increaseindent"},{htm:"Decrease Indent",datAttr:"outdent",iconClass:"KBEditortools-decreaseindent",svgId:"#KBEditortools_decreaseindent"},{htm:"Plain Text",datAttr:"plaintext"}]}"TicketForm"===t&&(ZohoDeskEditor_Init.attachDrop.splice(1,1),ZohoDeskEditor_Init.insertoptions.push({htm:"Insert quote",datAttr:"quote",iconClass:"KBEditortools-quote",svgId:"#KBEditortools_quote"}),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheck","Spell Check","#KBEditortools_spellcheck","KBEditortools_spellcheck"]),ZohoDeskEditor_Init.toolbarOrder.push(["spellcheckoptions","Spell Check Languages","#KBEditortools_block_down_arrow","KBEditortools-Block-down-arrow"]),ZohoDeskEditor_Init.toolbarOrder.splice(12,1),ZohoDeskEditor_Init.toolbarOrder.splice(13,1),ZohoDeskEditor_Init.toolbarOrder.splice(3,0,["strikethrough","Strikethrough","#KBEditortools_strike","KBEditortools_strike"]),ZohoDeskEditor_Init.defaultFontFamily="Arial, Helvetica, sans-serif",s(6))}}).call(this,o(68))},1019:function(t,e,o){"use strict";var n=o(12),a=o.n(n),r=o(9),i=o.n(r),s=o(10),l=o.n(s),m=o(13),c=o.n(m),d=o(14),u=o.n(d),p=o(0),h=o.n(p),f=o(1),g=o.n(f),C=o(1027),_=o.n(C),v=o(30),b=o(16),I=o(174),E=function(t){function e(t){i()(this,e);var o=c()(this,(e.__proto__||a()(e)).call(this,t));return o.constructPreviewData=o.constructPreviewData.bind(o),o}return u()(e,t),l()(e,[{key:"openNewTab",value:function(t){window.open(t)}},{key:"constructImgURL",value:function(t){var e=this.props.orgId,o=t.indexOf("/api"),n=t.slice(o,t.length);return n+="?orgId="+e+"&inline=true"}},{key:"constructPreviewData",value:function(t){var e=this.props,o=e.oldAttachments,n=e.newAttachments,a=e.showAttachmentViewer,r=o.length?o.concat(n):n;Object(I.a)(t,r,function(t){a(t)})}},{key:"constructAttachItem",value:function(t,e){var o=t.id,n=t.isPreview,a=t.viewUrl,r=t.href,i=t.name,s=t.size,l=t.percentComplete,m=void 0===l?"0":l,c=this.props,d=c.deleleUpload,u=c.removeAttachment,p=(c.isPeekView,a||(n?r:this.constructImgURL(r))),f=Object(I.j)(i),g=Object(I.e)(s),C=Object(I.c)(i);return h.a.createElement("div",{className:_.a.upload+" "+_.a.mr12+" "+(n?_.a.preview:"")},n?h.a.createElement("div",{className:_.a.loader,style:{width:m+"%"}}):null,f?h.a.createElement("img",{onClick:!n&&this.constructPreviewData.bind(this,o),src:p,className:_.a.uploadimage}):h.a.createElement("div",{className:_.a.attachInfo,onClick:this.openNewTab.bind(this,p)},h.a.createElement(v.CommonFontIcon,{name:C,size:"14"}),h.a.createElement("span",{className:_.a.attachsize},g)),n?null:h.a.createElement("span",{className:_.a.uploadclose,onClick:n?null:"new"==e?d.bind(this,o):u.bind(this,o),"data-id":"deleteUpload"},h.a.createElement(v.TopbandFontIcon,{name:"close",size:"12",color:"pure"})))}},{key:"render",value:function(){var t=this,e=this.props,o=e.oldAttachments,n=e.newAttachments,a=e.from,r=e.isPeekView,i=_.a.attachList;return"leftPanel"==a?i=i+" "+_.a.w75:"replyEdtior"==a&&(i=r?i+" "+_.a.peekReplyAttach:i+" "+_.a.replyAttach),o&&o.length||n&&n.length?h.a.createElement(b.Container,{alignBox:"row",scroll:"horizontal",className:i},o&&o.length?o.map(function(e,o){return h.a.createElement(b.Box,{key:o},t.constructAttachItem(e,"old"))}):null,n&&n.length?n.map(function(e,o){return h.a.createElement(b.Box,{key:o,dataId:"attachmentItem_"+(o+1)},t.constructAttachItem(e,"new"))}):null):null}}]),e}(h.a.Component);e.a=E,E.propTypes={data:g.a.object,deleleUpload:g.a.func,from:g.a.string,isPeekView:g.a.bool,newAttachments:g.a.array,oldAttachments:g.a.array,orgId:g.a.string,removeAttachment:g.a.func,showAttachmentViewer:g.a.func}},1026:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),a=i(o(0)),r=i(o(360));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default.Component),n(e,[{key:"render",value:function(){return a.default.createElement("div",{className:r.default.separator})}}]),e}();e.default=s},1027:function(t,e,o){t.exports={upload:"UploadList-module__upload common-module__cboth",uploadimage:"UploadList-module__uploadimage",loader:"UploadList-module__loader",uploadclose:"UploadList-module__uploadclose",attachsize:"UploadList-module__attachsize common-module__dotted common-module__oflow common-module__ellipsis",attachInfo:"UploadList-module__attachInfo",attachList:"UploadList-module__attachList",mr12:"UploadList-module__mr12",w75:"UploadList-module__w75",preview:"UploadList-module__preview",replyAttach:"UploadList-module__replyAttach",peekReplyAttach:"UploadList-module__peekReplyAttach"}},1028:function(t,e,o){"use strict";o.d(e,"c",function(){return a}),o.d(e,"a",function(){return r}),o.d(e,"b",function(){return i}),o.d(e,"f",function(){return s}),o.d(e,"d",function(){return l}),o.d(e,"e",function(){return m});var n=o(6);function a(t,e){var o=editor[t];o&&e&&o.insertHTML(e)}function r(t){var e=editor[t];if(null!=e){var o=e.getContent();return"<br>"==(o=o.trim())?"":("plaintext"==e.mode&&(o=function(t){void 0!==t&&(t=(t=encodeHTML(t)).replace(/\n/g,"<br/>"));return t}(o)),o)}return""}function i(t,e,o,n){var a={content:"",isSnippetExist:!1,triggerWord:""},r="";if(t.modify){var i=t.getRangeAt(0);t.collapseToStart(),t.modify("move","backward","word"),t.modify("extend","forward","word");var s=t.toString().toLowerCase().trim(),l=n.filter(function(t){return t.snippetWord.toLowerCase()==s.toLowerCase()});null!=(r=l.length?l[0].expandedContent:"")&&""!=r&&r.length>0?(a.isSnippetExist=!0,a.content=r,a.triggerWord=s.toLowerCase(),i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset)):(a.content="&nbsp;&nbsp;&nbsp;&nbsp;",a.triggerWord=s.toLowerCase()),t.removeAllRanges(),t.addRange(i)}else a=function(t,e,o,n){var a="",r=t.getRangeAt(0);r.collapse(!0),r.setStart(t.anchorNode,0),a=r.toString();var i=r.cloneRange(),s=t.anchorNode.textContent,l=/\s+/,m=s.split(l).filter(Boolean),c=a.split(l).filter(Boolean),d="",u="",p={content:"",isSnippetExist:!1,triggerWord:""},h=c[c.length-1];if(""!=h&&void 0!==h){d=m[c.length-1],parseInt(d.length);var f=d.toLowerCase(),g=n.filter(function(t){var e=t.snippetWord;return e.toLowerCase()==f.toLowerCase()});u=g.length?g[0].expandedContent:""}if(null!=u&&""!=u&&null!=u){var C=parseInt(d.length-h.length),_=parseInt(a.length);C>0&&(_+=C);var v=parseInt(a.length+C-d.length),b=a.length-a.replace(/\s+$/g,"").length;(v-=b)<0&&(v=0),i.setStart(t.anchorNode,v),i.setEnd(t.focusNode,_),p.isSnippetExist=!0}else u=a;return p.content=u,p.triggerWord=d.toLowerCase(),t.removeAllRanges(),t.addRange(i),p}(t,0,0,n);return a}function s(t,e,o,a,r){for(var i={"${Cases.Contact Name}":Object(n.e)(o.firstName,o.lastName),"${Cases.Email}":o.email||"","${Cases.Phone}":e.phone||"","${Cases.Subject}":e.subject,"${Cases.Description}":e.description||"","${Cases.Request Id}":e.ticketNumber,"${Cases.Account Name}":a?a.accountName:"","${Cases.First Name}":o.firstName||"","${Cases.Last Name}":o.lastName||"","${Cases.CUSTOMER_PORTAL_LINK}":"10","${User.Support Rep Name}":Object(n.e)(r.firstName,r.lastName),"${User.Email}":r.emailId||"","${User.Phone}":r.phone||"","${User.First Name}":r.firstName||"","${User.Last Name}":r.lastName||"","${User.Mobile}":r.mobile||""},s=t.match(/(\$\{\w+\.[\w\s]+\})/g)||[],l=0;l<s.length;l++)t=t.replace(s[l],i[s[l]]);return t}function l(t){if(void 0===t)return!0;var e=t.getContent()||"";return""==e||"<div><br></div>"==e||!t.doc.body.textContent.trim().length}function m(t){return t.replace(/(<iframe.+?<\/iframe>)/g,function(t){var e=t.match(/(htt.+?")/)[0];return'<div><br></div><a href="'+(e=e.substring(0,e.length-1))+'" target="_blank">'+e+"</a>"})}},1034:function(t,e,o){"use strict";var n=o(12),a=o.n(n),r=o(9),i=o.n(r),s=o(10),l=o.n(s),m=o(13),c=o.n(m),d=o(14),u=o.n(d),p=o(0),h=o.n(p),f=o(153),g=o(1035),C=o.n(g),_=function(t){function e(){return i()(this,e),c()(this,(e.__proto__||a()(e)).apply(this,arguments))}return u()(e,t),l()(e,[{key:"render",value:function(){return h.a.createElement(f.a,{viewBox:"0 0 298 123.5",name:"cloud"},h.a.createElement("image",{xlinkHref:C.a,height:"100%",width:"100%"}))}}]),e}(h.a.Component);e.a=_},1035:function(t,e){t.exports="//vimalesan.herokuapp.com/support"+"./fonts/EmptyCloud.ad84742889552ed3919f.svg"},1038:function(t,e,o){"use strict";var n=o(12),a=o.n(n),r=o(9),i=o.n(r),s=o(10),l=o.n(s),m=o(13),c=o.n(m),d=o(14),u=o.n(d),p=o(0),h=o.n(p),f=o(1),g=o.n(f),C=o(1043),_=o.n(C),v=o(1034),b=o(8),I=o(109),E=function(t){function e(){return i()(this,e),c()(this,(e.__proto__||a()(e)).apply(this,arguments))}return u()(e,t),l()(e,[{key:"render",value:function(){var t=this.props,e=t.subtabName,o=t.link,n=t.noNeedToShowAdd,a=t.noNeedToShowHelp,r=t.emptyMessage1,i=t.emptyMessage2,s=t.children,l=t.needClickHere,m=t.onClick;return e=e.toLowerCase(),h.a.createElement("div",{className:_.a.emptyImgdiv},h.a.createElement("div",{className:_.a.emptyImgbg},h.a.createElement(v.a,null)),h.a.createElement("div",{className:_.a.txtGrop},h.a.createElement("div",{className:_.a.dtemptytxt},r||h.a.createElement("span",null,b.f.getI18NValue("support.tab.empty.message",[e]))),!n&&h.a.createElement("div",{className:_.a.dtemptysubtxt},b.f.getI18NValue("support.tab.add.message",[e]),h.a.createElement("span",{className:_.a.plr10},s)," ",b.f.getI18NValue("support.icon")),i&&h.a.createElement("div",{className:_.a.dtemptysubtxt},h.a.createElement("span",null,i),l?h.a.createElement("span",{className:_.a.clickHere,onClick:m},b.f.getI18NValue("support.api.click.here")):null),!a&&h.a.createElement("div",null,h.a.createElement("div",{className:_.a.dtemptysubtxt2},b.f.getI18NValue("tab.request.emptypages.learnmore"),h.a.createElement(I.a,{className:_.a.slalink,target:"_blank",href:o},b.f.getI18NValue("support.api.click.here"))))))}}]),e}(h.a.Component);e.a=E,E.propTypes={children:g.a.node,emptyMessage1:g.a.string,emptyMessage2:g.a.string,link:g.a.string,needClickHere:g.a.bool,noNeedToShowAdd:g.a.bool,noNeedToShowHelp:g.a.bool,onClick:g.a.func,subtabName:g.a.string},E.defaultProps={needClickHere:!1}},1042:function(t,e,o){t.exports={defaultSize:"MorePopup-module__defaultSize common-module__offSelection",black:"MorePopup-module__black",white:"MorePopup-module__white",iconCustom:"MorePopup-module__iconCustom",mr10:"MorePopup-module__mr10",dropDivPosition:"MorePopup-module__dropDivPosition",dropdownPosition:"MorePopup-module__dropdownPosition",secondaryIcon:"MorePopup-module__secondaryIcon",widgetList:"MorePopup-module__widgetList"}},1043:function(t,e,o){t.exports={emptyImgdiv:"SubtabEmptystate-module__emptyImgdiv",emptyImgbg:"SubtabEmptystate-module__emptyImgbg",dtemptytxt:"SubtabEmptystate-module__dtemptytxt common-module__semibold common-module__ftsmooth",dtemptysubtxt:"SubtabEmptystate-module__dtemptysubtxt undefined",dtemptysep:"SubtabEmptystate-module__dtemptysep",dtemptysubtxt2:"SubtabEmptystate-module__dtemptysubtxt2 undefined",slalink:"SubtabEmptystate-module__slalink",txtGrop:"SubtabEmptystate-module__txtGrop",plr10:"SubtabEmptystate-module__plr10",clickHere:"SubtabEmptystate-module__clickHere"}},1053:function(t,e,o){"use strict";var n=o(12),a=o.n(n),r=o(9),i=o.n(r),s=o(10),l=o.n(s),m=o(13),c=o.n(m),d=o(14),u=o.n(d),p=o(0),h=o.n(p),f=o(1),g=o.n(f),C=o(1080),_=o.n(C),v=o(64),b=o.n(v),I=o(56),E=o.n(I),A=function(t){function e(t){return i()(this,e),c()(this,(e.__proto__||a()(e)).call(this,t))}return u()(e,t),l()(e,[{key:"render",value:function(){var t=this.props,e=t.src,o=t.name,n=t.size,a=t.iconClass,r=t.iconName,i=t.iconSize,s=t.iconColor,l=t.borderPalette,m=t.onClick,c=t.title,d=t.iconTitle,u=t.onIconClick,p=t.showOnHover?_.a.hover:"";return h.a.createElement("div",{className:_.a.container+" "+p},h.a.createElement(b.a,{src:e,name:o,title:c,size:n,onClick:m}),r&&h.a.createElement("span",{className:_.a.thread+" "+_.a["border_"+l],"data-title":d,onClick:u},h.a.createElement("span",{className:_.a.icon},h.a.createElement(E.a,{name:r,size:i,color:s,className:a}))))}}]),e}(h.a.Component);e.a=A,A.defaultProps={size:"medium",iconSize:"6",borderPalette:"default"},A.propTypes={borderPalette:g.a.oneOfType([g.a.string,g.a.bool]),iconClass:g.a.string,iconColor:g.a.oneOfType([g.a.string,g.a.bool]),iconName:g.a.oneOfType([g.a.string,g.a.bool]),iconSize:g.a.oneOfType([g.a.string,g.a.bool]),iconTitle:g.a.string,name:g.a.string,onClick:g.a.func,onIconClick:g.a.func,showOnHover:g.a.bool,size:g.a.string,src:g.a.string,title:g.a.string}},1080:function(t,e,o){t.exports={container:"AvatarThread-module__container common-module__dInflex",thread:"AvatarThread-module__thread common-module__rounded",icon:"AvatarThread-module__icon common-module__middleBoth common-module__middle",border_primary:"AvatarThread-module__border_primary",border_success:"AvatarThread-module__border_success",border_danger:"AvatarThread-module__border_danger",hover:"AvatarThread-module__hover"}},1081:function(t,e,o){"use strict";o.d(e,"a",function(){return i});var n=o(71),a=o.n(n),r=o(6),i={storage:{},isStorageSupported:function(){try{var t=window.localStorage;return t.setItem("test","1"),t.removeItem("test"),!0}catch(t){return!1}},storeItemIntoStorage:function(t,e){try{this.isStorageSupported()?Object(r.J)(e)?localStorage.setItem(t,a()(e)):localStorage.setItem(t,e):this.storage[t]=e}catch(t){if(22==t.code)try{for(var o=localStorage.length,n=new Date,i=0;i<o;i++){var s=localStorage.key(i),l=this.getItemFromStorage(s)||{};l&&l.time&&n>l.expireTime&&this.removeItem(s)}storeData()}catch(t){alert("Local Storage Limit exceeded")}}},getItemFromStorage:function(t){if(!this.isStorageSupported())return this.storage[t];try{return JSON.parse(localStorage.getItem(t))}catch(e){return localStorage.getItem(t)}},deleteItemFromStorage:function(t){this.isStorageSupported()?localStorage.removeItem(t):this.storage[t]=void 0},getAllItemFromStorage:function(){if(this.isStorageSupported()){for(var t={},e=0;e<localStorage.length;e++){var o=localStorage.key(e),n=this.getItemFromStorage(o);t[o]=n}return t}return this.storage},setItem:function(t,e,o){-1==(o=null==o||null==o?10800:o)&&(o=86400);var n=new Date,a={value:e,expireTime:new Date(n.setSeconds(n.getSeconds()+o))};this.storeItemIntoStorage(t,a)},getItem:function(t){var e=this.getItemFromStorage(t)||{};if(e&&e.expireTime&&new Date>=new Date(e.expireTime))return void this.removeItem(t);return e.value},removeItem:function(t){this.deleteItemFromStorage(t)}}},1082:function(t,e,o){"use strict";var n=o(12),a=o.n(n),r=o(9),i=o.n(r),s=o(10),l=o.n(s),m=o(13),c=o.n(m),d=o(14),u=o.n(d),p=o(0),h=o.n(p),f=o(1),g=o.n(f),C=o(72),_=o.n(C),v=o(361),b=o.n(v),I=o(8),E=o(1097),A=o.n(E),y=function(t){function e(){return i()(this,e),c()(this,(e.__proto__||a()(e)).apply(this,arguments))}return u()(e,t),l()(e,[{key:"render",value:function(){var t=this.props,e=t.boxPosition,o=t.bottom,n=t.left,a=t.onAttchClick,r=t.openCloudAttach,i=t.labelName;return h.a.createElement(_.a,{size:"small",boxPosition:e,isActive:!0,bottom:o,left:n},h.a.createElement("label",{htmlFor:i},h.a.createElement(b.a,{autoHover:!0,value:I.f.getI18NValue("support.create.form.label.attachment.mycomputer"),iconName:"emptyfle",dataId:"fileAttach"}),h.a.createElement("input",{className:A.a.fileCont,type:"file",multiple:"multiple",id:i,onChange:a})),h.a.createElement(b.a,{autoHover:!0,value:I.f.getI18NValue("support.create.form.label.attachment.cloud"),iconName:"cloudicn",onClick:r,dataId:"cloudAttach"}))}}]),e}(p.Component);e.a=y,y.propTypes={bottom:g.a.string,boxPosition:g.a.string,labelName:g.a.string,left:g.a.string,onAttchClick:g.a.func,openCloudAttach:g.a.func}},1097:function(t,e,o){t.exports={fileCont:"UploadPopup__fileCont"}},1107:function(t,e,o){"use strict";(function(t){var n=o(2),a=o.n(n),r=o(12),i=o.n(r),s=o(9),l=o.n(s),m=o(10),c=o.n(m),d=o(13),u=o.n(d),p=o(14),h=o.n(p),f=o(0),g=o.n(f),C=o(1),_=o.n(C),v=o(1122),b=o.n(v),I=(o(1007),o(1053)),E=o(1019),A=o(1123),y=o(8),k=o(174),w=o(6),N=o(1081),x=o(1028),P=o(30),O=o(16),B=o(1004),T=o(1082),L=function(e){function o(t){l()(this,o);var e=u()(this,(o.__proto__||i()(o)).call(this,t)),n=e.props,a=n.value,r=n.attachments;return e.state={content:a||"",oldAttachments:r||[],newAttachments:[],isAttachmentUploading:!1,isDragOver:!1,mode:"private",showTools:N.a.getItem("showCommentTools"),isAttachmentModified:!1,isLoading:!1},e._isMounted=!1,e.uploadAttach=e.uploadAttach.bind(e),e.deleleUpload=e.deleleUpload.bind(e),e.removeAttachment=e.removeAttachment.bind(e),e.updateComment=e.updateComment.bind(e),e.clearComment=e.clearComment.bind(e),e.toggleComment=e.toggleComment.bind(e),e.dragEnter=e.dragEnter.bind(e),e.dragLeave=e.dragLeave.bind(e),e.attachDrop=e.attachDrop.bind(e),e.changeMode=e.changeMode.bind(e),e.toggleTools=e.toggleTools.bind(e),e.commentCallback=e.commentCallback.bind(e),e.checkCommentChanged=e.checkCommentChanged.bind(e),e.addComment=e.addComment.bind(e),e.dragAttach=e.dragAttach.bind(e),e.addCloudAttch=e.addCloudAttch.bind(e),e.openCloudAttach=e.openCloudAttach.bind(e),e.closeCloudAttach=e.closeCloudAttach.bind(e),e.closeComment=e.closeComment.bind(e),e}return h()(o,e),c()(o,[{key:"componentWillReceiveProps",value:function(t){t.oldAttachments==this.props.oldAttachments&&t.value==this.props.value&&t.newAttachments==this.props.newAttachments||this.setState({content:t.value||"",oldAttachments:t.oldAttachments||[],newAttachments:t.newAttachments||[]})}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"addComment",value:function(){var t=this,e=this.state,o=e.mode,n=e.isCommentAdding,a=this.props,r=a.attachmentIds,i=a.hasAttachments,s=void 0===i||i,l=a.hasPrivacyMode,m=void 0===l||l;if(!n){var c=editor["Comment_"+this.props.id],d=c.mentionsList,u=c.mentionsHandler("val");if(this.isValid(c)){var p="public"==o,h=this.props,f=h.revertIsCommentChanged,g=h.addComment;h.isCommentChanged&&f&&f(),this.setState({isCommentAdding:!0});var C={content:u};s&&(C.attachmentIds=r),m&&(C.isPublic=p),this.setState({isLoading:!0}),g(C,d,function(){t._isMounted&&(t.setState({oldAttachments:[],newAttachments:[],isAttachmentModified:!1,isCommentAdding:!1,mode:"private"}),t.props.setAttachmentIds([]),t.clearComment()),t.setState({isLoading:!1})},function(){t.setState({isLoading:!1})})}}}},{key:"updateComment",value:function(){var t=this,e=this.props,o=e.id,n=e.value,a=e.revertIsCommentChanged,r=e.isCommentChanged,i=e.updateComment,s=e.attachmentIds,l=editor["Comment_"+o],m=l.mentionsList,c=l.mentionsHandler("val");r&&a&&a(),this.setState({isAttachmentModified:!1}),this.isValid(l)&&(this.setState({isLoading:!0}),i(o,c,s,n,m,function(){t.setState({isLoading:!1})}))}},{key:"isValid",value:function(e){var o=this.state.isAttachmentUploading,n=this.props.attachmentIds,a=!0,r=e.getContent();return o?(a=!1,this.props.showMessage({type:"alert",message:y.f.getI18NValue("support.attachment.upload.process")})):Object(x.d)(e)&&!n.length?(a=!1,this.props.showConfirmBox({type:"alert",submitText:y.f.getI18NValue("crm.button.ok"),title:y.f.getI18NValue("support.history.operation.label.wfalert"),message:y.f.getI18NValue("support.contact.comment.empty"),isActive:!0,palette:"danger"}).then(function(){deleteComment(id,commentId,t)}).catch(function(){})):r.length>32e3&&(a=!1,this.props.showMessage({type:"alert",message:y.f.getI18NValue("support.comment.limit.exceeded")})),a}},{key:"addCloudAttch",value:function(t,e,o){var n=this,r=this.state,i=r.newAttachments,s=r.oldAttachments.length+i.length+o,l={index:s,href:null,isPreview:!0};this.setState(function(t){var e=a()({},t);return e.newAttachments.push(l),e}),this.props.uploadCloudAttachment(t,s,function(t,e){var o=n.state.newAttachments.map(function(o){return o.index===e?a()({},o,{percentComplete:t}):o});n.setState({newAttachments:o})}).then(function(t){var e=t.data,o=n.state.newAttachments.map(function(t){return t.index===e.data.index?e.data:t});n.setState({newAttachments:o});var a=n.props,r=a.attachmentIds,i=a.setAttachmentIds;r.push(e.data.id),i(r);var s=n.props,l=s.isCommentChanged,m=s.setIsCommentChanged;!l&&m&&m(),n.setState({isAttachmentModified:!0})},function(){n.setState(function(t){var e=a()({},t);return e.newAttachments=e.newAttachments.filter(function(t){return s!==t.index}),e})})}},{key:"uploadAttach",value:function(t){var e=this,o=this.state,n=o.newAttachments,r=o.oldAttachments.length+n.length,i=t.target?t.target.files:t,s=i.length,l=Object(k.n)(i,r),m=l.inValidArray,c=l.validArray,d=this.props.showMessage;if(l.isCountExceeds)d({type:"alert",message:y.f.getI18NValue("support.attachments.count.exceeds",[10])});else{if(m.length)for(var u=0;u<m.length;u++){var p=m[u];p.isUnSupported&&d({type:"alert",message:y.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted")}),p.isFileNameSizeInvalid&&d({type:"alert",message:y.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation")}),p.isEmpty&&d({type:"alert",message:y.f.getI18NValue("support.request.empty.attachment.message")}),p.isAttachSizeExceeded&&d({type:"alert",message:y.f.getI18NValue("support.feedback.uploaded.file.exceeds.20mb")})}c.length&&function(){var t=0;e.setState({isAttachmentUploading:!0});for(var o=function(o){var n=c[o],i=new FormData;i.append("file",n);var l=r+o,d=Object(k.f)(n,l);e.setState(function(t){var e=a()({},t);return e.newAttachments.push(d),e}),e.props.uploadAttach(i,l,function(t,o){var n=e.state.newAttachments.map(function(e){return e.index===o?a()({},e,{percentComplete:t}):e});e.setState({newAttachments:n})}).then(function(o){if(o){var n=o.data;t+=1;var a=e.state.newAttachments.map(function(t){return t.index===n.data.index?n.data:t});e.setState({newAttachments:a});var r=e.props,i=r.attachmentIds,l=r.setAttachmentIds;i.push(n.data.id),l(i);var c=e.props,d=c.isCommentChanged,u=c.setIsCommentChanged;!d&&u&&u(),e.setState({isAttachmentModified:!0}),t+m.length==s&&e.setState({isAttachmentUploading:!1})}}).catch(function(t){e.setState(function(e){var o=a()({},e);return o.newAttachments=o.newAttachments.filter(function(e){return t.attachIndex!==e.index}),o})})},n=0;n<c.length;n++)o(n)}()}t.target&&(t.target.value="")}},{key:"deleleUpload",value:function(t){var e=this;this.props.deleleUpload(t).then(function(){e.setState(function(o){var n=a()({},o);n.newAttachments=n.newAttachments.filter(function(e){return t!==e.id});var r=e.props,i=r.isCommentChanged,s=r.setIsCommentChanged,l=r.revertIsCommentChanged;return n.newAttachments.length?(!i&&s&&s(),e.setState({isAttachmentModified:!0})):(i&&l&&l(),e.setState({isAttachmentModified:!1},function(){return[e.checkCommentChanged()]})),n});var o=e.props,n=o.attachmentIds;(0,o.setAttachmentIds)(n.filter(function(e){return t!==e}))})}},{key:"removeAttachment",value:function(t){var e=this;this.setState(function(o){var n=a()({},o);n.oldAttachments=n.oldAttachments.filter(function(e){return t!==e.id});var r=e.props,i=r.isCommentChanged,s=r.setIsCommentChanged;return!i&&s&&s(),e.setState({isAttachmentModified:!0}),n});var o=this.props,n=o.attachmentIds;(0,o.setAttachmentIds)(n.filter(function(e){return t!==e}))}},{key:"clearComment",value:function(){this.setState({content:""});var t=editor["Comment_"+this.props.id];t.setContent(""),Object(w.N)(t.doc)}},{key:"toggleComment",value:function(){if(""==this.state.content)this.props.toggleComment();else{var t=this.props,e=t.revertIsCommentChanged;t.isCommentChanged&&e&&e(),this.setState({isAttachmentModified:!1}),this.clearComment()}}},{key:"dragEnter",value:function(){this.setState({isDragOver:!0})}},{key:"dragLeave",value:function(){this.setState({isDragOver:!1})}},{key:"attachDrop",value:function(t){var e=t.nativeEvent.dataTransfer;Object(k.h)(e,t)&&(t.preventDefault(),this.uploadAttach(e.files),this.setState({isDragOver:!1})),t.stopPropagation(),this.setState({isDragOver:!1})}},{key:"dragAttach",value:function(t){this.uploadAttach(t)}},{key:"changeMode",value:function(t){this.setState({mode:t})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"toggleTools",value:function(){var t=this;this.setState({showTools:!this.state.showTools},function(){t.state.showTools?N.a.setItem("showCommentTools",!0):N.a.setItem("showCommentTools",!1)})}},{key:"commentCallback",value:function(t){var e=this,o=this.props.mention,n=(void 0===o?[]:o).map(function(t){var e=t.type,o=t.name,n=t.zuid,a=t.id,r=t.firstName,i=t.lastName,s=t.photoURL,l=Object(w.e)(r,i);return"AGENT"==e?{avatar:s,id:n,name:l,type:"user",value:l}:{id:a,name:o,type:"team",value:o}});t.mentionsHandler("setMentions",n),ZohoDeskEditor._addEvent(t.doc,"keyup",function(){setTimeout(function(){e.checkCommentChanged(t)},1)})}},{key:"checkCommentChanged",value:function(t){t=t||editor["Comment_"+this.props.id];var e=this.props,o=e.value,n=e.type,a=e.isCommentChanged,r=e.setIsCommentChanged,i=e.revertIsCommentChanged,s=this.state.isAttachmentModified,l=t.getContent()||"";"edit"==n?o==l?!s&&a&&i&&i():!a&&r&&r():Object(x.d)(t)?(this.setState({content:""}),!s&&a&&i&&i()):(this.setState({content:l}),!a&&r&&r())}},{key:"openCloudAttach",value:function(){this.setState({isCLoudOpen:!0}),this.props.openCloudAttach()}},{key:"closeCloudAttach",value:function(){this.setState({isCLoudOpen:!1})}},{key:"closeComment",value:function(){var t=this.props,e=t.id,o=t.closeComment;o(e)}},{key:"render",value:function(){y.f.getI18NValue("support.create.form.label.attachment.mycomputer"),y.f.getI18NValue("support.create.form.label.attachment.cloud");var t=this.props,e=t.type,o=t.orgId,n=t.id,a=t.from,r=t.showAttachmentViewer,i=t.photoURL,s=t.name,l=t.borderStyle,m=(t.value,t.revertIsCommentChanged),c=t.isCommentChanged,d=t.editorMode,u=void 0===d?"CommentEditor":d,p=t.isFromBlueprint,h=t.hasPrivacyMode,f=void 0===h||h,C=t.hasAttachments,_=void 0===C||C,v=t.isCloudAttchOpen,k=t.CloudAttachmentIframe,w=t.havePublicComment,N=t.needAttachment,x=t.getAutofillContacts,L=this.state,S=L.content,D=void 0===S?"":S,j=L.oldAttachments,M=L.newAttachments,K=L.isDragOver,U=L.mode,z=L.showTools,V=L.isCLoudOpen,Z=L.isLoading,F={handleAutoFill:!0,needEditorFocus:"feeds"!=a&&!p,skipScrollOnEnter:!0,resizeOptions:{minHeight:80,maxHeight:225},defaultfontfamily:"'ProximaNovaRegular',Arial,Helvetica,sans-serif",defaultfontsize:"14px",padding:"0",lineHeight:"22px",needInlineAttachHandling:!1,getAutofillContacts:x,handleInlineDropImage:this.dragAttach},H="public"==U,R=b.a.postbox;return"leftPanel"==a&&(R=R+" "+b.a.minW319),R="bottom"==l?R+" "+b.a.defaultborder:R+" "+b.a.fullborder,g.a.createElement("div",{className:R+" "+(p?b.a.bluePrintLayar:""),onDragEnter:this.dragEnter,onDragOver:this.dragEnter,onDragLeave:this.dragLeave,onDrop:this.attachDrop},K&&g.a.createElement("div",{className:b.a.attachOver},y.f.getI18NValue("support.request.attachment.drop.files")),g.a.createElement("div",{className:b.a.postHeader},p?null:g.a.createElement("span",{className:b.a.postAvatar},g.a.createElement(I.a,{src:i,name:s,size:"xsmall",iconName:"conversation"==e&&"zdeskCommentfilled",borderPalette:"conversation"==e&&"primary",iconColor:"conversation"==e&&"primary",iconSize:"conversation"==e&&"8"})),g.a.createElement("div",{className:b.a.commentBox+" commentArea "+(z?"":"hideTools")+" "+("leftPanel"==a?"leftCommentArea":"")},g.a.createElement(B.a,{id:"Comment_"+n,value:D,editorCallback:this.commentCallback,editorMode:u,editorOptions:F})),_?g.a.createElement("div",{className:b.a.attachHolder+" "+(z?b.a.attachHolderVisi:"")},g.a.createElement(E.a,{oldAttachments:j,newAttachments:M,orgId:o,deleleUpload:this.deleleUpload,removeAttachment:this.removeAttachment,from:a,showAttachmentViewer:r})):null),g.a.createElement(O.Container,{alignBox:"row",className:"leftPanel"==a?b.a.leftFooter+" "+b.a.postFooter:b.a.postFooter},g.a.createElement(O.Box,{className:b.a.commentOptions},g.a.createElement("span",{className:b.a.listIcon},_&&N?g.a.createElement("span",{className:b.a.attachParent+" "+("edit"==e?b.a.bdrNone+" "+b.a.attchIcn:"leftPanel"==a?b.a.bdrNone+" "+b.a.mt0+" "+b.a.attchIcn:b.a.attchIcn),"data-id":"AttachIcon"},g.a.createElement("label",{className:b.a.fileCont,htmlFor:"commentAttach"},g.a.createElement("input",{className:b.a.fileAttch,type:"file",onChange:this.uploadAttach,multiple:"multiple",id:"commentAttach"})),g.a.createElement(P.TopbandFontIcon,{name:"attachment5",size:"14"}),"leftPanel"==a?g.a.createElement("div",{className:b.a.attchPopup},g.a.createElement(T.a,{labelName:"commentAttachLabel",boxPosition:"bottomRight",onAttchClick:this.uploadAttach,openCloudAttach:this.openCloudAttach})):null):null,_&&"leftPanel"!=a&&N?g.a.createElement("span",{className:b.a.iconCloud,onClick:this.openCloudAttach},g.a.createElement(P.TopbandFontIcon,{name:"cloudIcon",size:"12"})):null,g.a.createElement("span",{"data-title":y.f.getI18NValue("support.label.comments.format"),className:b.a.iconAttach,onClick:this.toggleTools},"A"))),p?null:g.a.createElement(A.a,{revertIsCommentChanged:m,isCommentChanged:c,closeComment:this.closeComment,updateComment:this.updateComment,toggleComment:this.toggleComment,clearComment:this.clearComment,type:e,from:a,isPublic:H,changeMode:this.changeMode,content:D,addComment:this.addComment,hasPrivacyMode:f,havePublicComment:w,isLoading:Z}),v&&V&&k?g.a.createElement(k,{addCloudAttch:this.addCloudAttch,totalLen:j.length+M.length,closeIframe:this.closeCloudAttach}):null))}}]),o}(g.a.Component);e.a=L,L.propTypes={CloudAttachmentIframe:_.a.node,addComment:_.a.func,attachmentIds:_.a.func,attachments:_.a.object,borderStyle:_.a.string,closeComment:_.a.func,deleleUpload:_.a.func,editorMode:_.a.string,from:_.a.string,getAutofillContacts:_.a.func,hasAttachments:_.a.bool,hasPrivacyMode:_.a.bool,havePublicComment:_.a.bool,id:_.a.string,isCloudAttchOpen:_.a.bool,isCommentChanged:_.a.bool,isFromBlueprint:_.a.bool,mention:_.a.array,name:_.a.string,needAttachment:_.a.bool,newAttachments:_.a.object,oldAttachments:_.a.object,openCloudAttach:_.a.func,orgId:_.a.string,page:_.a.string,photoURL:_.a.string,revertIsCommentChanged:_.a.func,setAttachmentIds:_.a.func,setIsCommentChanged:_.a.func,showAttachmentViewer:_.a.func,showConfirmBox:_.a.func,showMessage:_.a.func,toggleComment:_.a.func,type:_.a.string,updateComment:_.a.func,uploadAttach:_.a.func,uploadCloudAttachment:_.a.func,value:_.a.string},L.defaultProps={borderStyle:"bottom",isFromBlueprint:!1,needAttachment:!0}}).call(this,o(530)(t))},1122:function(t,e,o){t.exports={defaultborder:"CommentBox-module__defaultborder",fullborder:"CommentBox-module__fullborder",postHeader:"CommentBox-module__postHeader",commentBox:"CommentBox-module__commentBox",attachOver:"CommentBox-module__attachOver",postAvatar:"CommentBox-module__postAvatar",fileCont:"CommentBox-module__fileCont",postFooter:"CommentBox-module__postFooter",leftFooter:"CommentBox-module__leftFooter common-module__alignBetween",mt0:"CommentBox-module__mt0",postSubmit:"CommentBox-module__postSubmit",radioDiv:"CommentBox-module__radioDiv",radiobtn:"CommentBox-module__radiobtn",bdrNone:"CommentBox-module__bdrNone",minW319:"CommentBox-module__minW319",minW259:"CommentBox-module__minW259",attchIcn:"CommentBox-module__attchIcn",commentOptions:"CommentBox-module__commentOptions common-module__flexgrow",listIcon:"CommentBox-module__listIcon common-module__dflex",iconCloud:"CommentBox-module__iconCloud",iconAttach:"CommentBox-module__iconAttach",sentButton:"CommentBox-module__sentButton",clearButton:"CommentBox-module__clearButton",attachHolderVisi:"CommentBox-module__attachHolderVisi",attachHolder:"CommentBox-module__attachHolder",bluePrintLayar:"CommentBox-module__bluePrintLayar",fileAttch:"CommentBox-module__fileAttch",attchPopup:"CommentBox-module__attchPopup",attachParent:"CommentBox-module__attachParent",postbox:"CommentBox-module__postbox"}},1123:function(t,e,o){"use strict";var n=o(12),a=o.n(n),r=o(9),i=o.n(r),s=o(10),l=o.n(s),m=o(13),c=o.n(m),d=o(14),u=o.n(d),p=o(0),h=o.n(p),f=o(1),g=o.n(f),C=o(1124),_=o.n(C),v=o(30),b=o(239),I=o.n(b),E=o(8),A=o(16),y=o(73),k=o.n(y),w=function(t){function e(t){i()(this,e);var o=c()(this,(e.__proto__||a()(e)).call(this,t));return o.state={isPopupOpen:!1},o.togglePopup=o.togglePopup.bind(o),o}return u()(e,t),l()(e,[{key:"componentDidMount",value:function(){var t=this;this._mount=!0,window.addEventListener("click",function(){t._mount&&t.setState({isPopupOpen:!1})})}},{key:"componentWillUnmount",value:function(){this._mount=!1}},{key:"togglePopup",value:function(t){this.setState(function(t){return{isPopupOpen:!t.isPopupOpen}}),t.stopPropagation()}},{key:"render",value:function(){var t=this,e=this.props,o=e.revertIsCommentChanged,n=e.isCommentChanged,a=e.closeComment,r=e.toggleComment,i=e.clearComment,s=e.type,l=e.from,m=e.content,c=void 0===m?"":m,d=e.isPublic,u=e.changeMode,p=e.addComment,f=e.updateComment,g=e.hasPrivacyMode,C=e.havePublicComment,b=e.isLoading,y=this.state.isPopupOpen,w="large";"leftPanel"==l&&(w="medium");var N=""==c&&"conversation"!=s;return h.a.createElement(A.Box,{className:_.a.postSubmit},h.a.createElement("span",{className:_.a.sentButton},"edit"==s?h.a.createElement(k.a,{text:E.f.getI18NValue("support.button.save"),palette:"primaryFilled",size:"medium",onClick:f,status:b?"loading":"none"}):C&&g?h.a.createElement("span",{className:_.a.commentButton},g?h.a.createElement("div",{className:_.a[w]+" "+(b?"":_.a.isActive)},b?h.a.createElement(k.a,{status:"loading",palette:"primaryFilled",size:"medium",className:_.a.loading}):h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:_.a.content,onClick:p},h.a.createElement("p",{className:_.a.actionType},E.f.getI18NValue("tabs.request.comment")),h.a.createElement("p",{className:_.a.subtitle},d?E.f.getI18NValue("support.request.public"):E.f.getI18NValue("support.department.type.internal"))),h.a.createElement("span",{className:_.a.arrow,onClick:function(e){e.stopPropagation&&e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation(),t.togglePopup(e)}},h.a.createElement(v.TopbandFontIcon,{name:"blockDownArrow",size:"6"})))):h.a.createElement(k.a,{text:E.f.getI18NValue("tabs.request.comment"),palette:"primaryFilled",size:"medium",onClick:p,status:b?"loading":"none"}),h.a.createElement("div",{className:_.a.buttonAction+" "+(y?_.a.active:"")+" "+("leftPanel"==l?_.a.commentLeftPopup:" "),onClick:function(t){t.stopPropagation&&t.stopPropagation(),t.nativeEvent&&t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation()}},h.a.createElement("div",{className:_.a.switchAction,onClick:function(){u(d?"private":"public")}},h.a.createElement("p",null,h.a.createElement("span",{className:_.a.actionNotify},E.f.getI18NValue("support.request.public")),h.a.createElement("span",{className:_.a.switchbox},h.a.createElement(I.a,{id:"commentPrivate",name:"commentPrivate",size:"small",checked:d,onChange:function(){u(d?"private":"public")}}))),h.a.createElement("p",{className:_.a.actionSubtitle},E.f.getI18NValue("support.solutions.comments.display.in.customer.self.service.portal"))))):h.a.createElement(k.a,{text:E.f.getI18NValue("tabs.request.comment"),palette:"primaryFilled",size:"medium",onClick:p,status:b?"loading":"none"})),h.a.createElement("span",{className:_.a.clearButton},h.a.createElement(k.a,{text:"edit"==s||"task"==l||"conversation"==s&&""==c?E.f.getI18NValue("support.label.cancel"):E.f.getI18NValue("support.request.clear"),palette:"secondary",size:"medium",disabled:N,onClick:function(){"edit"==s||"task"==l?(n&&o&&o(),a()):"conversation"==s?r():i()}})))}}]),e}(h.a.Component);e.a=w,w.propTypes={addComment:g.a.func,changeMode:g.a.func,clearComment:g.a.func,closeComment:g.a.func,content:g.a.string,from:g.a.string,hasPrivacyMode:g.a.bool,havePublicComment:g.a.bool,isCommentChanged:g.a.bool,isLoading:g.a.bool,isPublic:g.a.bool,module:g.a.string,revertIsCommentChanged:g.a.func,toggleComment:g.a.func,type:g.a.string,updateComment:g.a.func}},1124:function(t,e,o){t.exports={commentButton:"CommentActionButton-module__commentButton common-module__dflex",commentAction:"CommentActionButton-module__commentAction common-module__dtable",isActive:"CommentActionButton-module__isActive",large:"CommentActionButton-module__large CommentActionButton-module__commentAction common-module__dtable",medium:"CommentActionButton-module__medium CommentActionButton-module__commentAction common-module__dtable",loading:"CommentActionButton-module__loading",peekLeftClearBtn:"CommentActionButton-module__peekLeftClearBtn",arrow:"CommentActionButton-module__arrow",content:"CommentActionButton-module__content common-module__tcenter common-module__pointer",actionType:"CommentActionButton-module__actionType common-module__semibold common-module__ftsmooth",subtitle:"CommentActionButton-module__subtitle common-module__oflow",buttonAction:"CommentActionButton-module__buttonAction common-module__vishidden",active:"CommentActionButton-module__active common-module__visible",actionSubtitle:"CommentActionButton-module__actionSubtitle",switchAction:"CommentActionButton-module__switchAction",actionNotify:"CommentActionButton-module__actionNotify",switchbox:"CommentActionButton-module__switchbox",peekLeftPopup:"CommentActionButton-module__peekLeftPopup",commentLeftPopup:"CommentActionButton-module__commentLeftPopup",pl30:"CommentActionButton-module__pl30",sentButton:"CommentActionButton-module__sentButton",postSubmit:"CommentActionButton-module__postSubmit common-module__dflex"}},1155:function(t,e,o){"use strict";var n=o(12),a=o.n(n),r=o(9),i=o.n(r),s=o(10),l=o.n(s),m=o(13),c=o.n(m),d=o(14),u=o.n(d),p=o(0),h=o.n(p),f=o(1),g=o(26),C=o(1107),_=o(17),v=o(131),b=o(6),I=o(24),E=o(956),A=o(242),y=o(22),k=function(t){function e(t){i()(this,e);var o=c()(this,(e.__proto__||a()(e)).call(this,t)),n=[],r=o.props.attachments;if(r&&r.length)for(var s=0;s<r.length;s++)n.push(r[s].id);return o.state={from:0,limit:25,attachmentIds:n},o.getAutofillContacts=Object(v.a)(o.getAutofillContacts.bind(o),100,!0),o.getMentions=o.getMentions.bind(o),o.setAttachmentIds=o.setAttachmentIds.bind(o),o}return u()(e,t),l()(e,[{key:"setAttachmentIds",value:function(t){this.setState({attachmentIds:t})}},{key:"getAutofillContacts",value:function(t,e,o){var n=this,a=this.props,r=a.deptId,i=a.teamsList,s=a.getTeamsList;i.length?this.getMentions(t,e,o):s(r).then(function(){n.getMentions(t,e,o)})}},{key:"getMentions",value:function(t,e,o){var n=this,a=this.props,r=a.deptId,i=a.getAgentsList,s=a.searchAgents,l=this.state,m=l.from,c=l.limit;c=(m=(e-1)*c)+c,t.length>1?s(t,m,c).then(function(t){console.log("res",t)}):(this.invokeMentionsCallback(e,o),i(r,m,c).then(function(){n.invokeMentionsCallback(e,o)}))}},{key:"invokeMentionsCallback",value:function(t,e){for(var o=this.props,n=o.agentsObject,a=o.teamsObject,r=o.agentsList,i=o.teamsList,s=r?r.map(function(t){return n[t]}):[],l=i.map(function(t){return a[t]}),m=s.concat(l),c=25*(t-1),d=c+25,u=[],p=0;p<m.length;p++){var h=m[p],f=h.id,g=h.zuid,C=h.name,_=h.isConfirmed,v=h.photoURL,I=h.firstName,E=h.lastName;if(h.subTeams){var A={id:f,name:C,value:C,type:"team",team:Object(b.u)(C)};u.push(A)}else if(_){var y={id:g,userId:f,avatar:v||"https://contacts.localzoho.com/file?t=user&fs=thumb&ID=53746212&exp=600",name:Object(b.e)(I,E),value:C,type:"user"};u.push(y)}}u.sort(function(t,e){return t.name.toLowerCase()<e.name.toLowerCase()?-1:1}),u=u.slice(c,d);var k={};k.results=u,k.isMore=u.length>0,e(k)}},{key:"render",value:function(){var t=this.props,e=t.type,o=t.orgId,n=t.id,a=t.from,r=t.showAttachmentViewer,i=(t.photoURL,t.name,t.borderStyle),s=t.isPeekView,l=t.value,m=t.revertIsCommentChanged,c=t.setIsCommentChanged,d=t.isCommentChanged,u=t.addComment,p=t.uploadAttach,f=t.deleleUpload,g=t.toggleComment,_=t.updateComment,v=t.closeComment,I=t.showConfirmBox,E=t.showMessage,A=t.page,k=t.oldAttachments,w=t.newAttachments,N=t.attachments,x=t.editorMode,P=t.myInfo,O=t.hasAttachments,B=t.hasPrivacyMode,T=t.openCloudAttach,L=t.isCloudAttchOpen,S=t.mention,D=t.isLightAgent,j=t.havePublicComment,M=t.uploadCloudAttachment,K=t.needAttachment;return h.a.createElement(C.a,{id:n,orgId:o,value:l,from:a,page:A,type:e,addComment:u,updateComment:_,closeComment:v,toggleComment:g,oldAttachments:k,newAttachments:w,attachments:N,uploadAttach:p,deleleUpload:f,showAttachmentViewer:r,isPeekView:s,isCommentChanged:d,setIsCommentChanged:c,revertIsCommentChanged:m,showConfirmBox:I,showMessage:E,borderStyle:i,getAutofillContacts:this.getAutofillContacts,editorMode:x,photoURL:P.photoURL,name:Object(b.e)(P.firstName,P.lastName),setAttachmentIds:this.setAttachmentIds,attachmentIds:this.state.attachmentIds,hasAttachments:O,hasPrivacyMode:B,openCloudAttach:T,isCloudAttchOpen:L,CloudAttachmentIframe:y.s,mention:S,havePublicComment:j&&!D,uploadCloudAttachment:M,needAttachment:K})}}]),e}(h.a.Component);k.propTypes={addComment:f.PropTypes.func,agentsList:f.PropTypes.array,agentsObject:f.PropTypes.object,attachments:f.PropTypes.object,borderStyle:f.PropTypes.string,closeComment:f.PropTypes.func,deleleUpload:f.PropTypes.func,deptId:f.PropTypes.string,editorMode:f.PropTypes.string,from:f.PropTypes.string,getAgentsList:f.PropTypes.func,getTeamsList:f.PropTypes.func,hasAttachments:f.PropTypes.bool,hasPrivacyMode:f.PropTypes.bool,havePublicComment:f.PropTypes.bool,id:f.PropTypes.string,isCloudAttchOpen:f.PropTypes.bool,isCommentChanged:f.PropTypes.bool,isLightAgent:f.PropTypes.bool,isPeekView:f.PropTypes.bool,mention:f.PropTypes.array,myInfo:f.PropTypes.object,needAttachment:f.PropTypes.bool,newAttachments:f.PropTypes.object,oldAttachments:f.PropTypes.object,openCloudAttach:f.PropTypes.func,orgId:f.PropTypes.string,page:f.PropTypes.string,revertIsCommentChanged:f.PropTypes.func,searchAgents:f.PropTypes.func,setIsCommentChanged:f.PropTypes.func,showAttachmentViewer:f.PropTypes.func,showConfirmBox:f.PropTypes.func,showMessage:f.PropTypes.func,teamsList:f.PropTypes.array,teamsObject:f.PropTypes.object,toggleComment:f.PropTypes.func,type:f.PropTypes.string,updateComment:f.PropTypes.func,uploadAttach:f.PropTypes.func,uploadCloudAttachment:f.PropTypes.func,value:f.PropTypes.string},e.a=Object(g.connect)(function(t,e){var o=Object(_.r)(t),n=t.myInfo,a=t.module,r=t.isCloudAttchOpen,i=t.activeAgents,s=t.departmentSpecificState,l=Object(b.c)(n.profileId,a.profile);return{deptId:o,teamsList:s[o].teamsList,agentsList:i[o],agentsObject:a.agent,teamsObject:a.teams,myInfo:n,isCloudAttchOpen:r,isLightAgent:l}},{getTeamsList:I.u,getAgentsList:E.g,searchAgents:E.j,showConfirmBox:I.a.showConfirmBox,showMessage:I.Q,openCloudAttach:A.h,uploadCloudAttachment:A.l})(k)},1198:function(t,e,o){"use strict";var n=o(12),a=o.n(n),r=o(9),i=o.n(r),s=o(10),l=o.n(s),m=o(13),c=o.n(m),d=o(14),u=o.n(d),p=o(0),h=o.n(p),f=o(1),g=o.n(f),C=o(1199),_=o.n(C),v=o(1053),b=o(30),I=o(8),E=o(459),A=o(1007),y=o(6),k=o(204),w=o(3),N=o(16),x=function(t){function e(t){i()(this,e);var o=c()(this,(e.__proto__||a()(e)).call(this,t));return o.state={editedId:"conversation"==o.props.page?o.props.editedId:""},o.closeComment=o.closeComment.bind(o),o.editComment=o.editComment.bind(o),o.updateComment=o.updateComment.bind(o),o.focusOnAttachments=o.focusOnAttachments.bind(o),o}return u()(e,t),l()(e,[{key:"componentWillReceiveProps",value:function(t){t.editedId!=this.props.editedId&&this.setState({editedId:t.editedId})}},{key:"constructMoreObj",value:function(){var t=this.props,e=t.haveCommentEditPermission,o=t.haveCommentDeletePermission,n=[];return e&&n.splice(0,0,{name:I.f.getI18NValue("crm.label.edit"),iconName:"pen2",size:"size14"}),o&&n.splice(e?1:0,0,{name:I.f.getI18NValue("support.permission.delete.comment"),iconName:"delete2",size:"size14"}),n}},{key:"editComment",value:function(t){var e=this,o=function(){var o=e.props,n=o.page,a=o.editComment;"conversation"==n?a(t):e.setState({editedId:t})};"undefined"==typeof ZohoDeskEditor?Object(k.a)(w.j,"js","ZohoDeskEditor").then(o):o()}},{key:"closeComment",value:function(){var t=this.props,e=t.page,o=t.closeComment;"conversation"==e?o():this.setState({editedId:""})}},{key:"updateComment",value:function(t,e,o,n,a,r){var i=this,s=this.props,l=s.updateComment,m=s.hasAttachments,c={content:e};(void 0===m||m)&&(c.attachmentIds=o),l(t,c,n,a,function(t){i.closeComment(),r&&r()})}},{key:"focusOnAttachments",value:function(){Object(y.l)(this.props.scrollCont,this.attachCont.offsetTop-10)}},{key:"replaceMentions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments[2];return e.length&&(t=t.replace(/zsu[@[a-z]+(#|:).+?]zsu/g,function(t,n){var a=t,r=t.split("zsu[")[1].slice(0,-4);if(0==r.indexOf("@")){if(-1!==r.indexOf("user")){for(var i=r.replace("@user#","").replace("@user:","").split("_")[0],s={},l=0;l<e.length;l++)i!=e[l].zuid&&i!=e[l].id||(s=e[l]);var m=s,c=m.id,d=m.userId,u=m.name,p=m.firstName,h=m.lastName,f=u||Object(y.e)(p,h);return o?f:'<a href="/support/arunadesk/ShowHomePage.do#setup/organization/agents/'+(d||c)+'" class='+_.a.mention+' onclick="return false">'+f+"</a>"}for(var g=r.replace("@team#","").replace("@team:","").split("_")[0],C={},v=0;v<e.length;v++)g==e[v].id&&(C=e[v]);return o?C.name:"<a class="+_.a.mention+">"+C.name+"</a>"}if(0==r.indexOf("#")&&-1==r.indexOf("activity")){var b=r.split(":"),I=b[0],E=b[2];return o?I:"<a class="+_.a.mention+" href='#Cases/dv/"+E+'\' onclick="return false">'+I+"</a>"}return a})),t}},{key:"render",value:function(){var t=this,e=this.props,o=e.comments,n=e.orgId,a=e.page,r=e.deleteComment,i=e.uploadAttach,s=e.deleleUpload,l=e.from,m=e.showAttachmentViewer,c=e.downloadAttachment,d=e.renderCommentHistory,u=(e.photoURL,e.name,e.setIsCommentChanged),p=e.revertIsCommentChanged,f=e.isCommentChanged,g=(e.showConfirmBox,e.showMessage,e.isAdminUser),C=e.hasPrivacyMode,y=void 0===C||C,k=e.haveCommentEditPermission,w=e.haveCommentDeletePermission,x=e.currentUserId,P=e.hasAttachments,O=void 0===P||P,B=e.CommentBoxContainer,T=e.isReadOnly,L=this.state.editedId,S=h.a.createElement(b.TopbandFontIcon,{name:"more",size:"20"}),D=_.a.tname;return"leftPanel"==l&&(D=D+" "+_.a.mw100),h.a.createElement("span",{className:_.a.commentLeftList},o.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments[1],C=e.id,P=e.commenter,j=e.commenterId,M=e.attachments,K=e.content,U=e.mention,z=e.isPublic,V=e.commentedTime,Z=e.modifiedTime,F=P||{},H=F.name,R=F.photoURL,q=(j==x||g)&&(k||w);return C===L?h.a.createElement(B,{id:C,isCommentChanged:f,setIsCommentChanged:u,revertIsCommentChanged:p,key:"comment"+L,type:"edit",attachments:M,value:t.replaceMentions(K,U,!0),mention:U,orgId:n,closeComment:t.closeComment,page:a,uploadAttach:i,deleleUpload:s,updateComment:t.updateComment,showAttachmentViewer:m,hasAttachments:O,hasPrivacyMode:y}):h.a.createElement(N.Container,{alignBox:"row",className:"leftPanel"==l?_.a.leftList+" "+_.a.threadList:_.a.threadList,key:o,id:C},h.a.createElement(N.Box,{className:_.a.cleft},h.a.createElement(v.a,{name:H,src:"null"!=R?R:null,size:"xmedium",iconName:"comment"!=a&&"task"!=l&&"zdeskCommentfilled",borderPalette:"comment"!=a&&"primary",iconColor:"comment"!=a&&"primary",iconSize:"comment"!=a&&"8"})),h.a.createElement("div",{className:_.a.cRight},h.a.createElement("div",null,h.a.createElement("span",{className:D,"data-title":H},H),h.a.createElement("span",{className:_.a.prithrlist},y&&"leftPanel"!=l&&"task"!=l&&h.a.createElement("span",null,z?h.a.createElement("span",{className:_.a.thrdate},h.a.createElement(I.c,{i18NKey:"support.request.public.comment"})):h.a.createElement("span",{className:_.a.thrdate},h.a.createElement(I.c,{i18NKey:"support.request.private.comment"}))),h.a.createElement("span",{className:_.a.thrdate},h.a.createElement(I.d,{to:V,format:function(){return"DD MMM YYYY hh:mm A"},ago:"ago",later:"late"})),Z&&"leftPanel"!=l&&h.a.createElement("span",{className:_.a.thrdate+" "+_.a.editTxt,onClick:d&&d.bind(t,C),"data-id":"CommentHistory"},h.a.createElement(I.c,{i18NKey:"support.request.history.commented.editedtext"})))),h.a.createElement("div",{className:"leftPanel"==l&&_.a.mt12},h.a.createElement("p",{className:_.a.thrdPlain,dangerouslySetInnerHTML:{__html:t.replaceMentions(K,U)}})),M&&M.length?h.a.createElement("div",{className:_.a.attachCont,ref:function(e){t.attachCont=e}},h.a.createElement(E.a,{data:M,downloadAttachment:c,showAttachmentViewer:m,orgId:n,size:"leftPanel"==l?"small":"medium"})):null),h.a.createElement(N.Box,{className:_.a.moreOptions},"leftPanel"!=l&&q&&!T?h.a.createElement("span",{className:_.a.rgt+" "+_.a.more},h.a.createElement(A.a,{objValues:t.constructMoreObj(),moreIcon:S,Icnsize:"16",onSelect:function(e){"Edit"==e?t.editComment(C):"Delete"==e&&r(C)},listStyle:"alpha"})):null,"leftPanel"!=l&&M&&M.length?h.a.createElement("span",{"data-title":I.f.getI18NValue("support.attachments"),className:_.a.rgt+" "+_.a.posrel,onClick:t.focusOnAttachments},h.a.createElement("span",{className:_.a.mailicn},h.a.createElement(b.TopbandFontIcon,{name:"attachment5",size:"11"})),h.a.createElement("span",{className:_.a.attachCount},M.length)):null))}))}}]),e}(h.a.Component);e.a=x,x.propTypes={CommentBoxContainer:g.a.node,closeComment:g.a.func,comments:g.a.array,currentUserId:g.a.string,deleleUpload:g.a.func,deleteComment:g.a.func,downloadAttachment:g.a.func,editComment:g.a.func,editedId:g.a.string,focusOnAttachments:g.a.func,from:g.a.string,getThread:g.a.func,hasAttachments:g.a.bool,hasPrivacyMode:g.a.bool,haveCommentDeletePermission:g.a.bool,haveCommentEditPermission:g.a.bool,isAdminUser:g.a.bool,isCommentChanged:g.a.bool,isReadOnly:g.a.bool,name:g.a.string,orgId:g.a.string,page:g.a.string,photoURL:g.a.string,renderCommentHistory:g.a.func,revertIsCommentChanged:g.a.func,scrollCont:g.a.object,setIsCommentChanged:g.a.func,showAttachmentViewer:g.a.func,showConfirmBox:g.a.func,showMessage:g.a.func,updateComment:g.a.func,uploadAttach:g.a.func}},1199:function(t,e,o){t.exports={threadList:"CommentsList-module__threadList common-module__cboth",attachCont:"CommentsList-module__attachCont",attachCount:"CommentsList-module__attachCount",peekAttachCont:"CommentsList-module__peekAttachCont",leftList:"CommentsList-module__leftList",mt12:"CommentsList-module__mt12",editTxt:"CommentsList-module__editTxt",cleft:"CommentsList-module__cleft",more:"CommentsList-module__more",cRight:"CommentsList-module__cRight common-module__flexgrow",posrel:"CommentsList-module__posrel",rgt:"CommentsList-module__rgt common-module__fright",tname:"CommentsList-module__tname common-module__bold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis common-module__ftsmooth",commentLeftList:"CommentsList-module__commentLeftList",mw100:"CommentsList-module__mw100",mw130:"CommentsList-module__mw130",thrdate:"CommentsList-module__thrdate common-module__dotted common-module__oflow common-module__ellipsis common-module__ftsmooth",showrec:"CommentsList-module__showrec",forum_status:"CommentsList-module__forum_status common-module__semibold common-module__ftsmooth common-module__ftsmooth",forum_txt:"CommentsList-module__forum_txt common-module__dotted common-module__oflow common-module__ellipsis common-module__dotted common-module__oflow common-module__ellipsis",attach_look:"CommentsList-module__attach_look",attach_count:"CommentsList-module__attach_count",mailicn:"CommentsList-module__mailicn",thrdPlain:"CommentsList-module__thrdPlain",moreOptions:"CommentsList-module__moreOptions",mention:"CommentsList-module__mention",prithrlist:"CommentsList-module__prithrlist"}},122:function(t,e,o){t.exports={attachment:"ThreadAttachments-module__attachment common-module__cboth",medium:"ThreadAttachments-module__medium",small:"ThreadAttachments-module__small",attachleft:"ThreadAttachments-module__attachleft common-module__tcenter",attachright:"ThreadAttachments-module__attachright",atatchName:"ThreadAttachments-module__atatchName common-module__dotted common-module__oflow common-module__ellipsis",attachSize:"ThreadAttachments-module__attachSize",attachDownload:"ThreadAttachments-module__attachDownload",pt8:"ThreadAttachments-module__pt8",docspan:"ThreadAttachments-module__docspan",attachCount:"ThreadAttachments-module__attachCount",mr6:"ThreadAttachments-module__mr6",ml6:"ThreadAttachments-module__ml6"}},1279:function(t,e,o){"use strict";o.d(e,"d",function(){return d}),o.d(e,"b",function(){return u}),o.d(e,"a",function(){return p}),o.d(e,"e",function(){return h}),o.d(e,"c",function(){return f});var n=o(2),a=o.n(n),r=o(5),i=o.n(r),s=o(15),l=o(3),m=o(6),c=o(7),d=function(t,e,o,n,r){return{types:Object(m.m)(e.toUpperCase()+"_GET_"+l.L.COMMENT),callAPI:function(m){return Object(s.a)(""+l.w+t+"/"+o+"/comments?sortBy=-commentedTime&from="+n+"&limit="+r+"&include=mentions",!1,{orgId:m.currentOrgId}).get().then(function(t){var r;if(204!=t.responseStatus){var s=i()({id:o},l.L.COMMENT_L,t.data);return a()({},Object(c.normalize)(s,Object(c.schema)(e,{mapping:{comment:Object(c.arrayOf)(Object(c.schema)(l.L.COMMENT_L))}})),{from:n})}return{entities:(r={},i()(r,l.L.COMMENT_L,{}),i()(r,e,[]),r),from:n}})}}},u=function(t,e,o,n,a){return{types:Object(m.m)(e.toUpperCase()+"_DELETE_"+a),callAPI:function(a,r){return Object(s.a)(""+l.w+t+"/"+o+"/comments/"+n,!1,{orgId:a.currentOrgId}).del().then(function(t){if(200==t.responseStatus){var a="0",s=r().module[e][o].commentCount;return(s=parseInt(s))&&(a=s-1),{entities:i()({},e,i()({},o,i()({},l.L.COMMENT_L,[n]))),commentCount:a,result:o}}})}}},p=function(t,e,o,n,r){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return{types:Object(m.m)(e.toUpperCase()+"_ADD_"+r),callAPI:function(r,m){return Object(s.a)(""+l.w+t+"/"+o+"/comments",!1,{orgId:r.currentOrgId}).post("",n).then(function(t){var n,r="1",s=m().module[e][o].commentCount;return(s=parseInt(s))&&s>0&&(r=s+1),{entities:(n={},i()(n,l.L.COMMENT_L,i()({},t.id,a()({},t,{mention:c}))),i()(n,e,i()({},o,i()({},l.L.COMMENT_L,[t.id]))),n),commentCount:r,result:o}})}}},h=function(t,e,o,n,r,c){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];return{types:Object(m.m)(e.toUpperCase()+"_UPDATE_"+c),callAPI:function(e){return Object(s.a)(""+l.w+t+"/"+o+"/comments/"+n,!1,{orgId:e.currentOrgId}).patch("",r).then(function(t){return{entities:i()({},l.L.COMMENT_L,i()({},n,a()({},t,{mention:d})))}})}}},f=function(t,e){return{types:Object(m.m)("COMMENTHISTORY"),callAPI:function(o){return Object(s.a)(l.w+"tickets/"+t+"/comments/"+e+"/history",!1,{orgId:o.currentOrgId}).get().then(function(t){return{data:t.data,entities:{},result:[]}})}}}},1560:function(t,e,o){},174:function(t,e,o){"use strict";o.d(e,"c",function(){return s}),o.d(e,"e",function(){return l}),o.d(e,"d",function(){return m}),o.d(e,"j",function(){return c}),o.d(e,"n",function(){return d}),o.d(e,"o",function(){return u}),o.d(e,"k",function(){return p}),o.d(e,"i",function(){return h}),o.d(e,"g",function(){return g}),o.d(e,"h",function(){return C}),o.d(e,"a",function(){return _}),o.d(e,"l",function(){return b}),o.d(e,"b",function(){return I}),o.d(e,"m",function(){return E}),o.d(e,"f",function(){return A});var n=o(11),a=o.n(n),r=o(177),i=o(8);function s(t){var e=m(t),o=Object(r.a)().toLowerCase()||"",n=navigator.platform.toLowerCase()||"";switch(e){case"jpeg":case"jpg":case"png":case"gif":case"bmp":case"tiff":case"tif":case"ico":return"filePicture";case"txt":case"rtf":return"fileText2";case"pdf":return"filePdf";case"html":case"htm":case"xhtml":return-1!==o.indexOf("chrome")||-1!==o.indexOf("safari")?"chrome":-1!==o.indexOf("ie")||-1!==o.indexOf("edge")?"ie":"firefox";case"ppt":case"pps":case"odp":case"sxi":case"pptx":return"ppt";case"rar":case"jar":case"zip":return"zip3";case"doc":case"docx":case"sxw":case"odt":return-1!==n.indexOf("mac")||-1!==n.indexOf("linux")?"fileOpenoffice":"fileWord";case"xml":return"xml";case"xls":case"xlsx":case"sxc":case"ods":case"csv":case"tsv":return"fileExcel";case"ics":return"ics";case"exe":return"exe";case"sh":case"bin":return"sh2";case"css":return"css52";case"mp3":case"wav":case"wma":case"aac":case"m4r":case"ogg":return"fileMusic";case"mp4":case"mkv":case"mov":case"mpeg":case"flv":case"avi":case"webm":return"fileVideo";default:return"unknown"}}function l(t){return(t=parseInt(t))<1e3?t+" Bytes":t<1e6?(t/1e3).toFixed(1)+" KB":t>=1e6?(t/1e6).toFixed(1)+" MB":void 0}function m(t){return t&&t.indexOf(".")?t.substring(t.lastIndexOf(".")+1,t.length).toLowerCase():""}function c(t){var e=m(t);return-1!=="jpeg|jpg|png|gif|bmp|ico".indexOf(e)}function d(t,e){var o={inValidArray:[],validArray:[]};if(e+t.length>10)return o.isCountExceeds=!0,o;for(var n=0;n<t.length;n++){var a=t[n],r=a.name,i=a.size;p(r)?o.inValidArray.push({isUnSupported:!0}):h(r)?o.inValidArray.push({isFileNameSizeInvalid:!0}):0===a.size?o.inValidArray.push({isEmpty:!0}):f(i)?o.inValidArray.push({isAttachSizeExceeded:!0}):o.validArray.push(a)}return o}function u(t,e,o){if(e+t.length>10)alert(i.f.getI18NValue("support.attachments.count.exceeds",[10]));else for(var n=0;n<t.length;n++){var a=t[n],r=a.name,s=a.size;if(p(r))alert(i.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted"));else if(h(r))alert(i.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation"));else if(0!==a.size)if(f(s))alert(i.f.getI18NValue("support.feedback.uploaded.file.exceeds.20mb"));else{var l=new FormData;l.append("file",a),o&&o(l)}else alert(i.f.getI18NValue("support.request.empty.attachment.message"))}}function p(t){var e=t.split(".").pop().toLowerCase();return-1!==["ade","adp","bat","chm","cmd","com","cpl","exe","hta","ins","isp","jar","lib","lnk","mde","msc","msp","mst","pif","scr","sct","shb","sys","vb","vbe","vxd","wsc","wsf","wsh","jse","vbs"].indexOf(e)}function h(t){return t.length>100}function f(t){return t>20971520}function g(t){var e=0;return t.forEach(function(t){e+=parseInt(t.size)}),e}function C(t,e){return!(!(null!==t.types||t.files&&t.files.length>0)||e.fromPaste||!(t.files&&t.files.length>0||(t.types.indexOf?-1!==t.types.indexOf("Files"):t.types.contains("application/x-moz-file"))||"Files"===t.types[0]))}function _(t,e,o){var n={};n.previewData=e.filter(function(t){return!t.isPreview&&c(t.name)}),n.previewData.filter(function(e,o){e.id===t&&(n.selectedIndex=o)}),o&&o(n)}function v(t,e,o){var n=t.indexOf("/api"),a=t;return n>-1&&(a=t.slice(n,t.length),a+="?orgId="+e+(o?"&inline=true":"")),a}function b(t,e){window.open(v(t,e,!0))}function I(t,e){window.location.href=v(t,e,!1)}function E(t,e,o,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=t.length,m=[],c=[],d=0;if(n&&l>n-o){var u=i.f.getI18NValue("support.attachments.count.exceeds",[n]);return a.a.resolve({isError:!0,errorI18N:u})}for(var f=0;f<l;f++){var g=t[f],C=g||{},_=C.size,v=void 0===_?0:_,b=C.name,I=void 0===b?"":b;if(d+=v,p(I)){var E=i.f.getI18NValue("support.community.attachmentcontent.extensionnotpermitted");m.push({errorI18N:E,fileName:I,errorType:"fileType"})}else if(h(I)){var A=i.f.getI18NValue("support.comments.attachment.fileNameSizeLimitation");m.push({errorI18N:A,fileName:I,errorType:"fileNameSize"})}else if(0===v){var y=i.f.getI18NValue("support.request.empty.attachment.message");m.push({errorI18N:y,fileName:I,errorType:"emptyFile"})}else c.push(g)}if(!c.length){if(1===m.length){var k=m[0].errorI18N;return a.a.resolve({isError:!0,errorI18N:k})}var w=i.f.getI18NValue("support.unable.to.process.your.request");return a.a.resolve({isError:!0,errorI18N:w})}if(0===d){var N=i.f.getI18NValue("support.request.empty.attachment.message");return a.a.resolve({isError:!0,errorI18N:N})}if(d+s>1024*r*1024){var x=i.f.getI18NValue("support.attachments.size.limit.exceeds",[r]);return a.a.resolve({isError:!0,errorI18N:x})}for(var P=[],O=[],B=[],T=function(t){var o=c[t];if(e){var n=new FormData;n.append("file",o);var a=e(n).then(function(t){var e=(t.data||{}).data,o=void 0===e?{}:e,n=o.id;n&&(P.push(o),O.push(n))},function(t){var e=o.name,n=i.f.getI18NValue("support.unable.to.process.your.request");throw m.push({errorI18N:n,fileName:e,errorType:"apiError"}),t});B.push(a)}},L=0;L<c.length;L++)T(L);var S={uploadFiles:P,inValidFiles:m,isError:!1,uploadFileIds:O};return a.a.all(B).then(function(){return S},function(){return P.length?S:{isError:!0,errorI18N:i.f.getI18NValue("support.unable.to.process.your.request")}})}function A(t,e){var o=t.name;return{index:e,isPreview:!0,size:t.size,name:o,href:URL.createObjectURL(t)}}},459:function(t,e,o){"use strict";var n=o(12),a=o.n(n),r=o(9),i=o.n(r),s=o(10),l=o.n(s),m=o(13),c=o.n(m),d=o(14),u=o.n(d),p=o(0),h=o.n(p),f=o(1),g=o.n(f),C=o(122),_=o.n(C),v=o(176),b=o.n(v),I=o(120),E=o.n(I),A=o(174),y=o(109),k=o(8),w=function(t){function e(){return i()(this,e),c()(this,(e.__proto__||a()(e)).apply(this,arguments))}return u()(e,t),l()(e,[{key:"render",value:function(){var t=this,e=this.props,o=e.data,n=e.orgId,a=e.showAttachmentViewer,r=e.size,i=e.neNeedToDownload,s=e.dataId,l=Object(A.g)(o);return h.a.createElement("div",null,h.a.createElement("div",{className:_.a.AttachCount,"data-id":s},h.a.createElement("span",{className:_.a.mr6},o.length),h.a.createElement("span",null,h.a.createElement(k.c,{i18NKey:"label.attachments"})),h.a.createElement("span",{className:_.a.ml6},"(",Object(A.e)(l),")")),o.map(function(e,s){var l=Object(A.j)(e.name);return h.a.createElement("div",{className:_.a.docspan,key:s,onClick:i?null:l?A.a.bind(t,e.id,o,function(t){a(t)}):A.l.bind(t,e.viewUrl?e.viewUrl:e.href,n),"data-id":1===o.length?"threadAttch":"threadAttch_"+s},h.a.createElement("span",{className:_.a.attachment+" "+_.a[r]},h.a.createElement("div",{className:_.a.attachleft},h.a.createElement(b.a,{name:Object(A.c)(e.name),size:"20"})),h.a.createElement("div",{className:_.a.attachright},h.a.createElement("span",{className:_.a.atatchName},e.name),h.a.createElement("span",{className:_.a.attachSize},Object(A.e)(e.size))),i?null:h.a.createElement(y.a,{onClick:t.props.downloadAttachment.bind(t,e.downloadUrl?e.downloadUrl:e.href),target:"_blank",className:_.a.attachDownload},h.a.createElement(E.a,{name:"downloadNew",size:"medium"==r?"14":"13",color:"pure"}))))}))}}]),e}(h.a.Component);e.a=w,w.propTypes={data:g.a.array,dataId:g.a.string,downloadAttachment:g.a.func,neNeedToDownload:g.a.bool,orgId:g.a.string,showAttachmentViewer:g.a.func,size:g.a.string},w.defaultProps={size:"medium"}},545:function(t,e,o){"use strict";o.r(e);var n=o(5),a=o.n(n),r=o(12),i=o.n(r),s=o(9),l=o.n(s),m=o(10),c=o.n(m),d=o(13),u=o.n(d),p=o(14),h=o.n(p),f=o(0),g=o.n(f),C=o(1),_=o.n(C),v=o(26),b=o(1279),I=o(74),E=o(242),A=o(24),y=o(1155),k=o(1198),w=o(1038),N=o(65),x=o(1560),P=o.n(x),O=o(17),B=o(6),T=o(53),L=o(8),S=o(204),D=o(3),j=function(t){function e(t){l()(this,e);var o=u()(this,(e.__proto__||i()(e)).call(this,t)),n=o.props,a=n.commentIds,r=n.comment;return o.state={comment:r,commentIds:a,from:1,limit:15,noMoreData:!1},o.downloadAttachment=o.downloadAttachment.bind(o),o.deleteComment=o.deleteComment.bind(o),o.addComment=o.addComment.bind(o),o.uploadAttach=o.uploadAttach.bind(o),o.deleleUpload=o.deleleUpload.bind(o),o.updateComment=o.updateComment.bind(o),o.fetchData=o.fetchData.bind(o),o.renderCommentHistory=o.renderCommentHistory.bind(o),o.handleError=o.handleError.bind(o),o}return h()(e,t),c()(e,[{key:"componentDidMount",value:function(){var t=this,e=this.state.noMoreData;Object(S.a)(D.j,"js","ZohoDeskEditor").then(function(){t.setState({isEditorLoaded:!0})}),e||this.fetchData(this.state.from)}},{key:"componentDidUpdate",value:function(t){t.moduleId!=this.props.moduleId&&this.fetchData(this.state.from)}},{key:"downloadAttachment",value:function(t){this.props.downloadAttachment(t)}},{key:"componentWillReceiveProps",value:function(t){t.comment==this.props.comment&&t.commentIds==this.props.commentIds||this.setState({commentIds:t.commentIds,comment:t.comment})}},{key:"deleteComment",value:function(t){var e=this.props,o=e.module,n=e.module_s,a=e.moduleId,r=e.deleteComment;(0,e.showConfirmBox)({type:"delete",submitText:L.f.getI18NValue("crm.button.delete"),cancelText:L.f.getI18NValue("support.label.cancel"),title:L.f.getI18NValue("support.label.delete.comment"),message:L.f.getI18NValue("support.task.label.comment.delete"),isActive:!0,palette:"danger"}).then(function(){r(o,n,a,t,"COMMENT")}).catch(function(){})}},{key:"addComment",value:function(t,e,o){var n=this.props,a=n.module,r=n.module_s,i=n.moduleId,s=n.addComment,l=n.zAppHookEvent,m=(n.hasAttachments,function(){s(a,r,i,t,"COMMENT",e).then(function(t){o&&o(t)})});"tickets"==a?l("ticket.comment",{ticketId:i,content:t.content,isPublic:t.isPublic},m):m()}},{key:"updateComment",value:function(t,e,o,n,a){var r=this.props,i=r.module,s=r.module_s,l=r.moduleId,m=r.updateComment,c=r.zAppHookEvent,d=function(){m(i,s,l,t,e,"COMMENT",n).then(function(t){a&&a()},function(){a&&a()})};"tickets"==i?c("ticket.comment.edit",{commentId:t,oldContent:o,newContent:e.content,ticketId:l},d):d()}},{key:"handleError",value:function(){this.props.showMessage({type:"alert",message:L.f.getI18NValue("support.unable.to.process.your.request")})}},{key:"uploadAttach",value:function(t,e,o){var n=this;return this.props.uploadAttach(t,e,function(t,e){o(t,e)}).then(function(t){return t},function(t){throw n.handleError(),{attachIndex:e,err:t}})}},{key:"deleleUpload",value:function(t){var e=this;return this.props.deleleUpload(t).catch(function(){e.handleError()})}},{key:"fetchData",value:function(t){var e=this,o=this.props,n=o.module,a=o.module_s,r=o.moduleId,i=o.getComments,s=this.state,l=s.limit;if(!s.noMoreData)return i(n,a,r,t,l).then(function(o){e.setState({from:t,noMoreData:o.data.entities[a][r].comment.length<l})})}},{key:"renderCommentHistory",value:function(t){var e=this.props,o=e.moduleId,n=e.openLookUp,a=e.showCommentHistory;n("commentHistory"),a({ticketId:o,commentId:t})}},{key:"render",value:function(){var t,e=this,o=this.state,n=o.commentIds,r=o.comment,i=o.from,s=o.limit,l=o.noMoreData,m=o.isEditorLoaded,c=this.props,d=c.showAttachmentViewer,u=c.myInfo,p=c.setIsCommentChanged,h=c.revertIsCommentChanged,f=c.isCommentChanged,C=c.moduleId,_=c.showConfirmBox,v=c.showMessage,b=c.isAdminUser,I=c.haveCommentEditPermission,E=c.haveCommentDeletePermission,A=c.currentUserId,x=c.hasAttachments,O=c.hasPrivacyMode,T=c.havePublicComment,S=c.showCommentBox,D=void 0===S||S,j=c.isReadOnly,M=c.emptyMessage,K=[];if(n)for(var U=0;U<n.length;U++)K.push(r[n[U]]);return K?g.a.createElement(N.Card,{className:"leftPanel"==this.props.from?P.a.leftList:P.a.subTabList,needToFetch:!0,from:i,limit:s,noMoreData:l,fetchData:this.fetchData,noNeedUpScroll:!0},g.a.createElement(N.CardHeader,null,m&&D?g.a.createElement(y.a,(t={hasPrivacyMode:O,id:C},a()(t,"hasPrivacyMode",O),a()(t,"hasAttachments",x),a()(t,"addComment",this.addComment),a()(t,"uploadAttach",this.uploadAttach),a()(t,"deleleUpload",this.deleleUpload),a()(t,"orgId",this.props.orgId),a()(t,"from",this.props.from),a()(t,"showAttachmentViewer",d),a()(t,"isCommentChanged",f),a()(t,"setIsCommentChanged",p),a()(t,"revertIsCommentChanged",h),a()(t,"editorMode","leftPanel"==this.props.from?"replyComments":"CommentEditor"),a()(t,"havePublicComment",T),a()(t,"updateComment",this.updateComment),t)):null),g.a.createElement(N.CardContent,{eleRef:function(t){e.scrollCont=t}},K.length?g.a.createElement(k.a,{comments:K,downloadAttachment:this.downloadAttachment,deleteComment:this.deleteComment,updateComment:this.updateComment,uploadAttach:this.uploadAttach,deleleUpload:this.deleleUpload,page:"comment",orgId:this.props.orgId,from:this.props.from,showAttachmentViewer:d,photoURL:u.photoURL,name:Object(B.e)(u.firstName,u.lastName),scrollCont:this.scrollCont,isCommentChanged:f,setIsCommentChanged:p,revertIsCommentChanged:h,showConfirmBox:_,showMessage:v,renderCommentHistory:this.renderCommentHistory,isAdminUser:b,haveCommentEditPermission:I,haveCommentDeletePermission:E,currentUserId:A,hasAttachments:x,hasPrivacyMode:O,CommentBoxContainer:y.a,moduleId:C,isReadOnly:j}):D?null:g.a.createElement(w.a,{subtabName:L.f.getI18NValue("tabs.request.comment"),emptyMessage1:L.f.getI18NValue("support.comment.notfound"),emptyMessage2:M||"",noNeedToShowAdd:!0,noNeedToShowHelp:!0}))):g.a.createElement("div",null,"Loading")}}]),e}(f.Component);j.propTypes={addComment:_.a.func,comment:_.a.object,commentCount:_.a.number,commentIds:_.a.array,currentUserId:_.a.string,deleleUpload:_.a.func,deleteComment:_.a.func,downloadAttachment:_.a.func,emptyMessage:_.a.string,from:_.a.string,getComments:_.a.func,hasAttachments:_.a.bool,hasPrivacyMode:_.a.bool,haveCommentDeletePermission:_.a.bool,haveCommentEditPermission:_.a.bool,havePublicComment:_.a.bool,id:_.a.string,isAdminUser:_.a.bool,isCommentChanged:_.a.bool,isReadOnly:_.a.bool,module:_.a.string,moduleId:_.a.string,module_s:_.a.string,myInfo:_.a.object,openLookUp:_.a.func,orgId:_.a.string,revertIsCommentChanged:_.a.func,setIsCommentChanged:_.a.func,showAttachmentViewer:_.a.func,showCommentBox:_.a.bool,showCommentHistory:_.a.func,showConfirmBox:_.a.func,showMessage:_.a.func,updateComment:_.a.func,uploadAttach:_.a.func,zAppHookEvent:_.a.func},e.default=Object(v.connect)(function(t,e){var o=t.ticketUIState.isCommentChanged,n=void 0!==o&&o,a=t.module[e.module_s][e.moduleId];return{comment:t.module.comment,commentIds:a.comment||[],commentCount:parseInt(a.commentCount),orgId:Object(O.N)(t),myInfo:t.myInfo,isCommentChanged:n}},{getComments:b.d,downloadAttachment:E.e,deleteComment:b.b,addComment:b.a,uploadAttach:E.k,deleleUpload:E.d,updateComment:b.e,showAttachmentViewer:E.i,zAppHookEvent:T.m,setIsCommentChanged:I.s,revertIsCommentChanged:I.q,showConfirmBox:A.a.showConfirmBox,showMessage:A.Q,openLookUp:A.G,showCommentHistory:A.O})(j)},956:function(t,e,o){"use strict";o.d(e,"i",function(){return u}),o.d(e,"g",function(){return p}),o.d(e,"b",function(){return h}),o.d(e,"j",function(){return f}),o.d(e,"h",function(){return g}),o.d(e,"c",function(){return C}),o.d(e,"e",function(){return _}),o.d(e,"a",function(){return v}),o.d(e,"k",function(){return I}),o.d(e,"d",function(){return A}),o.d(e,"f",function(){return y}),o.d(e,"l",function(){return k});o(20);var n=o(2),a=o.n(n),r=o(15),i=o(6),s=o(7),l=o(17),m=o(46),c=o(3),d=o(39);function u(t){return{types:Object(i.m)("AGENTS_COUNT"),callAPI:function(e){var o=Object(l.r)(e);return Object(r.a)("/api/v1/agentsTicketsCount?"+Object(m.a)(e)+"&agentIds="+t,!1,{orgId:e.currentOrgId}).get().then(function(t){return 204!==t.responseStatus?(t.data=t.data.map(function(t){return a()({},t,{id:t.agentId})}),{countData:t.data,deptId:o}):{}})}}}function p(t,e,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{types:Object(i.m)(c.L.AGENT),callAPI:function(i){return Object(r.a)("/api/v1/agents?"+(t&&"allDepartment"!==t?"departmentId="+t:"")+"&from="+e+"&limit="+o+"&status=ACTIVE&isConfirmed="+n,!1,{orgId:i.currentOrgId}).get().then(function(e){if(204!==e.responseStatus){var n=e.data.length<o,r=Object(s.normalize)(e.data,Object(s.arrayOf)(Object(s.schema)(c.L.AGENT_L)));return a()(r,{noMoreData:n,depId:t})}return{entities:{noMoreData:!0},result:[]}})}}}function h(t,e){return{types:Object(i.m)(c.L.AGENT),callAPI:function(o){return Object(r.a)("/api/v1/agents/"+t,!1,{orgId:o.currentOrgId}).get().then(function(t){var o=Object(s.normalize)(t,Object(s.schema)(c.L.AGENT_L));return a()(o,{depId:e})})}}}function f(t,e,o){return{types:Object(i.m)("AGENT_SEARCH"),callAPI:function(n){return Object(r.a)("/api/v1/agents?searchStr="+t+"&from="+e+"&limit="+o,!1,{orgId:n.currentOrgId}).get().then(function(t){if(204!==t.responseStatus){var n=t.data.length<o,r=Object(s.normalize)(t.data,Object(s.arrayOf)(Object(s.schema)(c.L.AGENT_L)));return a()(r,{noMoreData:n})}return 1===e?{entities:{noMoreData:!0,isEmpty:!0},result:[]}:{entities:{noMoreData:!0},result:[]}})}}}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1],o=arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.u,d=arguments[4];return{types:Object(i.m)(c.L.AGENT),callAPI:function(i){var u={activeAgents:"status=ACTIVE",deActiveAgents:"status=DISABLED",notConfirmedAgents:"isConfirmed=false",allAgents:"",activeConfirmedAgents:"status=ACTIVE&isConfirmed=true",activeConfirmedNonLightAgents:"status=ACTIVE&isConfirmed=true&rolePermissionType=${NON_LIGHT}"}[t.replace("Search","")]||"",p=d||Object(l.r)(i),h=d?"&departmentId="+d:Object(m.a)(i,!0),f="/api/v1/agents?"+(u?u+"&":"")+"from="+e+"&limit="+(2*n>200?200:2*n)+(o?"&searchStr=*"+o+"*":"")+h;return Object(r.a)(encodeURI(f),!1,{orgId:i.currentOrgId}).get().then(function(r){return a()({},Object(s.normalize)(204!==r.responseStatus?r.data:[],Object(s.arrayOf)(Object(s.schema)(c.L.AGENT_L))),{deptId:p,from:e,limit:n,isNext:!!r.data&&r.data.length>n,searchStr:o,agentType:t})},function(t){throw t})}}}function C(t){return{types:Object(i.m)("AGENT"),shouldCallAPI:function(){return t.length>=1},callAPI:function(e){return Object(r.a)("/api/v1/agentsByIds?agentIds="+t.join(),!1,{orgId:e.currentOrgId}).get().then(function(t){return Object(s.normalize)(204!==t.responseStatus?t.data:[],Object(s.arrayOf)(Object(s.schema)(c.L.AGENT_L)))})}}}function _(t){return{types:Object(i.m)("TEAM_AGENT"),callAPI:function(e){return Object(r.a)("/api/v1/teams/"+t+"/members",!1,{orgId:e.currentOrgId}).get().then(function(t){return Object(s.normalize)(t.members,Object(s.arrayOf)(Object(s.schema)(c.L.AGENT_L)))})}}}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],o="";return e.map(function(e){void 0!==t[e]&&(o+="&"+e+"="+t[e])}),o}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],o=arguments[2];return void 0!==t[e]?t[e]:o}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=b(t,"searchType","string"),o=t.searchStr;return o&&(o="string*"==e?o+"*":"*string*"==e?"*"+o+"*":o),o}function E(t){var e=t.isConfirmed,o=t.status;switch(o){case d.a:return d.a;case d.d:return d.d;case d.c:return d.c;default:if(void 0!==e&&!e)return d.l;if(void 0===o)return d.b}}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.from=b(t,"from","1"),t.limit=b(t,"limit","100"),t.searchStr=I(t);var e=t.from>1?d.k:d.j;return{types:Object(i.m)(e),callAPI:function(e){var o="/api/v1/agents?orgId="+e.currentOrgId;return o+=v(t,["from","limit","status","isConfirmed","searchStr","departmentId","departmentIds","profileIds","roleIds"]),Object(r.a)(o).get().then(function(e){return a()(Object(s.normalize)(void 0!==e.data?e.data:[],Object(s.arrayOf)(Object(s.schema)(c.L.AGENT_L))),{status:E(t)})})}}}function y(t,e,o){var n={status:t,isConfirmed:e,includeLightAgent:o};return n.includeLightAgent=b(n,"includeLightAgent",!0),{types:Object(i.m)(d.i),callAPI:function(t){var e="/api/v1/agents/count?orgId="+t.currentOrgId;return e+=v(n,["status","isConfirmed","includeLightAgent"]),Object(r.a)(e).get().then(function(t){return a()({},t,{status:E(n)})})}}}function k(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:d.m,data:{isEnabled:t}}}},997:function(t,e,o){"use strict";function n(){for(var t=this,e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];o.forEach(function(e){t[e]=t[e].bind(t)})}o.d(e,"a",function(){return n})}}]);