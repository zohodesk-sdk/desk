(window.deskappJsonp=window.deskappJsonp||[]).push([[55],{1279:function(t,e,n){"use strict";n.d(e,"d",function(){return l}),n.d(e,"b",function(){return d}),n.d(e,"a",function(){return p}),n.d(e,"e",function(){return y}),n.d(e,"c",function(){return _});var o=n(2),m=n.n(o),a=n(5),r=n.n(a),i=n(15),s=n(3),c=n(6),u=n(7),l=function(t,e,n,o,a){return{types:Object(c.m)(e.toUpperCase()+"_GET_"+s.L.COMMENT),callAPI:function(c){return Object(i.a)(""+s.w+t+"/"+n+"/comments?sortBy=-commentedTime&from="+o+"&limit="+a+"&include=mentions",!1,{orgId:c.currentOrgId}).get().then(function(t){var a;if(204!=t.responseStatus){var i=r()({id:n},s.L.COMMENT_L,t.data);return m()({},Object(u.normalize)(i,Object(u.schema)(e,{mapping:{comment:Object(u.arrayOf)(Object(u.schema)(s.L.COMMENT_L))}})),{from:o})}return{entities:(a={},r()(a,s.L.COMMENT_L,{}),r()(a,e,[]),a),from:o}})}}},d=function(t,e,n,o,m){return{types:Object(c.m)(e.toUpperCase()+"_DELETE_"+m),callAPI:function(m,a){return Object(i.a)(""+s.w+t+"/"+n+"/comments/"+o,!1,{orgId:m.currentOrgId}).del().then(function(t){if(200==t.responseStatus){var m="0",i=a().module[e][n].commentCount;return(i=parseInt(i))&&(m=i-1),{entities:r()({},e,r()({},n,r()({},s.L.COMMENT_L,[o]))),commentCount:m,result:n}}})}}},p=function(t,e,n,o,a){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return{types:Object(c.m)(e.toUpperCase()+"_ADD_"+a),callAPI:function(a,c){return Object(i.a)(""+s.w+t+"/"+n+"/comments",!1,{orgId:a.currentOrgId}).post("",o).then(function(t){var o,a="1",i=c().module[e][n].commentCount;return(i=parseInt(i))&&i>0&&(a=i+1),{entities:(o={},r()(o,s.L.COMMENT_L,r()({},t.id,m()({},t,{mention:u}))),r()(o,e,r()({},n,r()({},s.L.COMMENT_L,[t.id]))),o),commentCount:a,result:n}})}}},y=function(t,e,n,o,a,u){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];return{types:Object(c.m)(e.toUpperCase()+"_UPDATE_"+u),callAPI:function(e){return Object(i.a)(""+s.w+t+"/"+n+"/comments/"+o,!1,{orgId:e.currentOrgId}).patch("",a).then(function(t){return{entities:r()({},s.L.COMMENT_L,r()({},o,m()({},t,{mention:l})))}})}}},_=function(t,e){return{types:Object(c.m)("COMMENTHISTORY"),callAPI:function(n){return Object(i.a)(s.w+"tickets/"+t+"/comments/"+e+"/history",!1,{orgId:n.currentOrgId}).get().then(function(t){return{data:t.data,entities:{},result:[]}})}}}},1623:function(t,e,n){t.exports={topDiv:"CommentHistory-module__topDiv",topName:"CommentHistory-module__topName common-module__semibold common-module__ftsmooth",closeIcon:"CommentHistory-module__closeIcon",cmthistyCont:"CommentHistory-module__cmthistyCont",cmtDiv:"CommentHistory-module__cmtDiv",dateTimeDiv:"CommentHistory-module__dateTimeDiv",timeDiv:"CommentHistory-module__timeDiv",dateDiv:"CommentHistory-module__dateDiv",comntDtls:"CommentHistory-module__comntDtls",avatrDiv:"CommentHistory-module__avatrDiv",cmtRightDiv:"CommentHistory-module__cmtRightDiv",comments:"CommentHistory-module__comments",cmntType:"CommentHistory-module__cmntType",attachCount:"CommentHistory-module__attachCount",attachList:"CommentHistory-module__attachList",cmntMode:"CommentHistory-module__cmntMode",dot:"CommentHistory-module__dot",cmntName:"CommentHistory-module__cmntName"}},685:function(t,e,n){"use strict";n.r(e);var o=n(12),m=n.n(o),a=n(9),r=n.n(a),i=n(10),s=n.n(i),c=n(13),u=n.n(c),l=n(14),d=n.n(l),p=n(0),y=n.n(p),_=n(1),h=n.n(_),f=n(26),C=n(1623),v=n.n(C),E=n(30),N=n(64),H=n.n(N),I=n(8),O=n(6),g=n(16),D=function(t){function e(){return r()(this,e),u()(this,(e.__proto__||m()(e)).apply(this,arguments))}return d()(e,t),s()(e,[{key:"render",value:function(){var t=this.props,e=t.hideCommentHistory,n=t.historyList;return y.a.createElement(g.Container,{alignBox:"column"},y.a.createElement(g.Box,{className:v.a.topDiv},y.a.createElement("span",{className:v.a.topName},I.f.getI18NValue("support.request.history.commented.commenthistory")),y.a.createElement("span",{className:v.a.closeIcon,onClick:e,"data-id":"CloseHistory"},y.a.createElement(E.GettingstartedFontIcon,{name:"closee",size:"28"}))),y.a.createElement(g.Box,{flexible:!0,className:v.a.cmthistyCont,scroll:"vertical"},n.length?n.map(function(t,e){var n=t.attachments.length,o=t.commenter,m=o.name,a=o.photoURL,r=I.f.userDateFormat(new Date(t.commentedTime),{},"lateby","left",!1,function(){return"hh:mm A"});return y.a.createElement("div",{className:v.a.cmtDiv,key:e},y.a.createElement("div",{className:v.a.dateTimeDiv},y.a.createElement("span",{className:v.a.timeDiv},r)),y.a.createElement("div",{className:v.a.comntDtls},y.a.createElement("span",{className:v.a.avatrDiv},a?y.a.createElement(H.a,{src:a,name:m,size:"medium",title:m}):y.a.createElement(H.a,{name:Object(O.u)(m),size:"medium",title:m})),y.a.createElement("div",{className:v.a.cmtRightDiv},y.a.createElement("p",{className:v.a.comments,dangerouslySetInnerHTML:{__html:t.content}})),y.a.createElement("div",{className:v.a.cmntType},y.a.createElement("span",{className:v.a.cmntMode},t.isPublic?I.f.getI18NValue("support.request.public"):I.f.getI18NValue("support.department.type.internal")),y.a.createElement("span",{className:v.a.dot},"."),y.a.createElement("span",{className:v.a.cmntName},m)),n?[y.a.createElement("div",{className:v.a.attachCount,key:"header"},n," ",I.f.getI18NValue("support.attachments")),y.a.createElement("div",{className:v.a.attachList,key:"list"},"("+t.attachments.map(function(t){return" "+t})+")")]:null))}):null))}}]),e}(y.a.Component),L=D;D.propTypes={hideCommentHistory:h.a.func,historyList:h.a.array};var T=n(24),b=n(1279),M=function(t){function e(t){r()(this,e);var n=u()(this,(e.__proto__||m()(e)).call(this,t));return n.state={historyList:[]},n}return d()(e,t),s()(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.commentHistoryInfo;(0,e.getCommentHistory)(n.ticketId,n.commentId).then(function(e){t.setState({historyList:e.data.data})})}},{key:"render",value:function(){var t=this.props.hideCommentHistory,e=this.state.historyList;return y.a.createElement(L,{hideCommentHistory:t,historyList:e})}}]),e}(p.Component);M.propTypes={commentHistoryInfo:h.a.object,getCommentHistory:h.a.func,hideCommentHistory:h.a.func};e.default=Object(f.connect)(function(t,e){return{commentHistoryInfo:t.commentHistoryInfo}},{hideCommentHistory:T.v,getCommentHistory:b.c})(M)}}]);