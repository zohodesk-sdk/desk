(window.deskappJsonp=window.deskappJsonp||[]).push([[48],{1697:function(e,t,n){e.exports={header:"AttachmentViewer-module__header common-module__alignBetween",title:"AttachmentViewer-module__title common-module__semibold common-module__ftsmooth common-module__dotted common-module__oflow common-module__ellipsis",count:"AttachmentViewer-module__count",menuBar:"AttachmentViewer-module__menuBar",menu:"AttachmentViewer-module__menu",menuGroup:"AttachmentViewer-module__menuGroup common-module__dInflex",arrowBox:"AttachmentViewer-module__arrowBox common-module__coverafter",arrow:"AttachmentViewer-module__arrow",preview:"AttachmentViewer-module__preview",zoomIn:"AttachmentViewer-module__zoomIn common-module__middleBoth common-module__middle",zoomOut:"AttachmentViewer-module__zoomOut",button:"AttachmentViewer-module__button",visible:"AttachmentViewer-module__visible",hidden:"AttachmentViewer-module__hidden",footer:"AttachmentViewer-module__footer",footerActive:"AttachmentViewer-module__footerActive",listContainer:"AttachmentViewer-module__listContainer",imgList:"AttachmentViewer-module__imgList",imgItem:"AttachmentViewer-module__imgItem",image:"AttachmentViewer-module__image",selected:"AttachmentViewer-module__selected",downArrow:"AttachmentViewer-module__downArrow",mymove:"AttachmentViewer-module__mymove"}},563:function(e,t,n){"use strict";n.r(t);var o=n(12),a=n.n(o),i=n(9),m=n.n(i),l=n(10),r=n.n(l),c=n(13),s=n.n(c),d=n(14),u=n.n(d),h=n(0),w=n.n(h),_=n(1),p=n.n(_),f=n(30),g=n(16),v=n(1697),I=n.n(v),x=n(109),V=function(e){function t(e){m()(this,t);var n=s()(this,(t.__proto__||a()(t)).call(this,e));return n.state={isPViewListOpen:!0,selectedIndex:n.props.previewObj.selectedIndex,isZoomed:!1},n.togglePViewList=n.togglePViewList.bind(n),n.changeSelectedIndex=n.changeSelectedIndex.bind(n),n.closeAttachmentViewer=n.closeAttachmentViewer.bind(n),n.toogleZoom=n.toogleZoom.bind(n),n}return u()(t,e),r()(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({isPViewListOpen:!1})},3e3)}},{key:"togglePViewList",value:function(){var e=this;this.setState(function(e){return{isPViewListOpen:!e.isPViewListOpen}},function(){e.focusSelectedImg(e.state.selectedIndex)})}},{key:"toogleZoom",value:function(){this.setState(function(e){return{isZoomed:!e.isZoomed}})}},{key:"constructImgURL",value:function(e){return e+"?orgId="+this.props.orgId+"&inline=true"}},{key:"changeSelectedIndex",value:function(e){var t=this;this.setState({selectedIndex:e},function(){t.focusSelectedImg(e)})}},{key:"focusSelectedImg",value:function(e){var t=this["img_"+e];if(t){var n=this.imgListCont;t.offsetLeft;n.scrollLeft=t.offsetLeft}}},{key:"handleKeyUp",value:function(e){if(27==e.keyCode)this.closeAttachmentViewer();else if(37==e.keyCode){var t=this.state.selectedIndex;0!=t&&this.changeSelectedIndex(t-1)}else if(39==e.keyCode){var n=this.state.selectedIndex;n!=this.props.previewObj.previewData.length-1&&this.changeSelectedIndex(n+1)}}},{key:"closeAttachmentViewer",value:function(){this.setState({isPViewListOpen:!1,isZoomed:!1}),this.props.hideAttachmentViewer()}},{key:"componentWillMount",value:function(){window.addEventListener("keyup",this.handleKeyUp.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.handleKeyUp.bind(this))}},{key:"render",value:function(){var e=this,t=this.props.previewObj.previewData||[],n=this.state,o=n.isPViewListOpen,a=n.selectedIndex,i=n.isZoomed,m=t.length,l=t[a]||{},r=l.viewUrl?l.viewUrl:this.constructImgURL(l.href);return w.a.createElement(g.Container,{scroll:"none"},w.a.createElement(g.Box,null,w.a.createElement(g.Container,{alignBox:"row",className:I.a.header},w.a.createElement(g.Box,{flexible:!0,className:I.a.title,"data-title":l.name},l.name),w.a.createElement(g.Box,{flexible:!0,className:I.a.count},a+1,"/",m),w.a.createElement(g.Box,{flexible:!0,className:I.a.menuBar},w.a.createElement(g.Container,{tagName:"span",alignBox:"row",wrap:!0,className:I.a.menuGroup},i?w.a.createElement("div",{className:I.a.menu,onClick:this.toogleZoom},w.a.createElement(f.TopbandFontIcon,{name:"zoomOut",size:"20"})):w.a.createElement("div",{className:I.a.menu,onClick:this.toogleZoom},w.a.createElement(f.TopbandFontIcon,{name:"zoomIn",size:"20"})),w.a.createElement(x.a,{className:I.a.menu,href:r,target:"_blank"},w.a.createElement(f.TopbandFontIcon,{name:"newtab",size:"17",isBold:!0})),w.a.createElement(x.a,{className:I.a.menu,href:r,download:!0},w.a.createElement(f.CommonFontIcon,{name:"inbox",size:"20"})),w.a.createElement("div",{className:I.a.menu,onClick:this.closeAttachmentViewer},w.a.createElement(f.CommunityFontIcon,{name:"inappClose",size:"15"})))))),w.a.createElement(g.Box,{flexible:!0},w.a.createElement(g.Container,{alignBox:"row"},w.a.createElement(g.Box,{className:I.a.arrowBox+" "+(0==a?I.a.hidden:""),onClick:this.changeSelectedIndex.bind(this,a-1)},w.a.createElement(f.CommonFontIcon,{name:"arrowLeft3",iconClass:I.a.arrow})),w.a.createElement(g.Box,{flexible:!0,className:I.a.preview,scroll:"both"},w.a.createElement("img",{className:i?I.a.zoomOut:I.a.zoomIn,src:r,onClick:this.toogleZoom,alt:" "})),w.a.createElement(g.Box,{className:I.a.arrowBox+" "+(m==a+1?I.a.hidden:""),onClick:this.changeSelectedIndex.bind(this,a+1)},w.a.createElement(f.CommonFontIcon,{name:"arrowRight3",iconClass:I.a.arrow})))),1!=m&&w.a.createElement("span",{className:I.a.button,onClick:this.togglePViewList},o?w.a.createElement("span",{className:I.a.downArrow},w.a.createElement(f.CommonFontIcon,{name:"arrow1",size:"15",color:"pure"})):w.a.createElement(f.TopbandFontIcon,{name:"pullDown",size:"15",color:"pure"})),w.a.createElement(g.Box,{className:"\n              "+(o&&1!=m?I.a.footerActive:"")+" "+I.a.footer+" "},w.a.createElement("div",{className:I.a.listContainer},w.a.createElement(g.Container,{alignBox:"row",scroll:"horizontal",tagName:"ul",className:I.a.imgList,eleRef:function(t){return e.imgListCont=t}},t.map(function(t,n){return w.a.createElement("li",{className:I.a.imgItem+" "+(n==a?I.a.selected:""),key:n,onClick:e.changeSelectedIndex.bind(e,n),ref:function(t){return e["img_"+n]=t}},w.a.createElement("img",{src:t.viewUrl?t.viewUrl:e.constructImgURL(t.href),alt:" ",className:I.a.image}))})))))}}]),t}(h.Component);t.default=V,V.propTypes={hideAttachmentViewer:p.a.func,orgId:p.a.string,previewObj:p.a.object}}}]);